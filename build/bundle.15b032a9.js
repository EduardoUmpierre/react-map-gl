!function(e){var t={};function __webpack_require__(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,__webpack_require__),r.l=!0,r.exports}__webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.d=function(e,t,n){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.t=function(e,t){if(1&t&&(e=__webpack_require__(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(__webpack_require__.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)__webpack_require__.d(n,r,function(t){return e[t]}.bind(null,r));return n},__webpack_require__.n=function(e){var t=e&&e.__esModule?function getDefault(){return e.default}:function getModuleExports(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=267)}([function(e,t,n){"use strict";function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",function(){return _defineProperty})},function(e,t,n){"use strict";e.exports=n(308)},function(e,t,n){e.exports=n(314)()},function(e,t,n){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",function(){return _classCallCheck})},function(e,t,n){"use strict";function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}n.d(t,"a",function(){return _createClass})},function(e,t,n){"use strict";function assert(e,t){if(!e)throw new Error(t||"luma.gl: assertion failed.")}n.d(t,"a",function(){return assert})},function(e,t,n){"use strict";var r=n(77),i=n(144);var o=n(5),a={};function uid(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";a[e]=a[e]||1;var t=a[e]++;return"".concat(e,"-").concat(t)}function isPowerOfTwo(e){return Object(o.a)("number"==typeof e,"Input must be a number"),e&&0==(e&e-1)}function isObjectEmpty(e){var t=!0;for(var n in e){t=!1;break}return t}var s=n(38);function formatArrayValue(e,t){for(var n=t.maxElts,r=void 0===n?16:n,i=t.size,o=void 0===i?1:i,a="[",s=0;s<e.length&&s<r;++s)s>0&&(a+=",".concat(s%o==0?" ":"")),a+=formatValue(e[s],t);var l=e.length>r?"...":"]";return"".concat(a).concat(l)}function formatValue(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.isInteger,r=void 0!==n&&n;if(Array.isArray(e)||ArrayBuffer.isView(e))return formatArrayValue(e,t);if(!Number.isFinite(e))return String(e);if(Math.abs(e)<1e-16)return r?"0":"0.";if(r)return e.toFixed(0);if(Math.abs(e)>100&&Math.abs(e)<1e4)return e.toFixed(0);var i=e.toPrecision(2);return i.indexOf(".0")===i.length-2?i.slice(0,-1):i}var l=n(145);n.d(t,"c",function(){return r.a}),n.d(t,"e",function(){return i.a}),n.d(t,"i",function(){return uid}),n.d(t,"f",function(){return isPowerOfTwo}),n.d(t,"d",function(){return isObjectEmpty}),n.d(t,"g",function(){return s.a}),n.d(t,"b",function(){return formatValue}),n.d(t,"a",function(){return o.a}),n.d(t,"h",function(){return l.a})},function(e,t,n){"use strict";var r=n(76),i=(n(143),n(34)),o=n(8),a=n(33),s="Failed to create WebGL context in Node.js, headless gl not available",l="Failed to create WebGL context in Node.js, headless gl returned null";function createHeadlessContext(e){var t=e.width,n=e.height,r=e.opts,i=e.onError,o=r.webgl1;if(r.webgl2&&!o)return i("headless-gl does not support WebGL2");if(!a.d)return i(s);var u=Object(a.d)(t,n,r);return u||i(l)}var u,c=n(6),p=c.c&&"undefined"!=typeof document,h=p&&"complete"===document.readyState;function getPageLoadPromise(){return u||(u=p?new Promise(function(e,t){if(p&&"complete"===document.readyState)return h=!0,void e(document);window.onload=function(){h=!0,e(document)}}):Promise.resolve({})),u}function createCanvas(e){var t=e.width,n=void 0===t?800:t,r=e.height,i=void 0===r?600:r,o=e.id,a=void 0===o?"gl-canvas":o,s=e.insert,l=void 0===s||s,u=document.createElement("canvas");if(u.id=a,u.style.width=Number.isFinite(n)?"".concat(n,"px"):"100%",u.style.height=Number.isFinite(i)?"".concat(i,"px"):"100%",l){var c=document.body;c.insertBefore(u,c.firstChild)}return u}function getCanvas(e){var t,n=e.canvas,r=e.width,i=e.height,o=e.onError,a=void 0===o?function(){}:o;return"string"==typeof n?(h||a("createGLContext called on canvas '".concat(n,"' before page was loaded")),t=document.getElementById(n)):t=n||createCanvas({id:"lumagl-canvas",width:r,height:i,onError:a}),t}function createBrowserContext(e){var t=e.canvas,n=e.opts,r=void 0===n?{}:n,i=e.onError,o=void 0===i?function(e){return null}:i;function onContextCreationError(e){o("WebGL context: ".concat(e.statusMessage||"Unknown error"))}t.addEventListener("webglcontextcreationerror",onContextCreationError,!1);var a=r.webgl1,s=void 0===a||a,l=r.webgl2,u=void 0===l||l,c=null;return u&&(c=(c=c||t.getContext("webgl2",r))||t.getContext("experimental-webgl2",r)),s&&(c=(c=c||t.getContext("webgl",r))||t.getContext("experimental-webgl",r)),t.removeEventListener("webglcontextcreationerror",onContextCreationError,!1),c||o("Failed to create ".concat(u&&!s?"WebGL2":"WebGL"," context"))}var f=n(78),d=n(3),g=n(22);function getContextData(e){return e.luma=e.luma||{},e.luma}function makeDebugContext(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).debug;return null===e?null:void 0===t||t?getDebugContext(e):getRealContext(e)}function getRealContext(e){if(null===e)return null;var t=getContextData(e);return t.realContext?t.realContext:e}function getDebugContext(e){if(null===e)return null;if(!g.a.WebGLDebug)return c.g.warn('WebGL debug mode not activated. import "luma.gl/debug" to enable.')(),e;var t=getContextData(e);if(t.realContext)return e;if(t.debugContext)return t.debugContext;var n=g.a.WebGLDebug.makeDebugContext(e,onGLError,onValidateGLFunc);return Object.assign(function WebGLDebugContext(){Object(d.a)(this,WebGLDebugContext)}.prototype,n),t.debugContext=n,n.debug=!0,n.gl=e,c.g.info("debug context actived."),n}function getFunctionString(e,t){var n=g.a.WebGLDebug.glFunctionArgsToString(e,t);return n="".concat(n.slice(0,100)).concat(n.length>100?"...":""),"gl.".concat(e,"(").concat(n,")")}function onGLError(e,t,n){var r=g.a.WebGLDebug.glEnumToString(e),i=g.a.WebGLDebug.glFunctionArgsToString(t,n),o="".concat(r," in gl.").concat(t,"(").concat(i,")");if(c.g.throw)throw new Error(o);c.g.error(o)()}function onValidateGLFunc(e,t){var n;if(c.g.priority>=4&&(n=getFunctionString(e,t),c.g.log(4,n)()),c.g.break){n=n||getFunctionString(e,t);c.g.break&&c.g.break.every(function(e){return-1!==n.indexOf(e)})}var r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){if(void 0===a.value){if(n=n||getFunctionString(e,t),c.g.throw)throw new Error("Undefined argument: ".concat(n));c.g.error("Undefined argument: ".concat(n))}}}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}}var m,y=n(0);m={},Object(y.a)(m,33902,{gl1:new Float32Array([1,1])}),Object(y.a)(m,33901,{gl1:new Float32Array([1,1])}),Object(y.a)(m,3379,{gl1:64,gl2:2048}),Object(y.a)(m,34076,{gl1:16}),Object(y.a)(m,34930,{gl1:8}),Object(y.a)(m,35661,{gl1:8}),Object(y.a)(m,35660,{gl1:0}),Object(y.a)(m,34024,{gl1:1}),Object(y.a)(m,36348,{gl1:8}),Object(y.a)(m,34921,{gl1:8}),Object(y.a)(m,36347,{gl1:128}),Object(y.a)(m,36349,{gl1:16}),Object(y.a)(m,3386,{gl1:new Int32Array([0,0])}),Object(y.a)(m,32883,{gl1:0,gl2:256}),Object(y.a)(m,35071,{gl1:0,gl2:256}),Object(y.a)(m,37447,{gl1:0,gl2:0}),Object(y.a)(m,36063,{gl1:0,gl2:4}),Object(y.a)(m,35379,{gl1:0,gl2:0}),Object(y.a)(m,35374,{gl1:0,gl2:0}),Object(y.a)(m,35377,{gl1:0,gl2:0}),Object(y.a)(m,34852,{gl1:0,gl2:4}),Object(y.a)(m,36203,{gl1:0,gl2:0}),Object(y.a)(m,33001,{gl1:0,gl2:0}),Object(y.a)(m,33e3,{gl1:0,gl2:0}),Object(y.a)(m,37157,{gl1:0,gl2:0}),Object(y.a)(m,35373,{gl1:0,gl2:0}),Object(y.a)(m,35657,{gl1:0,gl2:0}),Object(y.a)(m,36183,{gl1:0,gl2:0}),Object(y.a)(m,37137,{gl1:0,gl2:0}),Object(y.a)(m,34045,{gl1:0,gl2:0}),Object(y.a)(m,35978,{gl1:0,gl2:0}),Object(y.a)(m,35979,{gl1:0,gl2:0}),Object(y.a)(m,35968,{gl1:0,gl2:0}),Object(y.a)(m,35376,{gl1:0,gl2:0}),Object(y.a)(m,35375,{gl1:0,gl2:0}),Object(y.a)(m,35659,{gl1:0,gl2:0}),Object(y.a)(m,37154,{gl1:0,gl2:0}),Object(y.a)(m,35371,{gl1:0,gl2:0}),Object(y.a)(m,35658,{gl1:0,gl2:0}),Object(y.a)(m,35076,{gl1:0,gl2:-8,negative:!0}),Object(y.a)(m,35077,{gl1:0,gl2:7}),Object(y.a)(m,35380,{gl1:0,gl2:0});function getGLContextInfo2(e){var t=e.getParameter(7936),n=e.getParameter(7937),r=e.getExtension("WEBGL_debug_renderer_info");return{vendor:r&&e.getParameter(r.UNMASKED_VENDOR_WEBGL||7936)||t,renderer:r&&e.getParameter(r.UNMASKED_RENDERER_WEBGL||7937)||n,vendorMasked:t,rendererMasked:n,version:e.getParameter(7938),shadingLanguageVersion:e.getParameter(35724)}}function glGetDebugInfo(e){return getGLContextInfo2(e)}var v=n(4),_=function noop(e){return e},b=new(function(){function QueryManager(){Object(d.a)(this,QueryManager),this.pendingQueries=new Set,this.invalidQueryType=null,this.invalidErrorMessage="",this.checkInvalid=function(){return!1}}return Object(v.a)(QueryManager,[{key:"poll",value:function poll(e){this.cancelInvalidQueries(e);var t=!0,n=!1,r=void 0;try{for(var i,o=this.pendingQueries.values()[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;if(a.isResultAvailable()){var s=a.getResult();this.resolveQuery(a,s)}}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}}},{key:"setInvalidator",value:function setInvalidator(e){var t=e.queryType,n=e.errorMessage,r=e.checkInvalid;this.invalidQueryType=t,this.invalidErrorMessage=n,this.checkInvalid=r}},{key:"beginQuery",value:function beginQuery(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_;this.cancelInvalidQueries(e.gl),this.cancelQuery(e);var r={};return e.promise=new Promise(function(e,t){r.resolve=e,r.reject=t}),Object.assign(e.promise,r),this.pendingQueries.add(e),e.promise.then(t).catch(n)}},{key:"resolveQuery",value:function resolveQuery(e,t){this.pendingQueries.delete(e),e.promise.resolve(t)}},{key:"rejectQuery",value:function rejectQuery(e,t){this.pendingQueries.delete(e),e.promise&&e.promise.reject(new Error(t))}},{key:"deleteQuery",value:function deleteQuery(e){return this.rejectQuery(e,"Query was deleted before result was available")}},{key:"cancelQuery",value:function cancelQuery(e){return this.rejectQuery(e,"Query was canceled before result was available")}},{key:"invalidateQuery",value:function invalidateQuery(e){e instanceof this.invalidQueryType&&this.rejectQuery(e,this.invalidErrorMessage)}},{key:"cancelInvalidQueries",value:function cancelInvalidQueries(e){if(this.checkInvalid(e)){var t=!0,n=!1,r=void 0;try{for(var i,o=this.pendingQueries.values()[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;this.invalidateQuery(a)}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}}}}]),QueryManager}()),x=n(5),w=32874;function isWebGL2(e){return Boolean(e&&(e instanceof o.a||e.TEXTURE_BINDING_3D===w))}var S={webgl2:!0,webgl1:!0,throwOnFailure:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function createGLContext(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t=Object.assign({},S,t),r=n.canvas,i=n.width,o=n.height,a=n.throwOnError,s=n.manageState,l=n.debug;function onError(e){if(a)throw new Error(e);return null}c.c?e=createBrowserContext({canvas:getCanvas({canvas:r,width:i,height:o,onError:onError}),opts:t}):e=createHeadlessContext({width:i,height:o,opts:t,onError:onError});return e?(s&&Object(f.a)(e,{copyState:!1,log:function log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return c.g.log.apply(c.g,[1].concat(t))()}}),c.c&&l&&(e=makeDebugContext(e,{debug:l}),c.g.priority=Math.max(c.g.priority,1)),logInfo(e),e):null}function resizeGLContext(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.canvas){var n=t.useDevicePixels&&window.devicePixelRatio||1,r="width"in t?t.width:e.canvas.clientWidth,i="height"in t?t.height:e.canvas.clientHeight;return e.canvas.width=r*n,void(e.canvas.height=i*n)}var o=e.getExtension("STACKGL_resize_drawingbuffer");o&&"width"in t&&"height"in t&&o.resize(t.width,t.height)}function logInfo(e){var t=isWebGL2(e)?"WebGL2":"WebGL1",n=glGetDebugInfo(e),r=n?"(".concat(n.vendor,",").concat(n.renderer,")"):"",i=e.debug?" debug":"";c.g.once(0,"".concat(t).concat(i," context ").concat(r))()}var E=n(28),P={VERTEX_ARRAY_OBJECT:["OES_vertex_array_object",!0],TIMER_QUERY:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],INSTANCED_RENDERING:["ANGLE_instanced_arrays",!0],MULTIPLE_RENDER_TARGETS:["WEBGL_draw_buffers",!0],ELEMENT_INDEX_UINT32:["OES_element_index_uint",!0],BLEND_EQUATION_MINMAX:["EXT_blend_minmax",!0],COLOR_ENCODING_SRGB:["EXT_sRGB",!0],TEXTURE_DEPTH:["WEBGL_depth_texture",!0],TEXTURE_FLOAT:["OES_texture_float",!0],TEXTURE_HALF_FLOAT:["OES_texture_half_float",!0],TEXTURE_FILTER_LINEAR_FLOAT:["OES_texture_float_linear"],TEXTURE_FILTER_LINEAR_HALF_FLOAT:["OES_texture_half_float_linear"],TEXTURE_FILTER_ANISOTROPIC:["EXT_texture_filter_anisotropic"],COLOR_ATTACHMENT_RGBA32F:["WEBGL_color_buffer_float","EXT_color_buffer_float"],COLOR_ATTACHMENT_FLOAT:[!1,"EXT_color_buffer_float"],COLOR_ATTACHMENT_HALF_FLOAT:[!1,"EXT_color_buffer_half_float"],GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},C={};Object.keys(P).forEach(function(e){C[e]=e});function getFeature(e,t){var n=P[t];Object(x.a)(n,t);var r=Object(o.n)(e)&&n[1]||n[0],i="string"==typeof r?Boolean(e.getExtension(r)):r;return Object(x.a)(!1===i||!0===i),i}function hasFeature(e,t){return hasFeatures(e,t)}function hasFeatures(e,t){return(t=Array.isArray(t)?t:[t]).every(function(t){return getFeature(e,t)})}function getFeatures(e){if(e.luma=e.luma||{},!e.luma.caps)for(var t in e.luma.caps={},e.luma.caps.webgl2=Object(o.n)(e),P)e.luma.caps[t]=getFeature(e,t);return e.luma.caps}var k=n(20),T=n(11),A=n(10),O=n(12),I=n(30),R="Shader: GLSL source code must be a JavaScript string",L=35632,M=35633,j=function(e){function Shader(e,t){var n;Object(d.a)(this,Shader),Object(o.e)(e),Object(x.a)("string"==typeof t.source,R);var r=Object(o.k)(t.source,null)||t.id||Object(c.i)("unnamed ".concat(Shader.getTypeName(t.shaderType)));return(n=Object(T.a)(this,Object(A.a)(Shader).call(this,e,{id:r}))).shaderType=t.shaderType,n.source=t.source,n.initialize(t),n}return Object(O.a)(Shader,e),Object(v.a)(Shader,null,[{key:"getTypeName",value:function getTypeName(e){switch(e){case M:return"vertex-shader";case L:return"fragment-shader";default:return Object(x.a)(!1),"unknown"}}}]),Object(v.a)(Shader,[{key:"initialize",value:function initialize(e){var t=e.source,n=Object(o.k)(t,null);n&&(this.id=Object(c.i)(n)),this._compile(t)}},{key:"getParameter",value:function getParameter(e){return this.gl.getShaderParameter(this.handle,e)}},{key:"toString",value:function toString(){return"".concat(this.getTypeName(this.shaderType),":").concat(this.id)}},{key:"getName",value:function getName(){return Object(o.k)(this.source)||"unnamed-shader"}},{key:"getSource",value:function getSource(){return this.gl.getShaderSource(this.handle)}},{key:"getTranslatedSource",value:function getTranslatedSource(){var e=this.gl.getExtension("WEBGL_debug_shaders");return e?e.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}},{key:"_compile",value:function _compile(){if(this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){var e=this.gl.getShaderInfoLog(this.handle),t=Object(o.o)(e,this.source,this.shaderType,this.id),n=t.shaderName,r=t.errors,i=t.warnings;throw c.g.error("GLSL compilation errors in ".concat(n,"\n").concat(r))(),c.g.warn("GLSL compilation warnings in ".concat(n,"\n").concat(i))(),new Error("GLSL compilation errors in ".concat(n))}}},{key:"_deleteHandle",value:function _deleteHandle(){this.gl.deleteShader(this.handle)}},{key:"_getOptsFromHandle",value:function _getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}}]),Shader}(I.a),D=function(e){function VertexShader(e,t){return Object(d.a)(this,VertexShader),"string"==typeof t&&(c.g.deprecated("new FragmentShader(gl, source)","new FragmentShader(gl, {source})","6.1"),t={source:t}),Object(T.a)(this,Object(A.a)(VertexShader).call(this,e,Object.assign({},t,{shaderType:M})))}return Object(O.a)(VertexShader,e),Object(v.a)(VertexShader,[{key:"_createHandle",value:function _createHandle(){return this.gl.createShader(M)}}]),VertexShader}(j),F=function(e){function FragmentShader(e,t){return Object(d.a)(this,FragmentShader),"string"==typeof t&&(c.g.deprecated("new FragmentShader(gl, source)","new FragmentShader(gl, {source})","6.1"),t={source:t}),Object(T.a)(this,Object(A.a)(FragmentShader).call(this,e,Object.assign({},t,{shaderType:L})))}return Object(O.a)(FragmentShader,e),Object(v.a)(FragmentShader,[{key:"_createHandle",value:function _createHandle(){return this.gl.createShader(L)}}]),FragmentShader}(j);function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Object(A.a)(e)););return e}function get_get(e,t,n){return(get_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var r=_superPropBase(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}var N,B=n(18),z=n(46),U=n(17),V=n(57),G="EXT_color_buffer_float",W=(N={},Object(y.a)(N,33189,{}),Object(y.a)(N,33190,{gl2:!0}),Object(y.a)(N,36012,{gl2:!0}),Object(y.a)(N,36168,{}),Object(y.a)(N,34041,{}),Object(y.a)(N,35056,{gl2:!0}),Object(y.a)(N,36013,{gl2:!0}),Object(y.a)(N,32854,{}),Object(y.a)(N,36194,{}),Object(y.a)(N,32855,{}),Object(y.a)(N,33321,{gl2:!0}),Object(y.a)(N,33330,{gl2:!0}),Object(y.a)(N,33329,{gl2:!0}),Object(y.a)(N,33332,{gl2:!0}),Object(y.a)(N,33331,{gl2:!0}),Object(y.a)(N,33334,{gl2:!0}),Object(y.a)(N,33333,{gl2:!0}),Object(y.a)(N,33323,{gl2:!0}),Object(y.a)(N,33336,{gl2:!0}),Object(y.a)(N,33335,{gl2:!0}),Object(y.a)(N,33338,{gl2:!0}),Object(y.a)(N,33337,{gl2:!0}),Object(y.a)(N,33340,{gl2:!0}),Object(y.a)(N,33339,{gl2:!0}),Object(y.a)(N,32849,{gl2:!0}),Object(y.a)(N,32856,{gl2:!0}),Object(y.a)(N,32857,{gl2:!0}),Object(y.a)(N,36220,{gl2:!0}),Object(y.a)(N,36238,{gl2:!0}),Object(y.a)(N,36975,{gl2:!0}),Object(y.a)(N,36214,{gl2:!0}),Object(y.a)(N,36232,{gl2:!0}),Object(y.a)(N,36226,{gl2:!0}),Object(y.a)(N,36208,{gl2:!0}),Object(y.a)(N,33325,{gl2:G}),Object(y.a)(N,33327,{gl2:G}),Object(y.a)(N,34842,{gl2:G}),Object(y.a)(N,33326,{gl2:G}),Object(y.a)(N,33328,{gl2:G}),Object(y.a)(N,34836,{gl2:G}),Object(y.a)(N,35898,{gl2:G}),N);function isFormatSupported(e,t,n){var r=n[t];if(!r)return!1;var i=Object(o.n)(e)&&r.gl2||r.gl1;return"string"==typeof i?e.getExtension(i):i}var q=function(e){function Renderbuffer(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(d.a)(this,Renderbuffer),(t=Object(T.a)(this,Object(A.a)(Renderbuffer).call(this,e,n))).initialize(n),Object.seal(Object(B.a)(Object(B.a)(t))),t}return Object(O.a)(Renderbuffer,e),Object(v.a)(Renderbuffer,null,[{key:"isSupported",value:function isSupported(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).format;return!t||isFormatSupported(e,t,W)}},{key:"getSamplesForFormat",value:function getSamplesForFormat(e,t){var n=t.format;return e.getInternalformatParameter(36161,n,32937)}}]),Object(v.a)(Renderbuffer,[{key:"initialize",value:function initialize(e){var t=e.format,n=e.width,r=void 0===n?1:n,i=e.height,a=void 0===i?1:i,s=e.samples,l=void 0===s?0:s;return Object(x.a)(t,"Needs format"),this.gl.bindRenderbuffer(36161,this.handle),0!==l&&Object(o.n)(this.gl)?this.gl.renderbufferStorageMultisample(36161,l,t,r,a):this.gl.renderbufferStorage(36161,t,r,a),this.format=t,this.width=r,this.height=a,this.samples=l,this}},{key:"resize",value:function resize(e){var t=e.width,n=e.height;return t!==this.width||n!==this.height?this.initialize({width:t,height:n,format:this.format,samples:this.samples}):this}},{key:"_createHandle",value:function _createHandle(){return this.gl.createRenderbuffer()}},{key:"_deleteHandle",value:function _deleteHandle(){this.gl.deleteRenderbuffer(this.handle)}},{key:"_bindHandle",value:function _bindHandle(e){this.gl.bindRenderbuffer(36161,e)}},{key:"_syncHandle",value:function _syncHandle(e){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}},{key:"_getParameter",value:function _getParameter(e){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,e)}}]),Renderbuffer}(I.a),H=256,X=1024,K=16384,Z=6144,Y=6145,J=6146,Q=34041,$="clear: bad arguments";function clear_clear(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.framebuffer,r=void 0===n?null:n,i=t.color,o=void 0===i?null:i,a=t.depth,s=void 0===a?null:a,l=t.stencil,u=void 0===l?null:l,c={};r&&(c.framebuffer=r);var p=0;o&&(p|=K,!0!==o&&(c.clearColor=o)),s&&(p|=H,!0!==s&&(c.clearDepth=s)),u&&(p|=X,!0!==s&&(c.clearStencil=s)),Object(x.a)(0!==p,$),Object(E.c)(e,c,function(){e.clear(p)})}function clearBuffer(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.framebuffer,r=void 0===n?null:n,i=t.buffer,a=void 0===i?Z:i,s=t.drawBuffer,l=void 0===s?0:s,u=t.value,c=void 0===u?[0,0,0,0]:u;Object(o.d)(e),Object(E.c)(e,{framebuffer:r},function(){switch(a){case Z:switch(c.constructor){case Int32Array:e.clearBufferiv(a,l,c);break;case Uint32Array:e.clearBufferuiv(a,l,c);break;case Float32Array:default:e.clearBufferfv(a,l,c)}break;case Y:e.clearBufferfv(Y,0,[c]);break;case J:e.clearBufferiv(J,0,[c]);break;case Q:var t=Object(U.a)(c,2),n=t[0],r=t[1];e.clearBufferfi(Q,0,n,r);break;default:Object(x.a)(!1,$)}})}var ee=n(39);function glFormatToComponents(e){switch(e){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return Object(x.a)(!1),0}}function glTypeToBytes(e){switch(e){case 5121:return 1;case 33635:case 32819:case 32820:return 2;case 5126:return 4;default:return Object(x.a)(!1),0}}var te=function(e){function Framebuffer(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(d.a)(this,Framebuffer),(t=Object(T.a)(this,Object(A.a)(Framebuffer).call(this,e,n))).width=null,t.height=null,t.attachments={},t.readBuffer=36064,t.drawBuffers=[36064],t.initialize(n),Object.seal(Object(B.a)(Object(B.a)(t))),t}return Object(O.a)(Framebuffer,e),Object(v.a)(Framebuffer,[{key:"MAX_COLOR_ATTACHMENTS",get:function get(){return this.gl.getParameter(this.gl.MAX_COLOR_ATTACHMENTS)}},{key:"MAX_DRAW_BUFFERS",get:function get(){return this.gl.getParameter(this.gl.MAX_DRAW_BUFFERS)}}],[{key:"isSupported",value:function isSupported(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.colorBufferFloat,r=t.colorBufferHalfFloat;return n&&e.getExtension(Object(o.n)(e)?"EXT_color_buffer_float":"WEBGL.color_buffer_float"),r&&e.getExtension(Object(o.n)(e)?"EXT_color_buffer_float":"EXT_color_buffer_half_float")}},{key:"getDefaultFramebuffer",value:function getDefaultFramebuffer(e){return e.luma=e.luma||{},e.luma.defaultFramebuffer=e.luma.defaultFramebuffer||new Framebuffer(e,{id:"default-framebuffer",handle:null,attachments:{}}),e.luma.defaultFramebuffer}}]),Object(v.a)(Framebuffer,[{key:"initialize",value:function initialize(e){var t=e.width,n=void 0===t?1:t,r=e.height,i=void 0===r?1:r,o=e.attachments,a=void 0===o?null:o,s=e.color,l=void 0===s||s,u=e.depth,c=void 0===u||u,p=e.stencil,h=void 0!==p&&p,f=e.check,d=void 0===f||f,g=e.readBuffer,m=e.drawBuffers;if(Object(x.a)(n>=0&&i>=0,"Width and height need to be integers"),this.width=n,this.height=i,a)for(var y in a){var v=a[y];(Array.isArray(v)?v[0]:v).resize({width:n,height:i})}else a=this._createDefaultAttachments(l,c,h,n,i);this.update({clearAttachments:!0,attachments:a,readBuffer:g,drawBuffers:m}),a&&d&&this.checkStatus()}},{key:"update",value:function update(e){var t=e.attachments,n=void 0===t?{}:t,r=e.readBuffer,i=e.drawBuffers,o=e.clearAttachments,a=void 0!==o&&o,s=e.resizeAttachments,l=void 0===s||s;this.attach(n,{clearAttachments:a,resizeAttachments:l});var u=this.gl,c=u.bindFramebuffer(36160,this.handle);return r&&this._setReadBuffer(r),i&&this._setDrawBuffers(i),u.bindFramebuffer(36160,c||null),this}},{key:"resize",value:function resize(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.width,n=e.height;if(null===this.handle)return Object(x.a)(void 0===t&&void 0===n),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;for(var r in void 0===t&&(t=this.gl.drawingBufferWidth),void 0===n&&(n=this.gl.drawingBufferHeight),t!==this.width&&n!==this.height&&c.g.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(t,"x").concat(n)),this.attachments)this.attachments[r].resize({width:t,height:n});return this.width=t,this.height=n,this}},{key:"attach",value:function attach(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.clearAttachments,i=void 0!==r&&r,o=n.resizeAttachments,a=void 0===o||o,s={};i&&Object.keys(this.attachments).forEach(function(e){s[e]=null}),Object.assign(s,e);var l=this.gl.bindFramebuffer(36160,this.handle);for(var u in s){Object(x.a)(void 0!==u,"Misspelled framebuffer binding point?");var c=Number(u),p=s[c],h=p;if(h)if(h instanceof q)this._attachRenderbuffer({attachment:c,renderbuffer:h});else if(Array.isArray(p)){var f=Object(U.a)(p,3),d=f[0],g=f[1],m=void 0===g?0:g,y=f[2],v=void 0===y?0:y;h=d,this._attachTexture({attachment:c,texture:d,layer:m,level:v})}else this._attachTexture({attachment:c,texture:h,layer:0,level:0});else this._unattach(c);a&&h&&h.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,l||null),Object.assign(this.attachments,e),Object.keys(this.attachments).filter(function(e){return!t.attachments[e]}).forEach(function(e){delete t.attachments[e]})}},{key:"checkStatus",value:function checkStatus(){var e=this.gl,t=e.bindFramebuffer(36160,this.handle),n=e.checkFramebufferStatus(36160);if(e.bindFramebuffer(36160,t||null),36053!==n)throw new Error(_getFrameBufferStatus(n));return this}},{key:"clear",value:function clear(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.color,n=e.depth,r=e.stencil,i=e.drawBuffers,o=void 0===i?[]:i,a=this.gl.bindFramebuffer(36160,this.handle);return(t||n||r)&&clear_clear(this.gl,{color:t,depth:n,stencil:r}),o.forEach(function(e,t){clearBuffer({drawBuffer:t,value:e})}),this.gl.bindFramebuffer(36160,a||null),this}},{key:"readPixels",value:function readPixels(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.x,n=void 0===t?0:t,r=e.y,i=void 0===r?0:r,o=e.width,a=void 0===o?this.width:o,s=e.height,l=void 0===s?this.height:s,u=e.format,c=void 0===u?6408:u,p=e.type,h=e.pixelArray,f=void 0===h?null:h,d=e.attachment,g=void 0===d?36064:d;this.gl;if(36064===g&&null===this.handle&&(g=1028),Object(x.a)(this.attachments[g]),p=p||this.attachments[g].type,!f){p=p||5121;var m=Object(ee.c)(p,{clamped:!1}),y=glFormatToComponents(c);f=f||new m(a*l*y)}p=p||Object(ee.b)(f);var v=this.gl.bindFramebuffer(36160,this.handle);return this.gl.readPixels(n,i,a,l,c,p,f),this.gl.bindFramebuffer(36160,v||null),f}},{key:"readPixelsToBuffer",value:function readPixelsToBuffer(e){var t=e.x,n=void 0===t?0:t,r=e.y,i=void 0===r?0:r,a=e.width,s=void 0===a?this.width:a,l=e.height,u=void 0===l?this.height:l,c=e.format,p=void 0===c?6408:c,h=e.type,f=e.buffer,d=void 0===f?null:f,g=e.byteOffset,m=void 0===g?0:g,y=this.gl;if(Object(o.d)(y),h=h||(d?d.type:5121),!d){var v=glFormatToComponents(p),_=glTypeToBytes(h),b=m+s*u*v*_;d=new k.a(y,{bytes:b,type:h,size:v})}return d.bind({target:35051}),Object(E.c)(y,{framebuffer:this},function(){y.readPixels(n,i,s,u,p,h,m)}),d.unbind({target:35051}),d}},{key:"copyToDataUrl",value:function copyToDataUrl(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.attachment,n=void 0===t?36064:t,r=e.maxHeight,i=void 0===r?Number.MAX_SAFE_INTEGER:r,a=this.readPixels({attachment:n}),s=this.width,l=this.height;l>i;){var u=Object(o.q)({data:a,width:s,height:l});a=u.data,s=u.width,l=u.height}Object(o.h)({data:a,width:s,height:l});var c=document.createElement("canvas");c.width=s,c.height=l;var p=c.getContext("2d"),h=p.createImageData(s,l);return h.data.set(a),p.putImageData(h,0,0),c.toDataURL()}},{key:"copyToImage",value:function copyToImage(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.image,n=void 0===t?null:t,r=e.attachment,i=void 0===r?36064:r,o=e.maxHeight,a=(void 0===o&&Number.MAX_SAFE_INTEGER,this.readDataUrl({attachment:i}));return(n=n||new Image).src=a,n}},{key:"copyToTexture",value:function copyToTexture(e){var t=e.texture,n=e.target,r=e.xoffset,i=void 0===r?0:r,o=e.yoffset,a=void 0===o?0:o,s=e.zoffset,l=void 0===s?0:s,u=e.mipmapLevel,c=void 0===u?0:u,p=(e.attachment,e.x),h=void 0===p?0:p,f=e.y,d=void 0===f?0:f,g=e.width,m=e.height,y=this.gl,v=y.bindFramebuffer(36160,this.handle);switch(Object(x.a)(n||t),t&&(g=Number.isFinite(g)?g:t.width,m=Number.isFinite(m)?m:t.height,t.bind(0)),t.target){case 3553:case 34067:y.copyTexSubImage2D(n||t.target,c,i,a,h,d,g,m);break;case 35866:case 32879:y.copyTexSubImage3D(n||t.target,c,i,a,l,h,d,g,m)}return t&&t.unbind(),y.bindFramebuffer(36160,v||null),t}},{key:"blit",value:function blit(e){var t=e.srcFramebuffer,n=e.attachment,r=void 0===n?36064:n,i=e.srcX0,a=void 0===i?0:i,s=e.srcY0,l=void 0===s?0:s,u=e.srcX1,c=e.srcY1,p=e.dstX0,h=void 0===p?0:p,f=e.dstY0,d=void 0===f?0:f,g=e.dstX1,m=e.dstY1,y=e.color,v=void 0===y||y,_=e.depth,b=void 0!==_&&_,w=e.stencil,S=void 0!==w&&w,E=e.mask,P=void 0===E?0:E,C=e.filter,k=void 0===C?9728:C,T=this.gl;Object(o.d)(T),t.handle||36064!==r||(r=1028),v&&(P|=16384),b&&(P|=256),S&&(P|=1024),Object(x.a)(P),u=void 0===u?t.width:u,c=void 0===c?t.height:c,g=void 0===g?this.width:g,m=void 0===m?this.height:m;var A=T.bindFramebuffer(36009,this.handle),O=T.bindFramebuffer(36008,t.handle);return T.readBuffer(r),T.blitFramebuffer(a,l,u,c,h,d,g,m,P,k),T.readBuffer(this.readBuffer),T.bindFramebuffer(36008,O||null),T.bindFramebuffer(36009,A||null),this}},{key:"invalidate",value:function invalidate(e){var t=e.attachments,n=void 0===t?[]:t,r=e.x,i=void 0===r?0:r,a=e.y,s=void 0===a?0:a,l=e.width,u=e.height,c=this.gl;Object(o.d)(c);var p=c.bindFramebuffer(36008,this.handle);return 0===i&&0===s&&void 0===l&&void 0===u?c.invalidateFramebuffer(36008,n):c.invalidateFramebuffer(36008,n,i,s,l,u),c.bindFramebuffer(36008,p),this}},{key:"getAttachmentParameter",value:function getAttachmentParameter(e,t,n){var r=this._getAttachmentParameterFallback(t);return null===r&&(this.gl.bindFramebuffer(36160,this.handle),r=this.gl.getFramebufferAttachmentParameter(36160,e,t),this.gl.bindFramebuffer(36160,null)),n&&r>1e3&&(r=Object(i.c)(this.gl,r)),r}},{key:"getAttachmentParameters",value:function getAttachmentParameters(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:36064,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[],r={},o=!0,a=!1,s=void 0;try{for(var l,u=n[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value;r[t?Object(i.c)(this.gl,c):c]=this.getAttachmentParameter(e,c,t)}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}return r}},{key:"getParameters",value:function getParameters(){for(var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=Object.keys(this.attachments),n={},r=0;r<t.length;r++){var o=t[r],a=Number(o);n[e?Object(i.c)(this.gl,a):a]=this.getAttachmentParameters(a,e)}return n}},{key:"show",value:function show(){return"undefined"!=typeof window&&window.open(this.copyToDataUrl(),"luma-debug-texture"),this}},{key:"log",value:function log(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e>c.g.priority||"undefined"==typeof window)return this;t=t||"Framebuffer ".concat(this.id);var n=this.copyToDataUrl({maxHeight:100});return c.g.image({priority:e,message:t,image:n},t)(),this}},{key:"bind",value:function bind(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).target,t=void 0===e?36160:e;return this.gl.bindFramebuffer(t,this.handle),this}},{key:"unbind",value:function unbind(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).target,t=void 0===e?36160:e;return this.gl.bindFramebuffer(t,null),this}},{key:"_createDefaultAttachments",value:function _createDefaultAttachments(e,t,n,r,i){var o,a=null;e&&((a=a||{})[36064]=new V.a(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:r,height:i,mipmaps:!1,parameters:(o={},Object(y.a)(o,10241,9728),Object(y.a)(o,10240,9728),Object(y.a)(o,10242,33071),Object(y.a)(o,10243,33071),o)}));return t&&n?(a=a||{})[33306]=new q(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:r,height:111}):t?(a=a||{})[36096]=new q(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:r,height:i}):n&&Object(x.a)(!1),a}},{key:"_unattach",value:function _unattach(e){var t=this.attachments[e];t&&(t instanceof q?this.gl.framebufferRenderbuffer(36160,e,36161,null):this.gl.framebufferTexture2D(36160,e,3553,null,0),delete this.attachments[e])}},{key:"_attachRenderbuffer",value:function _attachRenderbuffer(e){var t=e.attachment,n=void 0===t?36064:t,r=e.renderbuffer;this.gl.framebufferRenderbuffer(36160,n,36161,r.handle),this.attachments[n]=r}},{key:"_attachTexture",value:function _attachTexture(e){var t=e.attachment,n=void 0===t?36064:t,r=e.texture,i=e.layer,o=e.level,a=this.gl;switch(a.bindTexture(r.target,r.handle),r.target){case 35866:case 32879:a.framebufferTextureLayer(36160,n,r.target,o,i);break;case 34067:var s=mapIndexToCubeMapFace(i);a.framebufferTexture2D(36160,n,s,r.handle,o);break;case 3553:a.framebufferTexture2D(36160,n,3553,r.handle,o);break;default:Object(x.a)(!1,"Illegal texture type")}a.bindTexture(r.target,null),this.attachments[n]=r}},{key:"_setReadBuffer",value:function _setReadBuffer(e,t){Object(o.n)(e)?e.readBuffer(t):Object(x.a)(36064===t||1029===t,"Multiple render targets not supported"),this.readBuffer=t}},{key:"_setDrawBuffers",value:function _setDrawBuffers(e,t){if(Object(o.n)(e))e.drawBuffers(t);else{var n=e.getExtension("WEBGL.draw_buffers");n?n.drawBuffersWEBGL(t):Object(x.a)(1===t.length&&(36064===t[0]||1029===t[0]),"Multiple render targets not supported")}this.drawBuffers=t}},{key:"_getAttachmentParameterFallback",value:function _getAttachmentParameterFallback(e){var t=getFeatures(this.gl);switch(e){case 36052:return t.webgl2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return t.webgl2?null:8;case 33297:return t.webgl2?null:5125;case 33296:return t.webgl2||t.EXT_sRGB?null:9729;default:return null}}},{key:"_createHandle",value:function _createHandle(){return this.gl.createFramebuffer()}},{key:"_deleteHandle",value:function _deleteHandle(){this.gl.deleteFramebuffer(this.handle)}},{key:"_bindHandle",value:function _bindHandle(e){return this.gl.bindFramebuffer(36160,e)}},{key:"color",get:function get(){return this.attachments[36064]||null}},{key:"texture",get:function get(){return this.attachments[36064]||null}},{key:"depth",get:function get(){return this.attachments[36096]||this.attachments[33306]||null}},{key:"stencil",get:function get(){return this.attachments[36128]||this.attachments[33306]||null}}]),Framebuffer}(I.a);function mapIndexToCubeMapFace(e){return e<34069?e+34069:e}function _getFrameBufferStatus(e){return(te.STATUS||{})[e]||"Framebuffer error ".concat(e)}te.ATTACHMENT_PARAMETERS=[36049,36048,33296,33298,33299,33300,33301,33302,33303];var ne,re=function(e){function Sampler(e,t){var n;return Object(d.a)(this,Sampler),Object(o.d)(e),n=Object(T.a)(this,Object(A.a)(Sampler).call(this,e,t)),Object.seal(Object(B.a)(Object(B.a)(n))),n}return Object(O.a)(Sampler,e),Object(v.a)(Sampler,null,[{key:"isSupported",value:function isSupported(e){return Object(o.n)(e)}}]),Object(v.a)(Sampler,[{key:"bind",value:function bind(e){return this.gl.bindSampler(e,this.handle),this}},{key:"unbind",value:function unbind(e){return this.gl.bindSampler(e,null),this}},{key:"_createHandle",value:function _createHandle(){return this.gl.createSampler()}},{key:"_deleteHandle",value:function _deleteHandle(){this.gl.deleteSampler(this.handle)}},{key:"_getParameter",value:function _getParameter(e){return this.gl.getSamplerParameter(this.handle,e)}},{key:"_setParameter",value:function _setParameter(e,t){switch(e){case 33082:case 33083:this.gl.samplerParameterf(this.handle,e,t);break;default:this.gl.samplerParameteri(this.handle,e,t)}return this}}]),Sampler}(I.a),ie=(ne={},Object(y.a)(ne,5126,function(e,t,n){return e.uniform1fv(t,toFloatArray(n,1))}),Object(y.a)(ne,35664,function(e,t,n){return e.uniform2fv(t,toFloatArray(n,2))}),Object(y.a)(ne,35665,function(e,t,n){return e.uniform3fv(t,toFloatArray(n,3))}),Object(y.a)(ne,35666,function(e,t,n){return e.uniform4fv(t,toFloatArray(n,4))}),Object(y.a)(ne,5124,function(e,t,n){return e.uniform1iv(t,toIntArray(n,1))}),Object(y.a)(ne,35667,function(e,t,n){return e.uniform2iv(t,toIntArray(n,2))}),Object(y.a)(ne,35668,function(e,t,n){return e.uniform3iv(t,toIntArray(n,3))}),Object(y.a)(ne,35669,function(e,t,n){return e.uniform4iv(t,toIntArray(n,4))}),Object(y.a)(ne,35670,function(e,t,n){return e.uniform1iv(t,toIntArray(n,1))}),Object(y.a)(ne,35671,function(e,t,n){return e.uniform2iv(t,toIntArray(n,2))}),Object(y.a)(ne,35672,function(e,t,n){return e.uniform3iv(t,toIntArray(n,3))}),Object(y.a)(ne,35673,function(e,t,n){return e.uniform4iv(t,toIntArray(n,4))}),Object(y.a)(ne,35674,function(e,t,n){return e.uniformMatrix2fv(t,!1,toFloatArray(n,4))}),Object(y.a)(ne,35675,function(e,t,n){return e.uniformMatrix3fv(t,!1,toFloatArray(n,9))}),Object(y.a)(ne,35676,function(e,t,n){return e.uniformMatrix4fv(t,!1,toFloatArray(n,16))}),Object(y.a)(ne,35678,function(e,t,n){return e.uniform1i(t,n)}),Object(y.a)(ne,35680,function(e,t,n){return e.uniform1i(t,n)}),Object(y.a)(ne,5125,function(e,t,n){return e.uniform1uiv(t,toUIntArray(n,1))}),Object(y.a)(ne,36294,function(e,t,n){return e.uniform2uiv(t,toUIntArray(n,2))}),Object(y.a)(ne,36295,function(e,t,n){return e.uniform3uiv(t,toUIntArray(n,3))}),Object(y.a)(ne,36296,function(e,t,n){return e.uniform4uiv(t,toUIntArray(n,4))}),Object(y.a)(ne,35685,function(e,t,n){return e.uniformMatrix2x3fv(t,!1,toFloatArray(n,6))}),Object(y.a)(ne,35686,function(e,t,n){return e.uniformMatrix2x4fv(t,!1,toFloatArray(n,8))}),Object(y.a)(ne,35687,function(e,t,n){return e.uniformMatrix3x2fv(t,!1,toFloatArray(n,6))}),Object(y.a)(ne,35688,function(e,t,n){return e.uniformMatrix3x4fv(t,!1,toFloatArray(n,12))}),Object(y.a)(ne,35689,function(e,t,n){return e.uniformMatrix4x2fv(t,!1,toFloatArray(n,8))}),Object(y.a)(ne,35690,function(e,t,n){return e.uniformMatrix4x3fv(t,!1,toFloatArray(n,12))}),Object(y.a)(ne,35679,function(e,t,n){return e.uniform1i(t,n)}),Object(y.a)(ne,35682,function(e,t,n){return e.uniform1i(t,n)}),Object(y.a)(ne,36289,function(e,t,n){return e.uniform1i(t,n)}),Object(y.a)(ne,36292,function(e,t,n){return e.uniform1i(t,n)}),Object(y.a)(ne,36293,function(e,t,n){return e.uniform1i(t,n)}),Object(y.a)(ne,36298,function(e,t,n){return e.uniform1i(t,n)}),Object(y.a)(ne,36299,function(e,t,n){return e.uniform1i(t,n)}),Object(y.a)(ne,36300,function(e,t,n){return e.uniform1i(t,n)}),Object(y.a)(ne,36303,function(e,t,n){return e.uniform1i(t,n)}),Object(y.a)(ne,36306,function(e,t,n){return e.uniform1i(t,n)}),Object(y.a)(ne,36307,function(e,t,n){return e.uniform1i(t,n)}),Object(y.a)(ne,36308,function(e,t,n){return e.uniform1i(t,n)}),Object(y.a)(ne,36311,function(e,t,n){return e.uniform1i(t,n)}),ne),oe={},ae={},se={},le=[0];function toTypedArray(e,t,n,r){1===t&&"boolean"==typeof e&&(e=e?1:0),Number.isFinite(e)&&(le[0]=e,e=le);var i=e.length;if(i%t&&c.g.warn("Uniform size should be multiples of ".concat(t),e)(),e instanceof n)return e;var o=r[i];o||(o=new n(i),r[i]=o);for(var a=0;a<i;a++)o[a]=e[a];return o}function toFloatArray(e,t){return toTypedArray(e,t,Float32Array,oe)}function toIntArray(e,t){return toTypedArray(e,t,Int32Array,ae)}function toUIntArray(e,t){return toTypedArray(e,t,Uint32Array,se)}function parseUniformName(e){if("]"!==e[e.length-1])return{name:e,length:1,isArray:!1};var t=e.match(/([^\[]*)(\[[0-9]+\])?/);if(!t||t.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(e));return{name:t[1],length:t[2]||1,isArray:Boolean(t[2])}}function getUniformSetter(e,t,n){var r=ie[n.type];if(!r)throw new Error("Unknown GLSL uniform type ".concat(n.type));return r.bind(null,e,t)}function checkUniformValues(e,t,n){for(var r in e){var i=e[r];if((!n||Boolean(n[r]))&&!checkUniformValue(i))throw t=t?"".concat(t," "):"",console.error("".concat(t," Bad uniform ").concat(r),i),new Error("".concat(t," Bad uniform ").concat(r))}return!0}function checkUniformValue(e){return Array.isArray(e)||ArrayBuffer.isView(e)?checkUniformArray(e):!!isFinite(e)||(!0===e||!1===e||(e instanceof z.a||e instanceof re||(e instanceof q||e instanceof te&&Boolean(e.texture))))}function checkUniformArray(e){if(0===e.length)return!1;for(var t=Math.min(e.length,16),n=0;n<t;++n)if(!Number.isFinite(e[n]))return!1;return!0}function areUniformsEqual(e,t){if(Array.isArray(e)||ArrayBuffer.isView(e)){if(!t)return!1;var n=e.length;if(t.length!==n)return!1;for(var r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}return e===t}var ue,ce=n(48),pe=5120,he=5121,fe=5122,de=5123,ge=0,me=1,ye=2,ve=3,_e=4,be=5,xe=6,we=5126,Se=(ue={},Object(y.a)(ue,we,[we,1,"float"]),Object(y.a)(ue,35664,[we,2,"vec2"]),Object(y.a)(ue,35665,[we,3,"vec3"]),Object(y.a)(ue,35666,[we,4,"vec4"]),Object(y.a)(ue,5124,[5124,1,"int"]),Object(y.a)(ue,35667,[5124,2,"ivec2"]),Object(y.a)(ue,35668,[5124,3,"ivec3"]),Object(y.a)(ue,35669,[5124,4,"ivec4"]),Object(y.a)(ue,5125,[5125,1,"uint"]),Object(y.a)(ue,36294,[5125,2,"uvec2"]),Object(y.a)(ue,36295,[5125,3,"uvec3"]),Object(y.a)(ue,36296,[5125,4,"uvec4"]),Object(y.a)(ue,35670,[we,1,"bool"]),Object(y.a)(ue,35671,[we,2,"bvec2"]),Object(y.a)(ue,35672,[we,3,"bvec3"]),Object(y.a)(ue,35673,[we,4,"bvec4"]),Object(y.a)(ue,35674,[we,8,"mat2"]),Object(y.a)(ue,35685,[we,8,"mat2x3"]),Object(y.a)(ue,35686,[we,8,"mat2x4"]),Object(y.a)(ue,35675,[we,12,"mat3"]),Object(y.a)(ue,35687,[we,12,"mat3x2"]),Object(y.a)(ue,35688,[we,12,"mat3x4"]),Object(y.a)(ue,35676,[we,16,"mat4"]),Object(y.a)(ue,35689,[we,16,"mat4x2"]),Object(y.a)(ue,35690,[we,16,"mat4x3"]),ue);function getPrimitiveDrawMode(e){switch(e){case ge:return ge;case me:case ve:case ye:return me;case _e:case be:case xe:return _e;default:return Object(x.a)(!1),0}}function decomposeCompositeGLType(e){var t=Se[e];if(!t)return null;var n=Object(U.a)(t,2);return{type:n[0],components:n[1]}}function getCompositeGLType(e,t){switch(e){case pe:case he:case fe:case de:e=we}for(var n in Se){var r=Object(U.a)(Se[n],3),i=r[0],o=r[1],a=r[2];if(i===e&&o===t)return{glType:n,name:a}}return null}var Ee=function(){function ProgramConfiguration(e){Object(d.a)(this,ProgramConfiguration),this.id=e.id,this.attributeInfos=[],this.attributeInfosByName={},this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(e),this._readVaryingsFromProgram(e)}return Object(v.a)(ProgramConfiguration,[{key:"getAttributeInfo",value:function getAttributeInfo(e){var t=Number(e);return Number.isFinite(t)?this.attributeInfos[t]:this.attributeInfosByName[e]||null}},{key:"getAttributeLocation",value:function getAttributeLocation(e){var t=this.getAttributeInfo(e);return t?t.location:-1}},{key:"getAttributeAccessor",value:function getAttributeAccessor(e){var t=this.getAttributeInfo(e);return t?t.accessor:null}},{key:"getVaryingInfo",value:function getVaryingInfo(e){var t=Number(e);return Number.isFinite(t)?this.varyingInfos[t]:this.varyingInfosByName[e]||null}},{key:"getVaryingIndex",value:function getVaryingIndex(e){var t=this.getVaryingInfo();return t?t.location:-1}},{key:"getVaryingAccessor",value:function getVaryingAccessor(e){var t=this.getVaryingInfo();return t?t.accessor:null}},{key:"_readAttributesFromProgram",value:function _readAttributesFromProgram(e){for(var t=e.gl,n=t.getProgramParameter(e.handle,35721),r=0;r<n;r++){var i=t.getActiveAttrib(e.handle,r),o=i.name,a=i.type,s=i.size,l=t.getAttribLocation(e.handle,o);l>=0&&this._addAttribute(l,o,a,s)}this.attributeInfos.sort(function(e,t){return e.location-t.location})}},{key:"_readVaryingsFromProgram",value:function _readVaryingsFromProgram(e){var t=e.gl;if(Object(o.n)(t)){for(var n=t.getProgramParameter(e.handle,35971),r=0;r<n;r++){var i=t.getTransformFeedbackVarying(e.handle,r),a=i.name,s=i.type,l=i.size;this._addVarying(r,a,s,l)}this.varyingInfos.sort(function(e,t){return e.location-t.location})}}},{key:"_addAttribute",value:function _addAttribute(e,t,n,r){var i=decomposeCompositeGLType(n),o={type:i.type,size:r*i.components};this._inferProperties(e,t,o);var a={location:e,name:t,accessor:new ce.a(o)};this.attributeInfos.push(a),this.attributeInfosByName[a.name]=a}},{key:"_inferProperties",value:function _inferProperties(e,t,n){/instance/i.test(t)&&(n.divisor=1)}},{key:"_addVarying",value:function _addVarying(e,t,n,r){var i=decomposeCompositeGLType(n),o=i.type,a=i.components,s={location:e,name:t,accessor:new ce.a({type:o,size:r*a})};this.varyingInfos.push(s),this.varyingInfosByName[s.name]=s}}]),ProgramConfiguration}(),Pe=function(e){function Program(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(d.a)(this,Program),(t=Object(T.a)(this,Object(A.a)(Program).call(this,e,n))).stubRemovedMethods("Program","v6.0",["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"]),t._isCached=!1,t.initialize(n),Object.seal(Object(B.a)(Object(B.a)(t))),t._setId(n.id),t}return Object(O.a)(Program,e),Object(v.a)(Program,[{key:"initialize",value:function initialize(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.vs,n=e.fs,r=e.varyings,i=e.bufferMode,a=void 0===i?35981:i;return this.vs="string"==typeof t?new D(this.gl,{id:"".concat(e.id,"-vs"),source:t}):t,this.fs="string"==typeof n?new F(this.gl,{id:"".concat(e.id,"-fs"),source:n}):n,Object(x.a)(this.vs instanceof D),Object(x.a)(this.fs instanceof F),this.uniforms={},this.samplers={},r&&(Object(o.d)(this.gl),this.varyings=r,this.gl.transformFeedbackVaryings(this.handle,r,a)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new Ee(this),this.setProps(e)}},{key:"delete",value:function _delete(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isCached?this:get_get(Object(A.a)(Program.prototype),"delete",this).call(this,e)}},{key:"setProps",value:function setProps(e){return"uniforms"in e&&this.setUniforms(e.uniforms,e.samplers),this}},{key:"draw",value:function draw(e){var t=this,n=e.logPriority,r=e.drawMode,a=void 0===r?4:r,s=e.vertexCount,l=e.offset,u=void 0===l?0:l,p=e.start,h=e.end,f=e.isIndexed,d=void 0!==f&&f,g=e.indexType,m=void 0===g?5123:g,y=e.isInstanced,v=void 0!==y&&y,_=e.instanceCount,b=void 0===_?0:_,w=e.vertexArray,S=void 0===w?null:w,P=e.transformFeedback,C=e.framebuffer,k=e.parameters,T=void 0===k?{}:k,A=e.uniforms,O=void 0===A?{}:A,I=e.samplers,R=void 0===I?{}:I;if(void 0!==n){var L=C?C.id:"default",M="mode=".concat(Object(i.a)(this.gl,a)," verts=").concat(s," ")+"instances=".concat(b," indexType=").concat(Object(i.a)(this.gl,m)," ")+"isInstanced=".concat(v," isIndexed=").concat(d," ")+"Framebuffer=".concat(L);c.g.log(n,M)()}return this.gl.useProgram(this.handle),Object(x.a)(S),S.bindForDraw(s,b,function(){if(O&&(c.g.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)"),t.setUniforms(O,R)),t._bindTextures(),void 0!==C&&(T=Object.assign({},T,{framebuffer:C})),P){var e=getPrimitiveDrawMode(a);P.begin(e)}Object(E.c)(t.gl,T,function(){d&&v?t.gl.drawElementsInstanced(a,s,m,u,b):d&&Object(o.n)(t.gl)&&!isNaN(p)&&!isNaN(h)?t.gl.drawRangeElements(a,p,h,s,m,u):d?t.gl.drawElements(a,s,m,u):v?t.gl.drawArraysInstanced(a,u,s,b):t.gl.drawArrays(a,u,s)}),P&&P.end()}),this}},{key:"setSamplers",value:function setSamplers(e){Object.assign(this.samplers,e)}},{key:"setUniforms",value:function setUniforms(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},i=!1,o={};for(var a in t)areUniformsEqual(this.uniforms[a],t[a])||(i=!0,o[a]=t[a],this.uniforms[a]=(e=t[a],Array.isArray(e)||ArrayBuffer.isView(e)?e.slice():e));return i&&(r(),checkUniformValues(o,this.id,this._uniformSetters),Object.assign(this.samplers,n),this._setUniforms(o)),this}},{key:"_bindTextures",value:function _bindTextures(){for(var e in this.uniforms){var t=this._uniformSetters[e];if(t&&void 0!==t.textureIndex){var n=this.uniforms[e],r=this.samplers[e];n instanceof te&&(n=n.texture),n instanceof z.a&&n.bind(t.textureIndex),r&&r.bind(t.textureIndex)}}}},{key:"_setUniforms",value:function _setUniforms(e){for(var t in this.gl.useProgram(this.handle),e){var n=e[t],r=this._uniformSetters[t];if(r)if(n instanceof te&&(n=n.texture),n instanceof z.a){void 0===r.textureIndex&&(r.textureIndex=this._textureIndexCounter++);var i=n,o=r.textureIndex;i.bind(o),r(o)}else r(n)}return this}},{key:"_createHandle",value:function _createHandle(){return this.gl.createProgram()}},{key:"_deleteHandle",value:function _deleteHandle(){this.gl.deleteProgram(this.handle)}},{key:"_getOptionsFromHandle",value:function _getOptionsFromHandle(e){var t=this.gl.getAttachedShaders(e),n={},r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value;switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:n.vs=new D({handle:l});break;case 35632:n.fs=new F({handle:l})}}}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}},{key:"_getParameter",value:function _getParameter(e){return this.gl.getProgramParameter(this.handle,e)}},{key:"_setId",value:function _setId(e){if(!e){var t=this._getName();this.id=Object(c.i)(t)}}},{key:"_getName",value:function _getName(){var e=this.vs.getName()||this.fs.getName();return e=(e=e.replace(/shader/i,""))?"".concat(e,"-program"):"program"}},{key:"_compileAndLink",value:function _compileAndLink(){var e=this.gl;if((e.attachShader(this.handle,this.vs.handle),e.attachShader(this.handle,this.fs.handle),c.g.time(4,"linkProgram for ".concat(this._getName()))(),e.linkProgram(this.handle),c.g.timeEnd(4,"linkProgram for ".concat(this._getName()))(),e.debug||c.g.priority>0)&&(e.validateProgram(this.handle),!e.getProgramParameter(this.handle,35714)))throw new Error("Error linking: ".concat(e.getProgramInfoLog(this.handle)))}},{key:"_readUniformLocationsFromLinkedProgram",value:function _readUniformLocationsFromLinkedProgram(){var e=this.gl;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(var t=0;t<this._uniformCount;t++){var n=this.gl.getActiveUniform(this.handle,t),r=parseUniformName(n.name),i=r.name,o=(r.isArray,e.getUniformLocation(this.handle,i));this._uniformSetters[i]=getUniformSetter(e,o,n)}this._textureIndexCounter=0}},{key:"reset",value:function reset(){}},{key:"getActiveUniforms",value:function getActiveUniforms(e,t){return this.gl.getActiveUniforms(this.handle,e,t)}},{key:"getUniformBlockIndex",value:function getUniformBlockIndex(e){return this.gl.getUniformBlockIndex(this.handle,e)}},{key:"getActiveUniformBlockParameter",value:function getActiveUniformBlockParameter(e,t){return this.gl.getActiveUniformBlockParameter(this.handle,e,t)}},{key:"uniformBlockBinding",value:function uniformBlockBinding(e,t){this.gl.uniformBlockBinding(this.handle,e,t)}}]),Program}(I.a),Ce=(n(91),I.a,function noop(e){return e}),ke=function(e){function Query(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(d.a)(this,Query),t=Object(T.a)(this,Object(A.a)(Query).call(this,e,n));var r=n.onComplete,i=void 0===r?Ce:r,o=n.onError,a=void 0===o?Ce:o;return t.target=null,t.onComplete=i,t.onError=a,t.promise=null,Object.seal(Object(B.a)(Object(B.a)(t))),t}return Object(O.a)(Query,e),Object(v.a)(Query,null,[{key:"isSupported",value:function isSupported(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Object(o.n)(e),r=hasFeatures(e,C.TIMER_QUERY),i=n||r,a=!0,s=!1,l=void 0;try{for(var u,c=t[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){switch(u.value){case"queries":i=i&&n;break;case"timers":i=i&&r;break;case"timestamps":var p=r?e.getQuery(36392,34916):0;i=i&&p>0;break;default:Object(x.a)(!1)}}}catch(e){s=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(s)throw l}}return i}}]),Object(v.a)(Query,[{key:"beginTimeElapsedQuery",value:function beginTimeElapsedQuery(){return this.begin(35007)}},{key:"beginOcclusionQuery",value:function beginOcclusionQuery(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).conservative,t=void 0!==e&&e;return this.begin(t?36202:35887)}},{key:"beginTransformFeedbackQuery",value:function beginTransformFeedbackQuery(){return this.begin(35976)}},{key:"getTimestamp",value:function getTimestamp(){b.beginQuery(this,this.onComplete,this.onError);try{this.gl.queryCounter(this.handle,36392)}catch(e){b.rejectQuery(this,'Timer queries require "EXT_disjoint_timer_query" extension')}return this}},{key:"begin",value:function begin(e){b.beginQuery(this,this.onComplete,this.onError),this.target=e;try{this.gl.beginQuery(this.target,this.handle)}catch(e){b.rejectQuery(this,"Query not supported")}return this}},{key:"end",value:function end(){return this.target&&(this.gl.endQuery(this.target),this.target=null),this}},{key:"cancel",value:function cancel(){return this.end(),b.cancelQuery(this),this}},{key:"isResultAvailable",value:function isResultAvailable(){return this.gl.getQueryParameter(this.handle,34919)}},{key:"getResult",value:function getResult(){var e=this.gl.getQueryParameter(this.handle,34918);return Number.isFinite(e)?e/1e6:0}},{key:"_createHandle",value:function _createHandle(){return Query.isSupported(this.gl)?this.gl.createQuery():null}},{key:"_deleteHandle",value:function _deleteHandle(){b.deleteQuery(this),this.gl.deleteQuery(this.handle)}}],[{key:"poll",value:function poll(e){b.poll(e)}}]),Query}(I.a);b.setInvalidator({queryType:ke,errorMessage:"Disjoint GPU operation invalidated timer queries",checkInvalid:function checkInvalid(e){return e.getParameter(36795)}});n(147),z.a;var Te=function(e){function TransformFeedback(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(d.a)(this,TransformFeedback),Object(o.d)(e),(t=Object(T.a)(this,Object(A.a)(TransformFeedback).call(this,e,n))).initialize(n),t.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(Object(B.a)(Object(B.a)(t))),t}return Object(O.a)(TransformFeedback,e),Object(v.a)(TransformFeedback,null,[{key:"isSupported",value:function isSupported(e){return Object(o.n)(e)}}]),Object(v.a)(TransformFeedback,[{key:"initialize",value:function initialize(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,Object(c.d)(this.buffers)||this.bind(function(){return e._unbindBuffers()}),this.setProps(t),this}},{key:"setProps",value:function setProps(e){"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"bindOnUse"in e&&(e=e.bindOnUse),"buffers"in e&&this.setBuffers(e.buffers)}},{key:"setBuffers",value:function setBuffers(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.bind(function(){for(var n in t)e.setBuffer(n,t[n])}),this}},{key:"setBuffer",value:function setBuffer(e,t){var n=this,r=this._getVaryingIndex(e),i=this._getBufferParams(t),o=i.buffer,a=i.sizeInBytes,s=i.offsetInBytes;return r<0?(this.unused[e]=o,c.g.warn(function(){return"".concat(n.id," unused varying buffer ").concat(e)})(),this):(this.buffers[r]=t,this.bindOnUse||this._bindBuffer(r,o,s,a),this)}},{key:"begin",value:function begin(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(e),this}},{key:"end",value:function end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}},{key:"_getBufferParams",value:function _getBufferParams(e){var t,n,r;return e instanceof k.a==!1?(r=e.buffer,n=e.sizeInBytes,t=e.offsetInBytes):r=e,void 0===t&&void 0===n||(t=t||0,n=n||r.byteLength-t),{buffer:r,offsetInBytes:t,sizeInBytes:n}}},{key:"_getVaryingInfo",value:function _getVaryingInfo(e){return this.configuration&&this.configuration.getVaryingInfo(e)}},{key:"_getVaryingIndex",value:function _getVaryingIndex(e){if(this.configuration)return this.configuration.getVaryingInfo(e).location;var t=Number(e);return Number.isFinite(t)?t:-1}},{key:"_bindBuffers",value:function _bindBuffers(){if(this.bindOnUse)for(var e in this.buffers){var t=this._getBufferParams(this.buffers[e]),n=t.buffer,r=t.sizeInBytes,i=t.offsetInBytes;this._bindBuffer(e,n,i,r)}}},{key:"_unbindBuffers",value:function _unbindBuffers(){if(this.bindOnUse)for(var e in this.buffers)this._bindBuffer(e,null)}},{key:"_bindBuffer",value:function _bindBuffer(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0,i=t&&t.handle;return i&&void 0!==r?this.gl.bindBufferRange(35982,e,i,n,r):this.gl.bindBufferBase(35982,e,i),this}},{key:"_createHandle",value:function _createHandle(){return this.gl.createTransformFeedback()}},{key:"_deleteHandle",value:function _deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}},{key:"_bindHandle",value:function _bindHandle(e){this.gl.bindTransformFeedback(36386,this.handle)}}]),TransformFeedback}(I.a),Ae=null;function getScratchArray(e,t){var n;return new e((n=e.BYTES_PER_ELEMENT*t,(!Ae||Ae.byteLength<n)&&(Ae=new ArrayBuffer(n)),Ae),0,t)}function fillArray(e){for(var t=e.target,n=e.source,r=e.start,i=void 0===r?0:r,o=e.count,a=void 0===o?1:o,s=n.length,l=a*s,u=0,c=i;u<s;u++)t[c++]=n[u];for(;u<l;)u<l-u?(t.copyWithin(i+u,i,i+u),u*=2):(t.copyWithin(i+u,i,i+l-u),u=l);return t}var Oe=n(41),Ie=n(152),Re=n(153);function getBrowser(e){if(!e&&!Object(Ie.a)())return"Node";if(Object(Re.a)(e))return"Electron";var t="undefined"!=typeof navigator?navigator:{},n=e||t.userAgent||"";if(n.indexOf("Edge")>-1)return"Edge";var r=-1!==n.indexOf("MSIE "),i=-1!==n.indexOf("Trident/");return r||i?"IE":Oe.b.chrome?"Chrome":Oe.b.safari?"Safari":Oe.b.mozInnerScreenX?"Firefox":"Unknown"}var Le=function(e){function VertexArrayObject(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(d.a)(this,VertexArrayObject);var r=n.id||n.program&&n.program.id;return(t=Object(T.a)(this,Object(A.a)(VertexArrayObject).call(this,e,Object.assign({},n,{id:r})))).hasVertexArrays=VertexArrayObject.isSupported(e),t.buffer=null,t.bufferValue=null,t.initialize(n),Object.seal(Object(B.a)(Object(B.a)(t))),t}return Object(O.a)(VertexArrayObject,e),Object(v.a)(VertexArrayObject,null,[{key:"isSupported",value:function isSupported(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).constantAttributeZero?Object(o.n)(e)||"Chrome"===getBrowser():Object(o.n)(e)||e.getExtension("OES_vertex_array_object")}},{key:"getDefaultArray",value:function getDefaultArray(e){return e.luma=e.luma||{},e.luma.defaultVertexArray||(e.luma.defaultVertexArray=new VertexArrayObject(e,{handle:null})),e.luma.defaultVertexArray}},{key:"getMaxAttributes",value:function getMaxAttributes(e){return VertexArrayObject.MAX_ATTRIBUTES=VertexArrayObject.MAX_ATTRIBUTES||e.getParameter(34921),VertexArrayObject.MAX_ATTRIBUTES}},{key:"setConstant",value:function setConstant(e,t,n){switch(n.constructor){case Float32Array:VertexArrayObject._setConstantFloatArray(e,t,n);break;case Int32Array:VertexArrayObject._setConstantIntArray(e,t,n);break;case Uint32Array:VertexArrayObject._setConstantUintArray(e,t,n);break;default:Object(c.a)(!1)}}}]),Object(v.a)(VertexArrayObject,[{key:"delete",value:function _delete(){get_get(Object(A.a)(VertexArrayObject.prototype),"delete",this).call(this),this.buffer&&this.buffer.delete()}},{key:"initialize",value:function initialize(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.setProps(e)}},{key:"setProps",value:function setProps(e){return this}},{key:"setElementBuffer",value:function setElementBuffer(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(c.a)(!t||34963===t.target,"elements must be GL.ELEMENT_ARRAY_BUFFER"),this.bind(function(){e.gl.bindBuffer(34963,t?t.handle:null)}),this}},{key:"setBuffer",value:function setBuffer(e,t,n){if(34963===t.target)return this.setElementBuffer(t,n);var r=n.size,i=n.type,a=n.stride,s=n.offset,l=n.normalized,u=n.integer,p=n.divisor,h=this.gl;return e=Number(e),this.bind(function(){h.bindBuffer(34962,t.handle),u?(Object(c.a)(Object(o.n)(h)),h.vertexAttribIPointer(e,r,i,a,s)):h.vertexAttribPointer(e,r,i,l,a,s),h.enableVertexAttribArray(e),h.vertexAttribDivisor(e,p||0)}),this}},{key:"enable",value:function enable(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return!n&&0===e&&!VertexArrayObject.isSupported(this.gl,{constantAttributeZero:!0})||(e=Number(e),this.bind(function(){return n?t.gl.enableVertexAttribArray(e):t.gl.disableVertexAttribArray(e)})),this}},{key:"getConstantBuffer",value:function getConstantBuffer(e,t,n){var r=this._normalizeConstantArrayValue(t,n),i=r.byteLength*e,o=r.length*e,a=!this.buffer;if(this.buffer=this.buffer||new k.a(this.gl,i),a=(a=a||this.buffer.setByteLength(i))||!this._compareConstantArrayValues(r,this.bufferValue)){var s=getScratchArray(t.constructor,o);fillArray({target:s,source:r,start:0,count:o}),this.buffer.subData(s),this.bufferValue=t}return this.buffer}},{key:"_normalizeConstantArrayValue",value:function _normalizeConstantArrayValue(e,t){return Array.isArray(e)?new Float32Array(e):e}},{key:"_compareConstantArrayValues",value:function _compareConstantArrayValues(e,t){if(!e||!t||e.length!==t.length||e.constructor!==t.constructor)return!1;for(var n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}},{key:"_createHandle",value:function _createHandle(){return this.hasVertexArrays=VertexArrayObject.isSupported(this.gl),this.hasVertexArrays?this.gl.createVertexArray():null}},{key:"_deleteHandle",value:function _deleteHandle(e){return this.hasVertexArrays&&this.gl.deleteVertexArray(e),[this.elements]}},{key:"_bindHandle",value:function _bindHandle(e){this.hasVertexArrays&&this.gl.bindVertexArray(e)}},{key:"_getParameter",value:function _getParameter(e,t){var n=this,r=t.location;return Object(c.a)(Number.isFinite(r)),this.bind(function(){switch(e){case 34373:return n.gl.getVertexAttribOffset(r,e);default:return n.gl.getVertexAttrib(r,e)}})}},{key:"MAX_ATTRIBUTES",get:function get(){return VertexArrayObject.getMaxAttributes(this.gl)}}],[{key:"_setConstantFloatArray",value:function _setConstantFloatArray(e,t,n){switch(n.length){case 1:e.vertexAttrib1fv(t,n);break;case 2:e.vertexAttrib2fv(t,n);break;case 3:e.vertexAttrib3fv(t,n);break;case 4:e.vertexAttrib4fv(t,n);break;default:Object(c.a)(!1)}}},{key:"_setConstantIntArray",value:function _setConstantIntArray(e,t,n){switch(Object(c.a)(Object(o.n)(e)),n.length){case 1:e.vertexAttribI1iv(t,n);break;case 2:e.vertexAttribI2iv(t,n);break;case 3:e.vertexAttribI3iv(t,n);break;case 4:e.vertexAttribI4iv(t,n);break;default:Object(c.a)(!1)}}},{key:"_setConstantUintArray",value:function _setConstantUintArray(e,t,n){switch(Object(c.a)(Object(o.n)(e)),n.length){case 1:e.vertexAttribI1uiv(t,n);break;case 2:e.vertexAttribI2uiv(t,n);break;case 3:e.vertexAttribI3uiv(t,n);break;case 4:e.vertexAttribI4uiv(t,n);break;default:Object(c.a)(!1)}}}]),VertexArrayObject}(I.a),Me=function(){function VertexArray(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(d.a)(this,VertexArray);var n=t.id||t.program&&t.program.id;this.id=n,this.gl=e,this.configuration=null,this.elements=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.vertexArrayObject=Le.isSupported(e)?new Le(e):Le.getDefaultArray(e),Object(c.h)(this,"VertexArray","v6.0",["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"]),this.initialize(t),Object.seal(this)}return Object(v.a)(VertexArray,[{key:"delete",value:function _delete(){this.buffer&&this.buffer.delete()}},{key:"initialize",value:function initialize(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(e)}},{key:"reset",value:function reset(){this.elements=null;var e=this.vertexArrayObject.MAX_ATTRIBUTES;return this.values=new Array(e).fill(null),this.accessors=new Array(e).fill(null),this.unused={},this.drawParams=null,this}},{key:"setProps",value:function setProps(e){return"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"attributes"in e&&this.setAttributes(e.attributes),"elements"in e&&this.setElementBuffer(e.elements),"bindOnUse"in e&&(e=e.bindOnUse),this}},{key:"clearDrawParams",value:function clearDrawParams(){this.drawParams=null}},{key:"getDrawParams",value:function getDrawParams(e){return this.drawParams=this.drawParams||this._updateDrawParams(),Object.assign({},this.drawParams,e)}},{key:"setAttributes",value:function setAttributes(e){var t=this;return this.vertexArrayObject.bind(function(){for(var n in e){var r=e[n];if(r instanceof k.a)t.setBuffer(n,r);else if(Array.isArray(r)&&r.length&&r[0]instanceof k.a){var i=r[0],o=r[1];t.setBuffer(n,i,o)}else{if(!ArrayBuffer.isView(r)&&!Array.isArray(r))throw new Error("VertexArray: attributes must be Buffers or constants (i.e. typed array)");t.setConstant(n,r)}}t.gl.bindBuffer(34962,null)}),this}},{key:"setElementBuffer",value:function setElementBuffer(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.elements=e,this.clearDrawParams(),this.vertexArrayObject.isDefaultArray||this.vertexArrayObject.setElementBuffer(e,t),this}},{key:"setBuffer",value:function setBuffer(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(34963===t.target)return this.setElementBuffer(t);var r=this._resolveLocationAndAccessor(e,t,t.accessor,n),i=r.location,o=r.accessor;return i>=0&&(this.values[i]=t,this.accessors[i]=o,this.clearDrawParams(),this.vertexArrayObject.isDefaultArray||this.vertexArrayObject.setBuffer(i,t,o)),this}},{key:"setConstant",value:function setConstant(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this._resolveLocationAndAccessor(e,t,n),i=r.location,o=r.accessor;return i>=0&&(t=this.vertexArrayObject._normalizeConstantArrayValue(t,o),this.values[i]=t,this.accessors[i]=o,this.clearDrawParams(),this.vertexArrayObject.isDefaultArray||this.vertexArrayObject.enable(i,!1)),this}},{key:"unbindBuffers",value:function unbindBuffers(){var e=this;return this.vertexArrayObject.bind(function(){e.elements&&e.setElementBuffer(null),e.buffer=e.buffer||new k.a(e.gl,{size:4});for(var t=0;t<e.vertexArrayObject.MAX_ATTRIBUTES;t++)e.values[t]instanceof k.a&&(e.gl.disableVertexAttribArray(t),e.gl.bindBuffer(34962,e.buffer.handle),e.gl.vertexAttribPointer(t,1,5126,!1,0,0))}),this}},{key:"bindBuffers",value:function bindBuffers(){var e=this;return this.vertexArrayObject.bind(function(){e.elements&&e.setElementBuffer(e.elements);for(var t=0;t<e.vertexArrayObject.MAX_ATTRIBUTES;t++){var n=e.values[t];n instanceof k.a&&e.setBuffer(t,n)}}),this}},{key:"bindForDraw",value:function bindForDraw(e,t,n){var r,i=this;return this.vertexArrayObject.bind(function(){i._setConstantAttributes(e,t),i.vertexArrayObject.hasVertexArrays||i.bindBuffers(),r=n(),i.vertexArrayObject.hasVertexArrays||i.unbindBuffers()}),r}},{key:"_resolveLocationAndAccessor",value:function _resolveLocationAndAccessor(e,t,n,r){var i=this,o=this._getAttributeIndex(e);if(!Number.isFinite(o)||o<0)return this.unused[e]=t,c.g.once(3,function(){return"unused value ".concat(e," in ").concat(i.id)})(),this;var a=this._getAttributeInfo(e),s=ce.a.resolve(a.accessor,n,r),l=s.size,u=s.type;return Object(c.a)(Number.isFinite(l)&&Number.isFinite(u)),{location:o,accessor:s}}},{key:"_getAttributeInfo",value:function _getAttributeInfo(e){return this.configuration&&this.configuration.getAttributeInfo(e)}},{key:"_getAttributeIndex",value:function _getAttributeIndex(e){if(this.configuration)return this.configuration.getAttributeLocation(e);var t=Number(e);return Number.isFinite(t)?t:-1}},{key:"_setConstantAttributes",value:function _setConstantAttributes(e,t){var n=Math.max(0|e,0|t),r=this.values[0];ArrayBuffer.isView(r)&&this._setConstantAttributeZero(r,n);for(var i=1;i<this.vertexArrayObject.MAX_ATTRIBUTES;i++)r=this.values[i],ArrayBuffer.isView(r)&&this._setConstantAttribute(i,r)}},{key:"_setConstantAttributeZero",value:function _setConstantAttributeZero(e,t){if(Le.isSupported(this.gl,{constantAttributeZero:!0}))this._setConstantAttribute(0,e);else{var n=this.vertexArrayObject.getConstantBuffer(t,e);this.vertexArrayObject.setBuffer(0,n,this.accessors[0])}}},{key:"_setConstantAttribute",value:function _setConstantAttribute(e,t){Le.setConstant(this.gl,e,t),this.vertexArrayObject.isDefault&&this.vertexArrayObject.enable(e,!1)}},{key:"_updateDrawParams",value:function _updateDrawParams(){for(var e={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0},t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++)this._updateDrawParamsForLocation(e,t);return this.elements&&(e.elementCount=this.elements.getElementCount(this.elements.accessor),e.isIndexed=!0,e.indexType=this.elements.accessor.type),e.indexCount===1/0&&(e.indexCount=0),e.vertexCount===1/0&&(e.vertexCount=0),e.instanceCount===1/0&&(e.instanceCount=0),e}},{key:"_updateDrawParamsForLocation",value:function _updateDrawParamsForLocation(e,t){var n=this.values[t],r=this.accessors[t];if(n){var i=r.divisor>0;if(e.isInstanced=e.isInstanced||i,n instanceof k.a){var o=n;if(i){var a=o.getVertexCount(r);e.instanceCount=Math.min(e.instanceCount,a)}else{var s=o.getVertexCount(r);e.vertexCount=Math.min(e.vertexCount,s)}}}}},{key:"setElements",value:function setElements(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return c.g.deprecated("setElements","setElementBuffer"),this.setElementBuffer(e,t)}}]),VertexArray}(),je=n(106),De=n(494),Fe=function(){function Object3D(e){var t=e.id;e.display;Object(d.a)(this,Object3D),this.id=t||Object(c.i)(this.constructor.name),this.display=!0,this.position=new je.a,this.rotation=new je.a,this.scale=new je.a(1,1,1),this.matrix=new De.a,this.userData={}}return Object(v.a)(Object3D,[{key:"toString",value:function toString(){return"{id: ".concat(this.id,", children: ").concat(this.children,")}")}},{key:"setPosition",value:function setPosition(e){return Object(x.a)(3===e.length,"setPosition requires vector argument"),this.position=e,this}},{key:"setRotation",value:function setRotation(e){return Object(x.a)(3===e.length,"setRotation requires vector argument"),this.rotation=e,this}},{key:"setScale",value:function setScale(e){return Object(x.a)(3===e.length,"setScale requires vector argument"),this.scale=e,this}},{key:"setMatrixComponents",value:function setMatrixComponents(e){var t=e.position,n=e.rotation,r=e.scale,i=e.update,o=void 0===i||i;return t&&this.setPosition(t),n&&this.setRotation(n),r&&this.setScale(r),o&&this.updateMatrix(),this}},{key:"updateMatrix",value:function updateMatrix(){var e=this.position,t=this.rotation,n=this.scale;return this.matrix.identity(),this.matrix.translate(e),this.matrix.rotateXYZ(t),this.matrix.scale(n),this}},{key:"update",value:function update(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.position,n=e.rotation,r=e.scale;return t&&this.setPosition(t),n&&this.setRotation(n),r&&this.setScale(r),this.updateMatrix(),this}},{key:"getCoordinateUniforms",value:function getCoordinateUniforms(e,t){Object(x.a)(e),t=t||this.matrix;var n=new De.a(e).multiplyRight(t),r=n.invert(),i=r.transpose();return{viewMatrix:e,modelMatrix:t,objectMatrix:t,worldMatrix:n,worldInverseMatrix:r,worldInverseTransposeMatrix:i}}},{key:"transform",value:function transform(){if(this.parent){var e=this.parent;this.endPosition.set(this.position.add(e.endPosition)),this.endRotation.set(this.rotation.add(e.endRotation)),this.endScale.set(this.scale.add(e.endScale))}else this.endPosition.set(this.position),this.endRotation.set(this.rotation),this.endScale.set(this.scale);for(var t=this.children,n=0;n<t.length;++n)t[n].transform();return this}}]),Object3D}(),Ne=(n(21),function(){function Attribute(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(d.a)(this,Attribute);var n=t.id,r=void 0===n?Object(c.i)("attribute"):n,i=t.type,o=t.isIndexed,a=void 0!==o&&o;this.gl=e,this.id=r,this.isIndexed=a,this.target=a?34963:34962,this.type=i,a&&!i&&(this.type=e&&hasFeature(e,C.ELEMENT_INDEX_UINT32)?5125:5123),this.value=null,this.externalBuffer=null,this.buffer=null,this.userData={},this.update(t),Object.seal(this),this._validateAttributeDefinition()}return Object(v.a)(Attribute,[{key:"delete",value:function _delete(){this.buffer&&(this.buffer.delete(),this.buffer=null)}},{key:"update",value:function update(e){var t=e.value,n=e.buffer,r=e.constant,i=void 0===r?this.constant||!1:r;this.constant=i,n?(this.externalBuffer=n,this.constant=!1,this.type=n.accessor.type,void 0!==n.accessor.divisor&&(this.divisor=n.accessor.divisor)):t&&(this.externalBuffer=null,this.value=t,!i&&this.gl&&(this.buffer=this.buffer||new k.a(this.gl,Object.assign({},e,{id:this.id,target:this.target,type:this.type})),this.buffer.setData({data:t}),this.type=this.buffer.accessor.type)),this._setAccessor(e)}},{key:"getBuffer",value:function getBuffer(){return this.constant?null:this.externalBuffer||this.buffer}},{key:"getValue",value:function getValue(){if(this.constant)return this.value;var e=this.externalBuffer||this.buffer;return e?[e,this]:null}},{key:"_setAccessor",value:function _setAccessor(e){var t=e.size,n=void 0===t?this.size:t,r=e.offset,i=void 0===r?this.offset||0:r,o=e.stride,a=void 0===o?this.stride||0:o,s=e.normalized,l=void 0===s?this.normalized||!1:s,u=e.integer,p=void 0===u?this.integer||!1:u,h=e.divisor,f=void 0===h?this.divisor||0:h,d=e.instanced,g=e.isInstanced;this.size=n,this.offset=i,this.stride=a,this.normalized=l,this.integer=p,this.divisor=f,void 0!==g&&(c.g.deprecated("Attribute.isInstanced"),this.divisor=g?1:0),void 0!==d&&(c.g.deprecated("Attribute.instanced"),this.divisor=d?1:0)}},{key:"_validateAttributeDefinition",value:function _validateAttributeDefinition(){}}]),Attribute}()),Be={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};function getDrawMode(e){var t="string"==typeof e?Be[e]||Be.TRIANGLES:e;return Object(x.a)(t>=0&&t<=Be.TRIANGLE_FAN,"Illegal drawMode"),t}var ze=function(){function Geometry(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(d.a)(this,Geometry);var t=e.id,n=e.drawMode,r=void 0===n?Be.TRIANGLES:n,i=e.vertexCount,o=void 0===i?void 0:i,a=e.attributes;this.id=t||Object(c.i)(this.constructor.name),this.drawMode=getDrawMode(r),this.vertexCount=o,this.attributes={},this.needsRedraw=!0,this.userData={},Object.seal(this),a&&this.setAttributes(a)}return Object(v.a)(Geometry,[{key:"setNeedsRedraw",value:function setNeedsRedraw(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.needsRedraw=e,this}},{key:"getNeedsRedraw",value:function getNeedsRedraw(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).clearRedrawFlags,t=void 0!==e&&e,n=!1;return n=n||this.needsRedraw,this.needsRedraw=this.needsRedraw&&!t,n}},{key:"setVertexCount",value:function setVertexCount(e){this.vertexCount=e}},{key:"getVertexCount",value:function getVertexCount(){return void 0!==this.vertexCount?this.vertexCount:this.attributes.indices?this.attributes.indices.value.length:this.attributes.vertices?this.attributes.vertices.value.length/3:!!this.attributes.positions&&this.attributes.positions.value.length/3}},{key:"hasAttribute",value:function hasAttribute(e){return Boolean(this.attributes[e])}},{key:"getAttribute",value:function getAttribute(e){var t=this.attributes[e];return Object(x.a)(t),t.value}},{key:"getArray",value:function getArray(e){var t=this.attributes[e];return Object(x.a)(t),t.value}},{key:"getAttributes",value:function getAttributes(){return this.attributes}},{key:"setAttributes",value:function setAttributes(e){for(var t in e){var n=e[t];n=ArrayBuffer.isView(n)?{value:n}:n,Object(x.a)(ArrayBuffer.isView(n.value),"".concat(this._print(t),": must be typed array or object with value as typed array")),this._autoDetectAttribute(t,n),this.attributes[t]=n}return this.setNeedsRedraw(),this}},{key:"_autoDetectAttribute",value:function _autoDetectAttribute(e,t){var n;switch(e){case"indices":n=n||"indices";break;case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":n="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":n="vectors"}switch(n){case"vectors":t.size=t.size||3;break;case"uvs":t.size=t.size||2;break;case"indices":t.size=t.size||1,t.isIndexed=void 0===t.isIndexed||t.isIndexed,Object(x.a)(t.value instanceof Uint16Array||t.value instanceof Uint32Array,'attribute array for "indices" must be of integer type')}Object(x.a)(t.size,"attribute ".concat(e," needs size"))}},{key:"_print",value:function _print(e){return"Geometry ".concat(this.id," attribute ").concat(e)}}]),Geometry}(),Ue="#define SHADER_NAME luma_modular_vertex\n\n// object attributes\nattribute vec3 positions;\nattribute vec3 normals;\nattribute vec4 colors;\nattribute vec2 texCoords;\nattribute vec3 pickingColors;\n\nvoid main(void) {\n\n  // Set up position\n#ifdef MODULE_GEOMETRY\n  geometry_setPosition(positions);\n  geometry_setNormal(normals);\n#endif\n\n#ifdef MODULE_PROJECT\n  project_setPositionAndNormal_Model(positions, normals);\n  gl_Position = project_model_to_clipspace(positions);\n#endif\n\n  // Set up depth\n#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n\n#ifdef MODULE_DIFFUSE\n  diffuse_setTextureCoordinate(texCoords);\n#endif\n\n  // Set up color calculations\n#ifdef MODULE_MATERIAL\n  material_setDiffuseColor(colors);\n  material_setDiffuseTextureCoordinates(texCoords);\n#endif\n\n#ifdef MODULE_LIGHTING\n  lighting_setPositionAndNormal(positions, normals);\n  lighting_apply_light(positions);\n  lighting_apply_reflection(positions);\n#endif\n\n#ifdef MODULE_PICKING\n  picking_setPickingColor(pickingColors);\n#endif\n\n}\n",Ve="#define SHADER_NAME luma-modular-fragment\n\nprecision highp float;\n\n// varyings\nvarying vec4 vColor;\n\nvoid main(){\n  gl_FragColor = vec4(1., 0., 1., 1.);\n\n#ifdef MODULE_DIFFUSE\n  gl_FragColor = diffuse_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth(gl_Position);\n#endif\n}\n",Ge="vs",We="fs";function transpileShader(e,t,n){switch(t){case 300:return n?convertVertexShaderTo300(e):convertFragmentShaderTo300(e);case 100:return n?convertVertexShaderTo100(e):convertFragmentShaderTo100(e);default:throw new Error("unknown GLSL version ".concat(t))}}function convertVertexShaderTo300(e){return e.replace(/attribute\s+/g,"in ").replace(/varying\s+/g,"out ").replace(/texture2D\(/g,"texture(").replace(/textureCube\(+/g,"texture(")}function convertFragmentShaderTo300(e){return e.replace(/varying\s+/g,"in ").replace(/texture2D\(/g,"texture(").replace(/textureCube\(/g,"texture(")}function convertVertexShaderTo100(e){return e.replace(/^in\s+/gm,"attribute ").replace(/^out\s+/gm,"varying ").replace(/texture\(/g,"texture2D(")}function convertFragmentShaderTo100(e){return e.replace(/^in\s+/gm,"varying ").replace(/texture\(/g,"texture2D(")}function assert_assert(e,t){if(!e)throw new Error(t||"shadertools: assertion failed.")}var qe=function(){function ShaderModule(e){var t=e.name,n=e.vs,r=e.fs,i=e.dependencies,o=void 0===i?[]:i,a=e.getUniforms,s=void 0===a?function(){return{}}:a,l=e.deprecations,u=void 0===l?[]:l,c=e.vertexShader,p=e.fragmentShader;Object(d.a)(this,ShaderModule),assert_assert("string"==typeof t),this.name=t,this.vs=n||c,this.fs=r||p,this.getModuleUniforms=s,this.dependencies=o,this.deprecations=this._parseDeprecationDefinitions(u)}return Object(v.a)(ShaderModule,[{key:"getModuleSource",value:function getModuleSource(e,t){var n;switch(e){case"vs":n=transpileShader(this.vs||"",t,!0);break;case"fs":n=transpileShader(this.fs||"",t,!1);break;default:assert_assert(!1)}return"string"!=typeof n?"":"#define MODULE_".concat(this.name.toUpperCase(),"\n").concat(n,"// END MODULE_").concat(this.name,"\n\n")}},{key:"getUniforms",value:function getUniforms(e,t){return this.getModuleUniforms(e,t)}},{key:"checkDeprecations",value:function checkDeprecations(e,t){this.deprecations.forEach(function(n){n.regex.test(e)&&(n.deprecated&&t?t.deprecated(n.old,n.new)():t&&t.removed(n.old,n.new)())})}},{key:"_parseDeprecationDefinitions",value:function _parseDeprecationDefinitions(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.forEach(function(e){switch(e.type){case"function":e.regex=new RegExp("\\b".concat(e.old,"\\("));break;default:e.regex=new RegExp("".concat(e.type," ").concat(e.old,";"))}}),e}}]),ShaderModule}(),He=new(function(){function ShaderModuleRegistry(){Object(d.a)(this,ShaderModuleRegistry),this.shaderModules={},this.defaultShaderModules=[]}return Object(v.a)(ShaderModuleRegistry,[{key:"setDefaultShaderModules",value:function setDefaultShaderModules(e){this.defaultShaderModules=this.resolveModules(e)}},{key:"registerShaderModules",value:function registerShaderModules(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).ignoreMultipleRegistrations,n=void 0!==t&&t,r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value;this._registerShaderModule(l,n)}}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}}},{key:"getShaderModule",value:function getShaderModule(e){if(e instanceof qe)return e;if("string"!=typeof e)return this._registerShaderModule(e,!0);var t=this.shaderModules[e];return t||assert_assert(!1,"Unknown shader module ".concat(e)),t}},{key:"resolveModules",value:function resolveModules(e){var t=this;return e.map(function(e){return t.getShaderModule(e)})}},{key:"_registerShaderModule",value:function _registerShaderModule(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e instanceof qe)return e;if(assert_assert(e.name,"shader module has no name"),this.shaderModules[e.name]&&!t)throw new Error("shader module ".concat(e.name," already registered"));return(e=new qe(e)).dependencies=this.resolveModules(e.dependencies),this.shaderModules[e.name]=e,this.shaderModules[e.name]}}]),ShaderModuleRegistry}());function setDefaultShaderModules(e){He.setDefaultShaderModules(e)}function registerShaderModules(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).ignoreMultipleRegistrations,n=void 0!==t&&t;He.registerShaderModules(e,{ignoreMultipleRegistrations:n})}function resolveModules(e){return e=e.concat(He.defaultShaderModules),getShaderDependencies(e=He.resolveModules(e))}function getShaderDependencies(e){var t={},n={};return getDependencyGraph({modules:e,level:0,moduleMap:t,moduleDepth:n}),Object.keys(n).sort(function(e,t){return n[t]-n[e]}).map(function(e){return t[e]})}function getDependencyGraph(e){var t=e.modules,n=e.level,r=e.moduleMap,i=e.moduleDepth;if(n>=5)throw new Error("Possible loop in shader dependency graph");var o=!0,a=!1,s=void 0;try{for(var l,u=t[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value;r[c.name]=c,(void 0===i[c.name]||i[c.name]<n)&&(i[c.name]=n)}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}var p=!0,h=!1,f=void 0;try{for(var d,g=t[Symbol.iterator]();!(p=(d=g.next()).done);p=!0){var m=d.value;m.dependencies&&getDependencyGraph({modules:m.dependencies,level:n+1,moduleMap:r,moduleDepth:i})}}catch(e){h=!0,f=e}finally{try{p||null==g.return||g.return()}finally{if(h)throw f}}}function isOldIE(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="undefined"!=typeof window&&window.navigator||{},n=e.userAgent||t.userAgent||"",r=-1!==n.indexOf("MSIE "),i=-1!==n.indexOf("Trident/");return r||i}var Xe=32874,Ke=7936,Ze=7937,Ye=7938,Je=35724,Qe={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},$e={};function webgl_info_isWebGL2(e){return Boolean(e&&("undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||32874===Xe))}function webgl_info_getContextInfo(e){var t=e.getExtension("WEBGL_debug_renderer_info"),n=e.getParameter(t&&t.UNMASKED_VENDOR_WEBGL||Ke),r=e.getParameter(t&&t.UNMASKED_RENDERER_WEBGL||Ze);return{gpuVendor:identifyGPUVendor(n,r),vendor:n,renderer:r,version:e.getParameter(Ye),shadingLanguageVersion:e.getParameter(Je)}}function identifyGPUVendor(e,t){return e.match(/NVIDIA/i)||t.match(/NVIDIA/i)?"NVIDIA":e.match(/INTEL/i)||t.match(/INTEL/i)?"INTEL":e.match(/AMD/i)||t.match(/AMD/i)||e.match(/ATI/i)||t.match(/ATI/i)?"AMD":"UNKNOWN GPU"}Object.keys(Qe).forEach(function(e){$e[e]=e});var et={};function webgl_info_canCompileGLGSExtension(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Qe[t];if(assert_assert(r,t),!isOldIE(n))return!0;if(t in et)return et[t];var i=r[0],o=n.behavior||"enable",a="#extension GL_".concat(i," : ").concat(o,"\nvoid main(void) {}"),s=e.createShader(35633);e.shaderSource(s,a),e.compileShader(s);var l=e.getShaderParameter(s,35713);return e.deleteShader(s),et[t]=l,l}function webgl_info_getFeature(e,t){var n=Qe[t];assert_assert(n,t);var r=webgl_info_isWebGL2(e)&&n[1]||n[0],i="string"==typeof r?Boolean(e.getExtension(r)):r;return assert_assert(!1===i||!0===i),i}function webgl_info_hasFeatures(e,t){return(t=Array.isArray(t)?t:[t]).every(function(t){return webgl_info_getFeature(e,t)})}function getPlatformShaderDefines(e){switch(webgl_info_getContextInfo(e).gpuVendor.toLowerCase()){case"nvidia":return"#define NVIDIA_GPU\n// Nvidia optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n";case"intel":return"#define INTEL_GPU\n// Intel optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"amd":return"#define AMD_GPU\n";default:return"#define DEFAULT_GPU\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n"}}function getVersionDefines(e,t,n){var r="#if (__VERSION__ > 120)\n\n# define FRAG_DEPTH\n# define DERIVATIVES\n# define DRAW_BUFFERS\n# define TEXTURE_LOD\n\n#endif // __VERSION\n";return webgl_info_hasFeatures(e,$e.GLSL_FRAG_DEPTH)&&(r+="// FRAG_DEPTH => gl_FragDepth is available\n#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n# define FRAG_DEPTH\n# define gl_FragDepth gl_FragDepthEXT\n#endif\n"),webgl_info_hasFeatures(e,$e.GLSL_DERIVATIVES)&&webgl_info_canCompileGLGSExtension(e,$e.GLSL_DERIVATIVES)&&(r+="// DERIVATIVES => dxdF, dxdY and fwidth are available\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n# define DERIVATIVES\n#endif\n"),webgl_info_hasFeatures(e,$e.GLSL_FRAG_DATA)&&webgl_info_canCompileGLGSExtension(e,$e.GLSL_FRAG_DATA,{behavior:"require"})&&(r+="// DRAW_BUFFERS => gl_FragData[] is available\n#ifdef GL_EXT_draw_buffers\n#extension GL_EXT_draw_buffers : require\n#define DRAW_BUFFERS\n#endif\n"),webgl_info_hasFeatures(e,$e.GLSL_TEXTURE_LOD)&&(r+="// TEXTURE_LOD => texture2DLod etc are available\n#ifdef GL_EXT_shader_texture_lod\n#extension GL_EXT_shader_texture_lod : enable\n# define TEXTURE_LOD\n#define texture2DLod texture2DLodEXT\n#define texture2DProjLod texture2DProjLodEXT\n#define texture2DProjLod texture2DProjLodEXT\n#define textureCubeLod textureCubeLodEXT\n#define texture2DGrad texture2DGradEXT\n#define texture2DProjGrad texture2DProjGradEXT\n#define texture2DProjGrad texture2DProjGradEXT\n#define textureCubeGrad textureCubeGradEXT\n#endif\n"),r}var tt,nt,rt=n(63),it=n.n(rt),ot=(tt={},Object(y.a)(tt,Ge,"#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n"),Object(y.a)(tt,We,"#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth();\n#endif\n"),tt),at=/void main\s*\([^\)]*\)\s*\{\n?/,st=/}\n?[^{}]*$/;function injectShader(e,t,n,r){var i=t===Ge,o=function _loop(t){var r=n[t];switch(t){case"vs:#decl":i&&(e=e.replace(at,function(e){return"".concat(r,"\n").concat(e)}));break;case"vs:#main-start":i&&(e=e.replace(at,function(e){return e+r}));break;case"vs:#main-end":i&&(e=e.replace(st,function(e){return r+e}));break;case"fs:#decl":i||(e=e.replace(at,function(e){return"".concat(r,"\n").concat(e)}));break;case"fs:#main-start":i||(e=e.replace(at,function(e){return e+r}));break;case"fs:#main-end":i||(e=e.replace(st,function(e){return r+e}));break;default:e=e.replace(t,function(e){return e+r})}};for(var a in n)o(a);return r&&(e=e.replace("}s*$",function(e){return e+ot[t]})),e}function combineInjects(e){var t={};return it()(Array.isArray(e)&&e.length>1),e.forEach(function(e){for(var n in e)t[n]=t[n]?"".concat(t[n],"\n").concat(e[n]):e[n]}),t}var lt=(nt={},Object(y.a)(nt,Ge,"vertex"),Object(y.a)(nt,We,"fragment"),nt),ut="precision highp float;\n\n";function assembleShaders(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.vs,r=t.fs,i=resolveModules(t.modules||[]);return{gl:e,vs:assembleShader(e,Object.assign({},t,{source:n,type:Ge,modules:i})),fs:assembleShader(e,Object.assign({},t,{source:r,type:We,modules:i})),getUniforms:assembleGetUniforms(i),modules:assembleModuleMap(i)}}function assembleShader(e,t){var n=t.id,r=t.source,i=t.type,o=t.modules,a=void 0===o?[]:o,s=t.defines,l=void 0===s?{}:s,u=t.inject,c=void 0===u?{}:u,p=t.prologue,h=void 0===p||p,f=t.log;assert_assert("string"==typeof r,"shader source must be a string");var d=i===Ge,g=r.split("\n"),m=100,y="",v=r;0===g[0].indexOf("#version ")&&(m=300,y=g[0],v=g.slice(1).join("\n"));var _=h?"".concat(y,"\n").concat(getShaderName({id:n,source:r,type:i}),"\n").concat(getPlatformShaderDefines(e),"\n").concat(getVersionDefines(e),"\n").concat(getApplicationDefines(l),"\n").concat(d?"":ut,"\n"):"".concat(y,"\n"),b=!1,x=!0,w=!1,S=void 0;try{for(var E,P=a[Symbol.iterator]();!(x=(E=P.next()).done);x=!0){var C=E.value;switch(C.name){case"inject":b=!0;break;default:C.checkDeprecations(v,f),_+=C.getModuleSource(i,m)}}}catch(e){w=!0,S=e}finally{try{x||null==P.return||P.return()}finally{if(w)throw S}}return _=injectShader(_+=v,i,c,b)}function assembleGetUniforms(e){return function getUniforms(t){var n={},r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value.getUniforms(t,n);Object.assign(n,l)}}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}function assembleModuleMap(e){var t,n={},r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value,u=(t=l,He.getShaderModule(t));n[l]=u}}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}function getShaderName(e){var t=e.id,n=e.source,r=e.type;return t&&"string"==typeof t&&-1===n.indexOf("SHADER_NAME")?"\n#define SHADER_NAME ".concat(t,"_").concat(lt[r],"\n\n"):""}function getApplicationDefines(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=0,n="";for(var r in e){0===t&&(n+="\n// APPLICATION DEFINES\n"),t++;var i=e[r];(i||Number.isFinite(i))&&(n+="#define ".concat(r.toUpperCase()," ").concat(e[r],"\n"))}return 0===t&&(n+="\n"),n}var ct={name:"fp32",vs:"#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\nconst float TWO_PI = 6.2831854820251465;\nconst float PI_2 = 1.5707963705062866;\nconst float PI_16 = 0.1963495463132858;\n\nconst float SIN_TABLE_0 = 0.19509032368659973;\nconst float SIN_TABLE_1 = 0.3826834261417389;\nconst float SIN_TABLE_2 = 0.5555702447891235;\nconst float SIN_TABLE_3 = 0.7071067690849304;\n\nconst float COS_TABLE_0 = 0.9807852506637573;\nconst float COS_TABLE_1 = 0.9238795042037964;\nconst float COS_TABLE_2 = 0.8314695954322815;\nconst float COS_TABLE_3 = 0.7071067690849304;\n\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;\n\nfloat sin_taylor_fp32(float a) {\n  float r, s, t, x;\n\n  if (a == 0.0) {\n    return 0.0;\n  }\n\n  x = -a * a;\n  s = a;\n  r = a;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_3;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_5;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_7;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_9;\n  s = s + t;\n\n  return s;\n}\n\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\n  if (a == 0.0) {\n    sin_t = 0.0;\n    cos_t = 1.0;\n  }\n  sin_t = sin_taylor_fp32(a);\n  cos_t = sqrt(1.0 - sin_t * sin_t);\n}\n\nfloat tan_taylor_fp32(float a) {\n    float sin_a;\n    float cos_a;\n\n    if (a == 0.0) {\n        return 0.0;\n    }\n    float z = floor(a / TWO_PI);\n    float r = a - TWO_PI * z;\n\n    float t;\n    float q = floor(r / PI_2 + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return 0.0 / 0.0;\n    }\n\n    t = r - PI_2 * q;\n\n    q = floor(t / PI_16 + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return 0.0 / 0.0;\n    } else {\n        t = t - PI_16 * q;\n    }\n\n    float u = 0.0;\n    float v = 0.0;\n\n    float sin_t, cos_t;\n    float s, c;\n    sincos_taylor_fp32(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0;\n            v = SIN_TABLE_0;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1;\n            v = SIN_TABLE_1;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2;\n            v = SIN_TABLE_2;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3;\n            v = SIN_TABLE_3;\n        }\n        if (k > 0) {\n            s = u * sin_t + v * cos_t;\n            c = u * cos_t - v * sin_t;\n        } else {\n            s = u * sin_t - v * cos_t;\n            c = u * cos_t + v * sin_t;\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return sin_a / cos_a;\n}\n#endif\n\nfloat tan_fp32(float a) {\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\n  return tan_taylor_fp32(a);\n#else\n  return tan(a);\n#endif\n}\n",fs:null};function fp64ify(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=Math.fround(e),i=e-r;return t[n]=r,t[n+1]=i,t}var pt="uniform float ONE;\nvec2 split(float a) {\n  const float SPLIT = 4097.0;\n  float t = a * SPLIT;\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float a_hi = t * ONE - (t - a);\n  float a_lo = a * ONE - a_hi;\n#else\n  float a_hi = t - (t - a);\n  float a_lo = a - a_hi;\n#endif\n  return vec2(a_hi, a_lo);\n}\nvec2 split2(vec2 a) {\n  vec2 b = split(a.x);\n  b.y += a.y;\n  return b;\n}\nvec2 quickTwoSum(float a, float b) {\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float sum = (a + b) * ONE;\n  float err = b - (sum - a) * ONE;\n#else\n  float sum = a + b;\n  float err = b - (sum - a);\n#endif\n  return vec2(sum, err);\n}\nvec2 twoSum(float a, float b) {\n  float s = (a + b);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float v = (s * ONE - a) * ONE;\n  float err = (a - (s - v) * ONE) * ONE * ONE * ONE + (b - v);\n#else\n  float v = s - a;\n  float err = (a - (s - v)) + (b - v);\n#endif\n  return vec2(s, err);\n}\n\nvec2 twoSub(float a, float b) {\n  float s = (a - b);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float v = (s * ONE - a) * ONE;\n  float err = (a - (s - v) * ONE) * ONE * ONE * ONE - (b + v);\n#else\n  float v = s - a;\n  float err = (a - (s - v)) - (b + v);\n#endif\n  return vec2(s, err);\n}\n\nvec2 twoSqr(float a) {\n  float prod = a * a;\n  vec2 a_fp64 = split(a);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float err = ((a_fp64.x * a_fp64.x - prod) * ONE + 2.0 * a_fp64.x *\n    a_fp64.y * ONE * ONE) + a_fp64.y * a_fp64.y * ONE * ONE * ONE;\n#else\n  float err = ((a_fp64.x * a_fp64.x - prod) + 2.0 * a_fp64.x * a_fp64.y) + a_fp64.y * a_fp64.y;\n#endif\n  return vec2(prod, err);\n}\n\nvec2 twoProd(float a, float b) {\n  float prod = a * b;\n  vec2 a_fp64 = split(a);\n  vec2 b_fp64 = split(b);\n  float err = ((a_fp64.x * b_fp64.x - prod) + a_fp64.x * b_fp64.y +\n    a_fp64.y * b_fp64.x) + a_fp64.y * b_fp64.y;\n  return vec2(prod, err);\n}\n\nvec2 sum_fp64(vec2 a, vec2 b) {\n  vec2 s, t;\n  s = twoSum(a.x, b.x);\n  t = twoSum(a.y, b.y);\n  s.y += t.x;\n  s = quickTwoSum(s.x, s.y);\n  s.y += t.y;\n  s = quickTwoSum(s.x, s.y);\n  return s;\n}\n\nvec2 sub_fp64(vec2 a, vec2 b) {\n  vec2 s, t;\n  s = twoSub(a.x, b.x);\n  t = twoSub(a.y, b.y);\n  s.y += t.x;\n  s = quickTwoSum(s.x, s.y);\n  s.y += t.y;\n  s = quickTwoSum(s.x, s.y);\n  return s;\n}\n\nvec2 mul_fp64(vec2 a, vec2 b) {\n  vec2 prod = twoProd(a.x, b.x);\n  prod.y += a.x * b.y;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  prod = split2(prod);\n#endif\n  prod = quickTwoSum(prod.x, prod.y);\n  prod.y += a.y * b.x;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  prod = split2(prod);\n#endif\n  prod = quickTwoSum(prod.x, prod.y);\n  return prod;\n}\n\nvec2 div_fp64(vec2 a, vec2 b) {\n  float xn = 1.0 / b.x;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  vec2 yn = mul_fp64(a, vec2(xn, 0));\n#else\n  vec2 yn = a * xn;\n#endif\n  float diff = (sub_fp64(a, mul_fp64(b, yn))).x;\n  vec2 prod = twoProd(xn, diff);\n  return sum_fp64(yn, prod);\n}\n\nvec2 sqrt_fp64(vec2 a) {\n  if (a.x == 0.0 && a.y == 0.0) return vec2(0.0, 0.0);\n  if (a.x < 0.0) return vec2(0.0 / 0.0, 0.0 / 0.0);\n\n  float x = 1.0 / sqrt(a.x);\n  float yn = a.x * x;\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  vec2 yn_sqr = twoSqr(yn) * ONE;\n#else\n  vec2 yn_sqr = twoSqr(yn);\n#endif\n  float diff = sub_fp64(a, yn_sqr).x;\n  vec2 prod = twoProd(x * 0.5, diff);\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  return sum_fp64(split(yn), prod);\n#else\n  return sum_fp64(vec2(yn, 0.0), prod);\n#endif\n}\n",ht="".concat(pt,"\n").concat("const vec2 E_FP64 = vec2(2.7182817459106445e+00, 8.254840366817007e-08);\nconst vec2 LOG2_FP64 = vec2(0.6931471824645996e+00, -1.9046542121259336e-09);\nconst vec2 PI_FP64 = vec2(3.1415927410125732, -8.742278012618954e-8);\nconst vec2 TWO_PI_FP64 = vec2(6.2831854820251465, -1.7484556025237907e-7);\nconst vec2 PI_2_FP64 = vec2(1.5707963705062866, -4.371139006309477e-8);\nconst vec2 PI_4_FP64 = vec2(0.7853981852531433, -2.1855695031547384e-8);\nconst vec2 PI_16_FP64 = vec2(0.19634954631328583, -5.463923757886846e-9);\nconst vec2 PI_16_2_FP64 = vec2(0.39269909262657166, -1.0927847515773692e-8);\nconst vec2 PI_16_3_FP64 = vec2(0.5890486240386963, -1.4906100798128818e-9);\nconst vec2 PI_180_FP64 = vec2(0.01745329238474369, 1.3519960498364902e-10);\n\nconst vec2 SIN_TABLE_0_FP64 = vec2(0.19509032368659973, -1.6704714833615242e-9);\nconst vec2 SIN_TABLE_1_FP64 = vec2(0.3826834261417389, 6.22335089017767e-9);\nconst vec2 SIN_TABLE_2_FP64 = vec2(0.5555702447891235, -1.1769521357507529e-8);\nconst vec2 SIN_TABLE_3_FP64 = vec2(0.7071067690849304, 1.2101617041793133e-8);\n\nconst vec2 COS_TABLE_0_FP64 = vec2(0.9807852506637573, 2.9739473106360492e-8);\nconst vec2 COS_TABLE_1_FP64 = vec2(0.9238795042037964, 2.8307490351764386e-8);\nconst vec2 COS_TABLE_2_FP64 = vec2(0.8314695954322815, 1.6870263741530778e-8);\nconst vec2 COS_TABLE_3_FP64 = vec2(0.7071067690849304, 1.2101617152815436e-8);\n\nconst vec2 INVERSE_FACTORIAL_3_FP64 = vec2(1.666666716337204e-01, -4.967053879312289e-09);\nconst vec2 INVERSE_FACTORIAL_4_FP64 = vec2(4.16666679084301e-02, -1.2417634698280722e-09);\nconst vec2 INVERSE_FACTORIAL_5_FP64 = vec2(8.333333767950535e-03, -4.34617203337595e-10);\nconst vec2 INVERSE_FACTORIAL_6_FP64 = vec2(1.3888889225199819e-03, -3.3631094437103215e-11);\nconst vec2 INVERSE_FACTORIAL_7_FP64 = vec2(1.9841270113829523e-04,  -2.725596874933456e-12);\nconst vec2 INVERSE_FACTORIAL_8_FP64 = vec2(2.4801587642286904e-05, -3.406996025904184e-13);\nconst vec2 INVERSE_FACTORIAL_9_FP64 = vec2(2.75573188446287533e-06, 3.7935713937038186e-14);\nconst vec2 INVERSE_FACTORIAL_10_FP64 = vec2(2.755731998149713e-07, -7.575112367869873e-15);\n\nfloat nint(float d) {\n    if (d == floor(d)) return d;\n    return floor(d + 0.5);\n}\n\nvec2 nint_fp64(vec2 a) {\n    float hi = nint(a.x);\n    float lo;\n    vec2 tmp;\n    if (hi == a.x) {\n        lo = nint(a.y);\n        tmp = quickTwoSum(hi, lo);\n    } else {\n        lo = 0.0;\n        if (abs(hi - a.x) == 0.5 && a.y < 0.0) {\n            hi -= 1.0;\n        }\n        tmp = vec2(hi, lo);\n    }\n    return tmp;\n}\n\nvec2 exp_fp64(vec2 a) {\n\n  const int k_power = 4;\n  const float k = 16.0;\n\n  const float inv_k = 1.0 / k;\n\n  if (a.x <= -88.0) return vec2(0.0, 0.0);\n  if (a.x >= 88.0) return vec2(1.0 / 0.0, 1.0 / 0.0);\n  if (a.x == 0.0 && a.y == 0.0) return vec2(1.0, 0.0);\n  if (a.x == 1.0 && a.y == 0.0) return E_FP64;\n\n  float m = floor(a.x / LOG2_FP64.x + 0.5);\n  vec2 r = sub_fp64(a, mul_fp64(LOG2_FP64, vec2(m, 0.0))) * inv_k;\n  vec2 s, t, p;\n\n  p = mul_fp64(r, r);\n  s = sum_fp64(r, p * 0.5);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_3_FP64);\n\n  s = sum_fp64(s, t);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_4_FP64);\n\n  s = sum_fp64(s, t);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_5_FP64);\n\n\n\n\n\n\n  s = sum_fp64(s, t);\n  for (int i = 0; i < k_power; i++) {\n    s = sum_fp64(s * 2.0, mul_fp64(s, s));\n  }\n\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n  s = sum_fp64(s, vec2(ONE, 0.0));\n#else\n  s = sum_fp64(s, vec2(1.0, 0.0));\n#endif\n\n  return s * pow(2.0, m);\n}\n\nvec2 log_fp64(vec2 a)\n{\n  if (a.x == 1.0 && a.y == 0.0) return vec2(0.0, 0.0);\n  if (a.x <= 0.0) return vec2(0.0 / 0.0, 0.0 / 0.0);\n  vec2 x = vec2(log(a.x), 0.0);\n  vec2 s;\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n  s = vec2(ONE, 0.0);\n#else\n  s = vec2(1.0, 0.0);\n#endif\n\n  x = sub_fp64(sum_fp64(x, mul_fp64(a, exp_fp64(-x))), s);\n  return x;\n}\n\nvec2 sin_taylor_fp64(vec2 a) {\n  vec2 r, s, t, x;\n\n  if (a.x == 0.0 && a.y == 0.0) {\n    return vec2(0.0, 0.0);\n  }\n\n  x = -mul_fp64(a, a);\n  s = a;\n  r = a;\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_3_FP64);\n  s = sum_fp64(s, t);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_5_FP64);\n  s = sum_fp64(s, t);\n\n\n\n\n\n\n  return s;\n}\n\nvec2 cos_taylor_fp64(vec2 a) {\n  vec2 r, s, t, x;\n\n  if (a.x == 0.0 && a.y == 0.0) {\n    return vec2(1.0, 0.0);\n  }\n\n  x = -mul_fp64(a, a);\n  r = x;\n  s = sum_fp64(vec2(1.0, 0.0), r * 0.5);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_4_FP64);\n  s = sum_fp64(s, t);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_6_FP64);\n  s = sum_fp64(s, t);\n\n\n\n\n\n\n  return s;\n}\n\nvoid sincos_taylor_fp64(vec2 a, out vec2 sin_t, out vec2 cos_t) {\n  if (a.x == 0.0 && a.y == 0.0) {\n    sin_t = vec2(0.0, 0.0);\n    cos_t = vec2(1.0, 0.0);\n  }\n\n  sin_t = sin_taylor_fp64(a);\n  cos_t = sqrt_fp64(sub_fp64(vec2(1.0, 0.0), mul_fp64(sin_t, sin_t)));\n}\n\nvec2 sin_fp64(vec2 a) {\n    if (a.x == 0.0 && a.y == 0.0) {\n        return vec2(0.0, 0.0);\n    }\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\n\n    vec2 t;\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    }\n\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\n\n    q = floor(t.x / PI_16_FP64.x + 0.5);\n    int k = int(q);\n\n    if (k == 0) {\n        if (j == 0) {\n            return sin_taylor_fp64(t);\n        } else if (j == 1) {\n            return cos_taylor_fp64(t);\n        } else if (j == -1) {\n            return -cos_taylor_fp64(t);\n        } else {\n            return -sin_taylor_fp64(t);\n        }\n    }\n\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    } else {\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\n    }\n\n    vec2 u = vec2(0.0, 0.0);\n    vec2 v = vec2(0.0, 0.0);\n\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n    if (abs(float(abs_k) - 1.0) < 0.5) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs(float(abs_k) - 2.0) < 0.5) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs(float(abs_k) - 3.0) < 0.5) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs(float(abs_k) - 4.0) < 0.5) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#else\n    if (abs_k == 1) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs_k == 2) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs_k == 3) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs_k == 4) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#endif\n\n    vec2 sin_t, cos_t;\n    sincos_taylor_fp64(t, sin_t, cos_t);\n\n\n\n    vec2 result = vec2(0.0, 0.0);\n    if (j == 0) {\n        if (k > 0) {\n            result = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        }\n    } else if (j == 1) {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        } else {\n            result = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    } else if (j == -1) {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\n        } else {\n            result = -sum_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\n        }\n    } else {\n        if (k > 0) {\n            result = -sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(v, cos_t), mul_fp64(u, sin_t));\n        }\n    }\n\n    return result;\n}\n\nvec2 cos_fp64(vec2 a) {\n    if (a.x == 0.0 && a.y == 0.0) {\n        return vec2(1.0, 0.0);\n    }\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\n\n    vec2 t;\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    }\n\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\n\n    q = floor(t.x / PI_16_FP64.x + 0.5);\n    int k = int(q);\n\n    if (k == 0) {\n        if (j == 0) {\n            return cos_taylor_fp64(t);\n        } else if (j == 1) {\n            return -sin_taylor_fp64(t);\n        } else if (j == -1) {\n            return sin_taylor_fp64(t);\n        } else {\n            return -cos_taylor_fp64(t);\n        }\n    }\n\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    } else {\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\n    }\n\n    vec2 u = vec2(0.0, 0.0);\n    vec2 v = vec2(0.0, 0.0);\n\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n    if (abs(float(abs_k) - 1.0) < 0.5) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs(float(abs_k) - 2.0) < 0.5) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs(float(abs_k) - 3.0) < 0.5) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs(float(abs_k) - 4.0) < 0.5) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#else\n    if (abs_k == 1) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs_k == 2) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs_k == 3) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs_k == 4) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#endif\n\n    vec2 sin_t, cos_t;\n    sincos_taylor_fp64(t, sin_t, cos_t);\n\n    vec2 result = vec2(0.0, 0.0);\n    if (j == 0) {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        } else {\n            result = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    } else if (j == 1) {\n        if (k > 0) {\n            result = -sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(v, cos_t), mul_fp64(u, sin_t));\n        }\n    } else if (j == -1) {\n        if (k > 0) {\n            result = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        }\n    } else {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\n        } else {\n            result = -sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    }\n\n    return result;\n}\n\nvec2 tan_fp64(vec2 a) {\n    vec2 sin_a;\n    vec2 cos_a;\n\n    if (a.x == 0.0 && a.y == 0.0) {\n        return vec2(0.0, 0.0);\n    }\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\n\n    vec2 t;\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\n    int j = int(q);\n\n\n    if (j < -2 || j > 2) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    }\n\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\n\n    q = floor(t.x / PI_16_FP64.x + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    } else {\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\n    }\n\n\n    vec2 u = vec2(0.0, 0.0);\n    vec2 v = vec2(0.0, 0.0);\n\n    vec2 sin_t, cos_t;\n    vec2 s, c;\n    sincos_taylor_fp64(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0_FP64;\n            v = SIN_TABLE_0_FP64;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1_FP64;\n            v = SIN_TABLE_1_FP64;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2_FP64;\n            v = SIN_TABLE_2_FP64;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3_FP64;\n            v = SIN_TABLE_3_FP64;\n        }\n#else\n        if (abs_k == 1) {\n            u = COS_TABLE_0_FP64;\n            v = SIN_TABLE_0_FP64;\n        } else if (abs_k == 2) {\n            u = COS_TABLE_1_FP64;\n            v = SIN_TABLE_1_FP64;\n        } else if (abs_k == 3) {\n            u = COS_TABLE_2_FP64;\n            v = SIN_TABLE_2_FP64;\n        } else if (abs_k == 4) {\n            u = COS_TABLE_3_FP64;\n            v = SIN_TABLE_3_FP64;\n        }\n#endif\n        if (k > 0) {\n            s = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n            c = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        } else {\n            s = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n            c = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return div_fp64(sin_a, cos_a);\n}\n\nvec2 radians_fp64(vec2 degree) {\n  return mul_fp64(degree, PI_180_FP64);\n}\n\nvec2 mix_fp64(vec2 a, vec2 b, float x) {\n  vec2 range = sub_fp64(b, a);\n  return sum_fp64(a, mul_fp64(range, vec2(x, 0.0)));\n}\n\nvoid vec2_sum_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = sum_fp64(a[0], b[0]);\n    out_val[1] = sum_fp64(a[1], b[1]);\n}\n\nvoid vec2_sub_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = sub_fp64(a[0], b[0]);\n    out_val[1] = sub_fp64(a[1], b[1]);\n}\n\nvoid vec2_mul_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = mul_fp64(a[0], b[0]);\n    out_val[1] = mul_fp64(a[1], b[1]);\n}\n\nvoid vec2_div_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = div_fp64(a[0], b[0]);\n    out_val[1] = div_fp64(a[1], b[1]);\n}\n\nvoid vec2_mix_fp64(vec2 x[2], vec2 y[2], float a, out vec2 out_val[2]) {\n  vec2 range[2];\n  vec2_sub_fp64(y, x, range);\n  vec2 portion[2];\n  portion[0] = range[0] * a;\n  portion[1] = range[1] * a;\n  vec2_sum_fp64(x, portion, out_val);\n}\n\nvec2 vec2_length_fp64(vec2 x[2]) {\n  return sqrt_fp64(sum_fp64(mul_fp64(x[0], x[0]), mul_fp64(x[1], x[1])));\n}\n\nvoid vec2_normalize_fp64(vec2 x[2], out vec2 out_val[2]) {\n  vec2 length = vec2_length_fp64(x);\n  vec2 length_vec2[2];\n  length_vec2[0] = length;\n  length_vec2[1] = length;\n\n  vec2_div_fp64(x, length_vec2, out_val);\n}\n\nvec2 vec2_distance_fp64(vec2 x[2], vec2 y[2]) {\n  vec2 diff[2];\n  vec2_sub_fp64(x, y, diff);\n  return vec2_length_fp64(diff);\n}\n\nvec2 vec2_dot_fp64(vec2 a[2], vec2 b[2]) {\n  vec2 v[2];\n\n  v[0] = mul_fp64(a[0], b[0]);\n  v[1] = mul_fp64(a[1], b[1]);\n\n  return sum_fp64(v[0], v[1]);\n}\nvoid vec3_sub_fp64(vec2 a[3], vec2 b[3], out vec2 out_val[3]) {\n  for (int i = 0; i < 3; i++) {\n    out_val[i] = sum_fp64(a[i], b[i]);\n  }\n}\n\nvoid vec3_sum_fp64(vec2 a[3], vec2 b[3], out vec2 out_val[3]) {\n  for (int i = 0; i < 3; i++) {\n    out_val[i] = sum_fp64(a[i], b[i]);\n  }\n}\n\nvec2 vec3_length_fp64(vec2 x[3]) {\n  return sqrt_fp64(sum_fp64(sum_fp64(mul_fp64(x[0], x[0]), mul_fp64(x[1], x[1])),\n    mul_fp64(x[2], x[2])));\n}\n\nvec2 vec3_distance_fp64(vec2 x[3], vec2 y[3]) {\n  vec2 diff[3];\n  vec3_sub_fp64(x, y, diff);\n  return vec3_length_fp64(diff);\n}\nvoid vec4_fp64(vec4 a, out vec2 out_val[4]) {\n  out_val[0].x = a[0];\n  out_val[0].y = 0.0;\n\n  out_val[1].x = a[1];\n  out_val[1].y = 0.0;\n\n  out_val[2].x = a[2];\n  out_val[2].y = 0.0;\n\n  out_val[3].x = a[3];\n  out_val[3].y = 0.0;\n}\n\nvoid vec4_scalar_mul_fp64(vec2 a[4], vec2 b, out vec2 out_val[4]) {\n  out_val[0] = mul_fp64(a[0], b);\n  out_val[1] = mul_fp64(a[1], b);\n  out_val[2] = mul_fp64(a[2], b);\n  out_val[3] = mul_fp64(a[3], b);\n}\n\nvoid vec4_sum_fp64(vec2 a[4], vec2 b[4], out vec2 out_val[4]) {\n  for (int i = 0; i < 4; i++) {\n    out_val[i] = sum_fp64(a[i], b[i]);\n  }\n}\n\nvoid vec4_dot_fp64(vec2 a[4], vec2 b[4], out vec2 out_val) {\n  vec2 v[4];\n\n  v[0] = mul_fp64(a[0], b[0]);\n  v[1] = mul_fp64(a[1], b[1]);\n  v[2] = mul_fp64(a[2], b[2]);\n  v[3] = mul_fp64(a[3], b[3]);\n\n  out_val = sum_fp64(sum_fp64(v[0], v[1]), sum_fp64(v[2], v[3]));\n}\n\nvoid mat4_vec4_mul_fp64(vec2 b[16], vec2 a[4], out vec2 out_val[4]) {\n  vec2 tmp[4];\n\n  for (int i = 0; i < 4; i++)\n  {\n    for (int j = 0; j < 4; j++)\n    {\n      tmp[j] = b[j + i * 4];\n    }\n    vec4_dot_fp64(a, tmp, out_val[i]);\n  }\n}\n"),ft={ONE:1};var dt={name:"fp64",vs:ht,fs:null,fp64ify:fp64ify,fp64LowPart:function fp64LowPart(e){return e-Math.fround(e)},fp64ifyMatrix4:function fp64ifyMatrix4(e){for(var t=new Float32Array(32),n=0;n<4;++n)for(var r=0;r<4;++r){var i=4*n+r;fp64ify(e[4*r+n],t,2*i)}return t},getUniforms:function fp64_getUniforms(){return Object.assign({},ft)}},gt=("".concat(pt),[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),mt={modelMatrix:gt,viewMatrix:gt,projectionMatrix:gt,cameraPositionWorld:[0,0,0]};var yt="varying vec4 project_vPositionWorld;\nvarying vec3 project_vNormalWorld;\n\nvec4 project_getPosition_World() {\n  return project_vPositionWorld;\n}\n\nvec3 project_getNormal_World() {\n  return project_vNormalWorld;\n}\n";"".concat(yt,"\nuniform mat4 modelMatrix;\nuniform mat4 viewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewProjectionMatrix;\nuniform vec3 cameraPositionWorld;\n\nstruct World {\n  vec3 position;\n  vec3 normal;\n};\n\nWorld world;\n\nvoid project_setPosition(vec4 position) {\n  project_vPositionWorld = position;\n}\n\nvoid project_setNormal(vec3 normal) {\n  project_vNormalWorld = normal;\n}\n\nvoid project_setPositionAndNormal_World(vec3 position, vec3 normal) {\n  world.position = position;\n  world.normal = normal;\n}\n\nvoid project_setPositionAndNormal_Model(vec3 position, vec3 normal) {\n  world.position = (modelMatrix * vec4(position, 1.)).xyz;\n  world.normal = mat3(modelMatrix) * normal;\n}\n\nvec4 project_model_to_clipspace(vec4 position) {\n  return viewProjectionMatrix * modelMatrix * position;\n}\n\nvec4 project_model_to_clipspace(vec3 position) {\n  return viewProjectionMatrix * modelMatrix * vec4(position, 1.);\n}\n\nvec4 project_world_to_clipspace(vec3 position) {\n  return viewProjectionMatrix * vec4(position, 1.);\n}\n\nvec4 project_view_to_clipspace(vec3 position) {\n  return projectionMatrix * vec4(position, 1.);\n}\n\nvec4 project_to_clipspace(vec3 position) {\n  return viewProjectionMatrix * vec4(position, 1.);\n}\n"),"\n".concat(yt);"".concat("\n","\n").concat("#define LIGHT_MAX 4\n\nuniform bool lighting_uEnableLights;\nuniform vec3 lighting_uAmbientColor;\nuniform vec3 lighting_uDirection;\nuniform vec3 lighting_uDirectionalColor;\nuniform int  lighting_uPointCount;\nuniform vec3 lighting_uPointLocation[LIGHT_MAX];\nuniform vec3 lighting_uPointColor[LIGHT_MAX];\nuniform bool lighting_uEnableReflections;\nvarying vec4 lighting_vPosition;\nvarying vec4 lighting_vNormal;\nvarying vec3 lighting_vColor;\nvarying vec3 lighting_vLightWeighting;\nvarying vec3 lighting_vReflection;\n\nvoid lighting_setPositionAndNormal(vec3 position, vec3 normal) {\n  lighting_vPosition = worldMatrix * vec4(position, 1.);\n  lighting_vNormal = worldInverseTransposeMatrix * vec4(normal, 1.);;\n}\n\nvoid lighting__getLightWeigting() {\n  float directionalLightWeighting = max(dot(lighting_vNormal.xyz, lighting_uDirection), 0.);\n  vec3 pointWeight = vec3(0., 0., 0.);\n  for (int i = 0; i < LIGHT_MAX; i++) {\n    if (i < numberPoints) {\n      vec4 mvLightPosition = viewMatrix * vec4(lighting_uPointLocation[i], 1.);\n      vec3 pointLightDirection = normalize(mvLightPosition.xyz - lighting_vPosition.xyz);\n      pointWeight += max(dot(lighting_vNormal.xyz, pointLightDirection), 0.) * pointColor[i];\n     } else {\n       break;\n     }\n   }\n   return ambientColor + (directionalColor * directionalLightWeighting) + pointWeight;\n}\n\nvoid lighting_apply(vec3 position, vec3 normal) {\n  lighting_setPositionAndNormal(position, normal);\n  if(!lighting_uEnableLights) {\n    lighting_vLightWeighting = vec3(1., 1., 1.);\n  } else {\n    lighting_vLightWeighting = lighting__getLightWeighting();\n  }\n}\n\nvoid lighting_set_reflection(vec3 position) {\n  if (lighting_uEnableReflections) {\n    lighting_vReflection = (viewInverseMatrix[3] - (worldMatrix * vec4(position, 1.))).xyz;\n  } else {\n    lighting_vReflection = vec3(1., 1., 1.);\n  }\n}\n","\n"),"".concat("\n","\n").concat("precision highp float;\n\n#define LIGHT_MAX 4\n\nvarying vec3 lighting_vLightWeighting;\n\nvec4 lighting_apply(vec4 color) {\n  return vec4(color.rgb * lighting_vLightWeighting, color.a);\n}\n\nuniform mat4 viewMatrix;\n\n\nvarying vec4 lighting_vColor;\nvarying vec4 lighting_vTransformedNormal;\nvarying vec4 lighting_vPosition;\n\nuniform float shininess;\nuniform bool enableSpecularMap;\nuniform bool enableLights;\n\nuniform vec3 ambientColor;\nuniform vec3 directionalColor;\nuniform vec3 lightingDirection;\n\nuniform vec3 lighting_uPointLocation[LIGHT_MAX];\nuniform vec3 lighting_uPointColor[LIGHT_MAX];\nuniform float lighting_uPointSpecularEnable[LIGHT_MAX];\nuniform vec3 lighting_uPointSpecularColor[LIGHT_MAX];\nuniform int numberPoints;\n\n\nvec3 lighting__calculate_light_weighting() {\n\treturn lighting__calculate_light_weighting(shininess);\n}\n\nvec3 lighting__calculate_light_weighting(shininess) {\n  vec3 normal = vTransformedNormal.xyz;\n  vec3 eyeDirection = normalize(-vPosition.xyz);\n\n  vec3 specularLight = vec3(0., 0., 0.);\n  vec3 diffuseLight = vec3(0., 0., 0.);\n\n  for (int i = 0; i < LIGHT_MAX; i++) {\n    if (i < numberPoints) {\n      vec3 transformedPointLocation = (viewMatrix * vec4(lighting_uPointLocation[i], 1.0)).xyz;\n      vec3 lightDirection = normalize(transformedPointLocation - vPosition.xyz);\n\n      if (lighting_uPointSpecularEnable > 0.) {\n        vec3 reflectionDirection = reflect(-lightDirection, normal);\n        float specularLightWeighting =\n          pow(max(dot(reflectionDirection, eyeDirection), 0.0), shininessVal);\n        specularLight += specularLightWeighting * lighting_uPointSpecularColor[i];\n      }\n\n      float diffuseLightWeighting = max(dot(normal, lightDirection), 0.0);\n      diffuseLight += diffuseLightWeighting * lighting_uPointColor[i];\n    } else {\n      break;\n    }\n  }\n\n  return ambientColor + diffuseLight + specularLight;\n}\n\nvoid lighting_filterColor(fragmentColor) {\n  if (!lighting_enable) {\n  \treturn fragmentColor;\n  } else {\n  \tvec3 lightWeighting = lighting__calculate_light_weighting();\n  \treturn vec4(fragmentColor.rgb * lightWeighting, fragmentColor.a);\n  }\n}\n\nuniform vec3 material_uAmbientColor;\nuniform vec3 material_uDiffuseColor;\nuniform vec3 material_uSpecularColor;\nuniform vec3 material_uEmissiveColor;\n\nuniform bool hasTexture1;\nuniform sampler2D sampler1;\n\nuniform mat4 viewMatrix;\n\nvoid apply_lighting(color) {\n  vec3 ambientLightWeighting = ambientColor;\n\n  vec3 normal = vTransformedNormal.xyz;\n  vec3 eyeDirection = normalize(-vPosition.xyz);\n\n  vec3 specularLight = vec3(0.0, 0.0, 0.0);\n  vec3 diffuseLight = vec3(0.0, 0.0, 0.0);\n\n  for (int i = 0; i < LIGHT_MAX; i++) {\n    if (i < numberPoints) {\n      vec3 transformedPointLocation = (viewMatrix * vec4(pointLocation[i], 1.0)).xyz;\n      vec3 lightDirection = normalize(transformedPointLocation - vPosition.xyz);\n\n      if (enableSpecularHighlights) {\n        vec3 reflectionDirection = reflect(-lightDirection, normal);\n        float specularLightWeighting =\n          pow(max(dot(reflectionDirection, eyeDirection), 0.0), shininess);\n        specularLight += specularLightWeighting * pointSpecularColor[i];\n      }\n\n      float diffuseLightWeighting = max(dot(normal, lightDirection), 0.0);\n      diffuseLight += diffuseLightWeighting * pointColor[i];\n    } else {\n        break;\n    }\n  }\n\n  vec3 matAmbientColor = material_uAmbientColor * color.rgb;\n  vec3 matDiffuseColor = material_uDiffuseColor * color.rgb;\n  vec3 matSpecularColor = material_uSpecularColor * color.rgb;\n  vec3 matEmissiveColor = material_uEmissiveColor * color.rgb;\n  gl_FragColor = vec4(\n    matAmbientColor * ambientLightWeighting\n    + matDiffuseColor * diffuseLightWeighting\n    + matSpecularColor * specularLightWeighting\n    + matEmissiveColor,\n    color.a\n  );\n}\n\n  vec3 lightWeighting;\n  if (!enableLights) {\n    lightWeighting = vec3(1.0, 1.0, 1.0);\n  } else {\n    vec3 lightDirection;\n    float specularLightWeighting = 0.0;\n    float diffuseLightWeighting = 0.0;\n    vec3  specularLight = vec3(0.0, 0.0, 0.0);\n    vec3  diffuseLight = vec3(0.0, 0.0, 0.0);\n\n    vec3 transformedPointLocation;\n    vec3 normal = vTransformedNormal.xyz;\n\n    vec3 eyeDirection = normalize(-vPosition.xyz);\n    vec3 reflectionDirection;\n\n    vec3 pointWeight = vec3(0.0, 0.0, 0.0);\n\n    for (int i = 0; i < LIGHT_MAX; i++) {\n      if (i < numberPoints) {\n        transformedPointLocation = (viewMatrix * vec4(pointLocation[i], 1.0)).xyz;\n        lightDirection = normalize(transformedPointLocation - vPosition.xyz);\n\n        if (enableSpecular[i] > 0.0) {\n          reflectionDirection = reflect(-lightDirection, normal);\n          specularLightWeighting = pow(max(dot(reflectionDirection, eyeDirection), 0.0), shininess);\n          specularLight += specularLightWeighting * pointSpecularColor[i];\n        }\n\n        diffuseLightWeighting = max(dot(normal, lightDirection), 0.0);\n        diffuseLight += diffuseLightWeighting * pointColor[i];\n      } else {\n        break;\n      }\n    }\n\n    lightWeighting = ambientColor + diffuseLight + specularLight;\n  }\nuniform float reflection;\nuniform float refraction;\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","\n"),new Float32Array([1,1,2]);var vt={pickingSelectedColor:null,pickingHighlightColor:new Uint8Array([0,255,255,255]),pickingThreshold:1,pickingActive:!1};var _t={name:"picking",vs:"uniform vec3 picking_uSelectedColor;\nuniform float picking_uThreshold;\nuniform bool picking_uSelectedColorValid;\n\nout vec4 picking_vRGBcolor_Aselected;\n\nconst float COLOR_SCALE = 1. / 255.;\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    picking_uSelectedColorValid &&\n    abs(vertexColor.r - picking_uSelectedColor.r) < picking_uThreshold &&\n    abs(vertexColor.g - picking_uSelectedColor.g) < picking_uThreshold &&\n    abs(vertexColor.b - picking_uSelectedColor.b) < picking_uThreshold;\n}\n\nvoid picking_setPickingColor(vec3 pickingColor) {\n  picking_vRGBcolor_Aselected.a =\n    float(isVertexPicked(pickingColor));\n  picking_vRGBcolor_Aselected.rgb = pickingColor * COLOR_SCALE;\n}\n",fs:"uniform bool picking_uActive;\nuniform vec3 picking_uSelectedColor;\nuniform vec4 picking_uHighlightColor;\n\nin vec4 picking_vRGBcolor_Aselected;\n\nconst float COLOR_SCALE = 1. / 255.;\nvec4 picking_filterHighlightColor(vec4 color) {\n  bool selected = bool(picking_vRGBcolor_Aselected.a);\n\n  if (selected) {\n    vec4 highLightColor = picking_uHighlightColor * COLOR_SCALE;\n\n    float highLightAlpha = highLightColor.a;\n    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);\n    float highLightRatio = highLightAlpha / blendedAlpha;\n\n    vec3 blendedRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);\n    return vec4(blendedRGB, blendedAlpha);\n  } else {\n    return color;\n  }\n}\nvec4 picking_filterPickingColor(vec4 color) {\n  vec3 pickingColor = picking_vRGBcolor_Aselected.rgb;\n  if (picking_uActive && length(pickingColor) < 0.001) {\n    discard;\n  }\n  return picking_uActive ? vec4(pickingColor, 1.0) : color;\n}\nvec4 picking_filterColor(vec4 color) {\n  vec4 highightColor = picking_filterHighlightColor(color);\n  return picking_filterPickingColor(highightColor);\n}\n\n",getUniforms:function picking_getUniforms(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt,t={};if(void 0!==e.pickingSelectedColor)if(null===e.pickingSelectedColor)t.picking_uSelectedColorValid=0;else{var n=[e.pickingSelectedColor[0],e.pickingSelectedColor[1],e.pickingSelectedColor[2]];t.picking_uSelectedColorValid=1,t.picking_uSelectedColor=n}return void 0!==e.pickingHighlightColor&&(t.picking_uHighlightColor=e.pickingHighlightColor),void 0!==e.pickingThreshold&&(t.picking_uThreshold=e.pickingThreshold),void 0!==e.pickingActive&&(t.picking_uActive=e.pickingActive?1:0),t}};var bt="void main() {}",xt="#version 300 es\n".concat(bt);function getQualifierDetails(e,t){t=Array.isArray(t)?t:[t];var n=e.replace(/^\s+/,"").split(/\s+/),r=Object(U.a)(n,3),i=r[0],o=r[1],a=r[2];return t.includes(i)&&o&&a?{qualifier:i,type:o,name:a.split(";")[0]}:null}function getPassthroughFS(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.version,n=void 0===t?100:t,r=e.input,i=e.inputType,o=e.output;if(!r)return 300===n?xt:bt;var a=convertToVec4(r,i);return 300===n?"#version 300 es\nin ".concat(i," ").concat(r,";\nout vec4 ").concat(o,";\nvoid main() {\n  ").concat(o," = ").concat(a,";\n}"):"varying ".concat(i," ").concat(r,";\nvoid main() {\n  gl_FragColor = ").concat(a,";\n}")}function typeToChannelSuffix(e){switch(e){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return it()(!1),null}}function typeToChannelCount(e){switch(e){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return it()(!1),null}}function convertToVec4(e,t){switch(t){case"float":return"vec4(".concat(e,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(e,", 0.0, 1.0)");case"vec3":return"vec4(".concat(e,", 1.0)");case"vec4":return e;default:return it()(!1),null}}var wt={name:"transform",vs:"attribute float transform_elementID;\nvec2 transform_getPixelSizeHalf(vec2 size) {\n  return vec2(1.) / (2. * size);\n}\n\nvec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {\n  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);\n  float xIndex = transform_elementID - (yIndex * texSize[0]);\n  return vec2(xIndex, yIndex);\n}\nvec2 transform_getTexCoord(vec2 size) {\n  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);\n  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);\n  vec2 coord = indices / size + pixelSizeHalf;\n  return coord;\n}\nvec2 transform_getPos(vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);\n  return pos;\n}\nvec4 transform_getInput(sampler2D texSampler, vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec4 textureColor = texture2D(texSampler, texCoord);\n  return textureColor;\n}\n",fs:null},St=n(29),Et=n.n(St),Pt={},Ct=function addModel(e){Pt[e.id]||(Pt[e.id]=e,Et.a.listItem("luma.gl",e.id))},kt=function logModel(e,t){if(Et.a.isReady()&&!Et.a.throttle("luma.gl:".concat(e.id),1e3)){var n=e.geometry?Object.assign({},e.geometry.attributes,e.attributes):e.attributes,r=Object.assign({},e.uniforms,t);Et.a.multiUpdate("luma.gl",e.id,[{path:"objects.uniforms",data:r},{path:"objects.attributes",data:n}])}},Tt=function removeModel(e){delete Pt[e],Et.a.deleteItem("luma.gl",e)},At=function recursiveSet(e,t,n){e&&(t.length>1?recursiveSet(e[t[0]],t.slice(1),n):e[t[0]]=n)},Ot=new Map,It=function setOverride(e,t,n){g.b.__SEER_INITIALIZED__&&(Ot.has(e)||Ot.set(e,new Map),Ot.get(e).set(t,n))},Rt=function getOverrides(e,t){if(g.b.__SEER_INITIALIZED__&&e){var n=Ot.get(e);n&&n.forEach(function(e,n){At(t,n,e)})}};function getDebugTableForUniforms(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.header,n=void 0===t?"Uniforms":t,r=e.program,i=e.uniforms,o=e.undefinedOnly,a=void 0!==o&&o;Object(x.a)(r);var s=r._uniformSetters,l={},u=Object.keys(s).sort(),p=0,h=!0,f=!1,d=void 0;try{for(var g,m=u[Symbol.iterator]();!(h=(g=m.next()).done);h=!0){var v=g.value;v.match(".*_.*")||v.match(".*Matrix")||addUniformToTable({table:l,header:n,uniforms:i,uniformName:v,undefinedOnly:a})&&p++}}catch(e){f=!0,d=e}finally{try{h||null==m.return||m.return()}finally{if(f)throw d}}var _=!0,b=!1,w=void 0;try{for(var S,E=u[Symbol.iterator]();!(_=(S=E.next()).done);_=!0){var P=S.value;P.match(".*Matrix")&&addUniformToTable({table:l,header:n,uniforms:i,uniformName:P,undefinedOnly:a})&&p++}}catch(e){b=!0,w=e}finally{try{_||null==E.return||E.return()}finally{if(b)throw w}}var C=!0,k=!1,T=void 0;try{for(var A,O=u[Symbol.iterator]();!(C=(A=O.next()).done);C=!0){var I=A.value;l[I]||addUniformToTable({table:l,header:n,uniforms:i,uniformName:I,undefinedOnly:a})&&p++}}catch(e){k=!0,T=e}finally{try{C||null==O.return||O.return()}finally{if(k)throw T}}var R=0,L={};if(!a)for(var M in i){var j=i[M];l[M]||(R++,L[M]=Object(y.a)({Type:"NOT USED: ".concat(j)},n,Object(c.b)(j)))}return{table:l,count:p,unusedTable:L,unusedCount:R}}function addUniformToTable(e){var t,n=e.table,r=e.header,i=e.uniforms,o=e.uniformName,a=e.undefinedOnly,s=i[o],l=isUniformDefined(s);return(!a||!l)&&(n[o]=(t={},Object(y.a)(t,r,l?Object(c.b)(s):"N/A"),Object(y.a)(t,"Uniform Type",l?s:"NOT PROVIDED"),t),!0)}function isUniformDefined(e){return null!=e}function getDebugTableForVertexArray(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.vertexArray,n=e.header,r=void 0===n?"Attributes":n;if(!t.configuration)return{};var i={};t.elements&&(i.ELEMENT_ARRAY_BUFFER=getDebugTableRow(t,t.elements,null,r));var o=t.values;for(var a in o){var s=t._getAttributeInfo(a);if(s){var l="".concat(a,": ").concat(s.name),u=t.accessors[s.location];u&&(l="".concat(a,": ").concat(getGLSLDeclaration(s.name,u))),i[l]=getDebugTableRow(t,o[a],u,r)}}return i}function getDebugTableRow(e,t,n,r){var o,a,s,l,u=e.gl,p="NOT PROVIDED",h="N/A",f="N/A",d="N/A";if(n&&(p=n.type,h=n.size,a=-1!==(p=String(p).replace("Array","")).indexOf("nt")),t instanceof k.a){var g,m,v=t,_=v.getDebugData(),b=_.data;if(s=_.modified?"*":"",l=b,f=(d=v.byteLength)/b.BYTES_PER_ELEMENT/h,n){var x=n.divisor>0;m="".concat(x?"I ":"P "," ").concat(f," (x").concat(h,"=").concat(d," bytes ").concat(Object(i.c)(u,p),")")}else a=!0,m="".concat(d," bytes");return g={},Object(y.a)(g,r,"".concat(s).concat(Object(c.b)(l,{size:h,isInteger:a}))),Object(y.a)(g,"Format ",m),g}return l=t,h=t.length,a=-1!==(p=String(t.constructor.name).replace("Array","")).indexOf("nt"),o={},Object(y.a)(o,r,"".concat(Object(c.b)(l,{size:h,isInteger:a})," (constant)")),Object(y.a)(o,"Format ","".concat(h,"x").concat(p," (constant)")),o}function getGLSLDeclaration(e,t){var n=getCompositeGLType(t.type,t.size);return n?"".concat(e," (").concat(n.name,")"):e}function getDebugTableForProgramConfiguration(e){var t={},n="Accessors for ".concat(e.id),r=!0,i=!1,o=void 0;try{for(var a,s=e.attributeInfos[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value;if(l){var u=debug_program_configuration_getGLSLDeclaration(l);t["in ".concat(u)]=Object(y.a)({},n,JSON.stringify(l.accessor))}}}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}var c=!0,p=!1,h=void 0;try{for(var f,d=e.varyingInfos[Symbol.iterator]();!(c=(f=d.next()).done);c=!0){var g=f.value;if(g){var m=debug_program_configuration_getGLSLDeclaration(g);t["out ".concat(m)]=Object(y.a)({},n,JSON.stringify(g.accessor))}}}catch(e){p=!0,h=e}finally{try{c||null==d.return||d.return()}finally{if(p)throw h}}return t}function debug_program_configuration_getGLSLDeclaration(e){var t=e.accessor,n=getCompositeGLType(t.type,t.size);return n?"".concat(n.name," ").concat(e.name):e.name}Et.a.listenFor("luma.gl",function(e){var t=Pt[e.itemKey];if(t&&"edit"===e.type&&"uniforms"===e.valuePath[0]){var n=e.valuePath.slice(1);It(e.itemKey,n,e.value);var r=t.getUniforms();At(r,n,e.value),t.setUniforms(r)}});var Lt=["renderPickingBuffer","pickingEnabled"],Mt=function(e){function Model(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(d.a)(this,Model),t=Object(T.a)(this,Object(A.a)(Model).call(this,n)),Object(x.a)(Object(o.m)(e)),t.gl=e,t.lastLogTime=0,t.initialize(n),t}return Object(O.a)(Model,e),Object(v.a)(Model,[{key:"initialize",value:function initialize(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.props={},this.program=this._createProgram(e),this.vertexArray=new Me(this.gl,{program:this.program}),this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.animatedUniforms={},this.animated=!1,this.animationLoop=null,this.timerQueryEnabled=!1,this.timeElapsedQuery=void 0,this.lastQueryReturned=!0,this.stats={accumulatedFrameTime:0,averageFrameTime:0,profileFrameCount:0},this.pickable=!0,this.setProps(e),this.setUniforms(Object.assign({},this.getModuleUniforms(),this.getModuleUniforms(e.moduleSettings))),this.isInstanced=e.isInstanced||e.instanced,this.onBeforeRender=e.onBeforeRender||function(){},this.onAfterRender=e.onAfterRender||function(){},Object(x.a)(void 0!==this.drawMode&&Number.isFinite(this.vertexCount),"Model needs drawMode and vertexCount")}},{key:"setProps",value:function setProps(e){Object.assign(this.props,e),"instanceCount"in e&&(this.instanceCount=e.instanceCount),"geometry"in e&&this.setGeometry(e.geometry),"attributes"in e&&this.setAttributes(e.attributes),"uniforms"in e&&this.setUniforms(e.uniforms,e.samplers),"pickable"in e&&(this.pickable=e.pickable),"timerQueryEnabled"in e&&(this.timerQueryEnabled=e.timerQueryEnabled&&ke.isSupported(this.gl,["timers"]),e.timerQueryEnabled&&!this.timerQueryEnabled&&c.g.warn("GPU timer not supported")()),"_feedbackBuffers"in e&&this._setFeedbackBuffers(e._feedbackBuffers),"_animationProps"in e&&this._setAnimationProps(e._animationProps),"_animationLoop"in e&&(this.animationLoop=e._animationLoop)}},{key:"delete",value:function _delete(){for(var e in this._attributes)this._attributes[e]!==this.attributes[e]&&this._attributes[e].delete();this.program.delete(),this.vertexArray.delete(),Tt(this.id)}},{key:"destroy",value:function destroy(){this.delete()}},{key:"getNeedsRedraw",value:function getNeedsRedraw(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).clearRedrawFlags,t=void 0!==e&&e,n=!1;return n=n||this.needsRedraw,this.needsRedraw=this.needsRedraw&&!t,this.geometry&&(n=n||this.geometry.getNeedsRedraw({clearRedrawFlags:t})),this.animated&&(n=n||"animated model ".concat(this.id)),n}},{key:"getDrawMode",value:function getDrawMode(){return this.drawMode}},{key:"getVertexCount",value:function getVertexCount(){return this.vertexCount}},{key:"getInstanceCount",value:function getInstanceCount(){return this.instanceCount}},{key:"getProgram",value:function getProgram(){return this.program}},{key:"getAttributes",value:function getAttributes(){return this.attributes}},{key:"getUniforms",value:function getUniforms(){return this.program.getUniforms}},{key:"setNeedsRedraw",value:function setNeedsRedraw(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.needsRedraw=e,this}},{key:"setDrawMode",value:function setDrawMode(e){return this.props.drawMode=getDrawMode(e),this}},{key:"setVertexCount",value:function setVertexCount(e){return Object(x.a)(Number.isFinite(e)),this.props.vertexCount=e,this}},{key:"setInstanceCount",value:function setInstanceCount(e){return Object(x.a)(Number.isFinite(e)),this.instanceCount=e,this}},{key:"setGeometry",value:function setGeometry(e){this.geometry=e;var t=this._createBuffersFromAttributeDescriptors(this.geometry.getAttributes());return this.vertexArray.setAttributes(t),this.setNeedsRedraw(),this}},{key:"setAttributes",value:function setAttributes(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(c.d)(e))return this;Object.assign(this.attributes,e);var t=this._createBuffersFromAttributeDescriptors(e);return this.vertexArray.setAttributes(t),this.setNeedsRedraw(),this}},{key:"setUniforms",value:function setUniforms(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=Object.assign({},t),Rt(this.id,t),t=this._extractAnimatedUniforms(t),this.program.setUniforms(t,n,function(){e._checkForDeprecatedUniforms(t),e.setNeedsRedraw()})}},{key:"_setAnimationProps",value:function _setAnimationProps(e){var t=this;if(this.animated){Object(x.a)(e,"Model.draw(): animated uniforms but no animationProps");var n=this._evaluateAnimateUniforms(e);this.program.setUniforms(n,{},function(){t._checkForDeprecatedUniforms(n),t.setNeedsRedraw()})}}},{key:"updateModuleSettings",value:function updateModuleSettings(e){var t=this.getModuleUniforms(e||{});return this.setUniforms(t)}},{key:"clear",value:function clear(e){return clear_clear(this.program.gl,e),this}},{key:"draw",value:function draw(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.moduleSettings,n=void 0===t?null:t,r=e.framebuffer,i=e.uniforms,o=void 0===i?{}:i,a=e.attributes,s=void 0===a?{}:a,l=e.samplers,u=void 0===l?{}:l,p=e.transformFeedback,h=void 0===p?this.transformFeedback:p,f=e.parameters,d=void 0===f?{}:f,g=e.vertexArray,m=void 0===g?this.vertexArray:g,y=e.animationProps;Ct(this),this.setAttributes(s),this.updateModuleSettings(n),this.setUniforms(o,u),this._refreshAnimationProps(y);var v=this._logDrawCallStart(2),_=this.vertexArray.getDrawParams(this.props);_.isInstanced&&!this.isInstanced&&c.g.warn("Found instanced attributes on non-instanced model",this.id)();var b=_.isIndexed,x=_.indexType,w=this.isInstanced,S=this.instanceCount;return this.onBeforeRender(),this._timerQueryStart(),this.program.draw(Object.assign({},e,{logPriority:v,uniforms:null,framebuffer:r,parameters:d,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:m,transformFeedback:h,isIndexed:b,indexType:x,isInstanced:w,instanceCount:S})),this._timerQueryEnd(),this.onAfterRender(),this.setNeedsRedraw(!1),this._logDrawCallEnd(v,m,r),this}},{key:"transform",value:function transform(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.discard,n=void 0===t||t,r=e.feedbackBuffers,i=e.unbindModels,o=void 0===i?[]:i,a=e.parameters;r&&this._setFeedbackBuffers(r),n&&(a=Object.assign({},a,Object(y.a)({},35977,n))),o.forEach(function(e){return e.vertexArray.unbindBuffers()});try{this.draw(Object.assign({},e,{parameters:a}))}finally{o.forEach(function(e){return e.vertexArray.bindBuffers()})}return this}},{key:"render",value:function render(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(x.a)(arguments.length<=1),this.draw({uniforms:e})}},{key:"_createProgram",value:function _createProgram(e){var t=e.vs,n=void 0===t?null:t,r=e.fs,i=void 0===r?null:r,o=e.modules,a=void 0===o?null:o,s=e.defines,l=void 0===s?{}:s,u=e.inject,p=void 0===u?{}:u,h=e.shaderCache,f=void 0===h?null:h,d=e.varyings,g=void 0===d?null:d,m=e.bufferMode,y=void 0===m?35981:m,v=e.program,_=void 0===v?null:v;this.getModuleUniforms=function(e){};var b=this.id;if(!_){n=n||Ue,i=i||Ve;var w=assembleShaders(this.gl,{vs:n,fs:i,modules:a,inject:p,defines:l,log:c.g});n=w.vs,i=w.fs,_=f?f.getProgram(this.gl,{id:b,vs:n,fs:i}):new Pe(this.gl,{id:b,vs:n,fs:i,varyings:g,bufferMode:y}),this.getModuleUniforms=w.getUniforms||function(e){}}return Object(x.a)(_ instanceof Pe,"Model needs a program"),_}},{key:"_checkForDeprecatedUniforms",value:function _checkForDeprecatedUniforms(e){Lt.forEach(function(t){t in e&&c.g.deprecated(t,"use picking shader module and Model class updateModuleSettings()")()})}},{key:"_refreshAnimationProps",value:function _refreshAnimationProps(e){(e=e||this.animationLoop&&this.animationLoop.animationProps)&&this._setAnimationProps(e)}},{key:"_evaluateAnimateUniforms",value:function _evaluateAnimateUniforms(e){if(!this.animated)return{};var t={};for(var n in this.animatedUniforms){var r=this.animatedUniforms[n];t[n]=r(e)}return t}},{key:"_extractAnimatedUniforms",value:function _extractAnimatedUniforms(e){var t=!1;for(var n in e){var r=e[n];"function"==typeof r?(this.animatedUniforms[n]=r,t=!0):delete this.animatedUniforms[n]}if(this.animated=!Object(c.d)(this.animatedUniforms),!t)return e;var i={};for(var o in e)this.animatedUniforms[o]||(i[o]=e[o]);return i}},{key:"_setFeedbackBuffers",value:function _setFeedbackBuffers(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(c.d)(e))return this;var t=this.program.gl;return this.transformFeedback=this.transformFeedback||new Te(t,{program:this.program}),this.transformFeedback.setBuffers(e),this.setNeedsRedraw(),this}},{key:"_timerQueryStart",value:function _timerQueryStart(){!0===this.timerQueryEnabled&&(this.timeElapsedQuery||(this.timeElapsedQuery=new ke(this.gl)),this.lastQueryReturned&&(this.lastQueryReturned=!1,this.timeElapsedQuery.beginTimeElapsedQuery()))}},{key:"_timerQueryEnd",value:function _timerQueryEnd(){if(!0===this.timerQueryEnabled&&(this.timeElapsedQuery.end(),this.timeElapsedQuery.isResultAvailable())){this.lastQueryReturned=!0;var e=this.timeElapsedQuery.getResult();this.stats.lastFrameTime=e,this.stats.accumulatedFrameTime+=e,this.stats.profileFrameCount++,this.stats.averageFrameTime=this.stats.accumulatedFrameTime/this.stats.profileFrameCount,c.g.log(2,"GPU time ".concat(this.program.id,": ").concat(this.stats.lastFrameTime,"ms average ").concat(this.stats.averageFrameTime,"ms accumulated: ").concat(this.stats.accumulatedFrameTime,"ms count: ").concat(this.stats.profileFrameCount))()}}},{key:"_createBuffersFromAttributeDescriptors",value:function _createBuffersFromAttributeDescriptors(e){var t=this.program.gl,n={};for(var r in e){var i=e[r],o=this._attributes[r];i instanceof Ne?o=i:i instanceof k.a?(o=o||new Ne(t,Object.assign({},i,i.layout,{id:r}))).update({buffer:i}):o?o.update(i):o=new Ne(t,Object.assign({},i,{id:r})),this._attributes[r]=o,n[r]=o.getValue()}return n}},{key:"_logDrawCallStart",value:function _logDrawCallStart(e){var t=e>3?0:1e4;if(!(c.g.priority<e||Date.now()-this.lastLogTime<t))return this.lastLogTime=Date.now(),c.g.group(2,">>> DRAWING MODEL ".concat(this.id),{collapsed:c.g.priority<=2})(),e}},{key:"_logDrawCallEnd",value:function _logDrawCallEnd(e,t,n,r){if(void 0!==e){var i=getDebugTableForVertexArray({vertexArray:t,header:"".concat(this.id," attributes"),attributes:this._attributes}),o=getDebugTableForUniforms({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,n)}),a=o.table,s=o.unusedTable,l=o.unusedCount,u=getDebugTableForUniforms({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,n),undefinedOnly:!0}),p=u.table;u.count>0&&c.g.log("MISSING UNIFORMS",Object.keys(p))(),l>0&&c.g.log("UNUSED UNIFORMS",Object.keys(s))();var h=getDebugTableForProgramConfiguration(this.vertexArray.configuration);c.g.table(e,i)(),c.g.table(e,a)(),c.g.table(e+1,h)(),kt(this,n),r&&r.log({priority:2,message:"Rendered to ".concat(r.id)}),c.g.groupEnd(2,">>> DRAWING MODEL ".concat(this.id))()}}},{key:"vertexCount",get:function get(){return Number.isFinite(this.props.vertexCount)?this.props.vertexCount:this.geometry&&this.geometry.getVertexCount()}},{key:"drawMode",get:function get(){return Number.isFinite(this.props.drawMode)?this.props.drawMode:this.geometry&&this.geometry.drawMode}}]),Model}(Fe),jt=n(27),Dt={preserveDrawingBuffer:!0},Ft=function(){function AnimationLoop(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(d.a)(this,AnimationLoop);var t=e.onCreateContext,n=void 0===t?function(e){return createGLContext(e)}:t,r=e.onAddHTML,i=void 0===r?null:r,o=e.onInitialize,a=void 0===o?function(){}:o,s=e.onRender,l=void 0===s?function(){}:s,u=e.onFinalize,p=void 0===u?function(){}:u,h=e.gl,f=void 0===h?null:h,g=e.glOptions,m=void 0===g?{}:g,y=e.debug,v=void 0!==y&&y,_=e.createFramebuffer,b=void 0!==_&&_,x=e.autoResizeViewport,w=void 0===x||x,S=e.autoResizeDrawingBuffer,E=void 0===S||S,P=e.useDevicePixels,C=void 0===P||P;return"useDevicePixelRatio"in e&&(c.g.deprecated("useDevicePixelRatio","useDevicePixels")(),C=e.useDevicePixelRatio),this.props={onCreateContext:n,onAddHTML:i,onInitialize:a,onRender:l,onFinalize:p,gl:f,glOptions:m,debug:v,createFramebuffer:b},this.gl=f,this.needsRedraw=null,this._initialized=!1,this._running=!1,this._animationFrameId=null,this._startPromise=null,this.setProps({autoResizeViewport:w,autoResizeDrawingBuffer:E,useDevicePixels:C}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this),this}return Object(v.a)(AnimationLoop,[{key:"setNeedsRedraw",value:function setNeedsRedraw(e){return Object(x.a)("string"==typeof e),this.needsRedraw=this.needsRedraw||e,this}},{key:"setProps",value:function setProps(e){return"autoResizeViewport"in e&&(this.autoResizeViewport=e.autoResizeViewport),"autoResizeDrawingBuffer"in e&&(this.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer),"useDevicePixels"in e&&(this.useDevicePixels=e.useDevicePixels),this}},{key:"start",value:function start(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._running?this:(this._running=!0,this._startPromise=getPageLoadPromise().then(function(){if(!e._running||e._initialized)return null;e._createWebGLContext(t),e._createFramebuffer(),e._startEventHandling(),e._initializeCallbackData(),e._updateCallbackData(),e._resizeCanvasDrawingBuffer(),e._resizeViewport();var n=e.onInitialize(e.animationProps);return e._initialized=!0,n}).then(function(t){e._running&&(e._addCallbackData(t||{}),!1!==t&&e._startLoop())}),this)}},{key:"redraw",value:function redraw(){return this._setupFrame(),this._updateCallbackData(),this.onRender(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this}},{key:"stop",value:function stop(){return this._running&&(this._finalizeCallbackData(),Object(o.f)(this._animationFrameId),this._animationFrameId=null,this._running=!1),this}},{key:"onCreateContext",value:function onCreateContext(){var e;return(e=this.props).onCreateContext.apply(e,arguments)}},{key:"onInitialize",value:function onInitialize(){var e;return(e=this.props).onInitialize.apply(e,arguments)}},{key:"onRender",value:function onRender(){var e;return(e=this.props).onRender.apply(e,arguments)}},{key:"onFinalize",value:function onFinalize(){var e;return(e=this.props).onFinalize.apply(e,arguments)}},{key:"getHTMLControlValue",value:function getHTMLControlValue(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=document.getElementById(e);return n?Number(n.value):t}},{key:"setViewParameters",value:function setViewParameters(){return c.g.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}},{key:"_startLoop",value:function _startLoop(){var e=this;Object(o.f)(this._animationFrameId),this._animationFrameId=Object(o.p)(function renderFrame(){e._running&&(e.redraw(),e._animationFrameId=Object(o.p)(renderFrame))})}},{key:"_clearNeedsRedraw",value:function _clearNeedsRedraw(){this.needsRedraw=null}},{key:"_setupFrame",value:function _setupFrame(){this._onSetupFrame?this._onSetupFrame(this.animationProps):(this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer())}},{key:"_initializeCallbackData",value:function _initializeCallbackData(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),time:0,tick:0,tock:0,_loop:this,_animationLoop:this,_mousePosition:null}}},{key:"_updateCallbackData",value:function _updateCallbackData(){var e=this._getSizeAndAspect(),t=e.width,n=e.height,r=e.aspect;t===this.animationProps.width&&n===this.animationProps.height||this.setNeedsRedraw("drawing buffer resized"),r!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=t,this.animationProps.height=n,this.animationProps.aspect=r,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.time=Date.now()-this.animationProps.startTime,this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps._offScreen=this.offScreen}},{key:"_finalizeCallbackData",value:function _finalizeCallbackData(){this.onFinalize(this.animationProps)}},{key:"_addCallbackData",value:function _addCallbackData(e){"object"===Object(jt.a)(e)&&null!==e&&(this.animationProps=Object.assign({},this.animationProps,e))}},{key:"_createWebGLContext",value:function _createWebGLContext(e){if(this.offScreen=e.canvas&&"undefined"!=typeof OffscreenCanvas&&e.canvas instanceof OffscreenCanvas,e=Object.assign({},e,Dt,this.props.glOptions),this.gl=this.props.gl||this.onCreateContext(e),!Object(o.m)(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");this.props.debug&&(this.gl=makeDebugContext(this.gl)),Object(E.a)(this.gl),this._createInfoDiv()}},{key:"_createInfoDiv",value:function _createInfoDiv(){if(this.gl.canvas&&this.props.onAddHTML){var e=document.createElement("div");document.body.appendChild(e),e.style.position="relative";var t=document.createElement("div");t.style.position="absolute",t.style.left="10px",t.style.bottom="10px",t.style.width="300px",t.style.background="white",e.appendChild(this.gl.canvas),e.appendChild(t);var n=this.props.onAddHTML(t);n&&(t.innerHTML=n)}}},{key:"_getSizeAndAspect",value:function _getSizeAndAspect(){var e=this.gl.drawingBufferWidth,t=this.gl.drawingBufferHeight,n=1,r=this.gl.canvas,i=r.clientWidth,o=r.clientHeight;return i>=0&&o>=0?n=t>0?i/o:1:e>0&&t>0&&(n=e/t),{width:e,height:t,aspect:n}}},{key:"_resizeViewport",value:function _resizeViewport(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}},{key:"_resizeCanvasDrawingBuffer",value:function _resizeCanvasDrawingBuffer(){this.autoResizeDrawingBuffer&&resizeGLContext(this.gl,{useDevicePixels:this.useDevicePixels})}},{key:"_createFramebuffer",value:function _createFramebuffer(){this.props.createFramebuffer&&(this.framebuffer=new te(this.gl))}},{key:"_resizeFramebuffer",value:function _resizeFramebuffer(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}},{key:"_startEventHandling",value:function _startEventHandling(){this.gl.canvas.addEventListener("mousemove",this._onMousemove),this.gl.canvas.addEventListener("mouseleave",this._onMouseleave)}},{key:"_onMousemove",value:function _onMousemove(e){this.animationProps._mousePosition=[e.offsetX,e.offsetY]}},{key:"_onMouseleave",value:function _onMouseleave(e){this.animationProps._mousePosition=null}}]),AnimationLoop}();new Uint8Array([0,0,0]);var Nt,Bt="transform_uSampler_",zt="transform_uSize_",Ut="transform_position";function updateForTextures(e){var t=e.vs,n=e.sourceTextureMap,r=e.targetTextureVarying,i=e.targetTexture,o=Object.keys(n).length,a=null,s={},l=t,u={};if(o>0||r){var c=l.split("\n"),p=c.slice();if(c.forEach(function(e,t,i){if(o>0){var l=processAttributeDefinition(e,n);if(l){var c=l.updatedLine,h=l.inject;p[t]=c,u=combineInjects([u,h]),Object.assign(s,l.samplerTextureMap),o--}}r&&!a&&(a=getVaryingType(e,r))}),r){it()(i);var h="".concat(zt).concat(r),f="uniform vec2 ".concat(h,";\n"),d="     vec2 ".concat(Ut," = transform_getPos(").concat(h,");\n     gl_Position = vec4(").concat(Ut,", 0, 1.);\n");u=combineInjects([u,{"vs:#decl":f,"vs:#main-start":d}])}l=p.join("\n")}return{vs:l,targetTextureType:a,inject:u,samplerTextureMap:s}}function getSizeUniforms(e){var t,n,r=e.sourceTextureMap,i=e.targetTextureVarying,o=e.targetTexture,a={};for(var s in i&&(t=o.width,n=o.height,a["".concat(zt).concat(i)]=[t,n]),r){var l=r[s];t=l.width,n=l.height,a["".concat(zt).concat(s)]=[t,n]}return a}function getAttributeDefinition(e){return getQualifierDetails(e,["attribute","in"])}function getSamplerDeclerations(e){var t="".concat(Bt).concat(e),n="".concat(zt).concat(e);return{samplerName:t,sizeName:n,uniformDeclerations:"  uniform sampler2D ".concat(t,";\n  uniform vec2 ").concat(n,";")}}function getVaryingType(e,t){var n=getQualifierDetails(e,["varying","out"]);return n&&n.name===t?n.type:null}function processAttributeDefinition(e,t){var n={},r=getAttributeDefinition(e);if(!r)return null;var i=r.type,o=r.name;if(o&&t[o]){var a="// ".concat(e," => Replaced by Transform with a sampler"),s=getSamplerDeclerations(o),l=s.samplerName,u=s.sizeName,c=s.uniformDeclerations,p=typeToChannelSuffix(i),h="  ".concat(i," ").concat(o," = transform_getInput(").concat(l,", ").concat(u,").").concat(p,";\n");return n[l]=o,{updatedLine:a,inject:{"vs:#decl":c,"vs:#main-start":h},samplerTextureMap:n}}return null}var Vt=(Nt={},Object(y.a)(Nt,10241,9728),Object(y.a)(Nt,10240,9728),Object(y.a)(Nt,10242,33071),Object(y.a)(Nt,10243,33071),Nt),Gt=function(){function Transform(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(d.a)(this,Transform),Object(o.d)(e),this.gl=e,this.model=null,this.elementCount=0,this.currentIndex=0,this.sourceBuffers=new Array(2),this.sourceTextures=new Array(2),this.feedbackBuffers=new Array(2),this.targetTextures=new Array(2),this.transformFeedbacks=new Array(2),this.framebuffers=new Array(2),this._createdBuffers={},this.elementIDBuffer=null,this._targetRefTexName=null,this._initialize(t),Object.seal(this)}return Object(v.a)(Transform,null,[{key:"isSupported",value:function isSupported(e){return Object(o.n)(e)}}]),Object(v.a)(Transform,[{key:"delete",value:function _delete(){for(var e in this._createdBuffers)this._createdBuffers[e].delete();this.model.delete()}},{key:"getBuffer",value:function getBuffer(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=e?this.feedbackBuffers[this.currentIndex][e]:null;return t?t instanceof k.a?t:t.buffer:null}},{key:"_getTargetTexture",value:function _getTargetTexture(){return this.framebuffers[this.currentIndex]?this.framebuffers[this.currentIndex].attachments[36064]:null}},{key:"getData",value:function getData(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.varyingName,n=void 0===t?null:t,r=e.packed,i=void 0!==r&&r,o=this.getBuffer(n);if(o)return o.getData();Object(x.a)(!n||n===this.targetTextureVarying);var a=this.framebuffers[this.currentIndex].readPixels();if(!i)return a;for(var s=a.constructor,l=typeToChannelCount(this.targetTextureType),u=new s(a.length*l/4),c=0,p=0;p<a.length;p+=4)for(var h=0;h<l;h++)u[c++]=a[p+h];return u}},{key:"getFramebuffer",value:function getFramebuffer(){return this.framebuffers[this.currentIndex]}},{key:"_getInputs",value:function _getInputs(){var e={},t=this.currentIndex,n=Object.assign({},this.sourceBuffers[t]);if(this.hasSourceTextures||this.targetTextureVarying){for(var r in n.transform_elementID=this.elementIDBuffer,this.samplerTextureMap){var i=this.samplerTextureMap[r];e[r]=this.sourceTextures[t][i]}this._setSourceTextureParameters();var o=getSizeUniforms({sourceTextureMap:this.sourceTextures[t],targetTextureVarying:this.targetTextureVarying,targetTexture:this.targetTextures[t]});Object.assign(e,o)}return{attributes:n,uniforms:e}}},{key:"run",value:function run(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._getInputs(),n=t.attributes,r=t.uniforms;Object.assign(r,e.uniforms);var i=Object.assign({},e.parameters),o=e.clearRenderTarget,a=void 0===o||o,s=null,l=!0;this.renderingToTexture&&(l=!1,s=this.framebuffers[this.currentIndex],Object(x.a)(s),i.viewport=[0,0,s.width,s.height],a&&this.gl.clear(this.gl.COLOR_BUFFER_BIT)),this.model.setAttributes(n),this.model.transform(Object.assign({},e,{transformFeedback:this.transformFeedbacks[this.currentIndex],uniforms:r,discard:l,framebuffer:s,parameters:i}))}},{key:"swapBuffers",value:function swapBuffers(){c.g.deprecated("swapBuffers()","swap()"),this.swap()}},{key:"swap",value:function swap(){Object(x.a)(this.feedbackMap||this._swapTexture),this.currentIndex=(this.currentIndex+1)%2}},{key:"update",value:function update(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.elementCount&&this._setElementCount(e.elementCount);var t=e.sourceBuffers,n=void 0===t?null:t,r=e.feedbackBuffers,i=void 0===r?null:r,o=this.currentIndex;if(n||i){for(var a in i)Object(x.a)(i[a]instanceof k.a||i[a].buffer instanceof k.a);Object.assign(this.sourceBuffers[o],n),Object.assign(this.feedbackBuffers[o],i),this._createFeedbackBuffers({feedbackBuffers:i}),this.transformFeedbacks[o]&&this.transformFeedbacks[o].setBuffers(this.feedbackBuffers[o]),this._setupSwapBuffers()}var s=e._sourceTextures,l=e._targetTexture;(s||l)&&(Object.assign(this.sourceTextures[o],s),this._updateTargetTexture(l||this._targetRefTexName,o),this._setupSwapTextures())}},{key:"_setSourceTextureParameters",value:function _setSourceTextureParameters(){var e=this.currentIndex;for(var t in this.sourceTextures[e])this.sourceTextures[e][t].setParameters(Vt)}},{key:"_setElementCount",value:function _setElementCount(e){this.elementCount!==e&&(this.elementCount<e&&this._updateElementIDBuffer(e),this.model.setVertexCount(e),this.elementCount=e)}},{key:"_updateTargetTexture",value:function _updateTargetTexture(e,t){var n=this._buildTargetTexture(e);n&&(this.targetTextures[t]=n,this.framebuffers[t]&&(this.framebuffers[t].update({attachments:Object(y.a)({},36064,this.targetTextures[t]),resizeAttachments:!1}),this.framebuffers[t].resize({width:n.width,height:n.height})))}},{key:"_initialize",value:function _initialize(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._validateProps(e),n=t.feedbackBuffers,r=t.feedbackMap,i=e.sourceBuffers,o=e.varyings,a=e._targetTexture,s=e._targetTextureVarying,l=e._swapTexture,u=o;r&&!Array.isArray(o)&&(u=Object.values(r)),this.varyingsArray=u,this.feedbackMap=r,this._swapTexture=l,a&&(this.targetTextureVarying=s,this.renderingToTexture=!0,Object(x.a)(this.targetTextureVarying)),this._setupBuffers({sourceBuffers:i,feedbackBuffers:n}),this._setupTextures(e),this._setupSwapBuffers(),this._setupSwapTextures(),this._buildModel(Object.assign({},e,{id:e.id||"transform-model",drawMode:e.drawMode||0,varyings:u}))}},{key:"_validateProps",value:function _validateProps(e){var t=e.feedbackBuffers,n=e.feedbackMap,r=e.destinationBuffers,i=e.sourceDestinationMap;r&&(c.g.deprecated("destinationBuffers","feedbackBuffers")(),t=t||r),i&&(c.g.deprecated("sourceDestinationMap","feedbackMap")(),n=n||i);var o=e.vs,a=e.elementCount,s=e.varyings,l=e._sourceTextures,u=e._targetTexture,p=e._targetTextureVarying,h=e._swapTexture;for(var f in Object(x.a)(o&&(s||n||u)&&a),t||{})Object(x.a)(t[f]instanceof k.a||t[f].buffer instanceof k.a);for(var d in l||{})Object(x.a)(l[d]instanceof V.a);return Object(x.a)(!u||p),Object(x.a)(!h||l[h]),{feedbackBuffers:t,feedbackMap:n}}},{key:"_setupBuffers",value:function _setupBuffers(e){var t=e.sourceBuffers,n=void 0===t?null:t,r=e.feedbackBuffers,i=void 0===r?null:r;this.sourceBuffers[0]=Object.assign({},n),this.feedbackBuffers[0]=Object.assign({},i),this._createFeedbackBuffers({feedbackBuffers:i}),this.sourceBuffers[1]={},this.feedbackBuffers[1]={}}},{key:"_setupTextures",value:function _setupTextures(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e._sourceTextures,n=e._targetTexture;if(this.sourceTextures[0]=Object.assign({},t),this.sourceTextures[1]={},this.hasSourceTextures=Object.keys(this.sourceTextures[0]).length>0,this.targetTextureVarying){var r=this._buildTargetTexture(n);Object(x.a)(r),this.targetTextures[0]=r,this.targetTextures[1]=null}}},{key:"_buildTargetTexture",value:function _buildTargetTexture(e){var t;if(e instanceof V.a)return e;var n=this.sourceTextures[0][e];return n?(this._targetRefTexName=e,Object(o.g)(n,{parameters:(t={},Object(y.a)(t,10241,9728),Object(y.a)(t,10240,9728),Object(y.a)(t,10242,33071),Object(y.a)(t,10243,33071),t),pixelStore:Object(y.a)({},37440,!1)})):null}},{key:"_createFeedbackBuffers",value:function _createFeedbackBuffers(e){var t=e.feedbackBuffers;if(this.feedbackMap){var n=this.currentIndex;for(var r in this.feedbackMap){var i=this.feedbackMap[r];if(!(i===this.targetTextureVarying||t&&t[i])){var o=this.sourceBuffers[n][r],a=o.bytes,s=o.type,l=o.usage,u=o.accessor,c=new k.a(this.gl,{bytes:a,type:s,usage:l,accessor:u});this._createdBuffers[i]&&this._createdBuffers[i].delete(),this._createdBuffers[i]=c,this.feedbackBuffers[n][i]=c}}}}},{key:"_createNewBuffer",value:function _createNewBuffer(e,t){var n=new k.a(this.gl,t);return this._createdBuffers[e]&&(this._createdBuffers[e].delete(),this._createdBuffers[e]=n),n}},{key:"_setupSwapBuffers",value:function _setupSwapBuffers(){if(this.feedbackMap){var e=this.currentIndex,t=(e+1)%2;for(var n in Object.assign(this.sourceBuffers[t],this.sourceBuffers[e]),Object.assign(this.feedbackBuffers[t],this.feedbackBuffers[e]),this.feedbackMap){var r=this.feedbackMap[n];r!==this.targetTextureVarying&&(this.sourceBuffers[t][n]=this.feedbackBuffers[e][r],this.feedbackBuffers[t][r]=this.sourceBuffers[e][n],Object(x.a)(this.feedbackBuffers[t][r]instanceof k.a))}this.transformFeedbacks[t]&&this.transformFeedbacks[t].setBuffers(this.feedbackBuffers[t])}}},{key:"_setupSwapTextures",value:function _setupSwapTextures(){if(this._swapTexture&&this.targetTextureVarying){var e=this.currentIndex,t=(e+1)%2;Object.assign(this.sourceTextures[t],this.sourceTextures[e]),this.sourceTextures[t][this._swapTexture]=this.targetTextures[e],this._updateTargetTexture(this.sourceTextures[e][this._swapTexture],t)}}},{key:"_buildModel",value:function _buildModel(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._getShaders(e),n=t.vs,r=t.fs,i=t.modules,o=t.uniforms,a=t.inject,s=t.samplerTextureMap;this.model=new Mt(this.gl,Object.assign({},e,{vs:n,fs:r,vertexCount:e.elementCount,modules:i,uniforms:o,inject:a})),this.samplerTextureMap=s,this._setupTransformFeedback(),this._setupFramebuffers(),this._setElementCount(e.elementCount)}},{key:"_setupTransformFeedback",value:function _setupTransformFeedback(){Object(c.d)(this.feedbackBuffers[0])||(this.transformFeedbacks[0]=new Te(this.gl,{program:this.model.program,buffers:this.feedbackBuffers[0]}),this.feedbackMap&&(this.transformFeedbacks[1]=new Te(this.gl,{program:this.model.program,buffers:this.feedbackBuffers[1]})))}},{key:"_setupFramebuffers",value:function _setupFramebuffers(){if(this.renderingToTexture){var e=this.targetTextures[0],t=e.width,n=e.height;if(this.framebuffers[0]=new te(this.gl,{id:"".concat(this.id||"transform","-framebuffer-0"),width:t,height:n,attachments:Object(y.a)({},36064,this.targetTextures[0])}),this._swapTexture){var r=this.targetTextures[1];t=r.width,n=r.height,this.framebuffers[1]=new te(this.gl,{id:"".concat(this.id||"transform","-framebuffer-1"),width:t,height:n,attachments:Object(y.a)({},36064,this.targetTextures[1])})}}}},{key:"_updateElementIDBuffer",value:function _updateElementIDBuffer(e){if(this.hasSourceTextures||this.targetTextureVarying){var t=new Float32Array(e);t.forEach(function(e,t,n){n[t]=t}),this.elementIDBuffer?this.elementIDBuffer.setData({data:t}):this.elementIDBuffer=new k.a(this.gl,{data:t,size:1})}}},{key:"_getShaders",value:function _getShaders(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._processVertexShader(e.vs),n=t.vs,r=t.uniforms,i=t.targetTextureType,a=t.inject,s=t.samplerTextureMap,l=combineInjects([e.inject||{},a]);return this.targetTextureType=i,{vs:n,fs:getPassthroughFS({version:Object(o.l)(n),input:this.targetTextureVarying,inputType:i,output:"transform_output"}),modules:this.hasSourceTextures||this.targetTextureVarying?[wt].concat(e.modules||[]):e.modules,uniforms:r,inject:l,samplerTextureMap:s}}},{key:"_processVertexShader",value:function _processVertexShader(e){return updateForTextures({vs:e,sourceTextureMap:this.sourceTextures[this.currentIndex],targetTextureVarying:this.targetTextureVarying,targetTexture:this.targetTextures[this.currentIndex]})}}]),Transform}(),Wt=function(){function ShaderCache(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.gl,n=e._cachePrograms,r=void 0!==n&&n;Object(d.a)(this,ShaderCache),Object(x.a)(t),this.gl=t,this.vertexShaders={},this.fragmentShaders={},this.programs={},this._cachePrograms=r}return Object(v.a)(ShaderCache,[{key:"delete",value:function _delete(){return this}},{key:"getVertexShader",value:function getVertexShader(e,t){Object(x.a)("string"==typeof t),Object(x.a)(this._compareContexts(e,this.gl));var n=this.vertexShaders[t];return n||(n=new D(e,t),this.vertexShaders[t]=n),n}},{key:"getFragmentShader",value:function getFragmentShader(e,t){Object(x.a)("string"==typeof t),Object(x.a)(this._compareContexts(e,this.gl));var n=this.fragmentShaders[t];return n||(n=new F(e,t),this.fragmentShaders[t]=n),n}},{key:"getProgram",value:function getProgram(e,t){Object(x.a)(this._compareContexts(e,this.gl)),Object(x.a)("string"==typeof t.vs),Object(x.a)("string"==typeof t.fs),Object(x.a)("string"==typeof t.id);var n=this._getProgramKey(t),r=this.programs[n];return r?(this._resetProgram(r),r):(r=this._createNewProgram(e,t),this._cachePrograms&&this._checkProgramProp(r)&&(r._isCached=!0,this.programs[n]=r),r)}},{key:"_getProgramKey",value:function _getProgramKey(e){return"".concat(e.id,"-").concat(e.vs,"-").concat(e.fs)}},{key:"_checkProgramProp",value:function _checkProgramProp(e){return!e.varyings}},{key:"_createNewProgram",value:function _createNewProgram(e,t){var n=t.vs,r=t.fs,i=this.getVertexShader(e,n),o=this.getFragmentShader(e,r);return new Pe(this.gl,Object.assign({},t,{vs:i,fs:o}))}},{key:"_resetProgram",value:function _resetProgram(e,t){e.reset()}},{key:"_compareContexts",value:function _compareContexts(e,t){return(e.gl||e)===(t.gl||t)}}]),ShaderCache}(),qt=function(){function Pass(e,t){Object(d.a)(this,Pass);var n=t.id,r=void 0===n?"pass":n;this.id=r,this.gl=e,this.props={enabled:!0,screen:!1,swap:!1},Object.assign(this.props,t)}return Object(v.a)(Pass,[{key:"setProps",value:function setProps(e){Object.assign(this.props,e)}},{key:"render",value:function render(e,t){var n=this;if(this.props.enabled){var r=this.gl,i={gl:r,outputBuffer:e.writeBuffer,inputBuffer:e.readBuffer,animationProps:t,swapBuffers:function swapBuffers(){return e._swapFramebuffers()}};this.props.screen?(i.inputBuffer=i.outputBuffer,i.outputBuffer=te.getDefaultFramebuffer(r)):this.props.swap&&(i.inputBuffer=e.writeBuffer,i.outputBuffer=e.readBuffer),Object(E.c)(r,{framebuffer:i.outputBuffer},function(){return n._renderPass(i)}),this.props.debug&&i.outputBuffer.log(0,this.id),this.props.swap&&e._swapFramebuffers()}}},{key:"_renderPass",value:function _renderPass(e){e.gl,e.inputBuffer,e.outputBuffer,e.animationProps}}]),Pass}(),Ht=function(e){function CompositePass(e,t){return Object(d.a)(this,CompositePass),t=Array.isArray(t)?{passes:t}:t,Object(T.a)(this,Object(A.a)(CompositePass).call(this,e,Object.assign({id:"composite-pass"},t)))}return Object(O.a)(CompositePass,e),Object(v.a)(CompositePass,[{key:"render",value:function render(){var e=this.props.passes,t=void 0===e?[]:e,n=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;s.render.apply(s,arguments)}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}}}]),CompositePass}(qt),Xt=function(){function RenderState(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object(d.a)(this,RenderState),this.gl=e,this.framebuffer1=new te(e,{id:"multi-pass-1",stencil:!0}),this.framebuffer2=new te(e,{id:"multi-pass-2",stencil:!0}),this.reset()}return Object(v.a)(RenderState,[{key:"reset",value:function reset(){this.framebuffer1.resize(),this.framebuffer2.resize(),this.writeBuffer=this.framebuffer1,this.readBuffer=this.framebuffer2,this.maskActive=!1}},{key:"_swapFramebuffers",value:function _swapFramebuffers(){var e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}}]),RenderState}(),Kt=function(e){function MultiPassRenderer(e,t){var n;return Object(d.a)(this,MultiPassRenderer),t=Array.isArray(t)?{passes:t}:t,(n=Object(T.a)(this,Object(A.a)(MultiPassRenderer).call(this,e,Object.assign({id:"multi-pass"},t)))).renderState=new Xt(e,t),n}return Object(O.a)(MultiPassRenderer,e),Object(v.a)(MultiPassRenderer,[{key:"render",value:function render(e){this.renderState.reset();var t=this.props.passes,n=void 0===t?[]:t,r=!0,i=!1,o=void 0;try{for(var a,s=n[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){a.value.render(this.renderState,e)}}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return this}}]),MultiPassRenderer}(Ht),Zt=function(e){function ClearPass(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(d.a)(this,ClearPass),Object(T.a)(this,Object(A.a)(ClearPass).call(this,e,Object.assign({id:"clear-pass"},t)))}return Object(O.a)(ClearPass,e),Object(v.a)(ClearPass,[{key:"_renderPass",value:function _renderPass(e){var t=e.gl,n=this.props.clearBits,r=void 0===n?16640:n;t.clear(r)}}]),ClearPass}(qt),Yt={x:[2,0,1],y:[0,1,2],z:[1,2,0]},Jt=function(e){function TruncatedConeGeometry(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(d.a)(this,TruncatedConeGeometry);for(var t=e.bottomRadius,n=void 0===t?0:t,r=e.topRadius,i=void 0===r?0:r,o=e.height,a=void 0===o?1:o,s=e.nradial,l=void 0===s?10:s,u=e.nvertical,c=void 0===u?10:u,p=e.verticalAxis,h=void 0===p?"y":p,f=e.topCap,g=void 0!==f&&f,m=e.bottomCap,y=void 0!==m&&m,v=(g?2:0)+(y?2:0),_=(l+1)*(c+1+v),b=Math.atan2(n-i,a),x=Math.sin,w=Math.cos,S=Math.PI,E=w(b),P=x(b),C=g?-2:0,k=c+(y?2:0),O=l+1,I=new Float32Array(3*_),R=new Float32Array(3*_),L=new Float32Array(2*_),M=new Uint16Array(l*(c+v)*6),j=Yt[h],D=0,F=0,N=C;N<=k;N++){var B=N/c,z=a*B,U=void 0;N<0?(z=0,B=1,U=n):N>c?(z=a,B=1,U=i):U=n+N/c*(i-n),-2!==N&&N!==c+2||(U=0,B=0),z-=a/2;for(var V=0;V<O;V++){var G=x(V*S*2/l),W=w(V*S*2/l);I[D+j[0]]=G*U,I[D+j[1]]=z,I[D+j[2]]=W*U,R[D+j[0]]=N<0||N>c?0:G*E,R[D+j[1]]=N<0?-1:N>c?1:P,R[D+j[2]]=N<0||N>c?0:W*E,L[F+0]=V/l,L[F+1]=B,F+=2,D+=3}}for(var q=0;q<c+v;q++)for(var H=0;H<l;H++){var X=6*(q*l+H);M[X+0]=O*(q+0)+0+H,M[X+1]=O*(q+0)+1+H,M[X+2]=O*(q+1)+1+H,M[X+3]=O*(q+0)+0+H,M[X+4]=O*(q+1)+1+H,M[X+5]=O*(q+1)+0+H}return Object(T.a)(this,Object(A.a)(TruncatedConeGeometry).call(this,Object.assign({},e,{attributes:{positions:I,normals:R,texCoords:L,indices:M}})))}return Object(O.a)(TruncatedConeGeometry,e),TruncatedConeGeometry}(ze),Qt=function(e){function CubeGeometry(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(d.a)(this,CubeGeometry);var t=e.id,n=void 0===t?Object(c.i)("cube-geometry"):t;return Object(T.a)(this,Object(A.a)(CubeGeometry).call(this,Object.assign({},e,{id:n,attributes:{indices:new Uint16Array($t),positions:new Float32Array(en),normals:new Float32Array(tn),texCoords:new Float32Array(nn)}})))}return Object(O.a)(CubeGeometry,e),CubeGeometry}(ze),$t=new Uint16Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),en=new Float32Array([-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1]),tn=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0]),nn=new Float32Array([0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1]);var rn=function(e){function CylinderGeometry(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(d.a)(this,CylinderGeometry);var t=e.radius,n=void 0===t?1:t;return Object(T.a)(this,Object(A.a)(CylinderGeometry).call(this,Object.assign({},e,{bottomRadius:n,topRadius:n})))}return Object(O.a)(CylinderGeometry,e),CylinderGeometry}(Jt);var on="attribute vec2 aClipSpacePosition;\nattribute vec2 aTexCoord;\nattribute vec2 aCoordinate;\n\nvarying vec2 position;\nvarying vec2 coordinate;\nvarying vec2 uv;\n\nvoid main(void) {\n  gl_Position = vec4(aClipSpacePosition, 0., 1.);\n  position = aClipSpacePosition;\n  coordinate = aCoordinate;\n  uv = aTexCoord;\n}\n",an=[-1,-1,1,-1,-1,1,1,1],sn=function(e){function ClipSpace(e,t){var n;Object(d.a)(this,ClipSpace);var r=an.map(function(e){return-1===e?0:e});return(n=Object(T.a)(this,Object(A.a)(ClipSpace).call(this,e,Object.assign({},t,{vs:on,geometry:new ze({drawMode:5,vertexCount:4,attributes:{aClipSpacePosition:{size:2,value:new Float32Array(an)},aTexCoord:{size:2,value:new Float32Array(r)},aCoordinate:{size:2,value:new Float32Array(r)}}})})))).setVertexCount(4),n}return Object(O.a)(ClipSpace,e),ClipSpace}(Mt),ln="uniform sampler2D uDiffuseSampler;\nuniform float uOpacity;\n\nvarying vec2 uv;\n\nvoid main() {\n  vec4 texel = texture2D(uDiffuseSampler, uv);\n  gl_FragColor = uOpacity * texel;\n}\n",un=function(e){function CopyPass(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(d.a)(this,CopyPass),(t=Object(T.a)(this,Object(A.a)(CopyPass).call(this,e,Object.assign({id:"copy-pass",swap:!0},n)))).clipspace=new sn(e,{id:"copy-pass",fs:ln}),t}return Object(O.a)(CopyPass,e),Object(v.a)(CopyPass,[{key:"_renderPass",value:function _renderPass(e){var t=e.inputBuffer,n=this.props.opacity,r=void 0===n?1:n;this.clipspace.draw({uniforms:{uDiffuseSampler:t,uOpacity:r},parameters:{depthWrite:!1,depthTest:!1}})}}]),CopyPass}(qt),cn="uniform sampler2D uDiffuseSampler;\nuniform float uOpacity;\nvarying vec2 uv;\n\nvoid main() {\n  vec4 texel = texture2D(uDiffuseSampler, uv);\n  gl_FragColor = uOpacity * texel;\n}\n",pn=function(e){function TexturePass(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(d.a)(this,TexturePass),t=Object(T.a)(this,Object(A.a)(TexturePass).call(this,e,Object.assign({id:"texture-pass"},n)));var r=n.texture,i=n.opacity,o=void 0===i?1:i;return t.clipspace=new sn(e,{id:"texture-pass",fs:cn,uniforms:{uDiffuseSampler:r,uOpacity:o}}),t}return Object(O.a)(TexturePass,e),Object(v.a)(TexturePass,[{key:"_renderPass",value:function _renderPass(){this.clipspace.draw({parameters:{depthWrite:!1,depthTest:!1}})}}]),TexturePass}(qt);n(466);function browser_request_file_noop(){}var hn=4,fn=function(){function XHR(e){var t=e.url,n=e.path,r=void 0===n?null:n,i=e.method,o=void 0===i?"GET":i,a=e.asynchronous,s=void 0===a||a,l=e.noCache,u=void 0!==l&&l,c=e.sendAsBinary,p=void 0!==c&&c,h=e.responseType,f=void 0!==h&&h,g=e.onProgress,m=void 0===g?browser_request_file_noop:g,y=e.onError,v=void 0===y?browser_request_file_noop:y,_=e.onAbort,b=void 0===_?browser_request_file_noop:_,x=e.onComplete,w=void 0===x?browser_request_file_noop:x;Object(d.a)(this,XHR),this.url=r?r.join(r,t):t,this.method=o,this.async=s,this.noCache=u,this.sendAsBinary=p,this.responseType=f,this.req=new XMLHttpRequest,this.req.onload=function(e){return w(e)},this.req.onerror=function(e){return v(e)},this.req.onabort=function(e){return b(e)},this.req.onprogress=function(e){e.lengthComputable?m(e,Math.round(e.loaded/e.total*100)):m(e,-1)}}return Object(v.a)(XHR,[{key:"setRequestHeader",value:function setRequestHeader(e,t){return this.req.setRequestHeader(e,t),this}},{key:"sendAsync",value:function sendAsync(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.body||null;return new Promise(function(n,r){try{var i=e.req,o=e.method,a=e.noCache,s=e.sendAsBinary,l=e.responseType,u=a?e.url+(e.url.indexOf("?")>=0?"&":"?")+Date.now():e.url;i.open(o,u,e.async),l&&(i.responseType=l),e.async&&(i.onreadystatechange=function(e){i.readyState===hn&&(200===i.status?n(i.responseType?i.response:i.responseText):r(new Error("".concat(i.status,": ").concat(u))))}),s?i.sendAsBinary(t):i.send(t),e.async||(200===i.status?n(i.responseType?i.response:i.responseText):r(new Error("".concat(i.status,": ").concat(u))))}catch(e){r(e)}})}}]),XHR}();function requestFile(e){return new fn(e).sendAsync()}var dn="";function loadImage(e,t){return e=dn?dn+e:e,"undefined"==typeof Image?requestFile({url:e=new URL(e,location.pathname).href,responseType:"arraybuffer"}).then(function(e){var t=new Blob([new Uint8Array(e)]);return createImageBitmap(t)}):new Promise(function(n,r){try{var i=new Image;i.onload=function(){return n(i)},i.onerror=function(){return r(new Error("Could not load image ".concat(e,".")))},i.crossOrigin=t&&t.crossOrigin||"anonymous",i.src=e}catch(e){r(e)}})}function load_files_noop(){}function loadImages(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.urls,n=e.onProgress,r=void 0===n?load_files_noop:n;Object(x.a)(t.every(function(e){return"string"==typeof e}),"loadImages: {urls} must be array of strings");var i=0;return Promise.all(t.map(function(n){var o=loadImage(n,e);return o.then(function(e){return r({progress:++i/t.length,count:i,total:t.length,url:n})}),o}))}function loadTextures(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.urls,r=t.onProgress,i=void 0===r?load_files_noop:r;return Object(x.a)(n.every(function(e){return"string"==typeof e}),"loadTextures: {urls} must be array of strings"),loadImages(Object.assign({urls:n,onProgress:i},t)).then(function(r){return r.map(function(r,i){return new V.a(e,Object.assign({id:n[i]},t,{data:r}))})})}n(38),n(77),n(144),n(145);n.d(t,"w",function(){return r.d}),n.d(t,"r",function(){return createGLContext}),n.d(t,"D",function(){return f.a}),n.d(t,"C",function(){return E.b}),n.d(t,"E",function(){return E.c}),n.d(t,"e",function(){return C}),n.d(t,"u",function(){return hasFeature}),n.d(t,"v",function(){return hasFeatures}),n.d(t,"b",function(){return k.a}),n.d(t,"f",function(){return te}),n.d(t,"i",function(){return V.a}),n.d(t,"q",function(){return clear_clear}),n.d(t,"h",function(){return Mt}),n.d(t,"a",function(){return Ft}),n.d(t,"j",function(){return Gt}),n.d(t,"k",function(){return Ne}),n.d(t,"o",function(){return Wt}),n.d(t,"n",function(){return Kt}),n.d(t,"l",function(){return Zt}),n.d(t,"m",function(){return un}),n.d(t,"p",function(){return pn}),n.d(t,"g",function(){return ze}),n.d(t,"c",function(){return Qt}),n.d(t,"d",function(){return rn}),n.d(t,"x",function(){return loadImages}),n.d(t,"y",function(){return loadTextures}),n.d(t,"B",function(){return setDefaultShaderModules}),n.d(t,"A",function(){return registerShaderModules}),n.d(t,"s",function(){return ct}),n.d(t,"t",function(){return dt}),n.d(t,"z",function(){return _t}),n(159)},function(e,t,n){"use strict";var r=n(33),i=n(76);function requestAnimationFrame(e){return"undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame(e):setTimeout(e,1e3/60)}function cancelAnimationFrame(e){return"undefined"!=typeof window&&window.cancelAnimationFrame?window.cancelAnimationFrame(e):clearTimeout(e)}var o=35632,a=35633;function getShaderName(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unnamed",n=e.match(/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/);return n?n[1]:t}function getShaderTypeName(e){switch(e){case o:return"fragment";case a:return"vertex";default:return"unknown type"}}function parseGLSLCompilerError(e,t,n,r){for(var i=e.split(/\r?\n/),o={},a={},s=r||getShaderName(t)||"(unnamed)",l="".concat(getShaderTypeName(n)," shader ").concat(s),u=0;u<i.length;u++){var c=i[u];if(!(c.length<=1)){var p=c.split(":"),h=p[0],f=parseInt(p[2],10);if(isNaN(f))throw new Error("GLSL compilation error in ".concat(l,": ").concat(e));"WARNING"!==h?o[f]=c:a[f]=c}}var d=addLineNumbers(t);return{shaderName:l,errors:formatErrors(o,d),warnings:formatErrors(a,d)}}function formatErrors(e,t){for(var n="",r=0;r<t.length;r++){var i=t[r];if((e[r+3]||e[r+2]||e[r+1])&&(n+="".concat(i,"\n"),e[r+1])){var o=e[r+1],a=o.split(":",3),s=a[0],l=parseInt(a[1],10)||0,u=o.substring(a.join(":").length+1).trim();n+=padLeft("^^^ ".concat(s,": ").concat(u,"\n\n"),l)}}return n}function addLineNumbers(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:": ",r=e.split(/\r?\n/),i=String(r.length+t-1).length;return r.map(function(e,r){var o=r+t,a=String(o).length;return padLeft(o,i-a)+n+e})}function padLeft(e,t){for(var n="",r=0;r<t;++r)n+=" ";return"".concat(n).concat(e)}var s=n(39),l=n(34);function getShaderVersion(e){var t=100,n=e.match(/[^\s]+/g);if(n.length>=2&&"#version"===n[0]){var r=parseInt(n[1],10);Number.isFinite(r)&&(t=r)}return t}var u=n(143);n.d(t,"c",function(){return r.c}),n.d(t,"a",function(){return r.a}),n.d(t,"b",function(){return r.b}),n.d(t,"m",function(){return i.c}),n.d(t,"n",function(){return i.d}),n.d(t,"e",function(){return i.b}),n.d(t,"d",function(){return i.a}),n.d(t,"p",function(){return requestAnimationFrame}),n.d(t,"f",function(){return cancelAnimationFrame}),n.d(t,"o",function(){return parseGLSLCompilerError}),n.d(t,"k",function(){return getShaderName}),n.d(t,"h",function(){return s.a}),n.d(t,"q",function(){return s.d}),n.d(t,"j",function(){return l.b}),n.d(t,"i",function(){return l.a}),n.d(t,"l",function(){return getShaderVersion}),n.d(t,"g",function(){return u.a})},function(e,t,n){e.exports=n(472)},function(e,t,n){"use strict";function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.d(t,"a",function(){return _getPrototypeOf})},function(e,t,n){"use strict";n.d(t,"a",function(){return _possibleConstructorReturn});var r=n(27),i=n(18);function _possibleConstructorReturn(e,t){return!t||"object"!==Object(r.a)(t)&&"function"!=typeof t?Object(i.a)(e):t}},function(e,t,n){"use strict";n.d(t,"a",function(){return _inherits});var r=n(154);function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Object(r.a)(e,t)}},function(e,t,n){"use strict";n(25),n(23),n(81);var r=n(1),i=n.n(r),o=n(2),a=n.n(o),s=n(187),l=n.n(s),u=n(185),c=n.n(u),p=n(104),h=n(148),f=c()(function(e,t,n){var r=l()({},h,t.theme),i=l()({},e(r),t.styles&&t.styles[n]);return p.a.createStyleSheet(i,{meta:n,link:!0})});function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=function(e){return function(t){var n,o,s=t.name.replace(/Renderer$/,"");return o=n=function(n){var r,o;function _class(t,r){var i;return(i=n.call(this,t,r)||this).sheet=f(e,r.config||{},s),i.sheet.update(t).attach(),i}o=n,(r=_class).prototype=Object.create(o.prototype),r.prototype.constructor=r,r.__proto__=o;var a=_class.prototype;return a.componentDidUpdate=function componentDidUpdate(e){this.sheet.update(e)},a.render=function render(){return i.a.createElement(t,_extends({},this.props,{classes:this.sheet.classes}))},_class}(r.Component),_defineProperty(n,"displayName","Styled("+s+")"),_defineProperty(n,"contextTypes",{config:a.a.object}),o}};n.d(t,"a",function(){return d})},function(e,t,n){"use strict";n.d(t,"p",function(){return transpose}),n.d(t,"e",function(){return invert}),n.d(t,"a",function(){return determinant}),n.d(t,"g",function(){return multiply}),n.d(t,"o",function(){return translate}),n.d(t,"n",function(){return scale}),n.d(t,"j",function(){return rotate}),n.d(t,"k",function(){return rotateX}),n.d(t,"l",function(){return rotateY}),n.d(t,"m",function(){return rotateZ}),n.d(t,"c",function(){return fromQuat}),n.d(t,"d",function(){return frustum}),n.d(t,"i",function(){return perspective}),n.d(t,"h",function(){return ortho}),n.d(t,"f",function(){return lookAt}),n.d(t,"b",function(){return equals});var r=n(16);function identity(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function transpose(e,t){if(e===t){var n=t[1],r=t[2],i=t[3],o=t[6],a=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=o,e[11]=t[14],e[12]=i,e[13]=a,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function invert(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8],p=t[9],h=t[10],f=t[11],d=t[12],g=t[13],m=t[14],y=t[15],v=n*s-r*a,_=n*l-i*a,b=n*u-o*a,x=r*l-i*s,w=r*u-o*s,S=i*u-o*l,E=c*g-p*d,P=c*m-h*d,C=c*y-f*d,k=p*m-h*g,T=p*y-f*g,A=h*y-f*m,O=v*A-_*T+b*k+x*C-w*P+S*E;return O?(O=1/O,e[0]=(s*A-l*T+u*k)*O,e[1]=(i*T-r*A-o*k)*O,e[2]=(g*S-m*w+y*x)*O,e[3]=(h*w-p*S-f*x)*O,e[4]=(l*C-a*A-u*P)*O,e[5]=(n*A-i*C+o*P)*O,e[6]=(m*b-d*S-y*_)*O,e[7]=(c*S-h*b+f*_)*O,e[8]=(a*T-s*C+u*E)*O,e[9]=(r*C-n*T-o*E)*O,e[10]=(d*w-g*b+y*v)*O,e[11]=(p*b-c*w-f*v)*O,e[12]=(s*P-a*k-l*E)*O,e[13]=(n*k-r*P+i*E)*O,e[14]=(g*_-d*x-m*v)*O,e[15]=(c*x-p*_+h*v)*O,e):null}function determinant(e){var t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],u=e[8],c=e[9],p=e[10],h=e[11],f=e[12],d=e[13],g=e[14],m=e[15];return(t*a-n*o)*(p*m-h*g)-(t*s-r*o)*(c*m-h*d)+(t*l-i*o)*(c*g-p*d)+(n*s-r*a)*(u*m-h*f)-(n*l-i*a)*(u*g-p*f)+(r*l-i*s)*(u*d-c*f)}function multiply(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],p=t[8],h=t[9],f=t[10],d=t[11],g=t[12],m=t[13],y=t[14],v=t[15],_=n[0],b=n[1],x=n[2],w=n[3];return e[0]=_*r+b*s+x*p+w*g,e[1]=_*i+b*l+x*h+w*m,e[2]=_*o+b*u+x*f+w*y,e[3]=_*a+b*c+x*d+w*v,_=n[4],b=n[5],x=n[6],w=n[7],e[4]=_*r+b*s+x*p+w*g,e[5]=_*i+b*l+x*h+w*m,e[6]=_*o+b*u+x*f+w*y,e[7]=_*a+b*c+x*d+w*v,_=n[8],b=n[9],x=n[10],w=n[11],e[8]=_*r+b*s+x*p+w*g,e[9]=_*i+b*l+x*h+w*m,e[10]=_*o+b*u+x*f+w*y,e[11]=_*a+b*c+x*d+w*v,_=n[12],b=n[13],x=n[14],w=n[15],e[12]=_*r+b*s+x*p+w*g,e[13]=_*i+b*l+x*h+w*m,e[14]=_*o+b*u+x*f+w*y,e[15]=_*a+b*c+x*d+w*v,e}function translate(e,t,n){var r,i,o,a,s,l,u,c,p,h,f,d,g=n[0],m=n[1],y=n[2];return t===e?(e[12]=t[0]*g+t[4]*m+t[8]*y+t[12],e[13]=t[1]*g+t[5]*m+t[9]*y+t[13],e[14]=t[2]*g+t[6]*m+t[10]*y+t[14],e[15]=t[3]*g+t[7]*m+t[11]*y+t[15]):(r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],p=t[8],h=t[9],f=t[10],d=t[11],e[0]=r,e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=l,e[6]=u,e[7]=c,e[8]=p,e[9]=h,e[10]=f,e[11]=d,e[12]=r*g+s*m+p*y+t[12],e[13]=i*g+l*m+h*y+t[13],e[14]=o*g+u*m+f*y+t[14],e[15]=a*g+c*m+d*y+t[15]),e}function scale(e,t,n){var r=n[0],i=n[1],o=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function rotate(e,t,n,i){var o,a,s,l,u,c,p,h,f,d,g,m,y,v,_,b,x,w,S,E,P,C,k,T,A=i[0],O=i[1],I=i[2],R=Math.sqrt(A*A+O*O+I*I);return R<r.b?null:(A*=R=1/R,O*=R,I*=R,o=Math.sin(n),s=1-(a=Math.cos(n)),l=t[0],u=t[1],c=t[2],p=t[3],h=t[4],f=t[5],d=t[6],g=t[7],m=t[8],y=t[9],v=t[10],_=t[11],b=A*A*s+a,x=O*A*s+I*o,w=I*A*s-O*o,S=A*O*s-I*o,E=O*O*s+a,P=I*O*s+A*o,C=A*I*s+O*o,k=O*I*s-A*o,T=I*I*s+a,e[0]=l*b+h*x+m*w,e[1]=u*b+f*x+y*w,e[2]=c*b+d*x+v*w,e[3]=p*b+g*x+_*w,e[4]=l*S+h*E+m*P,e[5]=u*S+f*E+y*P,e[6]=c*S+d*E+v*P,e[7]=p*S+g*E+_*P,e[8]=l*C+h*k+m*T,e[9]=u*C+f*k+y*T,e[10]=c*C+d*k+v*T,e[11]=p*C+g*k+_*T,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function rotateX(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[4],a=t[5],s=t[6],l=t[7],u=t[8],c=t[9],p=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*i+u*r,e[5]=a*i+c*r,e[6]=s*i+p*r,e[7]=l*i+h*r,e[8]=u*i-o*r,e[9]=c*i-a*r,e[10]=p*i-s*r,e[11]=h*i-l*r,e}function rotateY(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[0],a=t[1],s=t[2],l=t[3],u=t[8],c=t[9],p=t[10],h=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i-u*r,e[1]=a*i-c*r,e[2]=s*i-p*r,e[3]=l*i-h*r,e[8]=o*r+u*i,e[9]=a*r+c*i,e[10]=s*r+p*i,e[11]=l*r+h*i,e}function rotateZ(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[0],a=t[1],s=t[2],l=t[3],u=t[4],c=t[5],p=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i+u*r,e[1]=a*i+c*r,e[2]=s*i+p*r,e[3]=l*i+h*r,e[4]=u*i-o*r,e[5]=c*i-a*r,e[6]=p*i-s*r,e[7]=h*i-l*r,e}function fromQuat(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n+n,s=r+r,l=i+i,u=n*a,c=r*a,p=r*s,h=i*a,f=i*s,d=i*l,g=o*a,m=o*s,y=o*l;return e[0]=1-p-d,e[1]=c+y,e[2]=h-m,e[3]=0,e[4]=c-y,e[5]=1-u-d,e[6]=f+g,e[7]=0,e[8]=h+m,e[9]=f-g,e[10]=1-u-p,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function frustum(e,t,n,r,i,o,a){var s=1/(n-t),l=1/(i-r),u=1/(o-a);return e[0]=2*o*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*o*l,e[6]=0,e[7]=0,e[8]=(n+t)*s,e[9]=(i+r)*l,e[10]=(a+o)*u,e[11]=-1,e[12]=0,e[13]=0,e[14]=a*o*2*u,e[15]=0,e}function perspective(e,t,n,r,i){var o,a=1/Math.tan(t/2);return e[0]=a/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=i&&i!==1/0?(o=1/(r-i),e[10]=(i+r)*o,e[14]=2*i*r*o):(e[10]=-1,e[14]=-2*r),e}function ortho(e,t,n,r,i,o,a){var s=1/(t-n),l=1/(r-i),u=1/(o-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+n)*s,e[13]=(i+r)*l,e[14]=(a+o)*u,e[15]=1,e}function lookAt(e,t,n,i){var o,a,s,l,u,c,p,h,f,d,g=t[0],m=t[1],y=t[2],v=i[0],_=i[1],b=i[2],x=n[0],w=n[1],S=n[2];return Math.abs(g-x)<r.b&&Math.abs(m-w)<r.b&&Math.abs(y-S)<r.b?identity(e):(p=g-x,h=m-w,f=y-S,o=_*(f*=d=1/Math.sqrt(p*p+h*h+f*f))-b*(h*=d),a=b*(p*=d)-v*f,s=v*h-_*p,(d=Math.sqrt(o*o+a*a+s*s))?(o*=d=1/d,a*=d,s*=d):(o=0,a=0,s=0),l=h*s-f*a,u=f*o-p*s,c=p*a-h*o,(d=Math.sqrt(l*l+u*u+c*c))?(l*=d=1/d,u*=d,c*=d):(l=0,u=0,c=0),e[0]=o,e[1]=l,e[2]=p,e[3]=0,e[4]=a,e[5]=u,e[6]=h,e[7]=0,e[8]=s,e[9]=c,e[10]=f,e[11]=0,e[12]=-(o*g+a*m+s*y),e[13]=-(l*g+u*m+c*y),e[14]=-(p*g+h*m+f*y),e[15]=1,e)}function equals(e,t){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],p=e[8],h=e[9],f=e[10],d=e[11],g=e[12],m=e[13],y=e[14],v=e[15],_=t[0],b=t[1],x=t[2],w=t[3],S=t[4],E=t[5],P=t[6],C=t[7],k=t[8],T=t[9],A=t[10],O=t[11],I=t[12],R=t[13],L=t[14],M=t[15];return Math.abs(n-_)<=r.b*Math.max(1,Math.abs(n),Math.abs(_))&&Math.abs(i-b)<=r.b*Math.max(1,Math.abs(i),Math.abs(b))&&Math.abs(o-x)<=r.b*Math.max(1,Math.abs(o),Math.abs(x))&&Math.abs(a-w)<=r.b*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(s-S)<=r.b*Math.max(1,Math.abs(s),Math.abs(S))&&Math.abs(l-E)<=r.b*Math.max(1,Math.abs(l),Math.abs(E))&&Math.abs(u-P)<=r.b*Math.max(1,Math.abs(u),Math.abs(P))&&Math.abs(c-C)<=r.b*Math.max(1,Math.abs(c),Math.abs(C))&&Math.abs(p-k)<=r.b*Math.max(1,Math.abs(p),Math.abs(k))&&Math.abs(h-T)<=r.b*Math.max(1,Math.abs(h),Math.abs(T))&&Math.abs(f-A)<=r.b*Math.max(1,Math.abs(f),Math.abs(A))&&Math.abs(d-O)<=r.b*Math.max(1,Math.abs(d),Math.abs(O))&&Math.abs(g-I)<=r.b*Math.max(1,Math.abs(g),Math.abs(I))&&Math.abs(m-R)<=r.b*Math.max(1,Math.abs(m),Math.abs(R))&&Math.abs(y-L)<=r.b*Math.max(1,Math.abs(y),Math.abs(L))&&Math.abs(v-M)<=r.b*Math.max(1,Math.abs(v),Math.abs(M))}},function(e,t,n){"use strict";var r=n(85),i=new(n(493).a)({id:"deck"}).enable();if(r.a.deck&&"6.4.5"!==r.a.deck.VERSION)throw new Error("deck.gl - multiple versions detected: ".concat(r.a.deck.VERSION," vs ").concat("6.4.5"));r.a.deck||(i.log(0,"deck.gl ".concat("6.4.5"," - ").concat("set deck.log.priority=1 (or higher) to trace attribute updates"))(),r.a.deck=r.a.deck||{VERSION:"6.4.5",version:"6.4.5",log:i}),console.table||(console.table=function(){});var o=n(7),a={LNG_LAT:1,LNGLAT_AUTO_OFFSET:4,METER_OFFSETS:2,LNGLAT_OFFSETS:3,IDENTITY:0},s=Object.keys(a).map(function(e){return"const float COORDINATE_SYSTEM_".concat(e," = ").concat(a[e],".;")}).join(""),l="".concat(s,'\n\nuniform float project_uCoordinateSystem;\nuniform float project_uScale;\nuniform bool project_uWrapLongitude;\nuniform float project_uAntimeridian;\nuniform vec3 project_uPixelsPerMeter;\nuniform vec3 project_uPixelsPerDegree;\nuniform vec3 project_uPixelsPerUnit;\nuniform vec3 project_uPixelsPerUnit2;\nuniform vec4 project_uCenter;\nuniform mat4 project_uModelMatrix;\nuniform mat4 project_uViewProjectionMatrix;\nuniform vec2 project_uViewportSize;\nuniform float project_uDevicePixelRatio;\nuniform float project_uFocalDistance;\nuniform vec3 project_uCameraPosition;\nuniform vec2 project_coordinate_origin;\n\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\nconst vec2 ZERO_64_XY_LOW = vec2(0.0, 0.0);\n\n//\n// Scaling offsets - scales meters to "pixels"\n// Note the scalar version of project_scale is for scaling the z component only\n//\nfloat project_scale(float meters) {\n  return meters * project_uPixelsPerMeter.z;\n}\n\nvec2 project_scale(vec2 meters) {\n  return meters * project_uPixelsPerMeter.xy;\n}\n\nvec3 project_scale(vec3 meters) {\n  return meters * project_uPixelsPerMeter;\n}\n\nvec4 project_scale(vec4 meters) {\n  return vec4(meters.xyz * project_uPixelsPerMeter, meters.w);\n}\n\n//\n// Projecting normal - transform deltas from current coordinate system to\n// normals in the worldspace\n//\nvec3 project_normal(vec3 vector) {\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNG_LAT ||\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {\n    return normalize(vector * project_uPixelsPerDegree);\n  }\n  // Apply model matrix\n  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);\n  return normalize(normal_modelspace.xyz * project_uPixelsPerMeter);\n}\n\nvec4 project_offset_(vec4 offset) {\n  float dy = offset.y;\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_AUTO_OFFSET) {\n    dy = clamp(dy, -1., 1.);\n  }\n  vec3 pixelsPerUnit = project_uPixelsPerUnit + project_uPixelsPerUnit2 * dy;\n  return vec4(offset.xyz * pixelsPerUnit, offset.w);\n}\n\n//\n// Projecting positions - non-linear projection: lnglats => unit tile [0-1, 0-1]\n//\nvec2 project_mercator_(vec2 lnglat) {\n  float x = lnglat.x;\n  if (project_uWrapLongitude) {\n    x = mod(x - project_uAntimeridian, 360.0) + project_uAntimeridian;\n  }\n  return vec2(\n    radians(x) + PI,\n    PI - log(tan_fp32(PI * 0.25 + radians(lnglat.y) * 0.5))\n  );\n}\n\n//\n// Projects lnglats (or meter offsets, depending on mode) to pixels\n//\nvec4 project_position(vec4 position, vec2 position64xyLow) {\n  // TODO - why not simply subtract center and fall through?\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNG_LAT) {\n    return project_uModelMatrix * vec4(\n      project_mercator_(position.xy) * WORLD_SCALE * project_uScale,\n      project_scale(position.z),\n      position.w\n    );\n  }\n\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_AUTO_OFFSET) {\n    // Subtract high part of 64 bit value. Convert remainder to float32, preserving precision.\n    float X = position.x - project_coordinate_origin.x;\n    float Y = position.y - project_coordinate_origin.y;\n    return project_offset_(vec4(X + position64xyLow.x, Y + position64xyLow.y, position.z, position.w));\n  }\n\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {\n    return project_offset_(position);\n  }\n\n  // METER_OFFSETS or IDENTITY\n  // Apply model matrix\n  vec4 position_modelspace = project_uModelMatrix * position;\n  return project_offset_(position_modelspace);\n}\n\nvec4 project_position(vec4 position) {\n  return project_position(position, ZERO_64_XY_LOW);\n}\n\nvec3 project_position(vec3 position, vec2 position64xyLow) {\n  vec4 projected_position = project_position(vec4(position, 1.0), position64xyLow);\n  return projected_position.xyz;\n}\n\nvec3 project_position(vec3 position) {\n  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_XY_LOW);\n  return projected_position.xyz;\n}\n\nvec2 project_position(vec2 position) {\n  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_XY_LOW);\n  return projected_position.xy;\n}\n\n//\n// Projects from "world" coordinates to clip space.\n// Uses project_uViewProjectionMatrix\n//\nvec4 project_to_clipspace(vec4 position) {\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_METER_OFFSETS ||\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {\n    // Needs to be divided with project_uPixelsPerMeter\n    position.w *= project_uPixelsPerMeter.z;\n  }\n  return project_uViewProjectionMatrix * position + project_uCenter;\n}\n\n// Returns a clip space offset that corresponds to a given number of **non-device** pixels\nvec4 project_pixel_to_clipspace(vec2 pixels) {\n  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;\n  return vec4(offset * project_uFocalDistance, 0.0, 0.0);\n}\n'),u=n(14),c=n(42),p={LNGLAT:1,LNGLAT_EXPERIMENTAL:1,LNGLAT_DEPRECATED:5,METER_OFFSETS:2,METERS:2,LNGLAT_OFFSETS:3,IDENTITY:0},h={panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}};function isEqual(e,t){if(e===t)return!0;if(Array.isArray(e)){var n=e.length;if(!t||t.length!==n)return!1;for(var r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}return!1}function memoize(e){var t,n={};return function(r){for(var i in r)if(!isEqual(r[i],n[i])){t=e(r),n=r;break}return t}}function assert(e,t){if(!e)throw new Error(t||"deck.gl: assertion failed.")}var f=[0,0,0,0],d=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],g=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],m=[0,0,0],y=[0,0,0],v=12,_=memoize(function calculateViewportUniforms(e){var t=e.viewport,n=e.devicePixelRatio,r=e.coordinateSystem,i=e.coordinateOrigin,o=e.wrapLongitude,s=t.zoom,l=calculateMatrixAndOffset({coordinateSystem:r,coordinateOrigin:i,coordinateZoom:s,viewport:t}),u=l.projectionCenter,c=l.viewProjectionMatrix,p=l.cameraPos,h=l.shaderCoordinateSystem,f=l.shaderCoordinateOrigin;assert(c,"Viewport missing modelViewProjectionMatrix");var d=t.getDistanceScales(),g=[t.width*n,t.height*n],y={project_uCoordinateSystem:h,project_uCenter:u,project_uWrapLongitude:o,project_uAntimeridian:(t.longitude||0)-180,project_uViewportSize:g,project_uDevicePixelRatio:n,project_uFocalDistance:t.focalDistance||1,project_uPixelsPerMeter:d.pixelsPerMeter,project_uPixelsPerDegree:d.pixelsPerDegree,project_uPixelsPerUnit:d.pixelsPerMeter,project_uPixelsPerUnit2:m,project_uScale:t.scale,project_uViewProjectionMatrix:c,project_uCameraPosition:p},v=t.getDistanceScales(f);switch(h){case a.METER_OFFSETS:y.project_uPixelsPerUnit=v.pixelsPerMeter,y.project_uPixelsPerUnit2=v.pixelsPerMeter2;break;case a.LNGLAT_AUTO_OFFSET:y.project_coordinate_origin=f;case a.LNGLAT_OFFSETS:y.project_uPixelsPerUnit=v.pixelsPerDegree,y.project_uPixelsPerUnit2=v.pixelsPerDegree2}return y});function getShaderCoordinateSystem(e){switch(e){case p.LNGLAT:case p.LNGLAT_EXPERIMENTAL:default:return a.LNGLAT_AUTO_OFFSET;case p.LNGLAT_DEPRECATED:return a.LNG_LAT;case p.METER_OFFSETS:case p.METERS:return a.METER_OFFSETS;case p.LNGLAT_OFFSETS:return a.LNGLAT_OFFSETS;case p.IDENTITY:return a.IDENTITY}}function calculateMatrixAndOffset(e){var t,n=e.viewport,r=e.coordinateSystem,i=e.coordinateOrigin,o=e.coordinateZoom,s=n.viewMatrixUncentered,l=n.viewMatrix,p=n.projectionMatrix,h=n.viewProjectionMatrix,g=getShaderCoordinateSystem(r),m=i;g===a.LNGLAT_AUTO_OFFSET&&(o<v?g=a.LNG_LAT:m=[Math.fround(n.longitude),Math.fround(n.latitude)]);switch(g){case a.IDENTITY:case a.LNG_LAT:t=f;break;case a.LNGLAT_OFFSETS:case a.METER_OFFSETS:case a.LNGLAT_AUTO_OFFSET:var y=n.projectFlat(m,Math.pow(2,o));t=c.c([],[y[0],y[1],0,1],h),l=s||l,h=u.g([],p,l),h=u.g([],h,d);break;default:throw new Error("Unknown projection mode")}return{viewMatrix:l,viewProjectionMatrix:h,projectionCenter:t,cameraPos:n.cameraPosition,shaderCoordinateSystem:g,shaderCoordinateOrigin:m}}function getUniformsFromViewport(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.viewport,n=e.devicePixelRatio,r=void 0===n?1:n,o=e.modelMatrix,a=void 0===o?null:o,s=e.coordinateSystem,l=void 0===s?p.LNGLAT:s,u=e.coordinateOrigin,c=void 0===u?y:u,h=e.wrapLongitude,f=void 0!==h&&h,d=e.projectionMode,m=e.positionOrigin;return assert(t),void 0!==d&&i.removed("projectionMode","coordinateSystem")(),void 0!==m&&i.removed("positionOrigin","coordinateOrigin")(),Object.assign({project_uModelMatrix:a||g},_({viewport:t,devicePixelRatio:r,coordinateSystem:l,coordinateOrigin:c,wrapLongitude:f}))}var b={};var x={name:"project",dependencies:[o.s],vs:l,getUniforms:function getUniforms(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b;return e.viewport?getUniformsFromViewport(e):{}},deprecations:[{type:"uniform vec3",old:"selectedPickingColor",new:"luma.gl's picking module"},{type:"uniform float",old:"renderPickingBuffer",new:"luma.gl's picking module"},{type:"uniform float",old:"pickingEnabled",new:"luma.gl's picking module"},{type:"uniform float",old:"projectionMode",new:"project_uCoordinateSystem"},{type:"uniform vec4",old:"projectionCenter",new:"project_uCenter"},{type:"uniform vec2",old:"projectionOrigin"},{type:"uniform mat4",old:"modelMatrix",new:"project_uModelMatrix"},{type:"uniform mat4",old:"viewMatrix"},{type:"uniform mat4",old:"projectionMatrix",new:"project_uViewProjectionMatrix"},{type:"uniform vec3",old:"projectionPixelsPerUnit",new:"project_uPixelsPerUnit"},{type:"uniform float",old:"projectionScale",new:"project_uScale"},{type:"uniform vec2",old:"viewportSize",new:"project_uViewportSize"},{type:"uniform float",old:"devicePixelRatio",new:"project_uDevicePixelRatio"},{type:"uniform vec3",old:"cameraPos",new:"project_uCameraPosition"},{type:"function",old:"scale",new:"project_scale"},{type:"function",old:"preproject",new:"project_position"},{type:"function",old:"project",new:"project_to_clipspace"}]},w={name:"project32",dependencies:[x],vs:"\nvec4 project_position_to_clipspace(\n  vec3 position, vec2 position64xyLow, vec3 offset, out vec4 worldPosition\n) {\n  vec3 projectedPosition = project_position(position, position64xyLow);\n  worldPosition = vec4(projectedPosition + offset, 1.0);\n  return project_to_clipspace(worldPosition);\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec2 position64xyLow, vec3 offset\n) {\n  vec4 worldPosition;\n  return project_position_to_clipspace(position, position64xyLow, offset, worldPosition);\n}\n"},S=o.t.fp64ify,E=o.t.fp64ifyMatrix4,P={name:"project64",dependencies:[x,o.t],vs:"\nconst vec2 WORLD_SCALE_FP64 = vec2(81.4873275756836, 0.0000032873668232014097);\n\nuniform vec2 project64_uScale;\nuniform vec2 project_uViewProjectionMatrixFP64[16];\n\n// longitude: lnglat_fp64.xy; latitude: lnglat_fp64.zw\nvoid mercatorProject_fp64(vec4 lnglat_fp64, out vec2 out_val[2]) {\n\n#if defined(NVIDIA_FP64_WORKAROUND)\n  out_val[0] = sum_fp64(radians_fp64(lnglat_fp64.xy), PI_FP64 * ONE);\n#else\n  out_val[0] = sum_fp64(radians_fp64(lnglat_fp64.xy), PI_FP64);\n#endif\n  out_val[1] = sub_fp64(PI_FP64,\n    log_fp64(tan_fp64(sum_fp64(PI_4_FP64, radians_fp64(lnglat_fp64.zw) / 2.0))));\n  return;\n}\n\nvoid project_position_fp64(vec4 position_fp64, out vec2 out_val[2]) {\n  vec2 pos_fp64[2];\n  mercatorProject_fp64(position_fp64, pos_fp64);\n  vec2 x_fp64 = mul_fp64(pos_fp64[0], project64_uScale);\n  vec2 y_fp64 = mul_fp64(pos_fp64[1], project64_uScale);\n  out_val[0] = mul_fp64(x_fp64, WORLD_SCALE_FP64);\n  out_val[1] = mul_fp64(y_fp64, WORLD_SCALE_FP64);\n\n  return;\n}\n\nvoid project_position_fp64(vec2 position, vec2 position64xyLow, out vec2 out_val[2]) {\n  vec4 position64xy = vec4(\n    position.x, position64xyLow.x,\n    position.y, position64xyLow.y);\n\n  project_position_fp64(position64xy, out_val);\n}\n\nvec4 project_to_clipspace_fp64(vec2 vertex_pos_modelspace[4]) {\n  vec2 vertex_pos_clipspace[4];\n  mat4_vec4_mul_fp64(project_uViewProjectionMatrixFP64, vertex_pos_modelspace,\n    vertex_pos_clipspace);\n  return vec4(\n    vertex_pos_clipspace[0].x,\n    vertex_pos_clipspace[1].x,\n    vertex_pos_clipspace[2].x,\n    vertex_pos_clipspace[3].x\n    );\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec2 position64xyLow, vec3 offset, out vec4 worldPosition\n) {\n  // This is the local offset to the instance position\n  vec2 offset64[4];\n  vec4_fp64(vec4(offset, 0.0), offset64);\n\n  float z = project_scale(position.z);\n\n  // Apply web mercator projection (depends on coordinate system imn use)\n  vec2 projectedPosition64xy[2];\n  project_position_fp64(position.xy, position64xyLow, projectedPosition64xy);\n\n  vec2 worldPosition64[4];\n  worldPosition64[0] = sum_fp64(offset64[0], projectedPosition64xy[0]);\n  worldPosition64[1] = sum_fp64(offset64[1], projectedPosition64xy[1]);\n  worldPosition64[2] = sum_fp64(offset64[2], vec2(z, 0.0));\n  worldPosition64[3] = vec2(1.0, 0.0);\n\n  worldPosition = vec4(projectedPosition64xy[0].x, projectedPosition64xy[1].x, z, 1.0);\n\n  return project_to_clipspace_fp64(worldPosition64);\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec2 position64xyLow, vec3 offset\n) {\n  vec4 worldPosition;\n  return project_position_to_clipspace(\n    position, position64xyLow, offset, worldPosition\n  );\n}\n",getUniforms:function project64_getUniforms(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=e.project_uViewProjectionMatrix,n=e.project_uScale;if(t&&n)return C({project_uViewProjectionMatrix:t,project_uScale:n});return{}},deprecations:[{type:"uniform vec2",old:"projectionFP64[16]",new:"project_uViewProjectionMatrixFP64"},{type:"uniform vec2",old:"projectionScaleFP64",new:"project64_uScale"}]},C=memoize(function calculateUniforms(e){var t=e.project_uViewProjectionMatrix,n=e.project_uScale,r=E(t),i=S(n);return{project_uViewProjectionMatrixFP64:r,project64_uViewProjectionMatrix:r,project64_uScale:i}});var k=n(47),T=n(17);function transformVector(e,t){var n=c.c([],t,e);return c.b(n,n,1/n[3]),n}function mod(e,t){var n=e%t;return n<0?t+n:n}var A=n(35);function assert_assert(e,t){if(!e)throw new Error(t||"viewport-mercator-project: assertion failed.")}var O=Math.PI,I=O/4,R=O/180,L=180/O,M=512,j=4003e4,D=1.5;function zoomToScale(e){return Math.pow(2,e)}function scaleToZoom(e){return Math.log2(e)}function lngLatToWorld(e,t){var n=Object(T.a)(e,2),r=n[0],i=n[1];assert_assert(Number.isFinite(r)&&Number.isFinite(t)),assert_assert(Number.isFinite(i)&&i>=-90&&i<=90,"invalid latitude");var o=i*R;return[(t*=M)*(r*R+O)/(2*O),t*(O-Math.log(Math.tan(I+.5*o)))/(2*O)]}function worldToLngLat(e,t){var n=Object(T.a)(e,2),r=n[0],i=n[1],o=r/(t*=M)*(2*O)-O,a=2*(Math.atan(Math.exp(O-i/t*(2*O)))-I);return[o*L,a*L]}function getMeterZoom(e){var t=e.latitude;assert_assert(Number.isFinite(t));var n=Math.cos(t*R);return scaleToZoom(j*n)-9}function web_mercator_utils_getDistanceScales(e){var t=e.latitude,n=e.longitude,r=e.zoom,i=e.scale,o=e.highPrecision,a=void 0!==o&&o;i=void 0!==i?i:zoomToScale(r),assert_assert(Number.isFinite(t)&&Number.isFinite(n)&&Number.isFinite(i));var s={},l=M*i,u=Math.cos(t*R),c=l/360,p=c/u,h=l/j/u;if(s.pixelsPerMeter=[h,-h,h],s.metersPerPixel=[1/h,-1/h,1/h],s.pixelsPerDegree=[c,-p,h],s.degreesPerPixel=[1/c,-1/p,1/h],a){var f=R*Math.tan(t*R)/u,d=c*f/2,g=l/j*f,m=g/p*h;s.pixelsPerDegree2=[0,-d,g],s.pixelsPerMeter2=[m,0,m]}return s}function web_mercator_utils_addMetersToLngLat(e,t){var n=Object(T.a)(e,3),r=n[0],i=n[1],o=n[2],a=Object(T.a)(t,3),s=a[0],l=a[1],u=a[2],c=web_mercator_utils_getDistanceScales({longitude:r,latitude:i,scale:1,highPrecision:!0}),p=c.pixelsPerMeter,h=c.pixelsPerMeter2,f=lngLatToWorld(e,1);f[0]+=s*(p[0]+h[0]*l),f[1]+=l*(p[1]+h[1]*l);var d=worldToLngLat(f,1),g=(o||0)+(u||0);return Number.isFinite(o)||Number.isFinite(u)?[d[0],d[1],g]:d}function getViewMatrix(e){var t=e.height,n=e.pitch,r=e.bearing,i=e.altitude,o=e.center,a=void 0===o?null:o,s=e.flipY,l=void 0!==s&&s,c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return u.o(c,c,[0,0,-i]),u.n(c,c,[1,1,1/t]),u.k(c,c,-n*R),u.m(c,c,r*R),l&&u.n(c,c,[1,-1,1]),a&&u.o(c,c,k.d([],a)),c}function getProjectionParameters(e){var t=e.width,n=e.height,r=e.altitude,i=void 0===r?D:r,o=e.pitch,a=void 0===o?0:o,s=e.nearZMultiplier,l=void 0===s?1:s,u=e.farZMultiplier,c=void 0===u?1:u,p=a*R,h=Math.atan(.5/i),f=Math.sin(h)*i/Math.sin(Math.PI/2-p-h),d=Math.cos(Math.PI/2-p)*f+i;return{fov:2*Math.atan(n/2/i),aspect:t/n,focalDistance:i,near:l,far:d*c}}function getProjectionMatrix(e){var t=e.width,n=e.height,r=e.pitch,i=getProjectionParameters({width:t,height:n,altitude:e.altitude,pitch:r,nearZMultiplier:e.nearZMultiplier,farZMultiplier:e.farZMultiplier}),o=i.fov,a=i.aspect,s=i.near,l=i.far;return u.i([],o,a,s,l)}function worldToPixels(e,t){var n=Object(T.a)(e,3),r=n[0],i=n[1],o=n[2],a=void 0===o?0:o;return assert_assert(Number.isFinite(r)&&Number.isFinite(i)&&Number.isFinite(a)),transformVector(t,[r,i,a,1])}function pixelsToWorld(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=Object(T.a)(e,3),i=r[0],o=r[1],a=r[2];if(assert_assert(Number.isFinite(i)&&Number.isFinite(o),"invalid pixel coordinate"),Number.isFinite(a))return transformVector(t,[i,o,a,1]);var s=transformVector(t,[i,o,0,1]),l=transformVector(t,[i,o,1,1]),u=s[2],c=l[2],p=u===c?0:((n||0)-u)/(c-u);return A.d([],s,l,p)}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}function _arrayWithHoles(e){if(Array.isArray(e))return e}function lngLatZToWorldPosition(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=_slicedToArray(e,3),i=r[0],o=r[1],a=r[2],s=void 0===a?0:a,l=_slicedToArray(t.projectFlat(e),2);return[l[0],l[1],s*(n?web_mercator_utils_getDistanceScales({longitude:i,latitude:o,scale:t.scale}):t.getDistanceScales()).pixelsPerMeter[2]]}function normalizeParameters(e){var t=Object.assign({},e),n=e.viewport,r=e.coordinateSystem,i=e.coordinateOrigin,o=e.fromCoordinateSystem,a=e.fromCoordinateOrigin;return void 0===o&&(t.fromCoordinateSystem=r),void 0===a&&(t.fromCoordinateOrigin=i),r===p.LNGLAT&&n.zoom>=v&&(t.coordinateSystem=p.LNGLAT_OFFSETS,t.coordinateOrigin=[Math.fround(n.longitude),Math.fround(n.latitude)]),t}function getWorldPosition(e,t){var n=t.viewport,r=t.modelMatrix,i=t.coordinateSystem,o=t.coordinateOrigin,a=t.offsetMode,s=_slicedToArray(e,3),l=s[0],u=s[1],h=s[2];if(r){var f=_slicedToArray(c.c([],[l,u,h,1],r),3);l=f[0],u=f[1],h=f[2]}switch(i){case p.LNGLAT:case p.LNGLAT_DEPRECATED:return lngLatZToWorldPosition([l,u,h],n,a);case p.LNGLAT_OFFSETS:return lngLatZToWorldPosition([l+o[0],u+o[1],h+(o[2]||0)],n,a);case p.METER_OFFSETS:return lngLatZToWorldPosition(web_mercator_utils_addMetersToLngLat(o,[l,u,h]),n,a);case p.IDENTITY:default:return[l,u,h]}}function project_functions_projectPosition(e,t){var n=normalizeParameters(t),r=n.viewport,i=n.coordinateSystem,o=n.coordinateOrigin,a=n.modelMatrix,s=n.fromCoordinateSystem,l=n.fromCoordinateOrigin;switch(i){case p.LNGLAT_OFFSETS:case p.METER_OFFSETS:var u=getWorldPosition(e,{viewport:r,modelMatrix:a,coordinateSystem:s,coordinateOrigin:l,offsetMode:!0}),c=lngLatZToWorldPosition(o,r,!0);return k.h(u,u,c),u;case p.LNGLAT:case p.LNGLAT_DEPRECATED:case p.IDENTITY:default:return getWorldPosition(e,{viewport:r,modelMatrix:a,coordinateSystem:s,coordinateOrigin:l,offsetMode:!1})}}var F={name:"lighting",dependencies:[x],vs:"#define MAX_NUM_OF_LIGHTS 5\n\n// TODO these should be using lighting_ prefix\nuniform vec3 lighting_lightPositions[MAX_NUM_OF_LIGHTS];\nuniform vec2 lighting_lightStrengths[MAX_NUM_OF_LIGHTS];\nuniform float lighting_ambientRatio;\nuniform float lighting_diffuseRatio;\nuniform float lighting_specularRatio;\nuniform int lighting_numberOfLights;\n\nfloat lighting_getLightWeight(vec3 position_worldspace_vec3, vec3 normals_worldspace) {\n  float lightWeight = 0.0;\n\n  vec3 normals_worldspace_vec3 = normals_worldspace.xyz;\n\n  vec3 camera_pos_worldspace = project_uCameraPosition;\n  vec3 view_direction = normalize(camera_pos_worldspace - position_worldspace_vec3);\n\n  for (int i = 0; i < MAX_NUM_OF_LIGHTS; i++) {\n    if (i >= lighting_numberOfLights) {\n      break;\n    }\n    vec3 light_position_worldspace = lighting_lightPositions[i];\n    vec3 light_direction = normalize(light_position_worldspace - position_worldspace_vec3);\n\n    vec3 halfway_direction = normalize(light_direction + view_direction);\n    float lambertian = dot(light_direction, normals_worldspace_vec3);\n    float specular = 0.0;\n    if (lambertian > 0.0) {\n      float specular_angle = max(dot(normals_worldspace_vec3, halfway_direction), 0.0);\n      specular = pow(specular_angle, 32.0);\n    }\n    lambertian = max(lambertian, 0.0);\n    lightWeight += (lighting_ambientRatio + lambertian * lighting_diffuseRatio + specular * lighting_specularRatio) *\n      lighting_lightStrengths[i].x;\n  }\n\n  return lightWeight;\n}\n\n// DEPRECATED - Backwards compatibility\n\nfloat getLightWeight(vec3 position_worldspace_vec3, vec3 normals_worldspace) {\n  return lighting_getLightWeight(position_worldspace_vec3, normals_worldspace);\n}\n",getUniforms:function lighting_getUniforms(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N;if(!e.lightSettings)return{};var t=e.coordinateSystem,n=e.coordinateOrigin,r=e.lightSettings,i=r.numberOfLights,o=void 0===i?1:i,a=r.lightsPosition,s=void 0===a?B:a,l=r.lightsStrength,u=void 0===l?z:l,c=r.coordinateSystem,p=r.coordinateOrigin,h=r.modelMatrix,f=void 0===h?null:h,d=r.ambientRatio,g=void 0===d?U:d,m=r.diffuseRatio,y=void 0===m?V:m,v=r.specularRatio,_=void 0===v?G:v;return{lighting_lightPositions:W({lightsPosition:s,numberOfLights:o,viewport:e.viewport,modelMatrix:f,coordinateSystem:t,coordinateOrigin:n,fromCoordinateSystem:c,fromCoordinateOrigin:p}),lighting_lightStrengths:u,lighting_ambientRatio:g,lighting_diffuseRatio:y,lighting_specularRatio:_,lighting_numberOfLights:o}},deprecations:[{type:"function",old:"getLightWeight",new:"lighting_getLightWeight",deprecated:!0}]},N={},B=[-122.45,37.75,8e3],z=[2,0],U=.4,V=.6,G=.8,W=memoize(function preprojectLightPositions(e){for(var t=e.lightsPosition,n=e.numberOfLights,r=e.viewport,i=e.modelMatrix,o=e.coordinateSystem,a=e.coordinateOrigin,s=e.fromCoordinateSystem,l=e.fromCoordinateOrigin,u={viewport:r,modelMatrix:i,coordinateSystem:o,coordinateOrigin:a,fromCoordinateSystem:s,fromCoordinateOrigin:l},c=[],p=0;p<n;p++){var h=project_functions_projectPosition(t.slice(3*p,3*p+3),u);c[3*p]=h[0],c[3*p+1]=h[1],c[3*p+2]=h[2]}return c});!function initializeShaderModules(){Object(o.A)([o.s,o.t,x,w,P,F,o.z]),Object(o.B)([x])}();var q=n(29),H=n.n(q),X=n(9),K=n.n(X);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var Z={isExternalBuffer:!1,needsUpdate:!0,needsRedraw:!1,allocedInstances:-1},Y=function(e){function LayerAttribute(e){var t,n,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,LayerAttribute),n=this,t=!(r=_getPrototypeOf(LayerAttribute).call(this,e,i))||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(n):r;var o=i.transition,a=void 0!==o&&o,s=i.noAlloc,l=void 0!==s&&s,u=i.update,c=void 0===u?null:u,p=i.accessor,h=void 0===p?null:p,f=i.bufferLayout,d=void 0===f?null:f,g=i.defaultValue,m=void 0===g?[0,0,0,0]:g;return m=Array.isArray(m)?m:[m],Object.assign(t.userData,Z,i,{transition:a,noAlloc:l,update:c,accessor:h,defaultValue:m,bufferLayout:d}),Object.seal(t.userData),t._validateAttributeUpdaters(),t}var t,n,r;return _inherits(LayerAttribute,o["k"]),t=LayerAttribute,(n=[{key:"needsUpdate",value:function needsUpdate(){return this.userData.needsUpdate}},{key:"needsRedraw",value:function needsRedraw(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).clearChangedFlags,t=void 0!==e&&e,needsRedraw=this.userData.needsRedraw;return this.userData.needsRedraw=this.userData.needsRedraw&&!t,needsRedraw}},{key:"getInstanceCount",value:function getInstanceCount(){return null!==this.value?this.value.length/this.size:0}},{key:"getUpdateTriggers",value:function getUpdateTriggers(){var e=this.userData.accessor;return[this.id].concat(e||[])}},{key:"getAccessor",value:function getAccessor(){return this.userData.accessor}},{key:"supportsTransition",value:function supportsTransition(){return this.userData.transition}},{key:"getTransitionSetting",value:function getTransitionSetting(e){var t=this.userData,n=t.transition,r=t.accessor;if(!n)return null;var i=Array.isArray(r)?e[r.find(function(t){return e[t]})]:e[r];return Number.isFinite(i)&&(i={duration:i}),i&&i.duration>0?Object.assign({},n,i):null}},{key:"setNeedsUpdate",value:function setNeedsUpdate(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.id;this.userData.needsUpdate=this.userData.needsUpdate||e}},{key:"setNeedsRedraw",value:function setNeedsRedraw(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.id;this.userData.needsRedraw=this.userData.needsRedraw||e}},{key:"allocate",value:function allocate(e){var t=this.userData;if(t.isExternalBuffer||t.noAlloc)return!1;var n=this.getInstanceCount();if((0===n||n<e)&&(t.update||t.accessor)){assert(Number.isFinite(e));var r=Math.max(e,1),i=glArrayFromType(this.type||K.a.FLOAT);return this.constant=!1,this.value=new i(this.size*r),t.needsUpdate=!0,t.allocedInstances=r,!0}return!1}},{key:"updateBuffer",value:function updateBuffer(e){var t=e.numInstances,n=e.data,r=e.props,i=e.context;if(!this.needsUpdate())return!1;var o=this.userData,a=o.update,s=o.accessor,l=!0;return a?(a.call(i,this,{data:n,props:r,numInstances:t}),this.update({value:this.value,constant:this.constant}),this._checkAttributeArray()):s?(this._updateBufferViaStandardAccessor(n,r),this._checkAttributeArray()):l=!1,o.needsUpdate=!1,o.needsRedraw=!0,l}},{key:"setGenericValue",value:function setGenericValue(e){var t=this.userData;if(void 0===e||"function"==typeof e)return t.isExternalBuffer=!1,!1;e=this._normalizeValue(e);var n=!this.constant||!this._areValuesEqual(e,this.value);return n&&this.update({constant:!0,value:e}),t.needsRedraw=t.needsUpdate||n,t.needsUpdate=!1,t.isExternalBuffer=!0,!0}},{key:"setExternalBuffer",value:function setExternalBuffer(e,t){var n=this.userData;if(e){if(n.isExternalBuffer=!0,n.needsUpdate=!1,e instanceof o.b)this.externalBuffer!==e&&(this.update({constant:!1,buffer:e}),n.needsRedraw=!0);else if(this.value!==e){if(!ArrayBuffer.isView(e))throw new Error("Attribute prop must be typed array");if(n.auto&&e.length<=t*this.size)throw new Error("Attribute prop array must match length and size");var r=glArrayFromType(this.type||K.a.FLOAT);e instanceof r?this.update({constant:!1,value:e}):(i.warn("Attribute prop ".concat(this.id," is casted to ").concat(r.name))(),this.update({constant:!1,value:new r(e)})),this.value=e,n.needsRedraw=!0}return!0}return n.isExternalBuffer=!1,!1}},{key:"_normalizeValue",value:function _normalizeValue(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this.userData.defaultValue;if(!Array.isArray(e)&&!ArrayBuffer.isView(e))return t[n]=Number.isFinite(e)?e:r[0],t;switch(this.size){case 4:t[n+3]=Number.isFinite(e[3])?e[3]:r[3];case 3:t[n+2]=Number.isFinite(e[2])?e[2]:r[2];case 2:t[n+1]=Number.isFinite(e[1])?e[1]:r[1];case 1:t[n+0]=Number.isFinite(e[0])?e[0]:r[0]}return t}},{key:"_areValuesEqual",value:function _areValuesEqual(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.size,r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}},{key:"_updateBufferViaStandardAccessor",value:function _updateBufferViaStandardAccessor(e,t){var n=this.userData.accessor,r=this.value,i=this.size,o=t[n];assert("function"==typeof o,'accessor "'.concat(n,'" is not a function'));var a=0,s=!0,l=!1,u=void 0;try{for(var c,p=e[Symbol.iterator]();!(s=(c=p.next()).done);s=!0){var h=o(c.value);this._normalizeValue(h,r,a),a+=i}}catch(e){l=!0,u=e}finally{try{s||null==p.return||p.return()}finally{if(l)throw u}}this.update({value:r})}},{key:"_validateAttributeUpdaters",value:function _validateAttributeUpdaters(){var e=this.userData;if(!(e.noAlloc||"function"==typeof e.update||"string"==typeof e.accessor))throw new Error("Attribute ".concat(this.id," missing update or accessor"))}},{key:"_checkAttributeArray",value:function _checkAttributeArray(){var e=this.value;if(e&&e.length>=4&&!(Number.isFinite(e[0])&&Number.isFinite(e[1])&&Number.isFinite(e[2])&&Number.isFinite(e[3])))throw new Error("Illegal attribute generated for ".concat(this.id))}},{key:"bufferLayout",get:function get(){return this.userData.bufferLayout},set:function set(e){this.userData.bufferLayout=e}}])&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),LayerAttribute}();function glArrayFromType(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).clamped,n=void 0===t||t;switch(e){case K.a.FLOAT:return Float32Array;case K.a.UNSIGNED_SHORT:case K.a.UNSIGNED_SHORT_5_6_5:case K.a.UNSIGNED_SHORT_4_4_4_4:case K.a.UNSIGNED_SHORT_5_5_5_1:return Uint16Array;case K.a.UNSIGNED_INT:return Uint32Array;case K.a.UNSIGNED_BYTE:return n?Uint8ClampedArray:Uint8Array;case K.a.BYTE:return Int8Array;case K.a.SHORT:return Int16Array;case K.a.INT:return Int32Array;default:throw new Error("Failed to deduce type from array")}}function padArrayChunk(e){var t=e.source,n=e.target,r=e.start,i=void 0===r?0:r,o=e.end,a=e.getData;o=o||n.length;var s=t.length,l=o-i;if(s>l)n.set(t.subarray(0,l),i);else if(n.set(t,i),a)for(var u=s;u<l;)for(var c=a(u,t),p=0;p<c.length;p++)n[i+u]=c[p],u++}function padArray(e){var t=e.source,n=e.target,r=e.size,i=e.getData,o=e.sourceLayout,a=e.targetLayout;if(!Array.isArray(a))return padArrayChunk({source:t,target:n,getData:i}),n;for(var s=0,l=0,u=i&&function(e,t){return i(e+l,t)},c=Math.min(o.length,a.length),p=0;p<c;p++){var h=o[p]*r,f=a[p]*r;padArrayChunk({source:t.subarray(s,s+h),target:n,start:l,end:l+f,getData:u}),s+=h,l+=f}return l<n.length&&padArrayChunk({source:[],target:n,start:l,getData:u}),n}var J={1:"float",2:"vec2",3:"vec3",4:"vec4"};function attribute_transition_utils_getShaders(e){var t=[],n=[],r=[],i=[],o=[];for(var a in e){var s=e[a],l=J[s.attribute.size];l&&(s.bufferIndex=t.length,t.push(a),n.push("attribute ".concat(l," ").concat(a,"From;")),n.push("attribute ".concat(l," ").concat(a,"To;")),r.push("uniform float ".concat(a,"Time;")),i.push("varying ".concat(l," ").concat(a,";")),o.push("".concat(a," = mix(").concat(a,"From, ").concat(a,"To,\n        ").concat(a,"Time);")))}return{vs:"\n#define SHADER_NAME feedback-vertex-shader\n".concat(n.join("\n"),"\n").concat(r.join("\n"),"\n").concat(i.join("\n"),"\n\nvoid main(void) {\n  ").concat(o.join("\n"),"\n  gl_Position = vec4(0.0);\n}\n"),fs:"#define SHADER_NAME feedback-fragment-shader\n\nprecision highp float;\n\n".concat(i.join("\n"),"\n\nvoid main(void) {\n  gl_FragColor = vec4(0.0);\n}\n"),varyings:t}}function getBuffers(e){var t={},n={};for(var r in e){var i=e[r],o=i.fromState,a=i.toState,s=i.buffer;t["".concat(r,"From")]=o,t["".concat(r,"To")]=a,n["".concat(r)]=s}return{sourceBuffers:t,feedbackBuffers:n}}function padBuffer(e){var t=e.fromState,n=e.toState,r=e.fromLength,i=e.toLength,a=e.fromBufferLayout,s=e.toBufferLayout,l=e.getData,u=void 0===l?function(e){return e}:l;if((a&&s||!(r>=i))&&t instanceof o.b){var c=new Float32Array(i),p=t.getData({}),h=n.value,f=n.buffer,d=n.size,g=n.constant,m=h||f.getData({}),y=g?function(e,t){return u(h,t)}:function(e,t){return u(m.subarray(e,e+d),t)};padArray({source:p,target:c,sourceLayout:a,targetLayout:s,size:n.size,getData:y}),t.setData({data:c})}}function transition_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function transition_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Q={NONE:"none",PENDING:"pending",IN_PROGRESS:"in_progress",ENDED:"ended"};function noop(){}var $=function(){function Transition(e){transition_classCallCheck(this,Transition),this._startTime=null,this._state=Q.NONE,this.duration=1,this.easing=function(e){return e},this.onStart=noop,this.onUpdate=noop,this.onInterrupt=noop,this.onEnd=noop,Object.assign(this,e)}var e,t,n;return e=Transition,(t=[{key:"start",value:function start(e){this.inProgress&&this.onInterrupt(this),Object.assign(this,e),this._setState(Q.PENDING)}},{key:"cancel",value:function cancel(){this.inProgress&&(this.onInterrupt(this),this._setState(Q.NONE))}},{key:"update",value:function update(e){if(this.state===Q.PENDING&&(this._startTime=e,this._setState(Q.IN_PROGRESS)),this.state===Q.IN_PROGRESS){var t=!1,n=(e-this._startTime)/this.duration;return n>=1&&(n=1,t=!0),this.time=this.easing(n),this.onUpdate(this),t&&this._setState(Q.ENDED),!0}return!1}},{key:"_setState",value:function _setState(e){if(this._state!==e)switch(this._state=e,e){case Q.PENDING:this.onStart(this);break;case Q.ENDED:this.onEnd(this)}}},{key:"state",get:function get(){return this._state}},{key:"inProgress",get:function get(){return this._state===Q.PENDING||this._state===Q.IN_PROGRESS}}])&&transition_defineProperties(e.prototype,t),n&&transition_defineProperties(e,n),Transition}();function attribute_transition_manager_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function attribute_transition_manager_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ee=function noop(){},te={duration:0,easing:function easing(e){return e},onStart:ee,onEnd:ee,onInterrupt:ee},ne=function(){function AttributeTransitionManager(e,t){var n=t.id;attribute_transition_manager_classCallCheck(this,AttributeTransitionManager),this.id=n,this.gl=e,this.attributeTransitions={},this.needsRedraw=!1,this.transform=null,this.numInstances=0,o.j.isSupported(e)?this.isSupported=!0:e&&i.warn("WebGL2 not supported by this browser. Transition animation is disabled.")()}var e,t,n;return e=AttributeTransitionManager,(t=[{key:"finalize",value:function finalize(){for(var e in this.transform&&this.transform.delete(),this.attributeTransitions)this._removeTransition(e)}},{key:"update",value:function update(e){var t=e.attributes,n=e.transitions,r=void 0===n?{}:n,i=e.numInstances;if(this.opts=r,this.numInstances=i||1,this.isSupported){var o=this.attributeTransitions,a={};for(var s in t){this._updateAttribute(s,t[s])&&(a[s]=o[s])}for(var l in o){var u=t[l];u&&u.supportsTransition()||this._removeTransition(l)}if(this.transform){if(this.transform){var c=getBuffers(a),p=c.sourceBuffers,h=c.feedbackBuffers;this.transform.update({elementCount:this.numInstances,sourceBuffers:p,feedbackBuffers:h})}}else this._createModel()}}},{key:"hasAttribute",value:function hasAttribute(e){return e in this.attributeTransitions}},{key:"getAttributes",value:function getAttributes(){var e={};for(var t in this.attributeTransitions){var n=this.attributeTransitions[t];n.buffer&&(e[t]=n.attributeInTransition)}return e}},{key:"setCurrentTime",value:function setCurrentTime(e){if(!this.transform||0===this.numInstances)return!1;var t={},n=this.needsRedraw;for(var r in this.needsRedraw=!1,this.attributeTransitions){var i=this.attributeTransitions[r];i.update(e)&&(t["".concat(r,"Time")]=i.time,n=!0)}return n&&this.transform.run({uniforms:t}),n}},{key:"_createTransition",value:function _createTransition(e,t){var n=this.attributeTransitions[e];return n?null:(n=new $({name:e,attribute:t,attributeInTransition:new Y(this.gl,t),bufferLayout:t.bufferLayout}),this.attributeTransitions[e]=n,this._invalidateModel(),n)}},{key:"_removeTransition",value:function _removeTransition(e){var t=this.attributeTransitions[e];t&&(t.buffer&&t.buffer.delete(),t._swapBuffer&&t._swapBuffer.delete(),delete this.attributeTransitions[e],this._invalidateModel())}},{key:"_updateAttribute",value:function _updateAttribute(e,t){var n=t.getTransitionSetting(this.opts);if(n){var r,i=this.attributeTransitions[e];if(i?r=t.needsRedraw():(i=this._createTransition(e,t),r=!0),r)return this._triggerTransition(i,n),!0}return!1}},{key:"_invalidateModel",value:function _invalidateModel(){this.transform&&(this.transform.delete(),this.transform=null)}},{key:"_createModel",value:function _createModel(){0!==Object.keys(this.attributeTransitions).length&&(this.transform=new o.j(this.gl,Object.assign({elementCount:this.numInstances},getBuffers(this.attributeTransitions),attribute_transition_utils_getShaders(this.attributeTransitions))))}},{key:"_getNextTransitionStates",value:function _getNextTransitionStates(e,t){var n,r=e.attribute,i=r.size;n=r.constant?{constant:!0,value:r.value,size:i}:{constant:!1,buffer:r.getBuffer(),size:i,value:r.externalBuffer?null:r.value};var a=e.buffer||n,s=this.numInstances*i,l=a instanceof o.b&&a.getElementCount()||s,u=e._swapBuffer;return e._swapBuffer=e.buffer,u?u.getElementCount()<s&&u.setData({data:new Float32Array(s)}):u=new o.b(this.gl,{data:new Float32Array(s),usage:K.a.DYNAMIC_COPY}),e.attributeInTransition.update({buffer:u}),padBuffer({fromState:a,toState:n,fromLength:l,toLength:s,fromBufferLayout:e.bufferLayout,toBufferLayout:r.bufferLayout,getData:t.enter}),e.bufferLayout=r.bufferLayout,{fromState:a,toState:n,buffer:u}}},{key:"_triggerTransition",value:function _triggerTransition(e,t){assert(t&&t.duration>0),this.needsRedraw=!0;var n=Object.assign({},te,t);e.start(Object.assign({},this._getNextTransitionStates(e,t),n))}}])&&attribute_transition_manager_defineProperties(e.prototype,t),n&&attribute_transition_manager_defineProperties(e,n),AttributeTransitionManager}();function attribute_manager_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function attribute_manager_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function attribute_manager_createClass(e,t,n){return t&&attribute_manager_defineProperties(e.prototype,t),n&&attribute_manager_defineProperties(e,n),e}function attribute_manager_noop(){}var re={savedMessages:null,timeStart:null,onLog:function onLog(e){var t=e.level,n=e.message;i.log(t,n)()},onUpdateStart:function onUpdateStart(e){e.level,e.numInstances;re.savedMessages=[],re.timeStart=new Date},onUpdate:function onUpdate(e){e.level;var t=e.message;re.savedMessages&&re.savedMessages.push(t)},onUpdateEnd:function onUpdateEnd(e){var t=e.level,n=e.id,r=e.numInstances,o=Math.round(new Date-re.timeStart),a="".concat(o,"ms");i.group(t,"Updated attributes for ".concat(r," instances in ").concat(n," in ").concat(a),{collapsed:!0})();var s=!0,l=!1,u=void 0;try{for(var c,p=re.savedMessages[Symbol.iterator]();!(s=(c=p.next()).done);s=!0){var h=c.value;i.log(t,h)()}}catch(e){l=!0,u=e}finally{try{s||null==p.return||p.return()}finally{if(l)throw u}}i.groupEnd(t,"Updated attributes for ".concat(r," instances in ").concat(n," in ").concat(a))(),re.savedMessages=null}},ie=function(){function AttributeManager(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.id,r=void 0===n?"attribute-manager":n,i=t.stats;attribute_manager_classCallCheck(this,AttributeManager),this.id=r,this.gl=e,this.attributes={},this.updateTriggers={},this.accessors={},this.needsRedraw=!0,this.userData={},this.stats=i,this.attributeTransitionManager=new ne(e,{id:"".concat(r,"-transitions")}),Object.seal(this)}return attribute_manager_createClass(AttributeManager,null,[{key:"setDefaultLogFunctions",value:function setDefaultLogFunctions(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onLog,n=e.onUpdateStart,r=e.onUpdate,i=e.onUpdateEnd;void 0!==t&&(re.onLog=t||attribute_manager_noop),void 0!==n&&(re.onUpdateStart=n||attribute_manager_noop),void 0!==r&&(re.onUpdate=r||attribute_manager_noop),void 0!==i&&(re.onUpdateEnd=i||attribute_manager_noop)}}]),attribute_manager_createClass(AttributeManager,[{key:"finalize",value:function finalize(){for(var e in this.attributes)this.attributes[e].delete();this.attributeTransitionManager.finalize()}},{key:"getNeedsRedraw",value:function getNeedsRedraw(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).clearRedrawFlags,t=void 0!==e&&e,n=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!t,n&&this.id}},{key:"setNeedsRedraw",value:function setNeedsRedraw(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.needsRedraw=!0,this}},{key:"add",value:function add(e,t){this._add(e,t)}},{key:"addInstanced",value:function addInstanced(e,t){this._add(e,t,{instanced:1})}},{key:"remove",value:function remove(e){for(var t=0;t<e.length;t++){var n=e[t];void 0!==this.attributes[n]&&(this.attributes[n].delete(),delete this.attributes[n])}}},{key:"invalidate",value:function invalidate(e){var t=this._invalidateTrigger(e);re.onLog({level:3,message:"invalidated attributes ".concat(t," (").concat(e,") for ").concat(this.id)})}},{key:"invalidateAll",value:function invalidateAll(){for(var e in this.attributes)this.attributes[e].setNeedsUpdate();re.onLog({level:3,message:"invalidated all attributes for ".concat(this.id)})}},{key:"update",value:function update(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,n=e.numInstances,r=e.transitions,i=e.props,o=void 0===i?{}:i,a=e.buffers,s=void 0===a?{}:a,l=e.context,u=void 0===l?{}:l,c=!1;for(var p in re.onUpdateStart({level:2,id:this.id,numInstances:n}),this.stats&&this.stats.timeStart("attribute updates",this.id),this.attributes){var h=this.attributes[p];h.setExternalBuffer(s[p],this.numInstances)||h.setGenericValue(o[h.getAccessor()])||h.needsUpdate()&&(c=!0,this._updateAttribute({attribute:h,numInstances:n,data:t,props:o,context:u})),this.needsRedraw|=h.needsRedraw()}c&&(this.stats&&this.stats.timeEnd("attribute updates",this.id),re.onUpdateEnd({level:2,id:this.id,numInstances:n})),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:n,transitions:r})}},{key:"updateTransition",value:function updateTransition(){var e=this.attributeTransitionManager.setCurrentTime(Date.now());return this.needsRedraw=this.needsRedraw||e,e}},{key:"getAttributes",value:function getAttributes(){return this.attributes}},{key:"getChangedAttributes",value:function getChangedAttributes(e){e.clearChangedFlags;var t=this.attributes,n=this.attributeTransitionManager,r=Object.assign({},n.getAttributes());for(var i in t){var o=t[i];o.needsRedraw({clearChangedFlags:!0})&&(n.hasAttribute(i)||(r[i]=o))}return r}},{key:"getAccessors",value:function getAccessors(){return this.updateTriggers}},{key:"_add",value:function _add(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t&&i.warn("AttributeManager.add({updaters}) - updater map no longer supported")();var r={};for(var o in e){var a=e[o];r[o]=new Y(this.gl,Object.assign({},a,{id:o,constant:a.constant||!1,isIndexed:a.isIndexed||a.elements,size:a.elements?1:a.size,value:a.value||null,instanced:a.instanced||n.instanced}))}Object.assign(this.attributes,r),this._mapUpdateTriggersToAttributes()}},{key:"_mapUpdateTriggersToAttributes",value:function _mapUpdateTriggersToAttributes(){var e=this,t={},n=function _loop(n){e.attributes[n].getUpdateTriggers().forEach(function(e){t[e]||(t[e]=[]),t[e].push(n)})};for(var r in this.attributes)n(r);this.updateTriggers=t}},{key:"_invalidateTrigger",value:function _invalidateTrigger(e){var t=this.attributes,n=this.updateTriggers[e];if(n)n.forEach(function(e){var n=t[e];n&&n.setNeedsUpdate()});else{var r="invalidating non-existent trigger ".concat(e," for ").concat(this.id,"\n");r+="Valid triggers: ".concat(Object.keys(t).join(", ")),i.warn(r,n)()}return n}},{key:"_updateAttribute",value:function _updateAttribute(e){var t=e.attribute,n=e.numInstances,r=e.data,i=e.props,o=e.context;t.allocate(n)&&re.onUpdate({level:3,message:"".concat(t.id," allocated ").concat(n),id:this.id});var a=Date.now();if(t.updateBuffer({numInstances:n,data:r,props:i,context:o})){this.needsRedraw=!0;var s=Math.round(Date.now()-a);re.onUpdate({level:3,message:"".concat(t.id," updated ").concat(n," in ").concat(s,"ms")})}}}]),AttributeManager}();function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}var oe=function recursiveSet(e,t,n){e&&(t.length>1?recursiveSet(e[t[0]],t.slice(1),n):e[t[0]]=n)},ae=new Map,se=function setPropOverrides(e,t,n){H.a.isReady()&&(ae.has(e)||ae.set(e,new Map),ae.get(e).set(t,n))},le=function applyPropOverrides(e){if(H.a.isReady()&&e.id){var t=ae.get(e.id);t&&t.forEach(function(t,n){var r;oe(e,n,t),"data"===n[0]&&(e.data=_arrayWithoutHoles(r=e.data)||_iterableToArray(r)||_nonIterableSpread())})}},ue=function layerEditListener(e){H.a.isReady()&&H.a.listenFor("deck.gl",e)},ce=function seerInitListener(e){H.a.isReady()&&H.a.listenFor("init",e)},pe=function initLayerInSeer(e){if(H.a.isReady()&&e){var t=[e.constructor.layerName];H.a.listItem("deck.gl",e.id,{badges:t,links:e.state&&e.state.model?["luma.gl:".concat(e.state.model.id)]:void 0,parent:e.parent?e.parent.id:void 0})}},he=function updateLayerInSeer(e){if(H.a.isReady()&&!H.a.throttle("deck.gl:".concat(e.id),1e3)){var t=logPayload(e);H.a.multiUpdate("deck.gl",e.id,t)}},fe=function removeLayerInSeer(e){H.a.isReady()&&e&&H.a.deleteItem("deck.gl",e)};function logPayload(e){var t=[{path:"objects.props",data:e.props}],n=[e.constructor.layerName];if(e.state){if(e.getAttributeManager()){var r=e.getAttributeManager().getAttributes();t.push({path:"objects.attributes",data:r}),n.push(e.getAttributeManager().stats.getTimeString())}if(e.state.model){e.state.model.setProps({timerQueryEnabled:!0});var i=e.state.model.stats.lastFrameTime;i&&n.push("".concat((1e3*i).toFixed(0),"μs"))}}return t.push({path:"badges",data:n}),t}function props_typeof(e){return(props_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function props_validateProps(e){var t=getPropTypes(e);for(var n in t){var r=t[n],i=r.validate;if(i&&!i(e[n],r))throw new Error("Invalid prop ".concat(n,": ").concat(e[n]))}}function props_diffProps(e,t){var n=compareProps({newProps:e,oldProps:t,propTypes:getPropTypes(e),ignoreProps:{data:null,updateTriggers:null}}),r=diffDataProps(e,t),i=!1;return r||(i=diffUpdateTriggers(e,t)),{dataChanged:r,propsChanged:n,updateTriggersChanged:i}}function compareProps(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.newProps,n=e.oldProps,r=e.ignoreProps,i=void 0===r?{}:r,o=e.propTypes,a=void 0===o?{}:o,s=e.triggerName,l=void 0===s?"props":s;if(assert(void 0!==n&&void 0!==t,"compareProps args"),n===t)return null;if("object"!==props_typeof(t)||null===t)return"".concat(l," changed shallowly");if("object"!==props_typeof(n)||null===n)return"".concat(l," changed shallowly");for(var u in n)if(!(u in i)){if(!(u in t))return"".concat(l,".").concat(u," dropped: ").concat(n[u]," -> undefined");var c=t[u],p=n[u],h=a[u],f=h&&h.equal;if(f&&!f(c,p,h))return"".concat(l,".").concat(u," changed deeply: ").concat(p," -> ").concat(c);if(!f&&(f=c&&p&&c.equals)&&!f.call(c,p))return"".concat(l,".").concat(u," changed deeply: ").concat(p," -> ").concat(c);if(!f&&p!==c)return"".concat(l,".").concat(u," changed shallowly: ").concat(p," -> ").concat(c)}for(var d in t)if(!(d in i||d in n))return"".concat(l,".").concat(d," added: undefined -> ").concat(t[d]);return null}function diffDataProps(e,t){if(null===t)return"oldProps is null, initial diff";var n=e.dataComparator;if(n){if(!n(e.data,t.data))return"Data comparator detected a change"}else if(e.data!==t.data)return"A new data container was supplied";return null}function diffUpdateTriggers(e,t){if(null===t)return"oldProps is null, initial diff";if("all"in e.updateTriggers&&diffUpdateTrigger(e,t,"all"))return{all:!0};var n={},r=!1;for(var i in e.updateTriggers){if("all"!==i)diffUpdateTrigger(e,t,i)&&(n[i]=!0,r=n)}return r}function diffUpdateTrigger(e,t,n){var r=e.updateTriggers[n];r=null==r?{}:r;var i=t.updateTriggers[n];return compareProps({oldProps:i=null==i?{}:i,newProps:r,triggerName:n})}function getPropTypes(e){var t=e._component,n=t&&t.constructor;return n?n._propTypes:{}}function count_typeof(e){return(count_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var de="count(): argument not an object",ge="count(): argument not a container";function count_count(e){if(null===(t=e)||"object"!==count_typeof(t))throw new Error(de);var t;if("function"==typeof e.count)return e.count();if(Number.isFinite(e.size))return e.size;if(Number.isFinite(e.length))return e.length;if(isPlainObject(e))return Object.keys(e).length;throw new Error(ge)}function isPlainObject(e){return null!==e&&"object"===count_typeof(e)&&e.constructor===Object}var me={NO_STATE:"Awaiting state",MATCHED:"Matched. State transferred from previous layer",INITIALIZED:"Initialized",AWAITING_GC:"Discarded. Awaiting garbage collection",AWAITING_FINALIZATION:"No longer matched. Awaiting garbage collection",FINALIZED:"Finalized! Awaiting garbage collection"};function prop_types_typeof(e){return(prop_types_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function prop_types_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function prop_types_iterableToArrayLimit(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}function prop_types_arrayWithHoles(e){if(Array.isArray(e))return e}var ye={boolean:{validate:function validate(e,t){return!0},equal:function equal(e,t,n){return Boolean(e)===Boolean(t)}},number:{validate:function validate(e,t){return Number.isFinite(e)&&(!("max"in t)||e<=t.max)&&(!("min"in t)||e>=t.min)}},color:{validate:function validate(e,t){return isArray(e)&&(3===e.length||4===e.length)},equal:function equal(e,t,n){return arrayEqual(e,t)}},accessor:{validate:function validate(e,t){var n=getTypeOf(e);return"function"===n||n===getTypeOf(t.value)},equal:function equal(e,t,n){return"function"==typeof t||arrayEqual(e,t)}},array:{validate:function validate(e,t){return t.optional&&!e||isArray(e)},equal:function equal(e,t,n){return n.compare?arrayEqual(e,t):e===t}},function:{validate:function validate(e,t){return t.optional&&!e||"function"==typeof e},equal:function equal(e,t,n){return!n.compare||e===t}}};function arrayEqual(e,t){if(e===t)return!0;if(!isArray(e)||!isArray(t))return!1;var n=e.length;if(n!==t.length)return!1;for(var r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function parsePropTypes(e){for(var t,n,r={},i={},o={},a=Object.entries(e),s=0;s<a.length;s++){var l=(t=a[s],n=2,prop_types_arrayWithHoles(t)||prop_types_iterableToArrayLimit(t,n)||prop_types_nonIterableRest()),u=l[0],c=l[1];if(c&&c.deprecatedFor)o[u]=Array.isArray(c.deprecatedFor)?c.deprecatedFor:[c.deprecatedFor];else{var p=parsePropType(u,c);r[u]=p,i[u]=p.value}}return{propTypes:r,defaultProps:i,deprecatedProps:o}}function parsePropType(e,t){switch(getTypeOf(t)){case"object":return normalizePropDefinition(e,t);case"array":return normalizePropDefinition(e,{type:"array",value:t,compare:!1});case"boolean":return normalizePropDefinition(e,{type:"boolean",value:t});case"number":return normalizePropDefinition(e,{type:"number",value:t});case"function":return normalizePropDefinition(e,{type:"function",value:t,compare:!0});default:return{name:e,type:"unknown",value:t}}}function normalizePropDefinition(e,t){return"type"in t?Object.assign({name:e},ye[t.type],t):"value"in t?Object.assign({name:e,type:getTypeOf(t.value)},t):{name:e,type:"object",value:t}}function isArray(e){return Array.isArray(e)||ArrayBuffer.isView(e)}function getTypeOf(e){return isArray(e)?"array":null===e?"null":prop_types_typeof(e)}function createProps(){for(var e=getPropsPrototypeAndTypes(this.constructor),t=e.defaultProps,n=Object.create(t,{_component:{enumerable:!1,value:this},_asyncPropOriginalValues:{enumerable:!1,value:{}},_asyncPropResolvedValues:{enumerable:!1,value:{}}}),r=0;r<arguments.length;++r)Object.assign(n,arguments[r]);var i=this.constructor.layerName,o=e.deprecatedProps;return checkDeprecatedProps(i,n,o),checkDeprecatedProps(i,n.updateTriggers,o),checkDeprecatedProps(i,n.transitions,o),le(n),Object.freeze(n),n}function checkDeprecatedProps(e,t,n){if(t)for(var r in n)if(create_props_hasOwnProperty(t,r)){var o="".concat(e||"Layer",": ").concat(r),a=!0,s=!1,l=void 0;try{for(var u,c=n[r][Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var p=u.value;create_props_hasOwnProperty(t,p)||(t[p]=t[r])}}catch(e){s=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(s)throw l}}i.deprecated(o,n[r].join("/"))()}}function getPropsPrototypeAndTypes(e){var t=getOwnProperty(e,"_mergedDefaultProps");return t?{defaultProps:t,propTypes:getOwnProperty(e,"_propTypes"),deprecatedProps:getOwnProperty(e,"_deprecatedProps")}:createPropsPrototypeAndTypes(e)}function createPropsPrototypeAndTypes(e){var t=e.prototype;if(!t)return{defaultProps:{}};var n=Object.getPrototypeOf(e),r=t&&getPropsPrototypeAndTypes(n)||null,i=parsePropTypes(getOwnProperty(e,"defaultProps")||{}),o=Object.assign({},r&&r.propTypes,i.propTypes),a=createPropsPrototype(i.defaultProps,r&&r.defaultProps,o,e),s=Object.assign({},r&&r.deprecatedProps,i.deprecatedProps);return e._mergedDefaultProps=a,e._propTypes=o,e._deprecatedProps=s,{propTypes:o,defaultProps:a,deprecatedProps:s}}function createPropsPrototype(e,t,n,r){var i=Object.create(null);Object.assign(i,t,e);var o=getComponentName(r);return delete e.id,Object.defineProperties(i,{id:{configurable:!1,writable:!0,value:o}}),addAsyncPropsToPropPrototype(i,n),i}function addAsyncPropsToPropPrototype(e,t){var n={},r={_asyncPropDefaultValues:{enumerable:!1,value:n},_asyncPropOriginalValues:{enumerable:!1,value:{}}};for(var i in t){var o=t[i],a=o.name,s=o.value;o.async&&(n[a]=s,r[a]=getDescriptorForAsyncProp(a))}Object.defineProperties(e,r)}function getDescriptorForAsyncProp(e){return{configurable:!1,enumerable:!0,set:function set(t){"string"==typeof t||t instanceof Promise?this._asyncPropOriginalValues[e]=t:this._asyncPropResolvedValues[e]=t},get:function get(){if(this._asyncPropResolvedValues){if(e in this._asyncPropResolvedValues){var t=this._asyncPropResolvedValues[e];return"data"===e?t||this._asyncPropDefaultValues[e]:t}if(e in this._asyncPropOriginalValues){var n=this._component&&this._component.internalState;if(n&&n.hasAsyncProp(e))return n.getAsyncProp(e)}}return this._asyncPropDefaultValues[e]}}}function create_props_hasOwnProperty(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function getOwnProperty(e,t){return create_props_hasOwnProperty(e,t)&&e[t]}function getComponentName(e){var t=getOwnProperty(e,"layerName")||getOwnProperty(e,"componentName");return t||i.once(0,"".concat(e.name,".componentName not specified"))(),t||e.name}function component_state_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function component_state_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ve=Object.freeze({}),_e=function(){function ComponentState(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;component_state_classCallCheck(this,ComponentState),this.component=e,this.asyncProps={},this.onAsyncPropUpdated=function(){},this.oldProps=ve,this.oldAsyncProps=null}var e,t,n;return e=ComponentState,(t=[{key:"getOldProps",value:function getOldProps(){return this.oldAsyncProps||this.oldProps}},{key:"resetOldProps",value:function resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component.props}},{key:"freezeAsyncOldProps",value:function freezeAsyncOldProps(){if(!this.oldAsyncProps)for(var e in this.oldProps=this.oldProps||this.component.props,this.oldAsyncProps={},this.oldProps)this.oldAsyncProps[e]=this.oldProps[e]}},{key:"hasAsyncProp",value:function hasAsyncProp(e){return e in this.asyncProps}},{key:"getAsyncProp",value:function getAsyncProp(e){var t=this.asyncProps[e];return t&&t.resolvedValue}},{key:"isAsyncPropLoading",value:function isAsyncPropLoading(e){var t=this.asyncProps[e];return Boolean(t&&t.pendingLoadCount>0&&t.pendingLoadCount!==t.resolvedLoadCount)}},{key:"setAsyncProps",value:function setAsyncProps(e){var t=e._asyncPropResolvedValues||{},n=e._asyncPropOriginalValues||e,r=e._asyncPropDefaultValues||{};for(var i in t){var o=t[i];this._createAsyncPropData(i,o,r[i]),this._updateAsyncProp(i,o)}for(var a in n){var s=n[a];this._createAsyncPropData(a,s,r[a]),this._updateAsyncProp(a,s)}}},{key:"_updateAsyncProp",value:function _updateAsyncProp(e,t){if(this._didAsyncInputValueChange(e,t)){if("string"==typeof t)t=(0,this.layer.props.fetch)(t);t instanceof Promise?this._watchPromise(e,t):this._setPropValue(e,t)}}},{key:"_didAsyncInputValueChange",value:function _didAsyncInputValueChange(e,t){var n=this.asyncProps[e];return t!==n.lastValue&&(n.lastValue=t,!0)}},{key:"_setPropValue",value:function _setPropValue(e,t){var n=this.asyncProps[e];n.value=t,n.resolvedValue=t,n.pendingLoadCount++,n.resolvedLoadCount=n.pendingLoadCount}},{key:"_setAsyncPropValue",value:function _setAsyncPropValue(e,t,n){var r=this.asyncProps[e];r&&n>=r.resolvedLoadCount&&(assert(void 0!==t),this.freezeAsyncOldProps(),t=this._postProcessValue(e,t),r.resolvedValue=t,r.resolvedLoadCount=n,this.onAsyncPropUpdated(e,t))}},{key:"_watchPromise",value:function _watchPromise(e,t){var n=this,r=this.asyncProps[e];r.pendingLoadCount++;var o=r.pendingLoadCount;t.then(function(t){return n._setAsyncPropValue(e,t,o)}).catch(function(e){return i.error(e)()})}},{key:"_postProcessValue",value:function _postProcessValue(e,t){var n=(this.component?this.component.props:{}).dataTransform;return"data"===e&&n&&(t=n(t)),t}},{key:"_createAsyncPropData",value:function _createAsyncPropData(e,t,n){this.asyncProps[e]||(this.asyncProps[e]={lastValue:null,resolvedValue:n,pendingLoadCount:0,resolvedLoadCount:0})}}])&&component_state_defineProperties(e.prototype,t),n&&component_state_defineProperties(e,n),ComponentState}();function component_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function component_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var be=0,xe=function(){function Component(){component_classCallCheck(this,Component),this.props=createProps.apply(this,arguments),this.id=this.props.id,this.count=be++,this.lifecycle=me.NO_STATE,this.parent=null,this.context=null,this.state=null,this.internalState=null,Object.seal(this)}var e,t,n;return e=Component,(t=[{key:"clone",value:function clone(e){var t=this.props,n={};for(var r in t._asyncPropDefaultValues)r in t._asyncPropResolvedValues?n[r]=t._asyncPropResolvedValues[r]:r in t._asyncPropOriginalValues&&(n[r]=t._asyncPropOriginalValues[r]);return new this.constructor(Object.assign({},t,n,e))}},{key:"_initState",value:function _initState(){this.internalState=new _e({})}},{key:"stats",get:function get(){return this.internalState.stats}}])&&component_defineProperties(e.prototype,t),n&&component_defineProperties(e,n),Component}();function layer_state_typeof(e){return(layer_state_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function layer_state_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function layer_state_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function layer_state_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function layer_state_getPrototypeOf(e){return(layer_state_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function layer_state_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&layer_state_setPrototypeOf(e,t)}function layer_state_setPrototypeOf(e,t){return(layer_state_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}xe.defaultProps={};var we=function(e){function LayerState(e){var t,n,r,i=e.attributeManager,o=e.layer;return layer_state_classCallCheck(this,LayerState),n=this,(t=!(r=layer_state_getPrototypeOf(LayerState).call(this,o))||"object"!==layer_state_typeof(r)&&"function"!=typeof r?layer_state_assertThisInitialized(n):r).attributeManager=i,t.model=null,t.needsRedraw=!0,t.subLayers=null,t}var t,n,r;return layer_state_inherits(LayerState,_e),t=LayerState,(n=[{key:"layer",get:function get(){return this.component},set:function set(e){this.component=e}}])&&layer_state_defineProperties(t.prototype,n),r&&layer_state_defineProperties(t,r),LayerState}();function layer_typeof(e){return(layer_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function layer_slicedToArray(e,t){return layer_arrayWithHoles(e)||layer_iterableToArrayLimit(e,t)||layer_nonIterableRest()}function layer_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function layer_iterableToArrayLimit(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}function layer_arrayWithHoles(e){if(Array.isArray(e))return e}function layer_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function layer_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function layer_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function layer_getPrototypeOf(e){return(layer_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function layer_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&layer_setPrototypeOf(e,t)}function layer_setPrototypeOf(e,t){return(layer_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var Se=Object.freeze([]),Ee=new Uint8ClampedArray(0),Pe={data:{type:"data",value:Se,async:!0},dataComparator:null,dataTransform:{type:"function",value:function value(e){return e},compare:!1},fetch:{type:"function",value:function value(e){return fetch(e).then(function(e){return e.json()})},compare:!1},updateTriggers:{},numInstances:void 0,visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:.8},onHover:{type:"function",value:null,compare:!1,optional:!0},onClick:{type:"function",value:null,compare:!1,optional:!0},onDragStart:{type:"function",value:null,compare:!1,optional:!0},onDrag:{type:"function",value:null,compare:!1,optional:!0},onDragEnd:{type:"function",value:null,compare:!1,optional:!0},coordinateSystem:p.LNGLAT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,parameters:{},uniforms:{},framebuffer:null,animation:null,getPolygonOffset:{type:"function",value:function value(e){return[0,100*-e.layerIndex]},compare:!1},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"color",value:[0,0,128,128]}},Ce=function(e){function Layer(){return layer_classCallCheck(this,Layer),e=this,!(t=layer_getPrototypeOf(Layer).apply(this,arguments))||"object"!==layer_typeof(t)&&"function"!=typeof t?layer_assertThisInitialized(e):t;var e,t}var t,n,r;return layer_inherits(Layer,xe),t=Layer,(n=[{key:"toString",value:function toString(){var e=this.constructor.layerName||this.constructor.name;return"".concat(e,"({id: '").concat(this.props.id,"'})")}},{key:"setState",value:function setState(e){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,e),this.setNeedsRedraw()}},{key:"setNeedsRedraw",value:function setNeedsRedraw(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.internalState&&(this.internalState.needsRedraw=e)}},{key:"setLayerNeedsUpdate",value:function setLayerNeedsUpdate(){this.context.layerManager.setNeedsUpdate(String(this))}},{key:"getNeedsRedraw",value:function getNeedsRedraw(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).clearRedrawFlags,t=void 0!==e&&e;return this._getNeedsRedraw(t)}},{key:"needsUpdate",value:function needsUpdate(){return this.shouldUpdateState(this._getUpdateParams())}},{key:"isPickable",value:function isPickable(){return this.props.pickable&&this.props.visible}},{key:"getModels",value:function getModels(){return this.state&&(this.state.models||(this.state.model?[this.state.model]:[]))}},{key:"getSingleModel",value:function getSingleModel(){return this.state&&this.state.model}},{key:"getAttributeManager",value:function getAttributeManager(){return this.internalState&&this.internalState.attributeManager}},{key:"getCurrentLayer",value:function getCurrentLayer(){return this.internalState&&this.internalState.layer}},{key:"getFirstObject",value:function getFirstObject(){var e=this.props.data,t=!0,n=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){return i.value}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return null}},{key:"project",value:function project(e){var t=this.context.viewport,n=layer_slicedToArray(worldToPixels(getWorldPosition(e,{viewport:t,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),t.pixelProjectionMatrix),3),r=n[0],i=n[1],o=n[2];return 2===e.length?[r,i]:[r,i,o]}},{key:"unproject",value:function unproject(e){var t=this.context.viewport;return assert(Array.isArray(e)),t.unproject(e)}},{key:"projectPosition",value:function projectPosition(e){return assert(Array.isArray(e)),project_functions_projectPosition(e,{viewport:this.context.viewport,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem})}},{key:"projectFlat",value:function projectFlat(e){i.deprecated("layer.projectFlat","layer.projectPosition")();var t=this.context.viewport;return assert(Array.isArray(e)),t.projectFlat(e)}},{key:"unprojectFlat",value:function unprojectFlat(e){i.deprecated("layer.unprojectFlat")();var t=this.context.viewport;return assert(Array.isArray(e)),t.unprojectFlat(e)}},{key:"use64bitProjection",value:function use64bitProjection(){if(this.props.fp64){if(this.props.coordinateSystem===p.LNGLAT_DEPRECATED)return!0;i.once(0,"Legacy 64-bit mode only works with coordinateSystem set to\n        COORDINATE_SYSTEM.LNGLAT_DEPRECATED. Rendering in 32-bit mode instead")()}return!1}},{key:"use64bitPositions",value:function use64bitPositions(){return this.props.fp64||this.props.coordinateSystem===p.LNGLAT}},{key:"screenToDevicePixels",value:function screenToDevicePixels(e){return i.deprecated("screenToDevicePixels","DeckGL prop useDevicePixels for conversion")(),e*("undefined"!=typeof window?window.devicePixelRatio:1)}},{key:"onHover",value:function onHover(e){return!!this.props.onHover&&this.props.onHover(e,this.context.pickingEvent)}},{key:"onClick",value:function onClick(e){return!!this.props.onClick&&this.props.onClick(e,this.context.pickingEvent)}},{key:"nullPickingColor",value:function nullPickingColor(){return[0,0,0]}},{key:"encodePickingColor",value:function encodePickingColor(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return assert(e<16777215,"index out of picking color range"),t[0]=e+1&255,t[1]=e+1>>8&255,t[2]=e+1>>8>>8&255,t}},{key:"decodePickingColor",value:function decodePickingColor(e){assert(e instanceof Uint8Array);var t=layer_slicedToArray(e,3);return t[0]+256*t[1]+65536*t[2]-1}},{key:"initializeState",value:function initializeState(){throw new Error("Layer ".concat(this," has not defined initializeState"))}},{key:"shouldUpdateState",value:function shouldUpdateState(e){e.oldProps,e.props,e.context;return e.changeFlags.propsOrDataChanged}},{key:"updateState",value:function updateState(e){e.oldProps,e.props,e.context;var t=e.changeFlags,n=this.getAttributeManager();t.dataChanged&&n&&n.invalidateAll()}},{key:"finalizeState",value:function finalizeState(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.getModels()[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){r.value.delete()}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}var o=this.getAttributeManager();o&&o.finalize()}},{key:"draw",value:function draw(e){var t=!0,n=!1,r=void 0;try{for(var i,o=this.getModels()[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){i.value.draw(e)}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}}},{key:"getPickingInfo",value:function getPickingInfo(e){var t=e.info,n=(e.mode,t.index);return n>=0&&Array.isArray(this.props.data)&&(t.object=this.props.data[n]),t}},{key:"invalidateAttribute",value:function invalidateAttribute(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=this.getAttributeManager();n&&("all"===e?(i.log(1,"updateTriggers invalidating all attributes: ".concat(t))(),n.invalidateAll()):(i.log(1,"updateTriggers invalidating attribute ".concat(e,": ").concat(t))(),n.invalidate(e)))}},{key:"updateAttributes",value:function updateAttributes(e){var t=this.getAttributeManager();if(t){var n=this.getNumInstances(e);t.update({data:e.data,numInstances:n,props:e,transitions:e.transitions,buffers:e,context:this,ignoreUnknownAttributes:!0});var r=this.getSingleModel();if(r){var i=t.getChangedAttributes({clearChangedFlags:!0});r.setAttributes(i)}}}},{key:"updateTransition",value:function updateTransition(){var e=this.getAttributeManager();e&&e.updateTransition()}},{key:"calculateInstancePickingColors",value:function calculateInstancePickingColors(e,t){var n=t.numInstances,r=e.value,i=e.size;if(1!==r[0]){var o=Ee.length/i;if(o<n){var a=new Uint8ClampedArray(n*i);a.set(Ee);for(var s=[],l=o;l<n;l++)this.encodePickingColor(l,s),a[l*i+0]=s[0],a[l*i+1]=s[1],a[l*i+2]=s[2];Ee=a}r.set(n<o?Ee.subarray(0,n*i):Ee)}}},{key:"_clearInstancePickingColor",value:function _clearInstancePickingColor(e){var t=this.getAttributeManager().attributes.instancePickingColors,n=t.value,r=t.size,i=this.decodePickingColor(e);n[i*r+0]=0,n[i*r+1]=0,n[i*r+2]=0,t.update({value:n})}},{key:"_clearPickingColor",value:function _clearPickingColor(e){for(var t=this.getAttributeManager().attributes.pickingColors,n=t.value,r=0;r<n.length;r+=3)n[r+0]===e[0]&&n[r+1]===e[1]&&n[r+2]===e[2]&&(n[r+0]=0,n[r+1]=0,n[r+2]=0);t.update({value:n})}},{key:"clearPickingColor",value:function clearPickingColor(e){this.getAttributeManager().attributes.pickingColors?this._clearPickingColor(e):this._clearInstancePickingColor(e)}},{key:"copyPickingColors",value:function copyPickingColors(){var e=this.getAttributeManager().attributes,t=e.pickingColors,n=e.instancePickingColors;return new Uint8ClampedArray((t||n).value)}},{key:"restorePickingColors",value:function restorePickingColors(e){var t=this.getAttributeManager().attributes,n=t.pickingColors,r=t.instancePickingColors;(n||r).update({value:e})}},{key:"getNumInstances",value:function getNumInstances(e){return void 0!==(e=e||this.props).numInstances?e.numInstances:this.state&&void 0!==this.state.numInstances?this.state.numInstances:count_count(this.props.data)}},{key:"_initialize",value:function _initialize(){this._initState(),this.initializeState(this.context),this.state.attributeManager=this.getAttributeManager(),this.setChangeFlags({dataChanged:!0,propsChanged:!0,viewportChanged:!0}),this._updateState();var e=this.getSingleModel();e&&(e.id=this.props.id,e.program.id="".concat(this.props.id,"-program"),e.geometry.id="".concat(this.props.id,"-geometry"))}},{key:"_update",value:function _update(){this.needsUpdate()&&this._updateState()}},{key:"_updateState",value:function _updateState(){var e=this._getUpdateParams();if(this.context.gl)this.updateState(e);else try{this.updateState(e)}catch(e){}this.isComposite?this._renderLayers(e):(this.setNeedsRedraw(),this.updateAttributes(this.props),this._updateBaseUniforms(),this.state.model&&this.state.model.setInstanceCount(this.getNumInstances())),this.clearChangeFlags(),this.internalState.resetOldProps()}},{key:"_finalize",value:function _finalize(){assert(this.internalState&&this.state),this.finalizeState(this.context),fe(this.id)}},{key:"drawLayer",value:function drawLayer(e){var t=this,n=e.moduleParameters,r=void 0===n?null:n,i=e.uniforms,a=void 0===i?{}:i,s=e.parameters,l=void 0===s?{}:s;a.picking_uActive||this.updateTransition(),r&&this.setModuleParameters(r);var u=this.context.animationProps;if(u){var c=!0,p=!1,h=void 0;try{for(var f,d=this.getModels()[Symbol.iterator]();!(c=(f=d.next()).done);c=!0){f.value._setAnimationProps(u)}}catch(e){p=!0,h=e}finally{try{c||null==d.return||d.return()}finally{if(p)throw h}}}var g=this.props.getPolygonOffset,m=g&&g(a)||[0,0];l.polygonOffset=m,Object(o.E)(this.context.gl,l,function(){t.draw({moduleParameters:r,uniforms:a,parameters:l,context:t.context})})}},{key:"pickLayer",value:function pickLayer(e){return this.getPickingInfo(e)}},{key:"getChangeFlags",value:function getChangeFlags(){return this.internalState.changeFlags}},{key:"setChangeFlags",value:function setChangeFlags(e){var t=this;this.internalState.changeFlags=this.internalState.changeFlags||{};var n=this.internalState.changeFlags;e.dataChanged&&!n.dataChanged&&(n.dataChanged=e.dataChanged,i.log(2,function(){return"dataChanged: ".concat(e.dataChanged," in ").concat(t.id)})()),e.updateTriggersChanged&&!n.updateTriggersChanged&&(n.updateTriggersChanged=n.updateTriggersChanged&&e.updateTriggersChanged?Object.assign({},e.updateTriggersChanged,n.updateTriggersChanged):e.updateTriggersChanged||n.updateTriggersChanged,i.log(2,function(){return"updateTriggersChanged: "+"".concat(Object.keys(e.updateTriggersChanged).join(", ")," in ").concat(t.id)})()),e.propsChanged&&!n.propsChanged&&(n.propsChanged=e.propsChanged,i.log(2,function(){return"propsChanged: ".concat(e.propsChanged," in ").concat(t.id)})()),e.viewportChanged&&!n.viewportChanged&&(n.viewportChanged=e.viewportChanged,i.log(3,function(){return"viewportChanged: ".concat(e.viewportChanged," in ").concat(t.id)})()),e.stateChanged&&!n.stateChanged&&(n.stateChanged=e.stateChanged,i.log(2,function(){return"stateChanged: ".concat(e.stateChanged," in ").concat(t.id)})());var r=e.dataChanged||e.updateTriggersChanged||e.propsChanged;n.propsOrDataChanged=n.propsOrDataChanged||r,n.somethingChanged=n.somethingChanged||r||e.viewportChanged||e.stateChanged}},{key:"clearChangeFlags",value:function clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}},{key:"printChangeFlags",value:function printChangeFlags(){var e=this.internalState.changeFlags;return"".concat(e.dataChanged?"data ":"").concat(e.propsChanged?"props ":"").concat(e.updateTriggersChanged?"triggers ":"").concat(e.viewportChanged?"viewport":"")}},{key:"diffProps",value:function diffProps(e,t){var n=props_diffProps(e,t);if(n.updateTriggersChanged)for(var r in n.updateTriggersChanged)n.updateTriggersChanged[r]&&this._activeUpdateTrigger(r);return this.setChangeFlags(n)}},{key:"validateProps",value:function validateProps(){props_validateProps(this.props)}},{key:"setModuleParameters",value:function setModuleParameters(e){var t=!0,n=!1,r=void 0;try{for(var i,o=this.getModels()[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){i.value.updateModuleSettings(e)}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}}},{key:"_getUpdateParams",value:function _getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}},{key:"_getNeedsRedraw",value:function _getNeedsRedraw(e){if(!this.internalState)return!1;var t=!1;t=t||this.internalState.needsRedraw&&this.id,this.internalState.needsRedraw=this.internalState.needsRedraw&&!e;var n=this.getAttributeManager(),r=n&&n.getNeedsRedraw({clearRedrawFlags:e}),i=this._modelNeedsRedraw(e);return t=t||r||i}},{key:"_modelNeedsRedraw",value:function _modelNeedsRedraw(e){var t=!1,n=!0,r=!1,i=void 0;try{for(var o,a=this.getModels()[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value,l=s.getNeedsRedraw({clearRedrawFlags:e});l&&"string"!=typeof l&&(l="model ".concat(s.id)),t=t||l}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t}},{key:"_getAttributeManager",value:function _getAttributeManager(){return new ie(this.context.gl,{id:this.props.id,stats:this.context.stats})}},{key:"_initState",value:function _initState(){assert(!this.internalState&&!this.state);var e=this._getAttributeManager();e&&e.addInstanced({instancePickingColors:{type:K.a.UNSIGNED_BYTE,size:3,update:this.calculateInstancePickingColors}}),this.internalState=new we({attributeManager:e,layer:this}),this.state={},this.state.attributeManager=e,this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props)}},{key:"_transferState",value:function _transferState(e){var t=e.state,n=e.internalState;if(assert(t&&n),this!==e){this.internalState=n,this.internalState.component=this,this.state=t,t.layer=this,this.internalState.setAsyncProps(this.props);var r=!0,i=!1,o=void 0;try{for(var a,s=this.getModels()[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){a.value.userData.layer=this}}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}this.diffProps(this.props,this.internalState.getOldProps())}}},{key:"_onAsyncPropUpdated",value:function _onAsyncPropUpdated(){this.diffProps(this.props,this.internalState.getOldProps()),this.setLayerNeedsUpdate()}},{key:"_activeUpdateTrigger",value:function _activeUpdateTrigger(e){this.invalidateAttribute(e)}},{key:"_updateBaseUniforms",value:function _updateBaseUniforms(){var e=this,t={opacity:"function"==typeof this.props.opacity?function(t){return Math.pow(e.props.opacity(t),1/2.2)}:Math.pow(this.props.opacity,1/2.2)},n=!0,r=!1,i=void 0;try{for(var o,a=this.getModels()[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){o.value.setUniforms(t)}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}}},{key:"setUniforms",value:function setUniforms(e){var t=!0,n=!1,r=void 0;try{for(var o,a=this.getModels()[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){o.value.setUniforms(e)}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}this.setNeedsRedraw(),i.deprecated("layer.setUniforms","model.setUniforms")()}},{key:"is64bitEnabled",value:function is64bitEnabled(){return i.deprecated("is64bitEnabled","use64bitProjection")(),this.use64bitProjection()}}])&&layer_defineProperties(t.prototype,n),r&&layer_defineProperties(t,r),Layer}();Ce.layerName="Layer",Ce.defaultProps=Pe;var ke=2,Te=0,Ae=function getPixelRatio(e){var t=e.useDevicePixels;return assert("boolean"==typeof t,"Invalid useDevicePixels"),t&&"undefined"!=typeof window?window.devicePixelRatio:1},Oe=function getGLViewport(e,t){var n=t.viewport,r=t.pixelRatio,i=e.canvas?e.canvas.clientHeight||e.canvas.height:100,o=n;return[o.x*r,(i-o.y-o.height)*r,o.width*r,o.height*r]};function clearCanvas(e,t){t.useDevicePixels;var n=e.drawingBufferWidth,r=e.drawingBufferHeight;Object(o.E)(e,{viewport:[0,0,n,r]},function(){e.clear(K.a.COLOR_BUFFER_BIT|K.a.DEPTH_BUFFER_BIT)})}function draw_layers_drawLayers(e,t){var n=t.layers,r=t.viewports,i=t.views,o=t.onViewportActive,a=t.useDevicePixels,s=t.drawPickingColors,l=void 0!==s&&s,u=t.deviceRect,c=void 0===u?null:u,p=t.parameters,h=void 0===p?{}:p,f=t.layerFilter,d=void 0===f?null:f,g=t.pass,m=void 0===g?"draw":g,y=t.redrawReason,v=void 0===y?"":y,_=t.stats;t.customRender||clearCanvas(e,{useDevicePixels:a}),r.forEach(function(t,r){var s=getViewportFromDescriptor(t),u=i&&i[s.id];o(s),drawLayersInViewport(e,{layers:n,viewport:s,view:u,useDevicePixels:a,drawPickingColors:l,deviceRect:c,parameters:h,layerFilter:d,pass:m,redrawReason:v,stats:_})})}function drawPickingBuffer(e,t){var n=t.layers,r=t.viewports,i=t.onViewportActive,a=t.useDevicePixels,s=t.pickingFBO,l=t.deviceRect,u=l.x,c=l.y,p=l.width,h=l.height,f=t.layerFilter,d=void 0===f?null:f,g=t.redrawReason,m=void 0===g?"":g;return Object(o.E)(e,{framebuffer:s,scissorTest:!0,scissor:[u,c,p,h],clearColor:[0,0,0,0]},function(){draw_layers_drawLayers(e,{layers:n,viewports:r,onViewportActive:i,useDevicePixels:a,drawPickingColors:!0,layerFilter:d,pass:"picking",redrawReason:m,parameters:{blend:!0,blendFunc:[e.ONE,e.ZERO,e.CONSTANT_ALPHA,e.ZERO],blendEquation:e.FUNC_ADD,blendColor:[0,0,0,0]}})})}function drawLayersInViewport(e,t){var n=t.layers,r=t.viewport,i=t.view,a=t.useDevicePixels,s=t.drawPickingColors,l=void 0!==s&&s,u=(t.deviceRect,t.parameters),c=void 0===u?{}:u,p=t.layerFilter,h=t.pass,f=void 0===h?"draw":h,d=t.redrawReason,g=void 0===d?"":d,m=t.stats,y=Ae({useDevicePixels:a}),v=Oe(e,{viewport:r,pixelRatio:y});if(i&&i.props.clear){var _=!0===i.props.clear?{color:!0,depth:!0}:i.props.clear;Object(o.E)(e,{scissorTest:!0,scissor:v},function(){return Object(o.q)(e,_)})}var b={totalCount:n.length,visibleCount:0,compositeCount:0,pickableCount:0};Object(o.C)(e,c||{}),n.forEach(function(t,n){var i=!t.isComposite&&t.props.visible;l&&(i=i&&t.props.pickable),i&&p&&(i=p({layer:t,viewport:r,isPicking:l})),i&&t.props.pickable&&b.pickableCount++,t.isComposite&&b.compositeCount++,i&&(b.visibleCount++,drawLayerInViewport({gl:e,layer:t,layerIndex:n,drawPickingColors:l,pixelRatio:y,glViewport:v,parameters:c}))}),Te++,logRenderStats({renderStats:b,pass:f,redrawReason:g,stats:m})}function drawLayerInViewport(e){e.gl;var t=e.layer,n=e.layerIndex,r=e.drawPickingColors,i=e.pixelRatio,o=e.glViewport,a=e.parameters,s=Object.assign(Object.create(t.props),{viewport:t.context.viewport,pickingActive:r?1:0,devicePixelRatio:i}),l=Object.assign({},t.context.uniforms,{layerIndex:n}),u=Object.assign({},t.props.parameters||{},a);Object.assign(u,{viewport:o}),r?Object.assign(u,{blendColor:[0,0,0,(n+1)/255]}):Object.assign(s,getObjectHighlightParameters(t)),t.drawLayer({moduleParameters:s,uniforms:l,parameters:u})}function logRenderStats(e){var t=e.renderStats,n=e.pass,r=e.redrawReason,o=e.stats;if(i.priority>=ke){var a=t.totalCount,s=t.visibleCount,l=t.compositeCount,u=t.pickableCount,c=a-l-s,p="";p+="RENDER #".concat(Te," ").concat(s," (of ").concat(a," layers) to ").concat(n," because ").concat(r," "),i.priority>ke&&(p+="(".concat(c," hidden, ").concat(l," composite ").concat(u," pickable)")),i.log(ke,p)(),o&&o.increment("redraw layers",s)}}function getViewportFromDescriptor(e){return e.viewport?e.viewport:e}function getObjectHighlightParameters(e){var t=e.props,n=t.highlightedObjectIndex,r=t.highlightColor,i={pickingHighlightColor:[r[0],r[1],r[2],r[3]||255]};return Number.isInteger(n)&&(i.pickingSelectedColor=n>=0?e.encodePickingColor(n):null),i}var Ie={pickedColor:null,pickedLayer:null,pickedObjectIndex:-1};function pick_layers_pickObject(e,t){for(var n=t.layers,r=t.viewports,i=t.x,o=t.y,a=t.radius,s=t.layerFilter,l=t.depth,u=void 0===l?1:l,c=t.mode,p=t.onViewportActive,h=t.pickingFBO,f=t.lastPickedInfo,d=t.useDevicePixels,g=Ae({useDevicePixels:d}),m=Math.round(i*g),y=Math.round(e.canvas.height-o*g),v=Math.round(a*g),_=getPickingRect({deviceX:m,deviceY:y,deviceRadius:v,deviceWidth:h.width,deviceHeight:h.height}),b=[],x={},w=0;w<u;w++){var S=_&&drawAndSamplePickingBuffer(e,{layers:n,viewports:r,onViewportActive:p,useDevicePixels:d,pickingFBO:h,deviceRect:_,layerFilter:s,redrawReason:c}),E=S&&getClosestFromPickingBuffer(e,{pickedColors:S,layers:n,deviceX:m,deviceY:y,deviceRadius:v,deviceRect:_})||Ie;if(E.pickedColor&&w+1<u){var P=E.pickedColor[3]-1;x[P]||(x[P]=n[P].copyPickingColors()),n[P].clearPickingColor(E.pickedColor)}var C=processPickInfo({pickInfo:E,lastPickedInfo:f,mode:c,layers:n,viewports:r,x:i,y:o,deviceX:m,deviceY:y,pixelRatio:g});if(C&&C.forEach(function(e){return b.push(e)}),!E.pickedColor)break}return Object.keys(x).forEach(function(e){return n[e].restorePickingColors(x[e])}),b}function pickVisibleObjects(e,t){var n=t.layers,r=t.viewports,i=t.x,o=t.y,a=t.width,s=t.height,l=t.mode,u=t.layerFilter,c=t.onViewportActive,p=t.pickingFBO,h=t.useDevicePixels,f=Ae({useDevicePixels:h}),d=Math.round(i*f),g=Math.round(e.canvas.height-o*f),m=Math.round((i+a)*f),y=Math.round(e.canvas.height-(o+s)*f),v=getUniquesFromPickingBuffer(e,{pickedColors:drawAndSamplePickingBuffer(e,{layers:n,viewports:r,onViewportActive:c,pickingFBO:p,useDevicePixels:h,deviceRect:{x:d,y:y,width:m-d,height:g-y},layerFilter:u,redrawReason:l}),layers:n}),_=new Map;return v.forEach(function(e){var t={color:e.pickedColor,layer:null,index:e.pickedObjectIndex,picked:!0,x:i,y:o,width:a,height:s,pixelRatio:f};t=getLayerPickingInfo({layer:e.pickedLayer,info:t,mode:l}),_.has(t.object)||_.set(t.object,t)}),Array.from(_.values())}function drawAndSamplePickingBuffer(e,t){var n=t.layers,r=t.viewports,i=t.onViewportActive,o=t.useDevicePixels,a=t.pickingFBO,s=t.deviceRect,l=t.layerFilter,u=t.redrawReason;if(assert(s),assert(Number.isFinite(s.width)&&s.width>0,"`width` must be > 0"),assert(Number.isFinite(s.height)&&s.height>0,"`height` must be > 0"),n.filter(function(e){return e.isPickable()}).length<1)return null;drawPickingBuffer(e,{layers:n,viewports:r,onViewportActive:i,useDevicePixels:o,pickingFBO:a,deviceRect:s,layerFilter:l,redrawReason:u});var c=s.x,p=s.y,h=s.width,f=s.height,d=new Uint8Array(h*f*4);return a.readPixels({x:c,y:p,width:h,height:f,pixelArray:d}),d}function getPickingRect(e){var t=e.deviceX,n=e.deviceY,r=e.deviceRadius,i=e.deviceWidth,o=e.deviceHeight;if(!(t>=0&&n>=0&&t<i&&n<o))return null;var a=Math.max(0,t-r),s=Math.max(0,n-r);return{x:a,y:s,width:Math.min(i,t+r)-a+1,height:Math.min(o,n+r)-s+1}}function processPickInfo(e){var t=e.pickInfo,n=e.lastPickedInfo,r=e.mode,i=e.layers,o=e.viewports,a=e.x,s=e.y,l=e.deviceX,u=e.deviceY,c=e.pixelRatio,p=t.pickedColor,h=t.pickedLayer,f=t.pickedObjectIndex,d=h?[h]:[];if("hover"===r){var g=n.index,m=n.layerId,y=h&&h.props.id;if(y!==m||f!==g){if(y!==m){var v=i.find(function(e){return e.props.id===m});v&&d.unshift(v)}n.layerId=y,n.index=f,n.info=null}}var _={viewports:o}.viewports[0],b=_&&_.unproject([a,s]),x={color:null,layer:null,index:-1,picked:!1,x:a,y:s,pixel:[a,s],coordinate:b,lngLat:b,devicePixel:[l,u],pixelRatio:c},w=new Map;return d.forEach(function(e){var t=Object.assign({},x);e===h&&(t.color=p,t.index=f,t.picked=!0),t=getLayerPickingInfo({layer:e,info:t,mode:r}),e===h&&"hover"===r&&(n.info=t),t&&w.set(t.layer.id,t);var i=e.props.autoHighlight&&h===e?p:null;e.setModuleParameters({pickingSelectedColor:i})}),callLayerPickingCallbacks(w,r)}function callLayerPickingCallbacks(e,t){var n=[];return e.forEach(function(e){var r=!1;switch(t){case"click":r=e.layer.onClick(e);break;case"hover":r=e.layer.onHover(e);break;case"query":break;default:throw new Error("unknown pick type")}r||n.push(e)}),n}function getClosestFromPickingBuffer(e,t){var n=t.pickedColors,r=t.layers,o=t.deviceX,a=t.deviceY,s=t.deviceRadius,l=t.deviceRect;assert(n);for(var u=l.x,c=l.y,p=l.width,h=l.height,f=s*s,d=-1,g=0,m=0;m<h;m++){var y=m+c-a,v=y*y;if(v>f)g+=4*p;else for(var _=0;_<p;_++){if(n[g+3]-1>=0){var b=_+u-o,x=b*b+v;x<=f&&(f=x,d=g)}g+=4}}if(d>=0){var w=n[d+3]-1,S=n.slice(d,d+4),E=r[w];if(E){var P=E.decodePickingColor(S);return{pickedColor:S,pickedLayer:E,pickedObjectIndex:P}}i.error("Picked non-existent layer. Is picking buffer corrupt?")()}return Ie}function getUniquesFromPickingBuffer(e,t){var n=t.pickedColors,r=t.layers,o=new Map;if(n)for(var a=0;a<n.length;a+=4){var s=n[a+3]-1;if(s>=0){var l=n.slice(a,a+4),u=l.join(",");if(!o.has(u)){var c=r[s];c?o.set(u,{pickedColor:l,pickedLayer:c,pickedObjectIndex:c.decodePickingColor(l)}):i.error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(o.values())}function getLayerPickingInfo(e){for(var t=e.layer,n=e.info,r=e.mode;t&&n;){var i=n.layer||t;n.layer=t,n=t.pickLayer({info:n,mode:r,sourceLayer:i}),t=t.parent}return n}function flatten(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.filter,r=void 0===n?function(){return!0}:n,i=t.map,o=void 0===i?function(e){return e}:i,a=t.result,s=void 0===a?[]:a;return Array.isArray(e)?flattenArray(e,r,o,s):r(e)?[o(e)]:[]}function flattenArray(e,t,n,r){for(var i=-1;++i<e.length;){var o=e[i];Array.isArray(o)?flattenArray(o,t,n,r):t(o)&&r.push(n(o))}return r}function fillArray(e){for(var t=e.target,n=e.source,r=e.start,i=void 0===r?0:r,o=e.count,a=void 0===o?1:o,s=n.length,l=a*s,u=0,c=i;u<s;u++)t[c++]=n[u];for(;u<l;)u<l-u?(t.copyWithin(i+u,i,i+u),u*=2):(t.copyWithin(i+u,i,i+l-u),u=l);return t}var Re=n(3),Le=n(4),Me=n(43),je=n(64),De=function(){function Stats(e){var t=e.id;Object(Re.a)(this,Stats),this.id=t,this.time=Object(Me.a)(),this.counters={},Object.seal(this)}return Object(Le.a)(Stats,[{key:"addCounter",value:function addCounter(e){return this._getCounter(e),this}},{key:"bump",value:function bump(e){var t=this._getCounter(e);return t.call++,t.count++,this}},{key:"increment",value:function increment(e,t){var n=this._getCounter(e);return n.call++,n.count+=t,this}},{key:"addTimer",value:function addTimer(e){return this._getCounter(e).time=0,this}},{key:"addTime",value:function addTime(e,t){var n=this._getCounter(e);return n.time+=t,n.count++,this}},{key:"timeStart",value:function timeStart(e,t){this._getCounter(e)._startTime=Object(Me.a)()}},{key:"timeEnd",value:function timeEnd(e,t){var n=this._getCounter(e);this.addTime(e,Object(Me.a)()-n._startTime)}},{key:"reset",value:function reset(){for(var e in this.time=Object(Me.a)(),this.counters){var t=this.counters[e];t.count=0,t.time=0}return this}},{key:"hasTimeElapsed",value:function hasTimeElapsed(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Object(Me.a)()-this.time>1e3}},{key:"getStats",value:function getStats(){var e=(Object(Me.a)()-this.time)/1e3,t={};for(var n in this.counters){var r=this.counters[n];t[r.title]={total:r.count,fps:Math.round(r.count/e)},r.time&&(t[r.title].totalTime=Object(je.b)(r.time),t[r.title].avgTime=Object(je.b)(r.time/r.count))}return t}},{key:"getStatsTable",value:function getStatsTable(){var e=this.getStats();for(var t in e)0===e[t].total&&delete e[t];return e}},{key:"getStatNames",value:function getStatNames(){return Object.keys(this.counters)}},{key:"get",value:function get(e){return this._getCounter(e).count}},{key:"getCount",value:function getCount(e){return this._getCounter(e).count}},{key:"getFPS",value:function getFPS(e){var t=this._getCounter(e),n=(Object(Me.a)()-this.time)/1e3;return Math.round(t.count/n)}},{key:"getTimeString",value:function getTimeString(){return"".concat(this.id,":").concat(Object(je.b)(this.time),"(").concat(this.count,")")}},{key:"oneSecondPassed",value:function oneSecondPassed(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;return this.hasTimeElapsed(e)}},{key:"_getCounter",value:function _getCounter(e){var t=this.counters[e];return t||(t={title:e,unit:"",timer:!1,count:0,time:0,totalTime:0,averageTime:0},this.counters[e]=t),t}},{key:"_incrementTimer",value:function _incrementTimer(e,t,n){e.count+=n,e.totalTime+=t,e.averageTime=e.totalTime/n}}]),Stats}();function math_utils_transformVector(e,t){if(!e)return null;var n=c.c([0,0,0,0],t,e),r=1/n[3];return c.a(n,n,[r,r,r,r]),n}var Fe=n(19),Ne=n(494),Be=n(106);function viewport_slicedToArray(e,t){return viewport_arrayWithHoles(e)||viewport_iterableToArrayLimit(e,t)||viewport_nonIterableRest()}function viewport_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function viewport_iterableToArrayLimit(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}function viewport_arrayWithHoles(e){if(Array.isArray(e))return e}function viewport_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function viewport_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ze=Math.PI/180,Ue=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],Ve=[0,0,0],Ge={pixelsPerMeter:[1,1,1],metersPerPixel:[1,1,1],pixelsPerDegree:[1,1,1],degreesPerPixel:[1,1,1]},We=function(){function Viewport(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};viewport_classCallCheck(this,Viewport);var t=e.id,n=void 0===t?null:t,r=e.x,i=void 0===r?0:r,o=e.y,a=void 0===o?0:o,s=e.width,l=void 0===s?1:s,u=e.height,c=void 0===u?1:u;this.id=n||this.constructor.displayName||"viewport",this.x=i,this.y=a,this.width=l||1,this.height=c||1,this._initViewMatrix(e),this._initProjectionMatrix(e),this._initPixelMatrices(),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this),this.getMatrices=this.getMatrices.bind(this)}var e,t,n;return e=Viewport,(t=[{key:"equals",value:function equals(e){return e instanceof Viewport&&(e.width===this.width&&e.height===this.height&&Object(Fe.e)(e.projectionMatrix,this.projectionMatrix)&&Object(Fe.e)(e.viewMatrix,this.viewMatrix))}},{key:"project",value:function project(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).topLeft,n=void 0===t||t,r=worldToPixels(this.projectPosition(e),this.pixelProjectionMatrix),i=viewport_slicedToArray(r,2),o=i[0],a=i[1],s=n?a:this.height-a;return 2===e.length?[o,s]:[o,s,r[2]]}},{key:"unproject",value:function unproject(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.topLeft,r=void 0===n||n,i=t.targetZ,o=viewport_slicedToArray(e,3),a=o[0],s=o[1],l=o[2],u=r?s:this.height-s,c=i&&i*this.distanceScales.pixelsPerMeter[2],p=pixelsToWorld([a,u,l],this.pixelUnprojectionMatrix,c),h=viewport_slicedToArray(this.unprojectPosition(p),3),f=h[0],d=h[1],g=h[2];return Number.isFinite(l)?[f,d,g]:Number.isFinite(i)?[f,d,i]:[f,d]}},{key:"projectPosition",value:function projectPosition(e){var t=viewport_slicedToArray(this.projectFlat(e),2);return[t[0],t[1],(e[2]||0)*this.distanceScales.pixelsPerMeter[2]]}},{key:"unprojectPosition",value:function unprojectPosition(e){var t=viewport_slicedToArray(this.unprojectFlat(e),2);return[t[0],t[1],(e[2]||0)*this.distanceScales.metersPerPixel[2]]}},{key:"projectFlat",value:function projectFlat(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return this.isGeospatial?lngLatToWorld(e,t):e}},{key:"unprojectFlat",value:function unprojectFlat(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return this.isGeospatial?worldToLngLat(e,t):e}},{key:"getDistanceScales",value:function getDistanceScales(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e?web_mercator_utils_getDistanceScales({longitude:e[0],latitude:e[1],scale:this.scale,highPrecision:!0}):this.distanceScales}},{key:"getMatrices",value:function getMatrices(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).modelMatrix,t=void 0===e?null:e,n=this.viewProjectionMatrix,r=this.pixelProjectionMatrix,i=this.pixelUnprojectionMatrix;return t&&(n=u.g([],this.viewProjectionMatrix,t),r=u.g([],this.pixelProjectionMatrix,t),i=u.e([],r)),Object.assign({modelViewProjectionMatrix:n,viewProjectionMatrix:this.viewProjectionMatrix,viewMatrix:this.viewMatrix,projectionMatrix:this.projectionMatrix,pixelProjectionMatrix:r,pixelUnprojectionMatrix:i,width:this.width,height:this.height,scale:this.scale})}},{key:"containsPixel",value:function containsPixel(e){var t=e.x,n=e.y,r=e.width,i=void 0===r?1:r,o=e.height,a=void 0===o?1:o;return t<this.x+this.width&&this.x<t+i&&n<this.y+this.height&&this.y<n+a}},{key:"getCameraPosition",value:function getCameraPosition(){return this.cameraPosition}},{key:"getCameraDirection",value:function getCameraDirection(){return this.cameraDirection}},{key:"getCameraUp",value:function getCameraUp(){return this.cameraUp}},{key:"_addMetersToLngLat",value:function _addMetersToLngLat(e,t){var n=viewport_slicedToArray(e,3),r=n[0],i=n[1],o=n[2],a=void 0===o?0:o,s=viewport_slicedToArray(this._metersToLngLatDelta(t),3),l=s[0],u=s[1],c=s[2],p=void 0===c?0:c;return 2===e.length?[r+l,i+u]:[r+l,i+u,a+p]}},{key:"_metersToLngLatDelta",value:function _metersToLngLatDelta(e){var t=viewport_slicedToArray(e,3),n=t[0],r=t[1],i=t[2],o=void 0===i?0:i;assert(Number.isFinite(n)&&Number.isFinite(r)&&Number.isFinite(o),"Illegal argument to Viewport");var a=this.distanceScales,s=a.pixelsPerMeter,l=a.degreesPerPixel,u=n*s[0]*l[0],c=r*s[1]*l[1];return 2===e.length?[u,c]:[u,c,o]}},{key:"_createProjectionMatrix",value:function _createProjectionMatrix(e){var t=e.orthographic,n=e.fovyRadians,r=e.aspect,i=e.focalDistance,o=e.near,a=e.far;return assert(Number.isFinite(n)),t?(new Ne.a).orthographic({fovy:n,aspect:r,focalDistance:i,near:o,far:a}):(new Ne.a).perspective({fovy:n,aspect:r,near:o,far:a})}},{key:"_initViewMatrix",value:function _initViewMatrix(e){var t=e.viewMatrix,n=void 0===t?Ue:t,r=e.longitude,i=void 0===r?null:r,o=e.latitude,a=void 0===o?null:o,s=e.zoom,l=void 0===s?null:s,c=e.position,p=void 0===c?null:c,h=e.modelMatrix,f=void 0===h?null:h,d=e.focalDistance,g=void 0===d?1:d,m=e.distanceScales,y=void 0===m?null:m;this.isGeospatial=Number.isFinite(a)&&Number.isFinite(i),this.zoom=l,Number.isFinite(this.zoom)||(this.zoom=this.isGeospatial?getMeterZoom({latitude:a})+Math.log2(g):0),this.scale=Math.pow(2,this.zoom),this.distanceScales=this.isGeospatial?web_mercator_utils_getDistanceScales({latitude:a,longitude:i,scale:this.scale}):y||Ge,this.focalDistance=g,this.distanceScales.metersPerPixel=new Be.a(this.distanceScales.metersPerPixel),this.distanceScales.pixelsPerMeter=new Be.a(this.distanceScales.pixelsPerMeter),this.position=Ve,this.meterOffset=Ve,p&&(this.position=p,this.modelMatrix=f,this.meterOffset=f?f.transformVector(p):p),this.isGeospatial?(this.longitude=i,this.latitude=a,this.center=this._getCenterInWorld({longitude:i,latitude:a}),this.viewMatrixUncentered=u.n([],n,[1,-1,1]),this.viewMatrix=(new Ne.a).multiplyRight(this.viewMatrixUncentered).translate(new Be.a(this.center||Ve).negate())):(this.center=p,this.viewMatrixUncentered=n,this.viewMatrix=n)}},{key:"_getCenterInWorld",value:function _getCenterInWorld(e){var t=e.longitude,n=e.latitude,r=this.meterOffset,i=this.scale,o=this.distanceScales,a=this.projectFlat([t,n],i),s=new Be.a(a[0],a[1],0);if(r){var l=new Be.a(r).scale(o.pixelsPerMeter);s.add(l)}return s}},{key:"_initProjectionMatrix",value:function _initProjectionMatrix(e){var t=e.projectionMatrix,n=void 0===t?null:t,r=e.orthographic,i=void 0!==r&&r,o=e.fovyRadians,a=e.fovyDegrees,s=e.fovy,l=e.near,u=void 0===l?.1:l,c=e.far,p=void 0===c?1e3:c,h=e.focalDistance,f=void 0===h?1:h,d=e.orthographicFocalDistance,g=o||(a||s||75)*ze;this.projectionMatrix=n||this._createProjectionMatrix({orthographic:i,fovyRadians:g,aspect:this.width/this.height,focalDistance:d||f,near:u,far:p})}},{key:"_initPixelMatrices",value:function _initPixelMatrices(){var e=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];u.g(e,e,this.projectionMatrix),u.g(e,e,this.viewMatrix),this.viewProjectionMatrix=e,this.viewMatrixInverse=u.e([],this.viewMatrix)||this.viewMatrix;var t,n,r,o=(t={viewMatrix:this.viewMatrix,viewMatrixInverse:this.viewMatrixInverse},n=t.viewMatrix,{eye:[(r=t.viewMatrixInverse)[12],r[13],r[14]],direction:[n[2],n[6],n[10]],up:[n[1],n[5],n[9]]}),a=o.eye,s=o.direction,l=o.up;this.cameraPosition=a,this.cameraDirection=s,this.cameraUp=l;var c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],p=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];u.n(c,c,[this.width/2,-this.height/2,1]),u.o(c,c,[1,-1,0]),u.g(p,c,this.viewProjectionMatrix),this.pixelProjectionMatrix=p,this.viewportMatrix=c,this.pixelUnprojectionMatrix=u.e([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||i.warn("Pixel project matrix not invertible")()}}])&&viewport_defineProperties(e.prototype,t),n&&viewport_defineProperties(e,n),Viewport}();function layer_manager_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function layer_manager_iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function layer_manager_arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function layer_manager_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function layer_manager_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}We.displayName="Viewport";var qe=Object.seal({layerManager:null,gl:null,useDevicePixels:!0,stats:null,shaderCache:null,pickingFBO:null,pickingEvent:null,lastPickedInfo:null,animationProps:null,userData:{}}),He=function layerName(e){return e instanceof Ce?"".concat(e):e?"invalid":"null"},Xe=function(){function LayerManager(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.stats,r=t.viewport,i=void 0===r?null:r;layer_manager_classCallCheck(this,LayerManager),this.lastRenderedLayers=[],this.layers=[],this.context=Object.assign({},qe,{layerManager:this,gl:e,shaderCache:e&&new o.o({gl:e,_cachePrograms:!0}),stats:n||new De({id:"deck.gl"}),lastPickedInfo:{index:-1,layerId:null,info:null},viewport:i||new We({id:"DEFAULT-INITIAL-VIEWPORT"})}),this.layerFilter=null,this.drawPickingColors=!1,this._needsRedraw="Initial render",this._needsUpdate=!1,this._debug=!1,this._activateViewport=this._activateViewport.bind(this),this._initSeer=this._initSeer.bind(this),this._editSeer=this._editSeer.bind(this),Object.seal(this),ce(this._initSeer),ue(this._editSeer)}var e,t,n;return e=LayerManager,(t=[{key:"finalize",value:function finalize(){H.a.removeListener(this._initSeer),H.a.removeListener(this._editSeer)}},{key:"needsRedraw",value:function needsRedraw(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).clearRedrawFlags,t=void 0===e||e;return this._checkIfNeedsRedraw(t)}},{key:"needsUpdate",value:function needsUpdate(){return this._needsUpdate}},{key:"setNeedsRedraw",value:function setNeedsRedraw(e){this._needsRedraw=this._needsRedraw||e}},{key:"setNeedsUpdate",value:function setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e}},{key:"getLayers",value:function getLayers(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).layerIds,t=void 0===e?null:e;return t?this.layers.filter(function(e){return t.find(function(t){return 0===e.id.indexOf(t)})}):this.layers}},{key:"setProps",value:function setProps(e){"debug"in e&&(this._debug=e.debug),"userData"in e&&(this.context.userData=e.userData),"useDevicePixels"in e&&(this.context.useDevicePixels=e.useDevicePixels),"layers"in e&&this.setLayers(e.layers),"layerFilter"in e&&this.layerFilter!==e.layerFilter&&(this.layerFilter=e.layerFilter,this.setNeedsRedraw("layerFilter changed")),"drawPickingColors"in e&&e.drawPickingColors!==this.drawPickingColors&&(this.drawPickingColors=e.drawPickingColors,this.setNeedsRedraw("drawPickingColors changed"))}},{key:"setLayers",value:function setLayers(e){if(e===this.lastRenderedLayers)return i.log(3,"Ignoring layer update due to layer array not changed")(),this;this.lastRenderedLayers=e,e=flatten(e,{filter:Boolean});var t=!0,n=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){o.value.context=this.context}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}var s=this._updateLayers({oldLayers:this.layers,newLayers:e}),l=s.error,u=s.generatedLayers;if(this.layers=u,l)throw l;return this}},{key:"updateLayers",value:function updateLayers(){var e,t=this.needsUpdate();t&&(this.setNeedsRedraw("updating layers: ".concat(t)),this.setLayers(layer_manager_arrayWithoutHoles(e=this.lastRenderedLayers)||layer_manager_iterableToArray(e)||layer_manager_nonIterableSpread()))}},{key:"drawLayers",value:function drawLayers(e){var t=e.pass,n=void 0===t?"render to screen":t,r=e.viewports,i=e.views,o=e.redrawReason,a=void 0===o?"unknown reason":o,s=e.customRender,l=void 0!==s&&s,u=this.drawPickingColors,c=this.context,p=c.gl,h=c.useDevicePixels;draw_layers_drawLayers(p,{layers:this.layers,viewports:r,views:i,onViewportActive:this._activateViewport,useDevicePixels:h,drawPickingColors:u,pass:n,layerFilter:this.layerFilter,redrawReason:a,customRender:l})}},{key:"getLastPickedObject",value:function getLastPickedObject(e){var t=e.x,n=e.y,r=e.viewports,i=this.context.lastPickedInfo.info,o=i&&i.layer&&i.layer.id,a=o?this.layers.find(function(e){return e.id===o}):null,s=r[0]&&r[0].unproject([t,n]),l={x:t,y:n,coordinate:s,lngLat:s,layer:a};return a?Object.assign({},i,l):Object.assign(l,{color:null,object:null,index:-1})}},{key:"pickObject",value:function pickObject(e){var t=e.x,n=e.y,r=e.mode,i=e.radius,o=void 0===i?0:i,a=e.layerIds,s=e.viewports,l=e.depth,u=void 0===l?1:l,c=e.event,p=void 0===c?null:c,h=this.context,f=h.gl,d=h.useDevicePixels;this.context.pickingEvent=p;var g=pick_layers_pickObject(f,{x:t,y:n,radius:o,layers:this.getLayers({layerIds:a}),mode:r,layerFilter:this.layerFilter,depth:u,viewports:s,onViewportActive:this._activateViewport,pickingFBO:this._getPickingBuffer(),lastPickedInfo:this.context.lastPickedInfo,useDevicePixels:d});return this.context.pickingEvent=null,g}},{key:"pickObjects",value:function pickObjects(e){var t=e.x,n=e.y,r=e.width,i=e.height,o=e.layerIds,a=e.viewports,s=this.context,l=s.gl,u=s.useDevicePixels;return pickVisibleObjects(l,{x:t,y:n,width:r,height:i,layers:this.getLayers({layerIds:o}),layerFilter:this.layerFilter,mode:"pickObjects",viewports:a,onViewportActive:this._activateViewport,pickingFBO:this._getPickingBuffer(),useDevicePixels:u})}},{key:"_checkIfNeedsRedraw",value:function _checkIfNeedsRedraw(e){var t=this._needsRedraw;e&&(this._needsRedraw=!1);var n=!0,r=!1,i=void 0;try{for(var o,a=this.layers[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value.getNeedsRedraw({clearRedrawFlags:e});t=t||s}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t}},{key:"_activateViewport",value:function _activateViewport(e){var t=this.context.viewport;if(!t||!e.equals(t)){i.log(4,"Viewport changed",e)(),this.context.viewport=e;var n=!0,r=!1,o=void 0;try{for(var a,s=this.layers[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var l=a.value;l.setChangeFlags({viewportChanged:"Viewport changed"}),this._updateLayer(l)}}catch(e){r=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}}return assert(this.context.viewport,"LayerManager: viewport not set"),this}},{key:"_getPickingBuffer",value:function _getPickingBuffer(){var e=this.context.gl;return this.context.pickingFBO=this.context.pickingFBO||new o.f(e),this.context.pickingFBO.resize({width:e.canvas.width,height:e.canvas.height}),this.context.pickingFBO}},{key:"_updateLayers",value:function _updateLayers(e){var t=e.oldLayers,n=e.newLayers,r={},o=!0,a=!1,s=void 0;try{for(var l,u=t[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value;r[c.id]?i.warn("Multiple old layers with same id ".concat(He(c)))():r[c.id]=c}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}var p=[],h=this._updateSublayersRecursively({newLayers:n,oldLayerMap:r,generatedLayers:p}),f=this._finalizeOldLayers(r);return this._needsUpdate=!1,{error:h||f,generatedLayers:p}}},{key:"_updateSublayersRecursively",value:function _updateSublayersRecursively(e){var t=e.newLayers,n=e.oldLayerMap,r=e.generatedLayers,o=null,a=!0,s=!1,l=void 0;try{for(var u,c=t[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var p=u.value;p.context=this.context;var h=n[p.id];null===h&&i.warn("Multiple new layers with same id ".concat(He(p)))(),n[p.id]=null;var f=null;try{this._debug&&h!==p&&p.validateProps(),h?(this._transferLayerState(h,p),this._updateLayer(p),he(p)):(this._initializeLayer(p),pe(p)),r.push(p),f=p.isComposite&&p.getSubLayers()}catch(e){i.warn("error during matching of ".concat(He(p)),e)(),o=o||e}f&&this._updateSublayersRecursively({newLayers:f,oldLayerMap:n,generatedLayers:r})}}catch(e){s=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(s)throw l}}return o}},{key:"_finalizeOldLayers",value:function _finalizeOldLayers(e){var t=null;for(var n in e){var r=e[n];r&&(t=t||this._finalizeLayer(r))}return t}},{key:"_initializeLayer",value:function _initializeLayer(e){i.log(2,"initializing ".concat(He(e)))();var t=null;try{e._initialize(),e.lifecycle=me.INITIALIZED}catch(n){i.warn("error while initializing ".concat(He(e),"\n"),n)(),t=t||n}e.internalState.layer=e;var n=!0,r=!1,o=void 0;try{for(var a,s=e.getModels()[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){a.value.userData.layer=e}}catch(e){r=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}return t}},{key:"_transferLayerState",value:function _transferLayerState(e,t){t._transferState(e),t.lifecycle=me.MATCHED,t!==e?(i.log(4,"matched ".concat(He(t)),e,"->",t)(),e.lifecycle=me.AWAITING_GC):i.log(4,"Matching layer is unchanged ".concat(t.id))()}},{key:"_updateLayer",value:function _updateLayer(e){i.log(4,"updating ".concat(e," because: ").concat(e.printChangeFlags()))();var t=null;try{e._update()}catch(n){i.warn("error during update of ".concat(He(e)),n)(),t=n}return t}},{key:"_finalizeLayer",value:function _finalizeLayer(e){assert(e.lifecycle!==me.AWAITING_FINALIZATION),e.lifecycle=me.AWAITING_FINALIZATION;var t=null;this.setNeedsRedraw("finalized ".concat(He(e)));try{e._finalize()}catch(n){i.warn("error during finalization of ".concat(He(e)),n)(),t=n}return e.lifecycle=me.FINALIZED,i.log(2,"finalizing ".concat(He(e)))(),t}},{key:"_initSeer",value:function _initSeer(){this.layers.forEach(function(e){pe(e),he(e)})}},{key:"_editSeer",value:function _editSeer(e){if("edit"===e.type&&"props"===e.valuePath[0]){se(e.itemKey,e.valuePath.slice(1),e.value);var t=this.layers.map(function(e){return new e.constructor(e.props)});this.updateLayers({newLayers:t})}}}])&&layer_manager_defineProperties(e.prototype,t),n&&layer_manager_defineProperties(e,n),LayerManager}();function deepEqual(e,t){return e===t||Object.keys(e).every(function(n){return Array.isArray(e[n])&&Array.isArray(t[n])?deepEqual(e[n],t[n]):e[n]===t[n]})}function positions_typeof(e){return(positions_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Ke=/([0-9]+\.?[0-9]*)(%|px)/;function parsePosition(e){switch(positions_typeof(e)){case"number":return{position:e,relative:!1};case"string":var t=e.match(Ke);if(t&&t.length>=3){var n="%"===t[2],r=parseFloat(t[1]);return{position:n?r/100:r,relative:n}}default:throw new Error("Could not parse position string ".concat(e))}}function positions_getPosition(e,t){return e.relative?Math.round(e.position*t):e.position}function view_typeof(e){return(view_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function view_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function view_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ze=function(){function View(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};view_classCallCheck(this,View);var t=e.id,n=void 0===t?null:t,r=e.x,i=void 0===r?0:r,o=e.y,a=void 0===o?0:o,s=e.width,l=void 0===s?"100%":s,u=e.height,c=void 0===u?"100%":u,p=e.projectionMatrix,h=void 0===p?null:p,f=e.fovy,d=void 0===f?75:f,g=e.near,m=void 0===g?.1:g,y=e.far,v=void 0===y?1e3:y,_=e.modelMatrix,b=void 0===_?null:_,x=e.viewportInstance,w=void 0===x?null:x,S=e.type,E=void 0===S?We:S;assert(!w||w instanceof We),this.viewportInstance=w,this.id=n||this.constructor.displayName||"view",this.type=E,this.props=Object.assign({},e,{projectionMatrix:h,fovy:d,near:m,far:v,modelMatrix:b}),this._parseDimensions({x:i,y:a,width:l,height:c}),this.equals=this.equals.bind(this),Object.seal(this)}var e,t,n;return e=View,(t=[{key:"equals",value:function equals(e){return this===e||(this.viewportInstance?e.viewportInstance&&this.viewportInstance.equals(e.viewportInstance):deepEqual(this.props,e.props))}},{key:"makeViewport",value:function makeViewport(e){var t=e.width,n=e.height,r=e.viewState;if(this.viewportInstance)return this.viewportInstance;r=this.filterViewState(r);var i=this.getDimensions({width:t,height:n}),o=Object.assign({viewState:r},r,this.props,i);return this._getViewport(o)}},{key:"getViewStateId",value:function getViewStateId(){switch(view_typeof(this.props.viewState)){case"string":return this.props.viewState;case"object":return this.props.viewState&&this.props.viewState.id;default:return this.id}}},{key:"filterViewState",value:function filterViewState(e){if(this.props.viewState&&"object"===view_typeof(this.props.viewState)){if(!this.props.viewState.id)return this.props.viewState;var t=Object.assign({},e);for(var n in this.props.viewState)"id"!==n&&(t[n]=this.props.viewState[n]);return t}return e}},{key:"getDimensions",value:function getDimensions(e){var t=e.width,n=e.height;return{x:positions_getPosition(this._x,t),y:positions_getPosition(this._y,n),width:positions_getPosition(this._width,t),height:positions_getPosition(this._height,n)}}},{key:"_getControllerProps",value:function _getControllerProps(e){var t=this.props.controller;return t?!0===t?e:("function"==typeof t&&(t={type:t}),Object.assign({},e,t)):null}},{key:"_getViewport",value:function _getViewport(e){return new(0,this.type)(e)}},{key:"_parseDimensions",value:function _parseDimensions(e){var t=e.x,n=e.y,r=e.width,i=e.height;this._x=parsePosition(t),this._y=parsePosition(n),this._width=parsePosition(r),this._height=parsePosition(i)}}])&&view_defineProperties(e.prototype,t),n&&view_defineProperties(e,n),View}();function view_manager_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function view_manager_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ye=function(){function ViewManager(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};view_manager_classCallCheck(this,ViewManager),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="Initial render",this._needsUpdate=!0,this._eventManager=e.eventManager,this._eventCallbacks={onViewStateChange:e.onViewStateChange,onInteractiveStateChange:e.onInteractiveStateChange},Object.seal(this),this.setProps(e)}var e,t,n;return e=ViewManager,(t=[{key:"finalize",value:function finalize(){for(var e in this.controllers)this.controllers[e]&&this.controllers[e].finalize();this.controllers={}}},{key:"needsRedraw",value:function needsRedraw(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).clearRedrawFlags,t=void 0===e||e,n=this._needsRedraw;return t&&(this._needsRedraw=!1),n}},{key:"setNeedsRedraw",value:function setNeedsRedraw(e){this._needsRedraw=this._needsRedraw||e}},{key:"setNeedsUpdate",value:function setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e,this._needsRedraw=this._needsRedraw||e}},{key:"getViewports",value:function getViewports(e){return e?this._viewports.filter(function(t){return t.containsPixel(e)}):this._viewports}},{key:"getViews",value:function getViews(){var e={};return this.views.forEach(function(t){e[t.id]=t}),e}},{key:"getView",value:function getView(e){return"string"==typeof e?this.views.find(function(t){return t.id===e}):e}},{key:"getViewState",value:function getViewState(e){var t=this.getView(e),n=t&&this.viewState[t.getViewStateId()]||this.viewState;return t?t.filterViewState(n):n}},{key:"getViewport",value:function getViewport(e){return this._viewportMap[e]}},{key:"project",value:function project(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{topLeft:!0},n=this.getViewports(),r=n.length-1;r>=0;--r){var i=n[r];if(i.contains(e,t))return i.project(e,t)}return null}},{key:"unproject",value:function unproject(e,t){for(var n=this.getViewports(),r=n.length-1;r>=0;--r){var i=n[r];if(i.containsPixel(e,t))return i.unproject(e)}return null}},{key:"setProps",value:function setProps(e){"views"in e&&this._setViews(e.views),"viewState"in e&&this._setViewState(e.viewState),("width"in e||"height"in e)&&this._setSize(e.width,e.height),this._isUpdating||this._update()}},{key:"_update",value:function _update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}},{key:"_setSize",value:function _setSize(e,t){assert(Number.isFinite(e)&&Number.isFinite(t)),e===this.width&&t===this.height||(this.width=e,this.height=t,this.setNeedsUpdate("Size changed"))}},{key:"_setViews",value:function _setViews(e){e=flatten(e,{filter:Boolean}).map(function(e){return e instanceof We?new Ze({viewportInstance:e}):e}),this._diffViews(e,this.views)&&this.setNeedsUpdate("views changed"),this.views=e}},{key:"_setViewState",value:function _setViewState(e){e?(!deepEqual(e,this.viewState)&&this.setNeedsUpdate("viewState changed"),this.viewState=e):i.warn("setting null viewState")()}},{key:"_onViewStateChange",value:function _onViewStateChange(e,t){t.viewId=e,this._eventCallbacks.onViewStateChange(t)}},{key:"_createController",value:function _createController(e){return new(0,e.type)(Object.assign({eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,e.id),onStateChange:this._eventCallbacks.onInteractiveStateChange},e))}},{key:"_updateController",value:function _updateController(e,t,n,r){if(e.controller){var i=Object.assign({},e.controller,t,{id:e.id,x:n.x,y:n.y,width:n.width,height:n.height});return r?r.setProps(i):r=this._createController(i),r}return null}},{key:"_rebuildViewports",value:function _rebuildViewports(){var e=this,t=this.width,n=this.height,r=this.views,i=this.controllers;for(var o in this.controllers={},this._viewports=r.map(function(r){var o=e.getViewState(r),a=r.makeViewport({width:t,height:n,viewState:o});return e.controllers[r.id]=e._updateController(r,o,a,i[r.id]),a}),i)i[o]&&!this.controllers[o]&&i[o].finalize();this._buildViewportMap()}},{key:"_buildViewportMap",value:function _buildViewportMap(){var e=this;this._viewportMap={},this._viewports.forEach(function(t){t.id&&(e._viewportMap[t.id]=e._viewportMap[t.id]||t)})}},{key:"_diffViews",value:function _diffViews(e,t){return e.length!==t.length||e.some(function(n,r){return!e[r].equals(t[r])})}}])&&view_manager_defineProperties(e.prototype,t),n&&view_manager_defineProperties(e,n),ViewManager}(),Je=n(11),Qe=n(10),$e=n(12),et=n(18),tt=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],nt=function(e){function WebMercatorViewport(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.width,r=t.height,i=t.latitude,o=void 0===i?0:i,a=t.longitude,s=void 0===a?0:a,l=t.zoom,u=void 0===l?0:l,c=t.pitch,p=void 0===c?0:c,h=t.bearing,f=void 0===h?0:h,d=t.altitude,g=void 0===d?1.5:d,m=t.nearZMultiplier,y=t.farZMultiplier;Object(Re.a)(this,WebMercatorViewport),n=n||1,r=r||1;var v=zoomToScale(u);g=Math.max(.75,g);var _=lngLatToWorld([s,o],v);_[2]=0;var b=getProjectionMatrix({width:n,height:r,pitch:p,bearing:f,altitude:g,nearZMultiplier:m||1/r,farZMultiplier:y||1.01}),x=getViewMatrix({height:r,center:_,pitch:p,bearing:f,altitude:g,flipY:!0});return(e=Object(Je.a)(this,Object(Qe.a)(WebMercatorViewport).call(this,{width:n,height:r,viewMatrix:x,projectionMatrix:b}))).latitude=o,e.longitude=s,e.zoom=u,e.pitch=p,e.bearing=f,e.altitude=g,e.scale=v,e.center=_,e.pixelsPerMeter=web_mercator_utils_getDistanceScales(Object(et.a)(Object(et.a)(e))).pixelsPerMeter[2],Object.freeze(Object(et.a)(Object(et.a)(e))),e}return Object($e.a)(WebMercatorViewport,e),Object(Le.a)(WebMercatorViewport,[{key:"projectFlat",value:function projectFlat(e){return lngLatToWorld(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale)}},{key:"unprojectFlat",value:function unprojectFlat(e){return worldToLngLat(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale)}},{key:"getMapCenterByLngLatPosition",value:function getMapCenterByLngLatPosition(e){var t=e.lngLat,n=pixelsToWorld(e.pos,this.pixelUnprojectionMatrix),r=lngLatToWorld(t,this.scale),i=A.a([],r,A.e([],n));return worldToLngLat(A.a([],this.center,i),this.scale)}},{key:"getLocationAtPoint",value:function getLocationAtPoint(e){var t=e.lngLat,n=e.pos;return this.getMapCenterByLngLatPosition({lngLat:t,pos:n})}},{key:"fitBounds",value:function fitBounds(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.width,r=this.height,i=fit_bounds_fitBounds(Object.assign({width:n,height:r,bounds:e},t));return new WebMercatorViewport({width:n,height:r,longitude:i.longitude,latitude:i.latitude,zoom:i.zoom})}}]),WebMercatorViewport}(function(){function Viewport(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.width,n=e.height,r=e.viewMatrix,i=void 0===r?tt:r,o=e.projectionMatrix,a=void 0===o?tt:o;Object(Re.a)(this,Viewport),this.width=t||1,this.height=n||1,this.scale=1,this.pixelsPerMeter=1,this.viewMatrix=i,this.projectionMatrix=a;var s=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];u.g(s,s,this.projectionMatrix),u.g(s,s,this.viewMatrix),this.viewProjectionMatrix=s;var l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];u.n(l,l,[this.width/2,-this.height/2,1]),u.o(l,l,[1,-1,0]),u.g(l,l,this.viewProjectionMatrix);var c=u.e([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],l);if(!c)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=l,this.pixelUnprojectionMatrix=c,this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}return Object(Le.a)(Viewport,[{key:"equals",value:function equals(e){return e instanceof Viewport&&(e.width===this.width&&e.height===this.height&&u.b(e.projectionMatrix,this.projectionMatrix)&&u.b(e.viewMatrix,this.viewMatrix))}},{key:"project",value:function project(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).topLeft,n=void 0===t||t,r=worldToPixels(this.projectPosition(e),this.pixelProjectionMatrix),i=Object(T.a)(r,2),o=i[0],a=i[1],s=n?a:this.height-a;return 2===e.length?[o,s]:[o,s,r[2]]}},{key:"unproject",value:function unproject(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.topLeft,r=void 0===n||n,i=t.targetZ,o=Object(T.a)(e,3),a=o[0],s=o[1],l=o[2],u=r?s:this.height-s,c=i&&i*this.pixelsPerMeter,p=pixelsToWorld([a,u,l],this.pixelUnprojectionMatrix,c),h=this.unprojectPosition(p),f=Object(T.a)(h,3),d=f[0],g=f[1],m=f[2];return Number.isFinite(l)?[d,g,m]:Number.isFinite(i)?[d,g,i]:[d,g]}},{key:"projectPosition",value:function projectPosition(e){var t=this.projectFlat(e),n=Object(T.a)(t,2);return[n[0],n[1],(e[2]||0)*this.pixelsPerMeter]}},{key:"unprojectPosition",value:function unprojectPosition(e){var t=this.unprojectFlat(e),n=Object(T.a)(t,2);return[n[0],n[1],(e[2]||0)/this.pixelsPerMeter]}},{key:"projectFlat",value:function projectFlat(e){arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return e}},{key:"unprojectFlat",value:function unprojectFlat(e){arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return e}}]),Viewport}());function fit_bounds_fitBounds(e){var t=e.width,n=e.height,r=e.bounds,i=e.padding,o=void 0===i?0:i,a=e.offset,s=void 0===a?[0,0]:a,l=Object(T.a)(r,2),u=Object(T.a)(l[0],2),c=u[0],p=u[1],h=Object(T.a)(l[1],2),f=h[0],d=h[1];if(Number.isFinite(o)){o={top:o,bottom:o,left:o,right:o}}else assert_assert(Number.isFinite(o.top)&&Number.isFinite(o.bottom)&&Number.isFinite(o.left)&&Number.isFinite(o.right));var g=new nt({width:t,height:n,longitude:0,latitude:0,zoom:0}),m=g.project([c,d]),y=g.project([f,p]),v=[Math.abs(y[0]-m[0]),Math.abs(y[1]-m[1])],_=[t-o.left-o.right-2*Math.abs(s[0]),n-o.top-o.bottom-2*Math.abs(s[1])];assert_assert(_[0]>0&&_[1]>0);var b=_[0]/v[0],x=_[1]/v[1],w=(o.right-o.left)/2/b,S=(o.bottom-o.top)/2/x,E=[(y[0]+m[0])/2+w,(y[1]+m[1])/2+S],P=g.unproject(E),C=g.zoom+Math.log2(Math.abs(Math.min(b,x)));return{longitude:P[0],latitude:P[1],zoom:C}}function web_mercator_viewport_typeof(e){return(web_mercator_viewport_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function web_mercator_viewport_slicedToArray(e,t){return web_mercator_viewport_arrayWithHoles(e)||web_mercator_viewport_iterableToArrayLimit(e,t)||web_mercator_viewport_nonIterableRest()}function web_mercator_viewport_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function web_mercator_viewport_iterableToArrayLimit(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}function web_mercator_viewport_arrayWithHoles(e){if(Array.isArray(e))return e}function web_mercator_viewport_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function web_mercator_viewport_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function web_mercator_viewport_getPrototypeOf(e){return(web_mercator_viewport_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function web_mercator_viewport_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&web_mercator_viewport_setPrototypeOf(e,t)}function web_mercator_viewport_setPrototypeOf(e,t){return(web_mercator_viewport_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function web_mercator_viewport_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var rt=function(e){function WebMercatorViewport(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};web_mercator_viewport_classCallCheck(this,WebMercatorViewport);var n,r,i=t.latitude,o=void 0===i?0:i,a=t.longitude,s=void 0===a?0:a,l=t.zoom,u=void 0===l?11:l,c=t.pitch,p=void 0===c?0:c,h=t.bearing,f=void 0===h?0:h,d=t.nearZMultiplier,g=void 0===d?.1:d,m=t.farZMultiplier,y=void 0===m?10:m,v=t.orthographic,_=void 0!==v&&v,b=t.width,x=t.height,w=t.altitude,S=void 0===w?1.5:w,E=getProjectionParameters({width:b=b||1,height:x=x||1,pitch:p,altitude:S=Math.max(.75,S),nearZMultiplier:g,farZMultiplier:y}),P=E.fov,C=E.aspect,k=E.focalDistance,T=E.near,A=E.far,O=getViewMatrix({height:x,pitch:p,bearing:f,altitude:S}),I=t.position&&[t.position[0],t.position[1],0],R=Object.assign({},t,{width:b,height:x,viewMatrix:O,longitude:s,latitude:o,zoom:u,position:I,orthographic:_,fovyRadians:P,aspect:C,orthographicFocalDistance:k,near:T,far:A});return n=this,(e=!(r=web_mercator_viewport_getPrototypeOf(WebMercatorViewport).call(this,R))||"object"!==web_mercator_viewport_typeof(r)&&"function"!=typeof r?web_mercator_viewport_assertThisInitialized(n):r).latitude=o,e.longitude=s,e.zoom=u,e.pitch=p,e.bearing=f,e.altitude=S,e.orthographic=_,e.metersToLngLatDelta=e.metersToLngLatDelta.bind(web_mercator_viewport_assertThisInitialized(web_mercator_viewport_assertThisInitialized(e))),e.lngLatDeltaToMeters=e.lngLatDeltaToMeters.bind(web_mercator_viewport_assertThisInitialized(web_mercator_viewport_assertThisInitialized(e))),e.addMetersToLngLat=e.addMetersToLngLat.bind(web_mercator_viewport_assertThisInitialized(web_mercator_viewport_assertThisInitialized(e))),Object.freeze(web_mercator_viewport_assertThisInitialized(web_mercator_viewport_assertThisInitialized(e))),e}var t,n,r;return web_mercator_viewport_inherits(WebMercatorViewport,We),t=WebMercatorViewport,(n=[{key:"metersToLngLatDelta",value:function metersToLngLatDelta(e){var t=web_mercator_viewport_slicedToArray(e,3),n=t[0],r=t[1],i=t[2],o=void 0===i?0:i;assert(Number.isFinite(n)&&Number.isFinite(r)&&Number.isFinite(o),"Illegal argument to WebMercatorViewport");var a=this.distanceScales,s=a.pixelsPerMeter,l=a.degreesPerPixel,u=n*s[0]*l[0],c=r*s[1]*l[1];return 2===e.length?[u,c]:[u,c,o]}},{key:"lngLatDeltaToMeters",value:function lngLatDeltaToMeters(e){var t=web_mercator_viewport_slicedToArray(e,3),n=t[0],r=t[1],i=t[2],o=void 0===i?0:i;assert(Number.isFinite(n)&&Number.isFinite(r)&&Number.isFinite(o),"Illegal argument to WebMercatorViewport");var a=this.distanceScales,s=a.pixelsPerDegree,l=a.metersPerPixel,u=n*s[0]*l[0],c=r*s[1]*l[1];return 2===e.length?[u,c]:[u,c,o]}},{key:"addMetersToLngLat",value:function addMetersToLngLat(e,t){return web_mercator_utils_addMetersToLngLat(e,t)}},{key:"getMapCenterByLngLatPosition",value:function getMapCenterByLngLatPosition(e){var t=e.lngLat,n=pixelsToWorld(e.pos,this.pixelUnprojectionMatrix),r=this.projectFlat(t),i=A.a([],r,A.e([],n)),o=A.a([],this.center,i);return this.unprojectFlat(o)}},{key:"getLocationAtPoint",value:function getLocationAtPoint(e){var t=e.lngLat,n=e.pos;return this.getMapCenterByLngLatPosition({lngLat:t,pos:n})}},{key:"fitBounds",value:function fitBounds(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.width,r=this.height,i=fit_bounds_fitBounds(Object.assign({width:n,height:r,bounds:e},t));return new WebMercatorViewport({width:n,height:r,longitude:i.longitude,latitude:i.latitude,zoom:i.zoom})}}])&&web_mercator_viewport_defineProperties(t.prototype,n),r&&web_mercator_viewport_defineProperties(t,r),WebMercatorViewport}();function transition_interpolator_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function transition_interpolator_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}rt.displayName="WebMercatorViewport";var it=function(){function TransitionInterpolator(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};transition_interpolator_classCallCheck(this,TransitionInterpolator),Array.isArray(e)&&(e={compare:e,extract:e,required:e});var t=e,n=t.compare,r=t.extract,i=t.required;this._propsToCompare=n,this._propsToExtract=r,this._requiredProps=i}var e,t,n;return e=TransitionInterpolator,(t=[{key:"arePropsEqual",value:function arePropsEqual(e,t){var n=!0,r=!1,i=void 0;try{for(var o,a=(this._propsToCompare||Object.keys(t))[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;if(!Object(Fe.e)(e[s],t[s]))return!1}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return!0}},{key:"initializeProps",value:function initializeProps(e,t){var n;if(this._propsToExtract){var r={},i={},o=!0,a=!1,s=void 0;try{for(var l,u=this._propsToExtract[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value;r[c]=e[c],i[c]=t[c]}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}n={start:r,end:i}}else n={start:e,end:t};return this._checkRequiredProps(n.start),this._checkRequiredProps(n.end),n}},{key:"interpolateProps",value:function interpolateProps(e,t,n){assert(!1,"interpolateProps is not implemented")}},{key:"_checkRequiredProps",value:function _checkRequiredProps(e){this._requiredProps&&this._requiredProps.forEach(function(t){var n=e[t];assert(Number.isFinite(n)||Array.isArray(n),"".concat(t," is required for transition"))})}}])&&transition_interpolator_defineProperties(e.prototype,t),n&&transition_interpolator_defineProperties(e,n),TransitionInterpolator}();function linear_interpolator_typeof(e){return(linear_interpolator_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function linear_interpolator_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function linear_interpolator_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function linear_interpolator_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function linear_interpolator_getPrototypeOf(e){return(linear_interpolator_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function linear_interpolator_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&linear_interpolator_setPrototypeOf(e,t)}function linear_interpolator_setPrototypeOf(e,t){return(linear_interpolator_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var ot=["longitude","latitude","zoom","bearing","pitch"],at=function(e){function LinearInterpolator(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot;return linear_interpolator_classCallCheck(this,LinearInterpolator),e=this,!(t=linear_interpolator_getPrototypeOf(LinearInterpolator).call(this,n))||"object"!==linear_interpolator_typeof(t)&&"function"!=typeof t?linear_interpolator_assertThisInitialized(e):t}var t,n,r;return linear_interpolator_inherits(LinearInterpolator,it),t=LinearInterpolator,(n=[{key:"interpolateProps",value:function interpolateProps(e,t,n){var r={};for(var i in t)r[i]=Object(Fe.g)(e[i],t[i],n);return r}}])&&linear_interpolator_defineProperties(t.prototype,n),r&&linear_interpolator_defineProperties(t,r),LinearInterpolator}();function transition_manager_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function transition_manager_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var st=function noop(){},lt=1,ut=2,ct=3,pt={transitionDuration:0,transitionEasing:function transitionEasing(e){return e},transitionInterpolator:new at,transitionInterruption:lt,onTransitionStart:st,onTransitionInterrupt:st,onTransitionEnd:st},ht=function(){function TransitionManager(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};transition_manager_classCallCheck(this,TransitionManager),assert(e),this.ControllerState=e,this.props=Object.assign({},pt,t),this.animation=null,this.propsInTransition=null,this.transition=new $,this.onViewStateChange=t.onViewStateChange,this._onTransitionFrame=this._onTransitionFrame.bind(this),this._onTransitionUpdate=this._onTransitionUpdate.bind(this)}var e,t,n;return e=TransitionManager,(t=[{key:"finalize",value:function finalize(){cancelAnimationFrame(this.animation)}},{key:"getViewportInTransition",value:function getViewportInTransition(){return this.propsInTransition}},{key:"processViewStateChange",value:function processViewStateChange(e){var t=!1,n=this.props;if(e=Object.assign({},pt,e),this.props=e,this._shouldIgnoreViewportChange(n,e))return t;if(this._isTransitionEnabled(e)){var r=Object.assign({},n,this.transition.interruption===ut?this.transition.endProps:this.propsInTransition||n);this._triggerTransition(r,e),t=!0}else this.transition.cancel();return t}},{key:"_isTransitionEnabled",value:function _isTransitionEnabled(e){return e.transitionDuration>0&&e.transitionInterpolator}},{key:"_isUpdateDueToCurrentTransition",value:function _isUpdateDueToCurrentTransition(e){return!!this.transition.inProgress&&this.transition.interpolator.arePropsEqual(e,this.propsInTransition)}},{key:"_shouldIgnoreViewportChange",value:function _shouldIgnoreViewportChange(e,t){return this.transition.inProgress?this.transition.interruption===ct||this._isUpdateDueToCurrentTransition(t):!this._isTransitionEnabled(t)||t.transitionInterpolator.arePropsEqual(e,t)}},{key:"_triggerTransition",value:function _triggerTransition(e,t){assert(this._isTransitionEnabled(t),"Transition is not enabled"),cancelAnimationFrame(this.animation);var n=new this.ControllerState(e),r=new this.ControllerState(t).shortestPathFrom(n),i=t.transitionInterpolator.initializeProps(e,r);this.propsInTransition={},this.transition.start({duration:t.transitionDuration,easing:t.transitionEasing,interpolator:t.transitionInterpolator,interruption:t.transitionInterruption,startProps:i.start,endProps:i.end,onStart:t.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(t.onTransitionInterrupt),onEnd:this._onTransitionEnd(t.onTransitionEnd)}),this._onTransitionFrame()}},{key:"_onTransitionFrame",value:function _onTransitionFrame(){this.animation=requestAnimationFrame(this._onTransitionFrame),this.transition.update(Date.now())}},{key:"_onTransitionEnd",value:function _onTransitionEnd(e){var t=this;return function(n){cancelAnimationFrame(t.animation),t.propsInTransition=null,e(n)}}},{key:"_onTransitionUpdate",value:function _onTransitionUpdate(e){var t=e.interpolator,n=e.startProps,r=e.endProps,i=e.time,o=t.interpolateProps(n,r,i);this.propsInTransition=new this.ControllerState(Object.assign({},this.props,o)).getViewportProps(),this.onViewStateChange&&this.onViewStateChange({viewState:this.propsInTransition,interactionState:{inTransition:!0}})}}])&&transition_manager_defineProperties(e.prototype,t),n&&transition_manager_defineProperties(e,n),TransitionManager}();function controller_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function controller_iterableToArrayLimit(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}function controller_arrayWithHoles(e){if(Array.isArray(e))return e}function controller_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function controller_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}ht.defaultProps=pt;var ft={transitionDuration:0},dt=["wheel"],gt=["panstart","panmove","panend"],mt=["pinchstart","pinchmove","pinchend"],yt=["doubletap"],vt=["keydown"],_t=function(){function Controller(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};controller_classCallCheck(this,Controller),assert(e),this.ControllerState=e,this.controllerState=null,this.controllerStateProps=null,this.eventManager=null,this.transitionManager=new ht(e,t),this._events=null,this._state={isDragging:!1},this.events=[],this.onViewStateChange=null,this.onStateChange=null,this.invertPan=!1,this.handleEvent=this.handleEvent.bind(this),this.setProps(t)}var e,t,n;return e=Controller,(t=[{key:"finalize",value:function finalize(){for(var e in this._events)this._events[e]&&this.eventManager.off(e,this.handleEvent);this.transitionManager.finalize()}},{key:"handleEvent",value:function handleEvent(e){var t=this.ControllerState;switch(this.controllerState=new t(Object.assign({},this.controllerStateProps,this._state)),e.type){case"panstart":return this._onPanStart(e);case"panmove":return this._onPan(e);case"panend":return this._onPanEnd(e);case"pinchstart":return this._onPinchStart(e);case"pinchmove":return this._onPinch(e);case"pinchend":return this._onPinchEnd(e);case"doubletap":return this._onDoubleTap(e);case"wheel":return this._onWheel(e);case"keydown":return this._onKeyDown(e);default:return!1}}},{key:"getCenter",value:function getCenter(e){var t=this.controllerStateProps,n=t.x,r=t.y,i=e.offsetCenter;return[i.x-n,i.y-r]}},{key:"isPointInBounds",value:function isPointInBounds(e){var t=this.controllerStateProps,n=t.width,r=t.height;return e[0]>=0&&e[0]<=n&&e[1]>=0&&e[1]<=r}},{key:"isFunctionKeyPressed",value:function isFunctionKeyPressed(e){var t=e.srcEvent;return Boolean(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}},{key:"isDragging",value:function isDragging(){return this._state.isDragging}},{key:"setProps",value:function setProps(e){"onViewportChange"in e&&i.removed("onViewportChange")(),"onViewStateChange"in e&&(this.onViewStateChange=e.onViewStateChange),"onStateChange"in e&&(this.onStateChange=e.onStateChange),this.controllerStateProps=e,"eventManager"in e&&this.eventManager!==e.eventManager&&(this.eventManager=e.eventManager,this._events={},this.toggleEvents(this.events,!0)),this.transitionManager.processViewStateChange(this.controllerStateProps);var t=e.scrollZoom,n=void 0===t||t,r=e.dragPan,o=void 0===r||r,a=e.dragRotate,s=void 0===a||a,l=e.doubleClickZoom,u=void 0===l||l,c=e.touchZoom,p=void 0===c||c,h=e.touchRotate,f=void 0!==h&&h,d=e.keyboard,g=void 0===d||d,m=Boolean(this.onViewStateChange);this.toggleEvents(dt,m&&n),this.toggleEvents(gt,m&&(o||s)),this.toggleEvents(mt,m&&(p||f)),this.toggleEvents(yt,m&&u),this.toggleEvents(vt,m&&g),this.scrollZoom=n,this.dragPan=o,this.dragRotate=s,this.doubleClickZoom=u,this.touchZoom=p,this.touchRotate=f,this.keyboard=g}},{key:"toggleEvents",value:function toggleEvents(e,t){var n=this;this.eventManager&&e.forEach(function(e){n._events[e]!==t&&(n._events[e]=t,t?n.eventManager.on(e,n.handleEvent):n.eventManager.off(e,n.handleEvent))})}},{key:"setOptions",value:function setOptions(e){return this.setProps(e)}},{key:"updateViewport",value:function updateViewport(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Object.assign({},e.getViewportProps(),t);if(this.controllerState!==e){var i=this.controllerState?this.controllerState.getViewportProps():null;this.onViewStateChange&&this.onViewStateChange({viewState:r,interactionState:n,oldViewState:i})}Object.assign(this._state,Object.assign({},e.getInteractiveState(),n)),this.onStateChange&&this.onStateChange(this._state)}},{key:"_onPanStart",value:function _onPanStart(e){var t=this.getCenter(e);if(!this.isPointInBounds(t))return!1;var n=this.controllerState.panStart({pos:t}).rotateStart({pos:t});return this.updateViewport(n,ft,{isDragging:!0})}},{key:"_onPan",value:function _onPan(e){var t=this.isFunctionKeyPressed(e)||e.rightButton;return(t=this.invertPan?!t:t)?this._onPanMove(e):this._onPanRotate(e)}},{key:"_onPanEnd",value:function _onPanEnd(e){var t=this.controllerState.panEnd().rotateEnd();return this.updateViewport(t,null,{isDragging:!1})}},{key:"_onPanMove",value:function _onPanMove(e){if(!this.dragPan)return!1;var t=this.getCenter(e),n=this.controllerState.pan({pos:t});return this.updateViewport(n,ft,{isDragging:!0})}},{key:"_onPanRotate",value:function _onPanRotate(e){return!!this.dragRotate&&this._onPanRotateStandard(e)}},{key:"_onPanRotateStandard",value:function _onPanRotateStandard(e){var t=e.deltaX,n=e.deltaY,r=this.controllerState.getViewportProps(),i=t/r.width,o=n/r.height,a=this.controllerState.rotate({deltaScaleX:i,deltaScaleY:o});return this.updateViewport(a,ft,{isDragging:!0})}},{key:"_onPanRotateMap",value:function _onPanRotateMap(e){var t,n,r=e.deltaX,i=e.deltaY,o=this.getCenter(e),a=(n=2,controller_arrayWithHoles(t=o)||controller_iterableToArrayLimit(t,n)||controller_nonIterableRest())[1],s=a-i,l=this.controllerState.getViewportProps(),u=l.width,c=l.height,p=r/u,h=0;i>0?Math.abs(c-s)>5&&(h=i/(s-c)*1.2):i<0&&s>5&&(h=1-a/s),h=Math.min(1,Math.max(-1,h));var f=this.controllerState.rotate({deltaScaleX:p,deltaScaleY:h});return this.updateViewport(f,ft,{isDragging:!0})}},{key:"_onWheel",value:function _onWheel(e){if(!this.scrollZoom)return!1;e.preventDefault();var t=this.getCenter(e);if(!this.isPointInBounds(t))return!1;var n=e.delta,r=2/(1+Math.exp(-Math.abs(.01*n)));n<0&&0!==r&&(r=1/r);var i=this.controllerState.zoom({pos:t,scale:r});return this.updateViewport(i,ft)}},{key:"_onPinchStart",value:function _onPinchStart(e){var t=this.getCenter(e);if(!this.isPointInBounds(t))return!1;var n=this.controllerState.zoomStart({pos:t}).rotateStart({pos:t});return this._state.startPinchRotation=e.rotation,this.updateViewport(n,ft,{isDragging:!0})}},{key:"_onPinch",value:function _onPinch(e){if(!this.touchZoom&&!this.touchRotate)return!1;var t=this.controllerState;if(this.touchZoom){var n=e.scale,r=this.getCenter(e);t=t.zoom({pos:r,scale:n})}if(this.touchRotate){var i=e.rotation,o=this._state.startPinchRotation;t=t.rotate({deltaScaleX:-(i-o)/180})}return this.updateViewport(t,ft,{isDragging:!0})}},{key:"_onPinchEnd",value:function _onPinchEnd(e){var t=this.controllerState.zoomEnd().rotateEnd();return this._state.startPinchRotation=0,this.updateViewport(t,null,{isDragging:!1})}},{key:"_onDoubleTap",value:function _onDoubleTap(e){if(!this.doubleClickZoom)return!1;var t=this.getCenter(e);if(!this.isPointInBounds(t))return!1;var n=this.isFunctionKeyPressed(e),r=this.controllerState.zoom({pos:t,scale:n?.5:2});return this.updateViewport(r,this._getTransitionProps())}},{key:"_onKeyDown",value:function _onKeyDown(e){if(!this.keyboard)return!1;var t,n=this.isFunctionKeyPressed(e),r=this.controllerState;switch(e.srcEvent.keyCode){case 189:t=n?r.zoomOut().zoomOut():r.zoomOut();break;case 187:t=n?r.zoomIn().zoomIn():r.zoomIn();break;case 37:t=n?r.rotateLeft():r.moveLeft();break;case 39:t=n?r.rotateRight():r.moveRight();break;case 38:t=n?r.rotateUp():r.moveUp();break;case 40:t=n?r.rotateDown():r.moveDown();break;default:return!1}return this.updateViewport(t,this._getTransitionProps())}},{key:"_getTransitionProps",value:function _getTransitionProps(){return ft}}])&&controller_defineProperties(e.prototype,t),n&&controller_defineProperties(e,n),Controller}(),bt=6371e3,xt=function(){function SphericalCoordinates(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.phi,n=e.theta,r=e.radius,i=e.bearing,o=e.pitch,a=(e.altitude,e.radiusScale),s=void 0===a?bt:a;Object(Re.a)(this,SphericalCoordinates),0===arguments.length?(this.phi=0,this.theta=0,this.radius=1):Number.isFinite(t)||Number.isFinite(n)?(this.phi=t||0,this.theta=n||0):(Number.isFinite(i)||Number.isFinite(o))&&(this.bearing=i||0,this.pitch=o||0),this.radius=r||1,this.radiusScale=s||1,this.check()}return Object(Le.a)(SphericalCoordinates,[{key:"toString",value:function toString(){return this.formatString(Fe.c)}},{key:"formatString",value:function formatString(e){var t=e.printTypes,n=(e.printDegrees,Fe.f);return"".concat(t?"Spherical":"","[rho:").concat(n(this.radius),",theta:").concat(n(this.theta),",phi:").concat(n(this.phi),"]")}},{key:"equals",value:function equals(e){return Object(Fe.e)(this.radius,e.radius)&&Object(Fe.e)(this.theta,e.theta)&&Object(Fe.e)(this.phi,e.phi)}},{key:"exactEquals",value:function exactEquals(e){return this.radius===e.radius&&this.theta===e.theta&&this.phi===e.phi}},{key:"set",value:function set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this.check()}},{key:"clone",value:function clone(){return(new this.constructor).copy(this)}},{key:"copy",value:function copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this.check()}},{key:"fromLngLatZ",value:function fromLngLatZ(e){var t=Object(T.a)(e,3),n=t[0],r=t[1],i=t[2];this.radius=1+i/this.radiusScale,this.phi=Object(Fe.h)(r),this.theta=Object(Fe.h)(n)}},{key:"fromVector3",value:function fromVector3(e){return this.radius=k.c(e),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e[0],e[1]),this.phi=Math.acos(Object(Fe.b)(e[2]/this.radius,-1,1))),this.check()}},{key:"toVector3",value:function toVector3(){return new Be.a(0,0,this.radius).rotateX({radians:this.theta}).rotateZ({radians:this.phi})}},{key:"makeSafe",value:function makeSafe(){this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi))}},{key:"check",value:function check(){if(!(Number.isFinite(this.phi)&&Number.isFinite(this.theta)&&this.radius>0))throw new Error("SphericalCoordinates: some fields set to invalid numbers");return this}},{key:"bearing",get:function get(){return 180-Object(Fe.d)(this.phi)},set:function set(e){this.phi=Math.PI-Object(Fe.h)(e)}},{key:"pitch",get:function get(){return Object(Fe.d)(this.theta)},set:function set(e){this.theta=Object(Fe.h)(e)}},{key:"longitude",get:function get(){return Object(Fe.d)(this.phi)}},{key:"latitude",get:function get(){return Object(Fe.d)(this.theta)}},{key:"lng",get:function get(){return Object(Fe.d)(this.phi)}},{key:"lat",get:function get(){return Object(Fe.d)(this.theta)}},{key:"z",get:function get(){return(this.radius-1)*this.radiusScale}}]),SphericalCoordinates}();function view_state_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function view_state_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var wt={position:[0,0,0],lookAt:[0,0,0],up:[0,0,1],rotationX:0,rotationY:0,fov:50,near:1,far:100},St=function(){function ViewState(e){view_state_classCallCheck(this,ViewState);var t=e.width,n=e.height,r=e.position,i=void 0===r?wt.position:r;assert(Number.isFinite(t),"`width` must be supplied"),assert(Number.isFinite(n),"`height` must be supplied"),this._viewportProps=this._applyConstraints(Object.assign({},e,{position:new Be.a(i)}))}var e,t,n;return e=ViewState,(t=[{key:"getViewportProps",value:function getViewportProps(){return this._viewportProps}},{key:"getDirection",value:function getDirection(){return new xt({bearing:this._viewportProps.bearing,pitch:this._viewportProps.pitch}).toVector3().normalize()}},{key:"getDirectionFromBearing",value:function getDirectionFromBearing(e){return new xt({bearing:e,pitch:90}).toVector3().normalize()}},{key:"shortestPathFrom",value:function shortestPathFrom(e){return this._viewportProps}},{key:"_applyConstraints",value:function _applyConstraints(e){return e}}])&&view_state_defineProperties(e.prototype,t),n&&view_state_defineProperties(e,n),ViewState}(),Et=85.05113,Pt=-85.05113;function normalizeViewportProps(e){var t=e.width,n=e.height,r=e.longitude,i=e.latitude,o=e.zoom,a=e.pitch,s=void 0===a?0:a,l=e.bearing,u=void 0===l?0:l;(r<-180||r>180)&&(r=mod(r+180,360)-180),(u<-180||u>180)&&(u=mod(u+180,360)-180);var c=new nt({width:t,height:n,longitude:r,latitude:i,zoom:o}),p=c.project([r,Et])[1],h=c.project([r,Pt])[1],f=0;return h-p<n&&(o+=Math.log2(n/(h-p)),p=(c=new nt({width:t,height:n,longitude:r,latitude:i,zoom:o})).project([r,Et])[1],h=c.project([r,Pt])[1]),p>0?f=p:h<n&&(f=h-n),f&&(i=c.unproject([t/2,n/2+f])[1]),{width:t,height:n,longitude:r,latitude:i,zoom:o,pitch:s,bearing:u}}function map_controller_typeof(e){return(map_controller_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function map_controller_slicedToArray(e,t){return map_controller_arrayWithHoles(e)||map_controller_iterableToArrayLimit(e,t)||map_controller_nonIterableRest()}function map_controller_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function map_controller_iterableToArrayLimit(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}function map_controller_arrayWithHoles(e){if(Array.isArray(e))return e}function map_controller_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function map_controller_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function map_controller_createClass(e,t,n){return t&&map_controller_defineProperties(e.prototype,t),n&&map_controller_defineProperties(e,n),e}function map_controller_possibleConstructorReturn(e,t){return!t||"object"!==map_controller_typeof(t)&&"function"!=typeof t?map_controller_assertThisInitialized(e):t}function map_controller_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function map_controller_getPrototypeOf(e){return(map_controller_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function map_controller_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&map_controller_setPrototypeOf(e,t)}function map_controller_setPrototypeOf(e,t){return(map_controller_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var Ct={transitionDuration:300,transitionEasing:function transitionEasing(e){return e},transitionInterpolator:new at,transitionInterruption:lt},kt={minZoom:0,maxZoom:20,minPitch:0,maxPitch:60},Tt={pitch:0,bearing:0,altitude:1.5},At=function(e){function MapState(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.width,r=t.height,i=t.latitude,o=t.longitude,a=t.zoom,s=t.bearing,l=void 0===s?Tt.bearing:s,u=t.pitch,c=void 0===u?Tt.pitch:u,p=t.altitude,h=void 0===p?Tt.altitude:p,f=t.maxZoom,d=void 0===f?kt.maxZoom:f,g=t.minZoom,m=void 0===g?kt.minZoom:g,y=t.maxPitch,v=void 0===y?kt.maxPitch:y,_=t.minPitch,b=void 0===_?kt.minPitch:_,x=t.startPanLngLat,w=t.startZoomLngLat,S=t.startBearing,E=t.startPitch,P=t.startZoom;return map_controller_classCallCheck(this,MapState),assert(Number.isFinite(o),"`longitude` must be supplied"),assert(Number.isFinite(i),"`latitude` must be supplied"),assert(Number.isFinite(a),"`zoom` must be supplied"),(e=map_controller_possibleConstructorReturn(this,map_controller_getPrototypeOf(MapState).call(this,{width:n,height:r,latitude:i,longitude:o,zoom:a,bearing:l,pitch:c,altitude:h,maxZoom:d,minZoom:m,maxPitch:v,minPitch:b})))._interactiveState={startPanLngLat:x,startZoomLngLat:w,startBearing:S,startPitch:E,startZoom:P},e}return map_controller_inherits(MapState,St),map_controller_createClass(MapState,[{key:"getViewportProps",value:function getViewportProps(){return this._viewportProps}},{key:"getInteractiveState",value:function getInteractiveState(){return this._interactiveState}},{key:"panStart",value:function panStart(e){var t=e.pos;return this._getUpdatedState({startPanLngLat:this._unproject(t)})}},{key:"pan",value:function pan(e){var t=e.pos,n=e.startPos,r=this._interactiveState.startPanLngLat||this._unproject(n);if(!r)return this;var i=map_controller_slicedToArray(this._calculateNewLngLat({startPanLngLat:r,pos:t}),2),o=i[0],a=i[1];return this._getUpdatedState({longitude:o,latitude:a})}},{key:"panEnd",value:function panEnd(){return this._getUpdatedState({startPanLngLat:null})}},{key:"rotateStart",value:function rotateStart(e){e.pos;return this._getUpdatedState({startBearing:this._viewportProps.bearing,startPitch:this._viewportProps.pitch})}},{key:"rotate",value:function rotate(e){var t=e.deltaScaleX,n=void 0===t?0:t,r=e.deltaScaleY,i=void 0===r?0:r,o=this._interactiveState,a=o.startBearing,s=o.startPitch;if(!Number.isFinite(a)||!Number.isFinite(s))return this;var l=this._calculateNewPitchAndBearing({deltaScaleX:n,deltaScaleY:i,startBearing:a,startPitch:s}),u=l.pitch,c=l.bearing;return this._getUpdatedState({bearing:c,pitch:u})}},{key:"rotateEnd",value:function rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}},{key:"zoomStart",value:function zoomStart(e){var t=e.pos;return this._getUpdatedState({startZoomLngLat:this._unproject(t),startZoom:this._viewportProps.zoom})}},{key:"zoom",value:function zoom(e){var t=e.pos,n=e.startPos,r=e.scale;assert(r>0,"`scale` must be a positive number");var i=this._interactiveState,o=i.startZoom,a=i.startZoomLngLat;Number.isFinite(o)||(o=this._viewportProps.zoom,a=this._unproject(n)||this._unproject(t)),assert(a,"`startZoomLngLat` prop is required for zoom behavior to calculate where to position the map.");var zoom=this._calculateNewZoom({scale:r,startZoom:o}),s=map_controller_slicedToArray(new nt(Object.assign({},this._viewportProps,{zoom:zoom})).getLocationAtPoint({lngLat:a,pos:t}),2),l=s[0],u=s[1];return this._getUpdatedState({zoom:zoom,longitude:l,latitude:u})}},{key:"zoomEnd",value:function zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}},{key:"zoomIn",value:function zoomIn(){return this._zoomFromCenter(2)}},{key:"zoomOut",value:function zoomOut(){return this._zoomFromCenter(.5)}},{key:"moveLeft",value:function moveLeft(){return this._panFromCenter([100,0])}},{key:"moveRight",value:function moveRight(){return this._panFromCenter([-100,0])}},{key:"moveUp",value:function moveUp(){return this._panFromCenter([0,100])}},{key:"moveDown",value:function moveDown(){return this._panFromCenter([0,-100])}},{key:"rotateLeft",value:function rotateLeft(){return this._getUpdatedState({bearing:this._viewportProps.bearing-15})}},{key:"rotateRight",value:function rotateRight(){return this._getUpdatedState({bearing:this._viewportProps.bearing+15})}},{key:"rotateUp",value:function rotateUp(){return this._getUpdatedState({pitch:this._viewportProps.pitch+10})}},{key:"rotateDown",value:function rotateDown(){return this._getUpdatedState({pitch:this._viewportProps.pitch-10})}},{key:"shortestPathFrom",value:function shortestPathFrom(e){var t=e.getViewportProps(),n=Object.assign({},this._viewportProps),r=n.bearing,i=n.longitude;return Math.abs(r-t.bearing)>180&&(n.bearing=r<0?r+360:r-360),Math.abs(i-t.longitude)>180&&(n.longitude=i<0?i+360:i-360),n}},{key:"_zoomFromCenter",value:function _zoomFromCenter(e){var t=this._viewportProps,n=t.width,r=t.height;return this.zoom({pos:[n/2,r/2],scale:e})}},{key:"_panFromCenter",value:function _panFromCenter(e){var t=this._viewportProps,n=t.width,r=t.height;return this.pan({startPos:[n/2,r/2],pos:[n/2+e[0],r/2+e[1]]})}},{key:"_getUpdatedState",value:function _getUpdatedState(e){return new MapState(Object.assign({},this._viewportProps,this._interactiveState,e))}},{key:"_applyConstraints",value:function _applyConstraints(e){var t=e.maxZoom,n=e.minZoom,r=e.zoom;e.zoom=Object(Fe.b)(r,n,t);var i=e.maxPitch,o=e.minPitch,a=e.pitch;return e.pitch=Object(Fe.b)(a,o,i),Object.assign(e,normalizeViewportProps(e)),e}},{key:"_unproject",value:function _unproject(e){var t=new nt(this._viewportProps);return e&&t.unproject(e)}},{key:"_calculateNewLngLat",value:function _calculateNewLngLat(e){var t=e.startPanLngLat,n=e.pos;return new nt(this._viewportProps).getMapCenterByLngLatPosition({lngLat:t,pos:n})}},{key:"_calculateNewZoom",value:function _calculateNewZoom(e){var t=e.scale,n=e.startZoom,r=this._viewportProps,i=r.maxZoom,o=r.minZoom,a=n+Math.log2(t);return Object(Fe.b)(a,o,i)}},{key:"_calculateNewPitchAndBearing",value:function _calculateNewPitchAndBearing(e){var t=e.deltaScaleX,n=e.deltaScaleY,r=e.startBearing,i=e.startPitch;n=Object(Fe.b)(n,-1,1);var o=this._viewportProps,a=o.minPitch,s=o.maxPitch,l=i;return n>0?l=i+n*(s-i):n<0&&(l=i-n*(a-i)),{pitch:l,bearing:r+180*t}}}]),MapState}(),Ot=function(e){function MapController(e){var t;return map_controller_classCallCheck(this,MapController),(t=map_controller_possibleConstructorReturn(this,map_controller_getPrototypeOf(MapController).call(this,At,e))).invertPan=!0,t}return map_controller_inherits(MapController,_t),map_controller_createClass(MapController,[{key:"_getTransitionProps",value:function _getTransitionProps(){return Ct}},{key:"_onPanRotate",value:function _onPanRotate(e){return!!this.dragRotate&&this._onPanRotateMap(e)}}]),MapController}();function map_view_typeof(e){return(map_view_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function map_view_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function map_view_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function map_view_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function map_view_getPrototypeOf(e){return(map_view_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function map_view_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&map_view_setPrototypeOf(e,t)}function map_view_setPrototypeOf(e,t){return(map_view_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var It=function(e){function MapView(e){return map_view_classCallCheck(this,MapView),t=this,!(n=map_view_getPrototypeOf(MapView).call(this,Object.assign({},e,{type:rt})))||"object"!==map_view_typeof(n)&&"function"!=typeof n?map_view_assertThisInitialized(t):n;var t,n}var t,n,r;return map_view_inherits(MapView,Ze),t=MapView,(n=[{key:"controller",get:function get(){return this._getControllerProps({type:Ot})}}])&&map_view_defineProperties(t.prototype,n),r&&map_view_defineProperties(t,r),MapView}();function effect_manager_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function effect_manager_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}It.displayName="MapView";var Rt=function(){function EffectManager(e){var t=e.gl,n=e.layerManager;effect_manager_classCallCheck(this,EffectManager),this.gl=t,this.layerManager=n,this._effects=[]}var e,t,n;return e=EffectManager,(t=[{key:"addEffect",value:function addEffect(e){this._effects.push(e),this._sortEffects(),e.initialize({gl:this.gl,layerManager:this.layerManager})}},{key:"removeEffect",value:function removeEffect(e){var t=this._effects.indexOf(e);return t>=0&&(e.finalize({gl:this.gl,layerManager:this.layerManager}),this._effects.splice(t,1),!0)}},{key:"preDraw",value:function preDraw(){var e=!0,t=!1,n=void 0;try{for(var r,i=this._effects[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value;o.needsRedraw&&o.preDraw({gl:this.gl,layerManager:this.layerManager})}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}},{key:"draw",value:function draw(){var e=!0,t=!1,n=void 0;try{for(var r,i=this._effects[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value;o.needsRedraw&&o.draw({gl:this.gl,layerManager:this.layerManager})}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}},{key:"_sortEffects",value:function _sortEffects(){this._effects.sort(function(e,t){return e.priority>t.priority?-1:e.priority<t.priority?1:e.count-t.count})}}])&&effect_manager_defineProperties(e.prototype,t),n&&effect_manager_defineProperties(e,n),EffectManager}();function effect_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function effect_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Lt=0,Mt=function(){function Effect(){effect_classCallCheck(this,Effect),this.id="effect",this.count=Lt++,this.visible=!0,this.priority=0,this.needsRedraw=!1}var e,t,n;return e=Effect,(t=[{key:"initialize",value:function initialize(e){e.gl,e.layerManager}},{key:"finalize",value:function finalize(e){e.gl,e.layerManager}},{key:"preDraw",value:function preDraw(e){e.gl,e.layerManager}},{key:"draw",value:function draw(e){e.gl,e.layerManager}},{key:"setNeedsRedraw",value:function setNeedsRedraw(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.needsRedraw=e}}])&&effect_defineProperties(e.prototype,t),n&&effect_defineProperties(e,n),Effect}(),jt=1,Dt=2,Ft=4,Nt={mousedown:jt,mousemove:Dt,mouseup:Ft};function some(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return!0;return!1}var Bt=null;"undefined"!=typeof document&&(function enhancePointerEventInput(e){var t=e.prototype.handler;e.prototype.handler=function handler(e){var n=this.store;e.button>0&&(some(n,function(t){return t.pointerId===e.pointerId})||n.push(e)),t.call(this,e)}}((Bt=n(473)).PointerEventInput),function enhanceMouseInput(e){e.prototype.handler=function handler(e){var t=Nt[e.type];t&jt&&e.button>=0&&(this.pressed=!0),t&Dt&&0===e.which&&(t=Ft),this.pressed&&(t&Ft&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:"mouse",srcEvent:e}))}}(Bt.MouseInput));var zt=Bt;var Ut=zt?[[zt.Rotate,{enable:!1}],[zt.Pinch,{enable:!1}],[zt.Swipe,{enable:!1}],[zt.Pan,{threshold:0,enable:!1}],[zt.Press,{enable:!1}],[zt.Tap,{event:"doubletap",taps:2,enable:!1}],[zt.Tap,{event:"anytap",enable:!1}],[zt.Tap,{enable:!1}]]:null,Vt={rotate:["pinch"],doubletap:["anytap"],anytap:["tap"]},Gt={doubletap:["tap"]},Wt={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},qt=["keydown","keyup"],Ht=["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],Xt=["wheel","mousewheel","DOMMouseScroll"],Kt={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},Zt={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},Yt=n(86),Jt=-1!==Yt.b.indexOf("firefox"),Qt=Xt,$t=function(){function WheelInput(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(Re.a)(this,WheelInput),this.element=e,this.callback=t,this.options=Object.assign({enable:!0},r),this.events=Qt.concat(r.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach(function(t){return e.addEventListener(t,n.handleEvent,!!Yt.a&&{passive:!1})})}return Object(Le.a)(WheelInput,[{key:"destroy",value:function destroy(){var e=this;this.events.forEach(function(t){return e.element.removeEventListener(t,e.handleEvent)})}},{key:"enableEventType",value:function enableEventType(e,t){"wheel"===e&&(this.options.enable=t)}},{key:"handleEvent",value:function handleEvent(e){if(this.options.enable){var t=e.deltaY;Yt.c.WheelEvent&&(Jt&&e.deltaMode===Yt.c.WheelEvent.DOM_DELTA_PIXEL&&(t/=Yt.c.devicePixelRatio),e.deltaMode===Yt.c.WheelEvent.DOM_DELTA_LINE&&(t*=40));var n={x:e.clientX,y:e.clientY};0!==t&&t%4.000244140625==0&&(t=Math.floor(t/4.000244140625)),e.shiftKey&&t&&(t*=.25),this._onWheel(e,-t,n)}}},{key:"_onWheel",value:function _onWheel(e,t,n){this.callback({type:"wheel",center:n,delta:t,srcEvent:e,pointerType:"mouse",target:e.target})}}]),WheelInput}(),en=Ht,tn=function(){function MoveInput(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(Re.a)(this,MoveInput),this.element=e,this.callback=t,this.pressed=!1,this.options=Object.assign({enable:!0},r),this.enableMoveEvent=this.options.enable,this.enableLeaveEvent=this.options.enable,this.enableOutEvent=this.options.enable,this.enableOverEvent=this.options.enable,this.events=en.concat(r.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach(function(t){return e.addEventListener(t,n.handleEvent)})}return Object(Le.a)(MoveInput,[{key:"destroy",value:function destroy(){var e=this;this.events.forEach(function(t){return e.element.removeEventListener(t,e.handleEvent)})}},{key:"enableEventType",value:function enableEventType(e,t){"pointermove"===e&&(this.enableMoveEvent=t),"pointerover"===e&&(this.enableOverEvent=t),"pointerout"===e&&(this.enableOutEvent=t),"pointerleave"===e&&(this.enableLeaveEvent=t)}},{key:"handleEvent",value:function handleEvent(e){this.handleOverEvent(e),this.handleOutEvent(e),this.handleLeaveEvent(e),this.handleMoveEvent(e)}},{key:"handleOverEvent",value:function handleOverEvent(e){this.enableOverEvent&&"mouseover"===e.type&&this.callback({type:"pointerover",srcEvent:e,pointerType:"mouse",target:e.target})}},{key:"handleOutEvent",value:function handleOutEvent(e){this.enableOutEvent&&"mouseout"===e.type&&this.callback({type:"pointerout",srcEvent:e,pointerType:"mouse",target:e.target})}},{key:"handleLeaveEvent",value:function handleLeaveEvent(e){this.enableLeaveEvent&&"mouseleave"===e.type&&this.callback({type:"pointerleave",srcEvent:e,pointerType:"mouse",target:e.target})}},{key:"handleMoveEvent",value:function handleMoveEvent(e){if(this.enableMoveEvent)switch(e.type){case"mousedown":e.button>=0&&(this.pressed=!0);break;case"mousemove":0===e.which&&(this.pressed=!1),this.pressed||this.callback({type:"pointermove",srcEvent:e,pointerType:"mouse",target:e.target});break;case"mouseup":this.pressed=!1}}}]),MoveInput}(),nn=qt,rn=function(){function KeyInput(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(Re.a)(this,KeyInput),this.element=e,this.callback=t,this.options=Object.assign({enable:!0},r),this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=nn.concat(r.events||[]),this.handleEvent=this.handleEvent.bind(this),e.tabIndex=1,e.style.outline="none",this.events.forEach(function(t){return e.addEventListener(t,n.handleEvent)})}return Object(Le.a)(KeyInput,[{key:"destroy",value:function destroy(){var e=this;this.events.forEach(function(t){return e.element.removeEventListener(t,e.handleEvent)})}},{key:"enableEventType",value:function enableEventType(e,t){"keydown"===e&&(this.enableDownEvent=t),"keyup"===e&&(this.enableUpEvent=t)}},{key:"handleEvent",value:function handleEvent(e){var t=e.target||e.srcElement;"INPUT"===t.tagName&&"text"===t.type||"TEXTAREA"===t.tagName||(this.enableDownEvent&&"keydown"===e.type&&this.callback({type:"keydown",srcEvent:e,key:e.key,target:e.target}),this.enableUpEvent&&"keyup"===e.type&&this.callback({type:"keyup",srcEvent:e,key:e.key,target:e.target}))}}]),KeyInput}(),on=function(){function ContextmenuInput(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(Re.a)(this,ContextmenuInput),this.element=e,this.callback=t,this.options=Object.assign({enable:!0},n),this.handleEvent=this.handleEvent.bind(this),e.addEventListener("contextmenu",this.handleEvent)}return Object(Le.a)(ContextmenuInput,[{key:"destroy",value:function destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}},{key:"enableEventType",value:function enableEventType(e,t){"contextmenu"===e&&(this.options.enable=t)}},{key:"handleEvent",value:function handleEvent(e){this.options.enable&&this.callback({type:"contextmenu",center:{x:e.clientX,y:e.clientY},srcEvent:e,pointerType:"mouse",target:e.target})}}]),ContextmenuInput}(),an=1,sn=2,ln=4,un={pointerdown:an,pointermove:sn,pointerup:ln,mousedown:an,mousemove:sn,mouseup:ln},cn=1,pn=2,hn=3,fn=0,dn=1,gn=2,mn=1,yn=2,vn=4;function whichButtons(e){var t=un[e.srcEvent.type];if(!t)return null;var n=e.srcEvent,r=n.buttons,i=n.button,o=n.which,a=!1,s=!1,l=!1;return t===ln||t===sn&&!Number.isFinite(r)?(a=o===cn,s=o===pn,l=o===hn):t===sn?(a=Boolean(r&mn),s=Boolean(r&vn),l=Boolean(r&yn)):t===an&&(a=i===fn,s=i===dn,l=i===gn),{leftButton:a,middleButton:s,rightButton:l}}function getOffsetPosition(e,t){var n=e.srcEvent;if(!e.center&&!Number.isFinite(n.clientX))return null;var r=e.center||{x:n.clientX,y:n.clientY},i=t.getBoundingClientRect(),o=i.width/t.offsetWidth,a=i.height/t.offsetHeight;return{center:r,offsetCenter:{x:(r.x-i.left-t.clientLeft)/o,y:(r.y-i.top-t.clientTop)/a}}}var _n=function(){function EventRegistrar(e){Object(Re.a)(this,EventRegistrar),this.eventManager=e,this.handlers=[],this.handlersByElement=new Map,this.handleEvent=this.handleEvent.bind(this)}return Object(Le.a)(EventRegistrar,[{key:"isEmpty",value:function isEmpty(){return 0===this.handlers.length}},{key:"add",value:function add(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"root",r=this.handlers,i=this.handlersByElement;i.has(n)||i.set(n,[]);var o={type:e,handler:t,srcElement:n};r.push(o),i.get(n).push(o)}},{key:"remove",value:function remove(e,t){for(var n=this.handlers,r=this.handlersByElement,i=n.length-1;i>=0;i--){var o=n[i];if(o.type===e&&o.handler===t){n.splice(i,1);var a=r.get(o.srcElement);a.splice(a.indexOf(o),1),0===a.length&&r.delete(o.srcElement)}}}},{key:"handleEvent",value:function handleEvent(e){if(!this.isEmpty()){for(var t=this._normalizeEvent(e),n=e.srcEvent.target;n&&n!==t.rootElement;){if(this._emit(t,n),t.handled)return;n=n.parentNode}this._emit(t,"root")}}},{key:"_emit",value:function _emit(e,t){var n=this.handlersByElement.get(t);if(n)for(var r=!1,i=function stopPropagation(){e.handled=!0},o=function stopImmediatePropagation(){e.handled=!0,r=!0},a=0;a<n.length;a++){var s=n[a],l=s.type;if((0,s.handler)(Object.assign({},e,{type:l,stopPropagation:i,stopImmediatePropagation:o})),r)break}}},{key:"_normalizeEvent",value:function _normalizeEvent(e){var t=this.eventManager.element;return Object.assign({},e,whichButtons(e),getOffsetPosition(e,t),{handled:!1,rootElement:t})}}]),EventRegistrar}(),bn={events:null,recognizers:null,Manager:zt?zt.Manager:function HammerManagerMock(e){var t={},n=function chainedNoop(){return t};return t.get=function(){return null},t.set=n,t.on=n,t.off=n,t.destroy=n,t.emit=n,t},touchAction:"none"},xn=function(){function EventManager(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(Re.a)(this,EventManager),this.options=Object.assign({},bn,t),this.events=new Map,this._onBasicInput=this._onBasicInput.bind(this),this._onOtherEvent=this._onOtherEvent.bind(this),this.setElement(e);var n=t.events;n&&this.on(n)}return Object(Le.a)(EventManager,[{key:"setElement",value:function setElement(e){var t=this;if(this.element&&this.destroy(),this.element=e,e){var n=this.options,r=n.Manager;this.manager=new r(e,{touchAction:n.touchAction,recognizers:n.recognizers||Ut}).on("hammer.input",this._onBasicInput),n.recognizers||Object.keys(Vt).forEach(function(e){var n=t.manager.get(e);n&&Vt[e].forEach(function(e){n.recognizeWith(e)})}),this.wheelInput=new $t(e,this._onOtherEvent,{enable:!1}),this.moveInput=new tn(e,this._onOtherEvent,{enable:!1}),this.keyInput=new rn(e,this._onOtherEvent,{enable:!1}),this.contextmenuInput=new on(e,this._onOtherEvent,{enable:!1});var i=!0,o=!1,a=void 0;try{for(var s,l=this.events[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var u=Object(T.a)(s.value,2),c=u[0],p=u[1];p.isEmpty()||(this._toggleRecognizer(p.recognizerName,!0),this.manager.on(c,p.handleEvent))}}catch(e){o=!0,a=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw a}}}}},{key:"destroy",value:function destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}},{key:"on",value:function on(e,t,n){if("string"==typeof e)this._addEventHandler(e,t,n);else for(var r in n=t,e)this._addEventHandler(r,e[r],n)}},{key:"off",value:function off(e,t){if("string"==typeof e)this._removeEventHandler(e,t);else for(var n in e)this._removeEventHandler(n,e[n])}},{key:"_toggleRecognizer",value:function _toggleRecognizer(e,t){var n=this.manager;if(n){var r=n.get(e);if(r&&r.options.enable!==t){r.set({enable:t});var i=Gt[e];i&&!this.options.recognizers&&i.forEach(function(i){var o=n.get(i);t?(o.requireFailure(e),r.dropRequireFailure(i)):o.dropRequireFailure(e)})}this.wheelInput.enableEventType(e,t),this.moveInput.enableEventType(e,t),this.keyInput.enableEventType(e,t),this.contextmenuInput.enableEventType(e,t)}}},{key:"_addEventHandler",value:function _addEventHandler(e,t,n){var r=this.manager,i=this.events,o=Zt[e]||e,a=i.get(o);a||(a=new _n(this),i.set(o,a),a.recognizerName=Kt[o]||o,r&&r.on(o,a.handleEvent)),this._toggleRecognizer(a.recognizerName,!0),a.add(e,t,n)}},{key:"_removeEventHandler",value:function _removeEventHandler(e,t){var n=this.events,r=Zt[e]||e,i=n.get(r);if(i&&(i.remove(e,t),i.isEmpty())){var o=i.recognizerName,a=!1,s=!0,l=!1,u=void 0;try{for(var c,p=n.values()[Symbol.iterator]();!(s=(c=p.next()).done);s=!0){var h=c.value;if(h.recognizerName===o&&!h.isEmpty()){a=!0;break}}}catch(e){l=!0,u=e}finally{try{s||null==p.return||p.return()}finally{if(l)throw u}}a||this._toggleRecognizer(o,!1)}}},{key:"_onBasicInput",value:function _onBasicInput(e){var t=e.srcEvent,n=Wt[t.type];n&&this.manager.emit(n,e)}},{key:"_onOtherEvent",value:function _onOtherEvent(e){this.manager.emit(e.type,e)}}]),EventManager}();function deck_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function deck_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function deck_noop(){}var wn={id:"deckgl-overlay",width:"100%",height:"100%",pickingRadius:0,layerFilter:null,glOptions:{},gl:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,_animate:!1,onWebGLInitialized:deck_noop,onResize:deck_noop,onViewStateChange:deck_noop,onBeforeRender:deck_noop,onAfterRender:deck_noop,onLayerClick:null,onLayerHover:null,onLoad:deck_noop,_onMetrics:null,getCursor:function getCursor(e){return e.isDragging?"grabbing":"grab"},debug:!1,drawPickingColors:!1},Sn=function(){function Deck(e){deck_classCallCheck(this,Deck),e=Object.assign({},wn,e),this.width=0,this.height=0,this.viewManager=null,this.layerManager=null,this.effectManager=null,this.stats=new De({id:"deck.gl"}),this._needsRedraw=!0,this.viewState=e.initialViewState||null,this.interactiveState={isDragging:!1},this._onEvent=this._onEvent.bind(this),this._onClick=this._onClick.bind(this),this._onPointerMove=this._onPointerMove.bind(this),this._onPointerLeave=this._onPointerLeave.bind(this),this._pickAndCallback=this._pickAndCallback.bind(this),this._onRendererInitialized=this._onRendererInitialized.bind(this),this._onRenderFrame=this._onRenderFrame.bind(this),this._onViewStateChange=this._onViewStateChange.bind(this),this._onInteractiveStateChange=this._onInteractiveStateChange.bind(this),e.gl||"undefined"!=typeof document&&(this.canvas=this._createCanvas(e)),this.animationLoop=this._createAnimationLoop(e),this.setProps(e),this.animationLoop.start()}var e,t,n;return e=Deck,(t=[{key:"finalize",value:function finalize(){this.animationLoop.stop(),this.animationLoop=null,this.layerManager&&(this.layerManager.finalize(),this.layerManager=null),this.viewManager&&(this.viewManager.finalize(),this.viewManager=null),this.eventManager&&this.eventManager.destroy()}},{key:"setProps",value:function setProps(e){this.stats.timeStart("deck.setProps"),e=Object.assign({},this.props,e),this.props=e,this._setCanvasSize(e);var t=Object.assign({},e,{views:this._getViews(e),width:this.width,height:this.height}),n=this._getViewState(e);n&&(t.viewState=n),this.viewManager&&this.viewManager.setProps(t),this.layerManager&&this.layerManager.setProps(t),this.animationLoop&&this.animationLoop.setProps(t),this.stats.timeEnd("deck.setProps")}},{key:"needsRedraw",value:function needsRedraw(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).clearRedrawFlags,t=void 0===e||e;if(this.props._animate)return"Deck._animate";var n=this._needsRedraw;t&&(this._needsRedraw=!1);var r=this.viewManager.needsRedraw({clearRedrawFlags:t}),i=this.layerManager.needsRedraw({clearRedrawFlags:t});return n=n||r||i}},{key:"getViews",value:function getViews(){return this.viewManager.views}},{key:"getViewports",value:function getViewports(e){return this.viewManager.getViewports(e)}},{key:"pickObject",value:function pickObject(e){var t=e.x,n=e.y,r=e.radius,i=void 0===r?0:r,o=e.layerIds,a=void 0===o?null:o;this.stats.timeStart("deck.pickObject");var s=this.layerManager.pickObject({x:t,y:n,radius:i,layerIds:a,viewports:this.getViewports({x:t,y:n}),mode:"query",depth:1});return this.stats.timeEnd("deck.pickObject"),s.length?s[0]:null}},{key:"pickMultipleObjects",value:function pickMultipleObjects(e){var t=e.x,n=e.y,r=e.radius,i=void 0===r?0:r,o=e.layerIds,a=void 0===o?null:o,s=e.depth,l=void 0===s?10:s;this.stats.timeStart("deck.pickMultipleObjects");var u=this.layerManager.pickObject({x:t,y:n,radius:i,layerIds:a,viewports:this.getViewports({x:t,y:n}),mode:"query",depth:l});return this.stats.timeEnd("deck.pickMultipleObjects"),u}},{key:"pickObjects",value:function pickObjects(e){var t=e.x,n=e.y,r=e.width,i=void 0===r?1:r,o=e.height,a=void 0===o?1:o,s=e.layerIds,l=void 0===s?null:s;this.stats.timeStart("deck.pickObjects");var u=this.layerManager.pickObjects({x:t,y:n,width:i,height:a,layerIds:l,viewports:this.getViewports({x:t,y:n,width:i,height:a})});return this.stats.timeEnd("deck.pickObjects"),u}},{key:"_createCanvas",value:function _createCanvas(e){var t=e.canvas;("string"==typeof t&&assert(t=document.getElementById(t)),t)||(t=document.createElement("canvas"),(e.parent||document.body).appendChild(t));var n=e.id,r=e.style;return t.id=n,Object.assign(t.style,r),t}},{key:"_setCanvasSize",value:function _setCanvasSize(e){if(this.canvas){var t=e.width,n=e.height;(t||0===t)&&(t=Number.isFinite(t)?"".concat(t,"px"):t,this.canvas.style.width=t),(n||0===n)&&(n=Number.isFinite(n)?"".concat(n,"px"):n,this.canvas.style.position="absolute",this.canvas.style.height=n)}}},{key:"_updateCanvasSize",value:function _updateCanvasSize(){if(this._checkForCanvasSizeChange()){var e=this.width,t=this.height;this.viewManager.setProps({width:e,height:t}),this.props.onResize({width:this.width,height:this.height})}}},{key:"_checkForCanvasSizeChange",value:function _checkForCanvasSizeChange(){var e=this.canvas;if(!e)return!1;var t=e.clientWidth||e.width,n=e.clientHeight||e.height;return(t!==this.width||n!==this.height)&&(this.width=t,this.height=n,!0)}},{key:"_createAnimationLoop",value:function _createAnimationLoop(e){var t=this,n=e.width,r=e.height,i=e.gl,a=e.glOptions,s=e.debug,l=e.useDevicePixels,u=e.autoResizeDrawingBuffer;return new o.a({width:n,height:r,useDevicePixels:l,autoResizeDrawingBuffer:u,onCreateContext:function onCreateContext(e){return i||Object(o.r)(Object.assign({},a,e,{canvas:t.canvas,debug:s}))},onInitialize:this._onRendererInitialized,onRender:this._onRenderFrame,onBeforeRender:e.onBeforeRender,onAfterRender:e.onAfterRender})}},{key:"_getViewState",value:function _getViewState(e){return e.viewState||this.viewState}},{key:"_getViews",value:function _getViews(e){var t=e.views||[new It({id:"default-view"})];return(t=Array.isArray(t)?t:[t]).length&&e.controller&&(t[0].props.controller=e.controller),t}},{key:"_pickAndCallback",value:function _pickAndCallback(e){var t=e.event.offsetCenter;if(t){var n=this.props.pickingRadius,r=this.layerManager.pickObject({x:t.x,y:t.y,radius:n,viewports:this.getViewports(t),mode:e.mode,depth:1,event:e.event});if(e.callback&&r){var i=r.find(function(e){return e.index>=0})||null;e.callback(i,r,e.event.srcEvent)}}}},{key:"_updateCursor",value:function _updateCursor(){this.canvas&&(this.canvas.style.cursor=this.props.getCursor(this.interactiveState))}},{key:"_updateAnimationProps",value:function _updateAnimationProps(e){this.layerManager.context.animationProps=e}},{key:"_setGLContext",value:function _setGLContext(e){if(!this.layerManager){if(this.canvas||(this.canvas=e.canvas,Object(o.D)(e,{enable:!0,copyState:!0})),Object(o.C)(e,{blend:!0,blendFunc:[K.a.SRC_ALPHA,K.a.ONE_MINUS_SRC_ALPHA,K.a.ONE,K.a.ONE_MINUS_SRC_ALPHA],polygonOffsetFill:!0,depthTest:!0,depthFunc:K.a.LEQUAL}),this.props.onWebGLInitialized(e),!this.props._customRender)for(var t in this.eventManager=new xn(e.canvas,{events:{click:this._onClick,pointermove:this._onPointerMove,pointerleave:this._onPointerLeave}}),h)this.eventManager.on(t,this._onEvent);this.viewManager=new Ye({eventManager:this.eventManager,onViewStateChange:this._onViewStateChange,onInteractiveStateChange:this._onInteractiveStateChange,views:this._getViews(this.props),viewState:this._getViewState(this.props),width:this.width,height:this.height}),assert(this.viewManager);var n=this.viewManager.getViewports()[0];this.layerManager=new Xe(e,{stats:this.stats,viewport:n}),this.effectManager=new Rt({gl:e,layerManager:this.layerManager});var r=!0,i=!1,a=void 0;try{for(var s,l=this.props.effects[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value;this.effectManager.addEffect(u)}}catch(e){i=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw a}}this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}}},{key:"_drawLayers",value:function _drawLayers(e){var t=this.layerManager.context.gl;Object(o.C)(t,this.props.parameters),this.props.onBeforeRender({gl:t}),this.layerManager.drawLayers({pass:"screen",viewports:this.viewManager.getViewports(),views:this.viewManager.getViews(),redrawReason:e,drawPickingColors:this.props.drawPickingColors,customRender:Boolean(this.props._customRender)}),this.props.onAfterRender({gl:t})}},{key:"_onRendererInitialized",value:function _onRendererInitialized(e){var t=e.gl;this._setGLContext(t)}},{key:"_onRenderFrame",value:function _onRenderFrame(e){if(this.stats.oneSecondPassed()){var t=this.stats.getStatsTable();if(this.stats.reset(),i.table(3,t)(),this.props._onMetrics){for(var n in t)t[n]=t[n].total;this.props._onMetrics(t)}}this._updateCanvasSize(),this._updateCursor(),this.layerManager.updateLayers(),this.stats.bump("fps"),this._updateAnimationProps(e);var r=this.needsRedraw({clearRedrawFlags:!0});r&&(this.stats.bump("redraw"),this.props._customRender?this.props._customRender():this._drawLayers(r))}},{key:"_onViewStateChange",value:function _onViewStateChange(e){var t=this.props.onViewStateChange(e)||e.viewState;this.viewState&&(this.viewState[e.viewId]=t,this.viewManager.setProps({viewState:t}))}},{key:"_onInteractiveStateChange",value:function _onInteractiveStateChange(e){var t=e.isDragging,n=void 0!==t&&t;n!==this.interactiveState.isDragging&&(this.interactiveState.isDragging=n)}},{key:"_onClick",value:function _onClick(e){this._pickAndCallback({callback:this.props.onLayerClick,event:e,mode:"click"})}},{key:"_onEvent",value:function _onEvent(e){var t=h[e.type],n=e.offsetCenter;if(t&&n){var r=this.layerManager.getLastPickedObject({x:n.x,y:n.y,viewports:this.getViewports(n)}),i=r.layer,o=i&&(i[t.handler]||i.props[t.handler]),a=this.props[t.handler],s=!1;o&&(s=o.call(i,r,e)),!s&&a&&a(r,e)}}},{key:"_onPointerMove",value:function _onPointerMove(e){e.leftButton||e.rightButton||this._pickAndCallback({callback:this.props.onLayerHover,event:e,mode:"hover"})}},{key:"_onPointerLeave",value:function _onPointerLeave(e){this.layerManager.pickObject({x:-1,y:-1,viewports:[],radius:1,mode:"hover"}),this.props.onLayerHover&&this.props.onLayerHover(null,[],e.srcEvent)}}])&&deck_defineProperties(e.prototype,t),n&&deck_defineProperties(e,n),Deck}();function composite_layer_typeof(e){return(composite_layer_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function composite_layer_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function composite_layer_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function composite_layer_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _get(e,t,n){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var r=_superPropBase(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=composite_layer_getPrototypeOf(e)););return e}function composite_layer_getPrototypeOf(e){return(composite_layer_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function composite_layer_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&composite_layer_setPrototypeOf(e,t)}function composite_layer_setPrototypeOf(e,t){return(composite_layer_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}Sn.getPropTypes=function deck_getPropTypes(e){return{id:e.string,width:e.oneOfType([e.number,e.string]),height:e.oneOfType([e.number,e.string]),layers:e.oneOfType([e.object,e.array]),layerFilter:e.func,views:e.oneOfType([e.object,e.array]),viewState:e.object,effects:e.arrayOf(e.instanceOf(Mt)),controller:e.oneOfType([e.func,e.bool,e.object]),gl:e.object,glOptions:e.object,parameters:e.object,pickingRadius:e.number,useDevicePixels:e.bool,onWebGLInitialized:e.func,onResize:e.func,onViewStateChange:e.func,onBeforeRender:e.func,onAfterRender:e.func,onLayerClick:e.func,onLayerHover:e.func,onLoad:e.func,debug:e.bool,drawPickingColors:e.bool,_animate:e.bool}},Sn.defaultProps=wn;var En=function(e){function CompositeLayer(){return composite_layer_classCallCheck(this,CompositeLayer),e=this,!(t=composite_layer_getPrototypeOf(CompositeLayer).apply(this,arguments))||"object"!==composite_layer_typeof(t)&&"function"!=typeof t?composite_layer_assertThisInitialized(e):t;var e,t}var t,n,r;return composite_layer_inherits(CompositeLayer,Ce),t=CompositeLayer,(n=[{key:"getSubLayers",value:function getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}},{key:"initializeState",value:function initializeState(){}},{key:"setState",value:function setState(e){_get(composite_layer_getPrototypeOf(CompositeLayer.prototype),"setState",this).call(this,e),this.setLayerNeedsUpdate()}},{key:"getPickingInfo",value:function getPickingInfo(e){return e.info}},{key:"renderLayers",value:function renderLayers(){return null}},{key:"shouldRenderSubLayer",value:function shouldRenderSubLayer(e,t){var n=this.props._subLayerProps;return t&&t.length||n&&n[e]}},{key:"getSubLayerClass",value:function getSubLayerClass(e,t){var n=this.props._subLayerProps;return n&&n[e]&&n[e].type||t}},{key:"getSubLayerProps",value:function getSubLayerProps(e){var t=this.props,n=t.opacity,r=t.pickable,i=t.visible,o=t.parameters,a=t.getPolygonOffset,s=t.highlightedObjectIndex,l=t.autoHighlight,u=t.highlightColor,c=t.coordinateSystem,p=t.coordinateOrigin,h=t.wrapLongitude,f=t.positionFormat,d=t.modelMatrix,g=t._subLayerProps,m={opacity:n,pickable:r,visible:i,parameters:o,getPolygonOffset:a,highlightedObjectIndex:s,autoHighlight:l,highlightColor:u,coordinateSystem:c,coordinateOrigin:p,wrapLongitude:h,positionFormat:f,modelMatrix:d};return e&&Object.assign(m,e,g&&g[e.id],{id:"".concat(this.props.id,"-").concat(e.id),updateTriggers:Object.assign({all:this.props.updateTriggers.all},e.updateTriggers)}),m}},{key:"_getAttributeManager",value:function _getAttributeManager(){return null}},{key:"_renderLayers",value:function _renderLayers(){var e=this.internalState.subLayers;e&&!this.needsUpdate()?i.log(3,"Composite layer reused subLayers ".concat(this),this.internalState.subLayers)():(e=flatten(e=this.renderLayers(),{filter:Boolean}),this.internalState.subLayers=e,i.log(2,"Composite layer rendered new subLayers ".concat(this),e)());var t=!0,n=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){o.value.parent=this}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}},{key:"isComposite",get:function get(){return!0}}])&&composite_layer_defineProperties(t.prototype,n),r&&composite_layer_defineProperties(t,r),CompositeLayer}();function first_person_controller_typeof(e){return(first_person_controller_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function first_person_controller_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function first_person_controller_iterableToArrayLimit(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}function first_person_controller_arrayWithHoles(e){if(Array.isArray(e))return e}function first_person_controller_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function first_person_controller_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function first_person_controller_possibleConstructorReturn(e,t){return!t||"object"!==first_person_controller_typeof(t)&&"function"!=typeof t?first_person_controller_assertThisInitialized(e):t}function first_person_controller_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function first_person_controller_getPrototypeOf(e){return(first_person_controller_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function first_person_controller_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&first_person_controller_setPrototypeOf(e,t)}function first_person_controller_setPrototypeOf(e,t){return(first_person_controller_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}En.layerName="CompositeLayer";function ensureFinite(e,t){return Number.isFinite(e)?e:t}var Pn=function(e){function FirstPersonState(e){var t,n=e.width,r=e.height,i=e.position,o=e.bearing,a=e.pitch,s=e.longitude,l=e.latitude,u=e.zoom,c=(e.syncBearing,e.bounds,e.startPanEventPosition),p=e.startPanPosition,h=e.startRotateCenter,f=e.startRotateViewport,d=e.startZoomPos,g=e.startZoom;return first_person_controller_classCallCheck(this,FirstPersonState),(t=first_person_controller_possibleConstructorReturn(this,first_person_controller_getPrototypeOf(FirstPersonState).call(this,{width:n,height:r,position:i,bearing:o,pitch:a,longitude:s,latitude:l,zoom:u})))._interactiveState={startPanEventPosition:c,startPanPosition:p,startRotateCenter:h,startRotateViewport:f,startZoomPos:d,startZoom:g},t}var t,n,r;return first_person_controller_inherits(FirstPersonState,St),t=FirstPersonState,(n=[{key:"getInteractiveState",value:function getInteractiveState(){return this._interactiveState}},{key:"panStart",value:function panStart(e){var t=e.pos,n=this._viewportProps,r=n.translationX,i=n.translationY;return this._getUpdatedState({startPanPosition:[r,i],startPanEventPosition:t})}},{key:"pan",value:function pan(e){var t=e.pos,n=e.startPos,r=this._interactiveState.startPanEventPosition||n;if(!r)return this;var i,o,a=this._interactiveState.startPanPosition||[],s=(o=2,first_person_controller_arrayWithHoles(i=a)||first_person_controller_iterableToArrayLimit(i,o)||first_person_controller_nonIterableRest()),l=s[0],u=s[1];l=ensureFinite(l,this._viewportProps.translationX),u=ensureFinite(u,this._viewportProps.translationY);var c=t[0]-r[0],p=t[1]-r[1];return this._getUpdatedState({translationX:l+c,translationY:u-p})}},{key:"panEnd",value:function panEnd(){return this._getUpdatedState({startPanPosition:null,startPanPos:null})}},{key:"rotateStart",value:function rotateStart(e){e.pos;return this._getUpdatedState({startRotateCenter:this._viewportProps.position,startRotateViewport:this._viewportProps})}},{key:"rotate",value:function rotate(e){var t=e.deltaScaleX,n=e.deltaScaleY;if(!this._interactiveState.startRotateCenter)return this;var r=this._viewportProps,i=r.bearing,o=r.pitch;return this._getUpdatedState({bearing:i+10*t,pitch:o-10*n})}},{key:"rotateEnd",value:function rotateEnd(){return this._getUpdatedState({startRotateCenter:null,startRotateViewport:null})}},{key:"zoomStart",value:function zoomStart(e){var t=e.pos;return this._getUpdatedState({startZoomPos:t,startZoom:this._viewportProps.zoom})}},{key:"zoom",value:function zoom(e){var t=e.pos,n=e.startPos,r=e.scale,i=this._viewportProps,zoom=i.zoom,o=i.minZoom,a=i.maxZoom,s=i.width,l=i.height,u=(i.translationX,i.translationY,this._interactiveState.startZoomPos||n||t),c=Object(Fe.b)(zoom*r,o,a);t[0],u[0],t[1],u[1],u[0],u[1];return c/zoom<1?this.moveBackward():this.moveForward()}},{key:"zoomEnd",value:function zoomEnd(){return this._getUpdatedState({startZoomPos:null,startZoom:null})}},{key:"moveLeft",value:function moveLeft(){var e=this._viewportProps.bearing-2;return this._getUpdatedState({bearing:e})}},{key:"moveRight",value:function moveRight(){var e=this._viewportProps.bearing+2;return this._getUpdatedState({bearing:e})}},{key:"moveForward",value:function moveForward(){var e=this._viewportProps.position,t=this.getDirection(),n=new Be.a(t).normalize().scale(1);return this._getUpdatedState({position:new Be.a(e).add(n)})}},{key:"moveBackward",value:function moveBackward(){var e=this._viewportProps.position,t=this.getDirection(),n=new Be.a(t).normalize().scale(-1);return this._getUpdatedState({position:new Be.a(e).add(n)})}},{key:"moveUp",value:function moveUp(){var e=this._viewportProps.position;return this._getUpdatedState({position:new Be.a(e).add([0,0,1])})}},{key:"moveDown",value:function moveDown(){var e=this._viewportProps.position,t=e[2]>=1?[0,0,-1]:[0,0,0];return this._getUpdatedState({position:new Be.a(e).add(t)})}},{key:"zoomIn",value:function zoomIn(){return this._getUpdatedState({zoom:this._viewportProps.zoom+.2})}},{key:"zoomOut",value:function zoomOut(){return this._getUpdatedState({zoom:this._viewportProps.zoom-.2})}},{key:"_getUpdatedState",value:function _getUpdatedState(e){return new FirstPersonState(Object.assign({},this._viewportProps,this._interactiveState,e))}}])&&first_person_controller_defineProperties(t.prototype,n),r&&first_person_controller_defineProperties(t,r),FirstPersonState}(),Cn=function(e){function FirstPersonController(e){return first_person_controller_classCallCheck(this,FirstPersonController),first_person_controller_possibleConstructorReturn(this,first_person_controller_getPrototypeOf(FirstPersonController).call(this,Pn,e))}return first_person_controller_inherits(FirstPersonController,_t),FirstPersonController}();function first_person_view_typeof(e){return(first_person_view_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function first_person_view_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function first_person_view_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function first_person_view_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function first_person_view_getPrototypeOf(e){return(first_person_view_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function first_person_view_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&first_person_view_setPrototypeOf(e,t)}function first_person_view_setPrototypeOf(e,t){return(first_person_view_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function getDirectionFromBearingAndPitch(e){var t=e.bearing,n=e.pitch;return new xt({bearing:t,pitch:n}).toVector3().normalize()}function third_person_view_typeof(e){return(third_person_view_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function third_person_view_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function third_person_view_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function third_person_view_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function third_person_view_getPrototypeOf(e){return(third_person_view_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function third_person_view_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&third_person_view_setPrototypeOf(e,t)}function third_person_view_setPrototypeOf(e,t){return(third_person_view_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function third_person_view_getDirectionFromBearingAndPitch(e){var t=e.bearing,n=e.pitch;return new xt({bearing:t,pitch:n}).toVector3().normalize()}function orbit_viewport_typeof(e){return(orbit_viewport_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function orbit_viewport_slicedToArray(e,t){return orbit_viewport_arrayWithHoles(e)||orbit_viewport_iterableToArrayLimit(e,t)||orbit_viewport_nonIterableRest()}function orbit_viewport_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function orbit_viewport_iterableToArrayLimit(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}function orbit_viewport_arrayWithHoles(e){if(Array.isArray(e))return e}function orbit_viewport_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function orbit_viewport_iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function orbit_viewport_arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function orbit_viewport_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function orbit_viewport_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function orbit_viewport_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function orbit_viewport_getPrototypeOf(e){return(orbit_viewport_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function orbit_viewport_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&orbit_viewport_setPrototypeOf(e,t)}function orbit_viewport_setPrototypeOf(e,t){return(orbit_viewport_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}(function(e){function FirstPersonView(){return first_person_view_classCallCheck(this,FirstPersonView),e=this,!(t=first_person_view_getPrototypeOf(FirstPersonView).apply(this,arguments))||"object"!==first_person_view_typeof(t)&&"function"!=typeof t?first_person_view_assertThisInitialized(e):t;var e,t}var t,n,r;return first_person_view_inherits(FirstPersonView,Ze),t=FirstPersonView,(n=[{key:"_getViewport",value:function _getViewport(e){var t=e.viewState,n=t.modelMatrix,r=void 0===n?null:n,i=t.bearing,o=t.up,a=void 0===o?[0,0,1]:o,s=getDirectionFromBearingAndPitch({bearing:i,pitch:89}),l=r?r.transformDirection(s):s,u=(new Ne.a).lookAt({eye:[0,0,0],center:l,up:a});return new We(Object.assign({},e,{zoom:null,viewMatrix:u}))}},{key:"controller",get:function get(){return this._getControllerProps({type:Cn})}}])&&first_person_view_defineProperties(t.prototype,n),r&&first_person_view_defineProperties(t,r),FirstPersonView}()).displayName="FirstPersonView",(function(e){function ThirdPersonView(){return third_person_view_classCallCheck(this,ThirdPersonView),e=this,!(t=third_person_view_getPrototypeOf(ThirdPersonView).apply(this,arguments))||"object"!==third_person_view_typeof(t)&&"function"!=typeof t?third_person_view_assertThisInitialized(e):t;var e,t}var t,n,r;return third_person_view_inherits(ThirdPersonView,Ze),t=ThirdPersonView,(n=[{key:"_getViewport",value:function _getViewport(e){var t=e.viewState,n=t.bearing,r=t.pitch,i=t.position,o=t.up,a=50*t.zoom,s=third_person_view_getDirectionFromBearingAndPitch({bearing:n,pitch:r}).scale(-a).multiply(new Be.a(1,1,-1)),l=(new Ne.a).multiplyRight((new Ne.a).lookAt({eye:s,center:i,up:o}));return new We(Object.assign({},e,{id:this.id,zoom:null,viewMatrix:l}))}}])&&third_person_view_defineProperties(t.prototype,n),r&&third_person_view_defineProperties(t,r),ThirdPersonView}()).displayName="ThirdPersonView";var kn=Math.PI/180,Tn=function(e){function OrbitViewport(e){var t,n=e.id,r=void 0===n?"orbit-viewport":n,i=e.width,o=e.height,a=e.distance,s=e.rotationX,l=void 0===s?0:s,c=e.rotationOrbit,p=void 0===c?0:c,h=e.orbitAxis,f=void 0===h?"Z":h,d=e.lookAt,g=void 0===d?[0,0,0]:d,m=e.up,y=void 0===m?[0,1,0]:m,v=e.fov,_=void 0===v?75:v,b=e.near,x=void 0===b?1:b,w=e.far,S=void 0===w?100:w,E=e.zoom,P=void 0===E?1:E;orbit_viewport_classCallCheck(this,OrbitViewport);var C=u.k([],[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],-l/180*Math.PI);"Z"===f?u.m(C,C,-p/180*Math.PI):u.l(C,C,-p/180*Math.PI);var k=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];u.n(k,k,[P,P,P]),u.o(k,k,[-g[0],-g[1],-g[2]]);var T,A,O=u.f([],[0,0,a],[0,0,0],y),I=_*kn,R=i/o,L=u.i([],I,R,x,S);return T=this,(t=!(A=orbit_viewport_getPrototypeOf(OrbitViewport).call(this,{id:r,viewMatrix:u.g(O,O,u.g(C,C,k)),projectionMatrix:L,width:i,height:o}))||"object"!==orbit_viewport_typeof(A)&&"function"!=typeof A?orbit_viewport_assertThisInitialized(T):A).width=i,t.height=o,t.distance=a,t.rotationX=l,t.rotationOrbit=p,t.orbitAxis=f,t.lookAt=g,t.up=y,t.fov=_,t.near=x,t.far=S,t.zoom=P,t}var t,n,r;return orbit_viewport_inherits(OrbitViewport,We),t=OrbitViewport,(n=[{key:"project",value:function project(e){var t,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).topLeft,r=void 0!==n&&n,i=orbit_viewport_slicedToArray(math_utils_transformVector(this.pixelProjectionMatrix,[].concat(orbit_viewport_arrayWithoutHoles(t=e)||orbit_viewport_iterableToArray(t)||orbit_viewport_nonIterableSpread(),[1])),3),o=i[0],a=i[1],s=i[2];return[o,r?this.height-a:a,s]}},{key:"unproject",value:function unproject(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).topLeft,n=void 0!==t&&t,r=orbit_viewport_slicedToArray(e,3),i=r[0],o=r[1],a=r[2],s=n?this.height-o:o;return math_utils_transformVector(this.pixelUnprojectionMatrix,[i,s,a,1])}},{key:"getDistance",value:function getDistance(e){var t=e.boundingBox,n=e.fov;return Math.max(t[0],t[1],t[2])/2/Math.tan(n/180*Math.PI/2)}},{key:"fitBounds",value:function fitBounds(e){var t=this.width,n=this.height,r=this.rotationX,i=this.rotationOrbit,o=this.orbitAxis,a=this.lookAt,s=this.up,l=this.fov;return new OrbitViewport({width:t,height:n,rotationX:r,rotationOrbit:i,orbitAxis:o,up:s,fov:l,near:this.near,far:this.far,zoom:this.zoom,lookAt:a,distance:this.getDistance({boundingBox:e,fov:l})})}}])&&orbit_viewport_defineProperties(t.prototype,n),r&&orbit_viewport_defineProperties(t,r),OrbitViewport}();function orbit_controller_typeof(e){return(orbit_controller_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function orbit_controller_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function orbit_controller_getPrototypeOf(e){return(orbit_controller_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function orbit_controller_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&orbit_controller_setPrototypeOf(e,t)}function orbit_controller_setPrototypeOf(e,t){return(orbit_controller_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function orbit_controller_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function orbit_controller_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function orbit_controller_createClass(e,t,n){return t&&orbit_controller_defineProperties(e.prototype,t),n&&orbit_controller_defineProperties(e,n),e}Tn.displayName="OrbitViewport";var An={transitionDuration:300,transitionEasing:function transitionEasing(e){return e},transitionInterpolator:new at(["zoom"]),transitionInterruption:lt},On={lookAt:[0,0,0],rotationX:0,rotationOrbit:0,fov:50,near:1,far:100,translationX:0,translationY:0,zoom:1},In={minZoom:0,maxZoom:1/0};function orbit_controller_ensureFinite(e,t){return Number.isFinite(e)?e:t}var Rn=function(){function OrbitState(e){var t=e.width,n=e.height,r=e.distance,i=e.rotationX,o=e.rotationOrbit,a=e.orbitAxis,s=e.bounds,l=e.lookAt,u=e.fov,c=e.near,p=e.far,h=e.translationX,f=e.translationY,d=e.zoom,g=e.minZoom,m=e.maxZoom,y=e.startPanViewport,v=e.startPanPos,_=e.isPanning,b=e.startRotateViewport,x=e.isRotating,w=e.startZoomViewport,S=e.startZoomPos;orbit_controller_classCallCheck(this,OrbitState),assert(Number.isFinite(t),"`width` must be supplied"),assert(Number.isFinite(n),"`height` must be supplied"),assert(Number.isFinite(r),"`distance` must be supplied"),this._viewportProps=this._applyConstraints({width:t,height:n,distance:r,rotationX:orbit_controller_ensureFinite(i,On.rotationX),rotationOrbit:orbit_controller_ensureFinite(o,On.rotationOrbit),orbitAxis:a,bounds:s,lookAt:l||On.lookAt,fov:orbit_controller_ensureFinite(u,On.fov),near:orbit_controller_ensureFinite(c,On.near),far:orbit_controller_ensureFinite(p,On.far),translationX:orbit_controller_ensureFinite(h,On.translationX),translationY:orbit_controller_ensureFinite(f,On.translationY),zoom:orbit_controller_ensureFinite(d,On.zoom),minZoom:orbit_controller_ensureFinite(g,In.minZoom),maxZoom:orbit_controller_ensureFinite(m,In.maxZoom)}),this._interactiveState={startPanViewport:y,startPanPos:v,isPanning:_,startRotateViewport:b,isRotating:x,startZoomViewport:w,startZoomPos:S}}return orbit_controller_createClass(OrbitState,[{key:"getViewportProps",value:function getViewportProps(){return this._viewportProps}},{key:"getInteractiveState",value:function getInteractiveState(){return this._interactiveState}},{key:"panStart",value:function panStart(e){var t=e.pos,n=new Tn(this._viewportProps);return this._getUpdatedOrbitState({startPanPos:t,startPanViewport:n})}},{key:"pan",value:function pan(e){var t=e.pos,n=e.startPos;if(this._interactiveState.isRotating)return this._getUpdatedOrbitState();var r=this._interactiveState.startPanPos||n;assert(r,"`startPanPos` props is required");var i=this._interactiveState.startPanViewport||new Tn(this._viewportProps),o=t[0]-r[0],a=t[1]-r[1],s=i.project(i.lookAt),l=i.unproject([s[0]-o,s[1]-a,s[2]]);return this._getUpdatedOrbitState({lookAt:l,isPanning:!0})}},{key:"panEnd",value:function panEnd(){return this._getUpdatedOrbitState({startPanViewport:null,startPanPos:null,isPanning:null})}},{key:"rotateStart",value:function rotateStart(e){e.pos;var t=new Tn(this._viewportProps);return this._getUpdatedOrbitState({startRotateViewport:t})}},{key:"rotate",value:function rotate(e){var t=e.deltaScaleX,n=e.deltaScaleY;if(this._interactiveState.isPanning)return this._getUpdatedOrbitState();var r=this._interactiveState.startRotateViewport||{},i=r.rotationX,o=r.rotationOrbit;i=orbit_controller_ensureFinite(i,this._viewportProps.rotationX),o=orbit_controller_ensureFinite(o,this._viewportProps.rotationOrbit);var a=Object(Fe.b)(i-180*n,-89.999,89.999),s=(o-180*t)%360;return this._getUpdatedOrbitState({rotationX:a,rotationOrbit:s,isRotating:!0})}},{key:"rotateEnd",value:function rotateEnd(){return this._getUpdatedOrbitState({startRotateViewport:null,isRotating:null})}},{key:"shortestPathFrom",value:function shortestPathFrom(e){return Object.assign({},this._viewportProps)}},{key:"zoomStart",value:function zoomStart(e){var t=e.pos,n=new Tn(this._viewportProps);return this._getUpdatedOrbitState({startZoomViewport:n,startZoomPos:t})}},{key:"zoom",value:function zoom(e){var t=e.pos,n=e.startPos,r=e.scale,i=this._viewportProps,zoom=i.zoom,o=i.minZoom,a=i.maxZoom,s=i.width,l=i.height,u=this._interactiveState.startZoomPos||n||t,c=this._interactiveState.startZoomViewport||new Tn(this._viewportProps),p=Object(Fe.b)(zoom*r,o,a),h=t[0]-u[0],f=t[1]-u[1],d=u[0]-s/2,g=l/2-u[1],m=c.project(c.lookAt),y=m[0]-d+d*p/zoom+h,v=m[1]+g-g*p/zoom-f,_=c.unproject([y,v,m[2]]);return this._getUpdatedOrbitState({lookAt:_,zoom:p})}},{key:"zoomEnd",value:function zoomEnd(){return this._getUpdatedOrbitState({startZoomPos:null})}},{key:"_getUpdatedOrbitState",value:function _getUpdatedOrbitState(e){return new OrbitState(Object.assign({},this._viewportProps,this._interactiveState,e))}},{key:"_applyConstraints",value:function _applyConstraints(e){var t=e.maxZoom,n=e.minZoom,r=e.zoom;return e.zoom=r>t?t:r,e.zoom=r<n?n:r,e}}]),OrbitState}(),Ln=function(e){function OrbitController(e){return orbit_controller_classCallCheck(this,OrbitController),t=this,!(n=orbit_controller_getPrototypeOf(OrbitController).call(this,Rn,e))||"object"!==orbit_controller_typeof(n)&&"function"!=typeof n?orbit_controller_assertThisInitialized(t):n;var t,n}return orbit_controller_inherits(OrbitController,_t),orbit_controller_createClass(OrbitController,[{key:"_getTransitionProps",value:function _getTransitionProps(){return An}}]),OrbitController}();function orbit_view_typeof(e){return(orbit_view_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function orbit_view_slicedToArray(e,t){return orbit_view_arrayWithHoles(e)||orbit_view_iterableToArrayLimit(e,t)||orbit_view_nonIterableRest()}function orbit_view_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function orbit_view_iterableToArrayLimit(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}function orbit_view_arrayWithHoles(e){if(Array.isArray(e))return e}function orbit_view_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function orbit_view_iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function orbit_view_arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function orbit_view_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function orbit_view_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function orbit_view_createClass(e,t,n){return t&&orbit_view_defineProperties(e.prototype,t),n&&orbit_view_defineProperties(e,n),e}function orbit_view_possibleConstructorReturn(e,t){return!t||"object"!==orbit_view_typeof(t)&&"function"!=typeof t?orbit_view_assertThisInitialized(e):t}function orbit_view_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function orbit_view_getPrototypeOf(e){return(orbit_view_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function orbit_view_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&orbit_view_setPrototypeOf(e,t)}function orbit_view_setPrototypeOf(e,t){return(orbit_view_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var Mn=Math.PI/180,jn=function(e){function OrbitViewport(){return orbit_view_classCallCheck(this,OrbitViewport),orbit_view_possibleConstructorReturn(this,orbit_view_getPrototypeOf(OrbitViewport).apply(this,arguments))}return orbit_view_inherits(OrbitViewport,We),orbit_view_createClass(OrbitViewport,[{key:"project",value:function project(e){var t,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).topLeft,r=void 0!==n&&n,i=orbit_view_slicedToArray(math_utils_transformVector(this.pixelProjectionMatrix,[].concat(orbit_view_arrayWithoutHoles(t=e)||orbit_view_iterableToArray(t)||orbit_view_nonIterableSpread(),[1])),3),o=i[0],a=i[1],s=i[2];return[o,r?this.height-a:a,s]}},{key:"unproject",value:function unproject(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).topLeft,n=void 0!==t&&t,r=orbit_view_slicedToArray(e,3),i=r[0],o=r[1],a=r[2],s=n?this.height-o:o;return math_utils_transformVector(this.pixelUnprojectionMatrix,[i,s,a,1])}}]),OrbitViewport}();function perspective_view_typeof(e){return(perspective_view_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function perspective_view_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function perspective_view_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function perspective_view_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function perspective_view_getPrototypeOf(e){return(perspective_view_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function perspective_view_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&perspective_view_setPrototypeOf(e,t)}function perspective_view_setPrototypeOf(e,t){return(perspective_view_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}(function(e){function OrbitView(){return orbit_view_classCallCheck(this,OrbitView),orbit_view_possibleConstructorReturn(this,orbit_view_getPrototypeOf(OrbitView).apply(this,arguments))}return orbit_view_inherits(OrbitView,Ze),orbit_view_createClass(OrbitView,[{key:"_getViewport",value:function _getViewport(e){var t=e.viewState,n=e.width||1,r=e.height||1,i=e.fov||e.fovy||t.fovy||75,o=e.near||t.near||1,a=e.far||t.far||100,s=Number.isFinite(t.aspect)?t.aspect:n/r,l=i*Mn;return new jn({id:this.id,viewMatrix:this._getViewMatrix(e.viewState),projectionMatrix:u.i([],l,s,o,a),x:e.x,y:e.y,width:n,height:r})}},{key:"_getViewMatrix",value:function _getViewMatrix(e){var t=e.distance,n=e.rotationX,r=void 0===n?0:n,i=e.rotationOrbit,o=void 0===i?0:i,a=e.orbitAxis,s=void 0===a?"Z":a,l=e.lookAt,c=void 0===l?[0,0,0]:l,p=e.up,h=void 0===p?[0,1,0]:p,f=e.zoom,d=void 0===f?1:f,g=u.k([],[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],-r/180*Math.PI);"Z"===s?u.m(g,g,-o/180*Math.PI):u.l(g,g,-o/180*Math.PI);var m=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];u.n(m,m,[d,d,d]),u.o(m,m,[-c[0],-c[1],-c[2]]);var y=u.f([],[0,0,t],[0,0,0],h);return u.g(y,y,u.g(g,g,m)),y}},{key:"fitBounds",value:function fitBounds(e,t){var n=this.width,r=this.height,i=this.fov,o=this.near,a=this.far;return this._getViewport({width:n,height:r,fov:i,near:o,far:a})}},{key:"controller",get:function get(){return this._getControllerProps({type:Ln})}}],[{key:"getDistance",value:function getDistance(e){var t=e.boundingBox,n=e.fov;return Math.max(t[0],t[1],t[2])/2/Math.tan(n/180*Math.PI/2)}}]),OrbitView}()).displayName="OrbitView";var Dn=Math.PI/180;(function(e){function PerspectiveView(){return perspective_view_classCallCheck(this,PerspectiveView),e=this,!(t=perspective_view_getPrototypeOf(PerspectiveView).apply(this,arguments))||"object"!==perspective_view_typeof(t)&&"function"!=typeof t?perspective_view_assertThisInitialized(e):t;var e,t}var t,n,r;return perspective_view_inherits(PerspectiveView,Ze),t=PerspectiveView,(n=[{key:"_getViewport",value:function _getViewport(e){var t=e.x,n=e.y,r=e.width,i=e.height,o=e.viewState,a=o.eye,s=o.lookAt,l=void 0===s?[0,0,0]:s,c=o.up,p=void 0===c?[0,1,0]:c,h=e.fovy||o.fovy||75,f=e.near||o.near||1,d=e.far||o.far||100,g=Number.isFinite(o.aspect)?o.aspect:r/i,m=h*Dn;return new We({id:this.id,x:t,y:n,width:r,height:i,viewMatrix:u.f([],a,l,p),projectionMatrix:u.i([],m,g,f,d)})}}])&&perspective_view_defineProperties(t.prototype,n),r&&perspective_view_defineProperties(t,r),PerspectiveView}()).displayName="PerspectiveView";var Fn=n(190);function orthographic_controller_typeof(e){return(orthographic_controller_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function orthographic_controller_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function orthographic_controller_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function orthographic_controller_createClass(e,t,n){return t&&orthographic_controller_defineProperties(e.prototype,t),n&&orthographic_controller_defineProperties(e,n),e}function orthographic_controller_possibleConstructorReturn(e,t){return!t||"object"!==orthographic_controller_typeof(t)&&"function"!=typeof t?orthographic_controller_assertThisInitialized(e):t}function orthographic_controller_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function orthographic_controller_getPrototypeOf(e){return(orthographic_controller_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function orthographic_controller_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&orthographic_controller_setPrototypeOf(e,t)}function orthographic_controller_setPrototypeOf(e,t){return(orthographic_controller_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var Nn={zoom:0,offset:[0,0],minZoom:-10,maxZoom:10},Bn=function zoom2Scale(e){return Math.pow(2,e)},zn=function(e){function OrthographicState(e){var t,n=e.width,r=e.height,i=e.offset,o=void 0===i?Nn.offset:i,a=e.zoom,s=void 0===a?Nn.zoom:a,l=e.minZoom,u=void 0===l?Nn.minZoom:l,c=e.maxZoom,p=void 0===c?Nn.maxZoom:c,h=e.startPanPosition,f=e.startPanOffset,d=e.startZoomPosition,g=e.startZoom;return orthographic_controller_classCallCheck(this,OrthographicState),(t=orthographic_controller_possibleConstructorReturn(this,orthographic_controller_getPrototypeOf(OrthographicState).call(this,{width:n,height:r,offset:o,zoom:s,minZoom:u,maxZoom:p})))._interactiveState={startPanPosition:h,startPanOffset:f,startZoomPosition:d,startZoom:g},t}return orthographic_controller_inherits(OrthographicState,St),orthographic_controller_createClass(OrthographicState,[{key:"getInteractiveState",value:function getInteractiveState(){return this._interactiveState}},{key:"panStart",value:function panStart(e){var t=e.pos,n=this._viewportProps.offset;return this._getUpdatedState({startPanPosition:t,startPanOffset:n})}},{key:"pan",value:function pan(e){var t=e.pos,n=this._interactiveState,r=n.startPanPosition,i=n.startPanOffset,o=new Fn.a(t).subtract(r);return this._getUpdatedState({offset:new Fn.a(i).subtract(o)})}},{key:"panEnd",value:function panEnd(){return this._getUpdatedState({startPanPosition:null,startPanOffset:null})}},{key:"rotateStart",value:function rotateStart(e){e.pos;return this}},{key:"rotate",value:function rotate(e){e.deltaScaleX,e.deltaScaleY;return this}},{key:"rotateEnd",value:function rotateEnd(){return this}},{key:"_calculateNewZoom",value:function _calculateNewZoom(e){var t=e.scale,n=e.startZoom,r=this._viewportProps,i=r.maxZoom,o=r.minZoom,a=n+Math.log2(t);return Object(Fe.b)(a,o,i)}},{key:"zoomStart",value:function zoomStart(e){var t=e.pos;return this._getUpdatedState({startZoomPosition:t,startZoom:this._viewportProps.zoom})}},{key:"zoom",value:function zoom(e){var t=e.pos,n=e.startPos,r=e.scale,i=this._viewportProps,zoom=i.zoom,o=i.width,a=i.height,s=i.offset,l=this._interactiveState,u=l.startZoom,c=l.startZoomPosition;Number.isFinite(u)||(u=zoom,c=n||t);var p=this._calculateNewZoom({scale:r,startZoom:u}),h=Bn(u),f=Bn(p),d=o/2-s[0],g=a/2-s[1],m=(c[0]-d)*(f/h-1),y=(c[1]-g)*(f/h-1);return this._getUpdatedState({zoom:p,offset:[s[0]+m,s[1]+y]})}},{key:"zoomEnd",value:function zoomEnd(){return this._getUpdatedState({startZoomPosition:null,startZoom:null})}},{key:"_zoomFromCenter",value:function _zoomFromCenter(e){var t=this._viewportProps,n=t.width,r=t.height,i=t.offset;return this.zoom({pos:[n/2-i[0],r/2-i[1]],scale:e})}},{key:"zoomIn",value:function zoomIn(){return this._zoomFromCenter(2)}},{key:"zoomOut",value:function zoomOut(){return this._zoomFromCenter(.5)}},{key:"moveLeft",value:function moveLeft(){var e=this._viewportProps.offset,t=[10,0];return this._getUpdatedState({offset:new Fn.a(e).add(t)})}},{key:"moveRight",value:function moveRight(){var e=this._viewportProps.offset,t=[-10,0];return this._getUpdatedState({offset:new Fn.a(e).add(t)})}},{key:"moveUp",value:function moveUp(){var e=this._viewportProps.offset,t=[0,10];return this._getUpdatedState({offset:new Fn.a(e).add(t)})}},{key:"moveDown",value:function moveDown(){var e=this._viewportProps.offset,t=[0,-10];return this._getUpdatedState({offset:new Fn.a(e).add(t)})}},{key:"_getUpdatedState",value:function _getUpdatedState(e){return new OrthographicState(Object.assign({},this._viewportProps,this._interactiveState,e))}}]),OrthographicState}(),Un=function(e){function OrthographicController(e){var t;return orthographic_controller_classCallCheck(this,OrthographicController),(t=orthographic_controller_possibleConstructorReturn(this,orthographic_controller_getPrototypeOf(OrthographicController).call(this,zn,e))).invertPan=!0,t}return orthographic_controller_inherits(OrthographicController,_t),orthographic_controller_createClass(OrthographicController,[{key:"_onPanRotate",value:function _onPanRotate(e){return!!this.dragRotate&&this._onPanRotateMap(e)}}]),OrthographicController}();function orthographic_view_typeof(e){return(orthographic_view_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function orthographic_view_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function orthographic_view_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function orthographic_view_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function orthographic_view_getPrototypeOf(e){return(orthographic_view_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function orthographic_view_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&orthographic_view_setPrototypeOf(e,t)}function orthographic_view_setPrototypeOf(e,t){return(orthographic_view_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}(function(e){function OrthographicView(){return orthographic_view_classCallCheck(this,OrthographicView),e=this,!(t=orthographic_view_getPrototypeOf(OrthographicView).apply(this,arguments))||"object"!==orthographic_view_typeof(t)&&"function"!=typeof t?orthographic_view_assertThisInitialized(e):t;var e,t}var t,n,r;return orthographic_view_inherits(OrthographicView,Ze),t=OrthographicView,(n=[{key:"_getViewport",value:function _getViewport(e){var t=e.x,n=e.y,r=e.width,i=e.height,o=e.viewState,a=o.offset,s=void 0===a?[0,0]:a,l=o.zoom,u=void 0===l?0:l;r=r||1,i=i||1;var c=Math.pow(2,u),p=this.props,h=p.eye,f=void 0===h?[0,0,1]:h,d=p.lookAt,g=void 0===d?[0,0,0]:d,m=p.up,y=void 0===m?[0,1,0]:m,v=p.left,_=void 0===v?(-r/2+s[0])/c:v,b=p.top,x=void 0===b?(-i/2+s[1])/c:b,w=p.right,S=void 0===w?(r/2+s[0])/c:w,E=p.bottom,P=void 0===E?(i/2+s[1])/c:E,C=p.near,k=void 0===C?1:C,T=p.far,A=void 0===T?100:T;return new We({id:this.id,x:t,y:n,width:r,height:i,viewMatrix:(new Ne.a).lookAt({eye:f,lookAt:g,up:y}),projectionMatrix:(new Ne.a).ortho({left:_,right:S,bottom:P,top:x,near:k,far:A}),zoom:u})}},{key:"controller",get:function get(){return this._getControllerProps({type:Un})}}])&&orthographic_view_defineProperties(t.prototype,n),r&&orthographic_view_defineProperties(t,r),OrthographicView}()).displayName="OrthographicView";function bin_sorter_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function bin_sorter_iterableToArrayLimit(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}function bin_sorter_arrayWithHoles(e){if(Array.isArray(e))return e}function bin_sorter_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bin_sorter_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Vn=function defaultGetValue(e){return e.length},Gn=function(){function BinSorter(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Vn;bin_sorter_classCallCheck(this,BinSorter),this.sortedBins=this.getSortedBins(e,t),this.maxCount=this.getMaxCount(),this.binMap=this.getBinMap()}var e,t,n;return e=BinSorter,(t=[{key:"getSortedBins",value:function getSortedBins(e,t){return e.reduce(function(e,n,r){var i=t(n.points);return null!=i&&e.push({i:Number.isFinite(n.index)?n.index:r,value:i,counts:n.points.length}),e},[]).sort(function(e,t){return e.value-t.value})}},{key:"getValueRange",value:function getValueRange(e){var t,n,r=(n=2,bin_sorter_arrayWithHoles(t=e)||bin_sorter_iterableToArrayLimit(t,n)||bin_sorter_nonIterableRest()),i=r[0],o=r[1],a=this.sortedBins.length;if(!a)return[0,0];var s=Math.ceil(i/100*(a-1)),l=Math.floor(o/100*(a-1));return[this.sortedBins[s].value,this.sortedBins[l].value]}},{key:"getMaxCount",value:function getMaxCount(){var e=0;return this.sortedBins.forEach(function(t){return e=e>t.counts?e:t.counts}),e}},{key:"getBinMap",value:function getBinMap(){return this.sortedBins.reduce(function(e,t){return Object.assign(e,(n={},r=t.i,i=t,r in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,n));var n,r,i},{})}}])&&bin_sorter_defineProperties(e.prototype,t),n&&bin_sorter_defineProperties(e,n),BinSorter}();function tesselator_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tesselator_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tesselator_createClass(e,t,n){return t&&tesselator_defineProperties(e.prototype,t),n&&tesselator_defineProperties(e,n),e}var Wn,qn=function(){function TypedArrayManager(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).overAlloc,t=void 0===e?1:e;tesselator_classCallCheck(this,TypedArrayManager),this.overAlloc=t}return tesselator_createClass(TypedArrayManager,[{key:"allocate",value:function allocate(e,t,n){var r=n.size,i=n.type,o=n.copy,a=void 0!==o&&o,s=t*r;if(e&&s<=e.length)return e;var l=Math.max(Math.ceil(s*this.overAlloc),1),u=this._allocate(i,l);return e&&a&&u.set(e),this._release(e),u}},{key:"_allocate",value:function _allocate(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Float32Array,t=arguments.length>1?arguments[1]:void 0;if(e===Uint16Array&&t>65535)throw new Error("Vertex count exceeds browser index limit");return new e(t)}},{key:"_release",value:function _release(e){}}]),TypedArrayManager}(),Hn=function(){function Tesselator(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};tesselator_classCallCheck(this,Tesselator);var t=e.attributes,n=void 0===t?{}:t;this.typedArrayManager=new qn,this.indexLayout=null,this.bufferLayout=null,this.vertexCount=0,this.instanceCount=0,this.attributes={},this._attributeDefs=n,this.updateGeometry(e),Object.seal(this)}return tesselator_createClass(Tesselator,[{key:"updateGeometry",value:function updateGeometry(e){var t=e.data,n=e.getGeometry,r=e.positionFormat,i=e.fp64;this.data=t,this.getGeometry=n,this.fp64=i,this.positionSize="XY"===r?2:3,this._rebuildGeometry()}},{key:"updatePartialGeometry",value:function updatePartialGeometry(e){e.start,e.count,e.objects}},{key:"updateGeometryAttributes",value:function updateGeometryAttributes(e,t,n){throw new Error("Not implemented")}},{key:"getGeometrySize",value:function getGeometrySize(e){throw new Error("Not implemented")}},{key:"_forEachGeometry",value:function _forEachGeometry(e){var t=this.data,n=this.getGeometry,r=0,i=!0,o=!1,a=void 0;try{for(var s,l=t[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){e(n(s.value),r++)}}catch(e){o=!0,a=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw a}}}},{key:"_updateAttribute",value:function _updateAttribute(e){var t=e.target,n=e.size,r=e.getValue,i=this.data,o=this.bufferLayout,a=0,s=0,l=!0,u=!1,c=void 0;try{for(var p,h=i[Symbol.iterator]();!(l=(p=h.next()).done);l=!0){var f=r(p.value,s),d=o[s++];fillArray({target:t,source:f,start:a,count:d}),a+=d*n}}catch(e){u=!0,c=e}finally{try{l||null==h.return||h.return()}finally{if(u)throw c}}return t}},{key:"_rebuildGeometry",value:function _rebuildGeometry(){var e=this;if(this.data&&this.getGeometry){var t=[],n=[],r=0;this._forEachGeometry(function(t,i){var o=e.getGeometrySize(t);r+=o,n[i]=o});var i=this.attributes,o=this._attributeDefs,a=this.typedArrayManager,s=this.fp64;for(var l in o){var u=o[l];u.fp64Only&&!s||(i[l]=a.allocate(i[l],r,u))}this.indexLayout=t,this.bufferLayout=n,this.instanceCount=r;var c={vertexStart:0,indexStart:0};this._forEachGeometry(function(r,i){var o=n[i];c.geometryIndex=i,c.geometrySize=o,e.updateGeometryAttributes(r,c),c.vertexStart+=o,c.indexStart+=t[i]||0}),this.vertexCount=c.indexStart}}}]),Tesselator}();function quantizeScale(e,t,n){var r=e[1]-e[0];if(r<=0)return i.warn("quantizeScale: invalid domain, returning range[0]")(),t[0];var o=r/t.length,a=Math.floor((n-e[0])/o);return t[Math.max(Math.min(a,t.length-1),0)]}function gpu_grid_aggregator_constants_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Xn={SUM:1,MEAN:2,MIN:3,MAX:4},Kn={dataChanged:!0,viewportChanged:!0,cellSizeChanged:!0},Zn={changeFlags:Kn,projectPoints:!1,useGPU:!0,fp64:!1,viewport:null,gridTransformMatrix:null,createBufferObjects:!0},Yn=[K.a.MIN,K.a.FUNC_ADD],Jn=[K.a.MAX,K.a.FUNC_ADD],Qn=[K.a.MAX,K.a.MIN],$n=(gpu_grid_aggregator_constants_defineProperty(Wn={},Xn.SUM,K.a.FUNC_ADD),gpu_grid_aggregator_constants_defineProperty(Wn,Xn.MEAN,K.a.FUNC_ADD),gpu_grid_aggregator_constants_defineProperty(Wn,Xn.MIN,Yn),gpu_grid_aggregator_constants_defineProperty(Wn,Xn.MAX,Jn),Wn),er={size:1,operation:Xn.SUM,needMin:!1,needMax:!1,combineMaxMin:!1},tr=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function gpu_grid_aggregator_utils_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function getFloatTexture(e,t){var n,r=t.width,i=void 0===r?1:r,a=t.height,s=void 0===a?1:a;return new o.i(e,{data:null,format:K.a.RGBA32F,type:K.a.FLOAT,border:0,mipmaps:!1,parameters:(n={},gpu_grid_aggregator_utils_defineProperty(n,K.a.TEXTURE_MAG_FILTER,K.a.NEAREST),gpu_grid_aggregator_utils_defineProperty(n,K.a.TEXTURE_MIN_FILTER,K.a.NEAREST),n),dataFormat:K.a.RGBA,width:i,height:s})}function getFramebuffer(e,t){var n=t.id,r=t.width,i=void 0===r?1:r,a=t.height,s=void 0===a?1:a,l=t.texture||getFloatTexture(e,t);return new o.f(e,{id:n,width:i,height:s,attachments:gpu_grid_aggregator_utils_defineProperty({},K.a.COLOR_ATTACHMENT0,l)})}function getFloatArray(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return!e||e.length<t?new Float32Array(t).fill(n):e}function updateBuffer(e){var t=e.gl,n=e.bufferName,r=e.data,i=e.result;i[n]?i[n].subData({data:r}):i[n]=new o.b(t,r)}function gpu_grid_aggregator_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gpu_grid_aggregator_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function gpu_grid_aggregator_iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function gpu_grid_aggregator_arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function gpu_grid_aggregator_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gpu_grid_aggregator_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gpu_grid_aggregator_createClass(e,t,n){return t&&gpu_grid_aggregator_defineProperties(e.prototype,t),n&&gpu_grid_aggregator_defineProperties(e,n),e}var nr=o.t.fp64ifyMatrix4,rr=function(){function GPUGridAggregator(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};gpu_grid_aggregator_classCallCheck(this,GPUGridAggregator),this.id=t.id||"gpu-grid-aggregator",this.shaderCache=t.shaderCache||null,this.gl=e,this.state={weights:null,gridPositions:null,positionsBuffer:null,positions64xyLowBuffer:null,vertexCount:0,fp64:null,useGPU:null,numCol:0,numRow:0,windowSize:null,cellSize:null,weightAttributes:{},textures:{},meanTextures:{},buffers:{},framebuffers:{},maxMinFramebuffers:{},minFramebuffers:{},maxFramebuffers:{},equations:{}},this._hasGPUSupport=Object(o.w)(e)&&Object(o.v)(this.gl,o.e.BLEND_EQUATION_MINMAX,o.e.COLOR_ATTACHMENT_RGBA32F,o.e.TEXTURE_FLOAT)}return gpu_grid_aggregator_createClass(GPUGridAggregator,null,[{key:"getAggregationData",value:function getAggregationData(e){var t=e.aggregationData,n=e.maxData,r=e.pixelIndex;assert(t.length>=4*(r+1)),assert(4===n.length);var i=4*r;return{cellCount:t[i+3],cellWeight:t[i],totalCount:n[3],maxCellWieght:n[0]}}},{key:"getCellData",value:function getCellData(e){for(var t=e.countsData,n=e.size,r=void 0===n?1:n,i=[],o=[],a=0;a<t.length;a+=4){for(var s=0;s<r;s++)i.push(t[a+s]);o.push(t[a+3])}return{cellCounts:o,cellWeights:i}}}]),gpu_grid_aggregator_createClass(GPUGridAggregator,[{key:"delete",value:function _delete(){var e=this.gridAggregationModel,t=this.allAggregationModel,n=this.meanTransform,r=this.state,i=r.positionsBuffer,o=r.position64Buffer,a=r.framebuffers,s=r.maxMinFramebuffers,l=r.minFramebuffers,u=r.maxFramebuffers,c=r.meanTextures;e&&e.delete(),t&&t.delete(),n&&n.delete(),i&&i.delete(),o&&o.delete(),this.deleteResources(a),this.deleteResources(s),this.deleteResources(l),this.deleteResources(u),this.deleteResources(c)}},{key:"run",value:function run(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.getAggregationParams(e);assert(t),this.updateGridSize(t);var n=t.useGPU;return this._hasGPUSupport&&n?this.runAggregationOnGPU(t):(n&&i.warn("ScreenGridAggregator: GPU Aggregation not supported, falling back to CPU")(),this.runAggregationOnCPU(t))}},{key:"deleteResources",value:function deleteResources(e){for(var t in e)e[t].delete()}},{key:"getAggregationParams",value:function getAggregationParams(e){var t=Object.assign({},Zn,e),n=t.useGPU,r=t.gridTransformMatrix,i=t.viewport,o=t.weights,a=t.projectPoints,s=t.cellSize;return this.state.useGPU!==n&&(t.changeFlags=Object.assign({},t.changeFlags,Kn)),!s||this.state.cellSize&&this.state.cellSize[0]===s[0]&&this.state.cellSize[1]===s[1]||(t.changeFlags.cellSizeChanged=!0,this.setState({cellSize:s})),this.validateProps(t,e),this.setState({useGPU:n}),t.gridTransformMatrix=(a?i.viewportMatrix:r)||tr,o&&(t.weights=this.normalizeWeightParams(o),this.setState({weights:t.weights})),t}},{key:"normalizeWeightParams",value:function normalizeWeightParams(e){var t={};for(var n in e)t[n]=Object.assign({},er,e[n]);return t}},{key:"setState",value:function setState(e){Object.assign(this.state,e)}},{key:"shouldTransformToGrid",value:function shouldTransformToGrid(e){var t=e.projectPoints,n=e.changeFlags;return!!(!this.state.gridPositions||n.dataChanged||t&&n.viewportChanged)}},{key:"updateGridSize",value:function updateGridSize(e){var t=e.viewport,n=e.cellSize,r=e.width||t.width,i=e.height||t.height,o=Math.ceil(r/n[0]),a=Math.ceil(i/n[1]);this.setState({numCol:o,numRow:a,windowSize:[r,i]})}},{key:"validateProps",value:function validateProps(e,t){var n=e.changeFlags,r=e.projectPoints,o=e.gridTransformMatrix;assert(n.dataChanged||n.viewportChanged||n.cellSizeChanged),assert(!n.dataChanged||t.positions&&t.weights&&(!t.projectPositions||t.viewport)&&t.cellSize),assert(!n.cellSizeChanged||t.cellSize),assert(!(n.viewportChanged&&r)||t.viewport),r&&o&&i.warn("projectPoints is true, gridTransformMatrix is ignored")()}},{key:"calculateAggregationData",value:function calculateAggregationData(e){var t=e.weights,n=e.results,r=e.cellIndex,i=e.posIndex;for(var o in t){var a=t[o],s=a.values,l=a.size,u=a.operation,c=n[o].aggregationData;assert(l>=1&&l<=3);for(var p=0;p<l;p++){var h=r+p,f=s[3*i+p];if(assert(Number.isFinite(f)),0===c[r+3])c[h]=f;else switch(u){case Xn.SUM:case Xn.MEAN:c[h]+=f;break;case Xn.MIN:c[h]=Math.min(c[h],f);break;case Xn.MAX:c[h]=Math.max(c[h],f);break;default:assert(!1)}}c[r+3]++}}},{key:"calculateMeanMaxMinData",value:function calculateMeanMaxMinData(e){var t=e.validCellIndices,n=e.results,r=e.weights;t.forEach(function(e){for(var t in n){for(var i=r[t],o=i.size,a=i.needMin,s=i.needMax,l=i.operation,u=n[t],c=u.aggregationData,p=u.minData,h=u.maxData,f=u.maxMinData,d=a||s,g=l===Xn.MEAN,m=a&&s&&r[t].combineMaxMin,y=c[e+4-1],v=0;v<o&&(d||g);v++){var _=e+v,b=c[_];g&&(c[_]/=y,b=c[_]),m?f[v]=Math.max(f[v],b):(a&&(p[v]=Math.min(p[v],b)),s&&(h[v]=Math.max(h[v],b)))}m?f[3]=Math.min(f[3],c[e+0]):(a&&(p[3]+=y),s&&(h[3]+=y))}})}},{key:"initCPUResults",value:function initCPUResults(e){var t=e.weights||this.state.weights,n=this.state,r=n.numCol,i=n.numRow,o={};for(var a in t){var s=t[a],l=s.aggregationData,u=s.minData,c=s.maxData,p=s.maxMinData,h=t[a],f=h.needMin,d=h.needMax,g=f&&d&&t[a].combineMaxMin;l=getFloatArray(l,r*i*4),g?((p=getFloatArray(p,4)).fill(-1/0,0,3),p[3]=1/0):(f&&((u=getFloatArray(u,4,1/0))[3]=0),d&&((c=getFloatArray(c,4,-1/0))[3]=0)),o[a]=Object.assign({},t[a],{aggregationData:l,minData:u,maxData:c,maxMinData:p})}return o}},{key:"runAggregationOnCPU",value:function runAggregationOnCPU(e){var t,n=e.positions,r=e.cellSize,i=e.gridTransformMatrix,o=e.viewport,a=e.projectPoints,s=e.weights,l=this.state,u=l.numCol,c=l.numRow,p=this.initCPUResults(e),h=this.shouldTransformToGrid(e),f=[];assert(h||e.changeFlags.cellSizeChanged),h?(this.setState({gridPositions:f}),t=n.length/2):(f=this.state.gridPositions,s=this.state.weights,t=f.length/2);for(var d,g=new Set,m=0;m<t;m++){var y=void 0;if(h){var v,_=[n[2*m],n[2*m+1]];y=a?o.project([_[0],_[1]]):worldToPixels([_[0],_[1],0],i).slice(0,2),(v=f).push.apply(v,gpu_grid_aggregator_arrayWithoutHoles(d=y)||gpu_grid_aggregator_iterableToArray(d)||gpu_grid_aggregator_nonIterableSpread())}else y=[f[2*m],f[2*m+1]];var b=y[0],x=y[1],w=Math.floor(b/r[0]),S=Math.floor(x/r[1]);if(w>=0&&w<u&&S>=0&&S<c){var E=4*(w+S*u);g.add(E),this.calculateAggregationData({weights:s,results:p,cellIndex:E,posIndex:m})}}return this.calculateMeanMaxMinData({validCellIndices:g,results:p,weights:s}),this.updateAggregationBuffers(e,p),p}},{key:"updateAggregationBuffers",value:function updateAggregationBuffers(e,t){if(e.createBufferObjects){var n=e.weights||this.state.weights;for(var r in t){var i=t[r],o=i.aggregationData,a=i.minData,s=i.maxData,l=i.maxMinData,u=n[r],c=u.needMin,p=u.needMax,h=c&&p&&n[r].combineMaxMin;updateBuffer({gl:this.gl,bufferName:"aggregationBuffer",data:o,result:t[r]}),h?updateBuffer({gl:this.gl,bufferName:"maxMinBuffer",data:l,result:t[r]}):(c&&updateBuffer({gl:this.gl,bufferName:"minBuffer",data:a,result:t[r]}),p&&updateBuffer({gl:this.gl,bufferName:"maxBuffer",data:s,result:t[r]}))}}}},{key:"getAggregateData",value:function getAggregateData(e){var t={},n=this.state,r=n.textures,i=n.framebuffers,o=n.maxMinFramebuffers,a=n.minFramebuffers,s=n.maxFramebuffers,l=n.weights;for(var u in l){t[u]={};var c=l[u],p=c.needMin,h=c.needMax,f=c.combineMaxMin;t[u].aggregationTexture=r[u],t[u].aggregationBuffer=i[u].readPixelsToBuffer({buffer:l[u].aggregationBuffer,type:K.a.FLOAT}),p&&h&&f?t[u].maxMinBuffer=o[u].readPixelsToBuffer({buffer:l[u].maxMinBuffer,type:K.a.FLOAT}):(p&&(t[u].minBuffer=a[u].readPixelsToBuffer({buffer:l[u].minBuffer,type:K.a.FLOAT})),h&&(t[u].maxBuffer=s[u].readPixelsToBuffer({buffer:l[u].maxBuffer,type:K.a.FLOAT})))}return t}},{key:"getAggregationModel",value:function getAggregationModel(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.gl,n=this.shaderCache;return new o.h(t,{id:"Gird-Aggregation-Model",vs:e?"#define SHADER_NAME gpu-aggregation-to-grid-vs-64\n\nattribute vec2 positions;\nattribute vec2 positions64xyLow;\nattribute vec3 weights;\nuniform vec2 windowSize;\nuniform vec2 cellSize;\nuniform vec2 gridSize;\nuniform vec2 uProjectionMatrixFP64[16];\nuniform bool projectPoints;\n\nvarying vec3 vWeights;\n\nvoid project_to_pixel(vec2 pos, vec2 pos64xyLow, out vec2 pixelXY64[2]) {\n\n  vec2 result64[4];\n  vec2 position64[4];\n  position64[0] = vec2(pos.x, pos64xyLow.x);\n  position64[1] = vec2(pos.y, pos64xyLow.y);\n  position64[2] = vec2(0., 0.);\n  position64[3] = vec2(1., 0.);\n  mat4_vec4_mul_fp64(uProjectionMatrixFP64, position64,\n  result64);\n\n  pixelXY64[0] = div_fp64(result64[0], result64[3]);\n  pixelXY64[1] = div_fp64(result64[1], result64[3]);\n}\n\nvoid main(void) {\n\n  vWeights = weights;\n\n  vec2 windowPos = positions;\n  vec2 windowPos64xyLow = positions64xyLow;\n  if (projectPoints) {\n    vec2 projectedXY[2];\n    project_position_fp64(windowPos, windowPos64xyLow, projectedXY);\n    windowPos.x = projectedXY[0].x;\n    windowPos.y = projectedXY[1].x;\n    windowPos64xyLow.x = projectedXY[0].y;\n    windowPos64xyLow.y = projectedXY[1].y;\n  }\n\n  vec2 pixelXY64[2];\n  project_to_pixel(windowPos, windowPos64xyLow, pixelXY64);\n\n  // Transform (0,0):windowSize -> (0, 0): gridSize\n  vec2 gridXY64[2];\n  gridXY64[0] = div_fp64(pixelXY64[0], vec2(cellSize.x, 0));\n  gridXY64[1] = div_fp64(pixelXY64[1], vec2(cellSize.y, 0));\n  float x = floor(gridXY64[0].x);\n  float y = floor(gridXY64[1].x);\n  vec2 pos = vec2(x, y);\n\n  // Transform (0,0):gridSize -> (-1, -1):(1,1)\n  pos = (pos * (2., 2.) / (gridSize)) - (1., 1.);\n\n  // Move to pixel center, pixel-size in screen sapce (2/gridSize) * 0.5 => 1/gridSize\n  vec2 offset = 1.0 / gridSize;\n  pos = pos + offset;\n\n  gl_Position = vec4(pos, 0.0, 1.0);\n}\n":"#define SHADER_NAME gpu-aggregation-to-grid-vs\n\nattribute vec2 positions;\nattribute vec3 weights;\nuniform vec2 windowSize;\nuniform vec2 cellSize;\nuniform vec2 gridSize;\nuniform mat4 uProjectionMatrix;\nuniform bool projectPoints;\n\nvarying vec3 vWeights;\n\nvec2 project_to_pixel(vec4 pos) {\n  vec4 result =  uProjectionMatrix * pos;\n  return result.xy/result.w;\n}\n\nvoid main(void) {\n\n  vWeights = weights;\n\n  vec4 windowPos = vec4(positions, 0, 1.);\n  if (projectPoints) {\n    windowPos = project_position_to_clipspace(vec3(positions, 0), vec2(0, 0), vec3(0, 0, 0));\n  }\n\n  vec2 pos = project_to_pixel(windowPos);\n\n  // Transform (0,0):windowSize -> (0, 0): gridSize\n  pos = floor(pos / cellSize);\n\n  // Transform (0,0):gridSize -> (-1, -1):(1,1)\n  pos = (pos * (2., 2.) / (gridSize)) - (1., 1.);\n\n  // Move to pixel center, pixel-size in screen sapce (2/gridSize) * 0.5 => 1/gridSize\n  vec2 offset = 1.0 / gridSize;\n  pos = pos + offset;\n\n  gl_Position = vec4(pos, 0.0, 1.0);\n}\n",fs:"#define SHADER_NAME gpu-aggregation-to-grid-fs\n\nprecision highp float;\n\nvarying vec3 vWeights;\n\nvoid main(void) {\n  gl_FragColor = vec4(vWeights, 1.0);\n}\n",modules:e?["fp64","project64"]:["project32"],shaderCache:n,vertexCount:0,drawMode:K.a.POINTS})}},{key:"getAllAggregationModel",value:function getAllAggregationModel(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=this.gl,t=this.shaderCache;return new o.h(e,{id:"All-Aggregation-Model",vs:"#version 300 es\n#define SHADER_NAME gpu-aggregation-all-vs-64\n\nin vec2 position;\nuniform vec2 gridSize;\n\nout vec2 vTextureCoord;\nvoid main(void) {\n  // Map each position to single pixel\n  vec2 pos = vec2(-1.0, -1.0);\n\n  // Move to pixel center, pixel-size in screen sapce (2/gridSize) * 0.5 => 1/gridSize\n  vec2 offset = 1.0 / gridSize;\n  pos = pos + offset;\n\n  gl_Position = vec4(pos, 0.0, 1.0);\n\n  float yIndex = floor(float(gl_InstanceID) / gridSize[0]);\n  float xIndex = float(gl_InstanceID) - (yIndex * gridSize[0]);\n\n  vec2 yIndexFP64 = vec2(yIndex, 0.);\n  vec2 xIndexFP64 = vec2(xIndex, 0.);\n  vec2 gridSizeYFP64 = vec2(gridSize[1], 0.);\n  vec2 gridSizeXFP64 = vec2(gridSize[0], 0.);\n\n  vec2 texCoordXFP64 = div_fp64(yIndexFP64, gridSizeYFP64);\n  vec2 texCoordYFP64 = div_fp64(xIndexFP64, gridSizeXFP64);\n\n  vTextureCoord = vec2(texCoordYFP64.x, texCoordXFP64.x);\n}\n",fs:"#version 300 es\n#define SHADER_NAME gpu-aggregation-all-fs\n\nprecision highp float;\n\nin vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform bool combineMaxMin;\nout vec4 fragColor;\nvoid main(void) {\n  vec4 textureColor = texture(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n  if (textureColor.a == 0.) {\n    discard;\n  }\n  fragColor.rgb = textureColor.rgb;\n  // if combineMinMax is true, use Alpha channel for first weights min value.\n  fragColor.a = combineMaxMin ? textureColor.r : textureColor.a;\n}\n",modules:["fp64"],shaderCache:t,vertexCount:1,drawMode:K.a.POINTS,isInstanced:!0,instanceCount:0,attributes:{position:new o.b(e,{size:2,data:new Float32Array([0,0])})}})}},{key:"getMeanTransform",value:function getMeanTransform(e){return this.meanTransform?this.meanTransform.update(e):this.meanTransform=new o.j(this.gl,Object.assign({},{vs:"#define SHADER_NAME gpu-aggregation-transform-mean-vs\nattribute vec4 aggregationValues;\nvarying vec4 meanValues;\n\nvoid main()\n{\n  // TODO: Use 64-bit division ?? not needed given this is aggregation ??\n  bool isCellValid = bool(aggregationValues.w > 0.);\n  // aggregationValues:  XYZ contain aggregated values, W contains count\n  meanValues.xyz = isCellValid ? aggregationValues.xyz/aggregationValues.w : vec3(0, 0, 0);\n  meanValues.w = aggregationValues.w;\n}\n",_targetTextureVarying:"meanValues"},e)),this.meanTransform}},{key:"renderAggregateData",value:function renderAggregateData(e){var t=e.cellSize,n=e.viewport,r=e.gridTransformMatrix,i=e.projectPoints,o=this.state,a=o.numCol,s=o.numRow,l=o.windowSize,u=o.maxMinFramebuffers,c=o.minFramebuffers,p=o.maxFramebuffers,h=o.weights,f=nr(r),d=[a,s],g={blend:!0,depthTest:!1,blendFunc:[K.a.ONE,K.a.ONE]},m={viewport:n},y={windowSize:l,cellSize:t,gridSize:d,uProjectionMatrix:r,uProjectionMatrixFP64:f,projectPoints:i};for(var v in h){var _=h[v],b=_.needMin,x=_.needMax,w=b&&x&&h[v].combineMaxMin;this.renderToWeightsTexture({id:v,parameters:g,moduleSettings:m,uniforms:y,gridSize:d}),w?this.renderToMaxMinTexture({id:v,parameters:Object.assign({},g,{blendEquation:Qn}),gridSize:d,minOrMaxFb:u[v],clearParams:{clearColor:[0,0,0,3.402823466e38]},combineMaxMin:w}):(b&&this.renderToMaxMinTexture({id:v,parameters:Object.assign({},g,{blendEquation:Yn}),gridSize:d,minOrMaxFb:c[v],clearParams:{clearColor:[3.402823466e38,3.402823466e38,3.402823466e38,0]},combineMaxMin:w}),x&&this.renderToMaxMinTexture({id:v,parameters:Object.assign({},g,{blendEquation:Jn}),gridSize:d,minOrMaxFb:p[v],combineMaxMin:w}))}}},{key:"renderToMaxMinTexture",value:function renderToMaxMinTexture(e){var t=e.id,n=e.parameters,r=e.gridSize,i=e.minOrMaxFb,a=e.combineMaxMin,s=e.clearParams,l=void 0===s?{}:s,u=this.state.framebuffers,c=this.gl,p=this.allAggregationModel;i.bind(),c.viewport(0,0,r[0],r[1]),Object(o.E)(c,l,function(){c.clear(c.COLOR_BUFFER_BIT)}),p.draw({parameters:n,uniforms:{uSampler:u[t].texture,gridSize:r,combineMaxMin:a}}),i.unbind()}},{key:"renderToWeightsTexture",value:function renderToWeightsTexture(e){var t=e.id,n=e.parameters,r=e.moduleSettings,i=e.uniforms,a=e.gridSize,s=this.state,l=s.framebuffers,u=s.equations,c=s.weightAttributes,p=s.weights,h=this.gl,f=this.gridAggregationModel,d=p[t].operation;l[t].bind(),h.viewport(0,0,a[0],a[1]);var g=d===Xn.MIN?[3.402823466e38,3.402823466e38,3.402823466e38,0]:[0,0,0,0];Object(o.E)(h,{clearColor:g},function(){h.clear(h.COLOR_BUFFER_BIT)});var m={weights:c[t]};if(f.draw({parameters:Object.assign({},n,{blendEquation:u[t]}),moduleSettings:r,uniforms:i,attributes:m}),l[t].unbind(),d===Xn.MEAN){var y=this.state,v=y.meanTextures,_=y.textures,b={_sourceTextures:{aggregationValues:v[t]},_targetTexture:_[t],elementCount:_[t].width*_[t].height};this.getMeanTransform(b).run({parameters:{blend:!1,depthTest:!1}}),l[t].attach(gpu_grid_aggregator_defineProperty({},K.a.COLOR_ATTACHMENT0,_[t]))}}},{key:"runAggregationOnGPU",value:function runAggregationOnGPU(e){return this.updateModels(e),this.setupFramebuffers(e),this.renderAggregateData(e),this.getAggregateData(e)}},{key:"setupFramebuffers",value:function setupFramebuffers(e){var t=this.state,n=t.numCol,r=t.numRow,i=t.textures,o=t.framebuffers,a=t.maxMinFramebuffers,s=t.minFramebuffers,l=t.maxFramebuffers,u=t.meanTextures,c=t.equations,p=t.weights,h={width:n,height:r};for(var f in p){var d=p[f],g=d.needMin,m=d.needMax,y=d.combineMaxMin,v=d.operation;i[f]=p[f].aggregationTexture||i[f]||getFloatTexture(this.gl,{id:"".concat(f,"-texture"),width:n,height:r}),i[f].resize(h);var _=i[f];v===Xn.MEAN&&(u[f]=u[f]||getFloatTexture(this.gl,{id:"".concat(f,"-mean-texture"),width:n,height:r}),u[f].resize(h),_=u[f]),o[f]?o[f].attach(gpu_grid_aggregator_defineProperty({},K.a.COLOR_ATTACHMENT0,_)):o[f]=getFramebuffer(this.gl,{id:"".concat(f,"-fb"),width:n,height:r,texture:_}),o[f].resize(h),c[f]=$n[v],(g||m)&&(g&&m&&y?a[f]=a[f]||getFramebuffer(this.gl,{id:"".concat(f,"-maxMinFb")}):(g&&(s[f]=s[f]||getFramebuffer(this.gl,{id:"".concat(f,"-minFb")})),m&&(l[f]=l[f]||getFramebuffer(this.gl,{id:"".concat(f,"-maxFb")}))))}}},{key:"setupModels",value:function setupModels(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.gridAggregationModel&&this.gridAggregationModel.delete(),this.gridAggregationModel=this.getAggregationModel(e),this.allAggregationModel&&this.allAggregationModel.delete(),this.allAggregationModel=this.getAllAggregationModel(e)}},{key:"setupWeightAttributes",value:function setupWeightAttributes(e){var t=this.state,n=t.weightAttributes,r=t.vertexCount,i=t.weights;for(var a in i){var s=i[a].values;if(Array.isArray(s)||s.constructor===Float32Array){assert(s.length/3===r);var l=Array.isArray(s)?new Float32Array(s):s;n[a]instanceof o.b?n[a].setData(l):n[a]=new o.b(this.gl,l)}else assert(s instanceof o.b),n[a]=s}}},{key:"updateModels",value:function updateModels(e){var t=this.gl,n=e.positions,r=e.positions64xyLow,i=e.changeFlags,a=this.state,s=a.numCol,l=a.numRow,u=this.state,c=u.positionsBuffer,p=u.positions64xyLowBuffer,h={},f=!1;if(e.fp64!==this.state.fp64&&(this.setupModels(e.fp64),this.setState({fp64:e.fp64}),e.fp64&&(f=!0)),i.dataChanged||!c){c&&c.delete();var d=n.length/2;c=new o.b(t,new Float32Array(n)),f=e.fp64,Object.assign(h,{positions:c}),this.setState({positionsBuffer:c,vertexCount:d}),this.setupWeightAttributes(e),this.gridAggregationModel.setVertexCount(d)}f&&(assert(r),p&&p.delete(),p=new o.b(t,{size:2,data:new Float32Array(r)}),Object.assign(h,{positions64xyLow:p}),this.setState({positions64xyLowBuffer:p})),this.gridAggregationModel.setAttributes(h),(i.cellSizeChanged||i.viewportChanged)&&this.allAggregationModel.setInstanceCount(s*l)}}]),GPUGridAggregator}();function grid_aggregation_utils_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function grid_aggregation_utils_iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function grid_aggregation_utils_arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}var ir=o.t.fp64LowPart,or=6378e3;function pointToDensityGridData(e){var t=e.data,n=e.getPosition,r=e.cellSizeMeters,i=e.gpuGridAggregator,o=e.gpuAggregation,a=e.aggregationFlags,s=e.getWeight,l=void 0===s?function(e){return[1,0,0]}:s,u=e.fp64,c=void 0!==u&&u,h=e.coordinateSystem,f=void 0===h?p.LNGLAT:h,d=e.viewport,g=void 0===d?null:d,m=e.boundingBox,y=void 0===m?null:m,v={};assert(a.dataChanged||a.cellSizeChanged||a.viewportChanged),a.dataChanged&&(y=(v=parseGridData(t,n,l)).boundingBox);var _=[r,r],b=[0,0];switch(assert(f===p.LNGLAT||f===p.IDENTITY),assert(y),f){case p.LNGLAT:case p.LNGLAT_DEPRECATED:var x=getGridOffset(y,r);_=[x.xOffset,x.yOffset],b=[-180,-90];break;case p.IDENTITY:b=[-g.width/2,-g.height/2];break;default:assert(!1)}var w=getGPUAggregationParams({boundingBox:y,cellSize:_,worldOrigin:b}),S=i.run({positions:v.positions,positions64xyLow:v.positions64xyLow,weights:v.weights,cellSize:_,width:w.width,height:w.height,gridTransformMatrix:w.gridTransformMatrix,useGPU:o,changeFlags:a,fp64:c});return{countsBuffer:S.weight1.aggregationBuffer,maxCountBuffer:S.weight1.maxBuffer,countsData:S.weight1.aggregationData,maxCountData:S.weight1.maxData,gridSize:w.gridSize,gridOrigin:w.gridOrigin,cellSize:_,boundingBox:y}}function parseGridData(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;assert(e&&t);for(var r,i,o,a=[],s=[],l=[],u=1/0,c=-1/0,p=1/0,h=-1/0,f=0;f<e.length;f++){var d=t(e[f]);i=d[0],r=d[1],a.push(i,r),s.push(ir(i),ir(r));var g=n?n(e[f]):[1,0,0];Array.isArray(g)||(g=[g,0,0]),assert(3===g.length),l.push.apply(l,grid_aggregation_utils_arrayWithoutHoles(o=g)||grid_aggregation_utils_iterableToArray(o)||grid_aggregation_utils_nonIterableSpread()),Number.isFinite(r)&&Number.isFinite(i)&&(u=r<u?r:u,c=r>c?r:c,p=i<p?i:p,h=i>h?i:h)}return{positions:a,positions64xyLow:s,weights:{weight1:{size:1,operation:Xn.SUM,needMax:!0,values:l}},boundingBox:{xMin:p,xMax:h,yMin:u,yMax:c}}}function getGridOffset(e,t){return calculateGridLatLonOffset(t,(e.yMin+e.yMax)/2)}function calculateGridLatLonOffset(e,t){var n;return{yOffset:e/or*(180/Math.PI),xOffset:(n=t,e/or*(180/Math.PI)/Math.cos(n*Math.PI/180))}}function alignToCell(e,t){var n=e<0?-1:1,r=n<0?Math.abs(e)+t:Math.abs(e);return(r=Math.floor(r/t)*t)*n}function getGPUAggregationParams(e){var t=e.boundingBox,n=e.cellSize,r=e.worldOrigin,i=t.yMin,o=t.yMax,a=t.xMin,s=t.xMax,l=alignToCell(a-r[0],n[0])+r[0],u=alignToCell(i-r[1],n[1])+r[1],c=(new Ne.a).translate([-1*l,-1*u,0]),p=[l,u],h=s-a+n[0],f=o-i+n[1];return{gridOrigin:p,gridSize:[Math.ceil(h/n[0]),Math.ceil(f/n[1])],width:h,height:f,gridTransformMatrix:c}}n.d(t,"h",function(){return ar}),n.d(t,"c",function(){return Sn}),n.d(t,"d",function(){return Ce}),n.d(t,"b",function(){return En}),n.d(t,"e",function(){return rt}),n.d(t,"i",function(){return i}),n.d(t,"f",function(){return rr}),n.d(t,"a",function(){return Xn}),n.d(t,"g",function(){return pointToDensityGridData});var ar={BinSorter:Gn,Tesselator:Hn,linearScale:function linearScale(e,t,n){return(n-e[0])/(e[1]-e[0])*(t[1]-t[0])+t[0]},getLinearScale:function getLinearScale(e,t){return function(n){return(n-e[0])/(e[1]-e[0])*(t[1]-t[0])+t[0]}},quantizeScale:quantizeScale,getQuantizeScale:function getQuantizeScale(e,t){return function(n){return quantizeScale(e,t,n)}},defaultColorRange:[[255,255,178],[254,217,118],[254,178,76],[253,141,60],[240,59,32],[189,0,38]],flattenVertices:function flattenVertices(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.result,r=void 0===n?[]:n,i=t.dimensions,o=void 0===i?3:i,a=-1,s=0;++a<e.length;){var l=e[a];Array.isArray(l)||ArrayBuffer.isView(l)?flattenVertices(l,{result:r,dimensions:o}):s<o&&(r.push(l),s++)}return s>0&&s<o&&r.push(0),r},fillArray:fillArray}},function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return i}),n.d(t,"c",function(){return o});var r=1e-6,i="undefined"!=typeof Float32Array?Float32Array:Array,o=Math.random;Math.PI},function(e,t,n){"use strict";function _arrayWithHoles(e){if(Array.isArray(e))return e}function _iterableToArrayLimit(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}n.d(t,"a",function(){return _slicedToArray})},function(e,t,n){"use strict";function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,"a",function(){return _assertThisInitialized})},function(e,t,n){"use strict";n.d(t,"c",function(){return r}),n.d(t,"a",function(){return checkNumber}),n.d(t,"f",function(){return formatValue}),n.d(t,"h",function(){return radians}),n.d(t,"d",function(){return degrees}),n.d(t,"b",function(){return clamp}),n.d(t,"g",function(){return lerp}),n.d(t,"e",function(){return equals});var r={};function checkNumber(e){if(!Number.isFinite(e))throw new Error("Invalid number ".concat(e));return e}function round(e){return Math.round(e/r.EPSILON)*r.EPSILON}function formatValue(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).precision,n=void 0===t?r.precision||4:t;return e=round(e),parseFloat(e.toPrecision(n))}function isArray(e){return Array.isArray(e)||ArrayBuffer.isView(e)&&void 0!==e.length}function map(e,t){if(isArray(e)){for(var n=(i=e).clone?i.clone():new Array(i),r=0;r<n.length;++r)n[r]=t(n[r],r,n);return n}var i;return t(e)}function radians(e){return map(e,function(e){return e/180*Math.PI})}function degrees(e){return map(e,function(e){return 180*e/Math.PI})}function clamp(e,t,n){return map(e,function(e){return Math.max(t,Math.min(n,e))})}function lerp(e,t,n){return isArray(e)?e.map(function(e,r){return lerp(e,t[r],n)}):n*t+(1-n)*e}function equals(e,t){if(isArray(e)&&isArray(t)){if(e===t)return!0;if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(!equals(e[n],t[n]))return!1;return!0}return Math.abs(e-t)<=r.EPSILON*Math.max(1,Math.abs(e),Math.abs(t))}r.EPSILON=1e-12,r.debug=!0,r.precision=4,r.printTypes=!1,r.printDegrees=!1,r.printRowMajor=!0},function(e,t,n){"use strict";n.d(t,"a",function(){return g});var r=n(3),i=n(4),o=n(11),a=n(10),s=n(12),l=n(18),u=n(30),c=n(48),p=n(8),h=n(39),f=n(6),d=n(5),g=function(e){function Buffer(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(r.a)(this,Buffer),(t=Object(o.a)(this,Object(a.a)(Buffer).call(this,e,n))).stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),t.target=n.target||(t.gl.webgl2?36662:34962),t._initialize(n),Object.seal(Object(l.a)(Object(l.a)(t))),t}return Object(s.a)(Buffer,e),Object(i.a)(Buffer,[{key:"getElementCount",value:function getElementCount(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/c.a.getBytesPerElement(e))}},{key:"getVertexCount",value:function getVertexCount(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/c.a.getBytesPerVertex(e))}},{key:"initialize",value:function initialize(e){return this._initialize(e)}},{key:"setProps",value:function setProps(e){return"data"in e&&this.setData(e),this}},{key:"setAccessor",value:function setAccessor(e){return this.accessor=e,this}},{key:"reallocate",value:function reallocate(e){return e>this.byteLength?(this._setByteLength(e),!0):(this.bytesUsed=e,!1)}},{key:"setData",value:function setData(e){return this.initialize(e)}},{key:"subData",value:function subData(e){ArrayBuffer.isView(e)&&(e={data:e});var t=e,n=t.data,r=t.offset,i=void 0===r?0:r,o=t.srcOffset,a=void 0===o?0:o,s=e.byteLength||e.length;Object(d.a)(n);var l=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(l,this.handle),0!==a||void 0!==s?(Object(p.d)(this.gl),this.gl.bufferSubData(this.target,i,n,a,s)):this.gl.bufferSubData(l,i,n),this.gl.bindBuffer(l,null),this.debugData=null,this.accessor.type||this.setAccessor(new c.a(this.accessor,{type:Object(h.b)(n)})),this}},{key:"copyData",value:function copyData(e){var t=e.sourceBuffer,n=e.readOffset,r=void 0===n?0:n,i=e.writeOffset,o=void 0===i?0:i,a=e.size,s=this.gl;return Object(p.d)(s),s.bindBuffer(36662,t.handle),s.bindBuffer(36663,this.handle),s.copyBufferSubData(36662,36663,r,o,a),s.bindBuffer(36662,null),s.bindBuffer(36663,null),this.debugData=null,this}},{key:"getData",value:function getData(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dstData,n=void 0===t?null:t,r=e.srcByteOffset,i=void 0===r?0:r,o=e.dstOffset,a=void 0===o?0:o,s=e.length,l=void 0===s?0:s;Object(p.d)(this.gl);var u,c,f=Object(h.c)(this.accessor.type||5126,{clamped:!1}),g=this._getAvailableElementCount(i),m=a;n?u=(c=n.length)-m:c=m+(u=Math.min(g,l||g));var y=Math.min(g,u);return l=l||y,Object(d.a)(l<=y),n=n||new f(c),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,i,n,a,l),this.gl.bindBuffer(36662,null),n}},{key:"bind",value:function bind(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,n=void 0===t?this.target:t,r=e.index,i=void 0===r?this.accessor&&this.accessor.index:r,o=e.offset,a=void 0===o?0:o,s=e.size;return 35345===n||35982===n?void 0!==s?this.gl.bindBufferRange(n,i,this.handle,a,s):(Object(d.a)(0===a),this.gl.bindBufferBase(n,i,this.handle)):this.gl.bindBuffer(n,this.handle),this}},{key:"unbind",value:function unbind(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,n=void 0===t?this.target:t,r=e.index,i=void 0===r?this.accessor&&this.accessor.index:r;return 35345===n||35982===n?this.gl.bindBufferBase(n,i,null):this.gl.bindBuffer(n,null),this}},{key:"getDebugData",value:function getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:10}),{data:this.debugData,changed:!0})}},{key:"invalidateDebugData",value:function invalidateDebugData(){this.debugData=null}},{key:"_initialize",value:function _initialize(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ArrayBuffer.isView(e)&&(e={data:e}),Number.isFinite(e)&&(e={byteLength:e}),e.bytes&&f.g.deprecated("bytes","byteLength");var t=e.byteLength||e.bytes||0;return this.usage=e.usage||35044,this.setAccessor(new c.a(e,e.accessor)),e.data?this._setData(e.data):this._setByteLength(t)}},{key:"_setData",value:function _setData(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.usage;Object(d.a)(ArrayBuffer.isView(e));var n=this._getTarget();this.gl.bindBuffer(n,this.handle),this.gl.bufferData(n,e,t),this.gl.bindBuffer(n,null),this.usage=t,this.debugData=e.slice(0,10),this.byteLength=e.byteLength,this.bytesUsed=e.byteLength;var r=Object(h.b)(e);return Object(d.a)(r),this.setAccessor(new c.a(this.accessor,{type:r})),this}},{key:"_setByteLength",value:function _setByteLength(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.usage;Object(d.a)(e>=0);var n=e;0===e&&(n=new Float32Array(0));var r=this._getTarget();return this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,n,t),this.gl.bindBuffer(r,null),this.usage=t,this.debugData=null,this.byteLength=e,this.bytesUsed=e,this}},{key:"_getTarget",value:function _getTarget(){return this.gl.webgl2?36663:this.target}},{key:"_getAvailableElementCount",value:function _getAvailableElementCount(e){var t=e/Object(h.c)(this.accessor.type||5126,{clamped:!1}).BYTES_PER_ELEMENT;return this.getElementCount()-t}},{key:"_createHandle",value:function _createHandle(){return this.gl.createBuffer()}},{key:"_deleteHandle",value:function _deleteHandle(){this.gl.deleteBuffer(this.handle)}},{key:"_getParameter",value:function _getParameter(e){this.gl.bindBuffer(this.target,this.handle);var t=this.gl.getBufferParameter(this.target,e);return this.gl.bindBuffer(this.target,null),t}},{key:"updateAccessor",value:function updateAccessor(e){return f.g.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)"),this.accessor=new c.a(this.accessor,e),this}},{key:"setByteLength",value:function setByteLength(e){return f.g.deprecated("setByteLength","reallocate"),this.reallocate(e)}},{key:"data",get:function get(){f.g.removed("Buffer.data","N/A","v6.0")}},{key:"bytes",get:function get(){return f.g.deprecated("Buffer.bytes","Buffer.byteLength","v6.1"),this.byteLength}}]),Buffer}(u.a)},function(e,t,n){"use strict";function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}n.d(t,"a",function(){return _toConsumableArray})},function(e,t,n){"use strict";(function(e){n.d(t,"b",function(){return i}),n.d(t,"a",function(){return o});var r={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==e&&e,document:"undefined"!=typeof document&&document},i=r.window||r.self||r.global,o=r.global||r.self||r.window}).call(this,n(31))},function(e,t,n){var r=n(70).f,i=Function.prototype,o=/^\s*function ([^ (]*)/;"name"in i||n(59)&&r(i,"name",{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(e){return""}}})},function(e,t,n){"use strict";function toVal(e){var t,n,r="";if(e)if("object"==typeof e)for(t in e)e[t]&&(n=toVal(e.push?e[t]:t))&&(r&&(r+=" "),r+=n);else"boolean"!=typeof e&&(r&&(r+=" "),r+=e);return r}t.a=function(){for(var e,t=0,n="";t<arguments.length;)(e=toVal(arguments[t++]))&&(n&&(n+=" "),n+=e);return n}},function(e,t,n){var r=n(100);r(r.S+r.F,"Object",{assign:n(279)})},function(e,t,n){"use strict";var r=n(1),i=Object(r.createContext)(null);t.a=i},function(e,t,n){"use strict";function _typeof2(e){return(_typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof2(e){return typeof e}:function _typeof2(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function _typeof(e){return _typeof2(e)}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof2(e)})(e)}n.d(t,"a",function(){return _typeof})},function(e,t,n){"use strict";n.d(t,"b",function(){return setParameters}),n.d(t,"c",function(){return withParameters});var r=n(17),i=n(21),o=n(78),a=n(58);n.d(t,"a",function(){return a.c});var s=n(6),l=n(5),u={framebuffer:function framebuffer(e,t){var n=t&&"handle"in t?t.handle:t;return e.bindFramebuffer(36160,n)},blend:function blend(e,t){return t?e.enable(3042):e.disable(3042)},blendColor:function blendColor(e,t){return e.blendColor.apply(e,Object(i.a)(t))},blendEquation:function blendEquation(e,t){t=isArray(t)?t:[t,t],e.blendEquationSeparate.apply(e,Object(i.a)(t))},blendFunc:function blendFunc(e,t){t=isArray(t)&&2===t.length?Object(i.a)(t).concat(Object(i.a)(t)):t,e.blendFuncSeparate.apply(e,Object(i.a)(t))},clearColor:function clearColor(e,t){return e.clearColor.apply(e,Object(i.a)(t))},clearDepth:function clearDepth(e,t){return e.clearDepth(t)},clearStencil:function clearStencil(e,t){return e.clearStencil(t)},colorMask:function colorMask(e,t){return e.colorMask.apply(e,Object(i.a)(t))},cull:function cull(e,t){return t?e.enable(2884):e.disable(2884)},cullFace:function cullFace(e,t){return e.cullFace(t)},depthTest:function depthTest(e,t){return t?e.enable(2929):e.disable(2929)},depthFunc:function depthFunc(e,t){return e.depthFunc(t)},depthMask:function depthMask(e,t){return e.depthMask(t)},depthRange:function depthRange(e,t){return e.depthRange.apply(e,Object(i.a)(t))},dither:function dither(e,t){return t?e.enable(3024):e.disable(3024)},derivativeHint:function derivativeHint(e,t){e.hint(35723,t)},frontFace:function frontFace(e,t){return e.frontFace(t)},mipmapHint:function mipmapHint(e,t){return e.hint(33170,t)},lineWidth:function lineWidth(e,t){return e.lineWidth(t)},polygonOffsetFill:function polygonOffsetFill(e,t){return t?e.enable(32823):e.disable(32823)},polygonOffset:function polygonOffset(e,t){return e.polygonOffset.apply(e,Object(i.a)(t))},sampleCoverage:function sampleCoverage(e,t){return e.sampleCoverage.apply(e,Object(i.a)(t))},scissorTest:function scissorTest(e,t){return t?e.enable(3089):e.disable(3089)},scissor:function scissor(e,t){return e.scissor.apply(e,Object(i.a)(t))},stencilTest:function stencilTest(e,t){return t?e.enable(2960):e.disable(2960)},stencilMask:function stencilMask(e,t){var n=t=isArray(t)?t:[t,t],i=Object(r.a)(n,2),o=i[0],a=i[1];e.stencilMaskSeparate(1028,o),e.stencilMaskSeparate(1029,a)},stencilFunc:function stencilFunc(e,t){var n=t=isArray(t)&&3===t.length?Object(i.a)(t).concat(Object(i.a)(t)):t,o=Object(r.a)(n,6),a=o[0],s=o[1],l=o[2],u=o[3],c=o[4],p=o[5];e.stencilFuncSeparate(1028,a,s,l),e.stencilFuncSeparate(1029,u,c,p)},stencilOp:function stencilOp(e,t){var n=t=isArray(t)&&3===t.length?Object(i.a)(t).concat(Object(i.a)(t)):t,o=Object(r.a)(n,6),a=o[0],s=o[1],l=o[2],u=o[3],c=o[4],p=o[5];e.stencilOpSeparate(1028,a,s,l),e.stencilOpSeparate(1029,u,c,p)},viewport:function viewport(e,t){return e.viewport.apply(e,Object(i.a)(t))}};function isArray(e){return Array.isArray(e)||ArrayBuffer.isView(e)}function setParameters(e,t){for(var n in Object(a.d)(e,t),t){var r=u[n];r&&r(e,t[n],n)}}function withParameters(e,t,n){if(Object(s.d)(t))return n(e);var r,i=t.nocatch,a=void 0===i||i;if(Object(l.a)(!t.frameBuffer),Object(o.c)(e),setParameters(e,t),a)r=n(e),Object(o.b)(e);else try{r=n(e)}finally{Object(o.b)(e)}return r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i="undefined"!=typeof window&&window.addEventListener,o=new Map,a=function isReady(){return i&&window.__SEER_INITIALIZED__},s=function throttle(e,t){var n=o.get(e),r=Date.now();return!!(n&&r-n<t)||(o.set(e,r),!1)},l=function replacer(e){return function(t,n){if(!n||"object"!==(void 0===n?"undefined":r(n))||!e.has(n))return e.add(n),Object.prototype.toString.call(n).slice(8,-1).includes("Array")?Array.prototype.slice.call(n,0,20):n}},u=function send(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(i&&a()){var n=new Set,r=JSON.stringify(t,l(n));try{window.postMessage({type:e,payload:r,source:"seer-agent"},"*")}catch(e){if(s("seer-log",2e3))return;console.log(e)}}},c=new Map,p=function listener(e){if(e&&e.data&&"seer-core"===e.data.source){var t=e.data,n=t.type,r=t.payload,i=c.get(n);i&&i.forEach(function(e){return e(r)})}},h=function init(){i&&!window.__SEER_LISTENER__&&(window.addEventListener("message",p),window.__SEER_LISTENER__=!0)};t.default={send:u,throttle:s,isReady:a,list:function list(e,t){return u("LIST",{key:e,data:t})},listItem:function listItem(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return u("LIST_ITEM",{key:e,itemKey:t,data:n})},updateItem:function updateItem(e,t,n,r){return u("UPDATE_ITEM",{key:e,itemKey:t,path:n,data:r})},multiUpdate:function multiUpdate(e,t,n){return u("MULTI_UPDATE_ITEM",{key:e,itemKey:t,array:n})},deleteItem:function deleteItem(e,t){return u("DELETE_ITEM",{key:e,itemKey:t})},addLog:function addLog(e,t,n){return u("ADD_LOG",{key:e,itemKey:t,msg:n})},listeners:c,listenFor:function listenFor(e,t){if(i){if(!e||!t)throw new Error("Please provide a type and callback");c.has(e)||c.set(e,[]),window.__SEER_LISTENER__||h(),c.get(e).push(t)}},removeListener:function removeListener(e){c.forEach(function(t,n){c.set(n,t.filter(function(t){return t!==e}))})},init:h,clean:function clean(){i&&window.__SEER_LISTENER__&&(window.removeEventListener("message",p),delete window.__SEER_LISTENER__)}}},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(3),i=n(4),o=n(159),a=n(8),s=n(6),l=n(5),u="Resource subclass must define virtual methods",c=function(){function Resource(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(r.a)(this,Resource),Object(a.e)(e);var n=t.id,i=t.userData,o=void 0===i?{}:i;this.gl=e,this.id=n||Object(s.i)(this.constructor.name),this.userData=o,this._bound=!1,this._handle=t.handle,void 0===this._handle&&(this._handle=this._createHandle()),this._addStats()}return Object(i.a)(Resource,[{key:"toString",value:function toString(){return"".concat(this.constructor.name,"(").concat(this.id,")")}},{key:"delete",value:function _delete(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).deleteChildren,t=void 0!==e&&e,n=this._handle&&this._deleteHandle(this._handle);return this._handle=null,this._removeStats(),n&&t&&n.filter(Boolean).forEach(function(e){e.delete()}),this}},{key:"bind",value:function bind(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.handle;return"function"!=typeof t?(this._bindHandle(t),this):(this._bound?e=t():(this._bindHandle(this.handle),this._bound=!0,e=t(),this._bound=!1,this._bindHandle(null)),e)}},{key:"unbind",value:function unbind(){this.bind(null)}},{key:"getParameter",value:function getParameter(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=Object(a.j)(this.gl,e),Object(l.a)(e);var n=(this.constructor.PARAMETERS||{})[e];if(n){var r=Object(a.n)(this.gl);if(!((!("webgl2"in n)||r)&&(!("extension"in n)||this.gl.getExtension(n.extension)))){var i=n.webgl1,o="webgl2"in n?n.webgl2:n.webgl1;return r?o:i}}return this._getParameter(e,t)}},{key:"getParameters",value:function getParameters(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={},n=t.parameters,r=t.keys,i=this.constructor.PARAMETERS||{},o=Object(a.n)(this.gl),s={},l=n||Object.keys(i),u=!0,c=!1,p=void 0;try{for(var h,f=l[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){var d=h.value,g=i[d];if(g&&(!("webgl2"in g)||o)&&(!("extension"in g)||this.gl.getExtension(g.extension))){var m=r?Object(a.i)(this.gl,d):d;s[m]=this.getParameter(d,e),r&&"GLenum"===g.type&&(s[m]=Object(a.i)(this.gl,s[m]))}}}catch(e){c=!0,p=e}finally{try{u||null==f.return||f.return()}finally{if(c)throw p}}return s}},{key:"setParameter",value:function setParameter(e,t){e=Object(a.j)(this.gl,e),Object(l.a)(e);var n=(this.constructor.PARAMETERS||{})[e];if(n){var r=Object(a.n)(this.gl);if(!((!("webgl2"in n)||r)&&(!("extension"in n)||this.gl.getExtension(n.extension))))throw new Error("Parameter not available on this platform");"GLenum"===n.type&&(t=Object(a.j)(t))}return this._setParameter(e,t),this}},{key:"setParameters",value:function setParameters(e){for(var t in e)this.setParameter(t,e[t]);return this}},{key:"stubRemovedMethods",value:function stubRemovedMethods(e,t,n){return Object(s.h)(this,e,t,n)}},{key:"initialize",value:function initialize(e){}},{key:"_createHandle",value:function _createHandle(){throw new Error(u)}},{key:"_deleteHandle",value:function _deleteHandle(){throw new Error(u)}},{key:"_bindHandle",value:function _bindHandle(){throw new Error(u)}},{key:"_getOptsFromHandle",value:function _getOptsFromHandle(){throw new Error(u)}},{key:"_getParameter",value:function _getParameter(e,t){throw new Error(u)}},{key:"_setParameter",value:function _setParameter(e,t){throw new Error(u)}},{key:"_context",value:function _context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}},{key:"_addStats",value:function _addStats(){var e=this.constructor.name,t=o.default.stats;t.resourceCount=t.resourceCount||0,t.resourceMap=t.resourceMap||{},t.resourceCount++,t.resourceMap[e]=t.resourceMap[e]||{created:0,active:0},t.resourceMap[e].created++,t.resourceMap[e].active++}},{key:"_removeStats",value:function _removeStats(){var e=this.constructor.name;o.default.stats.resourceMap[e].active--}},{key:"handle",get:function get(){return this._handle}}]),Resource}()},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(t,n,r){"use strict";r(25);var i=r(1),o=r.n(i),a=r(2),s=r.n(a),l=r(247),u=r.n(l),p=Object.assign||function(e){for(var t,n=1;n<arguments.length;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var g={accesskey:"accessKey",allowfullscreen:"allowFullScreen",allowtransparency:"allowTransparency",autocomplete:"autoComplete",autofocus:"autoFocus",autoplay:"autoPlay",cellpadding:"cellPadding",cellspacing:"cellSpacing",charset:"charSet",class:"className",classid:"classId",colspan:"colSpan",contenteditable:"contentEditable",contextmenu:"contextMenu",crossorigin:"crossOrigin",enctype:"encType",for:"htmlFor",formaction:"formAction",formenctype:"formEncType",formmethod:"formMethod",formnovalidate:"formNoValidate",formtarget:"formTarget",frameborder:"frameBorder",hreflang:"hrefLang",inputmode:"inputMode",keyparams:"keyParams",keytype:"keyType",marginheight:"marginHeight",marginwidth:"marginWidth",maxlength:"maxLength",mediagroup:"mediaGroup",minlength:"minLength",novalidate:"noValidate",radiogroup:"radioGroup",readonly:"readOnly",rowspan:"rowSpan",spellcheck:"spellCheck",srcdoc:"srcDoc",srclang:"srcLang",srcset:"srcSet",tabindex:"tabIndex",usemap:"useMap"},m={amp:"&",apos:"'",gt:">",lt:"<",nbsp:" ",quot:"“"},y=["style","script"],v=/([-A-Z0-9_:]+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|(?:\{((?:\\.|{[^}]*?}|[^}])*)\})))?/gi,_=/mailto:/i,x=/\n{2,}$/,w=/^( *>[^\n]+(\n[^\n]+)*\n*)+\n{2,}/,S=/^ *> ?/gm,E=/^ {2,}\n/,P=/^(?:( *[-*_]) *){3,}(?:\n *)+\n/,C=/^\s*(`{3,}|~{3,}) *(\S+)? *\n([\s\S]+?)\s*\1 *(?:\n *)+\n?/,T=/^(?: {4}[^\n]+\n*)+(?:\n *)+\n?/,A=/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,O=/^(?:\n *)*\n/,I=/\r\n?/g,R=/^\[\^(.*)\](:.*)\n/,L=/^\[\^(.*)\]/,M=/\f/g,D=/^\s*?\[(x|\s)\]/,F=/^ *(#{1,6}) *([^\n]+)\n{0,2}/,N=/^([^\n]+)\n *(=|-){3,} *(?:\n *)+\n/,B=/^ *<([A-Za-z][^ >\/]*) ?([^>]*)\/{0}>\n?(\s*(?:<\1[^>]*?>[\s\S]*?<\/\1>|(?!<\1)[\s\S])*?)<\/\1>\n*/,z=/&([a-z]+);/g,U=/^<!--.*?-->/,V=/^(data|aria|x)-[a-z_][a-z\d_.-]*$/,G=/^ *<([a-z][a-z0-9:]*)(?:\s+((?:<.*?>|[^>])*))?\/?>(?!<\/\1>)(\s*\n)?/i,W=/^\{.*\}$/,q=/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,H=/^<([^ >]+@[^ >]+)>/,X=/^<([^ >]+:\/[^ >]+)>/,K=/ *\n+$/,Z=/(?:^|\n)( *)$/,Y=/-([a-z])?/gi,J=/^(.*\|?.*)\n *(\|? *[-:]+ *\|[-| :]*)\n((?:.*\|.*\n)*)\n?/,Q=/^((?:[^\n]|\n(?! *\n))+)(?:\n *)+\n/,$=/^\[([^\]]*)\]:\s*(\S+)\s*("([^"]*)")?/,ee=/^!\[([^\]]*)\] ?\[([^\]]*)\]/,te=/^\[([^\]]*)\] ?\[([^\]]*)\]/,ne=/(\[|\])/g,re=/(\n|^[-*]\s|^#|^ {2,}|^-{2,}|^>\s)/,ie=/\t/g,oe=/(^ *\||\| *$)/g,ae=/^ *:-+: *$/,se=/^ *:-+ *$/,le=/^ *-+: *$/,ue=/ *\| */,ce=/^([*_])\1((?:\[.*?\][([].*?[)\]]|<.*?>(?:.*?<.*?>)?|`.*?`|~+.*?~+|.)*?)\1\1(?!\1)/,pe=/^([*_])((?:\[.*?\][([].*?[)\]]|<.*?>(?:.*?<.*?>)?|`.*?`|~+.*?~+|.)*?)\1(?!\1)/,he=/^~~((?:\[.*?\]|<.*?>(?:.*?<.*?>)?|`.*?`|.)*?)~~/,fe=/^\\([^0-9A-Za-z\s])/,de=/^[\s\S]+?(?=[^0-9A-Z\s\u00c0-\uffff&;.()'"]|\d+\.|\n\n| {2,}\n|\w+:\S|$)/i,ge=/(^\n+|(\n|\s)+$)/g,me=/^([ \t]*)/,ye=/\\([^0-9A-Z\s])/gi,ve=/^( *)((?:[*+-]|\d+\.)) +/,_e=/( *)((?:[*+-]|\d+\.)) +[^\n]*(?:\n(?!\1(?:[*+-]|\d+\.) )[^\n]*)*(\n|$)/gm,be=/^( *)((?:[*+-]|\d+\.)) [\s\S]+?(?:\n{2,}(?! )(?!\1(?:[*+-]|\d+\.) (?!(?:[*+-]|\d+\.) ))\n*|\s*\n*$)/,xe=/^\[((?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*)\]\(\s*<?((?:[^\s\\]|\\.)*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*\)/,we=/^!\[((?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*)\]\(\s*<?((?:[^\s\\]|\\.)*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*\)/,Se=[w,T,C,F,N,B,U,G,_e,be,J,Q];function containsBlockSyntax(e){return Se.some(function(t){return t.test(e)})}function slugify(e){return e.replace(/[ÀÁÂÃÄÅàáâãäåæÆ]/g,"a").replace(/[çÇ]/g,"c").replace(/[ðÐ]/g,"d").replace(/[ÈÉÊËéèêë]/g,"e").replace(/[ÏïÎîÍíÌì]/g,"i").replace(/[Ññ]/g,"n").replace(/[øØœŒÕõÔôÓóÒò]/g,"o").replace(/[ÜüÛûÚúÙù]/g,"u").replace(/[ŸÿÝý]/g,"y").replace(/[^a-z0-9- ]/gi,"").replace(/ /gi,"-").toLowerCase()}function parseTableAlignCapture(e){return le.test(e)?"right":ae.test(e)?"center":se.test(e)?"left":null}function parseTableHeader(e,t,n){return e[1].replace(oe,"").trim().split(ue).map(function(e){return t(e,n)})}function parseTableAlign(e){return e[2].replace(oe,"").trim().split(ue).map(parseTableAlignCapture)}function parseTableCells(e,t,n){return e[3].replace(oe,"").trim().split("\n").map(function(e){return e.replace(oe,"").split(ue).map(function(e){return t(e.trim(),n)})})}function parseTable(e,t,n){n.inline=!0;var r=parseTableHeader(e,t,n),i=parseTableAlign(e),o=parseTableCells(e,t,n);return n.inline=!1,{align:i,cells:o,header:r,type:"table"}}function getTableStyle(e,t){return null==e.align[t]?{}:{textAlign:e.align[t]}}function normalizeAttributeKey(e){return-1!==e.indexOf("-")&&null===e.match(V)&&(e=e.replace(Y,function(e,t){return t.toUpperCase()})),e}function attributeValueToJSXPropValue(e,t){return"style"===e?t.split(/;\s?/).reduce(function(e,t){var n=t.slice(0,t.indexOf(":")),r=n.replace(/(-[a-z])/g,function(e){return e[1].toUpperCase()});return e[r]=t.slice(n.length+1).trim(),e},{}):(t.match(W)&&(t=t.slice(1,t.length-1)),"true"===t||"false"!==t&&t)}function normalizeWhitespace(e){return e.replace(I,"\n").replace(M,"").replace(ie,"    ")}function parserFor(e){function b(n,r){for(var i=[],o="";n;)for(var a=0;a<t.length;){var s=t[a],l=e[s],u=l.match(n,r,o);if(u){var c=u[0];n=n.substring(c.length);var p=l.parse(u,b,r);null==p.type&&(p.type=s),i.push(p),o=c;break}a++}return i}var t=Object.keys(e);return t.sort(function(t,n){var r=e[t].order,i=e[n].order;return r===i?t<n?-1:1:r-i}),function(e,t){return b(normalizeWhitespace(e),t)}}function inlineRegex(e){return function(t,n){return n.inline?e.exec(t):null}}function simpleInlineRegex(e){return function(t,n){return n.inline||n.simple?e.exec(t):null}}function blockRegex(e){return function(t,n){return n.inline||n.simple?null:e.exec(t)}}function anyScopeRegex(e){return function(t){return e.exec(t)}}function reactFor(e){return function b(t,n){if(n=n||{},Array.isArray(t)){for(var r=n.key,i=[],o=!1,a=0;a<t.length;a++){n.key=a;var s=b(t[a],n),l="string"==typeof s;l&&o?i[i.length-1]+=s:i.push(s),o=l}return n.key=r,i}return e(t,b,n)}}function sanitizeUrl(e){try{if(decodeURIComponent(e).match(/^\s*javascript:/i))return null}catch(e){return null}return e}function unescapeUrl(e){return e.replace(ye,"$1")}function parseInline(e,t,n){var r=n.inline||!1,i=n.simple||!1;n.inline=!0,n.simple=!0;var o=e(t,n);return n.inline=r,n.simple=i,o}function parseSimpleInline(e,t,n){var r=n.inline||!1,i=n.simple||!1;n.inline=!1,n.simple=!0;var o=e(t,n);return n.inline=r,n.simple=i,o}function parseBlock(e,t,n){return n.inline=!1,e(t+"\n\n",n)}function parseCaptureInline(e,t,n){return{content:parseInline(t,e[1],n)}}function captureNothing(){return{}}function renderNothing(){return null}function ruleOutput(e){return function(t,n,r){return e[t.type].react(t,n,r)}}function cx(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(Boolean).join(" ")}function get(e,t,n){for(var r=e,i=t.split(".");i.length&&void 0!==(r=r[i[0]]);)i.shift();return r||n}function getTag(e,t){var n=get(t,e);return n?"function"==typeof n||"object"===(void 0===n?"undefined":h(n))&&"render"in n?n:get(t,e+".component",e):e}var Ee=1,Pe=2,Ce=3,ke=4,Te=5;function compiler(t,n){function d(e,t){for(var i=get(n.overrides,e+".props",{}),o=arguments.length,a=Array(o>2?o-2:0),s=2;s<o;s++)a[s-2]=arguments[s];return r.apply(void 0,[getTag(e,n.overrides),p({},i,t,{className:cx(t&&t.className,i.className)||void 0})].concat(a))}function c(e){var t=!1;n.forceInline?t=!0:!n.forceBlock&&(t=!1===re.test(e));var r=h(l(t?e:e.replace(ge,"")+"\n\n",{inline:t})),i=void 0;return r.length>1?i=d(t?"span":"div",{key:"outer"},r):1===r.length?"string"==typeof(i=r[0])&&(i=d("span",{key:"outer"},i)):i=d("span",{key:"outer"}),i}function e(e){var t=e.match(v);return t?t.reduce(function(e,t,n){var r=t.indexOf("=");if(-1!==r){var i=normalizeAttributeKey(t.slice(0,r)).trim(),a=u()(t.slice(r+1).trim()),s=g[i]||i,l=e[s]=attributeValueToJSXPropValue(i,a);(B.test(l)||G.test(l))&&(e[s]=o.a.cloneElement(c(l.trim()),{key:n}))}else e[g[t]||t]=!0;return e},{}):void 0}(n=n||{}).overrides=n.overrides||{},n.slugify=n.slugify||slugify;var r=n.createElement||o.a.createElement;var i=[],a={},s={blockQuote:{match:blockRegex(w),order:Pe,parse:function d(e,t,n){return{content:t(e[0].replace(S,""),n)}},react:function e(t,n,r){return d("blockquote",{key:r.key},n(t.content,r))}},breakLine:{match:anyScopeRegex(E),order:Pe,parse:captureNothing,react:function e(t,n,r){return d("br",{key:r.key})}},breakThematic:{match:blockRegex(P),order:Pe,parse:captureNothing,react:function e(t,n,r){return d("hr",{key:r.key})}},codeBlock:{match:blockRegex(T),order:Ee,parse:function c(e){return{content:e[0].replace(/^ {4}/gm,"").replace(/\n+$/,""),lang:void 0}},react:function e(t,n,r){return d("pre",{key:r.key},d("code",{className:t.lang?"lang-"+t.lang:""},t.content))}},codeFenced:{match:blockRegex(C),order:Ee,parse:function b(e){return{content:e[3],lang:e[2]||void 0,type:"codeBlock"}}},codeInline:{match:simpleInlineRegex(A),order:ke,parse:function b(e){return{content:e[2]}},react:function e(t,n,r){return d("code",{key:r.key},t.content)}},footnote:{match:blockRegex(R),order:Ee,parse:function b(e){return i.push({footnote:e[2],identifier:e[1]}),{}},react:renderNothing},footnoteReference:{match:inlineRegex(L),order:Pe,parse:function b(e){return{content:e[1],target:"#"+e[1]}},react:function e(t,n,r){return d("a",{key:r.key,href:sanitizeUrl(t.target)},d("sup",{key:r.key},t.content))}},gfmTask:{match:inlineRegex(D),order:Pe,parse:function b(e){return{completed:"x"===e[1].toLowerCase()}},react:function e(t,n,r){return d("input",{checked:t.completed,key:r.key,readOnly:!0,type:"checkbox"})}},heading:{match:blockRegex(F),order:Pe,parse:function e(t,r,i){return{content:parseInline(r,t[2],i),id:n.slugify(t[2]),level:t[1].length}},react:function f(e,t,n){return d("h"+e.level,{id:e.id,key:n.key},t(e.content,n))}},headingSetext:{match:blockRegex(N),order:Ee,parse:function d(e,t,n){return{content:parseInline(t,e[1],n),level:"="===e[2]?1:2,type:"heading"}}},htmlBlock:{match:anyScopeRegex(B),order:Pe,parse:function k(t,n,r){var i=t[3].match(me)[1],o=new RegExp("^"+i,"gm"),a=t[3].replace(o,""),s=containsBlockSyntax(a)?parseBlock:parseInline,l=-1!==y.indexOf(t[1]);return{attrs:e(t[2]),content:l?t[3]:s(n,a,r),noInnerParse:l,tag:t[1]}},react:function e(t,n,r){return d(t.tag,p({key:r.key},t.attrs),t.noInnerParse?t.content:n(t.content,r))}},htmlComment:{match:anyScopeRegex(U),order:Pe,parse:function a(){return{}},react:renderNothing},htmlSelfClosing:{match:anyScopeRegex(G),order:Pe,parse:function b(t){return{attrs:e(t[2]||""),tag:t[1]}},react:function e(t,n,r){return d(t.tag,p({},t.attrs,{key:r.key}))}},image:{match:simpleInlineRegex(we),order:Pe,parse:function b(e){return{alt:e[1],target:unescapeUrl(e[2]),title:e[3]}},react:function e(t,n,r){return d("img",{key:r.key,alt:t.alt||void 0,title:t.title||void 0,src:sanitizeUrl(t.target)})}},link:{match:inlineRegex(xe),order:ke,parse:function d(e,t,n){return{content:parseSimpleInline(t,e[1],n),target:unescapeUrl(e[2]),title:e[3]}},react:function e(t,n,r){return d("a",{key:r.key,href:sanitizeUrl(t.target),title:t.title},n(t.content,r))}},linkAngleBraceStyleDetector:{match:inlineRegex(X),order:Ee,parse:function b(e){return{content:[{content:e[1],type:"text"}],target:e[1],type:"link"}}},linkBareUrlDetector:{match:inlineRegex(q),order:Ee,parse:function b(e){return{content:[{content:e[1],type:"text"}],target:e[1],title:void 0,type:"link"}}},linkMailtoDetector:{match:inlineRegex(H),order:Ee,parse:function d(e){var t=e[1],n=e[1];return _.test(n)||(n="mailto:"+n),{content:[{content:t.replace("mailto:",""),type:"text"}],target:n,type:"link"}}},list:{match:function f(e,t,n){var r=Z.exec(n),i=t._list||!t.inline;return r&&i?(e=r[1]+e,be.exec(e)):null},order:Pe,parse:function j(e,t,n){var r=e[2],i=r.length>1,o=i?+r:void 0,a=e[0].replace(x,"\n").match(_e),s=!1;return{items:a.map(function(e,r){var i=ve.exec(e)[0].length,o=new RegExp("^ {1,"+i+"}","gm"),l=e.replace(o,"").replace(ve,""),u=r===a.length-1,c=-1!==l.indexOf("\n\n")||u&&s;s=c;var p,h=n.inline,f=n._list;n._list=!0,c?(n.inline=!1,p=l.replace(K,"\n\n")):(n.inline=!0,p=l.replace(K,""));var d=t(p,n);return n.inline=h,n._list=f,d}),ordered:i,start:o}},react:function f(e,t,n){return d(e.ordered?"ol":"ul",{key:n.key,start:e.start},e.items.map(function(e,r){return d("li",{key:r},t(e,n))}))}},newlineCoalescer:{match:blockRegex(O),order:ke,parse:captureNothing,react:function a(){return"\n"}},paragraph:{match:blockRegex(Q),order:ke,parse:parseCaptureInline,react:function e(t,n,r){return d("p",{key:r.key},n(t.content,r))}},ref:{match:inlineRegex($),order:Ee,parse:function b(e){return a[e[1]]={target:e[2],title:e[4]},{}},react:renderNothing},refImage:{match:simpleInlineRegex(ee),order:Ee,parse:function b(e){return{alt:e[1]||void 0,ref:e[2]}},react:function e(t,n,r){return d("img",{key:r.key,alt:t.alt,src:sanitizeUrl(a[t.ref].target),title:a[t.ref].title})}},refLink:{match:inlineRegex(te),order:Ee,parse:function d(e,t,n){return{content:t(e[1],n),fallbackContent:t(e[0].replace(ne,"\\$1"),n),ref:e[2]}},react:function e(t,n,r){return a[t.ref]?d("a",{key:r.key,href:sanitizeUrl(a[t.ref].target),title:a[t.ref].title},n(t.content,r)):d("span",{key:r.key},n(t.fallbackContent,r))}},table:{match:blockRegex(J),order:Pe,parse:parseTable,react:function f(e,t,n){return d("table",{key:n.key},d("thead",null,d("tr",null,e.header.map(function(r,i){return d("th",{key:i,style:getTableStyle(e,i)},t(r,n))}))),d("tbody",null,e.cells.map(function(r,i){return d("tr",{key:i},r.map(function(r,i){return d("td",{key:i,style:getTableStyle(e,i)},t(r,n))}))})))}},text:{match:anyScopeRegex(de),order:Te,parse:function b(e){return{content:e[0].replace(z,function(e,t){return m[t]?m[t]:e})}},react:function b(e){return e.content}},textBolded:{match:simpleInlineRegex(ce),order:Ce,parse:function d(e,t,n){return{content:t(e[2],n)}},react:function e(t,n,r){return d("strong",{key:r.key},n(t.content,r))}},textEmphasized:{match:simpleInlineRegex(pe),order:ke,parse:function d(e,t,n){return{content:t(e[2],n)}},react:function e(t,n,r){return d("em",{key:r.key},n(t.content,r))}},textEscaped:{match:simpleInlineRegex(fe),order:Pe,parse:function b(e){return{content:e[1],type:"text"}}},textStrikethroughed:{match:simpleInlineRegex(he),order:ke,parse:parseCaptureInline,react:function e(t,n,r){return d("del",{key:r.key},n(t.content,r))}}},l=parserFor(s),h=reactFor(ruleOutput(s)),I=c(t);return i.length&&I.props.children.push(d("footer",{key:"footer"},i.map(function(e){return d("div",{id:e.identifier,key:e.identifier},e.identifier,h(l(e.footnote,{inline:!0})))}))),I}var Ae=r(157),Oe=r(65),Ie=r(95),Re=r(13),Le=r(97);function MarkdownHeadingRenderer(e){var t=e.classes,n=e.level,r=e.children,i=e.id;return o.a.createElement("div",{className:t.spacing},o.a.createElement(Le.a,{level:n,id:i},r))}MarkdownHeadingRenderer.propTypes={classes:s.a.object.isRequired,level:s.a.oneOf([1,2,3,4,5,6]).isRequired,children:s.a.node,id:s.a.string};var Me=Object(Re.a)(function styles(e){return{spacing:{marginBottom:e.space[2]}}})(MarkdownHeadingRenderer),je=r(24);function ListRenderer(e){var t=e.classes,n=e.ordered,r=e.children,a=n?"ol":"ul",s=Object(je.a)(t.list,n&&t.ordered);return o.a.createElement(a,{className:s},i.Children.map(r,function(e){return Object(i.cloneElement)(e,{className:t.li})}))}ListRenderer.propTypes={classes:s.a.object.isRequired,ordered:s.a.bool,children:s.a.node.isRequired},ListRenderer.defaultProps={ordered:!1};var De=Object(Re.a)(function styles(e){var t=e.space,n=e.color,r=e.fontFamily;return{list:{marginTop:0,marginBottom:t[2],paddingLeft:t[3],fontSize:"inherit"},ordered:{listStyleType:"decimal"},li:{color:n.base,fontFamily:r.base,fontSize:"inherit",lineHeight:1.5,listStyleType:"inherit"}}})(ListRenderer);function BlockquoteRenderer(e){var t=e.classes,n=e.className,r=e.children,i=Object(je.a)(t.blockquote,n);return o.a.createElement("blockquote",{className:i},r)}BlockquoteRenderer.propTypes={classes:s.a.object.isRequired,className:s.a.string,children:s.a.node.isRequired};var Fe=Object(Re.a)(function styles(e){var t=e.space,n=e.color,r=e.fontSize,i=e.fontFamily;return{blockquote:{margin:[[t[2],t[4]]],padding:0,color:n.base,fontFamily:i.base,fontSize:r.base,lineHeight:1.5}}})(BlockquoteRenderer),Ne=(r(50),r(149));function PreRenderer(e){var t=e.classes,n=e.className,r=e.children,i=Object(je.a)(n,t.pre);return n&&-1!==n.indexOf("lang-")?o.a.createElement("pre",{className:i,dangerouslySetInnerHTML:{__html:r}}):o.a.createElement("pre",{className:i},r)}PreRenderer.propTypes={classes:s.a.object.isRequired,className:s.a.string,children:s.a.node.isRequired};var Be=Object(Re.a)(function styles(e){var t=e.space,n=e.color,r=e.fontSize,i=e.fontFamily,o=e.borderRadius;return{pre:Object.assign({fontFamily:i.monospace,fontSize:r.small,lineHeight:1.5,color:n.base,whiteSpace:"pre-wrap",wordWrap:"normal",tabSize:2,hyphens:"none",backgroundColor:n.codeBackground,padding:[[t[1],t[2]]],border:[[1,n.codeBackground,"solid"]],borderRadius:o,marginTop:0,marginBottom:t[2]},Object(Ne.a)({color:n}))}})(PreRenderer),ze=r(99);r(56),r(68),r(75);function CheckboxRenderer_extends(){return(CheckboxRenderer_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function CheckboxRenderer(e){var t=e.classes,n=_objectWithoutPropertiesLoose(e,["classes"]);return o.a.createElement("input",CheckboxRenderer_extends({},n,{type:"checkbox",className:t.input}))}CheckboxRenderer.propTypes={classes:s.a.object.isRequired};var Ue=Object(Re.a)(function styles(){return{input:{isolate:!1,display:"inline-block",verticalAlign:"middle"}}})(CheckboxRenderer);function HrRenderer(e){var t=e.classes;return o.a.createElement("hr",{className:t.hr})}HrRenderer.propTypes={classes:s.a.object.isRequired};var Ve=Object(Re.a)(function styles(e){var t=e.space;return{hr:{borderBottom:[[1,e.color.border,"solid"]],marginTop:0,marginBottom:t[2]}}})(HrRenderer);function DetailsRenderer(e){var t=e.classes,n=e.children;return o.a.createElement("details",{className:t.details},n)}DetailsRenderer.propTypes={classes:s.a.object.isRequired,children:s.a.node.isRequired};var Ge=Object(Re.a)(function styles(e){var t=e.space,n=e.color,r=e.fontSize,i=e.fontFamily;return{details:{marginBottom:t[2],fontFamily:i.base,fontSize:r.base,color:n.base}}})(DetailsRenderer);function DetailsSummaryRenderer(e){var t=e.classes,n=e.children;return o.a.createElement("summary",{className:t.summary},n)}DetailsSummaryRenderer.propTypes={classes:s.a.object.isRequired,children:s.a.node.isRequired};var We=Object(Re.a)(function styles(e){var t=e.space,n=e.color,r=e.fontSize,i=e.fontFamily;return{summary:{marginBottom:t[1],fontFamily:i.base,fontSize:r.base,color:n.base,cursor:"pointer","&:focus":{isolate:!1,outline:[[1,"dotted",n.linkHover]],outlineOffset:2}}}})(DetailsSummaryRenderer);function TableRenderer(e){var t=e.classes,n=e.children;return o.a.createElement("table",{className:t.table},n)}TableRenderer.propTypes={classes:s.a.object.isRequired,children:s.a.node.isRequired};var qe=Object(Re.a)(function styles(e){return{table:{marginTop:0,marginBottom:e.space[2],borderCollapse:"collapse"}}})(TableRenderer);function TableHeadRenderer(e){var t=e.classes,n=e.children;return o.a.createElement("thead",{className:t.thead},n)}TableHeadRenderer.propTypes={classes:s.a.object.isRequired,children:s.a.node.isRequired};var He=Object(Re.a)(function styles(e){return{thead:{borderBottom:[[1,e.color.border,"solid"]]}}})(TableHeadRenderer);function TableBodyRenderer(e){var t=e.children;return o.a.createElement("tbody",null,t)}TableBodyRenderer.propTypes={children:s.a.node.isRequired};var Xe=TableBodyRenderer;function TableRowRenderer(e){var t=e.children;return o.a.createElement("tr",null,t)}TableRowRenderer.propTypes={children:s.a.node.isRequired};var Ke=TableRowRenderer;function TableCellRenderer(e){var t=e.classes,n=e.header,r=e.children;return n?o.a.createElement("th",{className:t.th},r):o.a.createElement("td",{className:t.td},r)}TableCellRenderer.propTypes={classes:s.a.object.isRequired,header:s.a.bool,children:s.a.node.isRequired},TableCellRenderer.defaultProps={header:!1};var Ze=Object(Re.a)(function styles(e){var t=e.space,n=e.color,r=e.fontSize,i=e.fontFamily;return{td:{padding:[[t[0],t[2],t[0],0]],fontFamily:i.base,fontSize:r.base,color:n.base,lineHeight:1.5},th:{composes:"$td",fontWeight:"bold"}}})(TableCellRenderer),Ye=function Pre(e){return Object(i.isValidElement)(e.children)?o.a.createElement(Be,e.children.props):o.a.createElement(Be,e)};Ye.propTypes={children:s.a.node};var Je={a:{component:Ae.a},h1:{component:Me,props:{level:1}},h2:{component:Me,props:{level:2}},h3:{component:Me,props:{level:3}},h4:{component:Me,props:{level:4}},h5:{component:Me,props:{level:5}},h6:{component:Me,props:{level:6}},p:{component:Ie.a,props:{semantic:"p"}},em:{component:Oe.a,props:{semantic:"em"}},strong:{component:Oe.a,props:{semantic:"strong"}},ul:{component:De},ol:{component:De,props:{ordered:!0}},blockquote:{component:Fe},code:{component:ze.a},pre:{component:Ye},input:{component:Ue},hr:{component:Ve},table:{component:qe},thead:{component:He},th:{component:Ze,props:{header:!0}},tbody:{component:Xe},tr:{component:Ke},td:{component:Ze},details:{component:Ge},summary:{component:We}},Qe=Object.assign({},Je,{p:{component:Oe.a}});function Markdown_Markdown(e){return compiler(e.text,{overrides:e.inline?Qe:Je,forceBlock:!0})}Markdown_Markdown.propTypes={text:s.a.string.isRequired,inline:s.a.bool};var $e=Markdown_Markdown;r.d(n,"a",function(){return $e})},function(e,t,n){"use strict";n.d(t,"d",function(){return s}),n.d(t,"c",function(){return p}),n.d(t,"b",function(){return f}),n.d(t,"a",function(){return d});var r=n(3),i=n(22),o=n(77),a=null,s=function headlessGL(){throw new Error("luma.gl: loaded under Node.js without headless gl installed, meaning that WebGL contexts can not be created. This may not be an error. For example, this is a typical configuration for isorender applications running on the server.")};if(!o.a)try{s=n(461),a=n(462)}catch(e){}var l=function DummyType(){Object(r.a)(this,DummyType)},u=a||i.a,c=u.WebGLRenderingContext,p=void 0===c?l:c,h=(u.WebGLProgram,u.WebGLShader,u.WebGLBuffer),f=void 0===h?l:h;u.WebGLFramebuffer,u.WebGLRenderbuffer,u.WebGLTexture,u.WebGLUniformLocation,u.WebGLActiveInfo,u.WebGLShaderPrecisionFormat;var d=function getWebGL2RenderingContext(){return i.a.WebGL2RenderingContext||function WebGL2RenderingContextNotSupported(){Object(r.a)(this,WebGL2RenderingContextNotSupported)}}();(function getImage(){return i.a.Image||function ImageNotSupported(){Object(r.a)(this,ImageNotSupported)}})()},function(e,t,n){"use strict";n.d(t,"b",function(){return getKeyValue}),n.d(t,"a",function(){return getKey}),n.d(t,"c",function(){return glKey});var r=n(5),i=n(38);function getKeyValue(e,t){if("string"!=typeof t)return t;var n=Number(t);if(!isNaN(n))return n;var i=e[t=t.replace(/^.*\./,"")];return Object(r.a)(void 0!==i,"Accessing undefined constant GL.".concat(t)),i}function getKey(e,t){for(var n in t=Number(t),e)if(e[n]===t)return"GL.".concat(n);return String(t)}function glKey(e,t){return void 0===t&&i.a.removed("glKey(value)","glKey(gl, value)","6.0")(),getKey(e,t)}},function(e,t,n){"use strict";n.d(t,"a",function(){return add}),n.d(t,"f",function(){return scale}),n.d(t,"c",function(){return length}),n.d(t,"e",function(){return negate}),n.d(t,"b",function(){return cross}),n.d(t,"d",function(){return lerp}),n.d(t,"h",function(){return transformMat4}),n.d(t,"g",function(){return a});var r=n(16);function add(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e}function scale(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e}function length(e){var t=e[0],n=e[1];return Math.sqrt(t*t+n*n)}function negate(e,t){return e[0]=-t[0],e[1]=-t[1],e}function cross(e,t,n){var r=t[0]*n[1]-t[1]*n[0];return e[0]=e[1]=0,e[2]=r,e}function lerp(e,t,n,r){var i=t[0],o=t[1];return e[0]=i+r*(n[0]-i),e[1]=o+r*(n[1]-o),e}function transformMat4(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[4]*i+n[12],e[1]=n[1]*r+n[5]*i+n[13],e}var i,o,a=function subtract(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e};i=new r.a(2),r.a!=Float32Array&&(i[0]=0,i[1]=0),o=i},function(e,t,n){"use strict";(function(e){var r=!("[object process]"===Object.prototype.toString.call(e.process)&&!e.process.browser)?n(449):null;t.a=r}).call(this,n(31))},,function(e,t,n){"use strict";var r=n(493);t.a=new r.a({id:"luma"}).enable()},function(e,t,n){"use strict";n.d(t,"b",function(){return getGLTypeFromTypedArray}),n.d(t,"c",function(){return getTypedArrayFromGLType}),n.d(t,"a",function(){return flipRows}),n.d(t,"d",function(){return scalePixels});var r="Failed to deduce GL constant from typed array";function getGLTypeFromTypedArray(e){switch(ArrayBuffer.isView(e)?e.constructor:e){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(r)}}function getTypedArrayFromGLType(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).clamped,n=void 0===t||t;switch(e){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return n?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function flipRows(e){var t=e.data,n=e.width,r=e.height,i=e.bytesPerPixel,o=void 0===i?4:i,a=e.temp,s=n*o;a=a||new Uint8Array(s);for(var l=0;l<r/2;++l){var u=l*s,c=(r-l-1)*s;a.set(t.subarray(u,u+s)),t.copyWithin(u,c,c+s),t.set(a,c)}}function scalePixels(e){for(var t=e.data,n=e.width,r=e.height,i=Math.round(n/2),o=Math.round(r/2),a=new Uint8Array(i*o*4),s=0;s<o;s++)for(var l=0;l<i;l++)for(var u=0;u<4;u++)a[4*(s*i+l)+u]=t[4*(2*s*n+2*l)+u];return{data:a,width:i,height:o}}},function(e,t,n){"use strict";n.d(t,"c",function(){return unquote}),n.d(t,"a",function(){return getType}),n.d(t,"b",function(){return showSpaces});n(25),n(23),n(81);function unquote(e){return e&&e.replace(/^['"]|['"]$/g,"")}function getType(e){return e.flowType?"union"===e.flowType.name&&e.flowType.elements.every(function(e){return"literal"===e.name})?Object.assign({},e.flowType,{name:"enum",value:e.flowType.elements}):e.flowType:e.type}function showSpaces(e){return e&&e.replace(/^\s|\s$/g,"␣")}},function(e,t,n){"use strict";(function(e,r){n.d(t,"b",function(){return a}),n.d(t,"a",function(){return s});var i=n(27),o={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==e&&e,document:"undefined"!=typeof document&&document,process:"object"===(void 0===r?"undefined":Object(i.a)(r))&&r},a=o.window||o.self||o.global,s=o.process||{};console}).call(this,n(31),n(66))},function(e,t,n){"use strict";n.d(t,"a",function(){return multiply}),n.d(t,"b",function(){return scale}),n.d(t,"c",function(){return transformMat4});var r=n(16);function multiply(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e}function scale(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e}function transformMat4(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,e[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,e[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,e[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,e}var i,o;i=new r.a(4),r.a!=Float32Array&&(i[0]=0,i[1]=0,i[2]=0,i[3]=0),o=i},function(e,t,n){"use strict";n.d(t,"a",function(){return getTimestamp});var r=n(62),i=n(41);function getTimestamp(){if(!r.b){var e=i.a.hrtime();return e[0]+e[1]/1e6}return i.b.performance?i.b.performance.now():Date.now()}getTimestamp()},function(e,t,n){"use strict";function requireInRuntime(e,t){if(!(t in e))throw new Error("import or require() statements can be added only by editing a Markdown example file: "+t);return e[t]}n.r(t),n.d(t,"default",function(){return requireInRuntime})},function(e,t,n){"use strict";function evalInContext(e,t,n){return new Function("require","state","setState",e+"\n{"+n+"}").bind(null,t)}n.r(t),n.d(t,"default",function(){return evalInContext})},function(e,t,n){"use strict";n.d(t,"a",function(){return v});var r,i=n(3),o=n(11),a=n(10),s=n(4),l=n(12),u=n(0),c=n(30),p=n(20),h=n(28),f=n(8),d=n(6),g=n(5),m=[9729,9728],y=(r={},Object(u.a)(r,6407,{dataFormat:6407,types:[5121,33635]}),Object(u.a)(r,6408,{dataFormat:6408,types:[5121,32819,32820]}),Object(u.a)(r,6406,{dataFormat:6406,types:[5121]}),Object(u.a)(r,6409,{dataFormat:6409,types:[5121]}),Object(u.a)(r,6410,{dataFormat:6410,types:[5121]}),Object(u.a)(r,33326,{dataFormat:6403,types:[5126],gl2:!0}),Object(u.a)(r,33328,{dataFormat:33319,types:[5126],gl2:!0}),Object(u.a)(r,34837,{dataFormat:6407,types:[5126],gl2:!0}),Object(u.a)(r,34836,{dataFormat:6408,types:[5126],gl2:!0}),r);function isFormatSupported(e,t){var n=y[t];if(!n)return!1;if(void 0===n.gl1&&void 0===n.gl2)return!0;var r=Object(f.n)(e)&&n.gl2||n.gl1;return"string"==typeof r?e.getExtension(r):r}function isLinearFilteringSupported(e,t){var n=y[t];switch(n&&n.types[0]){case 5126:return e.getExtension("OES_texture_float_linear");case 5131:return e.getExtension("OES_texture_half_float_linear");default:return!0}}var v=function(e){function Texture(e,t){var n;Object(i.a)(this,Texture);var r=t.id,s=void 0===r?Object(d.i)("texture"):r,l=t.handle,u=t.target;return(n=Object(o.a)(this,Object(a.a)(Texture).call(this,e,{id:s,handle:l}))).target=u,n.hasFloatTexture=e.getExtension("OES_texture_float"),n.textureUnit=void 0,n}return Object(l.a)(Texture,e),Object(s.a)(Texture,null,[{key:"isSupported",value:function isSupported(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.format,r=t.linearFiltering,i=!0;return n&&(i=(i=i&&isFormatSupported(e,n))&&(!r||isLinearFilteringSupported(e,n))),i}}]),Object(s.a)(Texture,[{key:"toString",value:function toString(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}},{key:"initialize",value:function initialize(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,n=e.pixels,r=void 0===n?null:n,i=e.format,o=void 0===i?6408:i,a=e.type,s=void 0===a?5121:a,l=e.border,c=void 0===l?0:l,p=e.recreate,h=void 0!==p&&p,f=e.parameters,g=void 0===f?{}:f,m=e.pixelStore,y=void 0===m?{}:m,v=e.textureUnit,_=void 0===v?void 0:v,b=e.unpackFlipY,x=void 0===b||b,w=e.mipmaps,S=void 0===w||w;t||(t=r);var E=e.width,P=e.height,C=e.dataFormat,k=this._deduceParameters({format:o,type:s,dataFormat:C,compressed:!1,data:t,width:E,height:P});E=k.width,P=k.height,C=k.dataFormat,this.width=E,this.height=P,this.format=o,this.type=s,this.dataFormat=C,this.border=c,this.textureUnit=_,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle));var T=Object(u.a)({},37440,x),A=Object.assign({},T,y);this._isNPOT()&&S&&(d.g.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),S=!1,this._updateForNPOT(g)),this.mipmaps=S,this.setImageData({data:t,width:E,height:P,format:o,type:s,dataFormat:C,border:c,mipmaps:S,parameters:A}),S&&this.generateMipmap(),this.setParameters(g),h&&(this.data=t)}},{key:"resize",value:function resize(e){var t=e.width,n=e.height;return t!==this.width||n!==this.height?this.initialize({width:t,height:n,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:!1}):this}},{key:"generateMipmap",value:function generateMipmap(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.gl.bindTexture(this.target,this.handle),Object(h.c)(this.gl,t,function(){e.gl.generateMipmap(e.target)}),this.gl.bindTexture(this.target,null),this}},{key:"setImageData",value:function setImageData(e){var t=e.target,n=void 0===t?this.target:t,r=e.pixels,i=void 0===r?null:r,o=e.data,a=void 0===o?null:o,s=e.width,l=void 0===s?this.width:s,u=e.height,c=void 0===u?this.height:u,p=e.level,d=void 0===p?0:p,m=e.format,y=void 0===m?this.format:m,v=e.type,_=void 0===v?this.type:v,b=e.dataFormat,x=void 0===b?this.dataFormat:b,w=e.offset,S=void 0===w?0:w,E=e.border,P=void 0===E?this.border:E,C=e.compressed,k=void 0!==C&&C,T=e.parameters,A=void 0===T?{}:T;a||(a=i);var O=this._deduceParameters({format:y,type:_,dataFormat:x,compressed:k,data:a,width:l,height:c});_=O.type,x=O.dataFormat,k=O.compressed,l=O.width,c=O.height;var I=this.gl;I.bindTexture(this.target,this.handle);var R,L=this._getDataType({data:a,compressed:k});a=L.data,R=L.dataType,Object(h.c)(this.gl,A,function(){switch(R){case"null":I.texImage2D(n,d,y,l,c,P,x,_,a);break;case"typed-array":I.texImage2D(n,d,y,l,c,P,x,_,a,S);break;case"buffer":Object(f.d)(I),I.bindBuffer(35052,a.handle||a),I.texImage2D(n,d,y,l,c,P,x,_,S),I.bindBuffer(35052,null);break;case"browser-object":Object(f.n)(I)?I.texImage2D(n,d,y,l,c,P,x,_,a):I.texImage2D(n,d,y,x,_,a);break;case"compressed":I.compressedTexImage2D(n,d,y,l,c,P,a);break;default:Object(g.a)(!1,"Unknown image data type")}})}},{key:"setSubImageData",value:function setSubImageData(e){var t=this,n=e.target,r=void 0===n?this.target:n,i=e.pixels,o=void 0===i?null:i,a=e.data,s=void 0===a?null:a,l=e.x,u=void 0===l?0:l,c=e.y,d=void 0===c?0:c,g=e.width,m=void 0===g?this.width:g,y=e.height,v=void 0===y?this.height:y,_=e.level,b=void 0===_?0:_,x=e.format,w=void 0===x?this.format:x,S=e.type,E=void 0===S?this.type:S,P=e.dataFormat,C=void 0===P?this.dataFormat:P,k=e.compressed,T=void 0!==k&&k,A=e.offset,O=void 0===A?0:A,I=e.border,R=(void 0===I&&this.border,e.parameters),L=void 0===R?{}:R,M=this._deduceParameters({format:w,type:E,dataFormat:C,compressed:T,data:s,width:m,height:v});if(E=M.type,C=M.dataFormat,T=M.compressed,m=M.width,v=M.height,s||(s=o),s&&s.data){var j=s;s=j.data,m=j.shape[0],v=j.shape[1]}s instanceof p.a&&(s=s.handle),this.gl.bindTexture(this.target,this.handle),Object(h.c)(this.gl,L,function(){T?t.gl.compressedTexSubImage2D(r,b,u,d,m,v,w,s):null===s?t.gl.texSubImage2D(r,b,u,d,m,v,C,E,null):ArrayBuffer.isView(s)?t.gl.texSubImage2D(r,b,u,d,m,v,C,E,s,O):s instanceof f.b?(Object(f.d)(t.gl),t.gl.bindBuffer(35052,s),t.gl.texSubImage2D(r,b,u,d,m,v,C,E,O),t.gl.bindBuffer(35052,null)):Object(f.n)(t.gl)?t.gl.texSubImage2D(r,b,u,d,m,v,C,E,s):t.gl.texSubImage2D(r,b,u,d,C,E,s)}),this.gl.bindTexture(this.target,null)}},{key:"copyFramebuffer",value:function copyFramebuffer(e){var t=e.target,n=(void 0===t&&this.target,e.framebuffer),r=e.x,i=void 0===r?0:r,o=e.y,a=void 0===o?0:o,s=e.width,l=e.height,u=e.level,c=void 0===u?0:u,p=e.internalFormat,h=void 0===p?6408:p,f=e.border,d=void 0===f?0:f;n&&n.bind(),this.bind(0),this.gl.copyTexImage2D(this.target,c,h,i,a,s,l,d),this.unbind(),n&&n.unbind()}},{key:"getActiveUnit",value:function getActiveUnit(){return this.gl.getParameter(34016)-33984}},{key:"bind",value:function bind(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit;if(void 0===e)throw new Error("Texture.bind: must specify texture unit");return this.textureUnit=e,this.gl.activeTexture(33984+e),this.gl.bindTexture(this.target,this.handle),e}},{key:"unbind",value:function unbind(){if(void 0===this.textureUnit)throw new Error("Texture.unbind: texture unit not specified");return this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,null),this.textureUnit}},{key:"_getDataType",value:function _getDataType(e){var t=e.data,n=e.compressed;return void 0!==n&&n?{data:t,dataType:"compressed"}:null===t?{data:t,dataType:"null"}:ArrayBuffer.isView(t)?{data:t,dataType:"typed-array"}:t instanceof p.a?{data:t.handle,dataType:"buffer"}:t instanceof f.b?{data:t,dataType:"buffer"}:{data:t,dataType:"browser-object"}}},{key:"setImage3D",value:function setImage3D(e){var t=e.level,n=void 0===t?0:t,r=e.internalformat,i=void 0===r?6408:r,o=e.width,a=e.height,s=e.depth,l=void 0===s?1:s,u=e.border,c=void 0===u?0:u,h=e.format,f=e.type,d=void 0===f?5121:f,g=e.offset,m=void 0===g?0:g,y=e.pixels;return ArrayBuffer.isView(y)?(this.gl.texImage3D(this.target,n,i,o,a,l,c,h,d,y),this):(y instanceof p.a&&(this.gl.bindBuffer(35052,y.handle),this.gl.texImage3D(this.target,n,i,o,a,l,c,h,d,m)),this)}},{key:"_deduceParameters",value:function _deduceParameters(e){var t=e.format,n=e.data,r=e.width,i=e.height,o=e.dataFormat,a=e.type,s=e.compressed,l=y[t];o=o||l&&l.dataFormat,a=a||l&&l.types[0],s=s||l&&l.compressed;var u=this._deduceImageSize(n,r,i);return{dataFormat:o,type:a,compressed:s,width:r=u.width,height:i=u.height,format:t,data:n}}},{key:"_deduceImageSize",value:function _deduceImageSize(e,t,n){var r;return r="undefined"!=typeof ImageData&&e instanceof ImageData?{width:e.width,height:e.height}:"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement?{width:e.naturalWidth,height:e.naturalHeight}:"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement?{width:e.width,height:e.height}:"undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement?{width:e.videoWidth,height:e.videoHeight}:e?{width:t,height:n}:{width:t>=0?t:1,height:n>=0?n:1},Object(g.a)(r,"Could not deduced texture size"),Object(g.a)(void 0===t||r.width===t,"Deduced texture width does not match supplied width"),Object(g.a)(void 0===n||r.height===n,"Deduced texture height does not match supplied height"),r}},{key:"_createHandle",value:function _createHandle(){return this.gl.createTexture()}},{key:"_deleteHandle",value:function _deleteHandle(){this.gl.deleteTexture(this.handle)}},{key:"_getParameter",value:function _getParameter(e){switch(e){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);var t=this.gl.getTexParameter(this.target,e);return this.gl.bindTexture(this.target,null),t}}},{key:"_setParameter",value:function _setParameter(e,t){switch(this.gl.bindTexture(this.target,this.handle),t=this._getNPOTParam(e,t),e){case 33082:case 33083:this.gl.texParameterf(this.handle,e,t);break;case 4096:case 4097:Object(g.a)(!1);break;default:this.gl.texParameteri(this.target,e,t)}return this.gl.bindTexture(this.target,null),this}},{key:"_isNPOT",value:function _isNPOT(){return!(Object(f.n)(this.gl)||Object(d.f)(this.width)&&Object(d.f)(this.height))}},{key:"_updateForNPOT",value:function _updateForNPOT(e){void 0===e[this.gl.TEXTURE_MIN_FILTER]&&(e[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),void 0===e[this.gl.TEXTURE_WRAP_S]&&(e[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),void 0===e[this.gl.TEXTURE_WRAP_T]&&(e[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}},{key:"_getNPOTParam",value:function _getNPOTParam(e,t){if(this._isNPOT())switch(e){case 10241:-1===m.indexOf(t)&&(t=9729);break;case 10242:case 10243:33071!==t&&(t=33071)}return t}}]),Texture}(c.a)},function(e,t,n){"use strict";n.d(t,"c",function(){return length}),n.d(t,"d",function(){return negate}),n.d(t,"b",function(){return cross}),n.d(t,"i",function(){return transformMat4}),n.d(t,"e",function(){return rotateX}),n.d(t,"f",function(){return rotateY}),n.d(t,"g",function(){return rotateZ}),n.d(t,"a",function(){return angle}),n.d(t,"h",function(){return a});var r=n(16);function length(e){var t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)}function fromValues(e,t,n){var i=new r.a(3);return i[0]=e,i[1]=t,i[2]=n,i}function negate(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function normalize(e,t){var n=t[0],r=t[1],i=t[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o)),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o,e}function dot(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function cross(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[0],s=n[1],l=n[2];return e[0]=i*l-o*s,e[1]=o*a-r*l,e[2]=r*s-i*a,e}function transformMat4(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[3]*r+n[7]*i+n[11]*o+n[15];return a=a||1,e[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/a,e[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/a,e[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/a,e}function rotateX(e,t,n,r){var i=[],o=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],o[0]=i[0],o[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),o[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2],e}function rotateY(e,t,n,r){var i=[],o=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],o[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),o[1]=i[1],o[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2],e}function rotateZ(e,t,n,r){var i=[],o=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],o[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),o[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),o[2]=i[2],e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2],e}function angle(e,t){var n=fromValues(e[0],e[1],e[2]),r=fromValues(t[0],t[1],t[2]);normalize(n,n),normalize(r,r);var i=dot(n,r);return i>1?0:i<-1?Math.PI:Math.acos(i)}var i,o,a=function subtract(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e};i=new r.a(3),r.a!=Float32Array&&(i[0]=0,i[1]=0,i[2]=0),o=i},function(e,t,n){"use strict";var r=n(154);function isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function construct_construct(e,t,n){return(construct_construct=isNativeReflectConstruct()?Reflect.construct:function _construct(e,t,n){var i=[null];i.push.apply(i,t);var o=new(Function.bind.apply(e,i));return n&&Object(r.a)(o,n.prototype),o}).apply(null,arguments)}var i=n(3),o=n(4),a=n(39),s=n(38),l=n(5);n.d(t,"a",function(){return c});var u={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},c=function(){function Accessor(){var e=this;Object(i.a)(this,Accessor);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach(function(t){return e._assign(t)}),Object.freeze(this)}return Object(o.a)(Accessor,null,[{key:"getBytesPerElement",value:function getBytesPerElement(e){return Object(a.c)(e.type||5126).BYTES_PER_ELEMENT}},{key:"getBytesPerVertex",value:function getBytesPerVertex(e){return Object(l.a)(e.size),Object(a.c)(e.type||5126).BYTES_PER_ELEMENT*e.size}},{key:"resolve",value:function resolve(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return construct_construct(Accessor,[u].concat(t))}}]),Object(o.a)(Accessor,[{key:"toString",value:function toString(){return JSON.stringify(this)}},{key:"_assign",value:function _assign(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return void 0!==e.type&&(this.type!==e.type&&s.a.warn("accessor type mismatch"),this.type=e.type,5124!==e.type&&5125!==e.type||(this.integer=!0)),void 0!==e.size&&(this.size!==e.size&&s.a.warn("accessor size mismatch"),this.size=e.size),void 0!==e.divisor&&(this.divisor=e.divisor),void 0!==e.offset&&(this.offset=e.offset),void 0!==e.stride&&(this.stride=e.stride),void 0!==e.normalized&&(this.normalized=e.normalized),void 0!==e.integer&&(this.integer=e.integer),void 0!==e.instanced&&(s.a.deprecated("Accessor.instanced","Accessor.divisor"),this.divisor=e.instanced?1:0),void 0!==e.isInstanced&&(s.a.deprecated("Accessor.isInstanced","Accessor.divisor"),this.divisor=e.isInstanced?1:0),void 0!==e.index&&(this.index=e.index?1:0),this}},{key:"BYTES_PER_ELEMENT",get:function get(){return Accessor.getBytesPerElement(this)}},{key:"BYTES_PER_VERTEX",get:function get(){return Accessor.getBytesPerVertex(this)}}]),Accessor}()},function(e,t,n){var r=n(269);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(271)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){"use strict";n(168)("small",function(e){return function small(){return e(this,"small","","")}})},function(e,t,n){var r=n(207),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();e.exports=o},function(e,t,n){"use strict";n.r(t);var r=n(133);n.d(t,"default",function(){return r.default});var i=n(26);n.d(t,"MapContext",function(){return i.a});var o=n(92);n.d(t,"Layer",function(){return o.default});var a=n(134);n.d(t,"CustomLayer",function(){return a.default});var s=n(146);n.d(t,"Source",function(){return s.default});var l=n(135);n.d(t,"Popup",function(){return l.default});var u=n(136);n.d(t,"Marker",function(){return u.default});var c=n(137);n.d(t,"FeatureState",function(){return c.default});var p=n(138);n.d(t,"AttributionControl",function(){return p.default});var h=n(139);n.d(t,"FullscreenControl",function(){return h.default});var f=n(140);n.d(t,"GeolocateControl",function(){return f.default});var d=n(141);n.d(t,"NavigationControl",function(){return d.default});var g=n(142);n.d(t,"ScaleControl",function(){return g.default})},function(e,t,n){var r=n(71);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){var r=n(161)("wks"),i=n(109),o=n(67).Symbol,a="function"==typeof o;(e.exports=function(e){return r[e]||(r[e]=a&&o[e]||(a?o:i)("Symbol."+e))}).store=r},function(e,t){var n=Array.isArray;e.exports=n},function(e,t,n){for(var r=n(68),i=n(110),o=n(88),a=n(67),s=n(80),l=n(179),u=n(54),c=u("iterator"),p=u("toStringTag"),h=l.Array,f={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},d=i(f),g=0;g<d.length;g++){var m,y=d[g],v=f[y],_=a[y],b=_&&_.prototype;if(b&&(b[c]||s(b,c,h),b[p]||s(b,p,y),l[y]=h,v))for(m in r)b[m]||o(b,m,r[m],!0)}},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n(3),i=n(11),o=n(10),a=n(4),s=n(12),l=n(18),u=n(46),c=n(8),p=function(e){function Texture2D(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(r.a)(this,Texture2D),Object(c.e)(e),(t=Object(i.a)(this,Object(o.a)(Texture2D).call(this,e,Object.assign({},n,{target:3553})))).initialize(n),Object.seal(Object(l.a)(Object(l.a)(t))),t}return Object(s.a)(Texture2D,e),Object(a.a)(Texture2D,null,[{key:"isSupported",value:function isSupported(e,t){return u.a.isSupported(e,t)}}]),Object(a.a)(Texture2D,[{key:"bind",value:function bind(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit,t=this.gl;if(void 0===e)throw new Error("Texture.bind: must specify texture unit");return this.textureUnit=e,t.activeTexture(33984+e),t.bindTexture(this.target,this.handle),e}},{key:"unbind",value:function unbind(){var e=this.gl;if(void 0===this.textureUnit)throw new Error("Texture.unbind: texture unit not specified");return e.activeTexture(33984+this.textureUnit),e.bindTexture(this.target,null),this.textureUnit}},{key:"getActiveUnit",value:function getActiveUnit(){return this.gl.getParameter(34016)-33984}}]),Texture2D}(u.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return u}),n.d(t,"d",function(){return setParameters}),n.d(t,"b",function(){return getParameters}),n.d(t,"c",function(){return resetParameters});var r,i,o,a=n(21),s=n(0),l=n(8),u=(n(5),r={},Object(s.a)(r,3042,!1),Object(s.a)(r,32773,new Float32Array([0,0,0,0])),Object(s.a)(r,32777,32774),Object(s.a)(r,34877,32774),Object(s.a)(r,32969,1),Object(s.a)(r,32968,0),Object(s.a)(r,32971,1),Object(s.a)(r,32970,0),Object(s.a)(r,3106,new Float32Array([0,0,0,0])),Object(s.a)(r,3107,[!0,!0,!0,!0]),Object(s.a)(r,2884,!1),Object(s.a)(r,2885,1029),Object(s.a)(r,2929,!1),Object(s.a)(r,2931,1),Object(s.a)(r,2932,513),Object(s.a)(r,2928,new Float32Array([0,1])),Object(s.a)(r,2930,!0),Object(s.a)(r,3024,!0),Object(s.a)(r,36006,null),Object(s.a)(r,2886,2305),Object(s.a)(r,33170,4352),Object(s.a)(r,2849,1),Object(s.a)(r,32823,!1),Object(s.a)(r,32824,0),Object(s.a)(r,10752,0),Object(s.a)(r,32938,1),Object(s.a)(r,32939,!1),Object(s.a)(r,3089,!1),Object(s.a)(r,3088,new Int32Array([0,0,1024,1024])),Object(s.a)(r,2960,!1),Object(s.a)(r,2961,0),Object(s.a)(r,2968,4294967295),Object(s.a)(r,36005,4294967295),Object(s.a)(r,2962,519),Object(s.a)(r,2967,0),Object(s.a)(r,2963,4294967295),Object(s.a)(r,34816,519),Object(s.a)(r,36003,0),Object(s.a)(r,36004,4294967295),Object(s.a)(r,2964,7680),Object(s.a)(r,2965,7680),Object(s.a)(r,2966,7680),Object(s.a)(r,34817,7680),Object(s.a)(r,34818,7680),Object(s.a)(r,34819,7680),Object(s.a)(r,2978,new Int32Array([0,0,1024,1024])),Object(s.a)(r,3333,4),Object(s.a)(r,3317,4),Object(s.a)(r,37440,!1),Object(s.a)(r,37441,!1),Object(s.a)(r,37443,37444),Object(s.a)(r,35723,4352),Object(s.a)(r,36010,null),Object(s.a)(r,35977,!1),Object(s.a)(r,3330,0),Object(s.a)(r,3332,0),Object(s.a)(r,3331,0),Object(s.a)(r,3314,0),Object(s.a)(r,32878,0),Object(s.a)(r,3316,0),Object(s.a)(r,3315,0),Object(s.a)(r,32877,0),r),c=function enable(e,t,n){return t?e.enable(n):e.disable(n)},p=function hint(e,t,n){return e.hint(n,t)},h=function pixelStorei(e,t,n){return e.pixelStorei(n,t)},f=(i={},Object(s.a)(i,3042,c),Object(s.a)(i,32773,function(e,t){return e.blendColor.apply(e,Object(a.a)(t))}),Object(s.a)(i,32777,"blendEquation"),Object(s.a)(i,34877,"blendEquation"),Object(s.a)(i,32969,"blendFunc"),Object(s.a)(i,32968,"blendFunc"),Object(s.a)(i,32971,"blendFunc"),Object(s.a)(i,32970,"blendFunc"),Object(s.a)(i,3106,function(e,t){return e.clearColor.apply(e,Object(a.a)(t))}),Object(s.a)(i,3107,function(e,t){return e.colorMask.apply(e,Object(a.a)(t))}),Object(s.a)(i,2884,c),Object(s.a)(i,2885,function(e,t){return e.cullFace(t)}),Object(s.a)(i,2929,c),Object(s.a)(i,2931,function(e,t){return e.clearDepth(t)}),Object(s.a)(i,2932,function(e,t){return e.depthFunc(t)}),Object(s.a)(i,2928,function(e,t){return e.depthRange.apply(e,Object(a.a)(t))}),Object(s.a)(i,2930,function(e,t){return e.depthMask(t)}),Object(s.a)(i,3024,c),Object(s.a)(i,35723,p),Object(s.a)(i,36006,function drawFramebuffer(e,t){var n=Object(l.n)(e)?36009:36160;return e.bindFramebuffer(n,t)}),Object(s.a)(i,2886,function(e,t){return e.frontFace(t)}),Object(s.a)(i,33170,p),Object(s.a)(i,2849,function(e,t){return e.lineWidth(t)}),Object(s.a)(i,32823,c),Object(s.a)(i,32824,"polygonOffset"),Object(s.a)(i,10752,"polygonOffset"),Object(s.a)(i,35977,c),Object(s.a)(i,32938,"sampleCoverage"),Object(s.a)(i,32939,"sampleCoverage"),Object(s.a)(i,3089,c),Object(s.a)(i,3088,function(e,t){return e.scissor.apply(e,Object(a.a)(t))}),Object(s.a)(i,2960,c),Object(s.a)(i,2961,function(e,t){return e.clearStencil(t)}),Object(s.a)(i,2968,function(e,t){return e.stencilMaskSeparate(1028,t)}),Object(s.a)(i,36005,function(e,t){return e.stencilMaskSeparate(1029,t)}),Object(s.a)(i,2962,"stencilFuncFront"),Object(s.a)(i,2967,"stencilFuncFront"),Object(s.a)(i,2963,"stencilFuncFront"),Object(s.a)(i,34816,"stencilFuncBack"),Object(s.a)(i,36003,"stencilFuncBack"),Object(s.a)(i,36004,"stencilFuncBack"),Object(s.a)(i,2964,"stencilOpFront"),Object(s.a)(i,2965,"stencilOpFront"),Object(s.a)(i,2966,"stencilOpFront"),Object(s.a)(i,34817,"stencilOpBack"),Object(s.a)(i,34818,"stencilOpBack"),Object(s.a)(i,34819,"stencilOpBack"),Object(s.a)(i,2978,function(e,t){return e.viewport.apply(e,Object(a.a)(t))}),Object(s.a)(i,3333,h),Object(s.a)(i,3317,h),Object(s.a)(i,37440,h),Object(s.a)(i,37441,h),Object(s.a)(i,37443,h),Object(s.a)(i,3330,h),Object(s.a)(i,3332,h),Object(s.a)(i,3331,h),Object(s.a)(i,36010,function readFramebuffer(e,t){return e.bindFramebuffer(36008,t)}),Object(s.a)(i,3314,h),Object(s.a)(i,32878,h),Object(s.a)(i,3316,h),Object(s.a)(i,3315,h),Object(s.a)(i,32877,h),i),d={blendEquation:function blendEquation(e,t){return e.blendEquationSeparate(t[32777],t[34877])},blendFunc:function blendFunc(e,t){return e.blendFuncSeparate(t[32969],t[32968],t[32971],t[32970])},polygonOffset:function polygonOffset(e,t){return e.polygonOffset(t[32824],t[10752])},sampleCoverage:function sampleCoverage(e,t){return e.sampleCoverage(t[32938],t[32939])},stencilFuncFront:function stencilFuncFront(e,t){return e.stencilFuncSeparate(1028,t[2962],t[2967],t[2963])},stencilFuncBack:function stencilFuncBack(e,t){return e.stencilFuncSeparate(1029,t[34816],t[36003],t[36004])},stencilOpFront:function stencilOpFront(e,t){return e.stencilOpSeparate(1028,t[2964],t[2965],t[2966])},stencilOpBack:function stencilOpBack(e,t){return e.stencilOpSeparate(1029,t[34817],t[34818],t[34819])}},g=function isEnabled(e,t){return e.isEnabled(t)},m=(o={},Object(s.a)(o,3042,g),Object(s.a)(o,2884,g),Object(s.a)(o,2929,g),Object(s.a)(o,3024,g),Object(s.a)(o,32823,g),Object(s.a)(o,32926,g),Object(s.a)(o,32928,g),Object(s.a)(o,3089,g),Object(s.a)(o,2960,g),Object(s.a)(o,35977,g),o);function setParameters(e,t){var n={};for(var r in t){var i=Number(r),o=f[r];o&&("string"==typeof o?n[o]=!0:o(e,t[r],i))}var a=e.state&&e.state.cache;if(a){var s=Object.assign({},a,t);for(var l in n){(0,d[l])(e,s)}}}function getParameter(e,t){var n=m[t];return n?n(e,Number(t)):e.getParameter(Number(t))}function getParameters(e,t){t=t||u;var n=Array.isArray(t)?t:Object.keys(t),r={},i=!0,o=!1,a=void 0;try{for(var s,l=n[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var c=s.value;r[c]=getParameter(e,c)}}catch(e){o=!0,a=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw a}}return r}function resetParameters(e){setParameters(e,Object.assign({},u,{}))}},function(e,t,n){e.exports=!n(60)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){e.exports=function isObject(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return o});var r=n(152),i="2.1.0",o=Object(r.a)()},function(e,t,n){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
function compare(e,t){if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0}function isBuffer(e){return t.Buffer&&"function"==typeof t.Buffer.isBuffer?t.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}var r=n(463),i=Object.prototype.hasOwnProperty,o=Array.prototype.slice,a="foo"===function foo(){}.name;function pToString(e){return Object.prototype.toString.call(e)}function isView(e){return!isBuffer(e)&&("function"==typeof t.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}var s=e.exports=ok,l=/\s*function\s+([^\(\s]*)\s*/;function getName(e){if(r.isFunction(e)){if(a)return e.name;var t=e.toString().match(l);return t&&t[1]}}function truncate(e,t){return"string"==typeof e?e.length<t?e:e.slice(0,t):e}function inspect(e){if(a||!r.isFunction(e))return r.inspect(e);var t=getName(e);return"[Function"+(t?": "+t:"")+"]"}function fail(e,t,n,r,i){throw new s.AssertionError({message:n,actual:e,expected:t,operator:r,stackStartFunction:i})}function ok(e,t){e||fail(e,!0,t,"==",s.ok)}function _deepEqual(e,t,n,i){if(e===t)return!0;if(isBuffer(e)&&isBuffer(t))return 0===compare(e,t);if(r.isDate(e)&&r.isDate(t))return e.getTime()===t.getTime();if(r.isRegExp(e)&&r.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"==typeof e||null!==t&&"object"==typeof t){if(isView(e)&&isView(t)&&pToString(e)===pToString(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===compare(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(isBuffer(e)!==isBuffer(t))return!1;var o=(i=i||{actual:[],expected:[]}).actual.indexOf(e);return-1!==o&&o===i.expected.indexOf(t)||(i.actual.push(e),i.expected.push(t),objEquiv(e,t,n,i))}return n?e===t:e==t}function isArguments(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function objEquiv(e,t,n,i){if(null==e||null==t)return!1;if(r.isPrimitive(e)||r.isPrimitive(t))return e===t;if(n&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var a=isArguments(e),s=isArguments(t);if(a&&!s||!a&&s)return!1;if(a)return _deepEqual(e=o.call(e),t=o.call(t),n);var l,c,p=u(e),h=u(t);if(p.length!==h.length)return!1;for(p.sort(),h.sort(),c=p.length-1;c>=0;c--)if(p[c]!==h[c])return!1;for(c=p.length-1;c>=0;c--)if(!_deepEqual(e[l=p[c]],t[l],n,i))return!1;return!0}function expectedException(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(e){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function _tryBlock(e){var t;try{e()}catch(e){t=e}return t}function _throws(e,t,n,i){var o;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(i=n,n=null),o=_tryBlock(t),i=(n&&n.name?" ("+n.name+").":".")+(i?" "+i:"."),e&&!o&&fail(o,n,"Missing expected exception"+i);var a="string"==typeof i,s=!e&&o&&!n;if((!e&&r.isError(o)&&a&&expectedException(o,n)||s)&&fail(o,n,"Got unwanted exception"+i),e&&o&&n&&!expectedException(o,n)||!e&&o)throw o}s.AssertionError=function AssertionError(e){var t;this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=truncate(inspect((t=this).actual),128)+" "+t.operator+" "+truncate(inspect(t.expected),128),this.generatedMessage=!0);var n=e.stackStartFunction||fail;if(Error.captureStackTrace)Error.captureStackTrace(this,n);else{var r=new Error;if(r.stack){var i=r.stack,o=getName(n),a=i.indexOf("\n"+o);if(a>=0){var s=i.indexOf("\n",a+1);i=i.substring(s+1)}this.stack=i}}},r.inherits(s.AssertionError,Error),s.fail=fail,s.ok=ok,s.equal=function equal(e,t,n){e!=t&&fail(e,t,n,"==",s.equal)},s.notEqual=function notEqual(e,t,n){e==t&&fail(e,t,n,"!=",s.notEqual)},s.deepEqual=function deepEqual(e,t,n){_deepEqual(e,t,!1)||fail(e,t,n,"deepEqual",s.deepEqual)},s.deepStrictEqual=function deepStrictEqual(e,t,n){_deepEqual(e,t,!0)||fail(e,t,n,"deepStrictEqual",s.deepStrictEqual)},s.notDeepEqual=function notDeepEqual(e,t,n){_deepEqual(e,t,!1)&&fail(e,t,n,"notDeepEqual",s.notDeepEqual)},s.notDeepStrictEqual=function notDeepStrictEqual(e,t,n){_deepEqual(e,t,!0)&&fail(e,t,n,"notDeepStrictEqual",notDeepStrictEqual)},s.strictEqual=function strictEqual(e,t,n){e!==t&&fail(e,t,n,"===",s.strictEqual)},s.notStrictEqual=function notStrictEqual(e,t,n){e===t&&fail(e,t,n,"!==",s.notStrictEqual)},s.throws=function(e,t,n){_throws(!0,e,t,n)},s.doesNotThrow=function(e,t,n){_throws(!1,e,t,n)},s.ifError=function(e){if(e)throw e};var u=Object.keys||function(e){var t=[];for(var n in e)i.call(e,n)&&t.push(n);return t}}).call(this,n(31))},function(e,t,n){"use strict";function formatTime(e){return e<10?"".concat(e.toFixed(2),"ms"):e<100?"".concat(e.toFixed(1),"ms"):e<1e3?"".concat(e.toFixed(0),"ms"):"".concat((e/1e3).toFixed(2),"s")}function leftPad(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,n=Math.max(t-e.length,0);return"".concat(" ".repeat(n)).concat(e)}function formatImage(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:600,i=e.src.replace(/\(/g,"%28").replace(/\)/g,"%29");e.width>r&&(n=Math.min(n,r/e.width));var o=e.width*n,a=e.height*n,s=["font-size:1px;","padding:".concat(Math.floor(a/2),"px ").concat(Math.floor(o/2),"px;"),"line-height:".concat(a,"px;"),"background:url(".concat(i,");"),"background-size:".concat(o,"px ").concat(a,"px;"),"color:transparent;"].join("");return["".concat(t," %c+"),s]}n.d(t,"b",function(){return formatTime}),n.d(t,"c",function(){return leftPad}),n.d(t,"a",function(){return formatImage})},function(e,t,n){"use strict";n(25),n(56),n(68),n(75),n(50);var r=n(1),i=n.n(r),o=n(2),a=n.n(o),s=n(13),l=n(24);function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function TextRenderer(e){var t,n=e.classes,r=e.semantic,o=e.size,a=e.color,s=e.underlined,u=e.children,c=_objectWithoutPropertiesLoose(e,["classes","semantic","size","color","underlined","children"]),p=r||"span",h=Object(l.a)(n.text,n[o+"Size"],n[a+"Color"],((t={})[n[r]]=r,t[n.isUnderlined]=s,t));return i.a.createElement(p,_extends({},c,{className:h}),u)}TextRenderer.propTypes={classes:a.a.object.isRequired,semantic:a.a.oneOf(["em","strong"]),size:a.a.oneOf(["inherit","small","base","text"]),color:a.a.oneOf(["base","light"]),underlined:a.a.bool,children:a.a.node.isRequired},TextRenderer.defaultProps={size:"inherit",color:"base",underlined:!1};var u=Object(s.a)(function styles(e){var t=e.fontFamily,n=e.fontSize,r=e.color;return{text:{fontFamily:t.base},inheritSize:{fontSize:"inherit"},smallSize:{fontSize:n.small},baseSize:{fontSize:n.base},textSize:{fontSize:n.text},baseColor:{color:r.base},lightColor:{color:r.light},em:{fontStyle:"italic"},strong:{fontWeight:"bold"},isUnderlined:{borderBottom:[[1,"dotted",r.lightest]]}}})(TextRenderer);n.d(t,"a",function(){return u})},function(e,t){var n,r,i=e.exports={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(e){if(n===setTimeout)return setTimeout(e,0);if((n===defaultSetTimout||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}function runClearTimeout(e){if(r===clearTimeout)return clearTimeout(e);if((r===defaultClearTimeout||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{return r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){n=defaultSetTimout}try{r="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){r=defaultClearTimeout}}();var o,a=[],s=!1,l=-1;function cleanUpNextTick(){s&&o&&(s=!1,o.length?a=o.concat(a):l=-1,a.length&&drainQueue())}function drainQueue(){if(!s){var e=runTimeout(cleanUpNextTick);s=!0;for(var t=a.length;t;){for(o=a,a=[];++l<t;)o&&o[l].run();l=-1,t=a.length}o=null,s=!1,runClearTimeout(e)}}function Item(e,t){this.fun=e,this.array=t}function noop(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];a.push(new Item(e,t)),1!==a.length||s||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=noop,i.addListener=noop,i.once=noop,i.off=noop,i.removeListener=noop,i.removeAllListeners=noop,i.emit=noop,i.prependListener=noop,i.prependOnceListener=noop,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){"use strict";var r=n(383),i=n(384),o=n(179),a=n(111);e.exports=n(385)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):i(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(e,t,n){"use strict";!function checkDCE(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(e){console.error(e)}}(),e.exports=n(307)},function(e,t,n){var r=n(53),i=n(191),o=n(193),a=Object.defineProperty;t.f=n(59)?Object.defineProperty:function defineProperty(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){"use strict";e.exports=function(){}},function(e,t){e.exports=function isObjectLike(e){return null!=e&&"object"==typeof e}},function(e,t,n){var r=n(172),i=n(176);e.exports=function isArrayLike(e){return null!=e&&i(e.length)&&!r(e)}},function(e,t,n){var r=n(114),i=n(110);n(221)("keys",function(){return function keys(e){return i(r(e))}})},function(e,t,n){"use strict";n.d(t,"c",function(){return isWebGL}),n.d(t,"d",function(){return isWebGL2}),n.d(t,"b",function(){return assertWebGLContext}),n.d(t,"a",function(){return assertWebGL2Context});var r=n(33),i=n(5),o=34962,a=32874,s="Invalid WebGLRenderingContext",l="Requires WebGL2";function isWebGL(e){return Boolean(e&&(e instanceof r.c||e.ARRAY_BUFFER===o))}function isWebGL2(e){return Boolean(e&&(e instanceof r.a||e.TEXTURE_BINDING_3D===a))}function assertWebGLContext(e){Object(i.a)(isWebGL(e),s)}function assertWebGL2Context(e){Object(i.a)(isWebGL2(e),l)}},function(e,t,n){"use strict";(function(e){var r=n(27),i=n(263),o=!("object"===(void 0===e?"undefined":Object(r.a)(e))&&"[object process]"===String(e)&&!e.browser)||i.a;t.a=o}).call(this,n(66))},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return trackContextState}),n.d(t,"c",function(){return pushContextState}),n.d(t,"b",function(){return popContextState});var r=n(3),i=n(4),o=n(0),a=n(58),s=n(5),l=function deepEqual(e,t){var n=Array.isArray(e)||ArrayBuffer.isView(e),r=Array.isArray(t)||ArrayBuffer.isView(t);if(n&&r&&e.length===t.length){for(var i=0;i<e.length;++i)if(e[i]!==t[i])return!1;return!0}return e===t},u={enable:function enable(e,t){return e(Object(o.a)({},t,!0))},disable:function disable(e,t){return e(Object(o.a)({},t,!1))},pixelStorei:function pixelStorei(e,t,n){return e(Object(o.a)({},t,n))},hint:function hint(e,t,n){return e(Object(o.a)({},t,n))},bindFramebuffer:function bindFramebuffer(e,t,n){var r;switch(t){case 36160:return e((r={},Object(o.a)(r,36006,n),Object(o.a)(r,36010,n),r));case 36009:return e(Object(o.a)({},36006,n));case 36008:return e(Object(o.a)({},36010,n));default:return null}},blendColor:function blendColor(e,t,n,r,i){return e(Object(o.a)({},32773,new Float32Array([t,n,r,i])))},blendEquation:function blendEquation(e,t){var n;return e((n={},Object(o.a)(n,32777,t),Object(o.a)(n,34877,t),n))},blendEquationSeparate:function blendEquationSeparate(e,t,n){var r;return e((r={},Object(o.a)(r,32777,t),Object(o.a)(r,34877,n),r))},blendFunc:function blendFunc(e,t,n){var r;return e((r={},Object(o.a)(r,32969,t),Object(o.a)(r,32968,n),Object(o.a)(r,32971,t),Object(o.a)(r,32970,n),r))},blendFuncSeparate:function blendFuncSeparate(e,t,n,r,i){var a;return e((a={},Object(o.a)(a,32969,t),Object(o.a)(a,32968,n),Object(o.a)(a,32971,r),Object(o.a)(a,32970,i),a))},clearColor:function clearColor(e,t,n,r,i){return e(Object(o.a)({},3106,new Float32Array([t,n,r,i])))},clearDepth:function clearDepth(e,t){return e(Object(o.a)({},2931,t))},clearStencil:function clearStencil(e,t){return e(Object(o.a)({},2961,t))},colorMask:function colorMask(e,t,n,r,i){return e(Object(o.a)({},3107,[t,n,r,i]))},cullFace:function cullFace(e,t){return e(Object(o.a)({},2885,t))},depthFunc:function depthFunc(e,t){return e(Object(o.a)({},2932,t))},depthRange:function depthRange(e,t,n){return e(Object(o.a)({},2928,new Float32Array([t,n])))},depthMask:function depthMask(e,t){return e(Object(o.a)({},2930,t))},frontFace:function frontFace(e,t){return e(Object(o.a)({},2886,t))},lineWidth:function lineWidth(e,t){return e(Object(o.a)({},2849,t))},polygonOffset:function polygonOffset(e,t,n){var r;return e((r={},Object(o.a)(r,32824,t),Object(o.a)(r,10752,n),r))},sampleCoverage:function sampleCoverage(e,t,n){var r;return e((r={},Object(o.a)(r,32938,t),Object(o.a)(r,32939,n),r))},scissor:function scissor(e,t,n,r,i){return e(Object(o.a)({},3088,new Int32Array([t,n,r,i])))},stencilMask:function stencilMask(e,t){var n;return e((n={},Object(o.a)(n,2968,t),Object(o.a)(n,36005,t),n))},stencilMaskSeparate:function stencilMaskSeparate(e,t,n){return e(Object(o.a)({},1028===t?2968:36005,n))},stencilFunc:function stencilFunc(e,t,n,r){var i;return e((i={},Object(o.a)(i,2962,t),Object(o.a)(i,2967,n),Object(o.a)(i,2963,r),Object(o.a)(i,34816,t),Object(o.a)(i,36003,n),Object(o.a)(i,36004,r),i))},stencilFuncSeparate:function stencilFuncSeparate(e,t,n,r,i){var a;return e((a={},Object(o.a)(a,1028===t?2962:34816,n),Object(o.a)(a,1028===t?2967:36003,r),Object(o.a)(a,1028===t?2963:36004,i),a))},stencilOp:function stencilOp(e,t,n,r){var i;return e((i={},Object(o.a)(i,2964,t),Object(o.a)(i,2965,n),Object(o.a)(i,2966,r),Object(o.a)(i,34817,t),Object(o.a)(i,34818,n),Object(o.a)(i,34819,r),i))},stencilOpSeparate:function stencilOpSeparate(e,t,n,r,i){var a;return e((a={},Object(o.a)(a,1028===t?2964:34817,n),Object(o.a)(a,1028===t?2965:34818,r),Object(o.a)(a,1028===t?2966:34819,i),a))},viewport:function viewport(e,t,n,r,i){return e(Object(o.a)({},2978,new Int32Array([t,n,r,i])))}};function installGetterOverride(e,t){var n=e[t].bind(e);e[t]=function get(){var t=arguments.length<=0?void 0:arguments[0];return t in e.state.cache||(e.state.cache[t]=n.apply(void 0,arguments)),e.state.enable?e.state.cache[t]:n.apply(void 0,arguments)},Object.defineProperty(e[t],"name",{value:"".concat(t,"-from-cache"),configurable:!1})}function installSetterSpy(e,t,n){var r=e[t].bind(e);e[t]=function set(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];var s,l=n.apply(void 0,[e.state._updateCache].concat(o)),u=l.valueChanged,c=l.oldValue;u&&((s=e.state).log.apply(s,["gl.".concat(t)].concat(o)),r.apply(void 0,o));return c},Object.defineProperty(e[t],"name",{value:"".concat(t,"-to-cache"),configurable:!1})}var c=function(){function GLState(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.copyState,i=void 0!==n&&n,o=t.log,s=void 0===o?function(){}:o;Object(r.a)(this,GLState),this.gl=e,this.stateStack=[],this.enable=!0,this.cache=i?Object(a.b)(e):Object.assign({},a.a),this.log=s,this._updateCache=this._updateCache.bind(this),Object.seal(this)}return Object(i.a)(GLState,[{key:"push",value:function push(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.stateStack.push({})}},{key:"pop",value:function pop(){Object(s.a)(this.stateStack.length>0);var e=this.stateStack[this.stateStack.length-1];Object(a.d)(this.gl,e,this.cache),this.stateStack.pop()}},{key:"_updateCache",value:function _updateCache(e){var t,n=!1,r=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(var i in e)Object(s.a)(void 0!==i),l(e[i],this.cache[i])||(n=!0,t=this.cache[i],!r||i in r||(r[i]=this.cache[i]),this.cache[i]=e[i]);return{valueChanged:n,oldValue:t}}}]),GLState}();function trackContextState(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.enable,i=void 0===r||r,o=n.copyState;if(Object(s.a)(void 0!==o),!t.state){var a=void 0!==e?e:window;for(var l in a.polyfillContext&&a.polyfillContext(t),t.state=new c(t,{copyState:o,enable:i}),u){installSetterSpy(t,l,u[l])}installGetterOverride(t,"getParameter"),installGetterOverride(t,"isEnabled")}return t.state.enable=i,t}function pushContextState(e){e.state||trackContextState(e,{copyState:!1}),e.state.push()}function popContextState(e){Object(s.a)(e.state),e.state.pop()}}).call(this,n(31))},function(e,t,n){"use strict";n(50);var r=n(1),i=n.n(r),o=n(2),a=n.n(o),s=n(13);function TypeRenderer(e){var t=e.classes,n=e.children;return i.a.createElement("span",{className:t.type},n)}TypeRenderer.propTypes={classes:a.a.object.isRequired,children:a.a.node.isRequired};var l=Object(s.a)(function styles(e){var t=e.fontFamily,n=e.fontSize,r=e.color;return{type:{fontFamily:t.monospace,fontSize:n.small,color:r.type}}})(TypeRenderer);n.d(t,"a",function(){return l})},function(e,t,n){var r=n(70),i=n(160);e.exports=n(59)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){"use strict";var r=n(53),i=n(114),o=n(112),a=n(113),s=n(169),l=n(117),u=Math.max,c=Math.min,p=Math.floor,h=/\$([$&`']|\d\d?|<[^>]*>)/g,f=/\$([$&`']|\d\d?)/g;n(118)("replace",2,function(e,t,n,d){return[function replace(r,i){var o=e(this),a=null==r?void 0:r[t];return void 0!==a?a.call(r,o,i):n.call(String(o),r,i)},function(e,t){var i=d(n,e,this,t);if(i.done)return i.value;var p=r(e),h=String(this),f="function"==typeof t;f||(t=String(t));var g=p.global;if(g){var m=p.unicode;p.lastIndex=0}for(var y=[];;){var v=l(p,h);if(null===v)break;if(y.push(v),!g)break;""===String(v[0])&&(p.lastIndex=s(h,o(p.lastIndex),m))}for(var _,b="",x=0,w=0;w<y.length;w++){v=y[w];for(var S=String(v[0]),E=u(c(a(v.index),h.length),0),P=[],C=1;C<v.length;C++)P.push(void 0===(_=v[C])?_:String(_));var k=v.groups;if(f){var T=[S].concat(P,E,h);void 0!==k&&T.push(k);var A=String(t.apply(void 0,T))}else A=getSubstitution(S,h,E,P,k,t);E>=x&&(b+=h.slice(x,E)+A,x=E+S.length)}return b+h.slice(x)}];function getSubstitution(e,t,r,o,a,s){var l=r+e.length,u=o.length,c=f;return void 0!==a&&(a=i(a),c=h),n.call(s,c,function(n,i){var s;switch(i.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,r);case"'":return t.slice(l);case"<":s=a[i.slice(1,-1)];break;default:var c=+i;if(0===c)return n;if(c>u){var h=p(c/10);return 0===h?n:h<=u?void 0===o[h-1]?i.charAt(1):o[h-1]+i.charAt(1):n}s=o[c-1]}return void 0===s?"":s})}})},function(e,t,n){var r=n(328),i=n(333);e.exports=function getNative(e,t){var n=i(e,t);return r(n)?n:void 0}},function(e,t,n){var r=n(123),i=n(329),o=n(330),a="[object Null]",s="[object Undefined]",l=r?r.toStringTag:void 0;e.exports=function baseGetTag(e){return null==e?void 0===e?s:a:l&&l in Object(e)?i(e):o(e)}},function(e,t,n){"use strict";n(23),n(50);var r=n(1),i=n.n(r),o=n(2),a=n.n(o),s=n(13),l=n(24);function NameRenderer(e){var t,n=e.classes,r=e.children,o=e.deprecated,a=Object(l.a)(n.name,((t={})[n.isDeprecated]=o,t));return i.a.createElement("code",{className:a},r)}NameRenderer.propTypes={classes:a.a.object.isRequired,children:a.a.node.isRequired,deprecated:a.a.bool};var u=Object(s.a)(function styles(e){var t=e.fontFamily,n=e.fontSize,r=e.color;return{name:{fontFamily:t.monospace,fontSize:n.small,color:r.name},isDeprecated:{color:r.light,textDecoration:"line-through"}}})(NameRenderer);n.d(t,"a",function(){return u})},function(e,t,n){"use strict";(function(e,r){function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,"a",function(){return i});"object"!==(void 0===e?"undefined":_typeof(e))||"[object process]"!==String(e)||e.browser,"undefined"!=typeof window&&window;var i=void 0!==r?r:window;"undefined"!=typeof document&&document}).call(this,n(66),n(31))},function(e,t,n){"use strict";(function(e){n.d(t,"b",function(){return r}),n.d(t,"c",function(){return i}),n.d(t,"a",function(){return o});var r="undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"",i="undefined"!=typeof window?window:e,o=(void 0!==e||window,"undefined"!=typeof document&&document,!1);try{var a={get passive(){o=!0}};i.addEventListener("test",a,a),i.removeEventListener("test",a,a)}catch(e){}}).call(this,n(31))},,function(e,t,n){var r=n(67),i=n(80),o=n(89),a=n(109)("src"),s=n(278),l=(""+s).split("toString");n(108).inspectSource=function(e){return s.call(e)},(e.exports=function(e,t,n,s){var u="function"==typeof n;u&&(o(n,"name")||i(n,"name",t)),e[t]!==n&&(u&&(o(n,a)||i(n,a,e[t]?""+e[t]:l.join(String(t)))),e===r?e[t]=n:s?e[t]?e[t]=n:i(e,t,n):(delete e[t],i(e,t,n)))})(Function.prototype,"toString",function toString(){return"function"==typeof this&&this[a]||s.call(this)})},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),a=_interopRequireDefault(n(72)),s=_interopRequireDefault(n(165)),l=_interopRequireDefault(n(115));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=function(){function StyleRule(e,t,n){_classCallCheck(this,StyleRule),this.type="style",this.isProcessed=!1;var r=n.sheet,i=n.Renderer,o=n.selector;this.key=e,this.options=n,this.style=t,o&&(this.selectorText=o),this.renderer=r?r.renderer:new i}return o(StyleRule,[{key:"prop",value:function prop(e,t){if(void 0===t)return this.style[e];if(this.style[e]===t)return this;var n=null==(t=this.options.jss.plugins.onChangeValue(t,e,this))||!1===t,r=e in this.style;if(n&&!r)return this;var i=n&&r;if(i?delete this.style[e]:this.style[e]=t,this.renderable)return i?this.renderer.removeProperty(this.renderable,e):this.renderer.setProperty(this.renderable,e,t),this;var o=this.options.sheet;return o&&o.attached&&(0,a.default)(!1,'Rule is not linked. Missing sheet option "link: true".'),this}},{key:"applyTo",value:function applyTo(e){var t=this.toJSON();for(var n in t)this.renderer.setProperty(e,n,t[n]);return this}},{key:"toJSON",value:function toJSON(){var e={};for(var t in this.style){var n=this.style[t];"object"!==(void 0===n?"undefined":i(n))?e[t]=n:Array.isArray(n)&&(e[t]=(0,l.default)(n))}return e}},{key:"toString",value:function toString(e){var t=this.options.sheet,n=!!t&&t.options.link?r({},e,{allowEmpty:!0}):e;return(0,s.default)(this.selector,this.style,n)}},{key:"selector",set:function set(e){if(e!==this.selectorText&&(this.selectorText=e,this.renderable&&!this.renderer.setSelector(this.renderable,e)&&this.renderable)){var t=this.renderer.replaceRule(this.renderable,this);t&&(this.renderable=t)}},get:function get(){return this.selectorText}}]),StyleRule}();t.default=u},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var r=n(3),i=n(4),o=n(11),a=n(10),s=n(12),l=n(18),u=n(46),c=n(5),p=[34069,34070,34071,34072,34073,34074],h=function(e){function TextureCube(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(r.a)(this,TextureCube),(t=Object(o.a)(this,Object(a.a)(TextureCube).call(this,e,Object.assign({},n,{target:34067})))).initialize(n),Object.seal(Object(l.a)(Object(l.a)(t))),t}return Object(s.a)(TextureCube,e),Object(i.a)(TextureCube,[{key:"initialize",value:function initialize(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.format,n=void 0===t?6408:t,r=e.mipmaps,i=void 0===r||r,o=e.width,a=void 0===o?1:o,s=e.height,l=void 0===s?1:s,u=e.type,p=void 0===u?5121:u,h=e.dataFormat,f=this._deduceParameters({format:n,type:p,dataFormat:h});p=f.type,h=f.dataFormat;var d=this._deduceImageSize({data:e[34069],width:a,height:l});a=d.width,l=d.height,Object(c.a)(a===l),this.setCubeMapImageData(e),i&&this.generateMipmap(e),this.opts=e}},{key:"subImage",value:function subImage(e){var t=e.face,n=e.data,r=e.x,i=void 0===r?0:r,o=e.y,a=void 0===o?0:o,s=e.mipmapLevel,l=void 0===s?0:s;return this._subImage({target:t,data:n,x:i,y:a,mipmapLevel:l})}},{key:"setCubeMapImageData",value:function setCubeMapImageData(e){var t=e.width,n=e.height,r=e.pixels,i=e.data,o=e.border,a=void 0===o?0:o,s=e.format,l=void 0===s?6408:s,u=e.type,c=void 0===u?5121:u,h=(e.generateMipmap,this.gl);if(r=r||i,this.bind(),this.width||this.height)for(var f=0;f<p.length;f++){var d=p[f];h.texImage2D(d,0,l,t,n,a,l,c,r[d])}else for(var g=0;g<p.length;g++){var m=p[g];h.texImage2D(m,0,l,l,c,r[m])}}},{key:"bind",value:function bind(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).index;return void 0!==e&&this.gl.activeTexture(33984+e),this.gl.bindTexture(34067,this.handle),e}},{key:"unbind",value:function unbind(){return this.gl.bindTexture(34067,null),this}}]),TextureCube}(u.a);h.FACES=p},function(e,t,n){"use strict";n.r(t);var r=n(1),i=n(26);function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}var o=function diff(e,t){void 0===e&&(e={}),void 0===t&&(t={});var n=new Set([].concat(_toConsumableArray(Object.keys(e)),_toConsumableArray(Object.keys(t))));return _toConsumableArray(n).reduce(function(n,r){var i=e[r];return i!==t[r]&&n.push([r,i]),n},[])},a=function queryRenderedFeatures(e,t,n,r){var i={layers:[t]};if(r){var o=[[n[0]-r,n[1]-r],[n[0]+r,n[1]+r]];return e.queryRenderedFeatures(o,i)}return e.queryRenderedFeatures(n,i)};function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=[["onClick","click"],["onHover","mousemove"],["onEnter","mouseenter"],["onLeave","mouseleave"]],l=function(e){var t,n;function Layer(t){var n;return _defineProperty(_assertThisInitialized(n=e.call(this,t)||this),"$key",void 0),_defineProperty(_assertThisInitialized(n),"$value",void 0),_defineProperty(_assertThisInitialized(n),"_id",void 0),_defineProperty(_assertThisInitialized(n),"_map",void 0),_defineProperty(_assertThisInitialized(n),"_onClick",void 0),_defineProperty(_assertThisInitialized(n),"_onHover",void 0),_defineProperty(_assertThisInitialized(n),"_onEnter",void 0),_defineProperty(_assertThisInitialized(n),"_onLeave",void 0),_defineProperty(_assertThisInitialized(n),"_onClick",function(e){var t=[e.point.x,e.point.y],r=a(n._map,n._id,t,n.props.radius);n.props.onClick(_extends({},e,{features:r}))}),_defineProperty(_assertThisInitialized(n),"_onHover",function(e){var t=[e.point.x,e.point.y],r=a(n._map,n._id,t,n.props.radius);n.props.onHover(_extends({},e,{features:r}))}),_defineProperty(_assertThisInitialized(n),"_onEnter",function(e){var t=[e.point.x,e.point.y],r=a(n._map,n._id,t,n.props.radius);n.props.onEnter(_extends({},e,{features:r}))}),_defineProperty(_assertThisInitialized(n),"_onLeave",function(e){var t=[e.point.x,e.point.y],r=a(n._map,n._id,t,n.props.radius);n.props.onLeave(_extends({},e,{features:r}))}),n._id=t.id,n}n=e,(t=Layer).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var l=Layer.prototype;return l.componentDidMount=function componentDidMount(){var e=this._map,t=this.props,n=t.before,r=(t.radius,t.onClick),i=t.onHover,o=t.onEnter,a=t.onLeave,s=_objectWithoutPropertiesLoose(t,["before","radius","onClick","onHover","onEnter","onLeave"]);n&&e.getLayer(n)?e.addLayer(s,n):e.addLayer(s),r&&e.on("click",this._id,this._onClick),i&&e.on("mousemove",this._id,this._onHover),o&&e.on("mouseenter",this._id,this._onEnter),a&&e.on("mouseleave",this._id,this._onLeave)},l.componentDidUpdate=function componentDidUpdate(e){var t=this,n=this._map,r=this.props,i=r.before,a=(r.onClick,_objectWithoutPropertiesLoose(r,["before","onClick"]));i!==e.before&&n.moveLayer(a.id,i),a.paint!==e.paint&&o(a.paint,e.paint).forEach(function(e){var r=e[0],i=e[1];n.setPaintProperty(t._id,r,i)}),a.layout!==e.layout&&o(a.layout,e.layout).forEach(function(e){var r=e[0],i=e[1];n.setLayoutProperty(t._id,r,i)}),a.filter!==e.filter&&(a.filter?n.setFilter(this._id,a.filter):n.setFilter(this._id,void 0)),s.forEach(function(r){var i=r[0],o=r[1],a="_"+i;!t.props[i]&&e[i]&&n.off(o,t._id,t[a]),t.props[i]&&!e[i]&&n.on(o,t._id,t[a])})},l.componentWillUnmount=function componentWillUnmount(){var e=this;this._map&&this._map.getStyle()&&this._map.getLayer(this._id)&&s.forEach(function(t){var n=t[0],r=t[1],i="_"+n;e.props[n]&&e._map.off(r,e._id,e[i])})},l.render=function render(){var e=this;return Object(r.createElement)(i.a.Consumer,{},function(t){return t&&(e._map=t),null})},Layer}(r.PureComponent);_defineProperty(l,"displayName","Layer"),_defineProperty(l,"defaultProps",{radius:0});t.default=l},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n(3),i=n(4),o=n(11),a=n(10),s=n(12),l=n(155),u=n(19),c=function assert(e,t){if(!e)throw new Error(t)},p=function(e){function Vector(){return Object(r.a)(this,Vector),Object(o.a)(this,Object(a.a)(Vector).apply(this,arguments))}return Object(s.a)(Vector,e),Object(i.a)(Vector,[{key:"len",value:function len(){return Math.sqrt(this.lengthSquared())}},{key:"magnitude",value:function magnitude(){return Math.sqrt(this.lengthSquared())}},{key:"lengthSquared",value:function lengthSquared(){for(var e=0,t=0;t<this.ELEMENTS;++t)e+=this[t]*this[t];return e}},{key:"distance",value:function distance(e){return Math.sqrt(this.distanceSquared(e))}},{key:"distanceSquared",value:function distanceSquared(e){for(var t=0,n=0;n<this.ELEMENTS;++n){var r=this[n]-e[n];t+=r*r}return Object(u.a)(t)}},{key:"dot",value:function dot(e){for(var t=0,n=0;n<this.ELEMENTS;++n)t+=this[n]*e[n];return Object(u.a)(t)}},{key:"normalize",value:function normalize(){var e=this.magnitude();if(0!==e)for(var t=0;t<this.ELEMENTS;++t)this[t]/=e;return this.check()}},{key:"add",value:function add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0;r<t.length;r++)for(var i=t[r],o=0;o<this.ELEMENTS;++o)this[o]+=i[o];return this.check()}},{key:"subtract",value:function subtract(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0;r<t.length;r++)for(var i=t[r],o=0;o<this.ELEMENTS;++o)this[o]-=i[o];return this.check()}},{key:"multiply",value:function multiply(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0;r<t.length;r++)for(var i=t[r],o=0;o<this.ELEMENTS;++o)this[o]*=i[o];return this.check()}},{key:"divide",value:function divide(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0;r<t.length;r++)for(var i=t[r],o=0;o<this.ELEMENTS;++o)this[o]/=i[o];return this.check()}},{key:"scale",value:function scale(e){if(Array.isArray(e))return this.multiply(e);for(var t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}},{key:"scaleAndAdd",value:function scaleAndAdd(e,t){for(var n=0;n<this.ELEMENTS;++n)this[n]=this[n]*t+e[n];return this.check()}},{key:"lengthSq",value:function lengthSq(){return this.lengthSquared()}},{key:"distanceTo",value:function distanceTo(e){return this.distance(e)}},{key:"distanceToSquared",value:function distanceToSquared(e){return this.distanceSquared(e)}},{key:"getComponent",value:function getComponent(e){return c(e>=0&&e<this.ELEMENTS,"index is out of range"),Object(u.a)(this[e])}},{key:"setComponent",value:function setComponent(e,t){return c(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=t,this.check()}},{key:"addVectors",value:function addVectors(e,t){return this.copy(e).add(t)}},{key:"subVectors",value:function subVectors(e,t){return this.copy(e).subtract(t)}},{key:"multiplyVectors",value:function multiplyVectors(e,t){return this.copy(e).multiply(t)}},{key:"addScaledVector",value:function addScaledVector(e,t){return this.add(new this.constructor(e).multiplyScalar(t))}},{key:"x",get:function get(){return this[0]},set:function set(e){return this[0]=Object(u.a)(e)}},{key:"y",get:function get(){return this[1]},set:function set(e){return this[1]=Object(u.a)(e)}}]),Vector}(l.a)},function(e,t,n){"use strict";n(56),n(68),n(75),n(23);var r=n(1),i=n.n(r),o=n(2),a=n.n(o),s=n(13),l=n(32),u=n(84),c=n(79),p=n(105),h=n.n(p);function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function ArgumentRenderer(e){var t=e.classes,n=e.name,r=e.type,o=e.description,a=e.returns,s=e.block,p=_objectWithoutPropertiesLoose(e,["classes","name","type","description","returns","block"]),f=r&&"OptionalType"===r.type,d=p.default;f&&(r=r.expression);var g=i.a.createElement(h.a,null,a&&"Returns",n&&i.a.createElement("span",null,i.a.createElement(u.a,null,n),r&&":"),r&&i.a.createElement(c.a,null,r.name,f&&"?",!!d&&"="+d),r&&o&&"—",o&&i.a.createElement(l.a,{text:""+o,inline:!0}));return s?i.a.createElement("div",{className:t.block},g):g}ArgumentRenderer.propTypes={classes:a.a.object.isRequired,name:a.a.string,type:a.a.object,default:a.a.string,description:a.a.string,returns:a.a.bool,block:a.a.bool};var f=Object(s.a)(function styles(e){return{block:{marginBottom:e.space[2]}}})(ArgumentRenderer);n.d(t,"a",function(){return f})},function(e,t,n){"use strict";var r=n(1),i=n.n(r),o=n(2),a=n.n(o),s=n(13);function ParaRenderer(e){var t=e.classes,n=e.semantic,r=e.children,o=n||"div";return i.a.createElement(o,{className:t.para},r)}ParaRenderer.propTypes={classes:a.a.object.isRequired,semantic:a.a.oneOf(["p"]),children:a.a.node.isRequired};var l=Object(s.a)(function styles(e){var t=e.space,n=e.color,r=e.fontFamily;return{para:{marginTop:0,marginBottom:t[2],color:n.base,fontFamily:r.base,fontSize:"inherit",lineHeight:1.5}}})(ParaRenderer);n.d(t,"a",function(){return l})},function(e,t,n){"use strict";var r=n(1),i=n.n(r),o=n(2),a=n.n(o),s=n(32),l=n(248),u=n.n(l),c=function plural(e,t){return 1===e.length?t:t+"s"},p=function list(e){return e.map(function(e){return e.description}).join(", ")},h=function paragraphs(e){return e.map(function(e){return e.description}).join("\n\n")},f={deprecated:function deprecated(e){return"**Deprecated:** "+e[0].description},see:function see(e){return h(e)},link:function link(e){return h(e)},author:function author(e){return c(e,"Author")+": "+p(e)},version:function version(e){return"Version: "+e[0].description},since:function since(e){return"Since: "+e[0].description}};function getMarkdown(e){return u()(f,function(t,n){return e[n]&&t(e[n])}).filter(Boolean).join("\n\n")}function JsDoc(e){var t=getMarkdown(e);return t?i.a.createElement(s.a,{text:t}):null}JsDoc.propTypes={deprecated:a.a.array,see:a.a.array,link:a.a.array,author:a.a.array,version:a.a.array,since:a.a.array},n.d(t,"a",function(){return JsDoc})},function(e,t,n){"use strict";n(25),n(56),n(68),n(75);var r=n(1),i=n.n(r),o=n(2),a=n.n(o),s=n(24),l=n(13);function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function HeadingRenderer(e){var t=e.classes,n=e.level,r=e.children,o=_objectWithoutPropertiesLoose(e,["classes","level","children"]),a="h"+n,l=Object(s.a)(t.heading,t["heading"+n]);return i.a.createElement(a,_extends({},o,{className:l}),r)}HeadingRenderer.propTypes={classes:a.a.object.isRequired,level:a.a.oneOf([1,2,3,4,5,6]).isRequired,children:a.a.node};var u=Object(l.a)(function styles(e){var t=e.color,n=e.fontFamily,r=e.fontSize;return{heading:{margin:0,color:t.base,fontFamily:n.base,fontWeight:"normal"},heading1:{fontSize:r.h1},heading2:{fontSize:r.h2},heading3:{fontSize:r.h3},heading4:{fontSize:r.h4},heading5:{fontSize:r.h5,fontWeight:"bold"},heading6:{fontSize:r.h6,fontStyle:"italic"}}})(HeadingRenderer);n.d(t,"a",function(){return u})},function(e,t,n){var r=n(225),i=n(226),o=n(127),a=n(55),s=n(74),l=n(128),u=n(126),c=n(129),p="[object Map]",h="[object Set]",f=Object.prototype.hasOwnProperty;e.exports=function isEmpty(e){if(null==e)return!0;if(s(e)&&(a(e)||"string"==typeof e||"function"==typeof e.splice||l(e)||c(e)||o(e)))return!e.length;var t=i(e);if(t==p||t==h)return!e.size;if(u(e))return!r(e).length;for(var n in e)if(f.call(e,n))return!1;return!0}},function(e,t,n){"use strict";var r=n(1),i=n.n(r),o=n(2),a=n.n(o),s=n(13);function CodeRenderer(e){var t=e.classes,n=e.children;return i.a.createElement("code",{className:t.code},n)}CodeRenderer.propTypes={classes:a.a.object.isRequired,children:a.a.node.isRequired};var l=Object(s.a)(function styles(e){return{code:{fontFamily:e.fontFamily.monospace,fontSize:"inherit",color:"inherit",background:"transparent",whiteSpace:"inherit"}}})(CodeRenderer);n.d(t,"a",function(){return l})},function(e,t,n){var r=n(67),i=n(108),o=n(80),a=n(88),s=n(195),l=function(e,t,n){var u,c,p,h,f=e&l.F,d=e&l.G,g=e&l.S,m=e&l.P,y=e&l.B,v=d?r:g?r[t]||(r[t]={}):(r[t]||{}).prototype,_=d?i:i[t]||(i[t]={}),b=_.prototype||(_.prototype={});for(u in d&&(n=t),n)p=((c=!f&&v&&void 0!==v[u])?v:n)[u],h=y&&c?s(p,r):m&&"function"==typeof p?s(Function.call,p):p,v&&a(v,u,p,e&l.U),_[u]!=p&&o(_,u,h),m&&b[u]!=p&&(b[u]=p)};r.core=i,l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),o=_interopRequireDefault(n(116)),a=_interopRequireDefault(n(202)),s=_interopRequireDefault(n(90)),l=_interopRequireDefault(n(288));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=function(){function RuleList(e){var t=this;_classCallCheck(this,RuleList),this.map={},this.raw={},this.index=[],this.update=function(e,n){var r=t.options,i=r.jss.plugins,o=r.sheet;if("string"==typeof e)i.onUpdate(n,t.get(e),o);else for(var a=0;a<t.index.length;a++)i.onUpdate(e,t.index[a],o)},this.options=e,this.classes=e.classes}return i(RuleList,[{key:"add",value:function add(e,t,n){var i=this.options,a=i.parent,u=i.sheet,c=i.jss,p=i.Renderer,h=i.generateClassName;!(n=r({classes:this.classes,parent:a,sheet:u,jss:c,Renderer:p,generateClassName:h},n)).selector&&this.classes[e]&&(n.selector="."+(0,l.default)(this.classes[e])),this.raw[e]=t;var f=(0,o.default)(e,t,n),d=void 0;!n.selector&&f instanceof s.default&&(d=h(f,u),f.selector="."+(0,l.default)(d)),this.register(f,d);var g=void 0===n.index?this.index.length:n.index;return this.index.splice(g,0,f),f}},{key:"get",value:function get(e){return this.map[e]}},{key:"remove",value:function remove(e){this.unregister(e),this.index.splice(this.indexOf(e),1)}},{key:"indexOf",value:function indexOf(e){return this.index.indexOf(e)}},{key:"process",value:function process(){var e=this.options.jss.plugins;this.index.slice(0).forEach(e.onProcessRule,e)}},{key:"register",value:function register(e,t){this.map[e.key]=e,e instanceof s.default&&(this.map[e.selector]=e,t&&(this.classes[e.key]=t))}},{key:"unregister",value:function unregister(e){delete this.map[e.key],e instanceof s.default&&(delete this.map[e.selector],delete this.classes[e.key])}},{key:"link",value:function link(e){for(var t=this.options.sheet.renderer.getUnescapedKeysMap(this.index),n=0;n<e.length;n++){var r=e[n],i=this.options.sheet.renderer.getKey(r);t[i]&&(i=t[i]);var o=this.map[i];o&&(0,a.default)(o,r)}}},{key:"toString",value:function toString(e){for(var t="",n=this.options.sheet,r=!!n&&n.options.link,i=0;i<this.index.length;i++){var o=this.index[i].toString(e);(o||r)&&(t&&(t+="\n"),t+=o)}return t}}]),RuleList}();t.default=u},function(e,t){e.exports=function eq(e,t){return e===t||e!=e&&t!=t}},function(e,t,n){"use strict";n(25);var r=n(184),i=n(239),o=n.n(i),a=n(240),s=n.n(a),l=n(241),u=n.n(l),c=n(242),p=n.n(c),h=n(243),f=n.n(h),d=n(244),g=n.n(d),m=Object(r.create)({createGenerateClassName:function createGenerateClassName(){var e=0;return function(t){return"rsg--"+t.key+"-"+e++}},plugins:[o()(),s()({reset:Object.assign({},{animation:"none 0s ease 0s 1 normal none running","backface-visibility":"visible",background:"transparent none repeat 0 0 / auto auto padding-box border-box scroll",border:"medium none currentColor","border-image":"none","border-radius":"0",bottom:"auto","box-shadow":"none",clear:"none",clip:"auto",columns:"auto","column-count":"auto","column-fill":"balance","column-gap":"normal","column-rule":"medium none currentColor","column-span":"1","column-width":"auto",content:"normal","counter-increment":"none","counter-reset":"none",float:"none",height:"auto",hyphens:"none",left:"auto",margin:"0","max-height":"none","max-width":"none","min-height":"0","min-width":"0",opacity:"1",outline:"medium none invert",overflow:"visible","overflow-x":"visible","overflow-y":"visible",padding:"0","page-break-after":"auto","page-break-before":"auto","page-break-inside":"auto",perspective:"none","perspective-origin":"50% 50%",position:"static",right:"auto","table-layout":"auto","text-decoration":"none",top:"auto",transform:"none","transform-origin":"50% 50% 0","transform-style":"flat",transition:"none 0s ease 0s","unicode-bidi":"normal","vertical-align":"baseline",width:"auto","z-index":"auto"},{boxSizing:"border-box",color:"inherit",font:"inherit",fontFamily:"inherit",fontSize:"inherit",fontWeight:"inherit",lineHeight:"inherit"})}),u()(),p()(),f()(),g()()]});t.a=m},function(e,t,n){var r=n(1),i=n(2);function Group(e){var t=r.Children.toArray(e.children).filter(Boolean);if(1===t.length)return t;var n=e.separator,i=r.isValidElement(n),o=[t.shift()];return t.forEach(function(e,t){if(i){var a="separator-"+(e.key||t);n=r.cloneElement(n,{key:a})}o.push(n,e)}),o}Group.propTypes={children:i.node,separator:i.node},Group.defaultProps={separator:" "},e.exports=Group},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var r=n(3),i=n(4),o=n(11),a=n(10),s=n(12),l=n(93),u=n(19),c=n(47),p=[0,0,0],h=function(e){function Vector3(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Object(r.a)(this,Vector3),e=Object(o.a)(this,Object(a.a)(Vector3).call(this)),Array.isArray(t)&&1===arguments.length?e.copy(t):e.set(t,n,i),e}return Object(s.a)(Vector3,e),Object(i.a)(Vector3,[{key:"angle",value:function angle(e){return c.a(this,e)}},{key:"cross",value:function cross(e){return c.b(this,this,e),this.check()}},{key:"rotateX",value:function rotateX(e){var t=e.radians,n=e.origin,r=void 0===n?p:n;return c.e(this,this,r,t),this.check()}},{key:"rotateY",value:function rotateY(e){var t=e.radians,n=e.origin,r=void 0===n?p:n;return c.f(this,this,r,t),this.check()}},{key:"rotateZ",value:function rotateZ(e){var t=e.radians,n=e.origin,r=void 0===n?p:n;return c.g(this,this,r,t),this.check()}},{key:"operation",value:function operation(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.apply(void 0,[this,this].concat(n)),this.check()}},{key:"ELEMENTS",get:function get(){return 3}},{key:"z",get:function get(){return this[2]},set:function set(e){return this[2]=Object(u.a)(e)}}]),Vector3}(l.a)},,function(e,t){var n=e.exports={version:"2.6.5"};"number"==typeof __e&&(__e=n)},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t,n){var r=n(197),i=n(164);e.exports=Object.keys||function keys(e){return r(e,i)}},function(e,t,n){var r=n(198),i=n(101);e.exports=function(e){return r(i(e))}},function(e,t,n){var r=n(113),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){var r=n(101);e.exports=function(e){return Object(r(e))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function toCssValue(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!Array.isArray(e))return e;var n="";if(Array.isArray(e[0]))for(var i=0;i<e.length&&"!important"!==e[i];i++)n&&(n+=", "),n+=r(e[i]," ");else n=r(e,", ");t||"!important"!==e[e.length-1]||(n+=" !important");return n};var r=function join(e,t){for(var n="",r=0;r<e.length&&"!important"!==e[r];r++)n&&(n+=t),n+=e[r];return n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function createRule(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"unnamed",t=arguments[1],n=arguments[2],a=n.jss,s=(0,o.default)(t),l=a.plugins.onCreateRule(e,s,n);if(l)return l;"@"===e[0]&&(0,r.default)(!1,"[JSS] Unknown at-rule %s",e);return new i.default(e,s,n)};var r=_interopRequireDefault(n(72)),i=_interopRequireDefault(n(90)),o=_interopRequireDefault(n(285));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";var r=n(312),i=RegExp.prototype.exec;e.exports=function(e,t){var n=e.exec;if("function"==typeof n){var o=n.call(e,t);if("object"!=typeof o)throw new TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==r(e))throw new TypeError("RegExp#exec called on incompatible receiver");return i.call(e,t)}},function(e,t,n){"use strict";n(313);var r=n(88),i=n(80),o=n(60),a=n(101),s=n(54),l=n(167),u=s("species"),c=!o(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}),p=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();e.exports=function(e,t,n){var h=s(e),f=!o(function(){var t={};return t[h]=function(){return 7},7!=""[e](t)}),d=f?!o(function(){var t=!1,n=/a/;return n.exec=function(){return t=!0,null},"split"===e&&(n.constructor={},n.constructor[u]=function(){return n}),n[h](""),!t}):void 0;if(!f||!d||"replace"===e&&!c||"split"===e&&!p){var g=/./[h],m=n(a,h,""[e],function maybeCallNative(e,t,n,r,i){return t.exec===l?f&&!i?{done:!0,value:g.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}),y=m[0],v=m[1];r(String.prototype,e,y),i(RegExp.prototype,h,2==t?function(e,t){return v.call(e,this,t)}:function(e){return v.call(e,this)})}}},function(e,t,n){"use strict";var r=n(53);e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,n){"use strict";n(168)("link",function(e){return function link(t){return e(this,"a","href",t)}})},function(e,t,n){var r=n(318),i=n(319),o=n(320),a=n(321),s=n(322);function ListCache(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}ListCache.prototype.clear=r,ListCache.prototype.delete=i,ListCache.prototype.get=o,ListCache.prototype.has=a,ListCache.prototype.set=s,e.exports=ListCache},function(e,t,n){var r=n(103);e.exports=function assocIndexOf(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},function(e,t,n){var r=n(51).Symbol;e.exports=r},function(e,t,n){var r=n(82)(Object,"create");e.exports=r},function(e,t,n){var r=n(342);e.exports=function getMapData(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},function(e,t){var n=Object.prototype;e.exports=function isPrototype(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||n)}},function(e,t,n){var r=n(354),i=n(73),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,l=r(function(){return arguments}())?r:function(e){return i(e)&&a.call(e,"callee")&&!s.call(e,"callee")};e.exports=l},function(e,t,n){(function(e){var r=n(51),i=n(356),o=t&&!t.nodeType&&t,a=o&&"object"==typeof e&&e&&!e.nodeType&&e,s=a&&a.exports===o?r.Buffer:void 0,l=(s?s.isBuffer:void 0)||i;e.exports=l}).call(this,n(175)(e))},function(e,t,n){var r=n(358),i=n(359),o=n(360),a=o&&o.isTypedArray,s=a?i(a):r;e.exports=s},function(e,t,n){var r=n(217),i=n(225),o=n(74);e.exports=function keys(e){return o(e)?r(e):i(e)}},function(e,t,n){var r=n(83),i=n(73),o="[object Symbol]";e.exports=function isSymbol(e){return"symbol"==typeof e||i(e)&&r(e)==o}},function(e,t,n){var r=n(131),i=1/0;e.exports=function toKey(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-i?"-0":t}},function(e,t,n){"use strict";n.r(t),n.d(t,"jumpTo",function(){return p}),n.d(t,"easeTo",function(){return h}),n.d(t,"flyTo",function(){return f});var r=n(1),i=n(92),o=n(26),a=n(36),s=n(261),l=n.n(s),u=n(262),c=n.n(u);function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p="jumpTo",h="easeTo",f="flyTo",d=function(e){var t,n;function MapGL(t){var n;return _defineProperty(_assertThisInitialized(n=e.call(this,t)||this),"_map",void 0),_defineProperty(_assertThisInitialized(n),"_container",void 0),_defineProperty(_assertThisInitialized(n),"_onViewportChange",void 0),_defineProperty(_assertThisInitialized(n),"state",{loaded:!1}),_defineProperty(_assertThisInitialized(n),"_onViewportChange",function(e){if(e.originalEvent){var t=n._map,r=t.getCenter(),i=r.lng,o={latitude:r.lat,longitude:i,zoom:t.getZoom(),pitch:t.getPitch(),bearing:t.getBearing()};n.props.onViewportChange(o)}}),a.a&&(a.a.accessToken=t.accessToken),n._container=Object(r.createRef)(),n}n=e,(t=MapGL).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var s=MapGL.prototype;return s.componentDidMount=function componentDidMount(){var e=this;if(a.a){var t=this._container.current,n=new a.a.Map({container:t,style:this.props.mapStyle,interactive:!!this.props.onViewportChange,center:[this.props.longitude,this.props.latitude],zoom:this.props.zoom,pitch:this.props.pitch,bearing:this.props.bearing,minZoom:this.props.minZoom,maxZoom:this.props.maxZoom,hash:this.props.hash,bearingSnap:this.props.bearingSnap,pitchWithRotate:this.props.pitchWithRotate,attributionControl:this.props.attributionControl,logoPosition:this.props.logoPosition,failIfMajorPerformanceCaveat:this.props.failIfMajorPerformanceCaveat,preserveDrawingBuffer:this.props.preserveDrawingBuffer,refreshExpiredTiles:this.props.refreshExpiredTiles,maxBounds:this.props.maxBounds,scrollZoom:this.props.scrollZoom,boxZoom:this.props.boxZoom,dragRotate:this.props.dragRotate,dragPan:this.props.dragPan,keyboard:this.props.keyboard,doubleClickZoom:this.props.doubleClickZoom,trackResize:this.props.trackResize,renderWorldCopies:this.props.renderWorldCopies,maxTileCacheSize:this.props.maxTileCacheSize,localIdeographFontFamily:this.props.localIdeographFontFamily,transformRequest:this.props.transformRequest,collectResourceTiming:this.props.collectResourceTiming});n.on("styledata",function(){return e.setState({loaded:!0})}),n.once("load",function(){e.setState({loaded:!0},e.props.onLoad)}),this.props.onViewportChange&&(n.on("dragend",this._onViewportChange),n.on("zoomend",this._onViewportChange),n.on("rotateend",this._onViewportChange),n.on("pitchend",this._onViewportChange),n.on("boxzoomend",this._onViewportChange)),l.a.forEach(function(t){var r="on"+c()(t);e.props[r]&&n.on(t,e.props[r])}),this.props.cursorStyle&&(n.getCanvas().style.cursor=this.props.cursorStyle),this._map=n}},s.componentDidUpdate=function componentDidUpdate(e){this._updateMapViewport(e,this.props),this._updateMapStyle(e,this.props),!e.cursorStyle!==this.props.cursorStyle&&(this._map.getCanvas().style.cursor=this.props.cursorStyle)},s.componentWillUnmount=function componentWillUnmount(){this._map&&this._map.remove()},s.getMap=function getMap(){return this._map},s._updateMapStyle=function _updateMapStyle(e,t){var n=this,r=t.mapStyle,i=e.mapStyle;r!==i&&this.setState({loaded:!1},function(){return n._map.setStyle(r)})},s._updateMapViewport=function _updateMapViewport(e,t){var n=this._map,r=n.getCenter();if(t.latitude!==e.latitude&&t.latitude!==r.lat||t.longitude!==e.longitude&&t.longitude!==r.lng||t.zoom!==e.zoom&&t.zoom!==n.getZoom()||t.pitch!==e.pitch&&t.pitch!==n.getPitch()||t.bearing!==e.bearing&&t.bearing!==n.getBearing()){var i={center:[t.longitude,t.latitude],zoom:t.zoom,pitch:t.pitch,bearing:t.bearing},o=this.props,a=o.viewportChangeMethod,s=_extends({},o.viewportChangeOptions,i);switch(a){case f:n.flyTo(s);break;case p:n.jumpTo(s);break;case h:n.easeTo(s);break;default:throw new Error("Unknown viewport change method")}}},s.render=function render(){var e=this.state.loaded,t=this.props,n=t.className,a=t.style,s=r.Children.toArray(this.props.children).filter(Boolean).reduce(function(e,t){return t.type===i.default?e.layerChildren.push(t):e.otherChildren.push(t),e},{layerChildren:[],otherChildren:[]}),l=s.layerChildren,u=s.otherChildren,c=l.slice(1).map(function(e){return e.props.id}).reverse(),p=l.reverse().map(function(e,t){return Object(r.cloneElement)(e,{before:e.props.before||c[t-1]})}),h=u.concat(p);return Object(r.createElement)(o.a.Provider,{value:this._map},Object(r.createElement)("div",{ref:this._container,style:a,className:n},e&&h))},MapGL}(r.PureComponent);_defineProperty(d,"displayName","MapGL"),_defineProperty(d,"defaultProps",{children:null,className:null,style:null,mapStyle:"mapbox://styles/mapbox/light-v8",accessToken:null,bearing:0,pitch:0,minZoom:0,maxZoom:22,maxBounds:null,hash:!1,bearingSnap:7,pitchWithRotate:!0,attributionControl:!0,logoPosition:"bottom-left",failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,refreshExpiredTiles:!0,boxZoom:!0,scrollZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,trackResize:!0,renderWorldCopies:!0,maxTileCacheSize:null,onViewportChange:null,onLoad:null,localIdeographFontFamily:null,transformRequest:null,collectResourceTiming:!1,cursorStyle:null,viewportChangeMethod:p,viewportChangeOptions:null}),t.default=d},function(e,t,n){"use strict";n.r(t);var r=n(1),i=n(26);function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=function(e){var t,n;function CustomLayer(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return _defineProperty(_assertThisInitialized(t=e.call.apply(e,[this].concat(r))||this),"_id",void 0),_defineProperty(_assertThisInitialized(t),"_map",void 0),_defineProperty(_assertThisInitialized(t),"_layer",void 0),t}n=e,(t=CustomLayer).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=CustomLayer.prototype;return o.componentDidMount=function componentDidMount(){var e=this._map,t=this.props,n=t.layer,r=t.before;r&&e.getLayer(r)?e.addLayer(n,r):e.addLayer(n),this._id=n.id,this._layer=n},o.componentWillUnmount=function componentWillUnmount(){this._map&&this._map.getStyle()&&this._map.getLayer(this._id)&&this._map.removeLayer(this._id)},o.getLayer=function getLayer(){return this._layer},o.render=function render(){var e=this;return Object(r.createElement)(i.a.Consumer,{},function(t){return t&&(e._map=t),null})},CustomLayer}(r.PureComponent);_defineProperty(o,"displayName","CustomLayer"),t.default=o},function(e,t,n){"use strict";n.r(t);var r=n(69),i=n(1),o=n(26),a=n(36);function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=function(e){var t,n;function Popup(t){var n;return _defineProperty(_assertThisInitialized(n=e.call(this,t)||this),"_map",void 0),_defineProperty(_assertThisInitialized(n),"_el",void 0),_defineProperty(_assertThisInitialized(n),"_popup",void 0),n._el=document.createElement("div"),n}n=e,(t=Popup).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var s=Popup.prototype;return s.componentDidMount=function componentDidMount(){var e=this.props,t=e.longitude,n=e.latitude,r=e.offset,i=e.closeButton,o=e.closeOnClick,s=e.onClose,l=e.anchor,u=new a.a.Popup({offset:r,closeButton:i,closeOnClick:o,anchor:l});u.setDOMContent(this._el),u.setLngLat([t,n]).addTo(this._map),s&&u.on("close",s),this._popup=u},s.componentDidUpdate=function componentDidUpdate(e){(e.latitude!==this.props.latitude||e.longitude!==this.props.longitude)&&this._popup.setLngLat([this.props.longitude,this.props.latitude])},s.componentWillUnmount=function componentWillUnmount(){this._map&&this._map.getStyle()&&this._popup.remove()},s.getPopup=function getPopup(){return this._popup},s.render=function render(){var e=this;return Object(i.createElement)(o.a.Consumer,{},function(t){return t&&(e._map=t),Object(r.createPortal)(e.props.children,e._el)})},Popup}(i.PureComponent);_defineProperty(s,"displayName","Popup"),_defineProperty(s,"defaultProps",{closeButton:!0,closeOnClick:!0,onClose:null,anchor:null,offset:null}),t.default=s},function(e,t,n){"use strict";n.r(t);var r=n(69),i=n(1),o=n(26),a=n(36);function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=function(e){var t,n;function Marker(t){var n;return _defineProperty(_assertThisInitialized(n=e.call(this,t)||this),"_map",void 0),_defineProperty(_assertThisInitialized(n),"_el",void 0),_defineProperty(_assertThisInitialized(n),"_marker",void 0),_defineProperty(_assertThisInitialized(n),"_onDragEnd",function(){n.props.onDragEnd(n._marker.getLngLat())}),n._el=document.createElement("div"),n}n=e,(t=Marker).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var s=Marker.prototype;return s.componentDidMount=function componentDidMount(){var e=this.props,t=e.longitude,n=e.latitude,r=e.offset,i=e.draggable,o=e.onDragEnd,s=new a.a.Marker(this._el,{draggable:i,offset:r});s.setLngLat([t,n]).addTo(this._map),o&&s.on("dragend",this._onDragEnd),this._marker=s},s.componentDidUpdate=function componentDidUpdate(e){(e.latitude!==this.props.latitude||e.longitude!==this.props.longitude)&&this._marker.setLngLat([this.props.longitude,this.props.latitude])},s.componentWillUnmount=function componentWillUnmount(){this._map&&this._map.getStyle()&&this._marker.remove()},s.getMarker=function getMarker(){return this._marker},s.render=function render(){var e=this;return Object(i.createElement)(o.a.Consumer,{},function(t){return t&&(e._map=t),Object(r.createPortal)(e.props.children,e._el)})},Marker}(i.PureComponent);_defineProperty(s,"displayName","Marker"),_defineProperty(s,"defaultProps",{offset:null,draggable:!1}),t.default=s},function(e,t,n){"use strict";n.r(t);var r=n(1),i=n(26);function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var o=function(e){var t,n;function FeatureState(){for(var t,n,r,i,o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];return t=e.call.apply(e,[this].concat(a))||this,n=_assertThisInitialized(t),i=void 0,(r="_map")in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,t}n=e,(t=FeatureState).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=FeatureState.prototype;return o.componentDidMount=function componentDidMount(){var e=this._map,t=this.props,n=t.id,r=t.source,i=t.sourceLayer,o=t.state;e.setFeatureState({id:n,source:r,sourceLayer:i},o)},o.componentDidUpdate=function componentDidUpdate(e){var t=this._map,n=this.props,r=n.id,i=n.source,o=n.sourceLayer,a=n.state;r===e.id&&i===e.source&&o===e.sourceLayer&&a===e.state||(t.removeFeatureState({id:e.id,source:e.source,sourceLayer:e.sourceLayer}),t.setFeatureState({id:r,source:i,sourceLayer:o},a))},o.componentWillUnmount=function componentWillUnmount(){var e=this._map;if(e){var t=this.props,n=t.id,r=t.source,i=t.sourceLayer;e.removeFeatureState({id:n,source:r,sourceLayer:i})}},o.render=function render(){var e=this;return Object(r.createElement)(i.a.Consumer,{},function(t){return t&&(e._map=t),null})},FeatureState}(r.PureComponent);t.default=o},function(e,t,n){"use strict";n.r(t);var r=n(1),i=n(26),o=n(36);function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=function(e){var t,n;function AttributionControl(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return _defineProperty(_assertThisInitialized(t=e.call.apply(e,[this].concat(r))||this),"_map",void 0),_defineProperty(_assertThisInitialized(t),"_control",void 0),t}n=e,(t=AttributionControl).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=AttributionControl.prototype;return a.componentDidMount=function componentDidMount(){var e=this._map,t=this.props,n=t.compact,r=t.customAttribution,i=t.position,a=new o.a.AttributionControl({compact:n,customAttribution:r});e.addControl(a,i),this._control=a},a.componentWillUnmount=function componentWillUnmount(){this._map&&this._map.removeControl(this._control)},a.render=function render(){var e=this;return Object(r.createElement)(i.a.Consumer,{},function(t){return t&&(e._map=t),null})},AttributionControl}(r.PureComponent);_defineProperty(a,"defaultProps",{position:"bottom-right"}),t.default=a},function(e,t,n){"use strict";n.r(t);var r=n(1),i=n(26),o=n(36);function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=function(e){var t,n;function FullscreenControl(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return _defineProperty(_assertThisInitialized(t=e.call.apply(e,[this].concat(r))||this),"_map",void 0),_defineProperty(_assertThisInitialized(t),"_control",void 0),t}n=e,(t=FullscreenControl).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=FullscreenControl.prototype;return a.componentDidMount=function componentDidMount(){var e=this._map,t=this.props,n=t.container,r=t.position,i=new o.a.FullscreenControl({container:n});e.addControl(i,r),this._control=i},a.componentWillUnmount=function componentWillUnmount(){this._map&&this._map.removeControl(this._control)},a.render=function render(){var e=this;return Object(r.createElement)(i.a.Consumer,{},function(t){return t&&(e._map=t),null})},FullscreenControl}(r.PureComponent);_defineProperty(a,"defaultProps",{position:"top-right"}),t.default=a},function(e,t,n){"use strict";n.r(t);var r=n(1),i=n(26),o=n(36);function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=function(e){var t,n;function GeolocateControl(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return _defineProperty(_assertThisInitialized(t=e.call.apply(e,[this].concat(r))||this),"_map",void 0),_defineProperty(_assertThisInitialized(t),"_control",void 0),t}n=e,(t=GeolocateControl).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=GeolocateControl.prototype;return a.componentDidMount=function componentDidMount(){var e=this._map,t=this.props,n=t.positionOptions,r=t.fitBoundsOptions,i=t.trackUserLocation,a=t.showUserLocation,s=t.position,l=new o.a.GeolocateControl({positionOptions:n,fitBoundsOptions:r,trackUserLocation:i,showUserLocation:a});e.addControl(l,s),this._control=l},a.componentWillUnmount=function componentWillUnmount(){this._map&&this._map.removeControl(this._control)},a.render=function render(){var e=this;return Object(r.createElement)(i.a.Consumer,{},function(t){return t&&(e._map=t),null})},GeolocateControl}(r.PureComponent);_defineProperty(a,"defaultProps",{positionOptions:{enableHighAccuracy:!1,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showUserLocation:!0}),t.default=a},function(e,t,n){"use strict";n.r(t);var r=n(1),i=n(26),o=n(36);function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=function(e){var t,n;function NavigationControl(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return _defineProperty(_assertThisInitialized(t=e.call.apply(e,[this].concat(r))||this),"_map",void 0),_defineProperty(_assertThisInitialized(t),"_control",void 0),t}n=e,(t=NavigationControl).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=NavigationControl.prototype;return a.componentDidMount=function componentDidMount(){var e=this._map,t=this.props,n=t.showCompass,r=t.showZoom,i=t.position,a=new o.a.NavigationControl({showCompass:n,showZoom:r});e.addControl(a,i),this._control=a},a.componentWillUnmount=function componentWillUnmount(){this._map&&this._map.removeControl(this._control)},a.render=function render(){var e=this;return Object(r.createElement)(i.a.Consumer,{},function(t){return t&&(e._map=t),null})},NavigationControl}(r.PureComponent);_defineProperty(a,"defaultProps",{position:"top-right"}),t.default=a},function(e,t,n){"use strict";n.r(t);var r=n(1),i=n(26),o=n(36);function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=function(e){var t,n;function ScaleControl(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return _defineProperty(_assertThisInitialized(t=e.call.apply(e,[this].concat(r))||this),"_map",void 0),_defineProperty(_assertThisInitialized(t),"_control",void 0),t}n=e,(t=ScaleControl).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=ScaleControl.prototype;return a.componentDidMount=function componentDidMount(){var e=this._map,t=this.props,n=t.maxWidth,r=t.unit,i=t.position,a=new o.a.ScaleControl({maxWidth:n,unit:r});e.addControl(a,i),this._control=a},a.componentWillUnmount=function componentWillUnmount(){this._map&&this._map.removeControl(this._control)},a.render=function render(){var e=this;return Object(r.createElement)(i.a.Consumer,{},function(t){return t&&(e._map=t),null})},ScaleControl}(r.PureComponent);_defineProperty(a,"defaultProps",{position:"bottom-right",unit:"metric"}),t.default=a},function(e,t,n){"use strict";n.d(t,"a",function(){return cloneTextureFrom});var r=n(57),i=n(91),o=n(147),a=n(63),s=n.n(a);function cloneTextureFrom(e,t){s()(e instanceof r.a||e instanceof i.a||e instanceof o.a);var n=e.constructor,a=e.gl,l=e.width,u=e.height,c=e.format,p=e.type,h=e.dataFormat,f=e.border,d=e.mipmaps;return new n(a,Object.assign({width:l,height:u,format:c,type:p,dataFormat:h,border:f,mipmaps:d},t))}},function(e,t,n){"use strict";n.d(t,"a",function(){return isOldIE});var r=n(22);function isOldIE(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=r.b.navigator||{},n=e.userAgent||t.userAgent||"",i=-1!==n.indexOf("MSIE "),o=-1!==n.indexOf("Trident/");return i||o}},function(e,t,n){"use strict";n.d(t,"a",function(){return stubRemovedMethods});var r=n(38);function stubRemovedMethods(e,t,n,i){var o="See luma.gl ".concat(n," Upgrade Guide at http://uber.github.io/luma.gl/#/documentation/overview/upgrade-guide"),a=Object.getPrototypeOf(e);i.forEach(function(e){a.methodName||(a[e]=function(){throw r.a.removed("Calling removed method ".concat(t,".").concat(e,": "),o),new Error(e)})})}},function(e,t,n){"use strict";n.r(t);var r=n(1),i=n(26);function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o=function(e){switch(e.type){case"vector":return _extends({type:"vector"},e);case"raster":return _extends({type:"raster"},e);case"raster-dem":return _extends({type:"raster-dem"},e);case"geojson":return _extends({type:"geojson"},e);case"video":return _extends({type:"video"},e);case"image":return _extends({type:"image"},e);default:throw new Error("Unknown type for '"+e.id+"' Source")}};function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=function(e){var t,n;function Source(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return _defineProperty(_assertThisInitialized(t=e.call.apply(e,[this].concat(r))||this),"_map",void 0),t}n=e,(t=Source).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=Source.prototype;return a.componentDidMount=function componentDidMount(){var e=o(this.props),t=e.id,n=_objectWithoutPropertiesLoose(e,["id"]);this._map.addSource(t,n)},a.componentDidUpdate=function componentDidUpdate(e){var t=o(e),n=t.id,r=_objectWithoutPropertiesLoose(t,["id"]),i=o(this.props),a=i.id,s=_objectWithoutPropertiesLoose(i,["id"]);if(a!==n||s.type!==r.type)return this._map.removeSource(n),void this._map.addSource(a,s);if("geojson"!==s.type||"geojson"!==r.type||s.data===r.data){if("vector"===s.type&&"vector"===r.type&&s.tiles!==r.tiles){var l=this._map.getStyle();l.sources[a].tiles=l.tiles,this._map.setStyle(l)}}else this._map.getSource(a).setData(s.data)},a.componentWillUnmount=function componentWillUnmount(){this._map&&this._map.getStyle()&&this._map.getSource(this.props.id)&&this._map.removeSource(this.props.id)},a.render=function render(){var e=this;return Object(r.createElement)(i.a.Consumer,{},function(t){return t&&(e._map=t),null})},Source}(r.PureComponent);_defineProperty(a,"displayName","Source");t.default=a},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var r=n(3),i=n(11),o=n(10),a=n(4),s=n(12),l=n(18),u=n(8),c=n(28),p=n(46),h=n(20),f=function(e){function Texture3D(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(r.a)(this,Texture3D),Object(u.d)(e),(t=Object(i.a)(this,Object(o.a)(Texture3D).call(this,e,Object.assign({},n,{target:n.target||32879})))).width=null,t.height=null,t.depth=null,Object.seal(Object(l.a)(Object(l.a)(t))),t.setImageData(n),n.generateMipmap&&t.generateMipmap(),t}return Object(s.a)(Texture3D,e),Object(a.a)(Texture3D,null,[{key:"isSupported",value:function isSupported(e){return Object(u.n)(e)}}]),Object(a.a)(Texture3D,[{key:"initialize",value:function initialize(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.opts=Object.assign({},this.opts,t);var n=this.opts,r=n.pixels,i=n.settings;i&&(Object(c.c)(i,function(){r&&e.setImage3D(e.opts)}),this.setParameters(t))}},{key:"setImage3D",value:function setImage3D(e){var t=e.level,n=void 0===t?0:t,r=e.internalformat,i=void 0===r?6408:r,o=e.width,a=e.height,s=e.depth,l=void 0===s?1:s,u=e.border,c=void 0===u?0:u,p=e.format,f=e.type,d=void 0===f?5121:f,g=e.offset,m=void 0===g?0:g,y=e.pixels;ArrayBuffer.isView(y)?this.gl.texImage3D(this.target,n,i,o,a,l,c,p,d,y):y instanceof h.a&&(this.gl.bindBuffer(35052,y.handle),this.gl.texImage3D(this.target,n,i,o,a,l,c,p,d,m),this.gl.bindBuffer(35052,y.handle))}}]),Texture3D}(p.a)},function(e,t,n){"use strict";n.r(t),n.d(t,"spaceFactor",function(){return r}),n.d(t,"space",function(){return i}),n.d(t,"color",function(){return o}),n.d(t,"fontFamily",function(){return a}),n.d(t,"fontSize",function(){return s}),n.d(t,"mq",function(){return l}),n.d(t,"borderRadius",function(){return u}),n.d(t,"maxWidth",function(){return c}),n.d(t,"sidebarWidth",function(){return p}),n.d(t,"buttonTextTransform",function(){return h});var r=8,i=[r/2,r,2*r,3*r,4*r,5*r,6*r],o={base:"#333",light:"#767676",lightest:"#ccc",link:"#1673b1",linkHover:"#e90",focus:"rgba(22, 115, 177, 0.25)",border:"#e8e8e8",name:"#690",type:"#905",error:"#c00",baseBackground:"#fff",codeBackground:"#f5f5f5",sidebarBackground:"#f5f5f5",ribbonBackground:"#e90",ribbonText:"#fff",codeComment:"#6d6d6d",codePunctuation:"#999",codeProperty:"#905",codeDeleted:"#905",codeString:"#690",codeInserted:"#690",codeOperator:"#9a6e3a",codeKeyword:"#1673b1",codeFunction:"#DD4A68",codeVariable:"#e90"},a={base:["-apple-system","BlinkMacSystemFont",'"Segoe UI"','"Roboto"','"Oxygen"','"Ubuntu"','"Cantarell"','"Fira Sans"','"Droid Sans"','"Helvetica Neue"',"sans-serif"],monospace:["Consolas",'"Liberation Mono"',"Menlo","monospace"]},s={base:15,text:16,small:13,h1:48,h2:36,h3:24,h4:18,h5:16,h6:16},l={small:"@media (max-width: 600px)"},u=3,c=1e3,p=200,h="uppercase"},function(e,t,n){"use strict";t.a=function prismTheme(e){var t,n=e.color;return(t={})["& .token.comment,\n& .token.prolog,\n& .token.doctype,\n& .token.cdata"]={isolate:!1,color:n.codeComment},t["& .token.punctuation"]={isolate:!1,color:n.codePunctuation},t["& .namespace"]={isolate:!1,opacity:.7},t["& .token.property,\n& .token.tag,\n& .token.boolean,\n& .token.number,\n& .token.constant,\n& .token.symbol"]={isolate:!1,color:n.codeProperty},t["& .token.deleted"]={isolate:!1,color:n.codeDeleted},t["& .token.selector,\n& .token.attr-name,\n& .token.string,\n& .token.char,\n& .token.builtin"]={isolate:!1,color:n.codeString},t["& .token.inserted"]={isolate:!1,color:n.codeInserted},t["& .token.operator,\n& .token.entity,\n& .token.url,\n& .language-css .token.string,\n& .style .token.string"]={isolate:!1,color:n.codeOperator},t["& .token.atrule,\n& .token.attr-value,\n& .token.keyword"]={isolate:!1,color:n.codeKeyword},t["& .token.function,\n& .token.class-name"]={isolate:!1,color:n.codeFunction},t["& .token.regex,\n& .token.important,\n& .token.variable"]={isolate:!1,color:n.codeVariable},t["& .token.important,\n& .token.bold"]={isolate:!1,fontWeight:"bold"},t["& .token.italic"]={isolate:!1,fontStyle:"italic"},t["& .token.entity"]={isolate:!1,cursor:"help"},t}},function(e,t,n){var r=n(438)(n(439));e.exports=r},function(e,t,n){"use strict";t.__esModule=!0,t.DOCS_THIRDPARTIES=t.DOCS_DOCUMENTING=t.DOCS_WEBPACK=t.DOCS_COMPONENTS=t.DOCS_CONFIG=t.BUGS=t.HOMEPAGE=void 0;t.HOMEPAGE="https://react-styleguidist.js.org/";t.BUGS="https://github.com/styleguidist/react-styleguidist/issues";t.DOCS_CONFIG="https://react-styleguidist.js.org/docs/configuration.html";t.DOCS_COMPONENTS="https://react-styleguidist.js.org/docs/components.html";t.DOCS_WEBPACK="https://react-styleguidist.js.org/docs/webpack.html";t.DOCS_DOCUMENTING="https://react-styleguidist.js.org/docs/documenting.html";t.DOCS_THIRDPARTIES="https://react-styleguidist.js.org/docs/thirdparties.html"},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return isBrowser});var r=n(27),i=n(153);function isBrowser(){return!("object"===(void 0===e?"undefined":Object(r.a)(e))&&"[object process]"===String(e)&&!e.browser)||Object(i.a)()}}).call(this,n(66))},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return isElectron});var r=n(27);function isElectron(t){if("undefined"!=typeof window&&"object"===Object(r.a)(window.process)&&"renderer"===window.process.type)return!0;if(void 0!==e&&"object"===Object(r.a)(e.versions)&&Boolean(e.versions.electron))return!0;var n="object"===("undefined"==typeof navigator?"undefined":Object(r.a)(navigator))&&"string"==typeof navigator.userAgent&&navigator.userAgent,i=t||n;return!!(i&&i.indexOf("Electron")>=0)}}).call(this,n(66))},function(e,t,n){"use strict";function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",function(){return _setPrototypeOf})},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(3),i=n(4),o=n(11),a=n(10),s=n(12),l=n(19);var u=function(e){function MathArray(){return Object(r.a)(this,MathArray),Object(o.a)(this,Object(a.a)(MathArray).apply(this,arguments))}return Object(s.a)(MathArray,e),Object(i.a)(MathArray,[{key:"clone",value:function clone(){return(new this.constructor).copy(this).check()}},{key:"copy",value:function copy(e){for(var t=0;t<this.ELEMENTS;++t)this[t]=e[t];return this.check()}},{key:"set",value:function set(){for(var e=0;e<this.ELEMENTS;++e)this[e]=(e<0||arguments.length<=e?void 0:arguments[e])||0;return this.check()}},{key:"fromArray",value:function fromArray(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<this.ELEMENTS;++n)this[n]=e[n+t];return this.check()}},{key:"toString",value:function toString(){return this.formatString(l.c)}},{key:"formatString",value:function formatString(e){for(var t="",n=0;n<this.ELEMENTS;++n)t+=(n>0?", ":"")+Object(l.f)(this[n],e);return"".concat(e.printTypes?this.constructor.name:"","[").concat(t,"]")}},{key:"toArray",value:function toArray(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<this.ELEMENTS;++n)e[t+n]=this[n];return e}},{key:"toFloat32Array",value:function toFloat32Array(){return new Float32Array(this)}},{key:"equals",value:function equals(e){if(!e||this.length!==e.length)return!1;for(var t=0;t<this.ELEMENTS;++t)if(!Object(l.e)(this[t],e[t]))return!1;return!0}},{key:"exactEquals",value:function exactEquals(e){if(!e||this.length!==e.length)return!1;for(var t=0;t<this.ELEMENTS;++t)if(this[t]!==e[t])return!1;return!0}},{key:"negate",value:function negate(){for(var e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}},{key:"inverse",value:function inverse(){for(var e=0;e<this.ELEMENTS;++e)this[e]=1/this[e];return this.check()}},{key:"lerp",value:function lerp(e,t,n){void 0===n&&(n=t,t=e,e=this);for(var r=0;r<this.ELEMENTS;++r){var i=e[r];this[r]=i+n*(t[r]-i)}return this.check()}},{key:"min",value:function min(e){for(var t=0;t<this.ELEMENTS;++t)this[t]=Math.min(e[t],this[t]);return this.check()}},{key:"max",value:function max(e){for(var t=0;t<this.ELEMENTS;++t)this[t]=Math.max(e[t],this[t]);return this.check()}},{key:"clamp",value:function clamp(e,t){for(var n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],e[n]),t[n]);return this.check()}},{key:"validate",value:function validate(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this,t=e&&e.length===this.ELEMENTS,n=0;n<this.ELEMENTS;++n)t=t&&Number.isFinite(e[n]);return t}},{key:"check",value:function check(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;if(l.c.debug&&!this.validate(e))throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}},{key:"sub",value:function sub(e){return this.subtract(e)}},{key:"setScalar",value:function setScalar(e){for(var t=0;t<this.ELEMENTS;++t)this[t]=e;return this.check()}},{key:"addScalar",value:function addScalar(e){for(var t=0;t<this.ELEMENTS;++t)this[t]+=e;return this.check()}},{key:"subScalar",value:function subScalar(e){return this.addScalar(-e)}},{key:"multiplyScalar",value:function multiplyScalar(e){return this.scale(e)}},{key:"divideScalar",value:function divideScalar(e){return this.scale(1/e)}},{key:"clampScalar",value:function clampScalar(e,t){for(var n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],e),t);return this.check()}}]),MathArray}(function _extendableBuiltin(e){function ExtendableBuiltin(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return ExtendableBuiltin.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(ExtendableBuiltin,e):ExtendableBuiltin.__proto__=e,ExtendableBuiltin}(Array))},function(e,t,n){"use strict";n(25),n(23);var r=n(1),i=n.n(r),o=n(2),a=n.n(o),s=n(94),l=n(97),u=n(13);function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ArgumentsRenderer(e){var t=e.classes,n=e.args,r=e.heading;return 0===n.length?null:i.a.createElement("div",{className:t.root},r&&i.a.createElement("div",{className:t.headingWrapper},i.a.createElement(l.a,{level:5},"Arguments")),n.map(function(e){return i.a.createElement(s.a,_extends({key:e.name},e))}))}ArgumentsRenderer.propTypes={classes:a.a.object.isRequired,args:a.a.arrayOf(a.a.shape({name:a.a.string.isRequired,type:a.a.object,description:a.a.string})).isRequired,heading:a.a.bool};var c=Object(u.a)(function styles(e){var t=e.space;return{root:{marginBottom:t[2],fontSize:"inherit"},headingWrapper:{marginBottom:t[0]}}})(ArgumentsRenderer);n.d(t,"a",function(){return c})},function(e,t,n){"use strict";n(25),n(56),n(68),n(75),n(120);var r=n(1),i=n.n(r),o=n(2),a=n.n(o),s=n(24),l=n(13);function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function LinkRenderer(e){var t=e.classes,n=e.children,r=_objectWithoutPropertiesLoose(e,["classes","children"]);return i.a.createElement("a",_extends({},r,{className:Object(s.a)(t.link,r.className)}),n)}LinkRenderer.propTypes={children:a.a.node,className:a.a.string,classes:a.a.object.isRequired};var u=Object(l.a)(function styles(e){var t=e.color;return{link:{"&, &:link, &:visited":{fontSize:"inherit",color:t.link,textDecoration:"none"},"&:hover, &:active":{isolate:!1,color:t.linkHover,cursor:"pointer"}}}})(LinkRenderer);n.d(t,"a",function(){return u})},function(e,t,n){"use strict";n(50);var r=n(1),i=n.n(r),o=n(2),a=n.n(o),s=n(13);function TableRenderer(e){var t=e.classes,n=e.columns,r=e.rows,o=e.getRowKey;return i.a.createElement("table",{className:t.table},i.a.createElement("thead",{className:t.tableHead},i.a.createElement("tr",null,n.map(function(e){var n=e.caption;return i.a.createElement("th",{key:n,className:t.cellHeading},n)}))),i.a.createElement("tbody",null,r.map(function(e){return i.a.createElement("tr",{key:o(e)},n.map(function(n,r){var o=n.render;return i.a.createElement("td",{key:r,className:t.cell},o(e))}))})))}TableRenderer.propTypes={classes:a.a.object.isRequired,columns:a.a.arrayOf(a.a.shape({caption:a.a.string.isRequired,render:a.a.func.isRequired})).isRequired,rows:a.a.arrayOf(a.a.object).isRequired,getRowKey:a.a.func.isRequired};var l=Object(s.a)(function styles(e){var t=e.space,n=e.color,r=e.fontFamily,i=e.fontSize;return{table:{width:"100%",borderCollapse:"collapse",marginBottom:t[4]},tableHead:{borderBottom:[[1,n.border,"solid"]]},cellHeading:{color:n.base,paddingRight:t[2],paddingBottom:t[1],textAlign:"left",fontFamily:r.base,fontWeight:"bold",fontSize:i.small,whiteSpace:"nowrap"},cell:{color:n.base,paddingRight:t[2],paddingTop:t[1],paddingBottom:t[1],verticalAlign:"top",fontFamily:r.base,fontSize:i.small,"&:last-child":{isolate:!1,width:"99%",paddingRight:0},"& p:last-child":{isolate:!1,marginBottom:0}}}})(TableRenderer);n.d(t,"a",function(){return l})},function(e,t,n){"use strict";n.r(t);var r=n(77),i=n(22),o=n(38);n(237);n.d(t,"global",function(){return i.a});if(i.a.luma&&"6.4.3"!==i.a.luma.VERSION)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(i.a.luma.VERSION," vs ").concat("6.4.3"));i.a.luma||(r.a&&o.a.log(0,"luma.gl ".concat("6.4.3"," - ").concat("set luma.log.priority=1 (or higher) to trace rendering"))(),i.a.luma=i.a.luma||{VERSION:"6.4.3",version:"6.4.3",log:o.a,stats:{},globals:{modules:{},nodeIO:{}}});t.default=i.a.luma},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var r=n(108),i=n(67),o=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n(194)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var r=n(161)("keys"),i=n(109);e.exports=function(e){return r[e]||(r[e]=i(e))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function toCss(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i="";if(!t)return i;var o=n.indent,a=void 0===o?0:o,s=t.fallbacks;if(a++,s)if(Array.isArray(s))for(var l=0;l<s.length;l++){var u=s[l];for(var c in u){var p=u[c];null!=p&&(i+="\n"+indentStr(c+": "+(0,r.default)(p)+";",a))}}else for(var h in s){var f=s[h];null!=f&&(i+="\n"+indentStr(h+": "+(0,r.default)(f)+";",a))}for(var d in t){var g=t[d];null!=g&&"fallbacks"!==d&&(i+="\n"+indentStr(d+": "+(0,r.default)(g)+";",a))}return i||n.allowEmpty?i=indentStr(e+" {"+i+"\n",--a)+indentStr("}",a):i};var r=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n(115));function indentStr(e,t){for(var n="",r=0;r<t;r++)n+="  ";return n+e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n(200));t.default=new r.default},function(e,t,n){"use strict";var r,i,o=n(119),a=RegExp.prototype.exec,s=String.prototype.replace,l=a,u=(r=/a/,i=/b*/g,a.call(r,"a"),a.call(i,"a"),0!==r.lastIndex||0!==i.lastIndex),c=void 0!==/()??/.exec("")[1];(u||c)&&(l=function exec(e){var t,n,r,i,l=this;return c&&(n=new RegExp("^"+l.source+"$(?!\\s)",o.call(l))),u&&(t=l.lastIndex),r=a.call(l,e),u&&r&&(l.lastIndex=l.global?r.index+r[0].length:t),c&&r&&r.length>1&&s.call(r[0],n,function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)}),r}),e.exports=l},function(e,t,n){var r=n(100),i=n(60),o=n(101),a=/"/g,s=function(e,t,n,r){var i=String(o(e)),s="<"+t;return""!==n&&(s+=" "+n+'="'+String(r).replace(a,"&quot;")+'"'),s+">"+i+"</"+t+">"};e.exports=function(e,t){var n={};n[e]=t(s),r(r.P+r.F*i(function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}),"String",n)}},function(e,t,n){"use strict";var r=n(316)(!0);e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},function(e,t,n){var r=n(121),i=n(323),o=n(324),a=n(325),s=n(326),l=n(327);function Stack(e){var t=this.__data__=new r(e);this.size=t.size}Stack.prototype.clear=i,Stack.prototype.delete=o,Stack.prototype.get=a,Stack.prototype.has=s,Stack.prototype.set=l,e.exports=Stack},function(e,t,n){var r=n(82)(n(51),"Map");e.exports=r},function(e,t,n){var r=n(83),i=n(61),o="[object AsyncFunction]",a="[object Function]",s="[object GeneratorFunction]",l="[object Proxy]";e.exports=function isFunction(e){if(!i(e))return!1;var t=r(e);return t==a||t==s||t==o||t==l}},function(e,t,n){var r=n(334),i=n(341),o=n(343),a=n(344),s=n(345);function MapCache(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}MapCache.prototype.clear=r,MapCache.prototype.delete=i,MapCache.prototype.get=o,MapCache.prototype.has=a,MapCache.prototype.set=s,e.exports=MapCache},function(e,t,n){var r=n(210);e.exports=function baseAssignValue(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){var n=9007199254740991;e.exports=function isLength(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=n}},function(e,t){var n=9007199254740991,r=/^(?:0|[1-9]\d*)$/;e.exports=function isIndex(e,t){var i=typeof e;return!!(t=null==t?n:t)&&("number"==i||"symbol"!=i&&r.test(e))&&e>-1&&e%1==0&&e<t}},function(e,t){e.exports=function identity(e){return e}},function(e,t){e.exports={}},function(e,t,n){var r=n(391),i=n(415),o=n(178),a=n(55),s=n(422);e.exports=function baseIteratee(e){return"function"==typeof e?e:null==e?o:"object"==typeof e?a(e)?i(e[0],e[1]):r(e):s(e)}},function(e,t,n){var r=n(55),i=n(131),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;e.exports=function isKey(e,t){if(r(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!i(e))||a.test(e)||!o.test(e)||null!=t&&e in Object(t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=_interopRequireDefault(n(1)),o=_interopRequireDefault(n(2));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _objectWithoutProperties(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var a=function IconBase(e,t){var n=e.children,o=e.color,a=e.size,s=e.style,l=e.width,u=e.height,c=_objectWithoutProperties(e,["children","color","size","style","width","height"]),p=t.reactIconBase,h=void 0===p?{}:p,f=a||h.size||"1em";return i.default.createElement("svg",r({children:n,fill:"currentColor",preserveAspectRatio:"xMidYMid meet",height:u||f,width:l||f},h,c,{style:r({verticalAlign:"middle",color:o||h.color},h.style||{},s)}))};a.propTypes={color:o.default.string,size:o.default.oneOfType([o.default.string,o.default.number]),width:o.default.oneOfType([o.default.string,o.default.number]),height:o.default.oneOfType([o.default.string,o.default.number]),style:o.default.object},a.contextTypes={reactIconBase:o.default.shape(a.propTypes)},t.default=a,e.exports=t.default},function(e,t,n){"use strict";var r=n(232),i=n(53),o=n(430),a=n(169),s=n(112),l=n(117),u=n(167),c=n(60),p=Math.min,h=[].push,f=!c(function(){RegExp(4294967295,"y")});n(118)("split",2,function(e,t,n,c){var d;return d="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,t){var i=String(this);if(void 0===e&&0===t)return[];if(!r(e))return n.call(i,e,t);for(var o,a,s,l=[],c=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),p=0,f=void 0===t?4294967295:t>>>0,d=new RegExp(e.source,c+"g");(o=u.call(d,i))&&!((a=d.lastIndex)>p&&(l.push(i.slice(p,o.index)),o.length>1&&o.index<i.length&&h.apply(l,o.slice(1)),s=o[0].length,p=a,l.length>=f));)d.lastIndex===o.index&&d.lastIndex++;return p===i.length?!s&&d.test("")||l.push(""):l.push(i.slice(p)),l.length>f?l.slice(0,f):l}:"0".split(void 0,0).length?function(e,t){return void 0===e&&0===t?[]:n.call(this,e,t)}:n,[function split(n,r){var i=e(this),o=null==n?void 0:n[t];return void 0!==o?o.call(n,i,r):d.call(String(i),n,r)},function(e,t){var r=c(d,e,this,t,d!==n);if(r.done)return r.value;var u=i(e),h=String(this),g=o(u,RegExp),m=u.unicode,y=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(f?"y":"g"),v=new g(f?u:"^(?:"+u.source+")",y),_=void 0===t?4294967295:t>>>0;if(0===_)return[];if(0===h.length)return null===l(v,h)?[h]:[];for(var b=0,x=0,w=[];x<h.length;){v.lastIndex=f?x:0;var S,E=l(v,f?h:h.slice(x));if(null===E||(S=p(s(v.lastIndex+(f?0:x)),h.length))===b)x=a(h,x,m);else{if(w.push(h.slice(b,x)),w.length===_)return w;for(var P=1;P<=E.length-1;P++)if(w.push(E[P]),w.length===_)return w;x=b=S}}return w.push(h.slice(b)),w}]})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.create=t.createGenerateClassName=t.sheets=t.RuleList=t.SheetsManager=t.SheetsRegistry=t.toCssValue=t.getDynamicStyles=void 0;var r=n(283);Object.defineProperty(t,"getDynamicStyles",{enumerable:!0,get:function get(){return _interopRequireDefault(r).default}});var i=n(115);Object.defineProperty(t,"toCssValue",{enumerable:!0,get:function get(){return _interopRequireDefault(i).default}});var o=n(200);Object.defineProperty(t,"SheetsRegistry",{enumerable:!0,get:function get(){return _interopRequireDefault(o).default}});var a=n(284);Object.defineProperty(t,"SheetsManager",{enumerable:!0,get:function get(){return _interopRequireDefault(a).default}});var s=n(102);Object.defineProperty(t,"RuleList",{enumerable:!0,get:function get(){return _interopRequireDefault(s).default}});var l=n(166);Object.defineProperty(t,"sheets",{enumerable:!0,get:function get(){return _interopRequireDefault(l).default}});var u=n(203);Object.defineProperty(t,"createGenerateClassName",{enumerable:!0,get:function get(){return _interopRequireDefault(u).default}});var c=_interopRequireDefault(n(290));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var p=t.create=function create(e){return new c.default(e)};t.default=p()},function(e,t,n){var r=n(173),i="Expected a function";function memoize(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(i);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(memoize.Cache||r),n}memoize.Cache=r,e.exports=memoize},function(e,t,n){var r=n(229);e.exports=function get(e,t,n){var i=null==e?void 0:r(e,t);return void 0===i?n:i}},function(e,t,n){var r=n(317),i=n(367)(function(e,t,n){r(e,t,n)});e.exports=i},function(e,t,n){(function(t){var n="undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{},r=function(){var e=/\blang(?:uage)?-([\w-]+)\b/i,t=0,r=n.Prism={manual:n.Prism&&n.Prism.manual,disableWorkerMessageHandler:n.Prism&&n.Prism.disableWorkerMessageHandler,util:{encode:function(e){return e instanceof i?new i(e.type,r.util.encode(e.content),e.alias):"Array"===r.util.type(e)?e.map(r.util.encode):e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).match(/\[object (\w+)\]/)[1]},objId:function(e){return e.__id||Object.defineProperty(e,"__id",{value:++t}),e.__id},clone:function(e,t){var n=r.util.type(e);switch(t=t||{},n){case"Object":if(t[r.util.objId(e)])return t[r.util.objId(e)];var i={};for(var o in t[r.util.objId(e)]=i,e)e.hasOwnProperty(o)&&(i[o]=r.util.clone(e[o],t));return i;case"Array":if(t[r.util.objId(e)])return t[r.util.objId(e)];i=[];return t[r.util.objId(e)]=i,e.forEach(function(e,n){i[n]=r.util.clone(e,t)}),i}return e}},languages:{extend:function(e,t){var n=r.util.clone(r.languages[e]);for(var i in t)n[i]=t[i];return n},insertBefore:function(e,t,n,i){var o=(i=i||r.languages)[e];if(2==arguments.length){for(var a in n=arguments[1])n.hasOwnProperty(a)&&(o[a]=n[a]);return o}var s={};for(var l in o)if(o.hasOwnProperty(l)){if(l==t)for(var a in n)n.hasOwnProperty(a)&&(s[a]=n[a]);s[l]=o[l]}return r.languages.DFS(r.languages,function(t,n){n===i[e]&&t!=e&&(this[t]=s)}),i[e]=s},DFS:function(e,t,n,i){for(var o in i=i||{},e)e.hasOwnProperty(o)&&(t.call(e,o,e[o],n||o),"Object"!==r.util.type(e[o])||i[r.util.objId(e[o])]?"Array"!==r.util.type(e[o])||i[r.util.objId(e[o])]||(i[r.util.objId(e[o])]=!0,r.languages.DFS(e[o],t,o,i)):(i[r.util.objId(e[o])]=!0,r.languages.DFS(e[o],t,null,i)))}},plugins:{},highlightAll:function(e,t){r.highlightAllUnder(document,e,t)},highlightAllUnder:function(e,t,n){var i={callback:n,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};r.hooks.run("before-highlightall",i);for(var o,a=i.elements||e.querySelectorAll(i.selector),s=0;o=a[s++];)r.highlightElement(o,!0===t,i.callback)},highlightElement:function(t,i,o){for(var a,s,l=t;l&&!e.test(l.className);)l=l.parentNode;l&&(a=(l.className.match(e)||[,""])[1].toLowerCase(),s=r.languages[a]),t.className=t.className.replace(e,"").replace(/\s+/g," ")+" language-"+a,t.parentNode&&(l=t.parentNode,/pre/i.test(l.nodeName)&&(l.className=l.className.replace(e,"").replace(/\s+/g," ")+" language-"+a));var u={element:t,language:a,grammar:s,code:t.textContent};if(r.hooks.run("before-sanity-check",u),!u.code||!u.grammar)return u.code&&(r.hooks.run("before-highlight",u),u.element.textContent=u.code,r.hooks.run("after-highlight",u)),void r.hooks.run("complete",u);if(r.hooks.run("before-highlight",u),i&&n.Worker){var c=new Worker(r.filename);c.onmessage=function(e){u.highlightedCode=e.data,r.hooks.run("before-insert",u),u.element.innerHTML=u.highlightedCode,o&&o.call(u.element),r.hooks.run("after-highlight",u),r.hooks.run("complete",u)},c.postMessage(JSON.stringify({language:u.language,code:u.code,immediateClose:!0}))}else u.highlightedCode=r.highlight(u.code,u.grammar,u.language),r.hooks.run("before-insert",u),u.element.innerHTML=u.highlightedCode,o&&o.call(t),r.hooks.run("after-highlight",u),r.hooks.run("complete",u)},highlight:function(e,t,n){var o={code:e,grammar:t,language:n};return r.hooks.run("before-tokenize",o),o.tokens=r.tokenize(o.code,o.grammar),r.hooks.run("after-tokenize",o),i.stringify(r.util.encode(o.tokens),o.language)},matchGrammar:function(e,t,n,i,o,a,s){var l=r.Token;for(var u in n)if(n.hasOwnProperty(u)&&n[u]){if(u==s)return;var c=n[u];c="Array"===r.util.type(c)?c:[c];for(var p=0;p<c.length;++p){var h=c[p],f=h.inside,d=!!h.lookbehind,g=!!h.greedy,m=0,y=h.alias;if(g&&!h.pattern.global){var v=h.pattern.toString().match(/[imuy]*$/)[0];h.pattern=RegExp(h.pattern.source,v+"g")}h=h.pattern||h;for(var _=i,b=o;_<t.length;b+=t[_].length,++_){var x=t[_];if(t.length>e.length)return;if(!(x instanceof l)){if(g&&_!=t.length-1){if(h.lastIndex=b,!(k=h.exec(e)))break;for(var w=k.index+(d?k[1].length:0),S=k.index+k[0].length,E=_,P=b,C=t.length;E<C&&(P<S||!t[E].type&&!t[E-1].greedy);++E)w>=(P+=t[E].length)&&(++_,b=P);if(t[_]instanceof l)continue;T=E-_,x=e.slice(b,P),k.index-=b}else{h.lastIndex=0;var k=h.exec(x),T=1}if(k){d&&(m=k[1]?k[1].length:0);S=(w=k.index+m)+(k=k[0].slice(m)).length;var A=x.slice(0,w),O=x.slice(S),I=[_,T];A&&(++_,b+=A.length,I.push(A));var R=new l(u,f?r.tokenize(k,f):k,y,k,g);if(I.push(R),O&&I.push(O),Array.prototype.splice.apply(t,I),1!=T&&r.matchGrammar(e,t,n,_,b,!0,u),a)break}else if(a)break}}}}},tokenize:function(e,t,n){var i=[e],o=t.rest;if(o){for(var a in o)t[a]=o[a];delete t.rest}return r.matchGrammar(e,i,t,0,0,!1),i},hooks:{all:{},add:function(e,t){var n=r.hooks.all;n[e]=n[e]||[],n[e].push(t)},run:function(e,t){var n=r.hooks.all[e];if(n&&n.length)for(var i,o=0;i=n[o++];)i(t)}}},i=r.Token=function(e,t,n,r,i){this.type=e,this.content=t,this.alias=n,this.length=0|(r||"").length,this.greedy=!!i};if(i.stringify=function(e,t,n){if("string"==typeof e)return e;if("Array"===r.util.type(e))return e.map(function(n){return i.stringify(n,t,e)}).join("");var o={type:e.type,content:i.stringify(e.content,t,n),tag:"span",classes:["token",e.type],attributes:{},language:t,parent:n};if(e.alias){var a="Array"===r.util.type(e.alias)?e.alias:[e.alias];Array.prototype.push.apply(o.classes,a)}r.hooks.run("wrap",o);var s=Object.keys(o.attributes).map(function(e){return e+'="'+(o.attributes[e]||"").replace(/"/g,"&quot;")+'"'}).join(" ");return"<"+o.tag+' class="'+o.classes.join(" ")+'"'+(s?" "+s:"")+">"+o.content+"</"+o.tag+">"},!n.document)return n.addEventListener?(r.disableWorkerMessageHandler||n.addEventListener("message",function(e){var t=JSON.parse(e.data),i=t.language,o=t.code,a=t.immediateClose;n.postMessage(r.highlight(o,r.languages[i],i)),a&&n.close()},!1),n.Prism):n.Prism;var o=document.currentScript||[].slice.call(document.getElementsByTagName("script")).pop();return o&&(r.filename=o.src,r.manual||o.hasAttribute("data-manual")||("loading"!==document.readyState?window.requestAnimationFrame?window.requestAnimationFrame(r.highlightAll):window.setTimeout(r.highlightAll,16):document.addEventListener("DOMContentLoaded",r.highlightAll))),n.Prism}();e.exports&&(e.exports=r),void 0!==t&&(t.Prism=r)}).call(this,n(31))},function(e,t,n){var r=n(445);e.exports=function isNaN(e){return r(e)&&e!=+e}},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(3),i=n(4),o=n(11),a=n(10),s=n(12),l=n(93),u=n(35),c=function(e){function Vector2(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Object(r.a)(this,Vector2),e=Object(o.a)(this,Object(a.a)(Vector2).call(this)),Array.isArray(t)&&1===arguments.length?e.copy(t):e.set(t,n),e}return Object(s.a)(Vector2,e),Object(i.a)(Vector2,[{key:"cross",value:function cross(e){return u.b(this,this,e),this.check()}},{key:"horizontalAngle",value:function horizontalAngle(){return Math.atan2(this.y,this.x)}},{key:"verticalAngle",value:function verticalAngle(){return Math.atan2(this.x,this.y)}},{key:"operation",value:function operation(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.apply(void 0,[this,this].concat(n)),this.check()}},{key:"ELEMENTS",get:function get(){return 2}}]),Vector2}(l.a)},function(e,t,n){e.exports=!n(59)&&!n(60)(function(){return 7!=Object.defineProperty(n(192)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var r=n(71),i=n(67).document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,n){var r=n(71);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=!1},function(e,t,n){var r=n(196);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var r=n(89),i=n(111),o=n(280)(!1),a=n(163)("IE_PROTO");e.exports=function(e,t){var n,s=i(e),l=0,u=[];for(n in s)n!=a&&r(s,n)&&u.push(n);for(;t.length>l;)r(s,n=t[l++])&&(~o(u,n)||u.push(n));return u}},function(e,t,n){var r=n(162);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function SheetsRegistry(){_classCallCheck(this,SheetsRegistry),this.registry=[]}return r(SheetsRegistry,[{key:"add",value:function add(e){var t=this.registry,n=e.options.index;if(-1===t.indexOf(e))if(0===t.length||n>=this.index)t.push(e);else for(var r=0;r<t.length;r++)if(t[r].options.index>n)return void t.splice(r,0,e)}},{key:"reset",value:function reset(){this.registry=[]}},{key:"remove",value:function remove(e){var t=this.registry.indexOf(e);this.registry.splice(t,1)}},{key:"toString",value:function toString(e){return this.registry.filter(function(e){return e.attached}).map(function(t){return t.toString(e)}).join("\n")}},{key:"index",get:function get(){return 0===this.registry.length?0:this.registry[this.registry.length-1].options.index}}]),SheetsRegistry}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n(286));t.default=function(e){return e&&e[r.default]&&e===e[r.default]()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function linkRule(e,t){e.renderable=t,e.rules&&t.cssRules&&e.rules.link(t.cssRules)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=_interopRequireDefault(n(72)),i=(_interopRequireDefault(n(204)),_interopRequireDefault(n(289)));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}t.default=function(){var e=0;return function(t,n){(e+=1)>1e10&&(0,r.default)(!1,"[JSS] You might have a memory leak. Rule counter is at %s.",e);var o="c",a="";return n&&(o=n.options.classNamePrefix||"c",null!=n.options.jss.id&&(a+=n.options.jss.id)),""+o+i.default+a+e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),o=_interopRequireDefault(n(202)),a=_interopRequireDefault(n(102));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function(){function StyleSheet(e,t){var n=this;for(var i in _classCallCheck(this,StyleSheet),this.update=function(e,t){return"string"==typeof e?n.rules.update(e,t):n.rules.update(e),n},this.attached=!1,this.deployed=!1,this.linked=!1,this.classes={},this.options=r({},t,{sheet:this,parent:this,classes:this.classes}),this.renderer=new t.Renderer(this),this.rules=new a.default(this.options),e)this.rules.add(i,e[i]);this.rules.process()}return i(StyleSheet,[{key:"attach",value:function attach(){return this.attached?this:(this.deployed||this.deploy(),this.renderer.attach(),!this.linked&&this.options.link&&this.link(),this.attached=!0,this)}},{key:"detach",value:function detach(){return this.attached?(this.renderer.detach(),this.attached=!1,this):this}},{key:"addRule",value:function addRule(e,t,n){var r=this.queue;this.attached&&!r&&(this.queue=[]);var i=this.rules.add(e,t,n);return this.options.jss.plugins.onProcessRule(i),this.attached?this.deployed?(r?r.push(i):(this.insertRule(i),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0)),i):i:(this.deployed=!1,i)}},{key:"insertRule",value:function insertRule(e){var t=this.renderer.insertRule(e);t&&this.options.link&&(0,o.default)(e,t)}},{key:"addRules",value:function addRules(e,t){var n=[];for(var r in e)n.push(this.addRule(r,e[r],t));return n}},{key:"getRule",value:function getRule(e){return this.rules.get(e)}},{key:"deleteRule",value:function deleteRule(e){var t=this.rules.get(e);return!!t&&(this.rules.remove(t),!this.attached||!t.renderable||this.renderer.deleteRule(t.renderable))}},{key:"indexOf",value:function indexOf(e){return this.rules.indexOf(e)}},{key:"deploy",value:function deploy(){return this.renderer.deploy(),this.deployed=!0,this}},{key:"link",value:function link(){var e=this.renderer.getRules();return e&&this.rules.link(e),this.linked=!0,this}},{key:"toString",value:function toString(e){return this.rules.toString(e)}}]),StyleSheet}();t.default=s},function(e,t,n){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function toObject(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function shouldUseNative(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,a,s=toObject(e),l=1;l<arguments.length;l++){for(var u in n=Object(arguments[l]))i.call(n,u)&&(s[u]=n[u]);if(r){a=r(n);for(var c=0;c<a.length;c++)o.call(n,a[c])&&(s[a[c]]=n[a[c]])}}return s}},function(e,t,n){"use strict";var r=n(53),i=n(311),o=n(117);n(118)("search",1,function(e,t,n,a){return[function search(n){var r=e(this),i=null==n?void 0:n[t];return void 0!==i?i.call(n,r):new RegExp(n)[t](String(r))},function(e){var t=a(n,e,this);if(t.done)return t.value;var s=r(e),l=String(this),u=s.lastIndex;i(u,0)||(s.lastIndex=0);var c=o(s,l);return i(s.lastIndex,u)||(s.lastIndex=u),null===c?-1:c.index}]})},function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(this,n(31))},function(e,t){var n=Function.prototype.toString;e.exports=function toSource(e){if(null!=e){try{return n.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},function(e,t,n){var r=n(174),i=n(103);e.exports=function assignMergeValue(e,t,n){(void 0===n||i(e[t],n))&&(void 0!==n||t in e)||r(e,t,n)}},function(e,t,n){var r=n(82),i=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=i},function(e,t,n){var r=n(346)();e.exports=r},function(e,t,n){var r=n(51).Uint8Array;e.exports=r},function(e,t,n){var r=n(214)(Object.getPrototypeOf,Object);e.exports=r},function(e,t){e.exports=function overArg(e,t){return function(n){return e(t(n))}}},function(e,t){e.exports=function safeGet(e,t){if("__proto__"!=t)return e[t]}},function(e,t,n){var r=n(217),i=n(365),o=n(74);e.exports=function keysIn(e){return o(e)?r(e,!0):i(e)}},function(e,t,n){var r=n(364),i=n(127),o=n(55),a=n(128),s=n(177),l=n(129),u=Object.prototype.hasOwnProperty;e.exports=function arrayLikeKeys(e,t){var n=o(e),c=!n&&i(e),p=!n&&!c&&a(e),h=!n&&!c&&!p&&l(e),f=n||c||p||h,d=f?r(e.length,String):[],g=d.length;for(var m in e)!t&&!u.call(e,m)||f&&("length"==m||p&&("offset"==m||"parent"==m)||h&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||s(m,g))||d.push(m);return d}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return PropsRenderer});var core_js_modules_es6_object_assign__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(25),core_js_modules_es6_object_assign__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es6_object_assign__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(23),core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_1__),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1),react__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__),prop_types__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(2),prop_types__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_3__),react_group__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(105),react_group__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(react_group__WEBPACK_IMPORTED_MODULE_4__),javascript_stringify__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(246),javascript_stringify__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(javascript_stringify__WEBPACK_IMPORTED_MODULE_5__),rsg_components_Arguments__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(156),rsg_components_Argument__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(94),rsg_components_Code__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(99),rsg_components_JsDoc__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(96),rsg_components_Markdown__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(32),rsg_components_Name__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(84),rsg_components_Type__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(79),rsg_components_Text__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(65),rsg_components_Para__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(95),rsg_components_Table__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(158),_util__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(40);function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function renderType(e){if(!e)return"unknown";var t=e.name;switch(t){case"arrayOf":return e.value.name+"[]";case"objectOf":return"{"+renderType(e.value)+"}";case"instanceOf":return e.value;default:return t}}function renderFlowType(e){if(!e)return"unknown";var t=e.name,n=e.raw,r=e.value;switch(t){case"enum":return t;case"literal":return r;case"signature":return renderComplexType(e.type,n);case"union":case"tuple":return renderComplexType(t,n);default:return n||t}}function renderComplexType(e,t){return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(rsg_components_Text__WEBPACK_IMPORTED_MODULE_13__.a,{size:"small",underlined:!0,title:t},react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(rsg_components_Type__WEBPACK_IMPORTED_MODULE_12__.a,null,e))}function renderEnum(e){if(!Array.isArray(Object(_util__WEBPACK_IMPORTED_MODULE_16__.a)(e).value))return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("span",null,Object(_util__WEBPACK_IMPORTED_MODULE_16__.a)(e).value);var t=Object(_util__WEBPACK_IMPORTED_MODULE_16__.a)(e).value.map(function(e){var t=e.value;return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(rsg_components_Code__WEBPACK_IMPORTED_MODULE_8__.a,{key:t},Object(_util__WEBPACK_IMPORTED_MODULE_16__.b)(Object(_util__WEBPACK_IMPORTED_MODULE_16__.c)(t)))});return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("span",null,"One of: ",react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_group__WEBPACK_IMPORTED_MODULE_4___default.a,{separator:", "},t))}function renderShape(e){var t=[];for(var n in e){var r=e[n],i=renderDefault(r),o=r.description;t.push(react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div",{key:n},react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(rsg_components_Name__WEBPACK_IMPORTED_MODULE_11__.a,null,n),": ",react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(rsg_components_Type__WEBPACK_IMPORTED_MODULE_12__.a,null,renderType(r)),i&&" — ",i,o&&" — ",o&&react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(rsg_components_Markdown__WEBPACK_IMPORTED_MODULE_10__.a,{text:o,inline:!0})))}return t}var defaultValueBlacklist=["null","undefined"];function renderDefault(prop){if(prop.defaultValue){if(prop.type||prop.flowType){var propName=prop.type?prop.type.name:prop.flowType.type;if(defaultValueBlacklist.indexOf(prop.defaultValue.value)>-1)return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(rsg_components_Code__WEBPACK_IMPORTED_MODULE_8__.a,null,Object(_util__WEBPACK_IMPORTED_MODULE_16__.b)(Object(_util__WEBPACK_IMPORTED_MODULE_16__.c)(prop.defaultValue.value)));if("func"===propName||"function"===propName)return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(rsg_components_Text__WEBPACK_IMPORTED_MODULE_13__.a,{size:"small",color:"light",underlined:!0,title:Object(_util__WEBPACK_IMPORTED_MODULE_16__.b)(Object(_util__WEBPACK_IMPORTED_MODULE_16__.c)(prop.defaultValue.value))},"Function");if("shape"===propName||"object"===propName)try{var object=eval("("+prop.defaultValue.value+")");return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(rsg_components_Text__WEBPACK_IMPORTED_MODULE_13__.a,{size:"small",color:"light",underlined:!0,title:javascript_stringify__WEBPACK_IMPORTED_MODULE_5___default()(object,null,2)},"Shape")}catch(e){return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(rsg_components_Text__WEBPACK_IMPORTED_MODULE_13__.a,{size:"small",color:"light",underlined:!0,title:prop.defaultValue.value},"Shape")}}return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(rsg_components_Code__WEBPACK_IMPORTED_MODULE_8__.a,null,Object(_util__WEBPACK_IMPORTED_MODULE_16__.b)(Object(_util__WEBPACK_IMPORTED_MODULE_16__.c)(prop.defaultValue.value)))}return prop.required?react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(rsg_components_Text__WEBPACK_IMPORTED_MODULE_13__.a,{size:"small",color:"light"},"Required"):""}function renderDescription(e){var t=e.description,n=e.tags,r=void 0===n?{}:n,i=renderExtra(e),o=[].concat(r.arg||[],r.argument||[],r.param||[]),a=r.return&&r.return[0]||r.returns&&r.returns[0];return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div",null,t&&react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(rsg_components_Markdown__WEBPACK_IMPORTED_MODULE_10__.a,{text:t}),i&&react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(rsg_components_Para__WEBPACK_IMPORTED_MODULE_14__.a,null,i),react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(rsg_components_JsDoc__WEBPACK_IMPORTED_MODULE_9__.a,r),o.length>0&&react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(rsg_components_Arguments__WEBPACK_IMPORTED_MODULE_6__.a,{args:o,heading:!0}),a&&react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(rsg_components_Argument__WEBPACK_IMPORTED_MODULE_7__.a,_extends({},a,{returns:!0})))}function renderExtra(e){var t=Object(_util__WEBPACK_IMPORTED_MODULE_16__.a)(e);if(!t)return null;switch(t.name){case"enum":return renderEnum(e);case"union":return renderUnion(e);case"shape":return renderShape(e.type.value);case"arrayOf":case"objectOf":return"shape"===t.value.name?renderShape(e.type.value.value):null;default:return null}}function renderUnion(e){var t=Object(_util__WEBPACK_IMPORTED_MODULE_16__.a)(e);if(!Array.isArray(t.value))return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("span",null,t.value);var n=t.value.map(function(e,t){return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(rsg_components_Type__WEBPACK_IMPORTED_MODULE_12__.a,{key:e.name+"-"+t},renderType(e))});return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("span",null,"One of type: ",react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_group__WEBPACK_IMPORTED_MODULE_4___default.a,{separator:", "},n))}function renderName(e){var t=e.name,n=e.tags,r=void 0===n?{}:n;return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(rsg_components_Name__WEBPACK_IMPORTED_MODULE_11__.a,{deprecated:!!r.deprecated},t)}function renderTypeColumn(e){return e.flowType?react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(rsg_components_Type__WEBPACK_IMPORTED_MODULE_12__.a,null,renderFlowType(Object(_util__WEBPACK_IMPORTED_MODULE_16__.a)(e))):react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(rsg_components_Type__WEBPACK_IMPORTED_MODULE_12__.a,null,renderType(Object(_util__WEBPACK_IMPORTED_MODULE_16__.a)(e)))}function getRowKey(e){return e.name}var columns=[{caption:"Prop name",render:renderName},{caption:"Type",render:renderTypeColumn},{caption:"Default",render:renderDefault},{caption:"Description",render:renderDescription}];function PropsRenderer(e){var t=e.props;return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(rsg_components_Table__WEBPACK_IMPORTED_MODULE_15__.a,{columns:columns,rows:t,getRowKey:getRowKey})}PropsRenderer.propTypes={props:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.array.isRequired}},function(e,t,n){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var r=n(380),i=n(381),o=n(382);function kMaxLength(){return Buffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function createBuffer(e,t){if(kMaxLength()<t)throw new RangeError("Invalid typed array length");return Buffer.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=Buffer.prototype:(null===e&&(e=new Buffer(t)),e.length=t),e}function Buffer(e,t,n){if(!(Buffer.TYPED_ARRAY_SUPPORT||this instanceof Buffer))return new Buffer(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return allocUnsafe(this,e)}return from(this,e,t,n)}function from(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?fromArrayBuffer(e,t,n,r):"string"==typeof t?fromString(e,t,n):fromObject(e,t)}function assertSize(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function alloc(e,t,n,r){return assertSize(t),t<=0?createBuffer(e,t):void 0!==n?"string"==typeof r?createBuffer(e,t).fill(n,r):createBuffer(e,t).fill(n):createBuffer(e,t)}function allocUnsafe(e,t){if(assertSize(t),e=createBuffer(e,t<0?0:0|checked(t)),!Buffer.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function fromString(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!Buffer.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|byteLength(t,n),i=(e=createBuffer(e,r)).write(t,n);return i!==r&&(e=e.slice(0,i)),e}function fromArrayLike(e,t){var n=t.length<0?0:0|checked(t.length);e=createBuffer(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function fromArrayBuffer(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),Buffer.TYPED_ARRAY_SUPPORT?(e=t).__proto__=Buffer.prototype:e=fromArrayLike(e,t),e}function fromObject(e,t){if(Buffer.isBuffer(t)){var n=0|checked(t.length);return 0===(e=createBuffer(e,n)).length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?createBuffer(e,0):fromArrayLike(e,t);if("Buffer"===t.type&&o(t.data))return fromArrayLike(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function checked(e){if(e>=kMaxLength())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+kMaxLength().toString(16)+" bytes");return 0|e}function byteLength(e,t){if(Buffer.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return utf8ToBytes(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return base64ToBytes(e).length;default:if(r)return utf8ToBytes(e).length;t=(""+t).toLowerCase(),r=!0}}function slowToString(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return hexSlice(this,t,n);case"utf8":case"utf-8":return utf8Slice(this,t,n);case"ascii":return asciiSlice(this,t,n);case"latin1":case"binary":return latin1Slice(this,t,n);case"base64":return base64Slice(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function swap(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function bidirectionalIndexOf(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=Buffer.from(t,r)),Buffer.isBuffer(t))return 0===t.length?-1:arrayIndexOf(e,t,n,r,i);if("number"==typeof t)return t&=255,Buffer.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):arrayIndexOf(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(e,t,n,r,i){var o,a=1,s=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,l/=2,n/=2}function read(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var u=-1;for(o=n;o<s;o++)if(read(e,o)===read(t,-1===u?0:o-u)){if(-1===u&&(u=o),o-u+1===l)return u*a}else-1!==u&&(o-=o-u),u=-1}else for(n+l>s&&(n=s-l),o=n;o>=0;o--){for(var c=!0,p=0;p<l;p++)if(read(e,o+p)!==read(t,p)){c=!1;break}if(c)return o}return-1}function hexWrite(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[n+a]=s}return a}function utf8Write(e,t,n,r){return blitBuffer(utf8ToBytes(t,e.length-n),e,n,r)}function asciiWrite(e,t,n,r){return blitBuffer(asciiToBytes(t),e,n,r)}function latin1Write(e,t,n,r){return asciiWrite(e,t,n,r)}function base64Write(e,t,n,r){return blitBuffer(base64ToBytes(t),e,n,r)}function ucs2Write(e,t,n,r){return blitBuffer(utf16leToBytes(t,e.length-n),e,n,r)}function base64Slice(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function utf8Slice(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,a,s,l,u=e[i],c=null,p=u>239?4:u>223?3:u>191?2:1;if(i+p<=n)switch(p){case 1:u<128&&(c=u);break;case 2:128==(192&(o=e[i+1]))&&(l=(31&u)<<6|63&o)>127&&(c=l);break;case 3:o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&(l=(15&u)<<12|(63&o)<<6|63&a)>2047&&(l<55296||l>57343)&&(c=l);break;case 4:o=e[i+1],a=e[i+2],s=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(l=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&l<1114112&&(c=l)}null===c?(c=65533,p=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),i+=p}return decodeCodePointsArray(r)}t.Buffer=Buffer,t.SlowBuffer=function SlowBuffer(e){+e!=e&&(e=0);return Buffer.alloc(+e)},t.INSPECT_MAX_BYTES=50,Buffer.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function typedArraySupport(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=kMaxLength(),Buffer.poolSize=8192,Buffer._augment=function(e){return e.__proto__=Buffer.prototype,e},Buffer.from=function(e,t,n){return from(null,e,t,n)},Buffer.TYPED_ARRAY_SUPPORT&&(Buffer.prototype.__proto__=Uint8Array.prototype,Buffer.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&Buffer[Symbol.species]===Buffer&&Object.defineProperty(Buffer,Symbol.species,{value:null,configurable:!0})),Buffer.alloc=function(e,t,n){return alloc(null,e,t,n)},Buffer.allocUnsafe=function(e){return allocUnsafe(null,e)},Buffer.allocUnsafeSlow=function(e){return allocUnsafe(null,e)},Buffer.isBuffer=function isBuffer(e){return!(null==e||!e._isBuffer)},Buffer.compare=function compare(e,t){if(!Buffer.isBuffer(e)||!Buffer.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},Buffer.isEncoding=function isEncoding(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function concat(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return Buffer.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=Buffer.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var a=e[n];if(!Buffer.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},Buffer.byteLength=byteLength,Buffer.prototype._isBuffer=!0,Buffer.prototype.swap16=function swap16(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)swap(this,t,t+1);return this},Buffer.prototype.swap32=function swap32(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)swap(this,t,t+3),swap(this,t+1,t+2);return this},Buffer.prototype.swap64=function swap64(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)swap(this,t,t+7),swap(this,t+1,t+6),swap(this,t+2,t+5),swap(this,t+3,t+4);return this},Buffer.prototype.toString=function toString(){var e=0|this.length;return 0===e?"":0===arguments.length?utf8Slice(this,0,e):slowToString.apply(this,arguments)},Buffer.prototype.equals=function equals(e){if(!Buffer.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===Buffer.compare(this,e)},Buffer.prototype.inspect=function inspect(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},Buffer.prototype.compare=function compare(e,t,n,r,i){if(!Buffer.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0),s=Math.min(o,a),l=this.slice(r,i),u=e.slice(t,n),c=0;c<s;++c)if(l[c]!==u[c]){o=l[c],a=u[c];break}return o<a?-1:a<o?1:0},Buffer.prototype.includes=function includes(e,t,n){return-1!==this.indexOf(e,t,n)},Buffer.prototype.indexOf=function indexOf(e,t,n){return bidirectionalIndexOf(this,e,t,n,!0)},Buffer.prototype.lastIndexOf=function lastIndexOf(e,t,n){return bidirectionalIndexOf(this,e,t,n,!1)},Buffer.prototype.write=function write(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return hexWrite(this,e,t,n);case"utf8":case"utf-8":return utf8Write(this,e,t,n);case"ascii":return asciiWrite(this,e,t,n);case"latin1":case"binary":return latin1Write(this,e,t,n);case"base64":return base64Write(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},Buffer.prototype.toJSON=function toJSON(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var a=4096;function decodeCodePointsArray(e){var t=e.length;if(t<=a)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=a));return n}function asciiSlice(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function latin1Slice(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function hexSlice(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=toHex(e[o]);return i}function utf16leSlice(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function checkOffset(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function checkInt(e,t,n,r,i,o){if(!Buffer.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function objectWriteUInt16(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function objectWriteUInt32(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function checkIEEE754(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function writeFloat(e,t,n,r,o){return o||checkIEEE754(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function writeDouble(e,t,n,r,o){return o||checkIEEE754(e,0,n,8),i.write(e,t,n,r,52,8),n+8}Buffer.prototype.slice=function slice(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),Buffer.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=Buffer.prototype;else{var i=t-e;n=new Buffer(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+e]}return n},Buffer.prototype.readUIntLE=function readUIntLE(e,t,n){e|=0,t|=0,n||checkOffset(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},Buffer.prototype.readUIntBE=function readUIntBE(e,t,n){e|=0,t|=0,n||checkOffset(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},Buffer.prototype.readUInt8=function readUInt8(e,t){return t||checkOffset(e,1,this.length),this[e]},Buffer.prototype.readUInt16LE=function readUInt16LE(e,t){return t||checkOffset(e,2,this.length),this[e]|this[e+1]<<8},Buffer.prototype.readUInt16BE=function readUInt16BE(e,t){return t||checkOffset(e,2,this.length),this[e]<<8|this[e+1]},Buffer.prototype.readUInt32LE=function readUInt32LE(e,t){return t||checkOffset(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},Buffer.prototype.readUInt32BE=function readUInt32BE(e,t){return t||checkOffset(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},Buffer.prototype.readIntLE=function readIntLE(e,t,n){e|=0,t|=0,n||checkOffset(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},Buffer.prototype.readIntBE=function readIntBE(e,t,n){e|=0,t|=0,n||checkOffset(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},Buffer.prototype.readInt8=function readInt8(e,t){return t||checkOffset(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},Buffer.prototype.readInt16LE=function readInt16LE(e,t){t||checkOffset(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},Buffer.prototype.readInt16BE=function readInt16BE(e,t){t||checkOffset(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},Buffer.prototype.readInt32LE=function readInt32LE(e,t){return t||checkOffset(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},Buffer.prototype.readInt32BE=function readInt32BE(e,t){return t||checkOffset(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},Buffer.prototype.readFloatLE=function readFloatLE(e,t){return t||checkOffset(e,4,this.length),i.read(this,e,!0,23,4)},Buffer.prototype.readFloatBE=function readFloatBE(e,t){return t||checkOffset(e,4,this.length),i.read(this,e,!1,23,4)},Buffer.prototype.readDoubleLE=function readDoubleLE(e,t){return t||checkOffset(e,8,this.length),i.read(this,e,!0,52,8)},Buffer.prototype.readDoubleBE=function readDoubleBE(e,t){return t||checkOffset(e,8,this.length),i.read(this,e,!1,52,8)},Buffer.prototype.writeUIntLE=function writeUIntLE(e,t,n,r){(e=+e,t|=0,n|=0,r)||checkInt(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},Buffer.prototype.writeUIntBE=function writeUIntBE(e,t,n,r){(e=+e,t|=0,n|=0,r)||checkInt(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},Buffer.prototype.writeUInt8=function writeUInt8(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,1,255,0),Buffer.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},Buffer.prototype.writeUInt16LE=function writeUInt16LE(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):objectWriteUInt16(this,e,t,!0),t+2},Buffer.prototype.writeUInt16BE=function writeUInt16BE(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):objectWriteUInt16(this,e,t,!1),t+2},Buffer.prototype.writeUInt32LE=function writeUInt32LE(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):objectWriteUInt32(this,e,t,!0),t+4},Buffer.prototype.writeUInt32BE=function writeUInt32BE(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):objectWriteUInt32(this,e,t,!1),t+4},Buffer.prototype.writeIntLE=function writeIntLE(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);checkInt(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},Buffer.prototype.writeIntBE=function writeIntBE(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);checkInt(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},Buffer.prototype.writeInt8=function writeInt8(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,1,127,-128),Buffer.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},Buffer.prototype.writeInt16LE=function writeInt16LE(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):objectWriteUInt16(this,e,t,!0),t+2},Buffer.prototype.writeInt16BE=function writeInt16BE(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):objectWriteUInt16(this,e,t,!1),t+2},Buffer.prototype.writeInt32LE=function writeInt32LE(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,4,2147483647,-2147483648),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):objectWriteUInt32(this,e,t,!0),t+4},Buffer.prototype.writeInt32BE=function writeInt32BE(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):objectWriteUInt32(this,e,t,!1),t+4},Buffer.prototype.writeFloatLE=function writeFloatLE(e,t,n){return writeFloat(this,e,t,!0,n)},Buffer.prototype.writeFloatBE=function writeFloatBE(e,t,n){return writeFloat(this,e,t,!1,n)},Buffer.prototype.writeDoubleLE=function writeDoubleLE(e,t,n){return writeDouble(this,e,t,!0,n)},Buffer.prototype.writeDoubleBE=function writeDoubleBE(e,t,n){return writeDouble(this,e,t,!1,n)},Buffer.prototype.copy=function copy(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&n<t&&t<r)for(i=o-1;i>=0;--i)e[i+t]=this[i+n];else if(o<1e3||!Buffer.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},Buffer.prototype.fill=function fill(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!Buffer.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var a=Buffer.isBuffer(e)?e:utf8ToBytes(new Buffer(e,r).toString()),s=a.length;for(o=0;o<n-t;++o)this[o+t]=a[o%s]}return this};var s=/[^+\/0-9A-Za-z-_]/g;function base64clean(e){if((e=stringtrim(e).replace(s,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}function stringtrim(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function toHex(e){return e<16?"0"+e.toString(16):e.toString(16)}function utf8ToBytes(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function asciiToBytes(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function utf16leToBytes(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)r=(n=e.charCodeAt(a))>>8,i=n%256,o.push(i),o.push(r);return o}function base64ToBytes(e){return r.toByteArray(base64clean(e))}function blitBuffer(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}}).call(this,n(31))},function(e,t,n){var r=n(70).f,i=n(89),o=n(54)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},function(e,t,n){var r=n(100),i=n(108),o=n(60);e.exports=function(e,t){var n=(i.Object||{})[e]||Object[e],a={};a[e]=t(n),r(r.S+r.F*o(function(){n(1)}),"Object",a)}},function(e,t){e.exports=function arrayMap(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}},function(e,t,n){var r=n(393),i=n(73);e.exports=function baseIsEqual(e,t,n,o,a){return e===t||(null==e||null==t||!i(e)&&!i(t)?e!=e&&t!=t:r(e,t,n,o,baseIsEqual,a))}},function(e,t,n){var r=n(394),i=n(397),o=n(398),a=1,s=2;e.exports=function equalArrays(e,t,n,l,u,c){var p=n&a,h=e.length,f=t.length;if(h!=f&&!(p&&f>h))return!1;var d=c.get(e);if(d&&c.get(t))return d==t;var g=-1,m=!0,y=n&s?new r:void 0;for(c.set(e,t),c.set(t,e);++g<h;){var v=e[g],_=t[g];if(l)var b=p?l(_,v,g,t,e,c):l(v,_,g,e,t,c);if(void 0!==b){if(b)continue;m=!1;break}if(y){if(!i(t,function(e,t){if(!o(y,t)&&(v===e||u(v,e,n,l,c)))return y.push(t)})){m=!1;break}}else if(v!==_&&!u(v,_,n,l,c)){m=!1;break}}return c.delete(e),c.delete(t),m}},function(e,t,n){var r=n(126),i=n(409),o=Object.prototype.hasOwnProperty;e.exports=function baseKeys(e){if(!r(e))return i(e);var t=[];for(var n in Object(e))o.call(e,n)&&"constructor"!=n&&t.push(n);return t}},function(e,t,n){var r=n(410),i=n(171),o=n(411),a=n(412),s=n(413),l=n(83),u=n(208),c=u(r),p=u(i),h=u(o),f=u(a),d=u(s),g=l;(r&&"[object DataView]"!=g(new r(new ArrayBuffer(1)))||i&&"[object Map]"!=g(new i)||o&&"[object Promise]"!=g(o.resolve())||a&&"[object Set]"!=g(new a)||s&&"[object WeakMap]"!=g(new s))&&(g=function(e){var t=l(e),n="[object Object]"==t?e.constructor:void 0,r=n?u(n):"";if(r)switch(r){case c:return"[object DataView]";case p:return"[object Map]";case h:return"[object Promise]";case f:return"[object Set]";case d:return"[object WeakMap]"}return t}),e.exports=g},function(e,t,n){var r=n(61);e.exports=function isStrictComparable(e){return e==e&&!r(e)}},function(e,t){e.exports=function matchesStrictComparable(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in Object(n))}}},function(e,t,n){var r=n(230),i=n(132);e.exports=function baseGet(e,t){for(var n=0,o=(t=r(t,e)).length;null!=e&&n<o;)e=e[i(t[n++])];return n&&n==o?e:void 0}},function(e,t,n){var r=n(55),i=n(181),o=n(416),a=n(231);e.exports=function castPath(e,t){return r(e)?e:i(e,t)?[e]:o(a(e))}},function(e,t,n){var r=n(418);e.exports=function toString(e){return null==e?"":r(e)}},function(e,t,n){var r=n(71),i=n(162),o=n(54)("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==i(e))}},function(e,t,n){var r=n(67),i=n(431),o=n(70).f,a=n(434).f,s=n(232),l=n(119),u=r.RegExp,c=u,p=u.prototype,h=/a/g,f=/a/g,d=new u(h)!==h;if(n(59)&&(!d||n(60)(function(){return f[n(54)("match")]=!1,u(h)!=h||u(f)==f||"/a/i"!=u(h,"i")}))){u=function RegExp(e,t){var n=this instanceof u,r=s(e),o=void 0===t;return!n&&r&&e.constructor===u&&o?e:i(d?new c(r&&!o?e.source:e,t):c((r=e instanceof u)?e.source:e,r&&o?l.call(e):t),n?this:p,u)};for(var g=function(e){e in u||o(u,e,{configurable:!0,get:function(){return c[e]},set:function(t){c[e]=t}})},m=a(c),y=0;m.length>y;)g(m[y++]);p.constructor=u,u.prototype=p,n(88)(r,"RegExp",u)}n(435)("RegExp")},function(e,t,n){var r=n(61),i=n(131),o=NaN,a=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,u=/^0o[0-7]+$/i,c=parseInt;e.exports=function toNumber(e){if("number"==typeof e)return e;if(i(e))return o;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(a,"");var n=l.test(e);return n||u.test(e)?c(e.slice(2),n?2:8):s.test(e)?o:+e}},function(e,t,n){"use strict";n(437);var r=n(53),i=n(119),o=n(59),a=/./.toString,s=function(e){n(88)(RegExp.prototype,"toString",e,!0)};n(60)(function(){return"/a/b"!=a.call({source:"a",flags:"b"})})?s(function toString(){var e=r(this);return"/".concat(e.source,"/","flags"in e?e.flags:!o&&e instanceof RegExp?i.call(e):void 0)}):"toString"!=a.name&&s(function toString(){return a.call(this)})},function(e,t,n){"use strict";var r=n(53),i=n(112),o=n(169),a=n(117);n(118)("match",1,function(e,t,n,s){return[function match(n){var r=e(this),i=null==n?void 0:n[t];return void 0!==i?i.call(n,r):new RegExp(n)[t](String(r))},function(e){var t=s(n,e,this);if(t.done)return t.value;var l=r(e),u=String(this);if(!l.global)return a(l,u);var c=l.unicode;l.lastIndex=0;for(var p,h=[],f=0;null!==(p=a(l,u));){var d=String(p[0]);h[f]=d,""===d&&(l.lastIndex=o(u,i(l.lastIndex),c)),f++}return 0===f?null:h}]})},function(e,t,n){"use strict";(function(e){var t,r=n(0),i=n(264);function assert(e,t){if(!e)throw new Error(t||"luma.gl: assertion failed.")}function isWebGL2(e){return e&&!0}function getExtensionData(e,t){return{webgl2:isWebGL2(e),ext:e.getExtension(t)}}var o=(t={},Object(r.a)(t,"OES_vertex_array_object",{meta:{suffix:"OES"},createVertexArray:function createVertexArray(){assert(!1,"VertexArray requires WebGL2 or OES_vertex_array_object extension")},deleteVertexArray:function deleteVertexArray(){},bindVertexArray:function bindVertexArray(){},isVertexArray:function isVertexArray(){return!1}}),Object(r.a)(t,"ANGLE_instanced_arrays",{meta:{suffix:"ANGLE"},vertexAttribDivisor:function vertexAttribDivisor(e,t){assert(0===t,"WebGL instanced rendering not supported")},drawElementsInstanced:function drawElementsInstanced(){},drawArraysInstanced:function drawArraysInstanced(){}}),Object(r.a)(t,"WEBGL_draw_buffers",{meta:{suffix:"WEBGL"},drawBuffers:function drawBuffers(){assert(!1)}}),Object(r.a)(t,"EXT_disjoint_timer_query",{meta:{suffix:"EXT"},createQuery:function createQuery(){assert(!1)},deleteQuery:function deleteQuery(){assert(!1)},beginQuery:function beginQuery(){assert(!1)},endQuery:function endQuery(){},getQuery:function getQuery(e,t){return this.getQueryObject(e,t)},getQueryParameter:function getQueryParameter(e,t){return this.getQueryObject(e,t)},queryCounter:function queryCounter(){},getQueryObject:function getQueryObject(){}}),Object(r.a)(t,"EXT_disjoint_timer_query_webgl2",{meta:{suffix:"EXT"},queryCounter:null}),Object(r.a)(t,"OVERRIDES",{readBuffer:function readBuffer(e,t,n){isWebGL2(e)&&t(n)},getVertexAttrib:function getVertexAttrib(e,t,n,r){var i,o=getExtensionData(e,"ANGLE_instanced_arrays"),a=o.webgl2,s=o.ext;switch(r){case 35069:i=!!a&&void 0;break;case 35070:i=a||s?void 0:0}return void 0!==i?i:t(n,r)},getProgramParameter:function getProgramParameter(e,t,n,r){if(!isWebGL2(e))switch(r){case 35967:return 35981;case 35971:case 35382:return 0}return t(n,r)},getInternalformatParameter:function getInternalformatParameter(e,t,n,r,i){if(!isWebGL2(e))switch(i){case 32937:return new Int32Array([0])}return e.getInternalformatParameter(n,r,i)},getTexParameter:function getTexParameter(e,t,n,r){switch(r){case 34046:var i=e.luma.extensions.EXT_texture_filter_anisotropic;r=i&&i.TEXTURE_MAX_ANISOTROPY_EXT||34046}return t(n,r)},getParameter:i.a,hint:function hint(e,t,n,r){return t(n,r)}}),t);function initializeExtensions(e){e.luma.extensions={};var t=e.getSupportedExtensions()||[],n=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;e.luma[s]=e.getExtension(s)}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}}function polyfillExtension(e,t){var n=t.extension,r=t.target,i=t.target2,a=o[n];assert(a);var s=a.meta,l=(void 0===s?{}:s).suffix,u=void 0===l?"":l,c=e.getExtension(n);Object.keys(a).forEach(function(t){var n="".concat(t).concat(u),o=null;"meta"===t||"function"==typeof e[t]||(c&&"function"==typeof c[n]?o=function polyfill(){return c[n].apply(c,arguments)}:"function"==typeof a[t]&&(o=a[t].bind(r))),o&&(r[t]=o,i[t]=o)})}function installOverrides(e,t){var n=t.target,r=t.target2,i=o.OVERRIDES;Object.keys(i).forEach(function(t){if("function"==typeof i[t]){var o=e[t]?e[t].bind(e):function(){},a=i[t].bind(null,e,o);n[t]=a,r[t]=a}})}(void 0!==e?e:window).polyfillContext=function polyfillContext(e){if(e.luma=e.luma||{},initializeExtensions(e),!e.luma.polyfilled){for(var t in o)"overrides"!==t&&polyfillExtension(e,{extension:t,target:e.luma,target2:e});installOverrides(e,{target:e.luma,target2:e}),e.luma.polyfilled=!0}return e}}).call(this,n(31))},function(e,t,n){"use strict";function symbolObservablePonyfill(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}n.d(t,"a",function(){return symbolObservablePonyfill})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();t.default=function jssGlobal(){return{onCreateRule:function onCreateRule(e,t,n){if(e===a)return new l(e,t,n);if("@"===e[0]&&e.substr(0,s.length)===s)return new u(e,t,n);var r=n.parent;r&&("global"!==r.type&&"global"!==r.options.parent.type||(n.global=!0));n.global&&(n.selector=e);return null},onProcessRule:function onProcessRule(e){if("style"!==e.type)return;handleNestedGlobalContainerRule(e),handlePrefixedGlobalRule(e)}}};var o=n(184);function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a="@global",s="@global ",l=function(){function GlobalContainerRule(e,t,n){for(var i in _classCallCheck(this,GlobalContainerRule),this.type="global",this.key=e,this.options=n,this.rules=new o.RuleList(r({},n,{parent:this})),t)this.rules.add(i,t[i],{selector:i});this.rules.process()}return i(GlobalContainerRule,[{key:"getRule",value:function getRule(e){return this.rules.get(e)}},{key:"addRule",value:function addRule(e,t,n){var r=this.rules.add(e,t,n);return this.options.jss.plugins.onProcessRule(r),r}},{key:"indexOf",value:function indexOf(e){return this.rules.indexOf(e)}},{key:"toString",value:function toString(){return this.rules.toString()}}]),GlobalContainerRule}(),u=function(){function GlobalPrefixedRule(e,t,n){_classCallCheck(this,GlobalPrefixedRule),this.name=e,this.options=n;var i=e.substr(s.length);this.rule=n.jss.createRule(i,t,r({},n,{parent:this,selector:i}))}return i(GlobalPrefixedRule,[{key:"toString",value:function toString(e){return this.rule.toString(e)}}]),GlobalPrefixedRule}(),c=/\s*,\s*/g;function addScope(e,t){for(var n=e.split(c),r="",i=0;i<n.length;i++)r+=t+" "+n[i].trim(),n[i+1]&&(r+=", ");return r}function handleNestedGlobalContainerRule(e){var t=e.options,n=e.style,i=n[a];if(i){for(var o in i)t.sheet.addRule(o,i[o],r({},t,{selector:addScope(o,e.selector)}));delete n[a]}}function handlePrefixedGlobalRule(e){var t=e.options,n=e.style;for(var i in n)if(i.substr(0,a.length)===a){var o=addScope(i.substr(a.length),e.selector);t.sheet.addRule(o,n[i],r({},t,{selector:o})),delete n[i]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=function jssIsolate(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!1,n=[],r=void 0,i=void 0,o=function setSelector(){i.selector=n.join(",\n")},a=h(o);return{onProcessRule:function onProcessRule(o,l){if(!l||l===r||"style"!==o.type)return;if(!p(o,l,e))return;i||(r=o.options.jss.createStyleSheet(null,s),i=r.addRule("reset",u(e.reset)),r.attach());var c=o.selector;-1===n.indexOf(c)&&(n.push(c),t=a())},onProcessSheet:function onProcessSheet(){!t&&n.length&&o()}}};var o=_interopRequireDefault(n(303)),a=_interopRequireDefault(n(304));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var s={meta:"jss-isolate",index:-1/0,link:!0},l={inherited:o.default,all:a.default},u=function getStyle(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"inherited";if("string"==typeof e)return l[e];if("object"===(void 0===e?"undefined":i(e))){if(Array.isArray(e)){var t=e[0],n=e[1];return r({},l[t],n)}return r({},o.default,e)}return o.default},c={keyframes:!0,conditional:!0},p=function shouldIsolate(e,t,n){var r=e.options.parent;if(r&&c[r.type])return!1;var i=null==n.isolate||n.isolate;return null!=t.options.isolate&&(i=t.options.isolate),null!=e.style.isolate&&(i=e.style.isolate,delete e.style.isolate),"string"==typeof i?i===e.key:i},h=function createDebounced(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=Date.now();return function(){var r=Date.now();return!(r-n<t)&&(n=r,e(),!0)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=function jssNested(){function getReplaceRef(e){return function(t,n){var r=e.getRule(n);return r?r.selector:((0,i.default)(!1,"[JSS] Could not find the referenced rule %s in %s.",n,e.options.meta||e),n)}}var e=function hasAnd(e){return-1!==e.indexOf("&")};function replaceParentRefs(t,n){for(var r=n.split(o),i=t.split(o),s="",l=0;l<r.length;l++)for(var u=r[l],c=0;c<i.length;c++){var p=i[c];s&&(s+=", "),s+=e(p)?p.replace(a,u):u+" "+p}return s}function getOptions(e,t,n){if(n)return r({},n,{index:n.index+1});var i=e.options.nestingLevel;return i=void 0===i?1:i+1,r({},e.options,{nestingLevel:i,index:t.indexOf(e)+1})}return{onProcessStyle:function onProcessStyle(t,n){if("style"!==n.type)return t;var i=n.options.parent,o=void 0,a=void 0;for(var l in t){var u=e(l),c="@"===l[0];if(u||c){if(o=getOptions(n,i,o),u){var p=replaceParentRefs(l,n.selector);a||(a=getReplaceRef(i)),p=p.replace(s,a),i.addRule(p,t[l],r({},o,{selector:p}))}else c&&i.addRule(l,null,o).addRule(n.key,t[l],{selector:n.selector});delete t[l]}}return t}}};var i=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n(72));var o=/\s*,\s*/g,a=/&/g,s=/\$([\w-]+)/g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function camelCase(){return{onProcessStyle:function onProcessStyle(e){if(Array.isArray(e)){for(var t=0;t<e.length;t++)e[t]=convertCase(e[t]);return e}return convertCase(e)},onChangeValue:function onChangeValue(e,t,n){var i=(0,r.default)(t);return t===i?e:(n.prop(i,e),null)}}};var r=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n(305));function convertCase(e){var t={};for(var n in e)t[(0,r.default)(n)]=e[n];return e.fallbacks&&(Array.isArray(e.fallbacks)?t.fallbacks=e.fallbacks.map(convertCase):t.fallbacks=convertCase(e.fallbacks)),t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function addCamelCasedVersion(e){var t=/(-[a-z])/g,n=function replace(e){return e[1].toUpperCase()},r={};for(var i in e)r[i]=e[i],r[i.replace(t,n)]=e[i];return r}t.default=function defaultUnit(){var e=addCamelCasedVersion(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});return{onProcessStyle:function onProcessStyle(t,n){if("style"!==n.type)return t;for(var r in t)t[r]=iterate(r,t[r],e);return t},onChangeValue:function onChangeValue(t,n){return iterate(n,t,e)}}};var i=addCamelCasedVersion(function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n(306)).default);function iterate(e,t,n){if(!t)return t;var o=t,a=void 0===t?"undefined":r(t);switch("object"===a&&Array.isArray(t)&&(a="array"),a){case"object":if("fallbacks"===e){for(var s in t)t[s]=iterate(s,t[s],n);break}for(var l in t)t[l]=iterate(e+"-"+l,t[l],n);break;case"array":for(var u=0;u<t.length;u++)t[u]=iterate(e,t[u],n);break;case"number":0!==t&&(o=t+(n[e]||i[e]||""))}return o}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function jssCompose(){return{onProcessStyle:function onProcessStyle(e,t){return e.composes?(registerClass(t,e.composes),delete e.composes,e):e}}};var r=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n(72));function registerClass(e,t){if(!t)return!0;if(Array.isArray(t)){for(var n=0;n<t.length;n++){if(!registerClass(e,t[n]))return!1}return!0}if(t.indexOf(" ")>-1)return registerClass(e,t.split(" "));var i=e.options.parent;if("$"===t[0]){var o=i.getRule(t.substr(1));return o?o===e?((0,r.default)(!1,"[JSS] Cyclic composition detected. \r\n%s",e),!1):(i.classes[e.key]+=" "+i.classes[o.key],!0):((0,r.default)(!1,"[JSS] Referenced rule is not defined. \r\n%s",e),!1)}return e.options.parent.classes[e.key]+=" "+t,!0}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),o=function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1));function _objectWithoutProperties(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=13,s=9,l=8,u=89,c=90,p=77,h=57,f=219,d=222,g=192,m=100,y=3e3,v="navigator"in e&&/Win/i.test(navigator.platform),_="navigator"in e&&/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform),b="npm__react-simple-code-editor__textarea",x=function(e){function Editor(){var e,t,n;_classCallCheck(this,Editor);for(var i=arguments.length,o=Array(i),b=0;b<i;b++)o[b]=arguments[b];return t=n=_possibleConstructorReturn(this,(e=Editor.__proto__||Object.getPrototypeOf(Editor)).call.apply(e,[this].concat(o))),n.state={capture:!0},n._recordCurrentState=function(){var e=n._input;if(e){var t=e.value,r=e.selectionStart,i=e.selectionEnd;n._recordChange({value:t,selectionStart:r,selectionEnd:i})}},n._getLines=function(e,t){return e.substring(0,t).split("\n")},n._recordChange=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=n._history,o=i.stack,a=i.offset;if(o.length&&a>-1){n._history.stack=o.slice(0,a+1);var s=n._history.stack.length;if(s>m){var l=s-m;n._history.stack=o.slice(l,s),n._history.offset=Math.max(n._history.offset-l,0)}}var u=Date.now();if(t){var c=n._history.stack[n._history.offset];if(c&&u-c.timestamp<y){var p=/[^a-z0-9]([a-z0-9]+)$/i,h=n._getLines(c.value,c.selectionStart).pop().match(p),f=n._getLines(e.value,e.selectionStart).pop().match(p);if(h&&f&&f[1].startsWith(h[1]))return void(n._history.stack[n._history.offset]=r({},e,{timestamp:u}))}}n._history.stack.push(r({},e,{timestamp:u})),n._history.offset++},n._updateInput=function(e){var t=n._input;t&&(t.value=e.value,t.selectionStart=e.selectionStart,t.selectionEnd=e.selectionEnd,n.props.onValueChange(e.value))},n._applyEdits=function(e){var t=n._input,i=n._history.stack[n._history.offset];i&&t&&(n._history.stack[n._history.offset]=r({},i,{selectionStart:t.selectionStart,selectionEnd:t.selectionEnd})),n._recordChange(e),n._updateInput(e)},n._undoEdit=function(){var e=n._history,t=e.stack,r=e.offset,i=t[r-1];i&&(n._updateInput(i),n._history.offset=Math.max(r-1,0))},n._redoEdit=function(){var e=n._history,t=e.stack,r=e.offset,i=t[r+1];i&&(n._updateInput(i),n._history.offset=Math.min(r+1,t.length-1))},n._handleKeyDown=function(e){var t=n.props,r=t.tabSize,i=t.insertSpaces,o=t.ignoreTabKey,m=t.onKeyDown;if(!m||(m(e),!e.defaultPrevented)){var y=e.target,b=y.value,x=y.selectionStart,w=y.selectionEnd,S=(i?" ":"     ").repeat(r);if(e.keyCode===s&&!o&&n.state.capture)if(e.preventDefault(),e.shiftKey){var E=n._getLines(b,x),P=E.length-1,C=n._getLines(b,w).length-1,k=b.split("\n").map(function(e,t){return t>=P&&t<=C&&e.startsWith(S)?e.substring(S.length):e}).join("\n");if(b!==k){var T=E[P];n._applyEdits({value:k,selectionStart:T.startsWith(S)?x-S.length:x,selectionEnd:w-(b.length-k.length)})}}else if(x!==w){var A=n._getLines(b,x),O=A.length-1,I=n._getLines(b,w).length-1,R=A[O];n._applyEdits({value:b.split("\n").map(function(e,t){return t>=O&&t<=I?S+e:e}).join("\n"),selectionStart:/\S/.test(R)?x+S.length:x,selectionEnd:w+S.length*(I-O+1)})}else{var L=x+S.length;n._applyEdits({value:b.substring(0,x)+S+b.substring(w),selectionStart:L,selectionEnd:L})}else if(e.keyCode===l){var M=x!==w;if(b.substring(0,x).endsWith(S)&&!M){e.preventDefault();var j=x-S.length;n._applyEdits({value:b.substring(0,x-S.length)+b.substring(w),selectionStart:j,selectionEnd:j})}}else if(e.keyCode===a){if(x===w){var D=n._getLines(b,x).pop().match(/^\s+/);if(D&&D[0]){e.preventDefault();var F="\n"+D[0],N=x+F.length;n._applyEdits({value:b.substring(0,x)+F+b.substring(w),selectionStart:N,selectionEnd:N})}}}else if(e.keyCode===h||e.keyCode===f||e.keyCode===d||e.keyCode===g){var B=void 0;e.keyCode===h&&e.shiftKey?B=["(",")"]:e.keyCode===f?B=e.shiftKey?["{","}"]:["[","]"]:e.keyCode===d?B=e.shiftKey?['"','"']:["'","'"]:e.keyCode!==g||e.shiftKey||(B=["`","`"]),x!==w&&B&&(e.preventDefault(),n._applyEdits({value:b.substring(0,x)+B[0]+b.substring(x,w)+B[1]+b.substring(w),selectionStart:x,selectionEnd:w+2}))}else(_?e.metaKey&&e.keyCode===c:e.ctrlKey&&e.keyCode===c)&&!e.shiftKey&&!e.altKey?(e.preventDefault(),n._undoEdit()):(_?e.metaKey&&e.keyCode===c&&e.shiftKey:v?e.ctrlKey&&e.keyCode===u:e.ctrlKey&&e.keyCode===c&&e.shiftKey)&&!e.altKey?(e.preventDefault(),n._redoEdit()):e.keyCode!==p||!e.ctrlKey||_&&!e.shiftKey||(e.preventDefault(),n.setState(function(e){return{capture:!e.capture}}))}},n._handleChange=function(e){var t=e.target,r=t.value,i=t.selectionStart,o=t.selectionEnd;n._recordChange({value:r,selectionStart:i,selectionEnd:o},!0),n.props.onValueChange(r)},n._history={stack:[],offset:-1},_possibleConstructorReturn(n,t)}return _inherits(Editor,o.Component),i(Editor,[{key:"componentDidMount",value:function componentDidMount(){this._recordCurrentState()}},{key:"render",value:function render(){var e=this,t=this.props,n=t.value,i=t.style,a=t.padding,s=t.highlight,l=t.textareaId,u=t.autoFocus,c=t.disabled,p=t.form,h=t.maxLength,f=t.minLength,d=t.name,g=t.placeholder,m=t.readOnly,y=t.required,v=t.onClick,_=t.onFocus,x=t.onBlur,S=t.onKeyUp,E=(t.onKeyDown,t.onValueChange,t.tabSize,t.insertSpaces,t.ignoreTabKey,_objectWithoutProperties(t,["value","style","padding","highlight","textareaId","autoFocus","disabled","form","maxLength","minLength","name","placeholder","readOnly","required","onClick","onFocus","onBlur","onKeyUp","onKeyDown","onValueChange","tabSize","insertSpaces","ignoreTabKey"])),P={paddingTop:a,paddingRight:a,paddingBottom:a,paddingLeft:a},C=s(n);return o.createElement("div",r({},E,{style:r({},w.container,i)}),o.createElement("textarea",{ref:function ref(t){return e._input=t},style:r({},w.editor,w.textarea,P),className:b,id:l,value:n,onChange:this._handleChange,onKeyDown:this._handleKeyDown,onClick:v,onKeyUp:S,onFocus:_,onBlur:x,disabled:c,form:p,maxLength:h,minLength:f,name:d,placeholder:g,readOnly:m,required:y,autoFocus:u,autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"data-gramm":!1}),o.createElement("pre",r({"aria-hidden":"true",style:r({},w.editor,w.highlight,P)},"string"==typeof C?{dangerouslySetInnerHTML:{__html:C+"<br />"}}:{children:C})),o.createElement("style",{type:"text/css",dangerouslySetInnerHTML:{__html:"\n/**\n * Reset the text fill color so that placeholder is visible\n */\n.npm__react-simple-code-editor__textarea:empty {\n  -webkit-text-fill-color: inherit !important;\n}\n\n/**\n * Hack to apply on some CSS on IE10 and IE11\n */\n@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {\n  /**\n    * IE doesn't support '-webkit-text-fill-color'\n    * So we use 'color: transparent' to make the text transparent on IE\n    * Unlike other browsers, it doesn't affect caret color in IE\n    */\n  .npm__react-simple-code-editor__textarea {\n    color: transparent !important;\n  }\n\n  .npm__react-simple-code-editor__textarea::selection {\n    background-color: #accef7 !important;\n    color: transparent !important;\n  }\n}\n"}}))}},{key:"session",get:function get(){return{history:this._history}},set:function set(e){this._history=e.history}}]),Editor}();x.defaultProps={tabSize:2,insertSpaces:!0,ignoreTabKey:!1,padding:0},t.default=x;var w={container:{position:"relative",textAlign:"left",whiteSpace:"pre-wrap",wordBreak:"keep-all",boxSizing:"border-box",padding:0,overflow:"hidden"},textarea:{position:"absolute",top:0,left:0,height:"100%",width:"100%",resize:"none",color:"inherit",overflow:"hidden",MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",WebkitTextFillColor:"transparent"},highlight:{position:"relative",pointerEvents:"none"},editor:{margin:0,border:0,background:"none",boxSizing:"inherit",display:"inherit",fontFamily:"inherit",fontSize:"inherit",fontStyle:"inherit",fontVariantLigatures:"inherit",fontWeight:"inherit",letterSpacing:"inherit",lineHeight:"inherit",tabSize:"inherit",textIndent:"inherit",textRendering:"inherit",textTransform:"inherit",whiteSpace:"inherit",wordBreak:"inherit"}}}).call(this,n(31))},function(e,t,n){(function(t){e.exports=function(){var e=/[\\\'\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","'":"\\'",'"':'\\"',"\\":"\\\\"};function escapeChar(e){var t=n[e];return t||"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}var r={};"break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" ").map(function(e){r[e]=!0});var i=/^[A-Za-z_$][A-Za-z0-9_$]*$/;function isValidVariableName(e){return!r[e]&&i.test(e)}function toGlobalVariable(e){return"Function("+stringify("return this;")+")()"}function toPath(e){for(var t="",n=0;n<e.length;n++)isValidVariableName(e[n])?t+="."+e[n]:t+="["+stringify(e[n])+"]";return t}function stringifyArray(e,t,n){var r=e.map(function(e,r){var i=n(e,r);return void 0===i?String(i):t+i.split("\n").join("\n"+t)}).join(t?",\n":",");return t&&r?"[\n"+r+"\n]":"["+r+"]"}var o={"[object Array]":stringifyArray,"[object Object]":function stringifyObject(e,t,n){var r=Object.keys(e).reduce(function(r,i){var o=n(e[i],i);return void 0===o?r:(i=isValidVariableName(i)?i:stringify(i),o=String(o).split("\n").join("\n"+t),r.push(t+i+":"+(t?" ":"")+o),r)},[]).join(t?",\n":",");return t&&r?"{\n"+r+"\n}":"{"+r+"}"},"[object Error]":function(e){return"new Error("+stringify(e.message)+")"},"[object Date]":function(e){return"new Date("+e.getTime()+")"},"[object String]":function(e){return"new String("+stringify(e.toString())+")"},"[object Number]":function(e){return"new Number("+e+")"},"[object Boolean]":function(e){return"new Boolean("+e+")"},"[object Uint8Array]":function(e,t){return"new Uint8Array("+stringifyArray(e)+")"},"[object Set]":function(e,t,n){return"function"==typeof Array.from?"new Set("+stringify(Array.from(e),t,n)+")":void 0},"[object Map]":function(e,t,n){return"function"==typeof Array.from?"new Map("+stringify(Array.from(e),t,n)+")":void 0},"[object RegExp]":String,"[object Function]":String,"[object global]":toGlobalVariable,"[object Window]":toGlobalVariable},a={string:function(t){return"'"+t.replace(e,escapeChar)+"'"},number:String,object:String,boolean:String,symbol:String,undefined:String};function stringify(e,n,r){if(Object(e)!==e)return a[typeof e](e,n,r);if("function"==typeof t&&t.isBuffer(e))return"new Buffer("+r(e.toString())+")";var i=o[Object.prototype.toString.call(e)];return i?i(e,n,r):void 0}return function(e,t,n,r){r=r||{},"string"!=typeof n&&(n=new Array(Math.max(0,0|n)+1).join(" "));var i=Number(r.maxDepth)||100,o=!!r.references,a=!!r.skipUndefinedProperties,s=Number(r.maxValues)||1e5,l=[],u=[],c=[],p=[],h=[];function next(e,t){if(!a||void 0!==e){l.push(t);var n=f(e,stringify);return l.pop(),n}}var f=o?function(e,t){if(e&&("object"==typeof e||"function"==typeof e)){var r=c.indexOf(e);if(r>-1)return void h.push(l.slice(),p[r]);c.push(e),p.push(l.slice())}if(!(l.length>i||s--<=0))return t(e,n,next)}:function(e,t){var r=u.indexOf(e);if(!(r>-1||l.length>i||s--<=0)){u.push(e);var e=t(e,n,next);return u.pop(),e}};if("function"==typeof t){var d=f;f=function(e,n){return d(e,function(e,r,i){return t(e,r,function(e){return n(e,r,i)})})}}var g=f(e,stringify);if(h.length){for(var m=n?"\n":"",y=n?" = ":"=",v=";"+m,d=n?"(function () {":"(function(){",_=["var x"+y+g],b=0;b<h.length;b+=2)_.push("x"+toPath(h[b])+y+"x"+toPath(h[b+1]));return _.push("return x"),d+m+_.join(v)+v+"}())"}return g}}()}).call(this,n(219).Buffer)},function(e,t){var n=/[\'\"]/;e.exports=function unquote(e){return e?(n.test(e.charAt(0))&&(e=e.substr(1)),n.test(e.charAt(e.length-1))&&(e=e.substr(0,e.length-1)),e):""}},function(e,t,n){var r=n(222),i=n(180),o=n(425),a=n(55);e.exports=function map(e,t){return(a(e)?r:o)(e,i(t,3))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=_interopRequireDefault(n(1)),o=_interopRequireDefault(n(182));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}t.default=function MdFullscreen(e){return i.default.createElement(o.default,r({viewBox:"0 0 40 40"},e),i.default.createElement("g",null,i.default.createElement("path",{d:"m23.4 8.4h8.2v8.2h-3.2v-5h-5v-3.2z m5 20v-5h3.2v8.2h-8.2v-3.2h5z m-20-11.8v-8.2h8.2v3.2h-5v5h-3.2z m3.2 6.8v5h5v3.2h-8.2v-8.2h3.2z"})))},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=_interopRequireDefault(n(1)),o=_interopRequireDefault(n(182));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}t.default=function MdFullscreenExit(e){return i.default.createElement(o.default,r({viewBox:"0 0 40 40"},e),i.default.createElement("g",null,i.default.createElement("path",{d:"m26.6 13.4h5v3.2h-8.2v-8.2h3.2v5z m-3.2 18.2v-8.2h8.2v3.2h-5v5h-3.2z m-10-18.2v-5h3.2v8.2h-8.2v-3.2h5z m-5 13.2v-3.2h8.2v8.2h-3.2v-5h-5z"})))},e.exports=t.default},function(e,t,n){var r=n(231),i=/[\\^$.*+?()[\]{}|]/g,o=RegExp(i.source);e.exports=function escapeRegExp(e){return(e=r(e))&&o.test(e)?e.replace(i,"\\$&"):e}},function(e,t,n){var r=n(61),i=n(436),o=n(234),a="Expected a function",s=Math.max,l=Math.min;e.exports=function debounce(e,t,n){var u,c,p,h,f,d,g=0,m=!1,y=!1,v=!0;if("function"!=typeof e)throw new TypeError(a);function invokeFunc(t){var n=u,r=c;return u=c=void 0,g=t,h=e.apply(r,n)}function leadingEdge(e){return g=e,f=setTimeout(timerExpired,t),m?invokeFunc(e):h}function remainingWait(e){var n=t-(e-d);return y?l(n,p-(e-g)):n}function shouldInvoke(e){var n=e-d;return void 0===d||n>=t||n<0||y&&e-g>=p}function timerExpired(){var e=i();if(shouldInvoke(e))return trailingEdge(e);f=setTimeout(timerExpired,remainingWait(e))}function trailingEdge(e){return f=void 0,v&&u?invokeFunc(e):(u=c=void 0,h)}function debounced(){var e=i(),n=shouldInvoke(e);if(u=arguments,c=this,d=e,n){if(void 0===f)return leadingEdge(d);if(y)return f=setTimeout(timerExpired,t),invokeFunc(d)}return void 0===f&&(f=setTimeout(timerExpired,t)),h}return t=o(t)||0,r(n)&&(m=!!n.leading,p=(y="maxWait"in n)?s(o(n.maxWait)||0,t):p,v="trailing"in n?!!n.trailing:v),debounced.cancel=function cancel(){void 0!==f&&clearTimeout(f),g=0,u=d=c=f=void 0},debounced.flush=function flush(){return void 0===f?h:trailingEdge(i())},debounced}},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return transform});var r=n(254),i=n(256),o={quot:'"',amp:"&",apos:"'",lt:"<",gt:">",nbsp:" ",iexcl:"¡",cent:"¢",pound:"£",curren:"¤",yen:"¥",brvbar:"¦",sect:"§",uml:"¨",copy:"©",ordf:"ª",laquo:"«",not:"¬",shy:"­",reg:"®",macr:"¯",deg:"°",plusmn:"±",sup2:"²",sup3:"³",acute:"´",micro:"µ",para:"¶",middot:"·",cedil:"¸",sup1:"¹",ordm:"º",raquo:"»",frac14:"¼",frac12:"½",frac34:"¾",iquest:"¿",Agrave:"À",Aacute:"Á",Acirc:"Â",Atilde:"Ã",Auml:"Ä",Aring:"Å",AElig:"Æ",Ccedil:"Ç",Egrave:"È",Eacute:"É",Ecirc:"Ê",Euml:"Ë",Igrave:"Ì",Iacute:"Í",Icirc:"Î",Iuml:"Ï",ETH:"Ð",Ntilde:"Ñ",Ograve:"Ò",Oacute:"Ó",Ocirc:"Ô",Otilde:"Õ",Ouml:"Ö",times:"×",Oslash:"Ø",Ugrave:"Ù",Uacute:"Ú",Ucirc:"Û",Uuml:"Ü",Yacute:"Ý",THORN:"Þ",szlig:"ß",agrave:"à",aacute:"á",acirc:"â",atilde:"ã",auml:"ä",aring:"å",aelig:"æ",ccedil:"ç",egrave:"è",eacute:"é",ecirc:"ê",euml:"ë",igrave:"ì",iacute:"í",icirc:"î",iuml:"ï",eth:"ð",ntilde:"ñ",ograve:"ò",oacute:"ó",ocirc:"ô",otilde:"õ",ouml:"ö",divide:"÷",oslash:"ø",ugrave:"ù",uacute:"ú",ucirc:"û",uuml:"ü",yacute:"ý",thorn:"þ",yuml:"ÿ",OElig:"Œ",oelig:"œ",Scaron:"Š",scaron:"š",Yuml:"Ÿ",fnof:"ƒ",circ:"ˆ",tilde:"˜",Alpha:"Α",Beta:"Β",Gamma:"Γ",Delta:"Δ",Epsilon:"Ε",Zeta:"Ζ",Eta:"Η",Theta:"Θ",Iota:"Ι",Kappa:"Κ",Lambda:"Λ",Mu:"Μ",Nu:"Ν",Xi:"Ξ",Omicron:"Ο",Pi:"Π",Rho:"Ρ",Sigma:"Σ",Tau:"Τ",Upsilon:"Υ",Phi:"Φ",Chi:"Χ",Psi:"Ψ",Omega:"Ω",alpha:"α",beta:"β",gamma:"γ",delta:"δ",epsilon:"ε",zeta:"ζ",eta:"η",theta:"θ",iota:"ι",kappa:"κ",lambda:"λ",mu:"μ",nu:"ν",xi:"ξ",omicron:"ο",pi:"π",rho:"ρ",sigmaf:"ς",sigma:"σ",tau:"τ",upsilon:"υ",phi:"φ",chi:"χ",psi:"ψ",omega:"ω",thetasym:"ϑ",upsih:"ϒ",piv:"ϖ",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lrm:"‎",rlm:"‏",ndash:"–",mdash:"—",lsquo:"‘",rsquo:"’",sbquo:"‚",ldquo:"“",rdquo:"”",bdquo:"„",dagger:"†",Dagger:"‡",bull:"•",hellip:"…",permil:"‰",prime:"′",Prime:"″",lsaquo:"‹",rsaquo:"›",oline:"‾",frasl:"⁄",euro:"€",image:"ℑ",weierp:"℘",real:"ℜ",trade:"™",alefsym:"ℵ",larr:"←",uarr:"↑",rarr:"→",darr:"↓",harr:"↔",crarr:"↵",lArr:"⇐",uArr:"⇑",rArr:"⇒",dArr:"⇓",hArr:"⇔",forall:"∀",part:"∂",exist:"∃",empty:"∅",nabla:"∇",isin:"∈",notin:"∉",ni:"∋",prod:"∏",sum:"∑",minus:"−",lowast:"∗",radic:"√",prop:"∝",infin:"∞",ang:"∠",and:"∧",or:"∨",cap:"∩",cup:"∪",int:"∫",there4:"∴",sim:"∼",cong:"≅",asymp:"≈",ne:"≠",equiv:"≡",le:"≤",ge:"≥",sub:"⊂",sup:"⊃",nsub:"⊄",sube:"⊆",supe:"⊇",oplus:"⊕",otimes:"⊗",perp:"⊥",sdot:"⋅",lceil:"⌈",rceil:"⌉",lfloor:"⌊",rfloor:"⌋",lang:"〈",rang:"〉",loz:"◊",spades:"♠",clubs:"♣",hearts:"♥",diams:"♦"},a=/^[\da-fA-F]+$/,s=/^\d+$/,l="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{};function commonjsRequire(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}var u=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function injectDynamicImport(e){var t=e.tokTypes;function parseDynamicImport(){var e=this.startNode();return this.next(),this.type!==t.parenL&&this.unexpected(),this.finishNode(e,n)}function peekNext(){return this.input[this.pos]}return t._import.startsExpr=!0,e.plugins.dynamicImport=function dynamicImportPlugin(e){e.extend("parseStatement",function(e){return function parseStatement(){var n=this.startNode();if(this.type===t._import&&peekNext.call(this)===t.parenL.label){var r=this.parseExpression();return this.parseExpressionStatement(n,r)}for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return e.apply(this,o)}}),e.extend("parseExprAtom",function(e){return function parseExprAtom(n){return this.type===t._import?parseDynamicImport.call(this):e.call(this,n)}})},e};var n=t.DynamicImportKey="Import"}),c=function unwrapExports(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}(u);u.DynamicImportKey;function toJSON(e){var t={};return Object.keys(e).forEach(function(n){"parent"!==n&&"program"!==n&&"keys"!==n&&"__wrapped"!==n&&(Array.isArray(e[n])?t[n]=e[n].map(toJSON):e[n]&&e[n].toJSON?t[n]=e[n].toJSON():t[n]=e[n])}),t}var p=function Node(){};function extractNames(e){var t=[];return h[e.type](t,e),t}p.prototype.ancestor=function ancestor(e){for(var t=this;e--;)if(!(t=t.parent))return null;return t},p.prototype.contains=function contains(e){for(;e;){if(e===this)return!0;e=e.parent}return!1},p.prototype.findLexicalBoundary=function findLexicalBoundary(){return this.parent.findLexicalBoundary()},p.prototype.findNearest=function findNearest(e){return"string"==typeof e&&(e=new RegExp("^"+e+"$")),e.test(this.type)?this:this.parent.findNearest(e)},p.prototype.unparenthesizedParent=function unparenthesizedParent(){for(var e=this.parent;e&&"ParenthesizedExpression"===e.type;)e=e.parent;return e},p.prototype.unparenthesize=function unparenthesize(){for(var e=this;"ParenthesizedExpression"===e.type;)e=e.expression;return e},p.prototype.findScope=function findScope(e){return this.parent.findScope(e)},p.prototype.getIndentation=function getIndentation(){return this.parent.getIndentation()},p.prototype.initialise=function initialise(e){for(var t=0,n=this.keys;t<n.length;t+=1){var r=this[n[t]];Array.isArray(r)?r.forEach(function(t){return t&&t.initialise(e)}):r&&"object"==typeof r&&r.initialise(e)}},p.prototype.toJSON=function toJSON$1(){return toJSON(this)},p.prototype.toString=function toString(){return this.program.magicString.original.slice(this.start,this.end)},p.prototype.transpile=function transpile(e,t){for(var n=0,r=this.keys;n<r.length;n+=1){var i=this[r[n]];Array.isArray(i)?i.forEach(function(n){return n&&n.transpile(e,t)}):i&&"object"==typeof i&&i.transpile(e,t)}};var h={Identifier:function Identifier(e,t){e.push(t)},ObjectPattern:function ObjectPattern(e,t){for(var n=0,r=t.properties;n<r.length;n+=1){var i=r[n];h[i.type](e,i)}},Property:function Property(e,t){h[t.value.type](e,t.value)},ArrayPattern:function ArrayPattern(e,t){for(var n=0,r=t.elements;n<r.length;n+=1){var i=r[n];i&&h[i.type](e,i)}},RestElement:function RestElement(e,t){h[t.argument.type](e,t.argument)},AssignmentPattern:function AssignmentPattern(e,t){h[t.left.type](e,t.left)}},f=Object.create(null);function Scope(e){e=e||{},this.parent=e.parent,this.isBlockScope=!!e.block,this.createDeclarationCallback=e.declare;for(var t=this;t.isBlockScope;)t=t.parent;this.functionScope=t,this.identifiers=[],this.declarations=Object.create(null),this.references=Object.create(null),this.blockScopedDeclarations=this.isBlockScope?null:Object.create(null),this.aliases=Object.create(null)}function locate(e,t){var n,r=e.split("\n"),i=r.length,o=0;for(n=0;n<i;n+=1){var a=o+r[n].length+1;if(a>t)return{line:n+1,column:t-o,char:n};o=a}throw new Error("Could not determine location of character")}function repeat(e,t){for(var n="";t--;)n+=e;return n}function getSnippet(e,t,n){void 0===n&&(n=1);var r=Math.max(t.line-5,0),i=t.line,o=String(i).length,a=e.split("\n").slice(r,i),s=a[a.length-1].slice(0,t.column).replace(/\t/g,"  ").length,l=a.map(function(e,t){return n=o,(i=String(t+r+1))+repeat(" ",n-i.length)+" : "+e.replace(/\t/g,"  ");var n,i}).join("\n");return l+="\n"+repeat(" ",o+3+s)+repeat("^",n)}"do if in for let new try var case else enum eval null this true void with await break catch class const false super throw while yield delete export import public return static switch typeof default extends finally package private continue debugger function arguments interface protected implements instanceof".split(" ").forEach(function(e){return f[e]=!0}),Scope.prototype={addDeclaration:function addDeclaration(e,t){for(var n=0,r=extractNames(e);n<r.length;n+=1){var i=r[n],o=i.name,a={name:o,node:i,kind:t,instances:[]};this.declarations[o]=a,this.isBlockScope&&(this.functionScope.blockScopedDeclarations[o]||(this.functionScope.blockScopedDeclarations[o]=[]),this.functionScope.blockScopedDeclarations[o].push(a))}},addReference:function addReference(e){this.consolidated?this.consolidateReference(e):this.identifiers.push(e)},consolidate:function consolidate(){for(var e=0;e<this.identifiers.length;e+=1){var t=this.identifiers[e];this.consolidateReference(t)}this.consolidated=!0},consolidateReference:function consolidateReference(e){var t=this.declarations[e.name];t?t.instances.push(e):(this.references[e.name]=!0,this.parent&&this.parent.addReference(e))},contains:function contains(e){return this.declarations[e]||!!this.parent&&this.parent.contains(e)},createIdentifier:function createIdentifier(e){"number"==typeof e&&(e=e.toString());for(var t=e=e.replace(/\s/g,"").replace(/\[([^\]]+)\]/g,"_$1").replace(/[^a-zA-Z0-9_$]/g,"_").replace(/_{2,}/,"_"),n=1;this.declarations[t]||this.references[t]||this.aliases[t]||t in f;)t=e+"$"+n++;return this.aliases[t]=!0,t},createDeclaration:function createDeclaration(e){var t=this.createIdentifier(e);return this.createDeclarationCallback(t),t},findDeclaration:function findDeclaration(e){return this.declarations[e]||this.parent&&this.parent.findDeclaration(e)},resolveName:function resolveName(e){var t=this.findDeclaration(e);return t?t.name:e}};var d=function(e){function CompileError(t,n){if(e.call(this,t),this.name="CompileError",n){var r=n.program.magicString.original,i=locate(r,n.start);this.message=t+" ("+i.line+":"+i.column+")",this.stack=(new e).stack.replace(new RegExp(".+new "+this.name+".+\\n","m"),""),this.loc=i,this.snippet=getSnippet(r,i,n.end-n.start)}}return e&&(CompileError.__proto__=e),CompileError.prototype=Object.create(e&&e.prototype),CompileError.prototype.constructor=CompileError,CompileError.prototype.toString=function toString(){return this.name+": "+this.message+"\n"+this.snippet},CompileError}(Error);function findIndex(e,t){for(var n=0;n<e.length;n+=1)if(t(e[n],n))return n;return-1}var g={Identifier:destructureIdentifier,AssignmentPattern:function destructureAssignmentPattern(e,t,n,r,i,o,a){var s="Identifier"===r.left.type,l=s?r.left.name:i;o||a.push(function(t,n,i){e.prependRight(r.left.end,n+"if ( "+l+" === void 0 ) "+l),e.move(r.left.end,r.right.end,t),e.appendLeft(r.right.end,i)});s||destructure(e,t,n,r.left,i,o,a)},ArrayPattern:function destructureArrayPattern(e,t,n,r,i,o,a){var s=r.start;r.elements.forEach(function(r,l){r&&("RestElement"===r.type?handleProperty(e,t,n,s,r.argument,i+".slice("+l+")",o,a):handleProperty(e,t,n,s,r,i+"["+l+"]",o,a),s=r.end)}),e.remove(s,r.end)},ObjectPattern:destructureObjectPattern};function destructure(e,t,n,r,i,o,a){g[r.type](e,t,n,r,i,o,a)}function destructureIdentifier(e,t,n,r,i,o,a){a.push(function(t,a,s){e.overwrite(r.start,r.end,(o?a:a+"var ")+n(r)+" = "+i+s),e.move(r.start,r.end,t)})}function destructureMemberExpression(e,t,n,r,i,o,a){a.push(function(t,n,a){e.prependRight(r.start,o?n:n+"var "),e.appendLeft(r.end," = "+i+a),e.move(r.start,r.end,t)})}function destructureObjectPattern(e,t,n,r,i,o,a){var s=this,l=r.start,u=[];r.properties.forEach(function(r){var c,p;if("Property"===r.type){var h=r.computed||"Identifier"!==r.key.type,f=h?e.slice(r.key.start,r.key.end):r.key.name;c=h?i+"["+f+"]":i+"."+f,p=r.value,u.push(h?f:'"'+f+'"')}else{if("RestElement"!==r.type)throw new d(s,"Unexpected node of type "+r.type+" in object pattern");p=r.argument,c=t("rest"),a.push(function(t,n,a){var s=r.program.getObjectWithoutPropertiesHelper(e);e.overwrite(r.start,l=r.argument.start,(o?n:n+"var ")+c+" = "+s+"( "+i+", ["+u.join(", ")+"] )"+a),e.move(r.start,l,t)})}handleProperty(e,t,n,l,p,c,o,a),l=r.end}),e.remove(l,r.end)}function handleProperty(e,t,n,r,i,o,a,s){switch(i.type){case"Identifier":e.remove(r,i.start),destructureIdentifier(e,0,n,i,o,a,s);break;case"MemberExpression":e.remove(r,i.start),destructureMemberExpression(e,0,0,i,o,!0,s);break;case"AssignmentPattern":var l,u="Identifier"===i.left.type;l=u?n(i.left):t(o),s.push(function(t,n,r){a?(e.prependRight(i.right.start,l+" = "+o+", "+l+" = "+l+" === void 0 ? "),e.appendLeft(i.right.end," : "+l+r)):(e.prependRight(i.right.start,n+"var "+l+" = "+o+"; if ( "+l+" === void 0 ) "+l+" = "),e.appendLeft(i.right.end,r)),e.move(i.right.start,i.right.end,t)}),u?e.remove(r,i.right.start):(e.remove(r,i.left.start),e.remove(i.left.end,i.right.start),handleProperty(e,t,n,r,i.left,l,a,s));break;case"ObjectPattern":e.remove(r,r=i.start);var c=o;i.properties.length>1&&(c=t(o),s.push(function(t,n,s){e.prependRight(i.start,(a?"":n+"var ")+c+" = "),e.overwrite(i.start,r=i.start+1,o),e.appendLeft(r,s),e.overwrite(i.start,r=i.start+1,(a?"":n+"var ")+c+" = "+o+s),e.move(i.start,r,t)})),destructureObjectPattern(e,t,n,i,c,a,s);break;case"ArrayPattern":if(e.remove(r,r=i.start),i.elements.filter(Boolean).length>1){var p=t(o);s.push(function(t,n,s){e.prependRight(i.start,(a?"":n+"var ")+p+" = "),e.overwrite(i.start,r=i.start+1,o,{contentOnly:!0}),e.appendLeft(r,s),e.move(i.start,r,t)}),i.elements.forEach(function(i,o){i&&("RestElement"===i.type?handleProperty(e,t,n,r,i.argument,p+".slice("+o+")",a,s):handleProperty(e,t,n,r,i,p+"["+o+"]",a,s),r=i.end)})}else{var h=findIndex(i.elements,Boolean),f=i.elements[h];"RestElement"===f.type?handleProperty(e,t,n,r,f.argument,o+".slice("+h+")",a,s):handleProperty(e,t,n,r,f,o+"["+h+"]",a,s),r=f.end}e.remove(r,i.end);break;default:throw new Error("Unexpected node type in destructuring ("+i.type+")")}}var m=function(e){function BlockStatement(){e.apply(this,arguments)}return e&&(BlockStatement.__proto__=e),BlockStatement.prototype=Object.create(e&&e.prototype),BlockStatement.prototype.constructor=BlockStatement,BlockStatement.prototype.createScope=function createScope(){var e=this;this.parentIsFunction=/Function/.test(this.parent.type),this.isFunctionBlock=this.parentIsFunction||"Root"===this.parent.type,this.scope=new Scope({block:!this.isFunctionBlock,parent:this.parent.findScope(!1),declare:function(t){return e.createdDeclarations.push(t)}}),this.parentIsFunction&&this.parent.params.forEach(function(t){e.scope.addDeclaration(t,"param")})},BlockStatement.prototype.initialise=function initialise(e){this.thisAlias=null,this.argumentsAlias=null,this.defaultParameters=[],this.createdDeclarations=[],this.scope||this.createScope(),this.body.forEach(function(t){return t.initialise(e)}),this.scope.consolidate()},BlockStatement.prototype.findLexicalBoundary=function findLexicalBoundary(){return"Program"===this.type?this:/^Function/.test(this.parent.type)?this:this.parent.findLexicalBoundary()},BlockStatement.prototype.findScope=function findScope(e){return e&&!this.isFunctionBlock?this.parent.findScope(e):this.scope},BlockStatement.prototype.getArgumentsAlias=function getArgumentsAlias(){return this.argumentsAlias||(this.argumentsAlias=this.scope.createIdentifier("arguments")),this.argumentsAlias},BlockStatement.prototype.getArgumentsArrayAlias=function getArgumentsArrayAlias(){return this.argumentsArrayAlias||(this.argumentsArrayAlias=this.scope.createIdentifier("argsArray")),this.argumentsArrayAlias},BlockStatement.prototype.getThisAlias=function getThisAlias(){return this.thisAlias||(this.thisAlias=this.scope.createIdentifier("this")),this.thisAlias},BlockStatement.prototype.getIndentation=function getIndentation(){if(void 0===this.indentation){for(var e=this.program.magicString.original,t=this.synthetic||!this.body.length,n=t?this.start:this.body[0].start;n&&"\n"!==e[n];)n-=1;for(this.indentation="";;){var r=e[n+=1];if(" "!==r&&"\t"!==r)break;this.indentation+=r}for(var i=this.program.magicString.getIndentString(),o=this.parent;o;)"constructor"!==o.kind||o.parent.parent.superClass||(this.indentation=this.indentation.replace(i,"")),o=o.parent;t&&(this.indentation+=i)}return this.indentation},BlockStatement.prototype.transpile=function transpile(t,n){var r,i,o=this,a=this.getIndentation(),s=[];if(this.argumentsAlias&&s.push(function(e,n,r){var i=n+"var "+o.argumentsAlias+" = arguments"+r;t.appendLeft(e,i)}),this.thisAlias&&s.push(function(e,n,r){var i=n+"var "+o.thisAlias+" = this"+r;t.appendLeft(e,i)}),this.argumentsArrayAlias&&s.push(function(e,n,r){var i=o.scope.createIdentifier("i"),s=n+"var "+i+" = arguments.length, "+o.argumentsArrayAlias+" = Array("+i+");\n"+a+"while ( "+i+"-- ) "+o.argumentsArrayAlias+"["+i+"] = arguments["+i+"]"+r;t.appendLeft(e,s)}),/Function/.test(this.parent.type)?this.transpileParameters(this.parent.params,t,n,a,s):"CatchClause"===this.parent.type&&this.transpileParameters([this.parent.param],t,n,a,s),n.letConst&&this.isFunctionBlock&&this.transpileBlockScopedIdentifiers(t),e.prototype.transpile.call(this,t,n),this.createdDeclarations.length&&s.push(function(e,n,r){var i=n+"var "+o.createdDeclarations.join(", ")+r;t.appendLeft(e,i)}),this.synthetic)if("ArrowFunctionExpression"===this.parent.type){var l=this.body[0];s.length?(t.appendLeft(this.start,"{").prependRight(this.end,this.parent.getIndentation()+"}"),t.prependRight(l.start,"\n"+a+"return "),t.appendLeft(l.end,";\n")):n.arrow&&(t.prependRight(l.start,"{ return "),t.appendLeft(l.end,"; }"))}else s.length&&t.prependRight(this.start,"{").appendLeft(this.end,"}");i=this.body[0],r=i&&"ExpressionStatement"===i.type&&"Literal"===i.expression.type&&"use strict"===i.expression.value?this.body[0].end:this.synthetic||"Root"===this.parent.type?this.start:this.start+1;var u="\n"+a,c=";";s.forEach(function(e,t){t===s.length-1&&(c=";\n"),e(r,u,c)})},BlockStatement.prototype.transpileParameters=function transpileParameters(e,t,n,r,i){var o=this;e.forEach(function(a){if("AssignmentPattern"===a.type&&"Identifier"===a.left.type)n.defaultParameter&&i.push(function(e,n,r){var i=n+"if ( "+a.left.name+" === void 0 ) "+a.left.name;t.prependRight(a.left.end,i).move(a.left.end,a.right.end,e).appendLeft(a.right.end,r)});else if("RestElement"===a.type)n.spreadRest&&i.push(function(n,i,s){var l=e[e.length-2];if(l)t.remove(l?l.end:a.start,a.end);else{for(var u=a.start,c=a.end;/\s/.test(t.original[u-1]);)u-=1;for(;/\s/.test(t.original[c]);)c+=1;t.remove(u,c)}var p=a.argument.name,h=o.scope.createIdentifier("len"),f=e.length-1;f?t.prependRight(n,i+"var "+p+" = [], "+h+" = arguments.length - "+f+";\n"+r+"while ( "+h+"-- > 0 ) "+p+"[ "+h+" ] = arguments[ "+h+" + "+f+" ]"+s):t.prependRight(n,i+"var "+p+" = [], "+h+" = arguments.length;\n"+r+"while ( "+h+"-- ) "+p+"[ "+h+" ] = arguments[ "+h+" ]"+s)});else if("Identifier"!==a.type&&n.parameterDestructuring){var s=o.scope.createIdentifier("ref");destructure(t,function(e){return o.scope.createIdentifier(e)},function(e){var t=e.name;return o.scope.resolveName(t)},a,s,!1,i),t.prependRight(a.start,s)}})},BlockStatement.prototype.transpileBlockScopedIdentifiers=function transpileBlockScopedIdentifiers(e){var t=this;Object.keys(this.scope.blockScopedDeclarations).forEach(function(n){for(var r=0,i=t.scope.blockScopedDeclarations[n];r<i.length;r+=1){var o=i[r],a=!1;if("for.let"===o.kind){var s=o.node.findNearest("ForStatement");if(s.shouldRewriteAsFunction){var l=t.scope.createIdentifier(n),u=s.reassigned[n]?t.scope.createIdentifier(n):n;o.name=l,e.overwrite(o.node.start,o.node.end,l,{storeName:!0}),s.aliases[n]={outer:l,inner:u};for(var c=0,p=o.instances;c<p.length;c+=1){var h=p[c],f=s.body.contains(h)?u:l;n!==f&&e.overwrite(h.start,h.end,f,{storeName:!0})}a=!0}}if(!a){var d=t.scope.createIdentifier(n);if(n!==d){o.name=d,e.overwrite(o.node.start,o.node.end,d,{storeName:!0});for(var g=0,m=o.instances;g<m.length;g+=1){var y=m[g];y.rewritten=!0,e.overwrite(y.start,y.end,d,{storeName:!0})}}}}})},BlockStatement}(p);function isArguments(e){return"Identifier"===e.type&&"arguments"===e.name}function spread(e,t,n,r,i){for(var o=t.length,a=-1;o--;){var s=t[o];s&&"SpreadElement"===s.type&&(isArguments(s.argument)&&e.overwrite(s.argument.start,s.argument.end,r),a=o)}if(-1===a)return!1;if(i){for(o=0;o<t.length;o+=1){var l=t[o];"SpreadElement"===l.type?e.remove(l.start,l.argument.start):(e.prependRight(l.start,"["),e.prependRight(l.end,"]"))}return!0}var u=t[a],c=t[a-1];for(c?e.overwrite(c.end,u.start," ].concat( "):(e.remove(n,u.start),e.overwrite(u.end,t[1].start,".concat( ")),o=a;o<t.length;o+=1)(u=t[o])&&("SpreadElement"===u.type?e.remove(u.start,u.argument.start):(e.appendLeft(u.start,"["),e.appendLeft(u.end,"]")));return!0}var y=function(e){function ArrayExpression(){e.apply(this,arguments)}return e&&(ArrayExpression.__proto__=e),ArrayExpression.prototype=Object.create(e&&e.prototype),ArrayExpression.prototype.constructor=ArrayExpression,ArrayExpression.prototype.initialise=function initialise(t){if(t.spreadRest&&this.elements.length)for(var n=this.findLexicalBoundary(),r=this.elements.length;r--;){var i=this.elements[r];i&&"SpreadElement"===i.type&&isArguments(i.argument)&&(this.argumentsArrayAlias=n.getArgumentsArrayAlias())}e.prototype.initialise.call(this,t)},ArrayExpression.prototype.transpile=function transpile(t,n){if(e.prototype.transpile.call(this,t,n),n.spreadRest){if(this.elements.length){var r=this.elements[this.elements.length-1];r&&/\s*,/.test(t.original.slice(r.end,this.end))&&t.overwrite(r.end,this.end-1," ")}if(1===this.elements.length){var i=this.elements[0];i&&"SpreadElement"===i.type&&(isArguments(i.argument)?t.overwrite(this.start,this.end,"[].concat( "+this.argumentsArrayAlias+" )"):(t.overwrite(this.start,i.argument.start,"[].concat( "),t.overwrite(i.end,this.end," )")))}else{spread(t,this.elements,this.start,this.argumentsArrayAlias)&&t.overwrite(this.end-1,this.end,")")}}},ArrayExpression}(p);function removeTrailingComma(e,t){for(;")"!==e.original[t];){if(","===e.original[t])return void e.remove(t,t+1);"/"===e.original[t]&&(t=e.original.indexOf("/"===e.original[t+1]?"\n":"*/",t)+1),t+=1}}var v=function(e){function ArrowFunctionExpression(){e.apply(this,arguments)}return e&&(ArrowFunctionExpression.__proto__=e),ArrowFunctionExpression.prototype=Object.create(e&&e.prototype),ArrowFunctionExpression.prototype.constructor=ArrowFunctionExpression,ArrowFunctionExpression.prototype.initialise=function initialise(t){this.body.createScope(),e.prototype.initialise.call(this,t)},ArrowFunctionExpression.prototype.transpile=function transpile(t,n){var r=1===this.params.length&&this.start===this.params[0].start;if(n.arrow||this.needsArguments(n)){for(var i=this.body.start;"="!==t.original[i];)i-=1;t.remove(i,this.body.start),e.prototype.transpile.call(this,t,n),r&&(t.prependRight(this.params[0].start,"("),t.appendLeft(this.params[0].end,")")),this.parent&&"ExpressionStatement"===this.parent.type?t.prependRight(this.start,"!function"):t.prependRight(this.start,"function ")}else e.prototype.transpile.call(this,t,n);n.trailingFunctionCommas&&this.params.length&&!r&&removeTrailingComma(t,this.params[this.params.length-1].end)},ArrowFunctionExpression.prototype.needsArguments=function needsArguments(e){return e.spreadRest&&this.params.filter(function(e){return"RestElement"===e.type}).length>0},ArrowFunctionExpression}(p);function checkConst(e,t){var n=t.findDeclaration(e.name);if(n&&"const"===n.kind)throw new d(e.name+" is read-only",e)}var _=function(e){function AssignmentExpression(){e.apply(this,arguments)}return e&&(AssignmentExpression.__proto__=e),AssignmentExpression.prototype=Object.create(e&&e.prototype),AssignmentExpression.prototype.constructor=AssignmentExpression,AssignmentExpression.prototype.initialise=function initialise(t){if("Identifier"===this.left.type){var n=this.findScope(!1).findDeclaration(this.left.name),r=n&&n.node.ancestor(3);r&&"ForStatement"===r.type&&r.body.contains(this)&&(r.reassigned[this.left.name]=!0)}e.prototype.initialise.call(this,t)},AssignmentExpression.prototype.transpile=function transpile(t,n){"Identifier"===this.left.type&&checkConst(this.left,this.findScope(!1)),"**="===this.operator&&n.exponentiation?this.transpileExponentiation(t,n):/Pattern/.test(this.left.type)&&n.destructuring&&this.transpileDestructuring(t,n),e.prototype.transpile.call(this,t,n)},AssignmentExpression.prototype.transpileDestructuring=function transpileDestructuring(e){var t=this,n=this.findScope(!0),r=this.findScope(!1),i=n.createDeclaration("assign");e.appendRight(this.left.end,"("+i),e.appendLeft(this.right.end,", ");var o=[];destructure(e,function(e){return n.createDeclaration(e)},function(e){var t=r.resolveName(e.name);return checkConst(e,r),t},this.left,i,!0,o);var a=", ";o.forEach(function(e,n){n===o.length-1&&(a=""),e(t.end,"",a)}),"ExpressionStatement"===this.unparenthesizedParent().type?e.prependRight(this.end,")"):e.appendRight(this.end,", "+i+")")},AssignmentExpression.prototype.transpileExponentiation=function transpileExponentiation(e){for(var t,n=this.findScope(!1),r=this.left.end;"*"!==e.original[r];)r+=1;e.remove(r,r+2);var i=this.left.unparenthesize();if("Identifier"===i.type)t=n.resolveName(i.name);else if("MemberExpression"===i.type){var o,a,s=!1,l=!1,u=this.findNearest(/(?:Statement|Declaration)$/),c=u.getIndentation();"Identifier"===i.property.type?a=i.computed?n.resolveName(i.property.name):i.property.name:(a=n.createDeclaration("property"),l=!0),"Identifier"===i.object.type?o=n.resolveName(i.object.name):(o=n.createDeclaration("object"),s=!0),i.start===u.start?s&&l?(e.prependRight(u.start,o+" = "),e.overwrite(i.object.end,i.property.start,";\n"+c+a+" = "),e.overwrite(i.property.end,i.end,";\n"+c+o+"["+a+"]")):s?(e.prependRight(u.start,o+" = "),e.appendLeft(i.object.end,";\n"+c),e.appendLeft(i.object.end,o)):l&&(e.prependRight(i.property.start,a+" = "),e.appendLeft(i.property.end,";\n"+c),e.move(i.property.start,i.property.end,this.start),e.appendLeft(i.object.end,"["+a+"]"),e.remove(i.object.end,i.property.start),e.remove(i.property.end,i.end)):(s&&l?(e.prependRight(i.start,"( "+o+" = "),e.overwrite(i.object.end,i.property.start,", "+a+" = "),e.overwrite(i.property.end,i.end,", "+o+"["+a+"]")):s?(e.prependRight(i.start,"( "+o+" = "),e.appendLeft(i.object.end,", "+o)):l&&(e.prependRight(i.property.start,"( "+a+" = "),e.appendLeft(i.property.end,", "),e.move(i.property.start,i.property.end,i.start),e.overwrite(i.object.end,i.property.start,"["+a+"]"),e.remove(i.property.end,i.end)),l&&e.appendLeft(this.end," )")),t=o+(i.computed||l?"["+a+"]":"."+a)}e.prependRight(this.right.start,"Math.pow( "+t+", "),e.appendLeft(this.right.end," )")},AssignmentExpression}(p),b=function(e){function BinaryExpression(){e.apply(this,arguments)}return e&&(BinaryExpression.__proto__=e),BinaryExpression.prototype=Object.create(e&&e.prototype),BinaryExpression.prototype.constructor=BinaryExpression,BinaryExpression.prototype.transpile=function transpile(t,n){"**"===this.operator&&n.exponentiation&&(t.prependRight(this.start,"Math.pow( "),t.overwrite(this.left.end,this.right.start,", "),t.appendLeft(this.end," )")),e.prototype.transpile.call(this,t,n)},BinaryExpression}(p),x=/(?:For(?:In|Of)?|While)Statement/,w=function(e){function BreakStatement(){e.apply(this,arguments)}return e&&(BreakStatement.__proto__=e),BreakStatement.prototype=Object.create(e&&e.prototype),BreakStatement.prototype.constructor=BreakStatement,BreakStatement.prototype.initialise=function initialise(){var e=this.findNearest(x),t=this.findNearest("SwitchCase");e&&(!t||e.depth>t.depth)&&(e.canBreak=!0,this.loop=e)},BreakStatement.prototype.transpile=function transpile(e){if(this.loop&&this.loop.shouldRewriteAsFunction){if(this.label)throw new d("Labels are not currently supported in a loop with locally-scoped variables",this);e.overwrite(this.start,this.start+5,"return 'break'")}},BreakStatement}(p),S=function(e){function CallExpression(){e.apply(this,arguments)}return e&&(CallExpression.__proto__=e),CallExpression.prototype=Object.create(e&&e.prototype),CallExpression.prototype.constructor=CallExpression,CallExpression.prototype.initialise=function initialise(t){if(t.spreadRest&&this.arguments.length>1)for(var n=this.findLexicalBoundary(),r=this.arguments.length;r--;){var i=this.arguments[r];"SpreadElement"===i.type&&isArguments(i.argument)&&(this.argumentsArrayAlias=n.getArgumentsArrayAlias())}e.prototype.initialise.call(this,t)},CallExpression.prototype.transpile=function transpile(t,n){if(n.spreadRest&&this.arguments.length){var r,i=!1,o=this.arguments[0];if(1===this.arguments.length?"SpreadElement"===o.type&&(t.remove(o.start,o.argument.start),i=!0):i=spread(t,this.arguments,o.start,this.argumentsArrayAlias),i){var a=null;if("Super"===this.callee.type?a=this.callee:"MemberExpression"===this.callee.type&&"Super"===this.callee.object.type&&(a=this.callee.object),a||"MemberExpression"!==this.callee.type)r="void 0";else if("Identifier"===this.callee.object.type)r=this.callee.object.name;else{r=this.findScope(!0).createDeclaration("ref");var s=this.callee.object;t.prependRight(s.start,"("+r+" = "),t.appendLeft(s.end,")")}t.appendLeft(this.callee.end,".apply"),a?(a.noCall=!0,this.arguments.length>1&&("SpreadElement"!==o.type&&t.prependRight(o.start,"[ "),t.appendLeft(this.arguments[this.arguments.length-1].end," )"))):1===this.arguments.length?t.prependRight(o.start,r+", "):("SpreadElement"===o.type?t.appendLeft(o.start,r+", "):t.appendLeft(o.start,r+", [ "),t.appendLeft(this.arguments[this.arguments.length-1].end," )"))}}n.trailingFunctionCommas&&this.arguments.length&&removeTrailingComma(t,this.arguments[this.arguments.length-1].end),e.prototype.transpile.call(this,t,n)},CallExpression}(p),E=function(e){function ClassBody(){e.apply(this,arguments)}return e&&(ClassBody.__proto__=e),ClassBody.prototype=Object.create(e&&e.prototype),ClassBody.prototype.constructor=ClassBody,ClassBody.prototype.transpile=function transpile(t,n,r,i){var o=this;if(n.classes){var a=this.parent.name,s=t.getIndentString(),l=this.getIndentation()+(r?s:""),u=l+s,c=findIndex(this.body,function(e){return"constructor"===e.kind}),p=this.body[c],h="",d="";if(this.body.length?(t.remove(this.start,this.body[0].start),t.remove(this.body[this.body.length-1].end,this.end)):t.remove(this.start,this.end),p){p.value.body.isConstructorBody=!0;var g=this.body[c-1],m=this.body[c+1];c>0&&(t.remove(g.end,p.start),t.move(p.start,m?m.start:this.end-1,this.body[0].start)),r||t.appendLeft(p.end,";")}var y=!1!==this.program.options.namedFunctionExpressions,v=y||this.parent.superClass||"ClassDeclaration"!==this.parent.type;if(this.parent.superClass){var _="if ( "+i+" ) "+a+".__proto__ = "+i+";\n"+l+a+".prototype = Object.create( "+i+" && "+i+".prototype );\n"+l+a+".prototype.constructor = "+a+";";if(p)h+="\n\n"+l+_;else h+=(_="function "+a+" () {"+(i?"\n"+u+i+".apply(this, arguments);\n"+l+"}":"}")+(r?"":";")+(this.body.length?"\n\n"+l:"")+_)+"\n\n"+l}else if(!p){var b="function "+(v?a+" ":"")+"() {}";"ClassDeclaration"===this.parent.type&&(b+=";"),this.body.length&&(b+="\n\n"+l),h+=b}var x,w,S=this.findScope(!1),E=[],P=[];if(this.body.forEach(function(e,n){if("constructor"!==e.kind){if(e.static){var r=" "==t.original[e.start+6]?7:6;t.remove(e.start,e.start+r)}var i,s="method"!==e.kind,u=e.key.name;(f[u]||e.value.body.scope.references[u])&&(u=S.createIdentifier(u));var p=!1;if(e.computed||"Literal"!==e.key.type||(p=!0,e.computed=!0),s){if(e.computed)throw new Error("Computed accessor properties are not currently supported");t.remove(e.start,e.key.start),e.static?(~P.indexOf(e.key.name)||P.push(e.key.name),w||(w=S.createIdentifier("staticAccessors")),i=""+w):(~E.indexOf(e.key.name)||E.push(e.key.name),x||(x=S.createIdentifier("prototypeAccessors")),i=""+x)}else i=e.static?""+a:a+".prototype";e.computed||(i+="."),(c>0&&n===c+1||0===n&&c===o.body.length-1)&&(i="\n\n"+l+i);var h=e.key.end;if(e.computed)if(p)t.prependRight(e.key.start,"["),t.appendLeft(e.key.end,"]");else{for(;"]"!==t.original[h];)h+=1;h+=1}var d=e.computed||s||!y?"":u+" ",g=(s?"."+e.kind:"")+" = function"+(e.value.generator?"* ":" ")+d;t.remove(h,e.value.start),t.prependRight(e.value.start,g),t.appendLeft(e.end,";"),e.value.generator&&t.remove(e.start,e.key.start),t.prependRight(e.start,i)}else{var m=v?" "+a:"";t.overwrite(e.key.start,e.key.end,"function"+m)}}),E.length||P.length){var C=[],k=[];E.length&&(C.push("var "+x+" = { "+E.map(function(e){return e+": { configurable: true }"}).join(",")+" };"),k.push("Object.defineProperties( "+a+".prototype, "+x+" );")),P.length&&(C.push("var "+w+" = { "+P.map(function(e){return e+": { configurable: true }"}).join(",")+" };"),k.push("Object.defineProperties( "+a+", "+w+" );")),p&&(h+="\n\n"+l),h+=C.join("\n"+l),p||(h+="\n\n"+l),d+="\n\n"+l+k.join("\n"+l)}p?t.appendLeft(p.end,h):t.prependRight(this.start,h),t.appendLeft(this.end,d)}e.prototype.transpile.call(this,t,n)},ClassBody}(p);function deindent(e,t){var n=e.start,r=e.end,i=t.getIndentString(),o=i.length,a=n-o;e.program.indentExclusions[a]||t.original.slice(a,n)!==i||t.remove(a,n);for(var s,l=new RegExp(i+"\\S","g"),u=t.original.slice(n,r);s=l.exec(u);){var c=n+s.index;e.program.indentExclusions[c]||t.remove(c,c+o)}}var P=function(e){function ClassDeclaration(){e.apply(this,arguments)}return e&&(ClassDeclaration.__proto__=e),ClassDeclaration.prototype=Object.create(e&&e.prototype),ClassDeclaration.prototype.constructor=ClassDeclaration,ClassDeclaration.prototype.initialise=function initialise(t){this.id?(this.name=this.id.name,this.findScope(!0).addDeclaration(this.id,"class")):this.name=this.findScope(!0).createIdentifier("defaultExport"),e.prototype.initialise.call(this,t)},ClassDeclaration.prototype.transpile=function transpile(e,t){if(t.classes){this.superClass||deindent(this.body,e);var n=this.superClass&&(this.superClass.name||"superclass"),r=this.getIndentation(),i=r+e.getIndentString(),o="ExportDefaultDeclaration"===this.parent.type;o&&e.remove(this.parent.start,this.start);var a=this.start;this.id?(e.overwrite(a,this.id.start,"var "),a=this.id.end):e.prependLeft(a,"var "+this.name),this.superClass?this.superClass.end===this.body.start?(e.remove(a,this.superClass.start),e.appendLeft(a," = (function ("+n+") {\n"+i)):(e.overwrite(a,this.superClass.start," = "),e.overwrite(this.superClass.end,this.body.start,"(function ("+n+") {\n"+i)):a===this.body.start?e.appendLeft(a," = "):e.overwrite(a,this.body.start," = "),this.body.transpile(e,t,!!this.superClass,n);var s=o?"\n\n"+r+"export default "+this.name+";":"";this.superClass?(e.appendLeft(this.end,"\n\n"+i+"return "+this.name+";\n"+r+"}("),e.move(this.superClass.start,this.superClass.end,this.end),e.prependRight(this.end,"));"+s)):s&&e.prependRight(this.end,s)}else this.body.transpile(e,t,!1,null)},ClassDeclaration}(p),C=function(e){function ClassExpression(){e.apply(this,arguments)}return e&&(ClassExpression.__proto__=e),ClassExpression.prototype=Object.create(e&&e.prototype),ClassExpression.prototype.constructor=ClassExpression,ClassExpression.prototype.initialise=function initialise(t){this.name=(this.id?this.id.name:"VariableDeclarator"===this.parent.type?this.parent.id.name:"AssignmentExpression"!==this.parent.type?null:"Identifier"===this.parent.left.type?this.parent.left.name:"MemberExpression"===this.parent.left.type?this.parent.left.property.name:null)||this.findScope(!0).createIdentifier("anonymous"),e.prototype.initialise.call(this,t)},ClassExpression.prototype.transpile=function transpile(e,t){if(t.classes){var n=this.superClass&&(this.superClass.name||"superclass"),r=this.getIndentation(),i=r+e.getIndentString();this.superClass?(e.remove(this.start,this.superClass.start),e.remove(this.superClass.end,this.body.start),e.appendLeft(this.start,"(function ("+n+") {\n"+i)):e.overwrite(this.start,this.body.start,"(function () {\n"+i),this.body.transpile(e,t,!0,n);var o="\n\n"+i+"return "+this.name+";\n"+r+"}(";this.superClass?(e.appendLeft(this.end,o),e.move(this.superClass.start,this.superClass.end,this.end),e.prependRight(this.end,"))")):e.appendLeft(this.end,"\n\n"+i+"return "+this.name+";\n"+r+"}())")}else this.body.transpile(e,t,!1)},ClassExpression}(p),k=function(e){function ContinueStatement(){e.apply(this,arguments)}return e&&(ContinueStatement.__proto__=e),ContinueStatement.prototype=Object.create(e&&e.prototype),ContinueStatement.prototype.constructor=ContinueStatement,ContinueStatement.prototype.transpile=function transpile(e){if(this.findNearest(x).shouldRewriteAsFunction){if(this.label)throw new d("Labels are not currently supported in a loop with locally-scoped variables",this);e.overwrite(this.start,this.start+8,"return")}},ContinueStatement}(p),T=function(e){function ExportDefaultDeclaration(){e.apply(this,arguments)}return e&&(ExportDefaultDeclaration.__proto__=e),ExportDefaultDeclaration.prototype=Object.create(e&&e.prototype),ExportDefaultDeclaration.prototype.constructor=ExportDefaultDeclaration,ExportDefaultDeclaration.prototype.initialise=function initialise(t){if(t.moduleExport)throw new d("export is not supported",this);e.prototype.initialise.call(this,t)},ExportDefaultDeclaration}(p),A=function(e){function ExportNamedDeclaration(){e.apply(this,arguments)}return e&&(ExportNamedDeclaration.__proto__=e),ExportNamedDeclaration.prototype=Object.create(e&&e.prototype),ExportNamedDeclaration.prototype.constructor=ExportNamedDeclaration,ExportNamedDeclaration.prototype.initialise=function initialise(t){if(t.moduleExport)throw new d("export is not supported",this);e.prototype.initialise.call(this,t)},ExportNamedDeclaration}(p),O=function(e){function LoopStatement(){e.apply(this,arguments)}return e&&(LoopStatement.__proto__=e),LoopStatement.prototype=Object.create(e&&e.prototype),LoopStatement.prototype.constructor=LoopStatement,LoopStatement.prototype.findScope=function findScope(e){return e||!this.createdScope?this.parent.findScope(e):this.body.scope},LoopStatement.prototype.initialise=function initialise(t){if(this.body.createScope(),this.createdScope=!0,this.reassigned=Object.create(null),this.aliases=Object.create(null),e.prototype.initialise.call(this,t),t.letConst)for(var n=Object.keys(this.body.scope.declarations),r=n.length;r--;){for(var i=n[r],o=this.body.scope.declarations[i],a=o.instances.length;a--;){var s=o.instances[a].findNearest(/Function/);if(s&&s.depth>this.depth){this.shouldRewriteAsFunction=!0;break}}if(this.shouldRewriteAsFunction)break}},LoopStatement.prototype.transpile=function transpile(t,n){var r="ForOfStatement"!=this.type&&("BlockStatement"!==this.body.type||"BlockStatement"===this.body.type&&this.body.synthetic);if(this.shouldRewriteAsFunction){var i=this.getIndentation(),o=i+t.getIndentString(),a=this.args?" "+this.args.join(", ")+" ":"",s=this.params?" "+this.params.join(", ")+" ":"",l=this.findScope(!0),u=l.createIdentifier("loop"),c="var "+u+" = function ("+s+") "+(this.body.synthetic?"{\n"+i+t.getIndentString():""),p=(this.body.synthetic?"\n"+i+"}":"")+";\n\n"+i;if(t.prependRight(this.body.start,c),t.appendLeft(this.body.end,p),t.move(this.start,this.body.start,this.body.end),this.canBreak||this.canReturn){var h=l.createIdentifier("returned"),f="{\n"+o+"var "+h+" = "+u+"("+a+");\n";this.canBreak&&(f+="\n"+o+"if ( "+h+" === 'break' ) break;"),this.canReturn&&(f+="\n"+o+"if ( "+h+" ) return "+h+".v;"),f+="\n"+i+"}",t.prependRight(this.body.end,f)}else{var d=u+"("+a+");";"DoWhileStatement"===this.type?t.overwrite(this.start,this.body.start,"do {\n"+o+d+"\n"+i+"}"):t.prependRight(this.body.end,d)}}else r&&(t.appendLeft(this.body.start,"{ "),t.prependRight(this.body.end," }"));e.prototype.transpile.call(this,t,n)},LoopStatement}(p),I=function(e){function ForStatement(){e.apply(this,arguments)}return e&&(ForStatement.__proto__=e),ForStatement.prototype=Object.create(e&&e.prototype),ForStatement.prototype.constructor=ForStatement,ForStatement.prototype.findScope=function findScope(e){return e||!this.createdScope?this.parent.findScope(e):this.body.scope},ForStatement.prototype.transpile=function transpile(t,n){var r=this,i=this.getIndentation()+t.getIndentString();if(this.shouldRewriteAsFunction){var o="VariableDeclaration"===this.init.type?this.init.declarations.map(function(e){return extractNames(e.id)}):[],a=this.aliases;this.args=o.map(function(e){return e in r.aliases?r.aliases[e].outer:e}),this.params=o.map(function(e){return e in r.aliases?r.aliases[e].inner:e});var s=Object.keys(this.reassigned).map(function(e){return a[e].outer+" = "+a[e].inner+";"});if(s.length)if(this.body.synthetic)t.appendLeft(this.body.body[0].end,"; "+s.join(" "));else{var l=this.body.body[this.body.body.length-1];t.appendLeft(l.end,"\n\n"+i+s.join("\n"+i))}}e.prototype.transpile.call(this,t,n)},ForStatement}(O),R=function(e){function ForInStatement(){e.apply(this,arguments)}return e&&(ForInStatement.__proto__=e),ForInStatement.prototype=Object.create(e&&e.prototype),ForInStatement.prototype.constructor=ForInStatement,ForInStatement.prototype.findScope=function findScope(e){return e||!this.createdScope?this.parent.findScope(e):this.body.scope},ForInStatement.prototype.transpile=function transpile(t,n){var r=this,i="VariableDeclaration"===this.left.type;if(this.shouldRewriteAsFunction){var o=i?this.left.declarations.map(function(e){return extractNames(e.id)}):[];this.args=o.map(function(e){return e in r.aliases?r.aliases[e].outer:e}),this.params=o.map(function(e){return e in r.aliases?r.aliases[e].inner:e})}e.prototype.transpile.call(this,t,n);var a=i?this.left.declarations[0].id:this.left;"Identifier"!==a.type&&this.destructurePattern(t,a,i)},ForInStatement.prototype.destructurePattern=function destructurePattern(e,t,n){var r=this.findScope(!0),i=this.getIndentation()+e.getIndentString(),o=r.createIdentifier("ref"),a=this.body.body.length?this.body.body[0].start:this.body.start+1;e.move(t.start,t.end,a),e.prependRight(t.end,n?o:"var "+o);var s=[];destructure(e,function(e){return r.createIdentifier(e)},function(e){var t=e.name;return r.resolveName(t)},t,o,!1,s);var l=";\n"+i;s.forEach(function(e,t){t===s.length-1&&(l=";\n\n"+i),e(a,"",l)})},ForInStatement}(O),L=function(e){function ForOfStatement(){e.apply(this,arguments)}return e&&(ForOfStatement.__proto__=e),ForOfStatement.prototype=Object.create(e&&e.prototype),ForOfStatement.prototype.constructor=ForOfStatement,ForOfStatement.prototype.initialise=function initialise(t){if(t.forOf&&!t.dangerousForOf)throw new d("for...of statements are not supported. Use `transforms: { forOf: false }` to skip transformation and disable this error, or `transforms: { dangerousForOf: true }` if you know what you're doing",this);e.prototype.initialise.call(this,t)},ForOfStatement.prototype.transpile=function transpile(t,n){if(e.prototype.transpile.call(this,t,n),n.dangerousForOf)if(this.body.body[0]){var r=this.findScope(!0),i=this.getIndentation(),o=i+t.getIndentString(),a=r.createIdentifier("i"),s=r.createIdentifier("list");this.body.synthetic&&(t.prependRight(this.left.start,"{\n"+o),t.appendLeft(this.body.body[0].end,"\n"+i+"}"));var l=this.body.body[0].start;t.remove(this.left.end,this.right.start),t.move(this.left.start,this.left.end,l),t.prependRight(this.right.start,"var "+a+" = 0, "+s+" = "),t.appendLeft(this.right.end,"; "+a+" < "+s+".length; "+a+" += 1");var u="VariableDeclaration"===this.left.type,c=u?this.left.declarations[0].id:this.left;if("Identifier"!==c.type){var p=[],h=r.createIdentifier("ref");destructure(t,function(e){return r.createIdentifier(e)},function(e){var t=e.name;return r.resolveName(t)},c,h,!u,p);var f=";\n"+o;p.forEach(function(e,t){t===p.length-1&&(f=";\n\n"+o),e(l,"",f)}),u?(t.appendLeft(this.left.start+this.left.kind.length+1,h),t.appendLeft(this.left.end," = "+s+"["+a+"];\n"+o)):t.appendLeft(this.left.end,"var "+h+" = "+s+"["+a+"];\n"+o)}else t.appendLeft(this.left.end," = "+s+"["+a+"];\n\n"+o)}else"VariableDeclaration"===this.left.type&&"var"===this.left.kind?(t.remove(this.start,this.left.start),t.appendLeft(this.left.end,";"),t.remove(this.left.end,this.end)):t.remove(this.start,this.end)},ForOfStatement}(O),M=function(e){function FunctionDeclaration(){e.apply(this,arguments)}return e&&(FunctionDeclaration.__proto__=e),FunctionDeclaration.prototype=Object.create(e&&e.prototype),FunctionDeclaration.prototype.constructor=FunctionDeclaration,FunctionDeclaration.prototype.initialise=function initialise(t){if(this.generator&&t.generator)throw new d("Generators are not supported",this);this.body.createScope(),this.id&&this.findScope(!0).addDeclaration(this.id,"function"),e.prototype.initialise.call(this,t)},FunctionDeclaration.prototype.transpile=function transpile(t,n){e.prototype.transpile.call(this,t,n),n.trailingFunctionCommas&&this.params.length&&removeTrailingComma(t,this.params[this.params.length-1].end)},FunctionDeclaration}(p),j=function(e){function FunctionExpression(){e.apply(this,arguments)}return e&&(FunctionExpression.__proto__=e),FunctionExpression.prototype=Object.create(e&&e.prototype),FunctionExpression.prototype.constructor=FunctionExpression,FunctionExpression.prototype.initialise=function initialise(t){if(this.generator&&t.generator)throw new d("Generators are not supported",this);this.body.createScope(),this.id&&this.body.scope.addDeclaration(this.id,"function"),e.prototype.initialise.call(this,t);var n,r=this.parent;if(t.conciseMethodProperty&&"Property"===r.type&&"init"===r.kind&&r.method&&"Identifier"===r.key.type?n=r.key.name:t.classes&&"MethodDefinition"===r.type&&"method"===r.kind&&"Identifier"===r.key.type?n=r.key.name:this.id&&"Identifier"===this.id.type&&(n=this.id.alias||this.id.name),n)for(var i=0,o=this.params;i<o.length;i+=1){var a=o[i];if("Identifier"===a.type&&n===a.name){var s=this.body.scope,l=s.declarations[n],u=s.createIdentifier(n);a.alias=u;for(var c=0,p=l.instances;c<p.length;c+=1){p[c].alias=u}break}}},FunctionExpression.prototype.transpile=function transpile(t,n){e.prototype.transpile.call(this,t,n),n.trailingFunctionCommas&&this.params.length&&removeTrailingComma(t,this.params[this.params.length-1].end)},FunctionExpression}(p);function isReference(e,t){return"MemberExpression"===e.type?!e.computed&&isReference(e.object,e):"Identifier"===e.type?!t||!/(Function|Class)Expression/.test(t.type)&&("VariableDeclarator"===t.type?e===t.init:"MemberExpression"===t.type||"MethodDefinition"===t.type?t.computed||e===t.object:"ArrayPattern"!==t.type&&("Property"===t.type?"ObjectPattern"!==t.parent.type&&(t.computed||e===t.value):"MethodDefinition"!==t.type&&("ExportSpecifier"!==t.type||e===t.local))):void 0}var D=function(e){function Identifier(){e.apply(this,arguments)}return e&&(Identifier.__proto__=e),Identifier.prototype=Object.create(e&&e.prototype),Identifier.prototype.constructor=Identifier,Identifier.prototype.findScope=function findScope(e){return this.parent.params&&~this.parent.params.indexOf(this)?this.parent.body.scope:"FunctionExpression"===this.parent.type&&this===this.parent.id?this.parent.body.scope:this.parent.findScope(e)},Identifier.prototype.initialise=function initialise(e){if(isReference(this,this.parent)){if(e.arrow&&"arguments"===this.name&&!this.findScope(!1).contains(this.name)){var t=this.findLexicalBoundary(),n=this.findNearest("ArrowFunctionExpression"),r=this.findNearest(x);n&&n.depth>t.depth&&(this.alias=t.getArgumentsAlias()),r&&r.body.contains(this)&&r.depth>t.depth&&(this.alias=t.getArgumentsAlias())}this.findScope(!1).addReference(this)}},Identifier.prototype.transpile=function transpile(e){this.alias&&e.overwrite(this.start,this.end,this.alias,{storeName:!0,contentOnly:!0})},Identifier}(p),F=function(e){function IfStatement(){e.apply(this,arguments)}return e&&(IfStatement.__proto__=e),IfStatement.prototype=Object.create(e&&e.prototype),IfStatement.prototype.constructor=IfStatement,IfStatement.prototype.initialise=function initialise(t){e.prototype.initialise.call(this,t)},IfStatement.prototype.transpile=function transpile(t,n){("BlockStatement"!==this.consequent.type||"BlockStatement"===this.consequent.type&&this.consequent.synthetic)&&(t.appendLeft(this.consequent.start,"{ "),t.prependRight(this.consequent.end," }")),this.alternate&&"IfStatement"!==this.alternate.type&&("BlockStatement"!==this.alternate.type||"BlockStatement"===this.alternate.type&&this.alternate.synthetic)&&(t.appendLeft(this.alternate.start,"{ "),t.prependRight(this.alternate.end," }")),e.prototype.transpile.call(this,t,n)},IfStatement}(p),N=function(e){function ImportDeclaration(){e.apply(this,arguments)}return e&&(ImportDeclaration.__proto__=e),ImportDeclaration.prototype=Object.create(e&&e.prototype),ImportDeclaration.prototype.constructor=ImportDeclaration,ImportDeclaration.prototype.initialise=function initialise(t){if(t.moduleImport)throw new d("import is not supported",this);e.prototype.initialise.call(this,t)},ImportDeclaration}(p),B=function(e){function ImportDefaultSpecifier(){e.apply(this,arguments)}return e&&(ImportDefaultSpecifier.__proto__=e),ImportDefaultSpecifier.prototype=Object.create(e&&e.prototype),ImportDefaultSpecifier.prototype.constructor=ImportDefaultSpecifier,ImportDefaultSpecifier.prototype.initialise=function initialise(t){this.findScope(!0).addDeclaration(this.local,"import"),e.prototype.initialise.call(this,t)},ImportDefaultSpecifier}(p),z=function(e){function ImportSpecifier(){e.apply(this,arguments)}return e&&(ImportSpecifier.__proto__=e),ImportSpecifier.prototype=Object.create(e&&e.prototype),ImportSpecifier.prototype.constructor=ImportSpecifier,ImportSpecifier.prototype.initialise=function initialise(t){this.findScope(!0).addDeclaration(this.local,"import"),e.prototype.initialise.call(this,t)},ImportSpecifier}(p),U=function(e){function JSXAttribute(){e.apply(this,arguments)}return e&&(JSXAttribute.__proto__=e),JSXAttribute.prototype=Object.create(e&&e.prototype),JSXAttribute.prototype.constructor=JSXAttribute,JSXAttribute.prototype.transpile=function transpile(t,n){var r,i=this.name,o=i.start,a=i.name,s=this.value?this.value.start:this.name.end;t.overwrite(o,s,(/-/.test(r=a)?"'"+r+"'":r)+": "+(this.value?"":"true")),e.prototype.transpile.call(this,t,n)},JSXAttribute}(p);var V=function(e){function JSXClosingElement(){e.apply(this,arguments)}return e&&(JSXClosingElement.__proto__=e),JSXClosingElement.prototype=Object.create(e&&e.prototype),JSXClosingElement.prototype.constructor=JSXClosingElement,JSXClosingElement.prototype.transpile=function transpile(e){var t,n=!0,r=this.parent.children[this.parent.children.length-1];(r&&("JSXText"===(t=r).type&&!/\S/.test(t.value)&&/\n/.test(t.value))||this.parent.openingElement.attributes.length)&&(n=!1),e.overwrite(this.start,this.end,n?" )":")")},JSXClosingElement}(p);var G=function(e){function JSXClosingFragment(){e.apply(this,arguments)}return e&&(JSXClosingFragment.__proto__=e),JSXClosingFragment.prototype=Object.create(e&&e.prototype),JSXClosingFragment.prototype.constructor=JSXClosingFragment,JSXClosingFragment.prototype.transpile=function transpile(e){var t,n=!0,r=this.parent.children[this.parent.children.length-1];r&&("JSXText"===(t=r).type&&!/\S/.test(t.value)&&/\n/.test(t.value))&&(n=!1),e.overwrite(this.start,this.end,n?" )":")")},JSXClosingFragment}(p);function normalise(e,t){return e=e.replace(/\u00a0/g,"&nbsp;"),t&&/\n/.test(e)&&(e=e.replace(/\s+$/,"")),e=e.replace(/^\n\r?\s+/,"").replace(/\s*\n\r?\s*/gm," "),JSON.stringify(e)}var W=function(e){function JSXElement(){e.apply(this,arguments)}return e&&(JSXElement.__proto__=e),JSXElement.prototype=Object.create(e&&e.prototype),JSXElement.prototype.constructor=JSXElement,JSXElement.prototype.transpile=function transpile(t,n){e.prototype.transpile.call(this,t,n);var r=this.children.filter(function(e){return"JSXText"!==e.type||(/\S/.test(e.raw)||!/\n/.test(e.raw))});if(r.length){var i,o=this.openingElement.end;for(i=0;i<r.length;i+=1){var a=r[i];if("JSXExpressionContainer"===a.type&&"JSXEmptyExpression"===a.expression.type);else{var s="\n"===t.original[o]&&"JSXText"!==a.type?"":" ";t.appendLeft(o,","+s)}if("JSXText"===a.type){var l=normalise(a.value,i===r.length-1);t.overwrite(a.start,a.end,l)}o=a.end}}},JSXElement}(p),q=function(e){function JSXExpressionContainer(){e.apply(this,arguments)}return e&&(JSXExpressionContainer.__proto__=e),JSXExpressionContainer.prototype=Object.create(e&&e.prototype),JSXExpressionContainer.prototype.constructor=JSXExpressionContainer,JSXExpressionContainer.prototype.transpile=function transpile(t,n){t.remove(this.start,this.expression.start),t.remove(this.expression.end,this.end),e.prototype.transpile.call(this,t,n)},JSXExpressionContainer}(p),H=function(e){function JSXFragment(){e.apply(this,arguments)}return e&&(JSXFragment.__proto__=e),JSXFragment.prototype=Object.create(e&&e.prototype),JSXFragment.prototype.constructor=JSXFragment,JSXFragment}(W),X=function(e){function JSXOpeningElement(){e.apply(this,arguments)}return e&&(JSXOpeningElement.__proto__=e),JSXOpeningElement.prototype=Object.create(e&&e.prototype),JSXOpeningElement.prototype.constructor=JSXOpeningElement,JSXOpeningElement.prototype.transpile=function transpile(t,n){e.prototype.transpile.call(this,t,n),t.overwrite(this.start,this.name.start,this.program.jsx+"( ");var r="JSXIdentifier"===this.name.type&&this.name.name[0]===this.name.name[0].toLowerCase();r&&t.prependRight(this.name.start,"'");var i=this.attributes.length,o=this.name.end;if(i){var a,s,l,u=!1;for(a=0;a<i;a+=1)if("JSXSpreadAttribute"===this.attributes[a].type){u=!0;break}for(o=this.attributes[0].end,a=0;a<i;a+=1){var c=this.attributes[a];if(a>0&&(c.start===o?t.prependRight(o,", "):t.overwrite(o,c.start,", ")),u&&"JSXSpreadAttribute"!==c.type){var p=this.attributes[a-1],h=this.attributes[a+1];p&&"JSXSpreadAttribute"!==p.type||t.prependRight(c.start,"{ "),h&&"JSXSpreadAttribute"!==h.type||t.appendLeft(c.end," }")}o=c.end}if(u)if(1===i)l=r?"',":",";else{if(!this.program.options.objectAssign)throw new d("Mixed JSX attributes ending in spread requires specified objectAssign option with 'Object.assign' or polyfill helper.",this);l=r?"', "+this.program.options.objectAssign+"({},":", "+this.program.options.objectAssign+"({},",s=")"}else l=r?"', {":", {",s=" }";t.prependRight(this.name.end,l),s&&t.appendLeft(this.attributes[i-1].end,s)}else t.appendLeft(this.name.end,r?"', null":", null"),o=this.name.end;this.selfClosing?t.overwrite(o,this.end,this.attributes.length?")":" )"):t.remove(o,this.end)},JSXOpeningElement}(p),K=function(e){function JSXOpeningFragment(){e.apply(this,arguments)}return e&&(JSXOpeningFragment.__proto__=e),JSXOpeningFragment.prototype=Object.create(e&&e.prototype),JSXOpeningFragment.prototype.constructor=JSXOpeningFragment,JSXOpeningFragment.prototype.transpile=function transpile(e){e.overwrite(this.start,this.end,this.program.jsx+"( React.Fragment, null")},JSXOpeningFragment}(p),Z=function(e){function JSXSpreadAttribute(){e.apply(this,arguments)}return e&&(JSXSpreadAttribute.__proto__=e),JSXSpreadAttribute.prototype=Object.create(e&&e.prototype),JSXSpreadAttribute.prototype.constructor=JSXSpreadAttribute,JSXSpreadAttribute.prototype.transpile=function transpile(t,n){t.remove(this.start,this.argument.start),t.remove(this.argument.end,this.end),e.prototype.transpile.call(this,t,n)},JSXSpreadAttribute}(p),Y=createCommonjsModule(function(e,t){
/*!
 * regjsgen 0.3.0
 * Copyright 2014-2016 Benjamin Tan <https://demoneaux.github.io/>
 * Available under MIT license <https://github.com/demoneaux/regjsgen/blob/master/LICENSE>
 */
(function(){var n={function:!0,object:!0},r=n[typeof window]&&window||this,i=n.object&&t,o=n.object&&e&&!e.nodeType&&e,a=i&&o&&"object"==typeof l&&l;!a||a.global!==a&&a.window!==a&&a.self!==a||(r=a);var s=Object.prototype.hasOwnProperty,u=String.fromCharCode,c=Math.floor;function fromCodePoint(){var e,t,n=[],r=-1,i=arguments.length;if(!i)return"";for(var o="";++r<i;){var a=Number(arguments[r]);if(!isFinite(a)||a<0||a>1114111||c(a)!=a)throw RangeError("Invalid code point: "+a);a<=65535?n.push(a):(e=55296+((a-=65536)>>10),t=a%1024+56320,n.push(e,t)),(r+1==i||n.length>16384)&&(o+=u.apply(null,n),n.length=0)}return o}var p={};function assertType(e,t){if(-1==t.indexOf("|")){if(e==t)return;throw Error("Invalid node type: "+e+"; expected type: "+t)}if(!(t=s.call(p,t)?p[t]:p[t]=RegExp("^(?:"+t+")$")).test(e))throw Error("Invalid node type: "+e+"; expected types: "+t)}function generate(e){var t=e.type;if(s.call(h,t))return h[t](e);throw Error("Invalid node type: "+t)}function generateAtom(e){return assertType(e.type,"anchor|characterClass|characterClassEscape|dot|group|reference|value"),generate(e)}function generateClassAtom(e){return assertType(e.type,"anchor|characterClassEscape|characterClassRange|dot|value"),generate(e)}function generateTerm(e){return assertType(e.type,"anchor|characterClass|characterClassEscape|empty|group|quantifier|reference|unicodePropertyEscape|value"),generate(e)}var h={alternative:function generateAlternative(e){assertType(e.type,"alternative");for(var t=e.body,n=-1,r=t.length,i="";++n<r;)i+=generateTerm(t[n]);return i},anchor:function generateAnchor(e){switch(assertType(e.type,"anchor"),e.kind){case"start":return"^";case"end":return"$";case"boundary":return"\\b";case"not-boundary":return"\\B";default:throw Error("Invalid assertion")}},characterClass:function generateCharacterClass(e){assertType(e.type,"characterClass");var t=e.body,n=-1,r=t.length,i="";for(e.negative&&(i+="^");++n<r;)i+=generateClassAtom(t[n]);return"["+i+"]"},characterClassEscape:function generateCharacterClassEscape(e){return assertType(e.type,"characterClassEscape"),"\\"+e.value},characterClassRange:function generateCharacterClassRange(e){assertType(e.type,"characterClassRange");var t=e.min,n=e.max;if("characterClassRange"==t.type||"characterClassRange"==n.type)throw Error("Invalid character class range");return generateClassAtom(t)+"-"+generateClassAtom(n)},unicodePropertyEscape:function generateUnicodePropertyEscape(e){return assertType(e.type,"unicodePropertyEscape"),"\\"+(e.negative?"P":"p")+"{"+e.value+"}"},disjunction:function generateDisjunction(e){assertType(e.type,"disjunction");for(var t=e.body,n=-1,r=t.length,i="";++n<r;)0!=n&&(i+="|"),i+=generate(t[n]);return i},dot:function generateDot(e){return assertType(e.type,"dot"),"."},group:function generateGroup(e){assertType(e.type,"group");var t="";switch(e.behavior){case"normal":break;case"ignore":t+="?:";break;case"lookahead":t+="?=";break;case"negativeLookahead":t+="?!";break;default:throw Error("Invalid behaviour: "+e.behaviour)}for(var n=e.body,r=-1,i=n.length;++r<i;)t+=generate(n[r]);return"("+t+")"},quantifier:function generateQuantifier(e){assertType(e.type,"quantifier");var t="",n=e.min,r=e.max;return t=null==r?0==n?"*":1==n?"+":"{"+n+",}":n==r?"{"+n+"}":0==n&&1==r?"?":"{"+n+","+r+"}",e.greedy||(t+="?"),generateAtom(e.body[0])+t},reference:function generateReference(e){return assertType(e.type,"reference"),"\\"+e.matchIndex},value:function generateValue(e){assertType(e.type,"value");var t=e.kind,n=e.codePoint;switch(t){case"controlLetter":return"\\c"+fromCodePoint(n+64);case"hexadecimalEscape":return"\\x"+("00"+n.toString(16).toUpperCase()).slice(-2);case"identifier":return"\\"+fromCodePoint(n);case"null":return"\\"+n;case"octal":return"\\"+n.toString(8);case"singleEscape":switch(n){case 8:return"\\b";case 9:return"\\t";case 10:return"\\n";case 11:return"\\v";case 12:return"\\f";case 13:return"\\r";default:throw Error("Invalid codepoint: "+n)}case"symbol":return fromCodePoint(n);case"unicodeEscape":return"\\u"+("0000"+n.toString(16).toUpperCase()).slice(-4);case"unicodeCodePointEscape":return"\\u{"+n.toString(16).toUpperCase()+"}";default:throw Error("Unsupported node kind: "+t)}}};i&&o?i.generate=generate:r.regjsgen={generate:generate}}).call(l)}),J=createCommonjsModule(function(e){!function(){var t={parse:function parse(e,t,n){function addRaw(t){return t.raw=e.substring(t.range[0],t.range[1]),t}function updateRawStart(e,t){return e.range[0]=t,addRaw(e)}function createAnchor(e,t){return addRaw({type:"anchor",kind:e,range:[s-t,s]})}function createValue(e,t,n,r){return addRaw({type:"value",kind:e,codePoint:t,range:[n,r]})}function createEscaped(e,t,n,r){return r=r||0,createValue(e,t,s-(n.length+r),s)}function createCharacter(e){var t,n=e[0],r=n.charCodeAt(0);return a&&1===n.length&&r>=55296&&r<=56319&&(t=lookahead().charCodeAt(0))>=56320&&t<=57343?createValue("symbol",1024*(r-55296)+t-56320+65536,++s-2,s):createValue("symbol",r,s-1,s)}function createDisjunction(e,t,n){return addRaw({type:"disjunction",body:e,range:[t,n]})}function createGroup(e,t,n,r){return addRaw({type:"group",behavior:e,body:t,range:[n,r]})}function createQuantifier(e,t,n,r){return null==r&&(n=s-1,r=s),addRaw({type:"quantifier",min:e,max:t,greedy:!0,body:null,range:[n,r]})}function createAlternative(e,t,n){return addRaw({type:"alternative",body:e,range:[t,n]})}function createCharacterClass(e,t,n,r){return addRaw({type:"characterClass",body:e,negative:t,range:[n,r]})}function createClassRange(e,t,n,r){return e.codePoint>t.codePoint&&bail("invalid range in character class",e.raw+"-"+t.raw,n,r),addRaw({type:"characterClassRange",min:e,max:t,range:[n,r]})}function flattenBody(e){return"alternative"===e.type?e.body:[e]}function incr(t){t=t||1;var n=e.substring(s,s+t);return s+=t||1,n}function skip(e){match(e)||bail("character",e)}function match(t){if(e.indexOf(t,s)===s)return incr(t.length)}function lookahead(){return e[s]}function current(t){return e.indexOf(t,s)===s}function next(t){return e[s+1]===t}function matchReg(t){var n=e.substring(s).match(t);return n&&(n.range=[],n.range[0]=s,incr(n[0].length),n.range[1]=s),n}function parseDisjunction(){var e=[],t=s;for(e.push(parseAlternative());match("|");)e.push(parseAlternative());return 1===e.length?e[0]:createDisjunction(e,t,s)}function parseAlternative(){for(var e,t=[],n=s;e=parseTerm();)t.push(e);return 1===t.length?t[0]:createAlternative(t,n,s)}function parseTerm(){if(s>=e.length||current("|")||current(")"))return null;var t=match("^")?createAnchor("start",1):match("$")?createAnchor("end",1):match("\\b")?createAnchor("boundary",2):match("\\B")?createAnchor("not-boundary",2):parseGroup("(?=","lookahead","(?!","negativeLookahead");if(t)return t;var n,r=(n=matchReg(/^[^^$\\.*+?(){[|]/))?createCharacter(n):match(".")?addRaw({type:"dot",range:[s-1,s]}):match("\\")?((n=parseAtomEscape())||bail("atomEscape"),n):(n=parseCharacterClass())?n:parseGroup("(?:","ignore","(","normal");r||bail("Expected atom");var i=parseQuantifier()||!1;return i?(i.body=flattenBody(r),updateRawStart(i,r.range[0]),i):r}function parseGroup(e,t,n,r){var a=null,l=s;if(match(e))a=t;else{if(!match(n))return!1;a=r}var u=parseDisjunction();u||bail("Expected disjunction"),skip(")");var c=createGroup(a,flattenBody(u),l,s);return"normal"==a&&o&&i++,c}function parseQuantifier(){var e,t,n,r,i=s;return match("*")?t=createQuantifier(0):match("+")?t=createQuantifier(1):match("?")?t=createQuantifier(0,1):(e=matchReg(/^\{([0-9]+)\}/))?t=createQuantifier(n=parseInt(e[1],10),n,e.range[0],e.range[1]):(e=matchReg(/^\{([0-9]+),\}/))?t=createQuantifier(n=parseInt(e[1],10),void 0,e.range[0],e.range[1]):(e=matchReg(/^\{([0-9]+),([0-9]+)\}/))&&((n=parseInt(e[1],10))>(r=parseInt(e[2],10))&&bail("numbers out of order in {} quantifier","",i,s),t=createQuantifier(n,r,e.range[0],e.range[1])),t&&match("?")&&(t.greedy=!1,t.range[1]+=1),t}function parseUnicodeSurrogatePairEscape(e){var t,n;if(a&&"unicodeEscape"==e.kind&&(t=e.codePoint)>=55296&&t<=56319&&current("\\")&&next("u")){var r=s;s++;var i=parseClassEscape();"unicodeEscape"==i.kind&&(n=i.codePoint)>=56320&&n<=57343?(e.range[1]=i.range[1],e.codePoint=1024*(t-55296)+n-56320+65536,e.type="value",e.kind="unicodeCodePointEscape",addRaw(e)):s=r}return e}function parseClassEscape(){return parseAtomEscape(!0)}function parseAtomEscape(e){var t,n=s;if(t=parseDecimalEscape())return t;if(e){if(match("b"))return createEscaped("singleEscape",8,"\\b");match("B")&&bail("\\B not possible inside of CharacterClass","",n)}return t=parseCharacterEscape()}function parseDecimalEscape(){var e,t,n;if(e=matchReg(/^(?!0)\d+/)){t=e[0];var o=parseInt(e[0],10);return o<=i?(n=e[0],addRaw({type:"reference",matchIndex:parseInt(n,10),range:[s-1-n.length,s]})):(r.push(o),incr(-e[0].length),(e=matchReg(/^[0-7]{1,3}/))?createEscaped("octal",parseInt(e[0],8),e[0],1):updateRawStart(e=createCharacter(matchReg(/^[89]/)),e.range[0]-1))}return(e=matchReg(/^[0-7]{1,3}/))?(t=e[0],/^0{1,3}$/.test(t)?createEscaped("null",0,"0",t.length+1):createEscaped("octal",parseInt(t,8),t,1)):!!(e=matchReg(/^[dDsSwW]/))&&addRaw({type:"characterClassEscape",value:e[0],range:[s-2,s]})}function parseCharacterEscape(){var e,t,r,i;if(e=matchReg(/^[fnrtv]/)){var o=0;switch(e[0]){case"t":o=9;break;case"n":o=10;break;case"v":o=11;break;case"f":o=12;break;case"r":o=13}return createEscaped("singleEscape",o,"\\"+e[0])}return(e=matchReg(/^c([a-zA-Z])/))?createEscaped("controlLetter",e[1].charCodeAt(0)%32,e[1],2):(e=matchReg(/^x([0-9a-fA-F]{2})/))?createEscaped("hexadecimalEscape",parseInt(e[1],16),e[1],2):(e=matchReg(/^u([0-9a-fA-F]{4})/))?parseUnicodeSurrogatePairEscape(createEscaped("unicodeEscape",parseInt(e[1],16),e[1],2)):a&&(e=matchReg(/^u\{([0-9a-fA-F]+)\}/))?createEscaped("unicodeCodePointEscape",parseInt(e[1],16),e[1],4):n.unicodePropertyEscape&&a&&(e=matchReg(/^([pP])\{([^\}]+)\}/))?addRaw({type:"unicodePropertyEscape",negative:"P"===e[1],value:e[2],range:[e.range[0]-1,e.range[1]],raw:e[0]}):(r=lookahead(),i=new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮ̀-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁ҃-҇Ҋ-ԯԱ-Ֆՙա-և֑-ׇֽֿׁׂׅׄא-תװ-ײؐ-ؚؠ-٩ٮ-ۓە-ۜ۟-۪ۨ-ۼۿܐ-݊ݍ-ޱ߀-ߵߺࠀ-࠭ࡀ-࡛ࢠ-ࢲࣤ-ॣ०-९ॱ-ঃঅ-ঌএঐও-নপ-রলশ-হ়-ৄেৈো-ৎৗড়ঢ়য়-ৣ০-ৱਁ-ਃਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹ਼ਾ-ੂੇੈੋ-੍ੑਖ਼-ੜਫ਼੦-ੵઁ-ઃઅ-ઍએ-ઑઓ-નપ-રલળવ-હ઼-ૅે-ૉો-્ૐૠ-ૣ૦-૯ଁ-ଃଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହ଼-ୄେୈୋ-୍ୖୗଡ଼ଢ଼ୟ-ୣ୦-୯ୱஂஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹா-ூெ-ைொ-்ௐௗ௦-௯ఀ-ఃఅ-ఌఎ-ఐఒ-నప-హఽ-ౄె-ైొ-్ౕౖౘౙౠ-ౣ౦-౯ಁ-ಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹ಼-ೄೆ-ೈೊ-್ೕೖೞೠ-ೣ೦-೯ೱೲഁ-ഃഅ-ഌഎ-ഐഒ-ഺഽ-ൄെ-ൈൊ-ൎൗൠ-ൣ൦-൯ൺ-ൿංඃඅ-ඖක-නඳ-රලව-ෆ්ා-ුූෘ-ෟ෦-෯ෲෳก-ฺเ-๎๐-๙ກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ູົ-ຽເ-ໄໆ່-ໍ໐-໙ໜ-ໟༀ༘༙༠-༩༹༵༷༾-ཇཉ-ཬཱ-྄྆-ྗྙ-ྼ࿆က-၉ၐ-ႝႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፝-፟ᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜌᜎ-᜔ᜠ-᜴ᝀ-ᝓᝠ-ᝬᝮ-ᝰᝲᝳក-៓ៗៜ៝០-៩᠋-᠍᠐-᠙ᠠ-ᡷᢀ-ᢪᢰ-ᣵᤀ-ᤞᤠ-ᤫᤰ-᤻᥆-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉ᧐-᧙ᨀ-ᨛᨠ-ᩞ᩠-᩿᩼-᪉᪐-᪙ᪧ᪰-᪽ᬀ-ᭋ᭐-᭙᭫-᭳ᮀ-᯳ᰀ-᰷᱀-᱉ᱍ-ᱽ᳐-᳔᳒-ᳶ᳸᳹ᴀ-᷵᷼-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ‌‍‿⁀⁔ⁱⁿₐ-ₜ⃐-⃥⃜⃡-⃰ℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯ⵿-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⷠ-ⷿⸯ々-〇〡-〯〱-〵〸-〼ぁ-ゖ゙゚ゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘫꙀ-꙯ꙴ-꙽ꙿ-ꚝꚟ-꛱ꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞭꞰꞱꟷ-ꠧꡀ-ꡳꢀ-꣄꣐-꣙꣠-ꣷꣻ꤀-꤭ꤰ-꥓ꥠ-ꥼꦀ-꧀ꧏ-꧙ꧠ-ꧾꨀ-ꨶꩀ-ꩍ꩐-꩙ꩠ-ꩶꩺ-ꫂꫛ-ꫝꫠ-ꫯꫲ-꫶ꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭟꭤꭥꯀ-ꯪ꯬꯭꯰-꯹가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻ︀-️︠-︭︳︴﹍-﹏ﹰ-ﹴﹶ-ﻼ０-９Ａ-Ｚ＿ａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]"),36===r||95===r||r>=65&&r<=90||r>=97&&r<=122||r>=48&&r<=57||92===r||r>=128&&i.test(String.fromCharCode(r))?match("‌")?createEscaped("identifier",8204,"‌"):match("‍")?createEscaped("identifier",8205,"‍"):null:createEscaped("identifier",(t=incr()).charCodeAt(0),t,1))}function parseCharacterClass(){var e,t=s;return(e=matchReg(/^\[\^/))?(e=parseClassRanges(),skip("]"),createCharacterClass(e,!0,t,s)):match("[")?(e=parseClassRanges(),skip("]"),createCharacterClass(e,!1,t,s)):null}function parseClassRanges(){var e,t;return current("]")?[]:((t=parseClassAtom())||bail("classAtom"),(e=current("]")?[t]:parseHelperClassRanges(t))||bail("nonEmptyClassRanges"),e)}function parseHelperClassRanges(e){var t,n,r;if(current("-")&&!next("]")){skip("-"),(r=parseClassAtom())||bail("classAtom"),n=s;var i=parseClassRanges();return i||bail("classRanges"),t=e.range[0],"empty"===i.type?[createClassRange(e,r,t,n)]:[createClassRange(e,r,t,n)].concat(i)}return(r=parseNonemptyClassRangesNoDash())||bail("nonEmptyClassRangesNoDash"),[e].concat(r)}function parseNonemptyClassRangesNoDash(){var e=parseClassAtom();return e||bail("classAtom"),current("]")?e:parseHelperClassRanges(e)}function parseClassAtom(){return match("-")?createCharacter("-"):(e=matchReg(/^[^\\\]-]/))?createCharacter(e[0]):match("\\")?((e=parseClassEscape())||bail("classEscape"),parseUnicodeSurrogatePairEscape(e)):void 0;var e}function bail(t,n,r,i){r=null==r?s:r,i=null==i?r:i;var o=Math.max(0,r-10),a=Math.min(i+10,e.length),l="    "+e.substring(o,a),u="    "+new Array(r-o+1).join(" ")+"^";throw SyntaxError(t+" at position "+r+(n?": "+n:"")+"\n"+l+"\n"+u)}n||(n={});var r=[],i=0,o=!0,a=-1!==(t||"").indexOf("u"),s=0;""===(e=String(e))&&(e="(?:)");var l=parseDisjunction();l.range[1]!==e.length&&bail("Could not parse entire input - got stuck","",l.range[1]);for(var u=0;u<r.length;u++)if(r[u]<=i)return s=0,o=!1,parseDisjunction();return l}};e.exports?e.exports=t:window.regjsparser=t}()}),Q=createCommonjsModule(function(e,t){
/*! https://mths.be/regenerate v1.3.3 by @mathias | MIT license */
!function(n){var r=t,i=e&&e.exports==r&&e,o="object"==typeof l&&l;o.global!==o&&o.window!==o||(n=o);var a="A range’s `stop` value must be greater than or equal to the `start` value.",s="Invalid code point value. Code points range from U+000000 to U+10FFFF.",u=/\\x00([^0123456789]|$)/g,c={},p=c.hasOwnProperty,h=function(e,t){for(var n=-1,r=e.length;++n<r;)t(e[n],n)},f=c.toString,d=function(e){return"[object Array]"==f.call(e)},g=function(e){return"number"==typeof e||"[object Number]"==f.call(e)},m=function(e,t){var n=String(e);return n.length<t?("0000"+n).slice(-t):n},y=function(e){return Number(e).toString(16).toUpperCase()},v=[].slice,_=function(e){for(var t,n=-1,r=e.length,i=r-1,o=[],a=!0,s=0;++n<r;)if(t=e[n],a)o.push(t),s=t,a=!1;else if(t==s+1){if(n!=i){s=t;continue}a=!0,o.push(t+1)}else o.push(s+1,t),s=t;return a||o.push(t+1),o},b=function(e,t){for(var n,r,i=0,o=e.length;i<o;){if(n=e[i],r=e[i+1],t>=n&&t<r)return t==n?r==n+1?(e.splice(i,2),e):(e[i]=t+1,e):t==r-1?(e[i+1]=t,e):(e.splice(i,2,n,t,t+1,r),e);i+=2}return e},x=function(e,t,n){if(n<t)throw Error(a);for(var r,i,o=0;o<e.length;){if(r=e[o],i=e[o+1]-1,r>n)return e;if(t<=r&&n>=i)e.splice(o,2);else{if(t>=r&&n<i)return t==r?(e[o]=n+1,e[o+1]=i+1,e):(e.splice(o,2,r,t,n+1,i+1),e);if(t>=r&&t<=i)e[o+1]=t;else if(n>=r&&n<=i)return e[o]=n+1,e;o+=2}}return e},w=function(e,t){var n,r,i=0,o=null,a=e.length;if(t<0||t>1114111)throw RangeError(s);for(;i<a;){if(n=e[i],r=e[i+1],t>=n&&t<r)return e;if(t==n-1)return e[i]=t,e;if(n>t)return e.splice(null!=o?o+2:0,0,t,t+1),e;if(t==r)return t+1==e[i+2]?(e.splice(i,4,n,e[i+3]),e):(e[i+1]=t+1,e);o=i,i+=2}return e.push(t,t+1),e},S=function(e,t){for(var n,r,i=0,o=e.slice(),a=t.length;i<a;)o=(n=t[i])==(r=t[i+1]-1)?w(o,n):P(o,n,r),i+=2;return o},E=function(e,t){for(var n,r,i=0,o=e.slice(),a=t.length;i<a;)o=(n=t[i])==(r=t[i+1]-1)?b(o,n):x(o,n,r),i+=2;return o},P=function(e,t,n){if(n<t)throw Error(a);if(t<0||t>1114111||n<0||n>1114111)throw RangeError(s);for(var r,i,o=0,l=!1,u=e.length;o<u;){if(r=e[o],i=e[o+1],l){if(r==n+1)return e.splice(o-1,2),e;if(r>n)return e;r>=t&&r<=n&&(i>t&&i-1<=n?(e.splice(o,2),o-=2):(e.splice(o-1,2),o-=2))}else{if(r==n+1)return e[o]=t,e;if(r>n)return e.splice(o,0,t,n+1),e;if(t>=r&&t<i&&n+1<=i)return e;t>=r&&t<i||i==t?(e[o+1]=n+1,l=!0):t<=r&&n+1>=i&&(e[o]=t,e[o+1]=n+1,l=!0)}o+=2}return l||e.push(t,n+1),e},C=function(e,t){var n=0,r=e.length,i=e[n],o=e[r-1];if(r>=2&&(t<i||t>o))return!1;for(;n<r;){if(i=e[n],o=e[n+1],t>=i&&t<o)return!0;n+=2}return!1},k=function(e,t){for(var n,r=0,i=t.length,o=[];r<i;)n=t[r],C(e,n)&&o.push(n),++r;return _(o)},T=function(e){return!e.length},A=function(e){return 2==e.length&&e[0]+1==e[1]},O=function(e){for(var t,n,r=0,i=[],o=e.length;r<o;){for(t=e[r],n=e[r+1];t<n;)i.push(t),++t;r+=2}return i},I=Math.floor,R=function(e){return parseInt(I((e-65536)/1024)+55296,10)},L=function(e){return parseInt((e-65536)%1024+56320,10)},M=String.fromCharCode,j=function(e){return 9==e?"\\t":10==e?"\\n":12==e?"\\f":13==e?"\\r":92==e?"\\\\":36==e||e>=40&&e<=43||e>=45&&e<=47||63==e||e>=91&&e<=94||e>=123&&e<=125?"\\"+M(e):e>=32&&e<=126?M(e):e<=255?"\\x"+m(y(e),2):"\\u"+m(y(e),4)},D=function(e){return e<=65535?j(e):"\\u{"+e.toString(16).toUpperCase()+"}"},F=function(e){var t=e.length,n=e.charCodeAt(0);return n>=55296&&n<=56319&&t>1?1024*(n-55296)+e.charCodeAt(1)-56320+65536:n},N=function(e){var t,n,r="",i=0,o=e.length;if(A(e))return j(e[0]);for(;i<o;)r+=(t=e[i])==(n=e[i+1]-1)?j(t):t+1==n?j(t)+j(n):j(t)+"-"+j(n),i+=2;return"["+r+"]"},B=function(e){var t,n,r="",i=0,o=e.length;if(A(e))return D(e[0]);for(;i<o;)r+=(t=e[i])==(n=e[i+1]-1)?D(t):t+1==n?D(t)+D(n):D(t)+"-"+D(n),i+=2;return"["+r+"]"},z=function(e){for(var t,n,r=[],i=[],o=[],a=[],s=0,l=e.length;s<l;)t=e[s],n=e[s+1]-1,t<55296?(n<55296&&o.push(t,n+1),n>=55296&&n<=56319&&(o.push(t,55296),r.push(55296,n+1)),n>=56320&&n<=57343&&(o.push(t,55296),r.push(55296,56320),i.push(56320,n+1)),n>57343&&(o.push(t,55296),r.push(55296,56320),i.push(56320,57344),n<=65535?o.push(57344,n+1):(o.push(57344,65536),a.push(65536,n+1)))):t>=55296&&t<=56319?(n>=55296&&n<=56319&&r.push(t,n+1),n>=56320&&n<=57343&&(r.push(t,56320),i.push(56320,n+1)),n>57343&&(r.push(t,56320),i.push(56320,57344),n<=65535?o.push(57344,n+1):(o.push(57344,65536),a.push(65536,n+1)))):t>=56320&&t<=57343?(n>=56320&&n<=57343&&i.push(t,n+1),n>57343&&(i.push(t,57344),n<=65535?o.push(57344,n+1):(o.push(57344,65536),a.push(65536,n+1)))):t>57343&&t<=65535?n<=65535?o.push(t,n+1):(o.push(t,65536),a.push(65536,n+1)):a.push(t,n+1),s+=2;return{loneHighSurrogates:r,loneLowSurrogates:i,bmp:o,astral:a}},U=function(e){for(var t,n,r,i,o,a,s=[],l=[],u=!1,c=-1,p=e.length;++c<p;)if(t=e[c],n=e[c+1]){for(r=t[0],i=t[1],o=n[0],a=n[1],l=i;o&&r[0]==o[0]&&r[1]==o[1];)l=A(a)?w(l,a[0]):P(l,a[0],a[1]-1),r=(t=e[++c])[0],i=t[1],o=(n=e[c+1])&&n[0],a=n&&n[1],u=!0;s.push([r,u?l:i]),u=!1}else s.push(t);return V(s)},V=function(e){if(1==e.length)return e;for(var t=-1,n=-1;++t<e.length;){var r=e[t],i=r[1],o=i[0],a=i[1];for(n=t;++n<e.length;){var s=e[n],l=s[1],u=l[0],c=l[1];o==u&&a==c&&(A(s[0])?r[0]=w(r[0],s[0][0]):r[0]=P(r[0],s[0][0],s[0][1]-1),e.splice(n,1),--n)}}return e},G=function(e){if(!e.length)return[];for(var t,n,r,i,o,a,s=0,l=[],u=e.length;s<u;){t=e[s],n=e[s+1]-1,r=R(t),i=L(t),o=R(n);var c=57343==(a=L(n)),p=!1;r==o||56320==i&&c?(l.push([[r,o+1],[i,a+1]]),p=!0):l.push([[r,r+1],[i,57344]]),!p&&r+1<o&&(c?(l.push([[r+1,o+1],[56320,a+1]]),p=!0):l.push([[r+1,o],[56320,57344]])),p||l.push([[o,o+1],[56320,a+1]]),s+=2}return U(l)},W=function(e){var t=[];return h(e,function(e){var n=e[0],r=e[1];t.push(N(n)+N(r))}),t.join("|")},q=function(e,t,n){if(n)return B(e);var r=[],i=z(e),o=i.loneHighSurrogates,a=i.loneLowSurrogates,s=i.bmp,l=i.astral,u=!T(o),c=!T(a),p=G(l);return t&&(s=S(s,o),u=!1,s=S(s,a),c=!1),T(s)||r.push(N(s)),p.length&&r.push(W(p)),u&&r.push(N(o)+"(?![\\uDC00-\\uDFFF])"),c&&r.push("(?:[^\\uD800-\\uDBFF]|^)"+N(a)),r.join("|")},H=function(e){return arguments.length>1&&(e=v.call(arguments)),this instanceof H?(this.data=[],e?this.add(e):this):(new H).add(e)};H.version="1.3.3";var X=H.prototype;!function(e,t){var n;for(n in t)p.call(t,n)&&(e[n]=t[n])}(X,{add:function(e){var t=this;return null==e?t:e instanceof H?(t.data=S(t.data,e.data),t):(arguments.length>1&&(e=v.call(arguments)),d(e)?(h(e,function(e){t.add(e)}),t):(t.data=w(t.data,g(e)?e:F(e)),t))},remove:function(e){var t=this;return null==e?t:e instanceof H?(t.data=E(t.data,e.data),t):(arguments.length>1&&(e=v.call(arguments)),d(e)?(h(e,function(e){t.remove(e)}),t):(t.data=b(t.data,g(e)?e:F(e)),t))},addRange:function(e,t){return this.data=P(this.data,g(e)?e:F(e),g(t)?t:F(t)),this},removeRange:function(e,t){var n=g(e)?e:F(e),r=g(t)?t:F(t);return this.data=x(this.data,n,r),this},intersection:function(e){var t=e instanceof H?O(e.data):e;return this.data=k(this.data,t),this},contains:function(e){return C(this.data,g(e)?e:F(e))},clone:function(){var e=new H;return e.data=this.data.slice(0),e},toString:function(e){var t=q(this.data,!!e&&e.bmpOnly,!!e&&e.hasUnicodeFlag);return t?t.replace(u,"\\0$1"):"[]"},toRegExp:function(e){var t=this.toString(e&&-1!=e.indexOf("u")?{hasUnicodeFlag:!0}:null);return RegExp(t,e||"")},valueOf:function(){return O(this.data)}}),X.toArray=X.valueOf,r&&!r.nodeType?i?i.exports=H:r.regenerate=H:n.regenerate=H}(l)}),$=new Set(["General_Category","Script","Script_Extensions","Alphabetic","Any","ASCII","ASCII_Hex_Digit","Assigned","Bidi_Control","Bidi_Mirrored","Case_Ignorable","Cased","Changes_When_Casefolded","Changes_When_Casemapped","Changes_When_Lowercased","Changes_When_NFKC_Casefolded","Changes_When_Titlecased","Changes_When_Uppercased","Dash","Default_Ignorable_Code_Point","Deprecated","Diacritic","Emoji","Emoji_Component","Emoji_Modifier","Emoji_Modifier_Base","Emoji_Presentation","Extender","Grapheme_Base","Grapheme_Extend","Hex_Digit","ID_Continue","ID_Start","Ideographic","IDS_Binary_Operator","IDS_Trinary_Operator","Join_Control","Logical_Order_Exception","Lowercase","Math","Noncharacter_Code_Point","Pattern_Syntax","Pattern_White_Space","Quotation_Mark","Radical","Regional_Indicator","Sentence_Terminal","Soft_Dotted","Terminal_Punctuation","Unified_Ideograph","Uppercase","Variation_Selector","White_Space","XID_Continue","XID_Start"]),ee=new Map([["scx","Script_Extensions"],["sc","Script"],["gc","General_Category"],["AHex","ASCII_Hex_Digit"],["Alpha","Alphabetic"],["Bidi_C","Bidi_Control"],["Bidi_M","Bidi_Mirrored"],["Cased","Cased"],["CI","Case_Ignorable"],["CWCF","Changes_When_Casefolded"],["CWCM","Changes_When_Casemapped"],["CWKCF","Changes_When_NFKC_Casefolded"],["CWL","Changes_When_Lowercased"],["CWT","Changes_When_Titlecased"],["CWU","Changes_When_Uppercased"],["Dash","Dash"],["Dep","Deprecated"],["DI","Default_Ignorable_Code_Point"],["Dia","Diacritic"],["Ext","Extender"],["Gr_Base","Grapheme_Base"],["Gr_Ext","Grapheme_Extend"],["Hex","Hex_Digit"],["IDC","ID_Continue"],["Ideo","Ideographic"],["IDS","ID_Start"],["IDSB","IDS_Binary_Operator"],["IDST","IDS_Trinary_Operator"],["Join_C","Join_Control"],["LOE","Logical_Order_Exception"],["Lower","Lowercase"],["Math","Math"],["NChar","Noncharacter_Code_Point"],["Pat_Syn","Pattern_Syntax"],["Pat_WS","Pattern_White_Space"],["QMark","Quotation_Mark"],["Radical","Radical"],["RI","Regional_Indicator"],["SD","Soft_Dotted"],["STerm","Sentence_Terminal"],["Term","Terminal_Punctuation"],["UIdeo","Unified_Ideograph"],["Upper","Uppercase"],["VS","Variation_Selector"],["WSpace","White_Space"],["space","White_Space"],["XIDC","XID_Continue"],["XIDS","XID_Start"]]),te=function(e){if($.has(e))return e;if(ee.has(e))return ee.get(e);throw new Error("Unknown property: "+e)},ne=new Map([["General_Category",new Map([["C","Other"],["Cc","Control"],["cntrl","Control"],["Cf","Format"],["Cn","Unassigned"],["Co","Private_Use"],["Cs","Surrogate"],["L","Letter"],["LC","Cased_Letter"],["Ll","Lowercase_Letter"],["Lm","Modifier_Letter"],["Lo","Other_Letter"],["Lt","Titlecase_Letter"],["Lu","Uppercase_Letter"],["M","Mark"],["Combining_Mark","Mark"],["Mc","Spacing_Mark"],["Me","Enclosing_Mark"],["Mn","Nonspacing_Mark"],["N","Number"],["Nd","Decimal_Number"],["digit","Decimal_Number"],["Nl","Letter_Number"],["No","Other_Number"],["P","Punctuation"],["punct","Punctuation"],["Pc","Connector_Punctuation"],["Pd","Dash_Punctuation"],["Pe","Close_Punctuation"],["Pf","Final_Punctuation"],["Pi","Initial_Punctuation"],["Po","Other_Punctuation"],["Ps","Open_Punctuation"],["S","Symbol"],["Sc","Currency_Symbol"],["Sk","Modifier_Symbol"],["Sm","Math_Symbol"],["So","Other_Symbol"],["Z","Separator"],["Zl","Line_Separator"],["Zp","Paragraph_Separator"],["Zs","Space_Separator"],["Other","Other"],["Control","Control"],["Format","Format"],["Unassigned","Unassigned"],["Private_Use","Private_Use"],["Surrogate","Surrogate"],["Letter","Letter"],["Cased_Letter","Cased_Letter"],["Lowercase_Letter","Lowercase_Letter"],["Modifier_Letter","Modifier_Letter"],["Other_Letter","Other_Letter"],["Titlecase_Letter","Titlecase_Letter"],["Uppercase_Letter","Uppercase_Letter"],["Mark","Mark"],["Spacing_Mark","Spacing_Mark"],["Enclosing_Mark","Enclosing_Mark"],["Nonspacing_Mark","Nonspacing_Mark"],["Number","Number"],["Decimal_Number","Decimal_Number"],["Letter_Number","Letter_Number"],["Other_Number","Other_Number"],["Punctuation","Punctuation"],["Connector_Punctuation","Connector_Punctuation"],["Dash_Punctuation","Dash_Punctuation"],["Close_Punctuation","Close_Punctuation"],["Final_Punctuation","Final_Punctuation"],["Initial_Punctuation","Initial_Punctuation"],["Other_Punctuation","Other_Punctuation"],["Open_Punctuation","Open_Punctuation"],["Symbol","Symbol"],["Currency_Symbol","Currency_Symbol"],["Modifier_Symbol","Modifier_Symbol"],["Math_Symbol","Math_Symbol"],["Other_Symbol","Other_Symbol"],["Separator","Separator"],["Line_Separator","Line_Separator"],["Paragraph_Separator","Paragraph_Separator"],["Space_Separator","Space_Separator"]])],["Script",new Map([["Adlm","Adlam"],["Aghb","Caucasian_Albanian"],["Ahom","Ahom"],["Arab","Arabic"],["Armi","Imperial_Aramaic"],["Armn","Armenian"],["Avst","Avestan"],["Bali","Balinese"],["Bamu","Bamum"],["Bass","Bassa_Vah"],["Batk","Batak"],["Beng","Bengali"],["Bhks","Bhaiksuki"],["Bopo","Bopomofo"],["Brah","Brahmi"],["Brai","Braille"],["Bugi","Buginese"],["Buhd","Buhid"],["Cakm","Chakma"],["Cans","Canadian_Aboriginal"],["Cari","Carian"],["Cham","Cham"],["Cher","Cherokee"],["Copt","Coptic"],["Qaac","Coptic"],["Cprt","Cypriot"],["Cyrl","Cyrillic"],["Deva","Devanagari"],["Dsrt","Deseret"],["Dupl","Duployan"],["Egyp","Egyptian_Hieroglyphs"],["Elba","Elbasan"],["Ethi","Ethiopic"],["Geor","Georgian"],["Glag","Glagolitic"],["Gonm","Masaram_Gondi"],["Goth","Gothic"],["Gran","Grantha"],["Grek","Greek"],["Gujr","Gujarati"],["Guru","Gurmukhi"],["Hang","Hangul"],["Hani","Han"],["Hano","Hanunoo"],["Hatr","Hatran"],["Hebr","Hebrew"],["Hira","Hiragana"],["Hluw","Anatolian_Hieroglyphs"],["Hmng","Pahawh_Hmong"],["Hrkt","Katakana_Or_Hiragana"],["Hung","Old_Hungarian"],["Ital","Old_Italic"],["Java","Javanese"],["Kali","Kayah_Li"],["Kana","Katakana"],["Khar","Kharoshthi"],["Khmr","Khmer"],["Khoj","Khojki"],["Knda","Kannada"],["Kthi","Kaithi"],["Lana","Tai_Tham"],["Laoo","Lao"],["Latn","Latin"],["Lepc","Lepcha"],["Limb","Limbu"],["Lina","Linear_A"],["Linb","Linear_B"],["Lisu","Lisu"],["Lyci","Lycian"],["Lydi","Lydian"],["Mahj","Mahajani"],["Mand","Mandaic"],["Mani","Manichaean"],["Marc","Marchen"],["Mend","Mende_Kikakui"],["Merc","Meroitic_Cursive"],["Mero","Meroitic_Hieroglyphs"],["Mlym","Malayalam"],["Modi","Modi"],["Mong","Mongolian"],["Mroo","Mro"],["Mtei","Meetei_Mayek"],["Mult","Multani"],["Mymr","Myanmar"],["Narb","Old_North_Arabian"],["Nbat","Nabataean"],["Newa","Newa"],["Nkoo","Nko"],["Nshu","Nushu"],["Ogam","Ogham"],["Olck","Ol_Chiki"],["Orkh","Old_Turkic"],["Orya","Oriya"],["Osge","Osage"],["Osma","Osmanya"],["Palm","Palmyrene"],["Pauc","Pau_Cin_Hau"],["Perm","Old_Permic"],["Phag","Phags_Pa"],["Phli","Inscriptional_Pahlavi"],["Phlp","Psalter_Pahlavi"],["Phnx","Phoenician"],["Plrd","Miao"],["Prti","Inscriptional_Parthian"],["Rjng","Rejang"],["Runr","Runic"],["Samr","Samaritan"],["Sarb","Old_South_Arabian"],["Saur","Saurashtra"],["Sgnw","SignWriting"],["Shaw","Shavian"],["Shrd","Sharada"],["Sidd","Siddham"],["Sind","Khudawadi"],["Sinh","Sinhala"],["Sora","Sora_Sompeng"],["Soyo","Soyombo"],["Sund","Sundanese"],["Sylo","Syloti_Nagri"],["Syrc","Syriac"],["Tagb","Tagbanwa"],["Takr","Takri"],["Tale","Tai_Le"],["Talu","New_Tai_Lue"],["Taml","Tamil"],["Tang","Tangut"],["Tavt","Tai_Viet"],["Telu","Telugu"],["Tfng","Tifinagh"],["Tglg","Tagalog"],["Thaa","Thaana"],["Thai","Thai"],["Tibt","Tibetan"],["Tirh","Tirhuta"],["Ugar","Ugaritic"],["Vaii","Vai"],["Wara","Warang_Citi"],["Xpeo","Old_Persian"],["Xsux","Cuneiform"],["Yiii","Yi"],["Zanb","Zanabazar_Square"],["Zinh","Inherited"],["Qaai","Inherited"],["Zyyy","Common"],["Zzzz","Unknown"],["Adlam","Adlam"],["Caucasian_Albanian","Caucasian_Albanian"],["Arabic","Arabic"],["Imperial_Aramaic","Imperial_Aramaic"],["Armenian","Armenian"],["Avestan","Avestan"],["Balinese","Balinese"],["Bamum","Bamum"],["Bassa_Vah","Bassa_Vah"],["Batak","Batak"],["Bengali","Bengali"],["Bhaiksuki","Bhaiksuki"],["Bopomofo","Bopomofo"],["Brahmi","Brahmi"],["Braille","Braille"],["Buginese","Buginese"],["Buhid","Buhid"],["Chakma","Chakma"],["Canadian_Aboriginal","Canadian_Aboriginal"],["Carian","Carian"],["Cherokee","Cherokee"],["Coptic","Coptic"],["Cypriot","Cypriot"],["Cyrillic","Cyrillic"],["Devanagari","Devanagari"],["Deseret","Deseret"],["Duployan","Duployan"],["Egyptian_Hieroglyphs","Egyptian_Hieroglyphs"],["Elbasan","Elbasan"],["Ethiopic","Ethiopic"],["Georgian","Georgian"],["Glagolitic","Glagolitic"],["Masaram_Gondi","Masaram_Gondi"],["Gothic","Gothic"],["Grantha","Grantha"],["Greek","Greek"],["Gujarati","Gujarati"],["Gurmukhi","Gurmukhi"],["Hangul","Hangul"],["Han","Han"],["Hanunoo","Hanunoo"],["Hatran","Hatran"],["Hebrew","Hebrew"],["Hiragana","Hiragana"],["Anatolian_Hieroglyphs","Anatolian_Hieroglyphs"],["Pahawh_Hmong","Pahawh_Hmong"],["Katakana_Or_Hiragana","Katakana_Or_Hiragana"],["Old_Hungarian","Old_Hungarian"],["Old_Italic","Old_Italic"],["Javanese","Javanese"],["Kayah_Li","Kayah_Li"],["Katakana","Katakana"],["Kharoshthi","Kharoshthi"],["Khmer","Khmer"],["Khojki","Khojki"],["Kannada","Kannada"],["Kaithi","Kaithi"],["Tai_Tham","Tai_Tham"],["Lao","Lao"],["Latin","Latin"],["Lepcha","Lepcha"],["Limbu","Limbu"],["Linear_A","Linear_A"],["Linear_B","Linear_B"],["Lycian","Lycian"],["Lydian","Lydian"],["Mahajani","Mahajani"],["Mandaic","Mandaic"],["Manichaean","Manichaean"],["Marchen","Marchen"],["Mende_Kikakui","Mende_Kikakui"],["Meroitic_Cursive","Meroitic_Cursive"],["Meroitic_Hieroglyphs","Meroitic_Hieroglyphs"],["Malayalam","Malayalam"],["Mongolian","Mongolian"],["Mro","Mro"],["Meetei_Mayek","Meetei_Mayek"],["Multani","Multani"],["Myanmar","Myanmar"],["Old_North_Arabian","Old_North_Arabian"],["Nabataean","Nabataean"],["Nko","Nko"],["Nushu","Nushu"],["Ogham","Ogham"],["Ol_Chiki","Ol_Chiki"],["Old_Turkic","Old_Turkic"],["Oriya","Oriya"],["Osage","Osage"],["Osmanya","Osmanya"],["Palmyrene","Palmyrene"],["Pau_Cin_Hau","Pau_Cin_Hau"],["Old_Permic","Old_Permic"],["Phags_Pa","Phags_Pa"],["Inscriptional_Pahlavi","Inscriptional_Pahlavi"],["Psalter_Pahlavi","Psalter_Pahlavi"],["Phoenician","Phoenician"],["Miao","Miao"],["Inscriptional_Parthian","Inscriptional_Parthian"],["Rejang","Rejang"],["Runic","Runic"],["Samaritan","Samaritan"],["Old_South_Arabian","Old_South_Arabian"],["Saurashtra","Saurashtra"],["SignWriting","SignWriting"],["Shavian","Shavian"],["Sharada","Sharada"],["Siddham","Siddham"],["Khudawadi","Khudawadi"],["Sinhala","Sinhala"],["Sora_Sompeng","Sora_Sompeng"],["Soyombo","Soyombo"],["Sundanese","Sundanese"],["Syloti_Nagri","Syloti_Nagri"],["Syriac","Syriac"],["Tagbanwa","Tagbanwa"],["Takri","Takri"],["Tai_Le","Tai_Le"],["New_Tai_Lue","New_Tai_Lue"],["Tamil","Tamil"],["Tangut","Tangut"],["Tai_Viet","Tai_Viet"],["Telugu","Telugu"],["Tifinagh","Tifinagh"],["Tagalog","Tagalog"],["Thaana","Thaana"],["Tibetan","Tibetan"],["Tirhuta","Tirhuta"],["Ugaritic","Ugaritic"],["Vai","Vai"],["Warang_Citi","Warang_Citi"],["Old_Persian","Old_Persian"],["Cuneiform","Cuneiform"],["Yi","Yi"],["Zanabazar_Square","Zanabazar_Square"],["Inherited","Inherited"],["Common","Common"],["Unknown","Unknown"]])],["Script_Extensions",new Map([["Adlm","Adlam"],["Aghb","Caucasian_Albanian"],["Ahom","Ahom"],["Arab","Arabic"],["Armi","Imperial_Aramaic"],["Armn","Armenian"],["Avst","Avestan"],["Bali","Balinese"],["Bamu","Bamum"],["Bass","Bassa_Vah"],["Batk","Batak"],["Beng","Bengali"],["Bhks","Bhaiksuki"],["Bopo","Bopomofo"],["Brah","Brahmi"],["Brai","Braille"],["Bugi","Buginese"],["Buhd","Buhid"],["Cakm","Chakma"],["Cans","Canadian_Aboriginal"],["Cari","Carian"],["Cham","Cham"],["Cher","Cherokee"],["Copt","Coptic"],["Qaac","Coptic"],["Cprt","Cypriot"],["Cyrl","Cyrillic"],["Deva","Devanagari"],["Dsrt","Deseret"],["Dupl","Duployan"],["Egyp","Egyptian_Hieroglyphs"],["Elba","Elbasan"],["Ethi","Ethiopic"],["Geor","Georgian"],["Glag","Glagolitic"],["Gonm","Masaram_Gondi"],["Goth","Gothic"],["Gran","Grantha"],["Grek","Greek"],["Gujr","Gujarati"],["Guru","Gurmukhi"],["Hang","Hangul"],["Hani","Han"],["Hano","Hanunoo"],["Hatr","Hatran"],["Hebr","Hebrew"],["Hira","Hiragana"],["Hluw","Anatolian_Hieroglyphs"],["Hmng","Pahawh_Hmong"],["Hrkt","Katakana_Or_Hiragana"],["Hung","Old_Hungarian"],["Ital","Old_Italic"],["Java","Javanese"],["Kali","Kayah_Li"],["Kana","Katakana"],["Khar","Kharoshthi"],["Khmr","Khmer"],["Khoj","Khojki"],["Knda","Kannada"],["Kthi","Kaithi"],["Lana","Tai_Tham"],["Laoo","Lao"],["Latn","Latin"],["Lepc","Lepcha"],["Limb","Limbu"],["Lina","Linear_A"],["Linb","Linear_B"],["Lisu","Lisu"],["Lyci","Lycian"],["Lydi","Lydian"],["Mahj","Mahajani"],["Mand","Mandaic"],["Mani","Manichaean"],["Marc","Marchen"],["Mend","Mende_Kikakui"],["Merc","Meroitic_Cursive"],["Mero","Meroitic_Hieroglyphs"],["Mlym","Malayalam"],["Modi","Modi"],["Mong","Mongolian"],["Mroo","Mro"],["Mtei","Meetei_Mayek"],["Mult","Multani"],["Mymr","Myanmar"],["Narb","Old_North_Arabian"],["Nbat","Nabataean"],["Newa","Newa"],["Nkoo","Nko"],["Nshu","Nushu"],["Ogam","Ogham"],["Olck","Ol_Chiki"],["Orkh","Old_Turkic"],["Orya","Oriya"],["Osge","Osage"],["Osma","Osmanya"],["Palm","Palmyrene"],["Pauc","Pau_Cin_Hau"],["Perm","Old_Permic"],["Phag","Phags_Pa"],["Phli","Inscriptional_Pahlavi"],["Phlp","Psalter_Pahlavi"],["Phnx","Phoenician"],["Plrd","Miao"],["Prti","Inscriptional_Parthian"],["Rjng","Rejang"],["Runr","Runic"],["Samr","Samaritan"],["Sarb","Old_South_Arabian"],["Saur","Saurashtra"],["Sgnw","SignWriting"],["Shaw","Shavian"],["Shrd","Sharada"],["Sidd","Siddham"],["Sind","Khudawadi"],["Sinh","Sinhala"],["Sora","Sora_Sompeng"],["Soyo","Soyombo"],["Sund","Sundanese"],["Sylo","Syloti_Nagri"],["Syrc","Syriac"],["Tagb","Tagbanwa"],["Takr","Takri"],["Tale","Tai_Le"],["Talu","New_Tai_Lue"],["Taml","Tamil"],["Tang","Tangut"],["Tavt","Tai_Viet"],["Telu","Telugu"],["Tfng","Tifinagh"],["Tglg","Tagalog"],["Thaa","Thaana"],["Thai","Thai"],["Tibt","Tibetan"],["Tirh","Tirhuta"],["Ugar","Ugaritic"],["Vaii","Vai"],["Wara","Warang_Citi"],["Xpeo","Old_Persian"],["Xsux","Cuneiform"],["Yiii","Yi"],["Zanb","Zanabazar_Square"],["Zinh","Inherited"],["Qaai","Inherited"],["Zyyy","Common"],["Zzzz","Unknown"],["Adlam","Adlam"],["Caucasian_Albanian","Caucasian_Albanian"],["Arabic","Arabic"],["Imperial_Aramaic","Imperial_Aramaic"],["Armenian","Armenian"],["Avestan","Avestan"],["Balinese","Balinese"],["Bamum","Bamum"],["Bassa_Vah","Bassa_Vah"],["Batak","Batak"],["Bengali","Bengali"],["Bhaiksuki","Bhaiksuki"],["Bopomofo","Bopomofo"],["Brahmi","Brahmi"],["Braille","Braille"],["Buginese","Buginese"],["Buhid","Buhid"],["Chakma","Chakma"],["Canadian_Aboriginal","Canadian_Aboriginal"],["Carian","Carian"],["Cherokee","Cherokee"],["Coptic","Coptic"],["Cypriot","Cypriot"],["Cyrillic","Cyrillic"],["Devanagari","Devanagari"],["Deseret","Deseret"],["Duployan","Duployan"],["Egyptian_Hieroglyphs","Egyptian_Hieroglyphs"],["Elbasan","Elbasan"],["Ethiopic","Ethiopic"],["Georgian","Georgian"],["Glagolitic","Glagolitic"],["Masaram_Gondi","Masaram_Gondi"],["Gothic","Gothic"],["Grantha","Grantha"],["Greek","Greek"],["Gujarati","Gujarati"],["Gurmukhi","Gurmukhi"],["Hangul","Hangul"],["Han","Han"],["Hanunoo","Hanunoo"],["Hatran","Hatran"],["Hebrew","Hebrew"],["Hiragana","Hiragana"],["Anatolian_Hieroglyphs","Anatolian_Hieroglyphs"],["Pahawh_Hmong","Pahawh_Hmong"],["Katakana_Or_Hiragana","Katakana_Or_Hiragana"],["Old_Hungarian","Old_Hungarian"],["Old_Italic","Old_Italic"],["Javanese","Javanese"],["Kayah_Li","Kayah_Li"],["Katakana","Katakana"],["Kharoshthi","Kharoshthi"],["Khmer","Khmer"],["Khojki","Khojki"],["Kannada","Kannada"],["Kaithi","Kaithi"],["Tai_Tham","Tai_Tham"],["Lao","Lao"],["Latin","Latin"],["Lepcha","Lepcha"],["Limbu","Limbu"],["Linear_A","Linear_A"],["Linear_B","Linear_B"],["Lycian","Lycian"],["Lydian","Lydian"],["Mahajani","Mahajani"],["Mandaic","Mandaic"],["Manichaean","Manichaean"],["Marchen","Marchen"],["Mende_Kikakui","Mende_Kikakui"],["Meroitic_Cursive","Meroitic_Cursive"],["Meroitic_Hieroglyphs","Meroitic_Hieroglyphs"],["Malayalam","Malayalam"],["Mongolian","Mongolian"],["Mro","Mro"],["Meetei_Mayek","Meetei_Mayek"],["Multani","Multani"],["Myanmar","Myanmar"],["Old_North_Arabian","Old_North_Arabian"],["Nabataean","Nabataean"],["Nko","Nko"],["Nushu","Nushu"],["Ogham","Ogham"],["Ol_Chiki","Ol_Chiki"],["Old_Turkic","Old_Turkic"],["Oriya","Oriya"],["Osage","Osage"],["Osmanya","Osmanya"],["Palmyrene","Palmyrene"],["Pau_Cin_Hau","Pau_Cin_Hau"],["Old_Permic","Old_Permic"],["Phags_Pa","Phags_Pa"],["Inscriptional_Pahlavi","Inscriptional_Pahlavi"],["Psalter_Pahlavi","Psalter_Pahlavi"],["Phoenician","Phoenician"],["Miao","Miao"],["Inscriptional_Parthian","Inscriptional_Parthian"],["Rejang","Rejang"],["Runic","Runic"],["Samaritan","Samaritan"],["Old_South_Arabian","Old_South_Arabian"],["Saurashtra","Saurashtra"],["SignWriting","SignWriting"],["Shavian","Shavian"],["Sharada","Sharada"],["Siddham","Siddham"],["Khudawadi","Khudawadi"],["Sinhala","Sinhala"],["Sora_Sompeng","Sora_Sompeng"],["Soyombo","Soyombo"],["Sundanese","Sundanese"],["Syloti_Nagri","Syloti_Nagri"],["Syriac","Syriac"],["Tagbanwa","Tagbanwa"],["Takri","Takri"],["Tai_Le","Tai_Le"],["New_Tai_Lue","New_Tai_Lue"],["Tamil","Tamil"],["Tangut","Tangut"],["Tai_Viet","Tai_Viet"],["Telugu","Telugu"],["Tifinagh","Tifinagh"],["Tagalog","Tagalog"],["Thaana","Thaana"],["Tibetan","Tibetan"],["Tirhuta","Tirhuta"],["Ugaritic","Ugaritic"],["Vai","Vai"],["Warang_Citi","Warang_Citi"],["Old_Persian","Old_Persian"],["Cuneiform","Cuneiform"],["Yi","Yi"],["Zanabazar_Square","Zanabazar_Square"],["Inherited","Inherited"],["Common","Common"],["Unknown","Unknown"]])]]),re=function(e,t){var n=ne.get(e);if(!n)throw new Error("Unknown property `"+e+"`.");var r=n.get(t);if(r)return r;throw new Error("Unknown value `"+t+"` for property `"+e+"`.")},ie=new Map([[75,8490],[83,383],[107,8490],[115,383],[181,924],[197,8491],[223,7838],[229,8491],[383,83],[452,453],[453,452],[455,456],[456,455],[458,459],[459,458],[497,498],[498,497],[618,42926],[669,42930],[837,8126],[914,976],[917,1013],[920,1012],[921,8126],[922,1008],[924,181],[928,982],[929,1009],[931,962],[934,981],[937,8486],[952,1012],[962,931],[969,8486],[976,914],[977,1012],[981,934],[982,928],[1008,922],[1009,929],[1012,[920,977,952]],[1013,917],[1042,7296],[1044,7297],[1054,7298],[1057,7299],[1058,7301],[1066,7302],[1074,7296],[1076,7297],[1086,7298],[1089,7299],[1090,[7300,7301]],[1098,7302],[1122,7303],[1123,7303],[5024,43888],[5025,43889],[5026,43890],[5027,43891],[5028,43892],[5029,43893],[5030,43894],[5031,43895],[5032,43896],[5033,43897],[5034,43898],[5035,43899],[5036,43900],[5037,43901],[5038,43902],[5039,43903],[5040,43904],[5041,43905],[5042,43906],[5043,43907],[5044,43908],[5045,43909],[5046,43910],[5047,43911],[5048,43912],[5049,43913],[5050,43914],[5051,43915],[5052,43916],[5053,43917],[5054,43918],[5055,43919],[5056,43920],[5057,43921],[5058,43922],[5059,43923],[5060,43924],[5061,43925],[5062,43926],[5063,43927],[5064,43928],[5065,43929],[5066,43930],[5067,43931],[5068,43932],[5069,43933],[5070,43934],[5071,43935],[5072,43936],[5073,43937],[5074,43938],[5075,43939],[5076,43940],[5077,43941],[5078,43942],[5079,43943],[5080,43944],[5081,43945],[5082,43946],[5083,43947],[5084,43948],[5085,43949],[5086,43950],[5087,43951],[5088,43952],[5089,43953],[5090,43954],[5091,43955],[5092,43956],[5093,43957],[5094,43958],[5095,43959],[5096,43960],[5097,43961],[5098,43962],[5099,43963],[5100,43964],[5101,43965],[5102,43966],[5103,43967],[5104,5112],[5105,5113],[5106,5114],[5107,5115],[5108,5116],[5109,5117],[5112,5104],[5113,5105],[5114,5106],[5115,5107],[5116,5108],[5117,5109],[7296,[1042,1074]],[7297,[1044,1076]],[7298,[1054,1086]],[7299,[1057,1089]],[7300,[7301,1090]],[7301,[1058,7300,1090]],[7302,[1066,1098]],[7303,[1122,1123]],[7304,[42570,42571]],[7776,7835],[7835,7776],[7838,223],[8064,8072],[8065,8073],[8066,8074],[8067,8075],[8068,8076],[8069,8077],[8070,8078],[8071,8079],[8072,8064],[8073,8065],[8074,8066],[8075,8067],[8076,8068],[8077,8069],[8078,8070],[8079,8071],[8080,8088],[8081,8089],[8082,8090],[8083,8091],[8084,8092],[8085,8093],[8086,8094],[8087,8095],[8088,8080],[8089,8081],[8090,8082],[8091,8083],[8092,8084],[8093,8085],[8094,8086],[8095,8087],[8096,8104],[8097,8105],[8098,8106],[8099,8107],[8100,8108],[8101,8109],[8102,8110],[8103,8111],[8104,8096],[8105,8097],[8106,8098],[8107,8099],[8108,8100],[8109,8101],[8110,8102],[8111,8103],[8115,8124],[8124,8115],[8126,[837,921]],[8131,8140],[8140,8131],[8179,8188],[8188,8179],[8486,[937,969]],[8490,75],[8491,[197,229]],[42570,7304],[42571,7304],[42926,618],[42930,669],[42931,43859],[42932,42933],[42933,42932],[42934,42935],[42935,42934],[43859,42931],[43888,5024],[43889,5025],[43890,5026],[43891,5027],[43892,5028],[43893,5029],[43894,5030],[43895,5031],[43896,5032],[43897,5033],[43898,5034],[43899,5035],[43900,5036],[43901,5037],[43902,5038],[43903,5039],[43904,5040],[43905,5041],[43906,5042],[43907,5043],[43908,5044],[43909,5045],[43910,5046],[43911,5047],[43912,5048],[43913,5049],[43914,5050],[43915,5051],[43916,5052],[43917,5053],[43918,5054],[43919,5055],[43920,5056],[43921,5057],[43922,5058],[43923,5059],[43924,5060],[43925,5061],[43926,5062],[43927,5063],[43928,5064],[43929,5065],[43930,5066],[43931,5067],[43932,5068],[43933,5069],[43934,5070],[43935,5071],[43936,5072],[43937,5073],[43938,5074],[43939,5075],[43940,5076],[43941,5077],[43942,5078],[43943,5079],[43944,5080],[43945,5081],[43946,5082],[43947,5083],[43948,5084],[43949,5085],[43950,5086],[43951,5087],[43952,5088],[43953,5089],[43954,5090],[43955,5091],[43956,5092],[43957,5093],[43958,5094],[43959,5095],[43960,5096],[43961,5097],[43962,5098],[43963,5099],[43964,5100],[43965,5101],[43966,5102],[43967,5103],[66560,66600],[66561,66601],[66562,66602],[66563,66603],[66564,66604],[66565,66605],[66566,66606],[66567,66607],[66568,66608],[66569,66609],[66570,66610],[66571,66611],[66572,66612],[66573,66613],[66574,66614],[66575,66615],[66576,66616],[66577,66617],[66578,66618],[66579,66619],[66580,66620],[66581,66621],[66582,66622],[66583,66623],[66584,66624],[66585,66625],[66586,66626],[66587,66627],[66588,66628],[66589,66629],[66590,66630],[66591,66631],[66592,66632],[66593,66633],[66594,66634],[66595,66635],[66596,66636],[66597,66637],[66598,66638],[66599,66639],[66600,66560],[66601,66561],[66602,66562],[66603,66563],[66604,66564],[66605,66565],[66606,66566],[66607,66567],[66608,66568],[66609,66569],[66610,66570],[66611,66571],[66612,66572],[66613,66573],[66614,66574],[66615,66575],[66616,66576],[66617,66577],[66618,66578],[66619,66579],[66620,66580],[66621,66581],[66622,66582],[66623,66583],[66624,66584],[66625,66585],[66626,66586],[66627,66587],[66628,66588],[66629,66589],[66630,66590],[66631,66591],[66632,66592],[66633,66593],[66634,66594],[66635,66595],[66636,66596],[66637,66597],[66638,66598],[66639,66599],[66736,66776],[66737,66777],[66738,66778],[66739,66779],[66740,66780],[66741,66781],[66742,66782],[66743,66783],[66744,66784],[66745,66785],[66746,66786],[66747,66787],[66748,66788],[66749,66789],[66750,66790],[66751,66791],[66752,66792],[66753,66793],[66754,66794],[66755,66795],[66756,66796],[66757,66797],[66758,66798],[66759,66799],[66760,66800],[66761,66801],[66762,66802],[66763,66803],[66764,66804],[66765,66805],[66766,66806],[66767,66807],[66768,66808],[66769,66809],[66770,66810],[66771,66811],[66776,66736],[66777,66737],[66778,66738],[66779,66739],[66780,66740],[66781,66741],[66782,66742],[66783,66743],[66784,66744],[66785,66745],[66786,66746],[66787,66747],[66788,66748],[66789,66749],[66790,66750],[66791,66751],[66792,66752],[66793,66753],[66794,66754],[66795,66755],[66796,66756],[66797,66757],[66798,66758],[66799,66759],[66800,66760],[66801,66761],[66802,66762],[66803,66763],[66804,66764],[66805,66765],[66806,66766],[66807,66767],[66808,66768],[66809,66769],[66810,66770],[66811,66771],[68736,68800],[68737,68801],[68738,68802],[68739,68803],[68740,68804],[68741,68805],[68742,68806],[68743,68807],[68744,68808],[68745,68809],[68746,68810],[68747,68811],[68748,68812],[68749,68813],[68750,68814],[68751,68815],[68752,68816],[68753,68817],[68754,68818],[68755,68819],[68756,68820],[68757,68821],[68758,68822],[68759,68823],[68760,68824],[68761,68825],[68762,68826],[68763,68827],[68764,68828],[68765,68829],[68766,68830],[68767,68831],[68768,68832],[68769,68833],[68770,68834],[68771,68835],[68772,68836],[68773,68837],[68774,68838],[68775,68839],[68776,68840],[68777,68841],[68778,68842],[68779,68843],[68780,68844],[68781,68845],[68782,68846],[68783,68847],[68784,68848],[68785,68849],[68786,68850],[68800,68736],[68801,68737],[68802,68738],[68803,68739],[68804,68740],[68805,68741],[68806,68742],[68807,68743],[68808,68744],[68809,68745],[68810,68746],[68811,68747],[68812,68748],[68813,68749],[68814,68750],[68815,68751],[68816,68752],[68817,68753],[68818,68754],[68819,68755],[68820,68756],[68821,68757],[68822,68758],[68823,68759],[68824,68760],[68825,68761],[68826,68762],[68827,68763],[68828,68764],[68829,68765],[68830,68766],[68831,68767],[68832,68768],[68833,68769],[68834,68770],[68835,68771],[68836,68772],[68837,68773],[68838,68774],[68839,68775],[68840,68776],[68841,68777],[68842,68778],[68843,68779],[68844,68780],[68845,68781],[68846,68782],[68847,68783],[68848,68784],[68849,68785],[68850,68786],[71840,71872],[71841,71873],[71842,71874],[71843,71875],[71844,71876],[71845,71877],[71846,71878],[71847,71879],[71848,71880],[71849,71881],[71850,71882],[71851,71883],[71852,71884],[71853,71885],[71854,71886],[71855,71887],[71856,71888],[71857,71889],[71858,71890],[71859,71891],[71860,71892],[71861,71893],[71862,71894],[71863,71895],[71864,71896],[71865,71897],[71866,71898],[71867,71899],[71868,71900],[71869,71901],[71870,71902],[71871,71903],[71872,71840],[71873,71841],[71874,71842],[71875,71843],[71876,71844],[71877,71845],[71878,71846],[71879,71847],[71880,71848],[71881,71849],[71882,71850],[71883,71851],[71884,71852],[71885,71853],[71886,71854],[71887,71855],[71888,71856],[71889,71857],[71890,71858],[71891,71859],[71892,71860],[71893,71861],[71894,71862],[71895,71863],[71896,71864],[71897,71865],[71898,71866],[71899,71867],[71900,71868],[71901,71869],[71902,71870],[71903,71871],[125184,125218],[125185,125219],[125186,125220],[125187,125221],[125188,125222],[125189,125223],[125190,125224],[125191,125225],[125192,125226],[125193,125227],[125194,125228],[125195,125229],[125196,125230],[125197,125231],[125198,125232],[125199,125233],[125200,125234],[125201,125235],[125202,125236],[125203,125237],[125204,125238],[125205,125239],[125206,125240],[125207,125241],[125208,125242],[125209,125243],[125210,125244],[125211,125245],[125212,125246],[125213,125247],[125214,125248],[125215,125249],[125216,125250],[125217,125251],[125218,125184],[125219,125185],[125220,125186],[125221,125187],[125222,125188],[125223,125189],[125224,125190],[125225,125191],[125226,125192],[125227,125193],[125228,125194],[125229,125195],[125230,125196],[125231,125197],[125232,125198],[125233,125199],[125234,125200],[125235,125201],[125236,125202],[125237,125203],[125238,125204],[125239,125205],[125240,125206],[125241,125207],[125242,125208],[125243,125209],[125244,125210],[125245,125211],[125246,125212],[125247,125213],[125248,125214],[125249,125215],[125250,125216],[125251,125217]]),oe={REGULAR:new Map([["d",Q().addRange(48,57)],["D",Q().addRange(0,47).addRange(58,65535)],["s",Q(32,160,5760,8239,8287,12288,65279).addRange(9,13).addRange(8192,8202).addRange(8232,8233)],["S",Q().addRange(0,8).addRange(14,31).addRange(33,159).addRange(161,5759).addRange(5761,8191).addRange(8203,8231).addRange(8234,8238).addRange(8240,8286).addRange(8288,12287).addRange(12289,65278).addRange(65280,65535)],["w",Q(95).addRange(48,57).addRange(65,90).addRange(97,122)],["W",Q(96).addRange(0,47).addRange(58,64).addRange(91,94).addRange(123,65535)]]),UNICODE:new Map([["d",Q().addRange(48,57)],["D",Q().addRange(0,47).addRange(58,1114111)],["s",Q(32,160,5760,8239,8287,12288,65279).addRange(9,13).addRange(8192,8202).addRange(8232,8233)],["S",Q().addRange(0,8).addRange(14,31).addRange(33,159).addRange(161,5759).addRange(5761,8191).addRange(8203,8231).addRange(8234,8238).addRange(8240,8286).addRange(8288,12287).addRange(12289,65278).addRange(65280,1114111)],["w",Q(95).addRange(48,57).addRange(65,90).addRange(97,122)],["W",Q(96).addRange(0,47).addRange(58,64).addRange(91,94).addRange(123,1114111)]]),UNICODE_IGNORE_CASE:new Map([["d",Q().addRange(48,57)],["D",Q().addRange(0,47).addRange(58,1114111)],["s",Q(32,160,5760,8239,8287,12288,65279).addRange(9,13).addRange(8192,8202).addRange(8232,8233)],["S",Q().addRange(0,8).addRange(14,31).addRange(33,159).addRange(161,5759).addRange(5761,8191).addRange(8203,8231).addRange(8234,8238).addRange(8240,8286).addRange(8288,12287).addRange(12289,65278).addRange(65280,1114111)],["w",Q(95,383,8490).addRange(48,57).addRange(65,90).addRange(97,122)],["W",Q(96).addRange(0,47).addRange(58,64).addRange(91,94).addRange(123,382).addRange(384,8489).addRange(8491,1114111)]])},ae=createCommonjsModule(function(e){var t=Y.generate,n=J.parse,r=Q().addRange(0,1114111),i=Q().addRange(0,65535),o=r.clone().remove(10,13,8232,8233),a=o.clone().intersection(i),s=function(e,t,n){return t?n?oe.UNICODE_IGNORE_CASE.get(e):oe.UNICODE.get(e):oe.REGULAR.get(e)},l=function(e,t){try{return commonjsRequire()}catch(n){throw new Error("Failed to recognize value `"+t+"` for property `"+e+"`.")}},u=function(e){try{var t=re("General_Category",e);return l("General_Category",t)}catch(e){}var n=te(e);return l(n)},c=function(e,t){var n,i=e.split("="),o=i[0];if(1==i.length)n=u(o);else{var a=te(o),s=re(a,i[1]);n=l(a,s)}return t?r.clone().remove(n):n.clone()};Q.prototype.iuAddRange=function(e,t){do{var n=f(e);n&&this.add(n)}while(++e<=t);return this};var p=function(e,t){var r=n(t,m.useUnicodeFlag?"u":"");switch(r.type){case"characterClass":case"group":case"value":break;default:r=h(r,t)}Object.assign(e,r)},h=function(e,t){return{type:"group",behavior:"ignore",body:[e],raw:"(?:"+t+")"}},f=function(e){return ie.get(e)||!1},d=function(e,t){for(var n=Q(),o=0,a=e.body;o<a.length;o+=1){var l=a[o];switch(l.type){case"value":if(n.add(l.codePoint),m.ignoreCase&&m.unicode&&!m.useUnicodeFlag){var u=f(l.codePoint);u&&n.add(u)}break;case"characterClassRange":var h=l.min.codePoint,d=l.max.codePoint;n.addRange(h,d),m.ignoreCase&&m.unicode&&!m.useUnicodeFlag&&n.iuAddRange(h,d);break;case"characterClassEscape":n.add(s(l.value,m.unicode,m.ignoreCase));break;case"unicodePropertyEscape":n.add(c(l.value,l.negative));break;default:throw new Error("Unknown term type: "+l.type)}}return e.negative&&(n=(m.unicode?r:i).clone().remove(n)),p(e,n.toString(t)),e},g=function(e,t){switch(e.type){case"dot":p(e,(h=m.unicode,y=m.dotAll,y?h?r:i:h?o:a).toString(t));break;case"characterClass":e=d(e,t);break;case"unicodePropertyEscape":p(e,c(e.value,e.negative).toString(t));break;case"characterClassEscape":p(e,s(e.value,m.unicode,m.ignoreCase).toString(t));break;case"alternative":case"disjunction":case"group":case"quantifier":e.body=e.body.map(function(e){return g(e,t)});break;case"value":var n=e.codePoint,l=Q(n);if(m.ignoreCase&&m.unicode&&!m.useUnicodeFlag){var u=f(n);u&&l.add(u)}p(e,l.toString(t));break;case"anchor":case"empty":case"group":case"reference":break;default:throw new Error("Unknown term type: "+e.type)}var h,y;return e},m={ignoreCase:!1,unicode:!1,dotAll:!1,useUnicodeFlag:!1};e.exports=function(e,r,i){var o={unicodePropertyEscape:i&&i.unicodePropertyEscape};m.ignoreCase=r&&r.includes("i"),m.unicode=r&&r.includes("u");var a=i&&i.dotAllFlag;m.dotAll=a&&r&&r.includes("s"),m.useUnicodeFlag=i&&i.useUnicodeFlag;var s={hasUnicodeFlag:m.useUnicodeFlag,bmpOnly:!m.unicode},l=n(e,r,o);return g(l,s),t(l)}}),se={ArrayExpression:y,ArrowFunctionExpression:v,AssignmentExpression:_,BinaryExpression:b,BreakStatement:w,CallExpression:S,ClassBody:E,ClassDeclaration:P,ClassExpression:C,ContinueStatement:k,DoWhileStatement:O,ExportNamedDeclaration:A,ExportDefaultDeclaration:T,ForStatement:I,ForInStatement:R,ForOfStatement:L,FunctionDeclaration:M,FunctionExpression:j,Identifier:D,IfStatement:F,ImportDeclaration:N,ImportDefaultSpecifier:B,ImportSpecifier:z,JSXAttribute:U,JSXClosingElement:V,JSXClosingFragment:G,JSXElement:W,JSXExpressionContainer:q,JSXFragment:H,JSXOpeningElement:X,JSXOpeningFragment:K,JSXSpreadAttribute:Z,Literal:function(e){function Literal(){e.apply(this,arguments)}return e&&(Literal.__proto__=e),Literal.prototype=Object.create(e&&e.prototype),Literal.prototype.constructor=Literal,Literal.prototype.initialise=function initialise(){"string"==typeof this.value&&this.program.indentExclusionElements.push(this)},Literal.prototype.transpile=function transpile(e,t){if(t.numericLiteral&&this.raw.match(/^0[bo]/i)&&e.overwrite(this.start,this.end,String(this.value),{storeName:!0,contentOnly:!0}),this.regex){var n=this.regex,r=n.pattern,i=n.flags;if(t.stickyRegExp&&/y/.test(i))throw new d("Regular expression sticky flag is not supported",this);t.unicodeRegExp&&/u/.test(i)&&e.overwrite(this.start,this.end,"/"+ae(r,i)+"/"+i.replace("u",""),{contentOnly:!0})}},Literal}(p),MemberExpression:function(e){function MemberExpression(){e.apply(this,arguments)}return e&&(MemberExpression.__proto__=e),MemberExpression.prototype=Object.create(e&&e.prototype),MemberExpression.prototype.constructor=MemberExpression,MemberExpression.prototype.transpile=function transpile(t,n){n.reservedProperties&&f[this.property.name]&&(t.overwrite(this.object.end,this.property.start,"['"),t.appendLeft(this.property.end,"']")),e.prototype.transpile.call(this,t,n)},MemberExpression}(p),NewExpression:function(e){function NewExpression(){e.apply(this,arguments)}return e&&(NewExpression.__proto__=e),NewExpression.prototype=Object.create(e&&e.prototype),NewExpression.prototype.constructor=NewExpression,NewExpression.prototype.initialise=function initialise(t){if(t.spreadRest&&this.arguments.length)for(var n=this.findLexicalBoundary(),r=this.arguments.length;r--;){var i=this.arguments[r];if("SpreadElement"===i.type&&isArguments(i.argument)){this.argumentsArrayAlias=n.getArgumentsArrayAlias();break}}e.prototype.initialise.call(this,t)},NewExpression.prototype.transpile=function transpile(t,n){if(e.prototype.transpile.call(this,t,n),n.spreadRest&&this.arguments.length){var r=this.arguments[0];spread(t,this.arguments,r.start,this.argumentsArrayAlias,!0)&&(t.prependRight(this.start+"new".length," (Function.prototype.bind.apply("),t.overwrite(this.callee.end,r.start,", [ null ].concat( "),t.appendLeft(this.end," ))"))}this.arguments.length&&removeTrailingComma(t,this.arguments[this.arguments.length-1].end)},NewExpression}(p),ObjectExpression:function(e){function ObjectExpression(){e.apply(this,arguments)}return e&&(ObjectExpression.__proto__=e),ObjectExpression.prototype=Object.create(e&&e.prototype),ObjectExpression.prototype.constructor=ObjectExpression,ObjectExpression.prototype.transpile=function transpile(t,n){e.prototype.transpile.call(this,t,n);for(var r=this.start+1,i=0,o=0,a=0,s=null,l=null,u=0;u<this.properties.length;++u){var c=this.properties[u];"SpreadElement"===c.type?(o+=1,null===s&&(s=u)):c.computed?(a+=1,null===l&&(l=u)):"Property"===c.type&&(i+=1)}if(o){if(!this.program.options.objectAssign)throw new d("Object spread operator requires specified objectAssign option with 'Object.assign' or polyfill helper.",this);var p=this.properties.length;if(i&&!a)for(;p--;){var h=this.properties[p];if("Property"===h.type&&!h.computed){var f=this.properties[p-1],g=this.properties[p+1];f&&"Property"===f.type&&!f.computed||t.prependRight(h.start,"{"),g&&"Property"===g.type&&!g.computed||t.appendLeft(h.end,"}")}}r=this.properties[0].start,a?"SpreadElement"===this.properties[0].type?(t.overwrite(this.start,r,this.program.options.objectAssign+"({}, "),t.remove(this.end-1,this.end),t.appendRight(this.end,")")):(t.prependLeft(this.start,this.program.options.objectAssign+"("),t.appendRight(this.end,")")):(t.overwrite(this.start,r,this.program.options.objectAssign+"({}, "),t.overwrite(this.properties[this.properties.length-1].end,this.end,")"))}if(a&&n.computedProperty){var m,y,v=this.getIndentation();"VariableDeclarator"===this.parent.type&&1===this.parent.parent.declarations.length&&"Identifier"===this.parent.id.type?(m=!0,y=this.parent.id.alias||this.parent.id.name):"AssignmentExpression"===this.parent.type&&"ExpressionStatement"===this.parent.parent.type&&"Identifier"===this.parent.left.type?(m=!0,y=this.parent.left.alias||this.parent.left.name):"AssignmentPattern"===this.parent.type&&"Identifier"===this.parent.left.type&&(m=!0,y=this.parent.left.alias||this.parent.left.name),o&&(m=!1),y=this.findScope(!1).resolveName(y);var _=r,b=this.end;m||(null===s||l<s?(y=this.findScope(!0).createDeclaration("obj"),t.prependRight(this.start,"( "+y+" = ")):y=null);for(var x,w=this.properties.length,S=!1,E=!0,P=0;P<w;P+=1){var C=this.properties[P],k=P>0?this.properties[P-1].end:_;if("Property"===C.type&&(C.computed||x&&!o)){if(0===P&&(k=this.start+1),x=C,y){var T=(m?";\n"+v+y:", "+y)+("Literal"===C.key.type||C.computed?"":".");k<C.start?t.overwrite(k,C.start,T):t.prependRight(C.start,T)}else{var A=(y=this.findScope(!0).createDeclaration("obj"))+(C.computed?"":".");t.appendRight(C.start,"( "+y+" = {}, "+A)}var O=C.key.end;if(C.computed){for(;"]"!==t.original[O];)O+=1;O+=1}"Literal"!==C.key.type||C.computed?C.shorthand||C.method&&!C.computed&&n.conciseMethodProperty?t.overwrite(C.key.start,C.key.end,t.slice(C.key.start,C.key.end).replace(/:/," =")):(C.value.start>O&&t.remove(O,C.value.start),t.prependLeft(O," = ")):t.overwrite(C.start,C.key.end+1,"["+t.slice(C.start,C.key.end)+"] = "),!C.method||!C.computed&&n.conciseMethodProperty||(C.value.generator&&t.remove(C.start,C.key.start),t.prependRight(C.value.start,"function"+(C.value.generator?"*":"")+" "))}else"SpreadElement"===C.type?y&&P>0&&(x||(x=this.properties[P-1]),t.appendLeft(x.end,", "+y+" )"),x=null,y=null):(!E&&o&&(t.prependRight(C.start,"{"),t.appendLeft(C.end,"}")),S=!0);if(E&&("SpreadElement"===C.type||C.computed)){var I=S?this.properties[this.properties.length-1].end:this.end-1;","==t.original[I]&&++I;var R=t.slice(I,b);t.prependLeft(k,R),t.remove(I,b),E=!1}var L=C.end;if(P<w-1&&!S)for(;","!==t.original[L];)L+=1;else P==w-1&&(L=this.end);t.remove(C.end,L)}a===w&&t.remove(this.properties[w-1].end,this.end-1),!m&&y&&t.appendLeft(x.end,", "+y+" )")}},ObjectExpression}(p),Property:function(e){function Property(){e.apply(this,arguments)}return e&&(Property.__proto__=e),Property.prototype=Object.create(e&&e.prototype),Property.prototype.constructor=Property,Property.prototype.transpile=function transpile(t,n){if(e.prototype.transpile.call(this,t,n),n.conciseMethodProperty&&!this.computed&&"ObjectPattern"!==this.parent.type)if(this.shorthand)t.prependRight(this.start,this.key.name+": ");else if(this.method){var r="";!1!==this.program.options.namedFunctionExpressions&&(r=" "+(r="Literal"===this.key.type&&"number"==typeof this.key.value?"":"Identifier"===this.key.type?f[this.key.name]||!/^[a-z_$][a-z0-9_$]*$/i.test(this.key.name)||this.value.body.scope.references[this.key.name]?this.findScope(!0).createIdentifier(this.key.name):this.key.name:this.findScope(!0).createIdentifier(this.key.value))),this.value.generator&&t.remove(this.start,this.key.start),t.appendLeft(this.key.end,": function"+(this.value.generator?"*":"")+r)}n.reservedProperties&&f[this.key.name]&&(t.prependRight(this.key.start,"'"),t.appendLeft(this.key.end,"'"))},Property}(p),ReturnStatement:function(e){function ReturnStatement(){e.apply(this,arguments)}return e&&(ReturnStatement.__proto__=e),ReturnStatement.prototype=Object.create(e&&e.prototype),ReturnStatement.prototype.constructor=ReturnStatement,ReturnStatement.prototype.initialise=function initialise(e){this.loop=this.findNearest(x),this.nearestFunction=this.findNearest(/Function/),this.loop&&(!this.nearestFunction||this.loop.depth>this.nearestFunction.depth)&&(this.loop.canReturn=!0,this.shouldWrap=!0),this.argument&&this.argument.initialise(e)},ReturnStatement.prototype.transpile=function transpile(e,t){var n=this.shouldWrap&&this.loop&&this.loop.shouldRewriteAsFunction;this.argument?(n&&e.prependRight(this.argument.start,"{ v: "),this.argument.transpile(e,t),n&&e.appendLeft(this.argument.end," }")):n&&e.appendLeft(this.start+6," {}")},ReturnStatement}(p),SpreadElement:function(e){function SpreadElement(){e.apply(this,arguments)}return e&&(SpreadElement.__proto__=e),SpreadElement.prototype=Object.create(e&&e.prototype),SpreadElement.prototype.constructor=SpreadElement,SpreadElement.prototype.transpile=function transpile(t,n){"ObjectExpression"==this.parent.type&&(t.remove(this.start,this.argument.start),t.remove(this.argument.end,this.end)),e.prototype.transpile.call(this,t,n)},SpreadElement}(p),Super:function(e){function Super(){e.apply(this,arguments)}return e&&(Super.__proto__=e),Super.prototype=Object.create(e&&e.prototype),Super.prototype.constructor=Super,Super.prototype.initialise=function initialise(e){if(e.classes){if(this.method=this.findNearest("MethodDefinition"),!this.method)throw new d("use of super outside class method",this);var t=this.findNearest("ClassBody").parent;if(this.superClassName=t.superClass&&(t.superClass.name||"superclass"),!this.superClassName)throw new d("super used in base class",this);if(this.isCalled="CallExpression"===this.parent.type&&this===this.parent.callee,"constructor"!==this.method.kind&&this.isCalled)throw new d("super() not allowed outside class constructor",this);if(this.isMember="MemberExpression"===this.parent.type,!this.isCalled&&!this.isMember)throw new d("Unexpected use of `super` (expected `super(...)` or `super.*`)",this)}if(e.arrow){var n=this.findLexicalBoundary(),r=this.findNearest("ArrowFunctionExpression"),i=this.findNearest(x);r&&r.depth>n.depth&&(this.thisAlias=n.getThisAlias()),i&&i.body.contains(this)&&i.depth>n.depth&&(this.thisAlias=n.getThisAlias())}},Super.prototype.transpile=function transpile(e,t){if(t.classes){var n=this.isCalled||this.method.static?this.superClassName:this.superClassName+".prototype";e.overwrite(this.start,this.end,n,{storeName:!0,contentOnly:!0});var r=this.isCalled?this.parent:this.parent.parent;if(r&&"CallExpression"===r.type){this.noCall||e.appendLeft(r.callee.end,".call");var i=this.thisAlias||"this";r.arguments.length?e.appendLeft(r.arguments[0].start,i+", "):e.appendLeft(r.end-1,""+i)}}},Super}(p),TaggedTemplateExpression:function(e){function TaggedTemplateExpression(){e.apply(this,arguments)}return e&&(TaggedTemplateExpression.__proto__=e),TaggedTemplateExpression.prototype=Object.create(e&&e.prototype),TaggedTemplateExpression.prototype.constructor=TaggedTemplateExpression,TaggedTemplateExpression.prototype.initialise=function initialise(t){if(t.templateString&&!t.dangerousTaggedTemplateString)throw new d("Tagged template strings are not supported. Use `transforms: { templateString: false }` to skip transformation and disable this error, or `transforms: { dangerousTaggedTemplateString: true }` if you know what you're doing",this);e.prototype.initialise.call(this,t)},TaggedTemplateExpression.prototype.transpile=function transpile(t,n){if(n.templateString&&n.dangerousTaggedTemplateString){var r=this.quasi.expressions.concat(this.quasi.quasis).sort(function(e,t){return e.start-t.start}),i=this.program.body.scope,o=this.quasi.quasis.map(function(e){return JSON.stringify(e.value.cooked)}).join(", "),a=this.program.templateLiteralQuasis[o];a||(a=i.createIdentifier("templateObject"),t.prependRight(this.program.prependAt,"var "+a+" = Object.freeze(["+o+"]);\n"),this.program.templateLiteralQuasis[o]=a),t.overwrite(this.tag.end,r[0].start,"("+a);var s=r[0].start;r.forEach(function(e){"TemplateElement"===e.type?t.remove(s,e.end):t.overwrite(s,e.start,", "),s=e.end}),t.overwrite(s,this.end,")")}e.prototype.transpile.call(this,t,n)},TaggedTemplateExpression}(p),TemplateElement:function(e){function TemplateElement(){e.apply(this,arguments)}return e&&(TemplateElement.__proto__=e),TemplateElement.prototype=Object.create(e&&e.prototype),TemplateElement.prototype.constructor=TemplateElement,TemplateElement.prototype.initialise=function initialise(){this.program.indentExclusionElements.push(this)},TemplateElement}(p),TemplateLiteral:function(e){function TemplateLiteral(){e.apply(this,arguments)}return e&&(TemplateLiteral.__proto__=e),TemplateLiteral.prototype=Object.create(e&&e.prototype),TemplateLiteral.prototype.constructor=TemplateLiteral,TemplateLiteral.prototype.transpile=function transpile(t,n){if(e.prototype.transpile.call(this,t,n),n.templateString&&"TaggedTemplateExpression"!==this.parent.type){var r=this.expressions.concat(this.quasis).sort(function(e,t){return e.start-t.start||e.end-t.end}).filter(function(e,t){return"TemplateElement"!==e.type||(!!e.value.raw||!t)});if(r.length>=3){var i=r[0],o=r[2];"TemplateElement"===i.type&&""===i.value.raw&&"TemplateElement"===o.type&&r.shift()}var a=!(1===this.quasis.length&&0===this.expressions.length||"TemplateLiteral"===this.parent.type||"AssignmentExpression"===this.parent.type||"AssignmentPattern"===this.parent.type||"VariableDeclarator"===this.parent.type||"BinaryExpression"===this.parent.type&&"+"===this.parent.operator);a&&t.appendRight(this.start,"(");var s=this.start;r.forEach(function(e,n){var r=0===n?a?"(":"":" + ";if("TemplateElement"===e.type)t.overwrite(s,e.end,r+JSON.stringify(e.value.cooked));else{var i="Identifier"!==e.type;i&&(r+="("),t.remove(s,e.start),r&&t.prependRight(e.start,r),i&&t.appendLeft(e.end,")")}s=e.end}),a&&t.appendLeft(s,")"),t.overwrite(s,this.end,"",{contentOnly:!0})}},TemplateLiteral}(p),ThisExpression:function(e){function ThisExpression(){e.apply(this,arguments)}return e&&(ThisExpression.__proto__=e),ThisExpression.prototype=Object.create(e&&e.prototype),ThisExpression.prototype.constructor=ThisExpression,ThisExpression.prototype.initialise=function initialise(e){if(e.arrow){var t=this.findLexicalBoundary(),n=this.findNearest("ArrowFunctionExpression"),r=this.findNearest(x);(n&&n.depth>t.depth||r&&r.body.contains(this)&&r.depth>t.depth||r&&r.right&&r.right.contains(this))&&(this.alias=t.getThisAlias())}},ThisExpression.prototype.transpile=function transpile(e){this.alias&&e.overwrite(this.start,this.end,this.alias,{storeName:!0,contentOnly:!0})},ThisExpression}(p),UpdateExpression:function(e){function UpdateExpression(){e.apply(this,arguments)}return e&&(UpdateExpression.__proto__=e),UpdateExpression.prototype=Object.create(e&&e.prototype),UpdateExpression.prototype.constructor=UpdateExpression,UpdateExpression.prototype.initialise=function initialise(t){if("Identifier"===this.argument.type){var n=this.findScope(!1).findDeclaration(this.argument.name),r=n&&n.node.ancestor(3);r&&"ForStatement"===r.type&&r.body.contains(this)&&(r.reassigned[this.argument.name]=!0)}e.prototype.initialise.call(this,t)},UpdateExpression.prototype.transpile=function transpile(t,n){"Identifier"===this.argument.type&&checkConst(this.argument,this.findScope(!1)),e.prototype.transpile.call(this,t,n)},UpdateExpression}(p),VariableDeclaration:function(e){function VariableDeclaration(){e.apply(this,arguments)}return e&&(VariableDeclaration.__proto__=e),VariableDeclaration.prototype=Object.create(e&&e.prototype),VariableDeclaration.prototype.constructor=VariableDeclaration,VariableDeclaration.prototype.initialise=function initialise(e){this.scope=this.findScope("var"===this.kind),this.declarations.forEach(function(t){return t.initialise(e)})},VariableDeclaration.prototype.transpile=function transpile(e,t){var n=this,r=this.getIndentation(),i=this.kind;if(t.letConst&&"var"!==i&&(i="var",e.overwrite(this.start,this.start+this.kind.length,i,{contentOnly:!0,storeName:!0})),t.destructuring&&"ForOfStatement"!==this.parent.type&&"ForInStatement"!==this.parent.type){var o,a=this.start;this.declarations.forEach(function(i,s){if(i.transpile(e,t),"Identifier"===i.id.type)s>0&&"Identifier"!==n.declarations[s-1].id.type&&e.overwrite(a,i.id.start,"var ");else{var l=x.test(n.parent.type);0===s?e.remove(a,i.id.start):e.overwrite(a,i.id.start,";\n"+r);var u="Identifier"===i.init.type&&!i.init.rewritten,c=u?i.init.alias||i.init.name:i.findScope(!0).createIdentifier("ref");a=i.start;var p=[];u?e.remove(i.id.end,i.end):p.push(function(t,n,r){e.prependRight(i.id.end,"var "+c),e.appendLeft(i.init.end,""+r),e.move(i.id.end,i.end,t)});var h=i.findScope(!1);destructure(e,function(e){return h.createIdentifier(e)},function(e){var t=e.name;return h.resolveName(t)},i.id,c,l,p);var f=l?"var ":"",d=l?", ":";\n"+r;p.forEach(function(e,t){s===n.declarations.length-1&&t===p.length-1&&(d=l?"":";"),e(i.start,0===t?f:"",d)})}a=i.end,o="Identifier"!==i.id.type}),o&&this.end>a&&e.overwrite(a,this.end,"",{contentOnly:!0})}else this.declarations.forEach(function(n){n.transpile(e,t)})},VariableDeclaration}(p),VariableDeclarator:function(e){function VariableDeclarator(){e.apply(this,arguments)}return e&&(VariableDeclarator.__proto__=e),VariableDeclarator.prototype=Object.create(e&&e.prototype),VariableDeclarator.prototype.constructor=VariableDeclarator,VariableDeclarator.prototype.initialise=function initialise(t){var n=this.parent.kind;"let"===n&&"ForStatement"===this.parent.parent.type&&(n="for.let"),this.parent.scope.addDeclaration(this.id,n),e.prototype.initialise.call(this,t)},VariableDeclarator.prototype.transpile=function transpile(e,t){if(!this.init&&t.letConst&&"var"!==this.parent.kind){var n=this.findNearest(/Function|^For(In|Of)?Statement|^(?:Do)?WhileStatement/);!n||/Function/.test(n.type)||this.isLeftDeclaratorOfLoop()||e.appendLeft(this.id.end," = (void 0)")}this.id&&this.id.transpile(e,t),this.init&&this.init.transpile(e,t)},VariableDeclarator.prototype.isLeftDeclaratorOfLoop=function isLeftDeclaratorOfLoop(){return this.parent&&"VariableDeclaration"===this.parent.type&&this.parent.parent&&("ForInStatement"===this.parent.parent.type||"ForOfStatement"===this.parent.parent.type)&&this.parent.parent.left&&this.parent.parent.left.declarations[0]===this},VariableDeclarator}(p),WhileStatement:O},le={Program:["body"],Literal:[]},ue={IfStatement:"consequent",ForStatement:"body",ForInStatement:"body",ForOfStatement:"body",WhileStatement:"body",DoWhileStatement:"body",ArrowFunctionExpression:"body"};function wrap(e,t){if(e)if("length"in e)for(var n=e.length;n--;)wrap(e[n],t);else if(!e.__wrapped){e.__wrapped=!0,le[e.type]||(le[e.type]=Object.keys(e).filter(function(t){return"object"==typeof e[t]}));var r=ue[e.type];if(r&&"BlockStatement"!==e[r].type){var i=e[r];e[r]={start:i.start,end:i.end,type:"BlockStatement",body:[i],synthetic:!0}}e.parent=t,e.program=t.program||t,e.depth=t.depth+1,e.keys=le[e.type],e.indentation=void 0;for(var o=0,a=le[e.type];o<a.length;o+=1){var s=a[o];wrap(e[s],e)}e.program.magicString.addSourcemapLocation(e.start),e.program.magicString.addSourcemapLocation(e.end);var l=("BlockStatement"===e.type?m:se[e.type])||p;e.__proto__=l.prototype}}function Program(e,t,n,i){this.type="Root",this.jsx=i.jsx||"React.createElement",this.options=i,this.source=e,this.magicString=new r.a(e),this.ast=t,this.depth=0,wrap(this.body=t,this),this.body.__proto__=m.prototype,this.templateLiteralQuasis=Object.create(null);for(var o=0;o<this.body.body.length;++o)if(!this.body.body[o].directive){this.prependAt=this.body.body[o].start;break}this.objectWithoutPropertiesHelper=null,this.indentExclusionElements=[],this.body.initialise(n),this.indentExclusions=Object.create(null);for(var a=0,s=this.indentExclusionElements;a<s.length;a+=1)for(var l=s[a],u=l.start;u<l.end;u+=1)this.indentExclusions[u]=!0;this.body.transpile(this.magicString,n)}Program.prototype={export:function export$1(e){return void 0===e&&(e={}),{code:this.magicString.toString(),map:this.magicString.generateMap({file:e.file,source:e.source,includeContent:!1!==e.includeContent})}},findNearest:function findNearest(){return null},findScope:function findScope(){return null},getObjectWithoutPropertiesHelper:function getObjectWithoutPropertiesHelper(e){return this.objectWithoutPropertiesHelper||(this.objectWithoutPropertiesHelper=this.body.scope.createIdentifier("objectWithoutProperties"),e.prependLeft(this.prependAt,"function "+this.objectWithoutPropertiesHelper+" (obj, exclude) { var target = {}; for (var k in obj) if (Object.prototype.hasOwnProperty.call(obj, k) && exclude.indexOf(k) === -1) target[k] = obj[k]; return target; }\n")),this.objectWithoutPropertiesHelper}};var ce={chrome:{48:305359,49:326143,50:391679,51:391679,52:522751,53:522751,54:522751,55:522751,56:522751,57:522751,58:1047039,59:1047039,60:1047039,61:1047039,62:1047039,63:1047039},firefox:{43:321757,44:322013,45:322015,46:387551,47:387583,48:387583,49:387583,50:387583,51:387583,52:1047039,53:1047039,54:1047039,55:1047039,56:1047039,57:1047039,58:1047039},safari:{8:262148,9:301166,10:915967,10.1:1047039,11:1047039},ie:{8:0,9:262144,10:262144,11:262400},edge:{12:305485,13:387535,14:1042943,15:1042943,16:1042943},node:{"0.10":262144,.12:262208,4:297167,5:297167,6:391679,8:1047039,8.3:1047039,8.7:1047039}},pe=["arrow","classes","computedProperty","conciseMethodProperty","defaultParameter","destructuring","forOf","generator","letConst","moduleExport","moduleImport","numericLiteral","parameterDestructuring","spreadRest","stickyRegExp","templateString","unicodeRegExp","exponentiation","reservedProperties","trailingFunctionCommas"],he=[function(e){var t=e.tokTypes,n=e.tokContexts;n.j_oTag=new e.TokContext("<tag",!1),n.j_cTag=new e.TokContext("</tag",!1),n.j_expr=new e.TokContext("<tag>...</tag>",!0,!0),t.jsxName=new e.TokenType("jsxName"),t.jsxText=new e.TokenType("jsxText",{beforeExpr:!0}),t.jsxTagStart=new e.TokenType("jsxTagStart"),t.jsxTagEnd=new e.TokenType("jsxTagEnd"),t.jsxTagStart.updateContext=function(){this.context.push(n.j_expr),this.context.push(n.j_oTag),this.exprAllowed=!1},t.jsxTagEnd.updateContext=function(e){var r=this.context.pop();r===n.j_oTag&&e===t.slash||r===n.j_cTag?(this.context.pop(),this.exprAllowed=this.curContext()===n.j_expr):this.exprAllowed=!0};var r=e.Parser.prototype;function getQualifiedJSXName(e){return e?"JSXIdentifier"===e.type?e.name:"JSXNamespacedName"===e.type?e.namespace.name+":"+e.name.name:"JSXMemberExpression"===e.type?getQualifiedJSXName(e.object)+"."+getQualifiedJSXName(e.property):void 0:e}return r.jsx_readToken=function(){for(var n="",r=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated JSX contents");var i=this.input.charCodeAt(this.pos);switch(i){case 60:case 123:return this.pos===this.start?60===i&&this.exprAllowed?(++this.pos,this.finishToken(t.jsxTagStart)):this.getTokenFromCode(i):(n+=this.input.slice(r,this.pos),this.finishToken(t.jsxText,n));case 38:n+=this.input.slice(r,this.pos),n+=this.jsx_readEntity(),r=this.pos;break;default:e.isNewLine(i)?(n+=this.input.slice(r,this.pos),n+=this.jsx_readNewLine(!0),r=this.pos):++this.pos}}},r.jsx_readNewLine=function(e){var t,n=this.input.charCodeAt(this.pos);return++this.pos,13===n&&10===this.input.charCodeAt(this.pos)?(++this.pos,t=e?"\n":"\r\n"):t=String.fromCharCode(n),this.options.locations&&(++this.curLine,this.lineStart=this.pos),t},r.jsx_readString=function(n){for(var r="",i=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var o=this.input.charCodeAt(this.pos);if(o===n)break;38===o?(r+=this.input.slice(i,this.pos),r+=this.jsx_readEntity(),i=this.pos):e.isNewLine(o)?(r+=this.input.slice(i,this.pos),r+=this.jsx_readNewLine(!1),i=this.pos):++this.pos}return r+=this.input.slice(i,this.pos++),this.finishToken(t.string,r)},r.jsx_readEntity=function(){var e,t="",n=0,r=this.input[this.pos];"&"!==r&&this.raise(this.pos,"Entity must start with an ampersand");for(var i=++this.pos;this.pos<this.input.length&&n++<10;){if(";"===(r=this.input[this.pos++])){"#"===t[0]?"x"===t[1]?(t=t.substr(2),a.test(t)&&(e=String.fromCharCode(parseInt(t,16)))):(t=t.substr(1),s.test(t)&&(e=String.fromCharCode(parseInt(t,10)))):e=o[t];break}t+=r}return e||(this.pos=i,"&")},r.jsx_readWord=function(){var n,r=this.pos;do{n=this.input.charCodeAt(++this.pos)}while(e.isIdentifierChar(n)||45===n);return this.finishToken(t.jsxName,this.input.slice(r,this.pos))},r.jsx_parseIdentifier=function(){var e=this.startNode();return this.type===t.jsxName?e.name=this.value:this.type.keyword?e.name=this.type.keyword:this.unexpected(),this.next(),this.finishNode(e,"JSXIdentifier")},r.jsx_parseNamespacedName=function(){var e=this.start,n=this.startLoc,r=this.jsx_parseIdentifier();if(!this.options.plugins.jsx.allowNamespaces||!this.eat(t.colon))return r;var i=this.startNodeAt(e,n);return i.namespace=r,i.name=this.jsx_parseIdentifier(),this.finishNode(i,"JSXNamespacedName")},r.jsx_parseElementName=function(){if(this.type===t.jsxTagEnd)return"";var e=this.start,n=this.startLoc,r=this.jsx_parseNamespacedName();for(this.type!==t.dot||"JSXNamespacedName"!==r.type||this.options.plugins.jsx.allowNamespacedObjects||this.unexpected();this.eat(t.dot);){var i=this.startNodeAt(e,n);i.object=r,i.property=this.jsx_parseIdentifier(),r=this.finishNode(i,"JSXMemberExpression")}return r},r.jsx_parseAttributeValue=function(){switch(this.type){case t.braceL:var e=this.jsx_parseExpressionContainer();return"JSXEmptyExpression"===e.expression.type&&this.raise(e.start,"JSX attributes must only be assigned a non-empty expression"),e;case t.jsxTagStart:case t.string:return this.parseExprAtom();default:this.raise(this.start,"JSX value should be either an expression or a quoted JSX text")}},r.jsx_parseEmptyExpression=function(){var e=this.startNodeAt(this.lastTokEnd,this.lastTokEndLoc);return this.finishNodeAt(e,"JSXEmptyExpression",this.start,this.startLoc)},r.jsx_parseExpressionContainer=function(){var e=this.startNode();return this.next(),e.expression=this.type===t.braceR?this.jsx_parseEmptyExpression():this.parseExpression(),this.expect(t.braceR),this.finishNode(e,"JSXExpressionContainer")},r.jsx_parseAttribute=function(){var e=this.startNode();return this.eat(t.braceL)?(this.expect(t.ellipsis),e.argument=this.parseMaybeAssign(),this.expect(t.braceR),this.finishNode(e,"JSXSpreadAttribute")):(e.name=this.jsx_parseNamespacedName(),e.value=this.eat(t.eq)?this.jsx_parseAttributeValue():null,this.finishNode(e,"JSXAttribute"))},r.jsx_parseOpeningElementAt=function(e,n){var r=this.startNodeAt(e,n);r.attributes=[];var i=this.jsx_parseElementName();for(i&&(r.name=i);this.type!==t.slash&&this.type!==t.jsxTagEnd;)r.attributes.push(this.jsx_parseAttribute());return r.selfClosing=this.eat(t.slash),this.expect(t.jsxTagEnd),this.finishNode(r,i?"JSXOpeningElement":"JSXOpeningFragment")},r.jsx_parseClosingElementAt=function(e,n){var r=this.startNodeAt(e,n),i=this.jsx_parseElementName();return i&&(r.name=i),this.expect(t.jsxTagEnd),this.finishNode(r,i?"JSXClosingElement":"JSXClosingFragment")},r.jsx_parseElementAt=function(e,n){var r=this.startNodeAt(e,n),i=[],o=this.jsx_parseOpeningElementAt(e,n),a=null;if(!o.selfClosing){e:for(;;)switch(this.type){case t.jsxTagStart:if(e=this.start,n=this.startLoc,this.next(),this.eat(t.slash)){a=this.jsx_parseClosingElementAt(e,n);break e}i.push(this.jsx_parseElementAt(e,n));break;case t.jsxText:i.push(this.parseExprAtom());break;case t.braceL:i.push(this.jsx_parseExpressionContainer());break;default:this.unexpected()}getQualifiedJSXName(a.name)!==getQualifiedJSXName(o.name)&&this.raise(a.start,"Expected corresponding JSX closing tag for <"+getQualifiedJSXName(o.name)+">")}return r.openingElement=o,r.closingElement=a,r.children=i,this.type===t.relational&&"<"===this.value&&this.raise(this.start,"Adjacent JSX elements must be wrapped in an enclosing tag"),this.finishNode(r,o.name?"JSXElement":"JSXFragment")},r.jsx_parseText=function(e){var t=this.parseLiteral(e);return t.type="JSXText",t},r.jsx_parseElement=function(){var e=this.start,t=this.startLoc;return this.next(),this.jsx_parseElementAt(e,t)},e.plugins.jsx=function(r,i){i&&("object"!=typeof i&&(i={}),r.options.plugins.jsx={allowNamespaces:!1!==i.allowNamespaces,allowNamespacedObjects:!!i.allowNamespacedObjects},r.extend("parseExprAtom",function(e){return function(n){return this.type===t.jsxText?this.jsx_parseText(this.value):this.type===t.jsxTagStart?this.jsx_parseElement():e.call(this,n)}}),r.extend("readToken",function(r){return function(i){var o=this.curContext();if(o===n.j_expr)return this.jsx_readToken();if(o===n.j_oTag||o===n.j_cTag){if(e.isIdentifierStart(i))return this.jsx_readWord();if(62==i)return++this.pos,this.finishToken(t.jsxTagEnd);if((34===i||39===i)&&o==n.j_oTag)return this.jsx_readString(i)}return 60===i&&this.exprAllowed&&33!==this.input.charCodeAt(this.pos+1)?(++this.pos,this.finishToken(t.jsxTagStart)):r.call(this,i)}}),r.extend("updateContext",function(e){return function(r){if(this.type==t.braceL){var i=this.curContext();i==n.j_oTag?this.context.push(n.b_expr):i==n.j_expr?this.context.push(n.b_tmpl):e.call(this,r),this.exprAllowed=!0}else{if(this.type!==t.slash||r!==t.jsxTagStart)return e.call(this,r);this.context.length-=2,this.context.push(n.j_cTag),this.exprAllowed=!1}}}))},e},c].reduce(function(e,t){return t(e)},i).parse,fe=["dangerousTaggedTemplateString","dangerousForOf"];function target(e){var t=Object.keys(e).length?1048575:262144;Object.keys(e).forEach(function(n){var r=ce[n];if(!r)throw new Error("Unknown environment '"+n+"'. Please raise an issue at https://github.com/Rich-Harris/buble/issues");var i=e[n];if(!(i in r))throw new Error("Support data exists for the following versions of "+n+": "+Object.keys(r).join(", ")+". Please raise an issue at https://github.com/Rich-Harris/buble/issues");var o=r[i];t&=o});var n=Object.create(null);return pe.forEach(function(e,r){n[e]=!(t&1<<r)}),fe.forEach(function(e){n[e]=!1}),n}function transform(e,t){var n;void 0===t&&(t={});var r=null;try{n=he(e,{ecmaVersion:9,preserveParens:!0,sourceType:"module",onComment:function(e,t){if(!r){var n=/@jsx\s+([^\s]+)/.exec(t);n&&(r=n[1])}},plugins:{jsx:!0,dynamicImport:!0}}),t.jsx=r||t.jsx}catch(t){throw t.snippet=getSnippet(e,t.loc),t.toString=function(){return t.name+": "+t.message+"\n"+t.snippet},t}var i=target(t.target||{});return Object.keys(t.transforms||{}).forEach(function(e){if("modules"===e)return"moduleImport"in t.transforms||(i.moduleImport=t.transforms.modules),void("moduleExport"in t.transforms||(i.moduleExport=t.transforms.modules));if(!(e in i))throw new Error("Unknown transform '"+e+"'");i[e]=t.transforms[e]}),new Program(e,n,i,t).export(t)}}).call(this,n(31))},function(e,t,n){"use strict";(function(e,r){var i=n(255);function Chunk(e,t,n){this.start=e,this.end=t,this.original=n,this.intro="",this.outro="",this.content=n,this.storeName=!1,this.edited=!1,Object.defineProperties(this,{previous:{writable:!0,value:null},next:{writable:!0,value:null}})}Chunk.prototype={appendLeft:function appendLeft(e){this.outro+=e},appendRight:function appendRight(e){this.intro=this.intro+e},clone:function clone(){var e=new Chunk(this.start,this.end,this.original);return e.intro=this.intro,e.outro=this.outro,e.content=this.content,e.storeName=this.storeName,e.edited=this.edited,e},contains:function contains(e){return this.start<e&&e<this.end},eachNext:function eachNext(e){for(var t=this;t;)e(t),t=t.next},eachPrevious:function eachPrevious(e){for(var t=this;t;)e(t),t=t.previous},edit:function edit(e,t,n){return this.content=e,n||(this.intro="",this.outro=""),this.storeName=t,this.edited=!0,this},prependLeft:function prependLeft(e){this.outro=e+this.outro},prependRight:function prependRight(e){this.intro=e+this.intro},split:function split(e){var t=e-this.start,n=this.original.slice(0,t),r=this.original.slice(t);this.original=n;var i=new Chunk(e,this.end,r);return i.outro=this.outro,this.outro="",this.end=e,this.edited?(i.edit("",!1),this.content=""):this.content=n,i.next=this.next,i.next&&(i.next.previous=i),i.previous=this,this.next=i,i},toString:function toString(){return this.intro+this.content+this.outro},trimEnd:function trimEnd(e){if(this.outro=this.outro.replace(e,""),this.outro.length)return!0;var t=this.content.replace(e,"");return t.length?(t!==this.content&&this.split(this.start+t.length).edit("",!1),!0):(this.edit("",!1),this.intro=this.intro.replace(e,""),!!this.intro.length||void 0)},trimStart:function trimStart(e){if(this.intro=this.intro.replace(e,""),this.intro.length)return!0;var t=this.content.replace(e,"");return t.length?(t!==this.content&&(this.split(this.end-t.length),this.edit("",!1)),!0):(this.edit("",!1),this.outro=this.outro.replace(e,""),!!this.outro.length||void 0)}};var o="undefined"!=typeof window&&"function"==typeof window.btoa?window.btoa:"function"==typeof e?function(t){return new e(t).toString("base64")}:function(){throw new Error("Unsupported environment: `window.btoa` or `Buffer` should be supported.")};function SourceMap(e){this.version=3,this.file=e.file,this.sources=e.sources,this.sourcesContent=e.sourcesContent,this.names=e.names,this.mappings=e.mappings}function guessIndent(e){var t=e.split("\n"),n=t.filter(function(e){return/^\t+/.test(e)}),r=t.filter(function(e){return/^ {2,}/.test(e)});if(0===n.length&&0===r.length)return null;if(n.length>=r.length)return"\t";var i=r.reduce(function(e,t){var n=/^ +/.exec(t)[0].length;return Math.min(n,e)},1/0);return new Array(i+1).join(" ")}function getRelativePath(e,t){var n=e.split(/[\/\\]/),r=t.split(/[\/\\]/);for(n.pop();n[0]===r[0];)n.shift(),r.shift();if(n.length)for(var i=n.length;i--;)n[i]="..";return n.concat(r).join("/")}SourceMap.prototype={toString:function toString(){return JSON.stringify(this)},toUrl:function toUrl(){return"data:application/json;charset=utf-8;base64,"+o(this.toString())}};var a=Object.prototype.toString;function isObject(e){return"[object Object]"===a.call(e)}function getLocator(e){var t=e.split("\n"),n=0,r=t.map(function(e,t){var r=n+e.length+1,i={start:n,end:r,line:t};return n=r,i}),i=0;function rangeContains(e,t){return e.start<=t&&t<e.end}function getLocation(e,t){return{line:e.line,column:t-e.start}}return function locate(e){for(var t=r[i],n=e>=t.end?1:-1;t;){if(rangeContains(t,e))return getLocation(t,e);t=r[i+=n]}}}function Mappings(e){var t=this,n={generatedCodeColumn:0,sourceIndex:0,sourceCodeLine:0,sourceCodeColumn:0,sourceCodeName:0},r=0,o=0;this.raw=[];var a=this.raw[r]=[],s=null;this.addEdit=function(e,n,r,i,l){n.length?a.push([o,e,i.line,i.column,l]):s&&a.push(s),t.advance(n),s=null},this.addUneditedChunk=function(n,i,l,u,c){for(var p=i.start,h=!0;p<i.end;)(e||h||c[p])&&a.push([o,n,u.line,u.column,-1]),"\n"===l[p]?(u.line+=1,u.column=0,r+=1,t.raw[r]=a=[],o=0):(u.column+=1,o+=1),p+=1,h=!1;s=[o,n,u.line,u.column,-1]},this.advance=function(e){if(e){var n=e.split("\n"),i=n.pop();n.length?(r+=n.length,t.raw[r]=a=[],o=i.length):o+=i.length}},this.encode=function(){return t.raw.map(function(e){var t=0;return e.map(function(e){var r=[e[0]-t,e[1]-n.sourceIndex,e[2]-n.sourceCodeLine,e[3]-n.sourceCodeColumn];return t=e[0],n.sourceIndex=e[1],n.sourceCodeLine=e[2],n.sourceCodeColumn=e[3],~e[4]&&(r.push(e[4]-n.sourceCodeName),n.sourceCodeName=e[4]),Object(i.a)(r)}).join(",")}).join(";")}}var s=function Stats(){Object.defineProperties(this,{startTimes:{value:{}}})};s.prototype.time=function time(e){this.startTimes[e]=r.hrtime()},s.prototype.timeEnd=function timeEnd(e){var t=r.hrtime(this.startTimes[e]);this[e]||(this[e]=0),this[e]+=1e3*t[0]+1e-6*t[1]};var l={insertLeft:!1,insertRight:!1,storeName:!1};function MagicString$1(e,t){void 0===t&&(t={});var n=new Chunk(0,e.length,e);Object.defineProperties(this,{original:{writable:!0,value:e},outro:{writable:!0,value:""},intro:{writable:!0,value:""},firstChunk:{writable:!0,value:n},lastChunk:{writable:!0,value:n},lastSearchedChunk:{writable:!0,value:n},byStart:{writable:!0,value:{}},byEnd:{writable:!0,value:{}},filename:{writable:!0,value:t.filename},indentExclusionRanges:{writable:!0,value:t.indentExclusionRanges},sourcemapLocations:{writable:!0,value:{}},storedNames:{writable:!0,value:{}},indentStr:{writable:!0,value:guessIndent(e)}}),this.byStart[0]=n,this.byEnd[e.length]=n}MagicString$1.prototype={addSourcemapLocation:function addSourcemapLocation(e){this.sourcemapLocations[e]=!0},append:function append(e){if("string"!=typeof e)throw new TypeError("outro content must be a string");return this.outro+=e,this},appendLeft:function appendLeft(e,t){if("string"!=typeof t)throw new TypeError("inserted content must be a string");this._split(e);var n=this.byEnd[e];return n?n.appendLeft(t):this.intro+=t,this},appendRight:function appendRight(e,t){if("string"!=typeof t)throw new TypeError("inserted content must be a string");this._split(e);var n=this.byStart[e];return n?n.appendRight(t):this.outro+=t,this},clone:function clone(){for(var e=new MagicString$1(this.original,{filename:this.filename}),t=this.firstChunk,n=e.firstChunk=e.lastSearchedChunk=t.clone();t;){e.byStart[n.start]=n,e.byEnd[n.end]=n;var r=t.next,i=r&&r.clone();i&&(n.next=i,i.previous=n,n=i),t=r}return e.lastChunk=n,this.indentExclusionRanges&&(e.indentExclusionRanges=this.indentExclusionRanges.slice()),Object.keys(this.sourcemapLocations).forEach(function(t){e.sourcemapLocations[t]=!0}),e},generateMap:function generateMap(e){var t=this;e=e||{};var n=Object.keys(this.storedNames),r=new Mappings(e.hires),i=getLocator(this.original);return this.intro&&r.advance(this.intro),this.firstChunk.eachNext(function(e){var o=i(e.start);e.intro.length&&r.advance(e.intro),e.edited?r.addEdit(0,e.content,e.original,o,e.storeName?n.indexOf(e.original):-1):r.addUneditedChunk(0,e,t.original,o,t.sourcemapLocations),e.outro.length&&r.advance(e.outro)}),new SourceMap({file:e.file?e.file.split(/[\/\\]/).pop():null,sources:[e.source?getRelativePath(e.file||"",e.source):null],sourcesContent:e.includeContent?[this.original]:[null],names:n,mappings:r.encode()})},getIndentString:function getIndentString(){return null===this.indentStr?"\t":this.indentStr},indent:function indent(e,t){var n=/^[^\r\n]/gm;if(isObject(e)&&(t=e,e=void 0),""===(e=void 0!==e?e:this.indentStr||"\t"))return this;var r={};(t=t||{}).exclude&&("number"==typeof t.exclude[0]?[t.exclude]:t.exclude).forEach(function(e){for(var t=e[0];t<e[1];t+=1)r[t]=!0});var i=!1!==t.indentStart,o=function(t){return i?""+e+t:(i=!0,t)};this.intro=this.intro.replace(n,o);for(var a=0,s=this.firstChunk;s;){var l=s.end;if(s.edited)r[a]||(s.content=s.content.replace(n,o),s.content.length&&(i="\n"===s.content[s.content.length-1]));else for(a=s.start;a<l;){if(!r[a]){var u=this.original[a];"\n"===u?i=!0:"\r"!==u&&i&&(i=!1,a===s.start?s.prependRight(e):(this._splitChunk(s,a),(s=s.next).prependRight(e)))}a+=1}a=s.end,s=s.next}return this.outro=this.outro.replace(n,o),this},insert:function insert(){throw new Error("magicString.insert(...) is deprecated. Use prependRight(...) or appendLeft(...)")},insertLeft:function insertLeft(e,t){return l.insertLeft||(console.warn("magicString.insertLeft(...) is deprecated. Use magicString.appendLeft(...) instead"),l.insertLeft=!0),this.appendLeft(e,t)},insertRight:function insertRight(e,t){return l.insertRight||(console.warn("magicString.insertRight(...) is deprecated. Use magicString.prependRight(...) instead"),l.insertRight=!0),this.prependRight(e,t)},move:function move(e,t,n){if(n>=e&&n<=t)throw new Error("Cannot move a selection inside itself");this._split(e),this._split(t),this._split(n);var r=this.byStart[e],i=this.byEnd[t],o=r.previous,a=i.next,s=this.byStart[n];if(!s&&i===this.lastChunk)return this;var l=s?s.previous:this.lastChunk;return o&&(o.next=a),a&&(a.previous=o),l&&(l.next=r),s&&(s.previous=i),r.previous||(this.firstChunk=i.next),i.next||(this.lastChunk=r.previous,this.lastChunk.next=null),r.previous=l,i.next=s||null,l||(this.firstChunk=r),s||(this.lastChunk=i),this},overwrite:function overwrite(e,t,n,r){if("string"!=typeof n)throw new TypeError("replacement content must be a string");for(;e<0;)e+=this.original.length;for(;t<0;)t+=this.original.length;if(t>this.original.length)throw new Error("end is out of bounds");if(e===t)throw new Error("Cannot overwrite a zero-length range – use appendLeft or prependRight instead");this._split(e),this._split(t),!0===r&&(l.storeName||(console.warn("The final argument to magicString.overwrite(...) should be an options object. See https://github.com/rich-harris/magic-string"),l.storeName=!0),r={storeName:!0});var i=void 0!==r&&r.storeName,o=void 0!==r&&r.contentOnly;if(i){var a=this.original.slice(e,t);this.storedNames[a]=!0}var s=this.byStart[e],u=this.byEnd[t];if(s){if(t>s.end&&s.next!==this.byStart[s.end])throw new Error("Cannot overwrite across a split point");if(s.edit(n,i,o),s!==u){for(var c=s.next;c!==u;)c.edit("",!1),c=c.next;c.edit("",!1)}}else{var p=new Chunk(e,t,"").edit(n,i);u.next=p,p.previous=u}return this},prepend:function prepend(e){if("string"!=typeof e)throw new TypeError("outro content must be a string");return this.intro=e+this.intro,this},prependLeft:function prependLeft(e,t){if("string"!=typeof t)throw new TypeError("inserted content must be a string");this._split(e);var n=this.byEnd[e];return n?n.prependLeft(t):this.intro=t+this.intro,this},prependRight:function prependRight(e,t){if("string"!=typeof t)throw new TypeError("inserted content must be a string");this._split(e);var n=this.byStart[e];return n?n.prependRight(t):this.outro=t+this.outro,this},remove:function remove(e,t){for(;e<0;)e+=this.original.length;for(;t<0;)t+=this.original.length;if(e===t)return this;if(e<0||t>this.original.length)throw new Error("Character is out of bounds");if(e>t)throw new Error("end must be greater than start");this._split(e),this._split(t);for(var n=this.byStart[e];n;)n.intro="",n.outro="",n.edit(""),n=t>n.end?this.byStart[n.end]:null;return this},slice:function slice(e,t){for(void 0===e&&(e=0),void 0===t&&(t=this.original.length);e<0;)e+=this.original.length;for(;t<0;)t+=this.original.length;for(var n="",r=this.firstChunk;r&&(r.start>e||r.end<=e);){if(r.start<t&&r.end>=t)return n;r=r.next}if(r&&r.edited&&r.start!==e)throw new Error("Cannot use replaced character "+e+" as slice start anchor.");for(var i=r;r;){!r.intro||i===r&&r.start!==e||(n+=r.intro);var o=r.start<t&&r.end>=t;if(o&&r.edited&&r.end!==t)throw new Error("Cannot use replaced character "+t+" as slice end anchor.");var a=i===r?e-r.start:0,s=o?r.content.length+t-r.end:r.content.length;if(n+=r.content.slice(a,s),!r.outro||o&&r.end!==t||(n+=r.outro),o)break;r=r.next}return n},snip:function snip(e,t){var n=this.clone();return n.remove(0,e),n.remove(t,n.original.length),n},_split:function _split(e){if(!this.byStart[e]&&!this.byEnd[e])for(var t=this.lastSearchedChunk,n=e>t.end;;){if(t.contains(e))return this._splitChunk(t,e);t=n?this.byStart[t.end]:this.byEnd[t.start]}},_splitChunk:function _splitChunk(e,t){if(e.edited&&e.content.length){var n=getLocator(this.original)(t);throw new Error("Cannot split a chunk that has already been edited ("+n.line+":"+n.column+' – "'+e.original+'")')}var r=e.split(t);return this.byEnd[t]=e,this.byStart[t]=r,this.byEnd[r.end]=r,e===this.lastChunk&&(this.lastChunk=r),this.lastSearchedChunk=e,!0},toString:function toString(){for(var e=this.intro,t=this.firstChunk;t;)e+=t.toString(),t=t.next;return e+this.outro},trimLines:function trimLines(){return this.trim("[\\r\\n]")},trim:function trim(e){return this.trimStart(e).trimEnd(e)},trimEnd:function trimEnd(e){var t=new RegExp((e||"\\s")+"+$");if(this.outro=this.outro.replace(t,""),this.outro.length)return this;var n=this.lastChunk;do{var r=n.end,i=n.trimEnd(t);if(n.end!==r&&(this.lastChunk===n&&(this.lastChunk=n.next),this.byEnd[n.end]=n,this.byStart[n.next.start]=n.next,this.byEnd[n.next.end]=n.next),i)return this;n=n.previous}while(n);return this},trimStart:function trimStart(e){var t=new RegExp("^"+(e||"\\s")+"+");if(this.intro=this.intro.replace(t,""),this.intro.length)return this;var n=this.firstChunk;do{var r=n.end,i=n.trimStart(t);if(n.end!==r&&(n===this.lastChunk&&(this.lastChunk=n.next),this.byEnd[n.end]=n,this.byStart[n.next.start]=n.next,this.byEnd[n.next.end]=n.next),i)return this;n=n.next}while(n);return this}};var u=Object.prototype.hasOwnProperty;function Bundle(e){void 0===e&&(e={}),this.intro=e.intro||"",this.separator=void 0!==e.separator?e.separator:"\n",this.sources=[],this.uniqueSources=[],this.uniqueSourceIndexByFilename={}}Bundle.prototype={addSource:function addSource(e){if(e instanceof MagicString$1)return this.addSource({content:e,filename:e.filename,separator:this.separator});if(!isObject(e)||!e.content)throw new Error("bundle.addSource() takes an object with a `content` property, which should be an instance of MagicString, and an optional `filename`");if(["filename","indentExclusionRanges","separator"].forEach(function(t){u.call(e,t)||(e[t]=e.content[t])}),void 0===e.separator&&(e.separator=this.separator),e.filename)if(u.call(this.uniqueSourceIndexByFilename,e.filename)){var t=this.uniqueSources[this.uniqueSourceIndexByFilename[e.filename]];if(e.content.original!==t.content)throw new Error("Illegal source: same filename ("+e.filename+"), different contents")}else this.uniqueSourceIndexByFilename[e.filename]=this.uniqueSources.length,this.uniqueSources.push({filename:e.filename,content:e.content.original});return this.sources.push(e),this},append:function append(e,t){return this.addSource({content:new MagicString$1(e),separator:t&&t.separator||""}),this},clone:function clone(){var e=new Bundle({intro:this.intro,separator:this.separator});return this.sources.forEach(function(t){e.addSource({filename:t.filename,content:t.content.clone(),separator:t.separator})}),e},generateMap:function generateMap(e){var t=this;void 0===e&&(e={});var n=[];this.sources.forEach(function(e){Object.keys(e.content.storedNames).forEach(function(e){~n.indexOf(e)||n.push(e)})});var r=new Mappings(e.hires);return this.intro&&r.advance(this.intro),this.sources.forEach(function(e,i){i>0&&r.advance(t.separator);var o=e.filename?t.uniqueSourceIndexByFilename[e.filename]:-1,a=e.content,s=getLocator(a.original);a.intro&&r.advance(a.intro),a.firstChunk.eachNext(function(t){var i=s(t.start);t.intro.length&&r.advance(t.intro),e.filename?t.edited?r.addEdit(o,t.content,t.original,i,t.storeName?n.indexOf(t.original):-1):r.addUneditedChunk(o,t,a.original,i,a.sourcemapLocations):r.advance(t.content),t.outro.length&&r.advance(t.outro)}),a.outro&&r.advance(a.outro)}),new SourceMap({file:e.file?e.file.split(/[\/\\]/).pop():null,sources:this.uniqueSources.map(function(t){return e.file?getRelativePath(e.file,t.filename):t.filename}),sourcesContent:this.uniqueSources.map(function(t){return e.includeContent?t.content:null}),names:n,mappings:r.encode()})},getIndentString:function getIndentString(){var e={};return this.sources.forEach(function(t){var n=t.content.indentStr;null!==n&&(e[n]||(e[n]=0),e[n]+=1)}),Object.keys(e).sort(function(t,n){return e[t]-e[n]})[0]||"\t"},indent:function indent(e){var t=this;if(arguments.length||(e=this.getIndentString()),""===e)return this;var n=!this.intro||"\n"===this.intro.slice(-1);return this.sources.forEach(function(r,i){var o=void 0!==r.separator?r.separator:t.separator,a=n||i>0&&/\r?\n$/.test(o);r.content.indent(e,{exclude:r.indentExclusionRanges,indentStart:a}),n="\n"===r.content.toString().slice(0,-1)}),this.intro&&(this.intro=e+this.intro.replace(/^[^\n]/gm,function(t,n){return n>0?e+t:t})),this},prepend:function prepend(e){return this.intro=e+this.intro,this},toString:function toString(){var e=this,t=this.sources.map(function(t,n){var r=void 0!==t.separator?t.separator:e.separator;return(n>0?r:"")+t.content.toString()}).join("");return this.intro+t},trimLines:function trimLines(){return this.trim("[\\r\\n]")},trim:function trim(e){return this.trimStart(e).trimEnd(e)},trimStart:function trimStart(e){var t=new RegExp("^"+(e||"\\s")+"+");if(this.intro=this.intro.replace(t,""),!this.intro){var n,r=0;do{if(!(n=this.sources[r]))break;n.content.trimStart(e),r+=1}while(""===n.content.toString())}return this},trimEnd:function trimEnd(e){var t,n=new RegExp((e||"\\s")+"+$"),r=this.sources.length-1;do{if(!(t=this.sources[r])){this.intro=this.intro.replace(n,"");break}t.content.trimEnd(e),r-=1}while(""===t.content.toString());return this}},t.a=MagicString$1}).call(this,n(219).Buffer,n(66))},function(e,t,n){"use strict";n.d(t,"a",function(){return encode});var r={},i={};function encode(e){var t;if("number"==typeof e)t=encodeInteger(e);else{t="";for(var n=0;n<e.length;n+=1)t+=encodeInteger(e[n])}return t}function encodeInteger(e){var t="";e<0?e=-e<<1|1:e<<=1;do{var n=31&e;(e>>=5)>0&&(n|=32),t+=i[n]}while(e>0);return t}"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".split("").forEach(function(e,t){r[e]=t,i[t]=e})},function(e,t,n){"use strict";n.r(t),n.d(t,"version",function(){return re}),n.d(t,"parse",function(){return parse}),n.d(t,"parseExpressionAt",function(){return parseExpressionAt}),n.d(t,"tokenizer",function(){return tokenizer}),n.d(t,"parse_dammit",function(){return ee}),n.d(t,"LooseParser",function(){return te}),n.d(t,"pluginsLoose",function(){return ne}),n.d(t,"addLooseExports",function(){return addLooseExports}),n.d(t,"Parser",function(){return O}),n.d(t,"plugins",function(){return A}),n.d(t,"defaultOptions",function(){return T}),n.d(t,"Position",function(){return C}),n.d(t,"SourceLocation",function(){return k}),n.d(t,"getLineInfo",function(){return getLineInfo}),n.d(t,"Node",function(){return G}),n.d(t,"TokenType",function(){return f}),n.d(t,"tokTypes",function(){return y}),n.d(t,"keywordTypes",function(){return m}),n.d(t,"TokContext",function(){return q}),n.d(t,"tokContexts",function(){return H}),n.d(t,"isIdentifierChar",function(){return isIdentifierChar}),n.d(t,"isIdentifierStart",function(){return isIdentifierStart}),n.d(t,"Token",function(){return J}),n.d(t,"isNewLine",function(){return isNewLine}),n.d(t,"lineBreak",function(){return v}),n.d(t,"lineBreakG",function(){return _}),n.d(t,"nonASCIIwhitespace",function(){return b});var r={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},i="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",o={5:i,6:i+" const class extends export import super"},a=/^in(stanceof)?$/,s="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈא-תׯ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࢠ-ࢴࢶ-ࢽऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡸᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲈᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿯ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞹꟷ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭥꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",l="‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߽߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛࣓-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯৾ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ૺ-૿ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఄా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ഀ-ഃ഻഼ാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ංඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ູົຼ່-ໍ໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠐-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭ᳲ-᳴᳷-᳹᷀-᷹᷻-᷿‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧꢀꢁꢴ-ꣅ꣐-꣙꣠-꣱ꣿ-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿",u=new RegExp("["+s+"]"),c=new RegExp("["+s+l+"]");s=l=null;var p=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,477,28,11,0,9,21,190,52,76,44,33,24,27,35,30,0,12,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,54,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,86,26,230,43,117,63,32,0,257,0,11,39,8,0,22,0,12,39,3,3,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,270,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,68,12,0,67,12,65,1,31,6129,15,754,9486,286,82,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,4149,196,60,67,1213,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42710,42,4148,12,221,3,5761,15,7472,3104,541],h=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,525,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,4,9,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,280,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1016,45,17,3,19723,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,2214,6,110,6,6,9,792487,239];function isInAstralSet(e,t){for(var n=65536,r=0;r<t.length;r+=2){if((n+=t[r])>e)return!1;if((n+=t[r+1])>=e)return!0}}function isIdentifierStart(e,t){return e<65?36===e:e<91||(e<97?95===e:e<123||(e<=65535?e>=170&&u.test(String.fromCharCode(e)):!1!==t&&isInAstralSet(e,p)))}function isIdentifierChar(e,t){return e<48?36===e:e<58||!(e<65)&&(e<91||(e<97?95===e:e<123||(e<=65535?e>=170&&c.test(String.fromCharCode(e)):!1!==t&&(isInAstralSet(e,p)||isInAstralSet(e,h)))))}var f=function TokenType(e,t){void 0===t&&(t={}),this.label=e,this.keyword=t.keyword,this.beforeExpr=!!t.beforeExpr,this.startsExpr=!!t.startsExpr,this.isLoop=!!t.isLoop,this.isAssign=!!t.isAssign,this.prefix=!!t.prefix,this.postfix=!!t.postfix,this.binop=t.binop||null,this.updateContext=null};function binop(e,t){return new f(e,{beforeExpr:!0,binop:t})}var d={beforeExpr:!0},g={startsExpr:!0},m={};function kw(e,t){return void 0===t&&(t={}),t.keyword=e,m[e]=new f(e,t)}var y={num:new f("num",g),regexp:new f("regexp",g),string:new f("string",g),name:new f("name",g),eof:new f("eof"),bracketL:new f("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new f("]"),braceL:new f("{",{beforeExpr:!0,startsExpr:!0}),braceR:new f("}"),parenL:new f("(",{beforeExpr:!0,startsExpr:!0}),parenR:new f(")"),comma:new f(",",d),semi:new f(";",d),colon:new f(":",d),dot:new f("."),question:new f("?",d),arrow:new f("=>",d),template:new f("template"),invalidTemplate:new f("invalidTemplate"),ellipsis:new f("...",d),backQuote:new f("`",g),dollarBraceL:new f("${",{beforeExpr:!0,startsExpr:!0}),eq:new f("=",{beforeExpr:!0,isAssign:!0}),assign:new f("_=",{beforeExpr:!0,isAssign:!0}),incDec:new f("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new f("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:binop("||",1),logicalAND:binop("&&",2),bitwiseOR:binop("|",3),bitwiseXOR:binop("^",4),bitwiseAND:binop("&",5),equality:binop("==/!=/===/!==",6),relational:binop("</>/<=/>=",7),bitShift:binop("<</>>/>>>",8),plusMin:new f("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:binop("%",10),star:binop("*",10),slash:binop("/",10),starstar:new f("**",{beforeExpr:!0}),_break:kw("break"),_case:kw("case",d),_catch:kw("catch"),_continue:kw("continue"),_debugger:kw("debugger"),_default:kw("default",d),_do:kw("do",{isLoop:!0,beforeExpr:!0}),_else:kw("else",d),_finally:kw("finally"),_for:kw("for",{isLoop:!0}),_function:kw("function",g),_if:kw("if"),_return:kw("return",d),_switch:kw("switch"),_throw:kw("throw",d),_try:kw("try"),_var:kw("var"),_const:kw("const"),_while:kw("while",{isLoop:!0}),_with:kw("with"),_new:kw("new",{beforeExpr:!0,startsExpr:!0}),_this:kw("this",g),_super:kw("super",g),_class:kw("class",g),_extends:kw("extends",d),_export:kw("export"),_import:kw("import"),_null:kw("null",g),_true:kw("true",g),_false:kw("false",g),_in:kw("in",{beforeExpr:!0,binop:7}),_instanceof:kw("instanceof",{beforeExpr:!0,binop:7}),_typeof:kw("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:kw("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:kw("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},v=/\r\n?|\n|\u2028|\u2029/,_=new RegExp(v.source,"g");function isNewLine(e,t){return 10===e||13===e||!t&&(8232===e||8233===e)}var b=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,x=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,w=Object.prototype,S=w.hasOwnProperty,E=w.toString;function has(e,t){return S.call(e,t)}var P=Array.isArray||function(e){return"[object Array]"===E.call(e)},C=function Position(e,t){this.line=e,this.column=t};C.prototype.offset=function offset(e){return new C(this.line,this.column+e)};var k=function SourceLocation(e,t,n){this.start=t,this.end=n,null!==e.sourceFile&&(this.source=e.sourceFile)};function getLineInfo(e,t){for(var n=1,r=0;;){_.lastIndex=r;var i=_.exec(e);if(!(i&&i.index<t))return new C(n,t-r);++n,r=i.index+i[0].length}}var T={ecmaVersion:7,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1,plugins:{}};function getOptions(e){var t={};for(var n in T)t[n]=e&&has(e,n)?e[n]:T[n];if(t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),null==t.allowReserved&&(t.allowReserved=t.ecmaVersion<5),P(t.onToken)){var r=t.onToken;t.onToken=function(e){return r.push(e)}}return P(t.onComment)&&(t.onComment=pushComment(t,t.onComment)),t}function pushComment(e,t){return function(n,r,i,o,a,s){var l={type:n?"Block":"Line",value:r,start:i,end:o};e.locations&&(l.loc=new k(this,a,s)),e.ranges&&(l.range=[i,o]),t.push(l)}}var A={};function keywordRegexp(e){return new RegExp("^(?:"+e.replace(/ /g,"|")+")$")}var O=function Parser(e,t,n){this.options=e=getOptions(e),this.sourceFile=e.sourceFile,this.keywords=keywordRegexp(o[e.ecmaVersion>=6?6:5]);var i="";if(!e.allowReserved){for(var a=e.ecmaVersion;!(i=r[a]);a--);"module"===e.sourceType&&(i+=" await")}this.reservedWords=keywordRegexp(i);var s=(i?i+" ":"")+r.strict;this.reservedWordsStrict=keywordRegexp(s),this.reservedWordsStrictBind=keywordRegexp(s+" "+r.strictBind),this.input=String(t),this.containsEsc=!1,this.loadPlugins(e.plugins),n?(this.pos=n,this.lineStart=this.input.lastIndexOf("\n",n-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(v).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=y.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule="module"===e.sourceType,this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.inFunction=this.inGenerator=this.inAsync=!1,this.yieldPos=this.awaitPos=0,this.labels=[],0===this.pos&&e.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2),this.scopeStack=[],this.enterFunctionScope(),this.regexpState=null};O.prototype.isKeyword=function isKeyword(e){return this.keywords.test(e)},O.prototype.isReservedWord=function isReservedWord(e){return this.reservedWords.test(e)},O.prototype.extend=function extend(e,t){this[e]=t(this[e])},O.prototype.loadPlugins=function loadPlugins(e){for(var t in e){var n=A[t];if(!n)throw new Error("Plugin '"+t+"' not found");n(this,e[t])}},O.prototype.parse=function parse(){var e=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(e)};var I=O.prototype,R=/^(?:'((?:\\.|[^'])*?)'|"((?:\\.|[^"])*?)"|;)/;function DestructuringErrors(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}I.strictDirective=function(e){for(;;){x.lastIndex=e,e+=x.exec(this.input)[0].length;var t=R.exec(this.input.slice(e));if(!t)return!1;if("use strict"===(t[1]||t[2]))return!0;e+=t[0].length}},I.eat=function(e){return this.type===e&&(this.next(),!0)},I.isContextual=function(e){return this.type===y.name&&this.value===e&&!this.containsEsc},I.eatContextual=function(e){return!!this.isContextual(e)&&(this.next(),!0)},I.expectContextual=function(e){this.eatContextual(e)||this.unexpected()},I.canInsertSemicolon=function(){return this.type===y.eof||this.type===y.braceR||v.test(this.input.slice(this.lastTokEnd,this.start))},I.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},I.semicolon=function(){this.eat(y.semi)||this.insertSemicolon()||this.unexpected()},I.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0},I.expect=function(e){this.eat(e)||this.unexpected()},I.unexpected=function(e){this.raise(null!=e?e:this.start,"Unexpected token")},I.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,"Parenthesized pattern")}},I.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,r=e.doubleProto;if(!t)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")},I.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},I.isSimpleAssignTarget=function(e){return"ParenthesizedExpression"===e.type?this.isSimpleAssignTarget(e.expression):"Identifier"===e.type||"MemberExpression"===e.type};var L=O.prototype;L.parseTopLevel=function(e){var t={};for(e.body||(e.body=[]);this.type!==y.eof;){var n=this.parseStatement(!0,!0,t);e.body.push(n)}return this.adaptDirectivePrologue(e.body),this.next(),this.options.ecmaVersion>=6&&(e.sourceType=this.options.sourceType),this.finishNode(e,"Program")};var M={kind:"loop"},j={kind:"switch"};L.isLet=function(){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;x.lastIndex=this.pos;var e=x.exec(this.input),t=this.pos+e[0].length,n=this.input.charCodeAt(t);if(91===n||123===n)return!0;if(isIdentifierStart(n,!0)){for(var r=t+1;isIdentifierChar(this.input.charCodeAt(r),!0);)++r;var i=this.input.slice(t,r);if(!a.test(i))return!0}return!1},L.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;x.lastIndex=this.pos;var e=x.exec(this.input),t=this.pos+e[0].length;return!(v.test(this.input.slice(this.pos,t))||"function"!==this.input.slice(t,t+8)||t+8!==this.input.length&&isIdentifierChar(this.input.charAt(t+8)))},L.parseStatement=function(e,t,n){var r,i=this.type,o=this.startNode();switch(this.isLet()&&(i=y._var,r="let"),i){case y._break:case y._continue:return this.parseBreakContinueStatement(o,i.keyword);case y._debugger:return this.parseDebuggerStatement(o);case y._do:return this.parseDoStatement(o);case y._for:return this.parseForStatement(o);case y._function:return!e&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(o,!1);case y._class:return e||this.unexpected(),this.parseClass(o,!0);case y._if:return this.parseIfStatement(o);case y._return:return this.parseReturnStatement(o);case y._switch:return this.parseSwitchStatement(o);case y._throw:return this.parseThrowStatement(o);case y._try:return this.parseTryStatement(o);case y._const:case y._var:return r=r||this.value,e||"var"===r||this.unexpected(),this.parseVarStatement(o,r);case y._while:return this.parseWhileStatement(o);case y._with:return this.parseWithStatement(o);case y.braceL:return this.parseBlock();case y.semi:return this.parseEmptyStatement(o);case y._export:case y._import:return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),i===y._import?this.parseImport(o):this.parseExport(o,n);default:if(this.isAsyncFunction())return e||this.unexpected(),this.next(),this.parseFunctionStatement(o,!0);var a=this.value,s=this.parseExpression();return i===y.name&&"Identifier"===s.type&&this.eat(y.colon)?this.parseLabeledStatement(o,a,s):this.parseExpressionStatement(o,s)}},L.parseBreakContinueStatement=function(e,t){var n="break"===t;this.next(),this.eat(y.semi)||this.insertSemicolon()?e.label=null:this.type!==y.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if(null==e.label||i.name===e.label.name){if(null!=i.kind&&(n||"loop"===i.kind))break;if(e.label&&n)break}}return r===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")},L.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")},L.parseDoStatement=function(e){return this.next(),this.labels.push(M),e.body=this.parseStatement(!1),this.labels.pop(),this.expect(y._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(y.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")},L.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(M),this.enterLexicalScope(),this.expect(y.parenL),this.type===y.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===y._var||this.type===y._const||n){var r=this.startNode(),i=n?"let":this.value;return this.next(),this.parseVar(r,!0,i),this.finishNode(r,"VariableDeclaration"),!(this.type===y._in||this.options.ecmaVersion>=6&&this.isContextual("of"))||1!==r.declarations.length||"var"!==i&&r.declarations[0].init?(t>-1&&this.unexpected(t),this.parseFor(e,r)):(this.options.ecmaVersion>=9&&(this.type===y._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,r))}var o=new DestructuringErrors,a=this.parseExpression(!0,o);return this.type===y._in||this.options.ecmaVersion>=6&&this.isContextual("of")?(this.options.ecmaVersion>=9&&(this.type===y._in?t>-1&&this.unexpected(t):e.await=t>-1),this.toAssignable(a,!1,o),this.checkLVal(a),this.parseForIn(e,a)):(this.checkExpressionErrors(o,!0),t>-1&&this.unexpected(t),this.parseFor(e,a))},L.parseFunctionStatement=function(e,t){return this.next(),this.parseFunction(e,!0,!1,t)},L.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement(!this.strict&&this.type===y._function),e.alternate=this.eat(y._else)?this.parseStatement(!this.strict&&this.type===y._function):null,this.finishNode(e,"IfStatement")},L.parseReturnStatement=function(e){return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function"),this.next(),this.eat(y.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")},L.parseSwitchStatement=function(e){var t;this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(y.braceL),this.labels.push(j),this.enterLexicalScope();for(var n=!1;this.type!==y.braceR;)if(this.type===y._case||this.type===y._default){var r=this.type===y._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),r?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(y.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(!0));return this.exitLexicalScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")},L.parseThrowStatement=function(e){return this.next(),v.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var D=[];L.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===y._catch){var t=this.startNode();this.next(),this.eat(y.parenL)?(t.param=this.parseBindingAtom(),this.enterLexicalScope(),this.checkLVal(t.param,"let"),this.expect(y.parenR)):(this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterLexicalScope()),t.body=this.parseBlock(!1),this.exitLexicalScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(y._finally)?this.parseBlock():null,e.handler||e.finalizer||this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")},L.parseVarStatement=function(e,t){return this.next(),this.parseVar(e,!1,t),this.semicolon(),this.finishNode(e,"VariableDeclaration")},L.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(M),e.body=this.parseStatement(!1),this.labels.pop(),this.finishNode(e,"WhileStatement")},L.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement(!1),this.finishNode(e,"WithStatement")},L.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")},L.parseLabeledStatement=function(e,t,n){for(var r=0,i=this.labels;r<i.length;r+=1){i[r].name===t&&this.raise(n.start,"Label '"+t+"' is already declared")}for(var o=this.type.isLoop?"loop":this.type===y._switch?"switch":null,a=this.labels.length-1;a>=0;a--){var s=this.labels[a];if(s.statementStart!==e.start)break;s.statementStart=this.start,s.kind=o}return this.labels.push({name:t,kind:o,statementStart:this.start}),e.body=this.parseStatement(!0),("ClassDeclaration"===e.body.type||"VariableDeclaration"===e.body.type&&"var"!==e.body.kind||"FunctionDeclaration"===e.body.type&&(this.strict||e.body.generator||e.body.async))&&this.raiseRecoverable(e.body.start,"Invalid labeled declaration"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")},L.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")},L.parseBlock=function(e){void 0===e&&(e=!0);var t=this.startNode();for(t.body=[],this.expect(y.braceL),e&&this.enterLexicalScope();!this.eat(y.braceR);){var n=this.parseStatement(!0);t.body.push(n)}return e&&this.exitLexicalScope(),this.finishNode(t,"BlockStatement")},L.parseFor=function(e,t){return e.init=t,this.expect(y.semi),e.test=this.type===y.semi?null:this.parseExpression(),this.expect(y.semi),e.update=this.type===y.parenR?null:this.parseExpression(),this.expect(y.parenR),this.exitLexicalScope(),e.body=this.parseStatement(!1),this.labels.pop(),this.finishNode(e,"ForStatement")},L.parseForIn=function(e,t){var n=this.type===y._in?"ForInStatement":"ForOfStatement";return this.next(),"ForInStatement"===n&&("AssignmentPattern"===t.type||"VariableDeclaration"===t.type&&null!=t.declarations[0].init&&(this.strict||"Identifier"!==t.declarations[0].id.type))&&this.raise(t.start,"Invalid assignment in for-in loop head"),e.left=t,e.right="ForInStatement"===n?this.parseExpression():this.parseMaybeAssign(),this.expect(y.parenR),this.exitLexicalScope(),e.body=this.parseStatement(!1),this.labels.pop(),this.finishNode(e,n)},L.parseVar=function(e,t,n){for(e.declarations=[],e.kind=n;;){var r=this.startNode();if(this.parseVarId(r,n),this.eat(y.eq)?r.init=this.parseMaybeAssign(t):"const"!==n||this.type===y._in||this.options.ecmaVersion>=6&&this.isContextual("of")?"Identifier"===r.id.type||t&&(this.type===y._in||this.isContextual("of"))?r.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected(),e.declarations.push(this.finishNode(r,"VariableDeclarator")),!this.eat(y.comma))break}return e},L.parseVarId=function(e,t){e.id=this.parseBindingAtom(t),this.checkLVal(e.id,t,!1)},L.parseFunction=function(e,t,n,r){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(e.generator=this.eat(y.star)),this.options.ecmaVersion>=8&&(e.async=!!r),t&&(e.id="nullableID"===t&&this.type!==y.name?null:this.parseIdent(),e.id&&this.checkLVal(e.id,this.inModule&&!this.inFunction?"let":"var"));var i=this.inGenerator,o=this.inAsync,a=this.yieldPos,s=this.awaitPos,l=this.inFunction;return this.inGenerator=e.generator,this.inAsync=e.async,this.yieldPos=0,this.awaitPos=0,this.inFunction=!0,this.enterFunctionScope(),t||(e.id=this.type===y.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n),this.inGenerator=i,this.inAsync=o,this.yieldPos=a,this.awaitPos=s,this.inFunction=l,this.finishNode(e,t?"FunctionDeclaration":"FunctionExpression")},L.parseFunctionParams=function(e){this.expect(y.parenL),e.params=this.parseBindingList(y.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},L.parseClass=function(e,t){this.next(),this.parseClassId(e,t),this.parseClassSuper(e);var n=this.startNode(),r=!1;for(n.body=[],this.expect(y.braceL);!this.eat(y.braceR);){var i=this.parseClassMember(n);i&&"MethodDefinition"===i.type&&"constructor"===i.kind&&(r&&this.raise(i.start,"Duplicate constructor in the same class"),r=!0)}return e.body=this.finishNode(n,"ClassBody"),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")},L.parseClassMember=function(e){var t=this;if(this.eat(y.semi))return null;var n=this.startNode(),r=function(e,r){void 0===r&&(r=!1);var i=t.start,o=t.startLoc;return!!t.eatContextual(e)&&(!(t.type===y.parenL||r&&t.canInsertSemicolon())||(n.key&&t.unexpected(),n.computed=!1,n.key=t.startNodeAt(i,o),n.key.name=e,t.finishNode(n.key,"Identifier"),!1))};n.kind="method",n.static=r("static");var i=this.eat(y.star),o=!1;i||(this.options.ecmaVersion>=8&&r("async",!0)?(o=!0,i=this.options.ecmaVersion>=9&&this.eat(y.star)):r("get")?n.kind="get":r("set")&&(n.kind="set")),n.key||this.parsePropertyName(n);var a=n.key;return n.computed||n.static||!("Identifier"===a.type&&"constructor"===a.name||"Literal"===a.type&&"constructor"===a.value)?n.static&&"Identifier"===a.type&&"prototype"===a.name&&this.raise(a.start,"Classes may not have a static property named prototype"):("method"!==n.kind&&this.raise(a.start,"Constructor can't have get/set modifier"),i&&this.raise(a.start,"Constructor can't be a generator"),o&&this.raise(a.start,"Constructor can't be an async method"),n.kind="constructor"),this.parseClassMethod(e,n,i,o),"get"===n.kind&&0!==n.value.params.length&&this.raiseRecoverable(n.value.start,"getter should have no params"),"set"===n.kind&&1!==n.value.params.length&&this.raiseRecoverable(n.value.start,"setter should have exactly one param"),"set"===n.kind&&"RestElement"===n.value.params[0].type&&this.raiseRecoverable(n.value.params[0].start,"Setter cannot use rest params"),n},L.parseClassMethod=function(e,t,n,r){t.value=this.parseMethod(n,r),e.body.push(this.finishNode(t,"MethodDefinition"))},L.parseClassId=function(e,t){e.id=this.type===y.name?this.parseIdent():!0===t?this.unexpected():null},L.parseClassSuper=function(e){e.superClass=this.eat(y._extends)?this.parseExprSubscripts():null},L.parseExport=function(e,t){if(this.next(),this.eat(y.star))return this.expectContextual("from"),this.type!==y.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration");if(this.eat(y._default)){var n;if(this.checkExport(t,"default",this.lastTokStart),this.type===y._function||(n=this.isAsyncFunction())){var r=this.startNode();this.next(),n&&this.next(),e.declaration=this.parseFunction(r,"nullableID",!1,n)}else if(this.type===y._class){var i=this.startNode();e.declaration=this.parseClass(i,"nullableID")}else e.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(e,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())e.declaration=this.parseStatement(!0),"VariableDeclaration"===e.declaration.type?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id.name,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==y.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var o=0,a=e.specifiers;o<a.length;o+=1){var s=a[o];this.checkUnreserved(s.local)}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")},L.checkExport=function(e,t,n){e&&(has(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)},L.checkPatternExport=function(e,t){var n=t.type;if("Identifier"===n)this.checkExport(e,t.name,t.start);else if("ObjectPattern"===n)for(var r=0,i=t.properties;r<i.length;r+=1){var o=i[r];this.checkPatternExport(e,o)}else if("ArrayPattern"===n)for(var a=0,s=t.elements;a<s.length;a+=1){var l=s[a];l&&this.checkPatternExport(e,l)}else"Property"===n?this.checkPatternExport(e,t.value):"AssignmentPattern"===n?this.checkPatternExport(e,t.left):"RestElement"===n?this.checkPatternExport(e,t.argument):"ParenthesizedExpression"===n&&this.checkPatternExport(e,t.expression)},L.checkVariableExport=function(e,t){if(e)for(var n=0,r=t;n<r.length;n+=1){var i=r[n];this.checkPatternExport(e,i.id)}},L.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()},L.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(y.braceL);!this.eat(y.braceR);){if(n)n=!1;else if(this.expect(y.comma),this.afterTrailingComma(y.braceR))break;var r=this.startNode();r.local=this.parseIdent(!0),r.exported=this.eatContextual("as")?this.parseIdent(!0):r.local,this.checkExport(e,r.exported.name,r.exported.start),t.push(this.finishNode(r,"ExportSpecifier"))}return t},L.parseImport=function(e){return this.next(),this.type===y.string?(e.specifiers=D,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===y.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")},L.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===y.name){var n=this.startNode();if(n.local=this.parseIdent(),this.checkLVal(n.local,"let"),e.push(this.finishNode(n,"ImportDefaultSpecifier")),!this.eat(y.comma))return e}if(this.type===y.star){var r=this.startNode();return this.next(),this.expectContextual("as"),r.local=this.parseIdent(),this.checkLVal(r.local,"let"),e.push(this.finishNode(r,"ImportNamespaceSpecifier")),e}for(this.expect(y.braceL);!this.eat(y.braceR);){if(t)t=!1;else if(this.expect(y.comma),this.afterTrailingComma(y.braceR))break;var i=this.startNode();i.imported=this.parseIdent(!0),this.eatContextual("as")?i.local=this.parseIdent():(this.checkUnreserved(i.imported),i.local=i.imported),this.checkLVal(i.local,"let"),e.push(this.finishNode(i,"ImportSpecifier"))}return e},L.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)},L.isDirectiveCandidate=function(e){return"ExpressionStatement"===e.type&&"Literal"===e.expression.type&&"string"==typeof e.expression.value&&('"'===this.input[e.start]||"'"===this.input[e.start])};var F=O.prototype;F.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&"await"===e.name&&this.raise(e.start,"Can not use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,i=e.properties;r<i.length;r+=1){var o=i[r];this.toAssignable(o,t),"RestElement"!==o.type||"ArrayPattern"!==o.argument.type&&"ObjectPattern"!==o.argument.type||this.raise(o.argument.start,"Unexpected token")}break;case"Property":"init"!==e.kind&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),"AssignmentPattern"===e.argument.type&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":"="!==e.operator&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);case"AssignmentPattern":break;case"ParenthesizedExpression":this.toAssignable(e.expression,t);break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e},F.toAssignableList=function(e,t){for(var n=e.length,r=0;r<n;r++){var i=e[r];i&&this.toAssignable(i,t)}if(n){var o=e[n-1];6===this.options.ecmaVersion&&t&&o&&"RestElement"===o.type&&"Identifier"!==o.argument.type&&this.unexpected(o.argument.start)}return e},F.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")},F.parseRestBinding=function(){var e=this.startNode();return this.next(),6===this.options.ecmaVersion&&this.type!==y.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")},F.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case y.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(y.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case y.braceL:return this.parseObj(!0)}return this.parseIdent()},F.parseBindingList=function(e,t,n){for(var r=[],i=!0;!this.eat(e);)if(i?i=!1:this.expect(y.comma),t&&this.type===y.comma)r.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===y.ellipsis){var o=this.parseRestBinding();this.parseBindingListItem(o),r.push(o),this.type===y.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}var a=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(a),r.push(a)}return r},F.parseBindingListItem=function(e){return e},F.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(y.eq))return n;var r=this.startNodeAt(e,t);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")},F.checkLVal=function(e,t,n){switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(t?"Binding ":"Assigning to ")+e.name+" in strict mode"),n&&(has(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),t&&"none"!==t&&(("var"===t&&!this.canDeclareVarName(e.name)||"var"!==t&&!this.canDeclareLexicalName(e.name))&&this.raiseRecoverable(e.start,"Identifier '"+e.name+"' has already been declared"),"var"===t?this.declareVarName(e.name):this.declareLexicalName(e.name));break;case"MemberExpression":t&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ObjectPattern":for(var r=0,i=e.properties;r<i.length;r+=1){var o=i[r];this.checkLVal(o,t,n)}break;case"Property":this.checkLVal(e.value,t,n);break;case"ArrayPattern":for(var a=0,s=e.elements;a<s.length;a+=1){var l=s[a];l&&this.checkLVal(l,t,n)}break;case"AssignmentPattern":this.checkLVal(e.left,t,n);break;case"RestElement":this.checkLVal(e.argument,t,n);break;case"ParenthesizedExpression":this.checkLVal(e.expression,t,n);break;default:this.raise(e.start,(t?"Binding":"Assigning to")+" rvalue")}};var N=O.prototype;N.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&"SpreadElement"===e.type||this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var r,i=e.key;switch(i.type){case"Identifier":r=i.name;break;case"Literal":r=String(i.value);break;default:return}var o=e.kind;if(this.options.ecmaVersion>=6)"__proto__"===r&&"init"===o&&(t.proto&&(n&&n.doubleProto<0?n.doubleProto=i.start:this.raiseRecoverable(i.start,"Redefinition of __proto__ property")),t.proto=!0);else{var a=t[r="$"+r];if(a)("init"===o?this.strict&&a.init||a.get||a.set:a.init||a[o])&&this.raiseRecoverable(i.start,"Redefinition of property");else a=t[r]={init:!1,get:!1,set:!1};a[o]=!0}}},N.parseExpression=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(e,t);if(this.type===y.comma){var o=this.startNodeAt(n,r);for(o.expressions=[i];this.eat(y.comma);)o.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(o,"SequenceExpression")}return i},N.parseMaybeAssign=function(e,t,n){if(this.inGenerator&&this.isContextual("yield"))return this.parseYield();var r=!1,i=-1,o=-1;t?(i=t.parenthesizedAssign,o=t.trailingComma,t.parenthesizedAssign=t.trailingComma=-1):(t=new DestructuringErrors,r=!0);var a=this.start,s=this.startLoc;this.type!==y.parenL&&this.type!==y.name||(this.potentialArrowAt=this.start);var l=this.parseMaybeConditional(e,t);if(n&&(l=n.call(this,l,a,s)),this.type.isAssign){var u=this.startNodeAt(a,s);return u.operator=this.value,u.left=this.type===y.eq?this.toAssignable(l,!1,t):l,r||DestructuringErrors.call(t),t.shorthandAssign=-1,this.checkLVal(l),this.next(),u.right=this.parseMaybeAssign(e),this.finishNode(u,"AssignmentExpression")}return r&&this.checkExpressionErrors(t,!0),i>-1&&(t.parenthesizedAssign=i),o>-1&&(t.trailingComma=o),l},N.parseMaybeConditional=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return i;if(this.eat(y.question)){var o=this.startNodeAt(n,r);return o.test=i,o.consequent=this.parseMaybeAssign(),this.expect(y.colon),o.alternate=this.parseMaybeAssign(e),this.finishNode(o,"ConditionalExpression")}return i},N.parseExprOps=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(t,!1);return this.checkExpressionErrors(t)?i:i.start===n&&"ArrowFunctionExpression"===i.type?i:this.parseExprOp(i,n,r,-1,e)},N.parseExprOp=function(e,t,n,r,i){var o=this.type.binop;if(null!=o&&(!i||this.type!==y._in)&&o>r){var a=this.type===y.logicalOR||this.type===y.logicalAND,s=this.value;this.next();var l=this.start,u=this.startLoc,c=this.parseExprOp(this.parseMaybeUnary(null,!1),l,u,o,i),p=this.buildBinary(t,n,e,c,s,a);return this.parseExprOp(p,t,n,r,i)}return e},N.buildBinary=function(e,t,n,r,i,o){var a=this.startNodeAt(e,t);return a.left=n,a.operator=i,a.right=r,this.finishNode(a,o?"LogicalExpression":"BinaryExpression")},N.parseMaybeUnary=function(e,t){var n,r=this.start,i=this.startLoc;if(this.isContextual("await")&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction))n=this.parseAwait(),t=!0;else if(this.type.prefix){var o=this.startNode(),a=this.type===y.incDec;o.operator=this.value,o.prefix=!0,this.next(),o.argument=this.parseMaybeUnary(null,!0),this.checkExpressionErrors(e,!0),a?this.checkLVal(o.argument):this.strict&&"delete"===o.operator&&"Identifier"===o.argument.type?this.raiseRecoverable(o.start,"Deleting local variable in strict mode"):t=!0,n=this.finishNode(o,a?"UpdateExpression":"UnaryExpression")}else{if(n=this.parseExprSubscripts(e),this.checkExpressionErrors(e))return n;for(;this.type.postfix&&!this.canInsertSemicolon();){var s=this.startNodeAt(r,i);s.operator=this.value,s.prefix=!1,s.argument=n,this.checkLVal(n),this.next(),n=this.finishNode(s,"UpdateExpression")}}return!t&&this.eat(y.starstar)?this.buildBinary(r,i,n,this.parseMaybeUnary(null,!1),"**",!1):n},N.parseExprSubscripts=function(e){var t=this.start,n=this.startLoc,r=this.parseExprAtom(e),i="ArrowFunctionExpression"===r.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd);if(this.checkExpressionErrors(e)||i)return r;var o=this.parseSubscripts(r,t,n);return e&&"MemberExpression"===o.type&&(e.parenthesizedAssign>=o.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=o.start&&(e.parenthesizedBind=-1)),o},N.parseSubscripts=function(e,t,n,r){for(var i=this.options.ecmaVersion>=8&&"Identifier"===e.type&&"async"===e.name&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&"async"===this.input.slice(e.start,e.end),o=void 0;;)if((o=this.eat(y.bracketL))||this.eat(y.dot)){var a=this.startNodeAt(t,n);a.object=e,a.property=o?this.parseExpression():this.parseIdent(!0),a.computed=!!o,o&&this.expect(y.bracketR),e=this.finishNode(a,"MemberExpression")}else if(!r&&this.eat(y.parenL)){var s=new DestructuringErrors,l=this.yieldPos,u=this.awaitPos;this.yieldPos=0,this.awaitPos=0;var c=this.parseExprList(y.parenR,this.options.ecmaVersion>=8,!1,s);if(i&&!this.canInsertSemicolon()&&this.eat(y.arrow))return this.checkPatternErrors(s,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=l,this.awaitPos=u,this.parseArrowExpression(this.startNodeAt(t,n),c,!0);this.checkExpressionErrors(s,!0),this.yieldPos=l||this.yieldPos,this.awaitPos=u||this.awaitPos;var p=this.startNodeAt(t,n);p.callee=e,p.arguments=c,e=this.finishNode(p,"CallExpression")}else{if(this.type!==y.backQuote)return e;var h=this.startNodeAt(t,n);h.tag=e,h.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(h,"TaggedTemplateExpression")}},N.parseExprAtom=function(e){var t,n=this.potentialArrowAt===this.start;switch(this.type){case y._super:return this.inFunction||this.raise(this.start,"'super' outside of function or class"),t=this.startNode(),this.next(),this.type!==y.dot&&this.type!==y.bracketL&&this.type!==y.parenL&&this.unexpected(),this.finishNode(t,"Super");case y._this:return t=this.startNode(),this.next(),this.finishNode(t,"ThisExpression");case y.name:var r=this.start,i=this.startLoc,o=this.containsEsc,a=this.parseIdent(this.type!==y.name);if(this.options.ecmaVersion>=8&&!o&&"async"===a.name&&!this.canInsertSemicolon()&&this.eat(y._function))return this.parseFunction(this.startNodeAt(r,i),!1,!1,!0);if(n&&!this.canInsertSemicolon()){if(this.eat(y.arrow))return this.parseArrowExpression(this.startNodeAt(r,i),[a],!1);if(this.options.ecmaVersion>=8&&"async"===a.name&&this.type===y.name&&!o)return a=this.parseIdent(),!this.canInsertSemicolon()&&this.eat(y.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(r,i),[a],!0)}return a;case y.regexp:var s=this.value;return(t=this.parseLiteral(s.value)).regex={pattern:s.pattern,flags:s.flags},t;case y.num:case y.string:return this.parseLiteral(this.value);case y._null:case y._true:case y._false:return(t=this.startNode()).value=this.type===y._null?null:this.type===y._true,t.raw=this.type.keyword,this.next(),this.finishNode(t,"Literal");case y.parenL:var l=this.start,u=this.parseParenAndDistinguishExpression(n);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(u)&&(e.parenthesizedAssign=l),e.parenthesizedBind<0&&(e.parenthesizedBind=l)),u;case y.bracketL:return t=this.startNode(),this.next(),t.elements=this.parseExprList(y.bracketR,!0,!0,e),this.finishNode(t,"ArrayExpression");case y.braceL:return this.parseObj(!1,e);case y._function:return t=this.startNode(),this.next(),this.parseFunction(t,!1);case y._class:return this.parseClass(this.startNode(),!1);case y._new:return this.parseNew();case y.backQuote:return this.parseTemplate();default:this.unexpected()}},N.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),this.next(),this.finishNode(t,"Literal")},N.parseParenExpression=function(){this.expect(y.parenL);var e=this.parseExpression();return this.expect(y.parenR),e},N.parseParenAndDistinguishExpression=function(e){var t,n=this.start,r=this.startLoc,i=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var o,a=this.start,s=this.startLoc,l=[],u=!0,c=!1,p=new DestructuringErrors,h=this.yieldPos,f=this.awaitPos;for(this.yieldPos=0,this.awaitPos=0;this.type!==y.parenR;){if(u?u=!1:this.expect(y.comma),i&&this.afterTrailingComma(y.parenR,!0)){c=!0;break}if(this.type===y.ellipsis){o=this.start,l.push(this.parseParenItem(this.parseRestBinding())),this.type===y.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}l.push(this.parseMaybeAssign(!1,p,this.parseParenItem))}var d=this.start,g=this.startLoc;if(this.expect(y.parenR),e&&!this.canInsertSemicolon()&&this.eat(y.arrow))return this.checkPatternErrors(p,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=h,this.awaitPos=f,this.parseParenArrowList(n,r,l);l.length&&!c||this.unexpected(this.lastTokStart),o&&this.unexpected(o),this.checkExpressionErrors(p,!0),this.yieldPos=h||this.yieldPos,this.awaitPos=f||this.awaitPos,l.length>1?((t=this.startNodeAt(a,s)).expressions=l,this.finishNodeAt(t,"SequenceExpression",d,g)):t=l[0]}else t=this.parseParenExpression();if(this.options.preserveParens){var m=this.startNodeAt(n,r);return m.expression=t,this.finishNode(m,"ParenthesizedExpression")}return t},N.parseParenItem=function(e){return e},N.parseParenArrowList=function(e,t,n){return this.parseArrowExpression(this.startNodeAt(e,t),n)};var B=[];N.parseNew=function(){var e=this.startNode(),t=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(y.dot)){e.meta=t;var n=this.containsEsc;return e.property=this.parseIdent(!0),("target"!==e.property.name||n)&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is new.target"),this.inFunction||this.raiseRecoverable(e.start,"new.target can only be used in functions"),this.finishNode(e,"MetaProperty")}var r=this.start,i=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(),r,i,!0),this.eat(y.parenL)?e.arguments=this.parseExprList(y.parenR,this.options.ecmaVersion>=8,!1):e.arguments=B,this.finishNode(e,"NewExpression")},N.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===y.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value},this.next(),n.tail=this.type===y.backQuote,this.finishNode(n,"TemplateElement")},N.parseTemplate=function(e){void 0===e&&(e={});var t=e.isTagged;void 0===t&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:t});for(n.quasis=[r];!r.tail;)this.type===y.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(y.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(y.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")},N.isAsyncProp=function(e){return!e.computed&&"Identifier"===e.key.type&&"async"===e.key.name&&(this.type===y.name||this.type===y.num||this.type===y.string||this.type===y.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===y.star)&&!v.test(this.input.slice(this.lastTokEnd,this.start))},N.parseObj=function(e,t){var n=this.startNode(),r=!0,i={};for(n.properties=[],this.next();!this.eat(y.braceR);){if(r)r=!1;else if(this.expect(y.comma),this.afterTrailingComma(y.braceR))break;var o=this.parseProperty(e,t);e||this.checkPropClash(o,i,t),n.properties.push(o)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")},N.parseProperty=function(e,t){var n,r,i,o,a=this.startNode();if(this.options.ecmaVersion>=9&&this.eat(y.ellipsis))return e?(a.argument=this.parseIdent(!1),this.type===y.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(a,"RestElement")):(this.type===y.parenL&&t&&(t.parenthesizedAssign<0&&(t.parenthesizedAssign=this.start),t.parenthesizedBind<0&&(t.parenthesizedBind=this.start)),a.argument=this.parseMaybeAssign(!1,t),this.type===y.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(a,"SpreadElement"));this.options.ecmaVersion>=6&&(a.method=!1,a.shorthand=!1,(e||t)&&(i=this.start,o=this.startLoc),e||(n=this.eat(y.star)));var s=this.containsEsc;return this.parsePropertyName(a),!e&&!s&&this.options.ecmaVersion>=8&&!n&&this.isAsyncProp(a)?(r=!0,n=this.options.ecmaVersion>=9&&this.eat(y.star),this.parsePropertyName(a,t)):r=!1,this.parsePropertyValue(a,e,n,r,i,o,t,s),this.finishNode(a,"Property")},N.parsePropertyValue=function(e,t,n,r,i,o,a,s){if((n||r)&&this.type===y.colon&&this.unexpected(),this.eat(y.colon))e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,a),e.kind="init";else if(this.options.ecmaVersion>=6&&this.type===y.parenL)t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,r);else if(t||s||!(this.options.ecmaVersion>=5)||e.computed||"Identifier"!==e.key.type||"get"!==e.key.name&&"set"!==e.key.name||this.type===y.comma||this.type===y.braceR)this.options.ecmaVersion>=6&&!e.computed&&"Identifier"===e.key.type?(this.checkUnreserved(e.key),e.kind="init",t?e.value=this.parseMaybeDefault(i,o,e.key):this.type===y.eq&&a?(a.shorthandAssign<0&&(a.shorthandAssign=this.start),e.value=this.parseMaybeDefault(i,o,e.key)):e.value=e.key,e.shorthand=!0):this.unexpected();else{(n||r)&&this.unexpected(),e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var l="get"===e.kind?0:1;if(e.value.params.length!==l){var u=e.value.start;"get"===e.kind?this.raiseRecoverable(u,"getter should have no params"):this.raiseRecoverable(u,"setter should have exactly one param")}else"set"===e.kind&&"RestElement"===e.value.params[0].type&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")}},N.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(y.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(y.bracketR),e.key;e.computed=!1}return e.key=this.type===y.num||this.type===y.string?this.parseExprAtom():this.parseIdent(!0)},N.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=!1,e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)},N.parseMethod=function(e,t){var n=this.startNode(),r=this.inGenerator,i=this.inAsync,o=this.yieldPos,a=this.awaitPos,s=this.inFunction;return this.initFunction(n),this.options.ecmaVersion>=6&&(n.generator=e),this.options.ecmaVersion>=8&&(n.async=!!t),this.inGenerator=n.generator,this.inAsync=n.async,this.yieldPos=0,this.awaitPos=0,this.inFunction=!0,this.enterFunctionScope(),this.expect(y.parenL),n.params=this.parseBindingList(y.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(n,!1),this.inGenerator=r,this.inAsync=i,this.yieldPos=o,this.awaitPos=a,this.inFunction=s,this.finishNode(n,"FunctionExpression")},N.parseArrowExpression=function(e,t,n){var r=this.inGenerator,i=this.inAsync,o=this.yieldPos,a=this.awaitPos,s=this.inFunction;return this.enterFunctionScope(),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.inGenerator=!1,this.inAsync=e.async,this.yieldPos=0,this.awaitPos=0,this.inFunction=!0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0),this.inGenerator=r,this.inAsync=i,this.yieldPos=o,this.awaitPos=a,this.inFunction=s,this.finishNode(e,"ArrowFunctionExpression")},N.parseFunctionBody=function(e,t){var n=t&&this.type!==y.braceL,r=this.strict,i=!1;if(n)e.body=this.parseMaybeAssign(),e.expression=!0,this.checkParams(e,!1);else{var o=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);r&&!o||(i=this.strictDirective(this.end))&&o&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list");var a=this.labels;this.labels=[],i&&(this.strict=!0),this.checkParams(e,!r&&!i&&!t&&this.isSimpleParamList(e.params)),e.body=this.parseBlock(!1),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=a}this.exitFunctionScope(),this.strict&&e.id&&this.checkLVal(e.id,"none"),this.strict=r},N.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1){if("Identifier"!==n[t].type)return!1}return!0},N.checkParams=function(e,t){for(var n={},r=0,i=e.params;r<i.length;r+=1){var o=i[r];this.checkLVal(o,"var",t?null:n)}},N.parseExprList=function(e,t,n,r){for(var i=[],o=!0;!this.eat(e);){if(o)o=!1;else if(this.expect(y.comma),t&&this.afterTrailingComma(e))break;var a=void 0;n&&this.type===y.comma?a=null:this.type===y.ellipsis?(a=this.parseSpread(r),r&&this.type===y.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):a=this.parseMaybeAssign(!1,r),i.push(a)}return i},N.checkUnreserved=function(e){var t=e.start,n=e.end,r=e.name;(this.inGenerator&&"yield"===r&&this.raiseRecoverable(t,"Can not use 'yield' as identifier inside a generator"),this.inAsync&&"await"===r&&this.raiseRecoverable(t,"Can not use 'await' as identifier inside an async function"),this.isKeyword(r)&&this.raise(t,"Unexpected keyword '"+r+"'"),this.options.ecmaVersion<6&&-1!==this.input.slice(t,n).indexOf("\\"))||(this.strict?this.reservedWordsStrict:this.reservedWords).test(r)&&(this.inAsync||"await"!==r||this.raiseRecoverable(t,"Can not use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+r+"' is reserved"))},N.parseIdent=function(e,t){var n=this.startNode();return e&&"never"===this.options.allowReserved&&(e=!1),this.type===y.name?n.name=this.value:this.type.keyword?(n.name=this.type.keyword,"class"!==n.name&&"function"!==n.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected(),this.next(),this.finishNode(n,"Identifier"),e||this.checkUnreserved(n),n},N.parseYield=function(){this.yieldPos||(this.yieldPos=this.start);var e=this.startNode();return this.next(),this.type===y.semi||this.canInsertSemicolon()||this.type!==y.star&&!this.type.startsExpr?(e.delegate=!1,e.argument=null):(e.delegate=this.eat(y.star),e.argument=this.parseMaybeAssign()),this.finishNode(e,"YieldExpression")},N.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var e=this.startNode();return this.next(),e.argument=this.parseMaybeUnary(null,!0),this.finishNode(e,"AwaitExpression")};var z=O.prototype;z.raise=function(e,t){var n=getLineInfo(this.input,e);t+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=this.pos,r},z.raiseRecoverable=z.raise,z.curPosition=function(){if(this.options.locations)return new C(this.curLine,this.pos-this.lineStart)};var U=O.prototype,V=Object.assign||function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];for(var r=0,i=t;r<i.length;r+=1){var o=i[r];for(var a in o)has(o,a)&&(e[a]=o[a])}return e};U.enterFunctionScope=function(){this.scopeStack.push({var:{},lexical:{},childVar:{},parentLexical:{}})},U.exitFunctionScope=function(){this.scopeStack.pop()},U.enterLexicalScope=function(){var e=this.scopeStack[this.scopeStack.length-1],t={var:{},lexical:{},childVar:{},parentLexical:{}};this.scopeStack.push(t),V(t.parentLexical,e.lexical,e.parentLexical)},U.exitLexicalScope=function(){var e=this.scopeStack.pop(),t=this.scopeStack[this.scopeStack.length-1];V(t.childVar,e.var,e.childVar)},U.canDeclareVarName=function(e){var t=this.scopeStack[this.scopeStack.length-1];return!has(t.lexical,e)&&!has(t.parentLexical,e)},U.canDeclareLexicalName=function(e){var t=this.scopeStack[this.scopeStack.length-1];return!has(t.lexical,e)&&!has(t.var,e)&&!has(t.childVar,e)},U.declareVarName=function(e){this.scopeStack[this.scopeStack.length-1].var[e]=!0},U.declareLexicalName=function(e){this.scopeStack[this.scopeStack.length-1].lexical[e]=!0};var G=function Node(e,t,n){this.type="",this.start=t,this.end=0,e.options.locations&&(this.loc=new k(e,n)),e.options.directSourceFile&&(this.sourceFile=e.options.directSourceFile),e.options.ranges&&(this.range=[t,0])},W=O.prototype;function finishNodeAt(e,t,n,r){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=r),this.options.ranges&&(e.range[1]=n),e}W.startNode=function(){return new G(this,this.start,this.startLoc)},W.startNodeAt=function(e,t){return new G(this,e,t)},W.finishNode=function(e,t){return finishNodeAt.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)},W.finishNodeAt=function(e,t,n,r){return finishNodeAt.call(this,e,t,n,r)};var q=function TokContext(e,t,n,r,i){this.token=e,this.isExpr=!!t,this.preserveSpace=!!n,this.override=r,this.generator=!!i},H={b_stat:new q("{",!1),b_expr:new q("{",!0),b_tmpl:new q("${",!1),p_stat:new q("(",!1),p_expr:new q("(",!0),q_tmpl:new q("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new q("function",!1),f_expr:new q("function",!0),f_expr_gen:new q("function",!0,!1,null,!0),f_gen:new q("function",!1,!1,null,!0)},X=O.prototype;X.initialContext=function(){return[H.b_stat]},X.braceIsBlock=function(e){var t=this.curContext();return t===H.f_expr||t===H.f_stat||(e!==y.colon||t!==H.b_stat&&t!==H.b_expr?e===y._return||e===y.name&&this.exprAllowed?v.test(this.input.slice(this.lastTokEnd,this.start)):e===y._else||e===y.semi||e===y.eof||e===y.parenR||e===y.arrow||(e===y.braceL?t===H.b_stat:e!==y._var&&e!==y.name&&!this.exprAllowed):!t.isExpr)},X.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if("function"===t.token)return t.generator}return!1},X.updateContext=function(e){var t,n=this.type;n.keyword&&e===y.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr},y.parenR.updateContext=y.braceR.updateContext=function(){if(1!==this.context.length){var e=this.context.pop();e===H.b_stat&&"function"===this.curContext().token&&(e=this.context.pop()),this.exprAllowed=!e.isExpr}else this.exprAllowed=!0},y.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?H.b_stat:H.b_expr),this.exprAllowed=!0},y.dollarBraceL.updateContext=function(){this.context.push(H.b_tmpl),this.exprAllowed=!0},y.parenL.updateContext=function(e){var t=e===y._if||e===y._for||e===y._with||e===y._while;this.context.push(t?H.p_stat:H.p_expr),this.exprAllowed=!0},y.incDec.updateContext=function(){},y._function.updateContext=y._class.updateContext=function(e){e.beforeExpr&&e!==y.semi&&e!==y._else&&(e!==y.colon&&e!==y.braceL||this.curContext()!==H.b_stat)?this.context.push(H.f_expr):this.context.push(H.f_stat),this.exprAllowed=!1},y.backQuote.updateContext=function(){this.curContext()===H.q_tmpl?this.context.pop():this.context.push(H.q_tmpl),this.exprAllowed=!1},y.star.updateContext=function(e){if(e===y._function){var t=this.context.length-1;this.context[t]===H.f_expr?this.context[t]=H.f_expr_gen:this.context[t]=H.f_gen}this.exprAllowed=!0},y.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==y.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var K={$LONE:["ASCII","ASCII_Hex_Digit","AHex","Alphabetic","Alpha","Any","Assigned","Bidi_Control","Bidi_C","Bidi_Mirrored","Bidi_M","Case_Ignorable","CI","Cased","Changes_When_Casefolded","CWCF","Changes_When_Casemapped","CWCM","Changes_When_Lowercased","CWL","Changes_When_NFKC_Casefolded","CWKCF","Changes_When_Titlecased","CWT","Changes_When_Uppercased","CWU","Dash","Default_Ignorable_Code_Point","DI","Deprecated","Dep","Diacritic","Dia","Emoji","Emoji_Component","Emoji_Modifier","Emoji_Modifier_Base","Emoji_Presentation","Extender","Ext","Grapheme_Base","Gr_Base","Grapheme_Extend","Gr_Ext","Hex_Digit","Hex","IDS_Binary_Operator","IDSB","IDS_Trinary_Operator","IDST","ID_Continue","IDC","ID_Start","IDS","Ideographic","Ideo","Join_Control","Join_C","Logical_Order_Exception","LOE","Lowercase","Lower","Math","Noncharacter_Code_Point","NChar","Pattern_Syntax","Pat_Syn","Pattern_White_Space","Pat_WS","Quotation_Mark","QMark","Radical","Regional_Indicator","RI","Sentence_Terminal","STerm","Soft_Dotted","SD","Terminal_Punctuation","Term","Unified_Ideograph","UIdeo","Uppercase","Upper","Variation_Selector","VS","White_Space","space","XID_Continue","XIDC","XID_Start","XIDS"],General_Category:["Cased_Letter","LC","Close_Punctuation","Pe","Connector_Punctuation","Pc","Control","Cc","cntrl","Currency_Symbol","Sc","Dash_Punctuation","Pd","Decimal_Number","Nd","digit","Enclosing_Mark","Me","Final_Punctuation","Pf","Format","Cf","Initial_Punctuation","Pi","Letter","L","Letter_Number","Nl","Line_Separator","Zl","Lowercase_Letter","Ll","Mark","M","Combining_Mark","Math_Symbol","Sm","Modifier_Letter","Lm","Modifier_Symbol","Sk","Nonspacing_Mark","Mn","Number","N","Open_Punctuation","Ps","Other","C","Other_Letter","Lo","Other_Number","No","Other_Punctuation","Po","Other_Symbol","So","Paragraph_Separator","Zp","Private_Use","Co","Punctuation","P","punct","Separator","Z","Space_Separator","Zs","Spacing_Mark","Mc","Surrogate","Cs","Symbol","S","Titlecase_Letter","Lt","Unassigned","Cn","Uppercase_Letter","Lu"],Script:["Adlam","Adlm","Ahom","Anatolian_Hieroglyphs","Hluw","Arabic","Arab","Armenian","Armn","Avestan","Avst","Balinese","Bali","Bamum","Bamu","Bassa_Vah","Bass","Batak","Batk","Bengali","Beng","Bhaiksuki","Bhks","Bopomofo","Bopo","Brahmi","Brah","Braille","Brai","Buginese","Bugi","Buhid","Buhd","Canadian_Aboriginal","Cans","Carian","Cari","Caucasian_Albanian","Aghb","Chakma","Cakm","Cham","Cherokee","Cher","Common","Zyyy","Coptic","Copt","Qaac","Cuneiform","Xsux","Cypriot","Cprt","Cyrillic","Cyrl","Deseret","Dsrt","Devanagari","Deva","Duployan","Dupl","Egyptian_Hieroglyphs","Egyp","Elbasan","Elba","Ethiopic","Ethi","Georgian","Geor","Glagolitic","Glag","Gothic","Goth","Grantha","Gran","Greek","Grek","Gujarati","Gujr","Gurmukhi","Guru","Han","Hani","Hangul","Hang","Hanunoo","Hano","Hatran","Hatr","Hebrew","Hebr","Hiragana","Hira","Imperial_Aramaic","Armi","Inherited","Zinh","Qaai","Inscriptional_Pahlavi","Phli","Inscriptional_Parthian","Prti","Javanese","Java","Kaithi","Kthi","Kannada","Knda","Katakana","Kana","Kayah_Li","Kali","Kharoshthi","Khar","Khmer","Khmr","Khojki","Khoj","Khudawadi","Sind","Lao","Laoo","Latin","Latn","Lepcha","Lepc","Limbu","Limb","Linear_A","Lina","Linear_B","Linb","Lisu","Lycian","Lyci","Lydian","Lydi","Mahajani","Mahj","Malayalam","Mlym","Mandaic","Mand","Manichaean","Mani","Marchen","Marc","Masaram_Gondi","Gonm","Meetei_Mayek","Mtei","Mende_Kikakui","Mend","Meroitic_Cursive","Merc","Meroitic_Hieroglyphs","Mero","Miao","Plrd","Modi","Mongolian","Mong","Mro","Mroo","Multani","Mult","Myanmar","Mymr","Nabataean","Nbat","New_Tai_Lue","Talu","Newa","Nko","Nkoo","Nushu","Nshu","Ogham","Ogam","Ol_Chiki","Olck","Old_Hungarian","Hung","Old_Italic","Ital","Old_North_Arabian","Narb","Old_Permic","Perm","Old_Persian","Xpeo","Old_South_Arabian","Sarb","Old_Turkic","Orkh","Oriya","Orya","Osage","Osge","Osmanya","Osma","Pahawh_Hmong","Hmng","Palmyrene","Palm","Pau_Cin_Hau","Pauc","Phags_Pa","Phag","Phoenician","Phnx","Psalter_Pahlavi","Phlp","Rejang","Rjng","Runic","Runr","Samaritan","Samr","Saurashtra","Saur","Sharada","Shrd","Shavian","Shaw","Siddham","Sidd","SignWriting","Sgnw","Sinhala","Sinh","Sora_Sompeng","Sora","Soyombo","Soyo","Sundanese","Sund","Syloti_Nagri","Sylo","Syriac","Syrc","Tagalog","Tglg","Tagbanwa","Tagb","Tai_Le","Tale","Tai_Tham","Lana","Tai_Viet","Tavt","Takri","Takr","Tamil","Taml","Tangut","Tang","Telugu","Telu","Thaana","Thaa","Thai","Tibetan","Tibt","Tifinagh","Tfng","Tirhuta","Tirh","Ugaritic","Ugar","Vai","Vaii","Warang_Citi","Wara","Yi","Yiii","Zanabazar_Square","Zanb"]};Array.prototype.push.apply(K.$LONE,K.General_Category),K.gc=K.General_Category,K.sc=K.Script_Extensions=K.scx=K.Script;var Z=O.prototype,Y=function RegExpValidationState(e){this.parser=e,this.validFlags="gim"+(e.options.ecmaVersion>=6?"uy":"")+(e.options.ecmaVersion>=9?"s":""),this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};function codePointToString$1(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}function isSyntaxCharacter(e){return 36===e||e>=40&&e<=43||46===e||63===e||e>=91&&e<=94||e>=123&&e<=125}function isRegExpIdentifierStart(e){return isIdentifierStart(e,!0)||36===e||95===e}function isRegExpIdentifierPart(e){return isIdentifierChar(e,!0)||36===e||95===e||8204===e||8205===e}function isControlLetter(e){return e>=65&&e<=90||e>=97&&e<=122}function isCharacterClassEscape(e){return 100===e||68===e||115===e||83===e||119===e||87===e}function isUnicodePropertyNameCharacter(e){return isControlLetter(e)||95===e}function isUnicodePropertyValueCharacter(e){return isUnicodePropertyNameCharacter(e)||isDecimalDigit(e)}function isDecimalDigit(e){return e>=48&&e<=57}function isHexDigit(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function hexToInt(e){return e>=65&&e<=70?e-65+10:e>=97&&e<=102?e-97+10:e-48}function isOctalDigit(e){return e>=48&&e<=55}Y.prototype.reset=function reset(e,t,n){var r=-1!==n.indexOf("u");this.start=0|e,this.source=t+"",this.flags=n,this.switchU=r&&this.parser.options.ecmaVersion>=6,this.switchN=r&&this.parser.options.ecmaVersion>=9},Y.prototype.raise=function raise(e){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+e)},Y.prototype.at=function at(e){var t=this.source,n=t.length;if(e>=n)return-1;var r=t.charCodeAt(e);return!this.switchU||r<=55295||r>=57344||e+1>=n?r:(r<<10)+t.charCodeAt(e+1)-56613888},Y.prototype.nextIndex=function nextIndex(e){var t=this.source,n=t.length;if(e>=n)return n;var r=t.charCodeAt(e);return!this.switchU||r<=55295||r>=57344||e+1>=n?e+1:e+2},Y.prototype.current=function current(){return this.at(this.pos)},Y.prototype.lookahead=function lookahead(){return this.at(this.nextIndex(this.pos))},Y.prototype.advance=function advance(){this.pos=this.nextIndex(this.pos)},Y.prototype.eat=function eat(e){return this.current()===e&&(this.advance(),!0)},Z.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,r=0;r<n.length;r++){var i=n.charAt(r);-1===t.indexOf(i)&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(i,r+1)>-1&&this.raise(e.start,"Duplicate regular expression flag")}},Z.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&e.groupNames.length>0&&(e.switchN=!0,this.regexp_pattern(e))},Z.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames.length=0,e.backReferenceNames.length=0,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var r=n[t];-1===e.groupNames.indexOf(r)&&e.raise("Invalid named capture referenced")}},Z.regexp_disjunction=function(e){for(this.regexp_alternative(e);e.eat(124);)this.regexp_alternative(e);this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")},Z.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););},Z.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):!(e.switchU?!this.regexp_eatAtom(e):!this.regexp_eatExtendedAtom(e))&&(this.regexp_eatQuantifier(e),!0)},Z.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1},Z.regexp_eatQuantifier=function(e,t){return void 0===t&&(t=!1),!!this.regexp_eatQuantifierPrefix(e,t)&&(e.eat(63),!0)},Z.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)},Z.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue),e.eat(125)))return-1!==i&&i<r&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1},Z.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)},Z.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1},Z.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1},Z.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):63===e.current()&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1},Z.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)},Z.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1},Z.regexp_eatSyntaxCharacter=function(e){var t=e.current();return!!isSyntaxCharacter(t)&&(e.lastIntValue=t,e.advance(),!0)},Z.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;-1!==(n=e.current())&&!isSyntaxCharacter(n);)e.advance();return e.pos!==t},Z.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return!(-1===t||36===t||t>=40&&t<=43||46===t||63===t||91===t||94===t||124===t)&&(e.advance(),!0)},Z.regexp_groupSpecifier=function(e){if(e.eat(63)){if(this.regexp_eatGroupName(e))return-1!==e.groupNames.indexOf(e.lastStringValue)&&e.raise("Duplicate capture group name"),void e.groupNames.push(e.lastStringValue);e.raise("Invalid group")}},Z.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1},Z.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=codePointToString$1(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=codePointToString$1(e.lastIntValue);return!0}return!1},Z.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=e.current();return e.advance(),92===n&&this.regexp_eatRegExpUnicodeEscapeSequence(e)&&(n=e.lastIntValue),isRegExpIdentifierStart(n)?(e.lastIntValue=n,!0):(e.pos=t,!1)},Z.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=e.current();return e.advance(),92===n&&this.regexp_eatRegExpUnicodeEscapeSequence(e)&&(n=e.lastIntValue),isRegExpIdentifierPart(n)?(e.lastIntValue=n,!0):(e.pos=t,!1)},Z.regexp_eatAtomEscape=function(e){return!!(this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e))||(e.switchU&&(99===e.current()&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)},Z.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1},Z.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1},Z.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)},Z.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1},Z.regexp_eatZero=function(e){return 48===e.current()&&!isDecimalDigit(e.lookahead())&&(e.lastIntValue=0,e.advance(),!0)},Z.regexp_eatControlEscape=function(e){var t=e.current();return 116===t?(e.lastIntValue=9,e.advance(),!0):110===t?(e.lastIntValue=10,e.advance(),!0):118===t?(e.lastIntValue=11,e.advance(),!0):102===t?(e.lastIntValue=12,e.advance(),!0):114===t&&(e.lastIntValue=13,e.advance(),!0)},Z.regexp_eatControlLetter=function(e){var t=e.current();return!!isControlLetter(t)&&(e.lastIntValue=t%32,e.advance(),!0)},Z.regexp_eatRegExpUnicodeEscapeSequence=function(e){var t,n=e.pos;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var r=e.lastIntValue;if(e.switchU&&r>=55296&&r<=56319){var i=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var o=e.lastIntValue;if(o>=56320&&o<=57343)return e.lastIntValue=1024*(r-55296)+(o-56320)+65536,!0}e.pos=i,e.lastIntValue=r}return!0}if(e.switchU&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&((t=e.lastIntValue)>=0&&t<=1114111))return!0;e.switchU&&e.raise("Invalid unicode escape"),e.pos=n}return!1},Z.regexp_eatIdentityEscape=function(e){if(e.switchU)return!!this.regexp_eatSyntaxCharacter(e)||!!e.eat(47)&&(e.lastIntValue=47,!0);var t=e.current();return!(99===t||e.switchN&&107===t)&&(e.lastIntValue=t,e.advance(),!0)},Z.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do{e.lastIntValue=10*e.lastIntValue+(t-48),e.advance()}while((t=e.current())>=48&&t<=57);return!0}return!1},Z.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(isCharacterClassEscape(t))return e.lastIntValue=-1,e.advance(),!0;if(e.switchU&&this.options.ecmaVersion>=9&&(80===t||112===t)){if(e.lastIntValue=-1,e.advance(),e.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(e)&&e.eat(125))return!0;e.raise("Invalid property name")}return!1},Z.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,r),!0}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,i),!0}return!1},Z.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){K.hasOwnProperty(t)&&-1!==K[t].indexOf(n)||e.raise("Invalid property name")},Z.regexp_validateUnicodePropertyNameOrValue=function(e,t){-1===K.$LONE.indexOf(t)&&e.raise("Invalid property name")},Z.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";isUnicodePropertyNameCharacter(t=e.current());)e.lastStringValue+=codePointToString$1(t),e.advance();return""!==e.lastStringValue},Z.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";isUnicodePropertyValueCharacter(t=e.current());)e.lastStringValue+=codePointToString$1(t),e.advance();return""!==e.lastStringValue},Z.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)},Z.regexp_eatCharacterClass=function(e){if(e.eat(91)){if(e.eat(94),this.regexp_classRanges(e),e.eat(93))return!0;e.raise("Unterminated character class")}return!1},Z.regexp_classRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;!e.switchU||-1!==t&&-1!==n||e.raise("Invalid character class"),-1!==t&&-1!==n&&t>n&&e.raise("Range out of order in character class")}}},Z.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(99===n||isOctalDigit(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var r=e.current();return 93!==r&&(e.lastIntValue=r,e.advance(),!0)},Z.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)},Z.regexp_eatClassControlLetter=function(e){var t=e.current();return!(!isDecimalDigit(t)&&95!==t)&&(e.lastIntValue=t%32,e.advance(),!0)},Z.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1},Z.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;isDecimalDigit(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t},Z.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;isHexDigit(n=e.current());)e.lastIntValue=16*e.lastIntValue+hexToInt(n),e.advance();return e.pos!==t},Z.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=64*t+8*n+e.lastIntValue:e.lastIntValue=8*t+n}else e.lastIntValue=t;return!0}return!1},Z.regexp_eatOctalDigit=function(e){var t=e.current();return isOctalDigit(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)},Z.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var r=0;r<t;++r){var i=e.current();if(!isHexDigit(i))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+hexToInt(i),e.advance()}return!0};var J=function Token(e){this.type=e.type,this.value=e.value,this.start=e.start,this.end=e.end,e.options.locations&&(this.loc=new k(e,e.startLoc,e.endLoc)),e.options.ranges&&(this.range=[e.start,e.end])},Q=O.prototype;function codePointToString(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}Q.next=function(){this.options.onToken&&this.options.onToken(new J(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},Q.getToken=function(){return this.next(),new J(this)},"undefined"!=typeof Symbol&&(Q[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===y.eof,value:t}}}}),Q.curContext=function(){return this.context[this.context.length-1]},Q.nextToken=function(){var e=this.curContext();return e&&e.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(y.eof):e.override?e.override(this):void this.readToken(this.fullCharCodeAtPos())},Q.readToken=function(e){return isIdentifierStart(e,this.options.ecmaVersion>=6)||92===e?this.readWord():this.getTokenFromCode(e)},Q.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);return e<=55295||e>=57344?e:(e<<10)+this.input.charCodeAt(this.pos+1)-56613888},Q.skipBlockComment=function(){var e,t=this.options.onComment&&this.curPosition(),n=this.pos,r=this.input.indexOf("*/",this.pos+=2);if(-1===r&&this.raise(this.pos-2,"Unterminated comment"),this.pos=r+2,this.options.locations)for(_.lastIndex=n;(e=_.exec(this.input))&&e.index<this.pos;)++this.curLine,this.lineStart=e.index+e[0].length;this.options.onComment&&this.options.onComment(!0,this.input.slice(n+2,r),n,this.pos,t,this.curPosition())},Q.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!isNewLine(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())},Q.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(!(e>8&&e<14||e>=5760&&b.test(String.fromCharCode(e))))break e;++this.pos}}},Q.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)},Q.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&46===e&&46===t?(this.pos+=3,this.finishToken(y.ellipsis)):(++this.pos,this.finishToken(y.dot))},Q.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===e?this.finishOp(y.assign,2):this.finishOp(y.slash,1)},Q.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,r=42===e?y.star:y.modulo;return this.options.ecmaVersion>=7&&42===e&&42===t&&(++n,r=y.starstar,t=this.input.charCodeAt(this.pos+2)),61===t?this.finishOp(y.assign,n+1):this.finishOp(r,n)},Q.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?this.finishOp(124===e?y.logicalOR:y.logicalAND,2):61===t?this.finishOp(y.assign,2):this.finishOp(124===e?y.bitwiseOR:y.bitwiseAND,1)},Q.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(y.assign,2):this.finishOp(y.bitwiseXOR,1)},Q.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?45!==t||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!v.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(y.incDec,2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===t?this.finishOp(y.assign,2):this.finishOp(y.plusMin,1)},Q.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=62===e&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+n)?this.finishOp(y.assign,n+1):this.finishOp(y.bitShift,n)):33!==t||60!==e||this.inModule||45!==this.input.charCodeAt(this.pos+2)||45!==this.input.charCodeAt(this.pos+3)?(61===t&&(n=2),this.finishOp(y.relational,n)):(this.skipLineComment(4),this.skipSpace(),this.nextToken())},Q.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return 61===t?this.finishOp(y.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===e&&62===t&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(y.arrow)):this.finishOp(61===e?y.eq:y.prefix,1)},Q.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(y.parenL);case 41:return++this.pos,this.finishToken(y.parenR);case 59:return++this.pos,this.finishToken(y.semi);case 44:return++this.pos,this.finishToken(y.comma);case 91:return++this.pos,this.finishToken(y.bracketL);case 93:return++this.pos,this.finishToken(y.bracketR);case 123:return++this.pos,this.finishToken(y.braceL);case 125:return++this.pos,this.finishToken(y.braceR);case 58:return++this.pos,this.finishToken(y.colon);case 63:return++this.pos,this.finishToken(y.question);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(y.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(120===t||88===t)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(111===t||79===t)return this.readRadixNumber(8);if(98===t||66===t)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 126:return this.finishOp(y.prefix,1)}this.raise(this.pos,"Unexpected character '"+codePointToString(e)+"'")},Q.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)},Q.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(v.test(r)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if("["===r)t=!0;else if("]"===r&&t)t=!1;else if("/"===r&&!t)break;e="\\"===r}++this.pos}var i=this.input.slice(n,this.pos);++this.pos;var o=this.pos,a=this.readWord1();this.containsEsc&&this.unexpected(o);var s=this.regexpState||(this.regexpState=new Y(this));s.reset(n,i,a),this.validateRegExpFlags(s),this.validateRegExpPattern(s);var l=null;try{l=new RegExp(i,a)}catch(e){}return this.finishToken(y.regexp,{pattern:i,flags:a,value:l})},Q.readInt=function(e,t){for(var n=this.pos,r=0,i=0,o=null==t?1/0:t;i<o;++i){var a=this.input.charCodeAt(this.pos),s=void 0;if((s=a>=97?a-97+10:a>=65?a-65+10:a>=48&&a<=57?a-48:1/0)>=e)break;++this.pos,r=r*e+s}return this.pos===n||null!=t&&this.pos-n!==t?null:r},Q.readRadixNumber=function(e){this.pos+=2;var t=this.readInt(e);return null==t&&this.raise(this.start+2,"Expected number in radix "+e),isIdentifierStart(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(y.num,t)},Q.readNumber=function(e){var t=this.pos;e||null!==this.readInt(10)||this.raise(t,"Invalid number");var n=this.pos-t>=2&&48===this.input.charCodeAt(t);n&&this.strict&&this.raise(t,"Invalid number"),n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1);var r=this.input.charCodeAt(this.pos);46!==r||n||(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),69!==r&&101!==r||n||(43!==(r=this.input.charCodeAt(++this.pos))&&45!==r||++this.pos,null===this.readInt(10)&&this.raise(t,"Invalid number")),isIdentifierStart(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var i=this.input.slice(t,this.pos),o=n?parseInt(i,8):parseFloat(i);return this.finishToken(y.num,o)},Q.readCodePoint=function(){var e;if(123===this.input.charCodeAt(this.pos)){this.options.ecmaVersion<6&&this.unexpected();var t=++this.pos;e=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,e>1114111&&this.invalidStringToken(t,"Code point out of bounds")}else e=this.readHexChar(4);return e},Q.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===e)break;92===r?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):(isNewLine(r,this.options.ecmaVersion>=10)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(y.string,t)};var $={};Q.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e!==$)throw e;this.readInvalidTemplateToken()}this.inTemplateElement=!1},Q.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw $;this.raise(e,t)},Q.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(96===n||36===n&&123===this.input.charCodeAt(this.pos+1))return this.pos!==this.start||this.type!==y.template&&this.type!==y.invalidTemplate?(e+=this.input.slice(t,this.pos),this.finishToken(y.template,e)):36===n?(this.pos+=2,this.finishToken(y.dollarBraceL)):(++this.pos,this.finishToken(y.backQuote));if(92===n)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(isNewLine(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:e+="\n";break;default:e+=String.fromCharCode(n)}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}},Q.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if("{"!==this.input[this.pos+1])break;case"`":return this.finishToken(y.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},Q.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return codePointToString(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";default:if(t>=48&&t<=55){var n=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],r=parseInt(n,8);return r>255&&(n=n.slice(0,-1),r=parseInt(n,8)),this.pos+=n.length-1,t=this.input.charCodeAt(this.pos),"0"===n&&56!==t&&57!==t||!this.strict&&!e||this.invalidStringToken(this.pos-1-n.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(r)}return String.fromCharCode(t)}},Q.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return null===n&&this.invalidStringToken(t,"Bad character escape sequence"),n},Q.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(isIdentifierChar(i,r))this.pos+=i<=65535?1:2;else{if(92!==i)break;this.containsEsc=!0,e+=this.input.slice(n,this.pos);var o=this.pos;117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var a=this.readCodePoint();(t?isIdentifierStart:isIdentifierChar)(a,r)||this.invalidStringToken(o,"Invalid Unicode escape"),e+=codePointToString(a),n=this.pos}t=!1}return e+this.input.slice(n,this.pos)},Q.readWord=function(){var e=this.readWord1(),t=y.name;return this.keywords.test(e)&&(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+e),t=m[e]),this.finishToken(t,e)};var ee,te,ne,re="5.7.3";function parse(e,t){return new O(t,e).parse()}function parseExpressionAt(e,t,n){var r=new O(n,e,t);return r.nextToken(),r.parseExpression()}function tokenizer(e,t){return new O(t,e)}function addLooseExports(e,t,n){ee=e,te=t,ne=n}},function(e,t,n){"use strict";function walker(e,t,n){function stop(){throw stop}var r,i=function(e){return e&&"object"==typeof e&&e.type?void 0!==n&&e.range&&(e.range[0]>n||e.range[1]<n)?e:(t[e.type]||t.default||checkProps)(e,i,stop):e};try{r=i(e)}catch(e){if(e!==stop)throw e}return r}function checkProps(e,t){var n={};return Object.keys(e).forEach(function(r){var i=e[r],o=i;o=Array.isArray(i)?i.map(t):t(i),n[r]=o}),n}e.exports=walker,walker.checkProps=checkProps},function(e,t){e.exports=function clipboardCopy(e){if(navigator.clipboard)return navigator.clipboard.writeText(e);var t=document.createElement("span");t.textContent=e,t.style.whiteSpace="pre",document.body.appendChild(t);var n=window.getSelection(),r=window.document.createRange();n.removeAllRanges(),r.selectNode(t),n.addRange(r);var i=!1;try{i=window.document.execCommand("copy")}catch(e){console.log("error",e)}return n.removeAllRanges(),window.document.body.removeChild(t),i?Promise.resolve():Promise.reject()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=_interopRequireDefault(n(1)),o=_interopRequireDefault(n(182));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}t.default=function MdContentCopy(e){return i.default.createElement(o.default,r({viewBox:"0 0 40 40"},e),i.default.createElement("g",null,i.default.createElement("path",{d:"m31.6 35v-23.4h-18.2v23.4h18.2z m0-26.6c1.8 0 3.4 1.4 3.4 3.2v23.4c0 1.8-1.6 3.4-3.4 3.4h-18.2c-1.8 0-3.4-1.6-3.4-3.4v-23.4c0-1.8 1.6-3.2 3.4-3.2h18.2z m-5-6.8v3.4h-20v23.4h-3.2v-23.4c0-1.8 1.4-3.4 3.2-3.4h20z"})))},e.exports=t.default},function(e,t,n){var r=n(51).isFinite;e.exports=function isFinite(e){return"number"==typeof e&&r(e)}},function(e,t){e.exports=["resize","remove","mousedown","mouseup","mouseover","mousemove","click","dblclick","mouseenter","mouseleave","mouseout","contextmenu","touchstart","touchend","touchmove","touchcancel","movestart","move","moveend","dragstart","drag","dragend","zoomstart","zoom","zoomend","rotatestart","rotate","rotateend","pitchstart","pitch","pitchend","boxzoomstart","boxzoomend","boxzoomcancel","webglcontextlost","webglcontextrestored","load","error","data","styledata","sourcedata","dataloading","styledataloading","sourcedataloading"]},function(e,t){e.exports=function capitalizeFirstLetter(e){return e.charAt(0).toUpperCase()+e.slice(1)}},function(e,t,n){"use strict";(function(e){var r=n(27);t.a=function isElectron(){return"undefined"!=typeof window&&"object"===Object(r.a)(window.process)&&"renderer"===window.process.type||!(void 0===e||"object"!==Object(r.a)(e.versions)||!Boolean(e.versions.electron))||"object"===("undefined"==typeof navigator?"undefined":Object(r.a)(navigator))&&"string"==typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0}()}).call(this,n(66))},function(e,t,n){"use strict";n.d(t,"a",function(){return getParameterPolyfill});var r,i=n(0),o=function getWebGL2ValueOrZero(e){return isWebGL2(e)?void 0:0},a=(r={},Object(i.a)(r,3074,function(e){return isWebGL2(e)?void 0:36064}),Object(i.a)(r,35723,function(e){return isWebGL2(e)?void 0:4352}),Object(i.a)(r,35977,o),Object(i.a)(r,32937,o),Object(i.a)(r,36795,function(e,t){var n=isWebGL2(e)?e.getExtension("EXT_disjoint_timer_query_webgl2"):e.getExtension("EXT_disjoint_timer_query");return n&&n.GPU_DISJOINT_EXT?t(n.GPU_DISJOINT_EXT):0}),Object(i.a)(r,37445,function(e,t){var n=e.getExtension("WEBGL_debug_renderer_info");return t(n&&n.UNMASKED_VENDOR_WEBGL||7936)}),Object(i.a)(r,37446,function(e,t){var n=e.getExtension("WEBGL_debug_renderer_info");return t(n&&n.UNMASKED_RENDERER_WEBGL||7937)}),Object(i.a)(r,34047,function(e,t){var n=e.luma.extensions.EXT_texture_filter_anisotropic;return n?t(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1}),Object(i.a)(r,32883,o),Object(i.a)(r,35071,o),Object(i.a)(r,37447,o),Object(i.a)(r,36063,function(e,t){if(!isWebGL2(e)){var n=e.getExtension("WEBGL_draw_buffers");return n?t(n.MAX_COLOR_ATTACHMENTS_WEBGL):0}}),Object(i.a)(r,35379,o),Object(i.a)(r,35374,o),Object(i.a)(r,35377,o),Object(i.a)(r,34852,function(e){if(!isWebGL2(e)){var t=e.getExtension("WEBGL_draw_buffers");return t?t.MAX_DRAW_BUFFERS_WEBGL:0}}),Object(i.a)(r,36203,function(e){return e.getExtension("OES_element_index")?2147483647:65535}),Object(i.a)(r,33001,function(e){return e.getExtension("OES_element_index")?16777216:65535}),Object(i.a)(r,33e3,function(e){return 16777216}),Object(i.a)(r,37157,o),Object(i.a)(r,35373,o),Object(i.a)(r,35657,o),Object(i.a)(r,36183,o),Object(i.a)(r,37137,o),Object(i.a)(r,34045,o),Object(i.a)(r,35978,o),Object(i.a)(r,35979,o),Object(i.a)(r,35968,o),Object(i.a)(r,35376,o),Object(i.a)(r,35375,o),Object(i.a)(r,35659,o),Object(i.a)(r,37154,o),Object(i.a)(r,35371,o),Object(i.a)(r,35658,o),Object(i.a)(r,35076,o),Object(i.a)(r,35077,o),Object(i.a)(r,35380,o),r);function isWebGL2(e){return e&&!0}function getParameterPolyfill(e,t,n){var r=a[n],i="function"==typeof r?r(e,t,n):r;return void 0!==i?i:t(n)}},function(e,t,n){"use strict";function earcut(e,t,n){n=n||2;var r,i,o,a,s,l,u,c=t&&t.length,p=c?t[0]*n:e.length,h=linkedList(e,0,p,n,!0),f=[];if(!h||h.next===h.prev)return f;if(c&&(h=eliminateHoles(e,t,h,n)),e.length>80*n){r=o=e[0],i=a=e[1];for(var d=n;d<p;d+=n)(s=e[d])<r&&(r=s),(l=e[d+1])<i&&(i=l),s>o&&(o=s),l>a&&(a=l);u=0!==(u=Math.max(o-r,a-i))?1/u:0}return earcutLinked(h,f,n,r,i,u),f}function linkedList(e,t,n,r,i){var o,a;if(i===signedArea(e,t,n,r)>0)for(o=t;o<n;o+=r)a=insertNode(o,e[o],e[o+1],a);else for(o=n-r;o>=t;o-=r)a=insertNode(o,e[o],e[o+1],a);return a&&equals(a,a.next)&&(removeNode(a),a=a.next),a}function filterPoints(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!equals(r,r.next)&&0!==area(r.prev,r,r.next))r=r.next;else{if(removeNode(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function earcutLinked(e,t,n,r,i,o,a){if(e){!a&&o&&indexCurve(e,r,i,o);for(var s,l,u=e;e.prev!==e.next;)if(s=e.prev,l=e.next,o?isEarHashed(e,r,i,o):isEar(e))t.push(s.i/n),t.push(e.i/n),t.push(l.i/n),removeNode(e),e=l.next,u=l.next;else if((e=l)===u){a?1===a?earcutLinked(e=cureLocalIntersections(e,t,n),t,n,r,i,o,2):2===a&&splitEarcut(e,t,n,r,i,o):earcutLinked(filterPoints(e),t,n,r,i,o,1);break}}}function isEar(e){var t=e.prev,n=e,r=e.next;if(area(t,n,r)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(pointInTriangle(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&area(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function isEarHashed(e,t,n,r){var i=e.prev,o=e,a=e.next;if(area(i,o,a)>=0)return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,l=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,u=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,c=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,p=zOrder(s,l,t,n,r),h=zOrder(u,c,t,n,r),f=e.prevZ,d=e.nextZ;f&&f.z>=p&&d&&d.z<=h;){if(f!==e.prev&&f!==e.next&&pointInTriangle(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&area(f.prev,f,f.next)>=0)return!1;if(f=f.prevZ,d!==e.prev&&d!==e.next&&pointInTriangle(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&area(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;f&&f.z>=p;){if(f!==e.prev&&f!==e.next&&pointInTriangle(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&area(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;d&&d.z<=h;){if(d!==e.prev&&d!==e.next&&pointInTriangle(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&area(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function cureLocalIntersections(e,t,n){var r=e;do{var i=r.prev,o=r.next.next;!equals(i,o)&&intersects(i,r,r.next,o)&&locallyInside(i,o)&&locallyInside(o,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(o.i/n),removeNode(r),removeNode(r.next),r=e=o),r=r.next}while(r!==e);return r}function splitEarcut(e,t,n,r,i,o){var a=e;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&isValidDiagonal(a,s)){var l=splitPolygon(a,s);return a=filterPoints(a,a.next),l=filterPoints(l,l.next),earcutLinked(a,t,n,r,i,o),void earcutLinked(l,t,n,r,i,o)}s=s.next}a=a.next}while(a!==e)}function eliminateHoles(e,t,n,r){var i,o,a,s=[];for(i=0,o=t.length;i<o;i++)(a=linkedList(e,t[i]*r,i<o-1?t[i+1]*r:e.length,r,!1))===a.next&&(a.steiner=!0),s.push(getLeftmost(a));for(s.sort(compareX),i=0;i<s.length;i++)eliminateHole(s[i],n),n=filterPoints(n,n.next);return n}function compareX(e,t){return e.x-t.x}function eliminateHole(e,t){if(t=findHoleBridge(e,t)){var n=splitPolygon(t,e);filterPoints(n,n.next)}}function findHoleBridge(e,t){var n,r=t,i=e.x,o=e.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!n)return null;if(i===a)return n.prev;var l,u=n,c=n.x,p=n.y,h=1/0;for(r=n.next;r!==u;)i>=r.x&&r.x>=c&&i!==r.x&&pointInTriangle(o<p?i:a,o,c,p,o<p?a:i,o,r.x,r.y)&&((l=Math.abs(o-r.y)/(i-r.x))<h||l===h&&r.x>n.x)&&locallyInside(r,e)&&(n=r,h=l),r=r.next;return n}function indexCurve(e,t,n,r){var i=e;do{null===i.z&&(i.z=zOrder(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,sortLinked(i)}function sortLinked(e){var t,n,r,i,o,a,s,l,u=1;do{for(n=e,e=null,o=null,a=0;n;){for(a++,r=n,s=0,t=0;t<u&&(s++,r=r.nextZ);t++);for(l=u;s>0||l>0&&r;)0!==s&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,l--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=r}o.nextZ=null,u*=2}while(a>1);return e}function zOrder(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function getLeftmost(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function pointInTriangle(e,t,n,r,i,o,a,s){return(i-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(r-s)-(n-a)*(t-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function isValidDiagonal(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!intersectsPolygon(e,t)&&locallyInside(e,t)&&locallyInside(t,e)&&middleInside(e,t)}function area(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function equals(e,t){return e.x===t.x&&e.y===t.y}function intersects(e,t,n,r){return!!(equals(e,t)&&equals(n,r)||equals(e,r)&&equals(n,t))||area(e,t,n)>0!=area(e,t,r)>0&&area(n,r,e)>0!=area(n,r,t)>0}function intersectsPolygon(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&intersects(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}function locallyInside(e,t){return area(e.prev,e,e.next)<0?area(e,t,e.next)>=0&&area(e,e.prev,t)>=0:area(e,t,e.prev)<0||area(e,e.next,t)<0}function middleInside(e,t){var n=e,r=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}function splitPolygon(e,t){var n=new Node(e.i,e.x,e.y),r=new Node(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function insertNode(e,t,n,r){var i=new Node(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function removeNode(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Node(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function signedArea(e,t,n,r){for(var i=0,o=t,a=n-r;o<n;o+=r)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}e.exports=earcut,e.exports.default=earcut,earcut.deviation=function(e,t,n,r){var i=t&&t.length,o=i?t[0]*n:e.length,a=Math.abs(signedArea(e,0,o,n));if(i)for(var s=0,l=t.length;s<l;s++){var u=t[s]*n,c=s<l-1?t[s+1]*n:e.length;a-=Math.abs(signedArea(e,u,c,n))}var p=0;for(s=0;s<r.length;s+=3){var h=r[s]*n,f=r[s+1]*n,d=r[s+2]*n;p+=Math.abs((e[h]-e[d])*(e[f+1]-e[h+1])-(e[h]-e[f])*(e[d+1]-e[h+1]))}return 0===a&&0===p?0:Math.abs((p-a)/a)},earcut.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var a=0;a<t;a++)n.vertices.push(e[i][o][a]);i>0&&(r+=e[i-1].length,n.holes.push(r))}return n}},function(e,t,n){"use strict";e.exports=TinySDF;var r=1e20;function TinySDF(e,t,n,r,i,o){this.fontSize=e||24,this.buffer=void 0===t?3:t,this.cutoff=r||.25,this.fontFamily=i||"sans-serif",this.fontWeight=o||"normal",this.radius=n||8;var a=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=a,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.d=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Int16Array(a),this.middle=Math.round(a/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function edt(e,t,n,r,i,o,a){for(var s=0;s<t;s++){for(var l=0;l<n;l++)r[l]=e[l*t+s];for(edt1d(r,i,o,a,n),l=0;l<n;l++)e[l*t+s]=i[l]}for(l=0;l<n;l++){for(s=0;s<t;s++)r[s]=e[l*t+s];for(edt1d(r,i,o,a,t),s=0;s<t;s++)e[l*t+s]=Math.sqrt(i[s])}}function edt1d(e,t,n,i,o){n[0]=0,i[0]=-r,i[1]=+r;for(var a=1,s=0;a<o;a++){for(var l=(e[a]+a*a-(e[n[s]]+n[s]*n[s]))/(2*a-2*n[s]);l<=i[s];)s--,l=(e[a]+a*a-(e[n[s]]+n[s]*n[s]))/(2*a-2*n[s]);n[++s]=a,i[s]=l,i[s+1]=+r}for(a=0,s=0;a<o;a++){for(;i[s+1]<a;)s++;t[a]=(a-n[s])*(a-n[s])+e[n[s]]}}TinySDF.prototype.draw=function(e){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(e,this.buffer,this.middle);for(var t=this.ctx.getImageData(0,0,this.size,this.size),n=new Uint8ClampedArray(this.size*this.size),i=0;i<this.size*this.size;i++){var o=t.data[4*i+3]/255;this.gridOuter[i]=1===o?0:0===o?r:Math.pow(Math.max(0,.5-o),2),this.gridInner[i]=1===o?r:0===o?0:Math.pow(Math.max(0,o-.5),2)}for(edt(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),edt(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),i=0;i<this.size*this.size;i++){var a=this.gridOuter[i]-this.gridInner[i];n[i]=Math.max(0,Math.min(255,Math.round(255-255*(a/this.radius+this.cutoff))))}return n}},function(e,t,n){n(268),e.exports=n(490)},function(e,t,n){"use strict";n.r(t),function(e){n(49);e.MAPBOX_ACCESS_TOKEN="pk.eyJ1Ijoic3RlcGFua3V6bWluIiwiYSI6Ik1ieW5udm8ifQ.25EOEC2-N92NCWT0Ci9w-Q"}.call(this,n(31))},function(e,t,n){(e.exports=n(270)(!1)).push([e.i,".mapboxgl-map {\n    font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;\n    overflow: hidden;\n    position: relative;\n    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n}\n\n.mapboxgl-map:-webkit-full-screen {\n    width: 100%;\n    height: 100%;\n}\n\n.mapboxgl-canary {\n    background-color: salmon;\n}\n\n.mapboxgl-canvas-container.mapboxgl-interactive,\n.mapboxgl-ctrl-group > button.mapboxgl-ctrl-compass {\n    cursor: -webkit-grab;\n    cursor: -moz-grab;\n    cursor: grab;\n    -moz-user-select: none;\n    -webkit-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n}\n\n.mapboxgl-canvas-container.mapboxgl-interactive:active,\n.mapboxgl-ctrl-group > button.mapboxgl-ctrl-compass:active {\n    cursor: -webkit-grabbing;\n    cursor: -moz-grabbing;\n    cursor: grabbing;\n}\n\n.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate,\n.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate .mapboxgl-canvas {\n    touch-action: pan-x pan-y;\n}\n\n.mapboxgl-canvas-container.mapboxgl-touch-drag-pan,\n.mapboxgl-canvas-container.mapboxgl-touch-drag-pan .mapboxgl-canvas {\n    touch-action: pinch-zoom;\n}\n\n.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan,\n.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan .mapboxgl-canvas {\n    touch-action: none;\n}\n\n.mapboxgl-ctrl-top-left,\n.mapboxgl-ctrl-top-right,\n.mapboxgl-ctrl-bottom-left,\n.mapboxgl-ctrl-bottom-right { position: absolute; pointer-events: none; z-index: 2; }\n.mapboxgl-ctrl-top-left     { top: 0; left: 0; }\n.mapboxgl-ctrl-top-right    { top: 0; right: 0; }\n.mapboxgl-ctrl-bottom-left  { bottom: 0; left: 0; }\n.mapboxgl-ctrl-bottom-right { right: 0; bottom: 0; }\n\n.mapboxgl-ctrl { clear: both; pointer-events: auto; }\n.mapboxgl-ctrl-top-left .mapboxgl-ctrl     { margin: 10px 0 0 10px; float: left; }\n.mapboxgl-ctrl-top-right .mapboxgl-ctrl    { margin: 10px 10px 0 0; float: right; }\n.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl  { margin: 0 0 10px 10px; float: left; }\n.mapboxgl-ctrl-bottom-right .mapboxgl-ctrl { margin: 0 10px 10px 0; float: right; }\n\n.mapboxgl-ctrl-group {\n    border-radius: 4px;\n    overflow: hidden;\n    background: #fff;\n}\n\n.mapboxgl-ctrl-group:not(:empty) {\n    -moz-box-shadow: 0 0 2px rgba(0, 0, 0, 0.1);\n    -webkit-box-shadow: 0 0 2px rgba(0, 0, 0, 0.1);\n    box-shadow: 0 0 0 2px rgba(0, 0, 0, 0.1);\n}\n\n.mapboxgl-ctrl-group > button {\n    width: 30px;\n    height: 30px;\n    display: block;\n    padding: 0;\n    outline: none;\n    border: 0;\n    box-sizing: border-box;\n    background-color: transparent;\n    cursor: pointer;\n}\n\n.mapboxgl-ctrl-group > button + button {\n    border-top: 1px solid #ddd;\n}\n\n/* https://bugzilla.mozilla.org/show_bug.cgi?id=140562 */\n.mapboxgl-ctrl > button::-moz-focus-inner {\n    border: 0;\n    padding: 0;\n}\n\n.mapboxgl-ctrl > button:hover {\n    background-color: rgba(0, 0, 0, 0.05);\n}\n\n.mapboxgl-ctrl-icon,\n.mapboxgl-ctrl-icon > .mapboxgl-ctrl-compass-arrow {\n    speak: none;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n}\n\n.mapboxgl-ctrl-icon {\n    padding: 5px;\n}\n\n.mapboxgl-ctrl-icon.mapboxgl-ctrl-zoom-out {\n    background-image: url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E %3Cpath style='fill:%23333333;' d='m 7,9 c -0.554,0 -1,0.446 -1,1 0,0.554 0.446,1 1,1 l 6,0 c 0.554,0 1,-0.446 1,-1 0,-0.554 -0.446,-1 -1,-1 z'/%3E %3C/svg%3E\");\n}\n\n.mapboxgl-ctrl-icon.mapboxgl-ctrl-zoom-in {\n    background-image: url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E %3Cpath style='fill:%23333333;' d='M 10 6 C 9.446 6 9 6.4459904 9 7 L 9 9 L 7 9 C 6.446 9 6 9.446 6 10 C 6 10.554 6.446 11 7 11 L 9 11 L 9 13 C 9 13.55401 9.446 14 10 14 C 10.554 14 11 13.55401 11 13 L 11 11 L 13 11 C 13.554 11 14 10.554 14 10 C 14 9.446 13.554 9 13 9 L 11 9 L 11 7 C 11 6.4459904 10.554 6 10 6 z'/%3E %3C/svg%3E\");\n}\n\n.mapboxgl-ctrl-icon.mapboxgl-ctrl-geolocate {\n    background-image: url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E %3Cpath d='M10 4C9 4 9 5 9 5L9 5.1A5 5 0 0 0 5.1 9L5 9C5 9 4 9 4 10 4 11 5 11 5 11L5.1 11A5 5 0 0 0 9 14.9L9 15C9 15 9 16 10 16 11 16 11 15 11 15L11 14.9A5 5 0 0 0 14.9 11L15 11C15 11 16 11 16 10 16 9 15 9 15 9L14.9 9A5 5 0 0 0 11 5.1L11 5C11 5 11 4 10 4zM10 6.5A3.5 3.5 0 0 1 13.5 10 3.5 3.5 0 0 1 10 13.5 3.5 3.5 0 0 1 6.5 10 3.5 3.5 0 0 1 10 6.5zM10 8.3A1.8 1.8 0 0 0 8.3 10 1.8 1.8 0 0 0 10 11.8 1.8 1.8 0 0 0 11.8 10 1.8 1.8 0 0 0 10 8.3z'/%3E %3C/svg%3E\");\n}\n\n.mapboxgl-ctrl-icon.mapboxgl-ctrl-geolocate:disabled {\n    background-image: url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23aaa'%3E %3Cpath d='M10 4C9 4 9 5 9 5L9 5.1A5 5 0 0 0 5.1 9L5 9C5 9 4 9 4 10 4 11 5 11 5 11L5.1 11A5 5 0 0 0 9 14.9L9 15C9 15 9 16 10 16 11 16 11 15 11 15L11 14.9A5 5 0 0 0 14.9 11L15 11C15 11 16 11 16 10 16 9 15 9 15 9L14.9 9A5 5 0 0 0 11 5.1L11 5C11 5 11 4 10 4zM10 6.5A3.5 3.5 0 0 1 13.5 10 3.5 3.5 0 0 1 10 13.5 3.5 3.5 0 0 1 6.5 10 3.5 3.5 0 0 1 10 6.5zM10 8.3A1.8 1.8 0 0 0 8.3 10 1.8 1.8 0 0 0 10 11.8 1.8 1.8 0 0 0 11.8 10 1.8 1.8 0 0 0 10 8.3z'/%3E %3C/svg%3E\");\n}\n\n.mapboxgl-ctrl-icon.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active {\n    background-image: url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E %3Cpath d='M10 4C9 4 9 5 9 5L9 5.1A5 5 0 0 0 5.1 9L5 9C5 9 4 9 4 10 4 11 5 11 5 11L5.1 11A5 5 0 0 0 9 14.9L9 15C9 15 9 16 10 16 11 16 11 15 11 15L11 14.9A5 5 0 0 0 14.9 11L15 11C15 11 16 11 16 10 16 9 15 9 15 9L14.9 9A5 5 0 0 0 11 5.1L11 5C11 5 11 4 10 4zM10 6.5A3.5 3.5 0 0 1 13.5 10 3.5 3.5 0 0 1 10 13.5 3.5 3.5 0 0 1 6.5 10 3.5 3.5 0 0 1 10 6.5zM10 8.3A1.8 1.8 0 0 0 8.3 10 1.8 1.8 0 0 0 10 11.8 1.8 1.8 0 0 0 11.8 10 1.8 1.8 0 0 0 10 8.3z'/%3E %3C/svg%3E\");\n}\n\n.mapboxgl-ctrl-icon.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error {\n    background-image: url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E %3Cpath d='M10 4C9 4 9 5 9 5L9 5.1A5 5 0 0 0 5.1 9L5 9C5 9 4 9 4 10 4 11 5 11 5 11L5.1 11A5 5 0 0 0 9 14.9L9 15C9 15 9 16 10 16 11 16 11 15 11 15L11 14.9A5 5 0 0 0 14.9 11L15 11C15 11 16 11 16 10 16 9 15 9 15 9L14.9 9A5 5 0 0 0 11 5.1L11 5C11 5 11 4 10 4zM10 6.5A3.5 3.5 0 0 1 13.5 10 3.5 3.5 0 0 1 10 13.5 3.5 3.5 0 0 1 6.5 10 3.5 3.5 0 0 1 10 6.5zM10 8.3A1.8 1.8 0 0 0 8.3 10 1.8 1.8 0 0 0 10 11.8 1.8 1.8 0 0 0 11.8 10 1.8 1.8 0 0 0 10 8.3z'/%3E %3C/svg%3E\");\n}\n\n.mapboxgl-ctrl-icon.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background {\n    background-image: url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E %3Cpath d='M 10,4 C 9,4 9,5 9,5 L 9,5.1 C 7.0357113,5.5006048 5.5006048,7.0357113 5.1,9 L 5,9 c 0,0 -1,0 -1,1 0,1 1,1 1,1 l 0.1,0 c 0.4006048,1.964289 1.9357113,3.499395 3.9,3.9 L 9,15 c 0,0 0,1 1,1 1,0 1,-1 1,-1 l 0,-0.1 c 1.964289,-0.400605 3.499395,-1.935711 3.9,-3.9 l 0.1,0 c 0,0 1,0 1,-1 C 16,9 15,9 15,9 L 14.9,9 C 14.499395,7.0357113 12.964289,5.5006048 11,5.1 L 11,5 c 0,0 0,-1 -1,-1 z m 0,2.5 c 1.932997,0 3.5,1.5670034 3.5,3.5 0,1.932997 -1.567003,3.5 -3.5,3.5 C 8.0670034,13.5 6.5,11.932997 6.5,10 6.5,8.0670034 8.0670034,6.5 10,6.5 Z'/%3E %3C/svg%3E\");\n}\n\n.mapboxgl-ctrl-icon.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error {\n    background-image: url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E %3Cpath d='M 10,4 C 9,4 9,5 9,5 L 9,5.1 C 7.0357113,5.5006048 5.5006048,7.0357113 5.1,9 L 5,9 c 0,0 -1,0 -1,1 0,1 1,1 1,1 l 0.1,0 c 0.4006048,1.964289 1.9357113,3.499395 3.9,3.9 L 9,15 c 0,0 0,1 1,1 1,0 1,-1 1,-1 l 0,-0.1 c 1.964289,-0.400605 3.499395,-1.935711 3.9,-3.9 l 0.1,0 c 0,0 1,0 1,-1 C 16,9 15,9 15,9 L 14.9,9 C 14.499395,7.0357113 12.964289,5.5006048 11,5.1 L 11,5 c 0,0 0,-1 -1,-1 z m 0,2.5 c 1.932997,0 3.5,1.5670034 3.5,3.5 0,1.932997 -1.567003,3.5 -3.5,3.5 C 8.0670034,13.5 6.5,11.932997 6.5,10 6.5,8.0670034 8.0670034,6.5 10,6.5 Z'/%3E %3C/svg%3E\");\n}\n\n.mapboxgl-ctrl-icon.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-waiting {\n    -webkit-animation: mapboxgl-spin 2s infinite linear;\n    -moz-animation: mapboxgl-spin 2s infinite linear;\n    -o-animation: mapboxgl-spin 2s infinite linear;\n    -ms-animation: mapboxgl-spin 2s infinite linear;\n    animation: mapboxgl-spin 2s infinite linear;\n}\n\n@-webkit-keyframes mapboxgl-spin {\n    0% { -webkit-transform: rotate(0deg); }\n    100% { -webkit-transform: rotate(360deg); }\n}\n\n@-moz-keyframes mapboxgl-spin {\n    0% { -moz-transform: rotate(0deg); }\n    100% { -moz-transform: rotate(360deg); }\n}\n\n@-o-keyframes mapboxgl-spin {\n    0% { -o-transform: rotate(0deg); }\n    100% { -o-transform: rotate(360deg); }\n}\n\n@-ms-keyframes mapboxgl-spin {\n    0% { -ms-transform: rotate(0deg); }\n    100% { -ms-transform: rotate(360deg); }\n}\n\n@keyframes mapboxgl-spin {\n    0% { transform: rotate(0deg); }\n    100% { transform: rotate(360deg); }\n}\n\n.mapboxgl-ctrl-icon.mapboxgl-ctrl-fullscreen {\n    background-image: url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E %3Cpath d='M 5 4 C 4.5 4 4 4.5 4 5 L 4 6 L 4 9 L 4.5 9 L 5.7773438 7.296875 C 6.7771319 8.0602131 7.835765 8.9565728 8.890625 10 C 7.8257121 11.0633 6.7761791 11.951675 5.78125 12.707031 L 4.5 11 L 4 11 L 4 15 C 4 15.5 4.5 16 5 16 L 9 16 L 9 15.5 L 7.2734375 14.205078 C 8.0428931 13.187886 8.9395441 12.133481 9.9609375 11.068359 C 11.042371 12.14699 11.942093 13.2112 12.707031 14.21875 L 11 15.5 L 11 16 L 14 16 L 15 16 C 15.5 16 16 15.5 16 15 L 16 14 L 16 11 L 15.5 11 L 14.205078 12.726562 C 13.177985 11.949617 12.112718 11.043577 11.037109 10.009766 C 12.151856 8.981061 13.224345 8.0798624 14.228516 7.3046875 L 15.5 9 L 16 9 L 16 5 C 16 4.5 15.5 4 15 4 L 11 4 L 11 4.5 L 12.703125 5.7773438 C 11.932647 6.7864834 11.026693 7.8554712 9.9707031 8.9199219 C 8.9584739 7.8204943 8.0698767 6.7627188 7.3046875 5.7714844 L 9 4.5 L 9 4 L 6 4 L 5 4 z '/%3E %3C/svg%3E\");\n}\n\n.mapboxgl-ctrl-icon.mapboxgl-ctrl-shrink {\n    background-image: url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E %3Cpath style='fill:%23000000;' d='M 4.2421875 3.4921875 A 0.750075 0.750075 0 0 0 3.71875 4.78125 L 5.9648438 7.0273438 L 4 8.5 L 4 9 L 8 9 C 8.500001 8.9999988 9 8.4999992 9 8 L 9 4 L 8.5 4 L 7.0175781 5.9550781 L 4.78125 3.71875 A 0.750075 0.750075 0 0 0 4.2421875 3.4921875 z M 15.734375 3.4921875 A 0.750075 0.750075 0 0 0 15.21875 3.71875 L 12.984375 5.953125 L 11.5 4 L 11 4 L 11 8 C 11 8.4999992 11.499999 8.9999988 12 9 L 16 9 L 16 8.5 L 14.035156 7.0273438 L 16.28125 4.78125 A 0.750075 0.750075 0 0 0 15.734375 3.4921875 z M 4 11 L 4 11.5 L 5.9648438 12.972656 L 3.71875 15.21875 A 0.75130096 0.75130096 0 1 0 4.78125 16.28125 L 7.0273438 14.035156 L 8.5 16 L 9 16 L 9 12 C 9 11.500001 8.500001 11.000001 8 11 L 4 11 z M 12 11 C 11.499999 11.000001 11 11.500001 11 12 L 11 16 L 11.5 16 L 12.972656 14.035156 L 15.21875 16.28125 A 0.75130096 0.75130096 0 1 0 16.28125 15.21875 L 14.035156 12.972656 L 16 11.5 L 16 11 L 12 11 z '/%3E %3C/svg%3E\");\n}\n\n.mapboxgl-ctrl-icon.mapboxgl-ctrl-compass > .mapboxgl-ctrl-compass-arrow {\n    width: 20px;\n    height: 20px;\n    margin: 5px;\n    background-image: url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E %3Cpolygon fill='%23333333' points='6,9 10,1 14,9'/%3E %3Cpolygon fill='%23CCCCCC' points='6,11 10,19 14,11 '/%3E %3C/svg%3E\");\n    background-repeat: no-repeat;\n    display: inline-block;\n}\n\na.mapboxgl-ctrl-logo {\n    width: 85px;\n    height: 21px;\n    margin: 0 0 -3px -3px;\n    display: block;\n    background-repeat: no-repeat;\n    cursor: pointer;\n    background-image: url(\"data:image/svg+xml;charset=utf-8,%3C?xml version='1.0' encoding='utf-8'?%3E%3Csvg version='1.1' id='Layer_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 84.49 21' style='enable-background:new 0 0 84.49 21;' xml:space='preserve'%3E%3Cg%3E %3Cpath class='st0' style='opacity:0.9; fill: %23FFFFFF; enable-background: new;' d='M83.25,14.26c0,0.12-0.09,0.21-0.21,0.21h-1.61c-0.13,0-0.24-0.06-0.3-0.17l-1.44-2.39l-1.44,2.39 c-0.06,0.11-0.18,0.17-0.3,0.17h-1.61c-0.04,0-0.08-0.01-0.12-0.03c-0.09-0.06-0.13-0.19-0.06-0.28l0,0l2.43-3.68L76.2,6.84 c-0.02-0.03-0.03-0.07-0.03-0.12c0-0.12,0.09-0.21,0.21-0.21h1.61c0.13,0,0.24,0.06,0.3,0.17l1.41,2.36l1.4-2.35 c0.06-0.11,0.18-0.17,0.3-0.17H83c0.04,0,0.08,0.01,0.12,0.03c0.09,0.06,0.13,0.19,0.06,0.28l0,0l-2.37,3.63l2.43,3.67 C83.24,14.18,83.25,14.22,83.25,14.26z'/%3E %3Cpath class='st0' style='opacity:0.9; fill: %23FFFFFF; enable-background: new;' d='M66.24,9.59c-0.39-1.88-1.96-3.28-3.84-3.28c-1.03,0-2.03,0.42-2.73,1.18V3.51c0-0.13-0.1-0.23-0.23-0.23h-1.4 c-0.13,0-0.23,0.11-0.23,0.23v10.72c0,0.13,0.1,0.23,0.23,0.23h1.4c0.13,0,0.23-0.11,0.23-0.23V13.5c0.71,0.75,1.7,1.18,2.73,1.18 c1.88,0,3.45-1.41,3.84-3.29C66.37,10.79,66.37,10.18,66.24,9.59L66.24,9.59z M62.08,13c-1.32,0-2.39-1.11-2.41-2.48v-0.06 c0.02-1.38,1.09-2.48,2.41-2.48s2.42,1.12,2.42,2.51S63.41,13,62.08,13z'/%3E %3Cpath class='st0' style='opacity:0.9; fill: %23FFFFFF; enable-background: new;' d='M71.67,6.32c-1.98-0.01-3.72,1.35-4.16,3.29c-0.13,0.59-0.13,1.19,0,1.77c0.44,1.94,2.17,3.32,4.17,3.3 c2.35,0,4.26-1.87,4.26-4.19S74.04,6.32,71.67,6.32z M71.65,13.01c-1.33,0-2.42-1.12-2.42-2.51s1.08-2.52,2.42-2.52 c1.33,0,2.42,1.12,2.42,2.51S72.99,13,71.65,13.01L71.65,13.01z'/%3E %3Cpath class='st1' style='opacity:0.35; enable-background:new;' d='M62.08,7.98c-1.32,0-2.39,1.11-2.41,2.48v0.06C59.68,11.9,60.75,13,62.08,13s2.42-1.12,2.42-2.51 S63.41,7.98,62.08,7.98z M62.08,11.76c-0.63,0-1.14-0.56-1.17-1.25v-0.04c0.01-0.69,0.54-1.25,1.17-1.25 c0.63,0,1.17,0.57,1.17,1.27C63.24,11.2,62.73,11.76,62.08,11.76z'/%3E %3Cpath class='st1' style='opacity:0.35; enable-background:new;' d='M71.65,7.98c-1.33,0-2.42,1.12-2.42,2.51S70.32,13,71.65,13s2.42-1.12,2.42-2.51S72.99,7.98,71.65,7.98z M71.65,11.76c-0.64,0-1.17-0.57-1.17-1.27c0-0.7,0.53-1.26,1.17-1.26s1.17,0.57,1.17,1.27C72.82,11.21,72.29,11.76,71.65,11.76z'/%3E %3Cpath class='st0' style='opacity:0.9; fill: %23FFFFFF; enable-background: new;' d='M45.74,6.53h-1.4c-0.13,0-0.23,0.11-0.23,0.23v0.73c-0.71-0.75-1.7-1.18-2.73-1.18 c-2.17,0-3.94,1.87-3.94,4.19s1.77,4.19,3.94,4.19c1.04,0,2.03-0.43,2.73-1.19v0.73c0,0.13,0.1,0.23,0.23,0.23h1.4 c0.13,0,0.23-0.11,0.23-0.23V6.74c0-0.12-0.09-0.22-0.22-0.22C45.75,6.53,45.75,6.53,45.74,6.53z M44.12,10.53 C44.11,11.9,43.03,13,41.71,13s-2.42-1.12-2.42-2.51s1.08-2.52,2.4-2.52c1.33,0,2.39,1.11,2.41,2.48L44.12,10.53z'/%3E %3Cpath class='st1' style='opacity:0.35; enable-background:new;' d='M41.71,7.98c-1.33,0-2.42,1.12-2.42,2.51S40.37,13,41.71,13s2.39-1.11,2.41-2.48v-0.06 C44.1,9.09,43.03,7.98,41.71,7.98z M40.55,10.49c0-0.7,0.52-1.27,1.17-1.27c0.64,0,1.14,0.56,1.17,1.25v0.04 c-0.01,0.68-0.53,1.24-1.17,1.24C41.08,11.75,40.55,11.19,40.55,10.49z'/%3E %3Cpath class='st0' style='opacity:0.9; fill: %23FFFFFF; enable-background: new;' d='M52.41,6.32c-1.03,0-2.03,0.42-2.73,1.18V6.75c0-0.13-0.1-0.23-0.23-0.23h-1.4c-0.13,0-0.23,0.11-0.23,0.23 v10.72c0,0.13,0.1,0.23,0.23,0.23h1.4c0.13,0,0.23-0.1,0.23-0.23V13.5c0.71,0.75,1.7,1.18,2.74,1.18c2.17,0,3.94-1.87,3.94-4.19 S54.58,6.32,52.41,6.32z M52.08,13.01c-1.32,0-2.39-1.11-2.42-2.48v-0.07c0.02-1.38,1.09-2.49,2.4-2.49c1.32,0,2.41,1.12,2.41,2.51 S53.4,13,52.08,13.01L52.08,13.01z'/%3E %3Cpath class='st1' style='opacity:0.35; enable-background:new;' d='M52.08,7.98c-1.32,0-2.39,1.11-2.42,2.48v0.06c0.03,1.38,1.1,2.48,2.42,2.48s2.41-1.12,2.41-2.51 S53.4,7.98,52.08,7.98z M52.08,11.76c-0.63,0-1.14-0.56-1.17-1.25v-0.04c0.01-0.69,0.54-1.25,1.17-1.25c0.63,0,1.17,0.58,1.17,1.27 S52.72,11.76,52.08,11.76z'/%3E %3Cpath class='st0' style='opacity:0.9; fill: %23FFFFFF; enable-background: new;' d='M36.08,14.24c0,0.13-0.1,0.23-0.23,0.23h-1.41c-0.13,0-0.23-0.11-0.23-0.23V9.68c0-0.98-0.74-1.71-1.62-1.71 c-0.8,0-1.46,0.7-1.59,1.62l0.01,4.66c0,0.13-0.11,0.23-0.23,0.23h-1.41c-0.13,0-0.23-0.11-0.23-0.23V9.68 c0-0.98-0.74-1.71-1.62-1.71c-0.85,0-1.54,0.79-1.6,1.8v4.48c0,0.13-0.1,0.23-0.23,0.23h-1.4c-0.13,0-0.23-0.11-0.23-0.23V6.74 c0.01-0.13,0.1-0.22,0.23-0.22h1.4c0.13,0,0.22,0.11,0.23,0.22V7.4c0.5-0.68,1.3-1.09,2.16-1.1h0.03c1.09,0,2.09,0.6,2.6,1.55 c0.45-0.95,1.4-1.55,2.44-1.56c1.62,0,2.93,1.25,2.9,2.78L36.08,14.24z'/%3E %3Cpath class='st1' style='opacity:0.35; enable-background:new;' d='M84.34,13.59l-0.07-0.13l-1.96-2.99l1.94-2.95c0.44-0.67,0.26-1.56-0.41-2.02c-0.02,0-0.03,0-0.04-0.01 c-0.23-0.15-0.5-0.22-0.78-0.22h-1.61c-0.56,0-1.08,0.29-1.37,0.78L79.72,6.6l-0.34-0.56C79.09,5.56,78.57,5.27,78,5.27h-1.6 c-0.6,0-1.13,0.37-1.35,0.92c-2.19-1.66-5.28-1.47-7.26,0.45c-0.35,0.34-0.65,0.72-0.89,1.14c-0.9-1.62-2.58-2.72-4.5-2.72 c-0.5,0-1.01,0.07-1.48,0.23V3.51c0-0.82-0.66-1.48-1.47-1.48h-1.4c-0.81,0-1.47,0.66-1.47,1.47v3.75 c-0.95-1.36-2.5-2.18-4.17-2.19c-0.74,0-1.46,0.16-2.12,0.47c-0.24-0.17-0.54-0.26-0.84-0.26h-1.4c-0.45,0-0.87,0.21-1.15,0.56 c-0.02-0.03-0.04-0.05-0.07-0.08c-0.28-0.3-0.68-0.47-1.09-0.47h-1.39c-0.3,0-0.6,0.09-0.84,0.26c-0.67-0.3-1.39-0.46-2.12-0.46 c-1.83,0-3.43,1-4.37,2.5c-0.2-0.46-0.48-0.89-0.83-1.25c-0.8-0.81-1.89-1.25-3.02-1.25h-0.01c-0.89,0.01-1.75,0.33-2.46,0.88 c-0.74-0.57-1.64-0.88-2.57-0.88H28.1c-0.29,0-0.58,0.03-0.86,0.11c-0.28,0.06-0.56,0.16-0.82,0.28c-0.21-0.12-0.45-0.18-0.7-0.18 h-1.4c-0.82,0-1.47,0.66-1.47,1.47v7.5c0,0.82,0.66,1.47,1.47,1.47h1.4c0.82,0,1.48-0.66,1.48-1.48l0,0V9.79 c0.03-0.36,0.23-0.59,0.36-0.59c0.18,0,0.38,0.18,0.38,0.47v4.57c0,0.82,0.66,1.47,1.47,1.47h1.41c0.82,0,1.47-0.66,1.47-1.47 l-0.01-4.57c0.06-0.32,0.25-0.47,0.35-0.47c0.18,0,0.38,0.18,0.38,0.47v4.57c0,0.82,0.66,1.47,1.47,1.47h1.41 c0.82,0,1.47-0.66,1.47-1.47v-0.38c0.96,1.29,2.46,2.06,4.06,2.06c0.74,0,1.46-0.16,2.12-0.47c0.24,0.17,0.54,0.26,0.84,0.26h1.39 c0.3,0,0.6-0.09,0.84-0.26v2.01c0,0.82,0.66,1.47,1.47,1.47h1.4c0.82,0,1.47-0.66,1.47-1.47v-1.77c0.48,0.15,0.99,0.23,1.49,0.22 c1.7,0,3.22-0.87,4.17-2.2v0.52c0,0.82,0.66,1.47,1.47,1.47h1.4c0.3,0,0.6-0.09,0.84-0.26c0.66,0.31,1.39,0.47,2.12,0.47 c1.92,0,3.6-1.1,4.49-2.73c1.54,2.65,4.95,3.53,7.58,1.98c0.18-0.11,0.36-0.22,0.53-0.36c0.22,0.55,0.76,0.91,1.35,0.9H78 c0.56,0,1.08-0.29,1.37-0.78l0.37-0.61l0.37,0.61c0.29,0.48,0.81,0.78,1.38,0.78h1.6c0.81,0,1.46-0.66,1.45-1.46 C84.49,14.02,84.44,13.8,84.34,13.59L84.34,13.59z M35.86,14.47h-1.41c-0.13,0-0.23-0.11-0.23-0.23V9.68 c0-0.98-0.74-1.71-1.62-1.71c-0.8,0-1.46,0.7-1.59,1.62l0.01,4.66c0,0.13-0.1,0.23-0.23,0.23h-1.41c-0.13,0-0.23-0.11-0.23-0.23 V9.68c0-0.98-0.74-1.71-1.62-1.71c-0.85,0-1.54,0.79-1.6,1.8v4.48c0,0.13-0.1,0.23-0.23,0.23h-1.4c-0.13,0-0.23-0.11-0.23-0.23 V6.74c0.01-0.13,0.11-0.22,0.23-0.22h1.4c0.13,0,0.22,0.11,0.23,0.22V7.4c0.5-0.68,1.3-1.09,2.16-1.1h0.03 c1.09,0,2.09,0.6,2.6,1.55c0.45-0.95,1.4-1.55,2.44-1.56c1.62,0,2.93,1.25,2.9,2.78l0.01,5.16C36.09,14.36,35.98,14.46,35.86,14.47 L35.86,14.47z M45.97,14.24c0,0.13-0.1,0.23-0.23,0.23h-1.4c-0.13,0-0.23-0.11-0.23-0.23V13.5c-0.7,0.76-1.69,1.18-2.72,1.18 c-2.17,0-3.94-1.87-3.94-4.19s1.77-4.19,3.94-4.19c1.03,0,2.02,0.43,2.73,1.18V6.74c0-0.13,0.1-0.23,0.23-0.23h1.4 c0.12-0.01,0.22,0.08,0.23,0.21c0,0.01,0,0.01,0,0.02v7.51h-0.01V14.24z M52.41,14.67c-1.03,0-2.02-0.43-2.73-1.18v3.97 c0,0.13-0.1,0.23-0.23,0.23h-1.4c-0.13,0-0.23-0.1-0.23-0.23V6.75c0-0.13,0.1-0.22,0.23-0.22h1.4c0.13,0,0.23,0.11,0.23,0.23v0.73 c0.71-0.76,1.7-1.18,2.73-1.18c2.17,0,3.94,1.86,3.94,4.18S54.58,14.67,52.41,14.67z M66.24,11.39c-0.39,1.87-1.96,3.29-3.84,3.29 c-1.03,0-2.02-0.43-2.73-1.18v0.73c0,0.13-0.1,0.23-0.23,0.23h-1.4c-0.13,0-0.23-0.11-0.23-0.23V3.51c0-0.13,0.1-0.23,0.23-0.23 h1.4c0.13,0,0.23,0.11,0.23,0.23v3.97c0.71-0.75,1.7-1.18,2.73-1.17c1.88,0,3.45,1.4,3.84,3.28C66.37,10.19,66.37,10.8,66.24,11.39 L66.24,11.39L66.24,11.39z M71.67,14.68c-2,0.01-3.73-1.35-4.17-3.3c-0.13-0.59-0.13-1.19,0-1.77c0.44-1.94,2.17-3.31,4.17-3.3 c2.36,0,4.26,1.87,4.26,4.19S74.03,14.68,71.67,14.68L71.67,14.68z M83.04,14.47h-1.61c-0.13,0-0.24-0.06-0.3-0.17l-1.44-2.39 l-1.44,2.39c-0.06,0.11-0.18,0.17-0.3,0.17h-1.61c-0.04,0-0.08-0.01-0.12-0.03c-0.09-0.06-0.13-0.19-0.06-0.28l0,0l2.43-3.68 L76.2,6.84c-0.02-0.03-0.03-0.07-0.03-0.12c0-0.12,0.09-0.21,0.21-0.21h1.61c0.13,0,0.24,0.06,0.3,0.17l1.41,2.36l1.41-2.36 c0.06-0.11,0.18-0.17,0.3-0.17h1.61c0.04,0,0.08,0.01,0.12,0.03c0.09,0.06,0.13,0.19,0.06,0.28l0,0l-2.38,3.64l2.43,3.67 c0.02,0.03,0.03,0.07,0.03,0.12C83.25,14.38,83.16,14.47,83.04,14.47L83.04,14.47L83.04,14.47z'/%3E %3Cpath class='st0' style='opacity:0.9; fill: %23FFFFFF; enable-background: new;' d='M10.5,1.24c-5.11,0-9.25,4.15-9.25,9.25s4.15,9.25,9.25,9.25s9.25-4.15,9.25-9.25 C19.75,5.38,15.61,1.24,10.5,1.24z M14.89,12.77c-1.93,1.93-4.78,2.31-6.7,2.31c-0.7,0-1.41-0.05-2.1-0.16c0,0-1.02-5.64,2.14-8.81 c0.83-0.83,1.95-1.28,3.13-1.28c1.27,0,2.49,0.51,3.39,1.42C16.59,8.09,16.64,11,14.89,12.77z'/%3E %3Cpath class='st1' style='opacity:0.35; enable-background:new;' d='M10.5-0.01C4.7-0.01,0,4.7,0,10.49s4.7,10.5,10.5,10.5S21,16.29,21,10.49C20.99,4.7,16.3-0.01,10.5-0.01z M10.5,19.74c-5.11,0-9.25-4.15-9.25-9.25s4.14-9.26,9.25-9.26s9.25,4.15,9.25,9.25C19.75,15.61,15.61,19.74,10.5,19.74z'/%3E %3Cpath class='st1' style='opacity:0.35; enable-background:new;' d='M14.74,6.25C12.9,4.41,9.98,4.35,8.23,6.1c-3.16,3.17-2.14,8.81-2.14,8.81s5.64,1.02,8.81-2.14 C16.64,11,16.59,8.09,14.74,6.25z M12.47,10.34l-0.91,1.87l-0.9-1.87L8.8,9.43l1.86-0.9l0.9-1.87l0.91,1.87l1.86,0.9L12.47,10.34z'/%3E %3Cpolygon class='st0' style='opacity:0.9; fill: %23FFFFFF; enable-background: new;' points='14.33,9.43 12.47,10.34 11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 '/%3E%3C/g%3E%3C/svg%3E\");\n}\n\na.mapboxgl-ctrl-logo.mapboxgl-compact {\n    width: 21px;\n    height: 21px;\n    background-image: url(\"data:image/svg+xml;charset=utf-8,%3C?xml version='1.0' encoding='utf-8'?%3E %3Csvg version='1.1' id='Layer_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 21 21' style='enable-background:new 0 0 21 21;' xml:space='preserve'%3E%3Cg transform='translate(0,0.01)'%3E%3Cpath d='m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z' style='opacity:0.9;fill:%23ffffff;enable-background:new' class='st0'/%3E%3Cpath d='M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z' style='opacity:0.35;enable-background:new' class='st1'/%3E%3Cpath d='M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z' style='opacity:0.35;enable-background:new' class='st1'/%3E%3Cpolygon points='11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 ' style='opacity:0.9;fill:%23ffffff;enable-background:new' class='st0'/%3E%3C/g%3E%3C/svg%3E\");\n}\n\n.mapboxgl-ctrl.mapboxgl-ctrl-attrib {\n    padding: 0 5px;\n    background-color: rgba(255, 255, 255, 0.5);\n    margin: 0;\n}\n\n@media screen {\n    .mapboxgl-ctrl-attrib.mapboxgl-compact {\n        margin: 10px;\n        position: relative;\n        background-color: #fff;\n        border-radius: 3px 12px 12px 3px;\n    }\n\n    .mapboxgl-ctrl-attrib.mapboxgl-compact:hover {\n        padding: 2px 24px 2px 4px;\n        visibility: visible;\n    }\n\n    .mapboxgl-ctrl-top-left > .mapboxgl-ctrl-attrib.mapboxgl-compact:hover,\n    .mapboxgl-ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact:hover {\n        padding: 2px 4px 2px 24px;\n        border-radius: 12px 3px 3px 12px;\n    }\n\n    .mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner {\n        display: none;\n    }\n\n    .mapboxgl-ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner {\n        display: block;\n    }\n\n    .mapboxgl-ctrl-attrib.mapboxgl-compact::after {\n        content: '';\n        cursor: pointer;\n        position: absolute;\n        background-image: url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E %3Cpath fill='%23333333' fill-rule='evenodd' d='M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0'/%3E %3C/svg%3E\");\n        background-color: rgba(255, 255, 255, 0.5);\n        width: 24px;\n        height: 24px;\n        box-sizing: border-box;\n        border-radius: 12px;\n    }\n\n    .mapboxgl-ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after {\n        bottom: 0;\n        right: 0;\n    }\n\n    .mapboxgl-ctrl-top-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after {\n        top: 0;\n        right: 0;\n    }\n\n    .mapboxgl-ctrl-top-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after {\n        top: 0;\n        left: 0;\n    }\n\n    .mapboxgl-ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after {\n        bottom: 0;\n        left: 0;\n    }\n}\n\n.mapboxgl-ctrl-attrib a {\n    color: rgba(0, 0, 0, 0.75);\n    text-decoration: none;\n}\n\n.mapboxgl-ctrl-attrib a:hover {\n    color: inherit;\n    text-decoration: underline;\n}\n\n/* stylelint-disable-next-line selector-class-pattern */\n.mapboxgl-ctrl-attrib .mapbox-improve-map {\n    font-weight: bold;\n    margin-left: 2px;\n}\n\n.mapboxgl-attrib-empty {\n    display: none;\n}\n\n.mapboxgl-ctrl-scale {\n    background-color: rgba(255, 255, 255, 0.75);\n    font-size: 10px;\n    border-width: medium 2px 2px;\n    border-style: none solid solid;\n    border-color: #333;\n    padding: 0 5px;\n    color: #333;\n    box-sizing: border-box;\n}\n\n.mapboxgl-popup {\n    position: absolute;\n    top: 0;\n    left: 0;\n    display: -webkit-flex;\n    display: flex;\n    will-change: transform;\n    pointer-events: none;\n}\n\n.mapboxgl-popup-anchor-top,\n.mapboxgl-popup-anchor-top-left,\n.mapboxgl-popup-anchor-top-right {\n    -webkit-flex-direction: column;\n    flex-direction: column;\n}\n\n.mapboxgl-popup-anchor-bottom,\n.mapboxgl-popup-anchor-bottom-left,\n.mapboxgl-popup-anchor-bottom-right {\n    -webkit-flex-direction: column-reverse;\n    flex-direction: column-reverse;\n}\n\n.mapboxgl-popup-anchor-left {\n    -webkit-flex-direction: row;\n    flex-direction: row;\n}\n\n.mapboxgl-popup-anchor-right {\n    -webkit-flex-direction: row-reverse;\n    flex-direction: row-reverse;\n}\n\n.mapboxgl-popup-tip {\n    width: 0;\n    height: 0;\n    border: 10px solid transparent;\n    z-index: 1;\n}\n\n.mapboxgl-popup-anchor-top .mapboxgl-popup-tip {\n    -webkit-align-self: center;\n    align-self: center;\n    border-top: none;\n    border-bottom-color: #fff;\n}\n\n.mapboxgl-popup-anchor-top-left .mapboxgl-popup-tip {\n    -webkit-align-self: flex-start;\n    align-self: flex-start;\n    border-top: none;\n    border-left: none;\n    border-bottom-color: #fff;\n}\n\n.mapboxgl-popup-anchor-top-right .mapboxgl-popup-tip {\n    -webkit-align-self: flex-end;\n    align-self: flex-end;\n    border-top: none;\n    border-right: none;\n    border-bottom-color: #fff;\n}\n\n.mapboxgl-popup-anchor-bottom .mapboxgl-popup-tip {\n    -webkit-align-self: center;\n    align-self: center;\n    border-bottom: none;\n    border-top-color: #fff;\n}\n\n.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-tip {\n    -webkit-align-self: flex-start;\n    align-self: flex-start;\n    border-bottom: none;\n    border-left: none;\n    border-top-color: #fff;\n}\n\n.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-tip {\n    -webkit-align-self: flex-end;\n    align-self: flex-end;\n    border-bottom: none;\n    border-right: none;\n    border-top-color: #fff;\n}\n\n.mapboxgl-popup-anchor-left .mapboxgl-popup-tip {\n    -webkit-align-self: center;\n    align-self: center;\n    border-left: none;\n    border-right-color: #fff;\n}\n\n.mapboxgl-popup-anchor-right .mapboxgl-popup-tip {\n    -webkit-align-self: center;\n    align-self: center;\n    border-right: none;\n    border-left-color: #fff;\n}\n\n.mapboxgl-popup-close-button {\n    position: absolute;\n    right: 0;\n    top: 0;\n    border: 0;\n    border-radius: 0 3px 0 0;\n    cursor: pointer;\n    background-color: transparent;\n}\n\n.mapboxgl-popup-close-button:hover {\n    background-color: rgba(0, 0, 0, 0.05);\n}\n\n.mapboxgl-popup-content {\n    position: relative;\n    background: #fff;\n    border-radius: 3px;\n    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n    padding: 10px 10px 15px;\n    pointer-events: auto;\n}\n\n.mapboxgl-popup-anchor-top-left .mapboxgl-popup-content {\n    border-top-left-radius: 0;\n}\n\n.mapboxgl-popup-anchor-top-right .mapboxgl-popup-content {\n    border-top-right-radius: 0;\n}\n\n.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-content {\n    border-bottom-left-radius: 0;\n}\n\n.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-content {\n    border-bottom-right-radius: 0;\n}\n\n.mapboxgl-marker {\n    position: absolute;\n    top: 0;\n    left: 0;\n    will-change: transform;\n}\n\n.mapboxgl-user-location-dot {\n    background-color: #1da1f2;\n    width: 15px;\n    height: 15px;\n    border-radius: 50%;\n    box-shadow: 0 0 2px rgba(0, 0, 0, 0.25);\n}\n\n.mapboxgl-user-location-dot::before {\n    background-color: #1da1f2;\n    content: '';\n    width: 15px;\n    height: 15px;\n    border-radius: 50%;\n    position: absolute;\n    -webkit-animation: mapboxgl-user-location-dot-pulse 2s infinite;\n    -moz-animation: mapboxgl-user-location-dot-pulse 2s infinite;\n    -ms-animation: mapboxgl-user-location-dot-pulse 2s infinite;\n    animation: mapboxgl-user-location-dot-pulse 2s infinite;\n}\n\n.mapboxgl-user-location-dot::after {\n    border-radius: 50%;\n    border: 2px solid #fff;\n    content: '';\n    height: 19px;\n    left: -2px;\n    position: absolute;\n    top: -2px;\n    width: 19px;\n    box-sizing: border-box;\n}\n\n@-webkit-keyframes mapboxgl-user-location-dot-pulse {\n    0%   { -webkit-transform: scale(1); opacity: 1; }\n    70%  { -webkit-transform: scale(3); opacity: 0; }\n    100% { -webkit-transform: scale(1); opacity: 0; }\n}\n\n@-ms-keyframes mapboxgl-user-location-dot-pulse {\n    0%   { -ms-transform: scale(1); opacity: 1; }\n    70%  { -ms-transform: scale(3); opacity: 0; }\n    100% { -ms-transform: scale(1); opacity: 0; }\n}\n\n@keyframes mapboxgl-user-location-dot-pulse {\n    0%   { transform: scale(1); opacity: 1; }\n    70%  { transform: scale(3); opacity: 0; }\n    100% { transform: scale(1); opacity: 0; }\n}\n\n.mapboxgl-user-location-dot-stale {\n    background-color: #aaa;\n}\n\n.mapboxgl-user-location-dot-stale::after {\n    display: none;\n}\n\n.mapboxgl-crosshair,\n.mapboxgl-crosshair .mapboxgl-interactive,\n.mapboxgl-crosshair .mapboxgl-interactive:active {\n    cursor: crosshair;\n}\n\n.mapboxgl-boxzoom {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 0;\n    height: 0;\n    background: #fff;\n    border: 2px dotted #202020;\n    opacity: 0.5;\n}\n\n@media print {\n    /* stylelint-disable-next-line selector-class-pattern */\n    .mapbox-improve-map {\n        display: none;\n    }\n}\n",""])},function(e,t,n){"use strict";function cssWithMappingToString(e,t){var n,r,i=e[1]||"",o=e[3];if(!o)return i;if(t&&"function"==typeof btoa){var a=(n=o,r=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),"/*# "+("sourceMappingURL=data:application/json;charset=utf-8;base64,"+r)+" */"),s=o.sources.map(function(e){return"/*# sourceURL="+o.sourceRoot+e+" */"});return[i].concat(s).concat([a]).join("\n")}return[i].join("\n")}e.exports=function(e){var t=[];return t.toString=function toString(){return this.map(function(t){var n=cssWithMappingToString(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];null!=o&&(r[o]=!0)}for(i=0;i<e.length;i++){var a=e[i];null!=a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t.push(a))}},t}},function(e,t,n){var r,i,o={},a=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===i&&(i=r.apply(this,arguments)),i}),s=function(e,t){return t?t.querySelector(e):document.querySelector(e)},l=function(e){var t={};return function(e,n){if("function"==typeof e)return e();if(void 0===t[e]){var r=s.call(this,e,n);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}t[e]=r}return t[e]}}(),u=null,c=0,p=[],h=n(272);function addStylesToDom(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=o[r.id];if(i){i.refs++;for(var a=0;a<i.parts.length;a++)i.parts[a](r.parts[a]);for(;a<r.parts.length;a++)i.parts.push(addStyle(r.parts[a],t))}else{var s=[];for(a=0;a<r.parts.length;a++)s.push(addStyle(r.parts[a],t));o[r.id]={id:r.id,refs:1,parts:s}}}}function listToStyles(e,t){for(var n=[],r={},i=0;i<e.length;i++){var o=e[i],a=t.base?o[0]+t.base:o[0],s={css:o[1],media:o[2],sourceMap:o[3]};r[a]?r[a].parts.push(s):n.push(r[a]={id:a,parts:[s]})}return n}function insertStyleElement(e,t){var n=l(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=p[p.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),p.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=l(e.insertAt.before,n);n.insertBefore(t,i)}}function removeStyleElement(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=p.indexOf(e);t>=0&&p.splice(t,1)}function createStyleElement(e){var t=document.createElement("style");if(void 0===e.attrs.type&&(e.attrs.type="text/css"),void 0===e.attrs.nonce){var n=getNonce();n&&(e.attrs.nonce=n)}return addAttrs(t,e.attrs),insertStyleElement(e,t),t}function createLinkElement(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",addAttrs(t,e.attrs),insertStyleElement(e,t),t}function addAttrs(e,t){Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})}function getNonce(){return n.nc}function addStyle(e,t){var n,r,i,o;if(t.transform&&e.css){if(!(o="function"==typeof t.transform?t.transform(e.css):t.transform.default(e.css)))return function(){};e.css=o}if(t.singleton){var a=c++;n=u||(u=createStyleElement(t)),r=applyToSingletonTag.bind(null,n,a,!1),i=applyToSingletonTag.bind(null,n,a,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=createLinkElement(t),r=updateLink.bind(null,n,t),i=function(){removeStyleElement(n),n.href&&URL.revokeObjectURL(n.href)}):(n=createStyleElement(t),r=applyToTag.bind(null,n),i=function(){removeStyleElement(n)});return r(e),function updateStyle(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=a()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=listToStyles(e,t);return addStylesToDom(n,t),function update(e){for(var r=[],i=0;i<n.length;i++){var a=n[i];(s=o[a.id]).refs--,r.push(s)}e&&addStylesToDom(listToStyles(e,t),t);for(i=0;i<r.length;i++){var s;if(0===(s=r[i]).refs){for(var l=0;l<s.parts.length;l++)s.parts[l]();delete o[s.id]}}}};var f,d=(f=[],function(e,t){return f[e]=t,f.filter(Boolean).join("\n")});function applyToSingletonTag(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=d(t,i);else{var o=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}function applyToTag(e,t){var n=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function updateLink(e,t,n){var r=n.css,i=n.sourceMap,o=void 0===t.convertToAbsoluteUrls&&i;(t.convertToAbsoluteUrls||o)&&(r=h(r)),i&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var a=new Blob([r],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,r=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var i,o=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(o)?e:(i=0===o.indexOf("//")?o:0===o.indexOf("/")?n+o:r+o.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")})}},function(e,t){!function(){var e=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^\(\s\/]*)\s*/;function _name(){var t,n;return this===Function||this===Function.prototype.constructor?n="Function":this!==Function.prototype&&(n=(t=(""+this).match(e))&&t[1]),n||""}var t=!("name"in Function.prototype&&"name"in function x(){}),n="function"==typeof Object.defineProperty&&function(){var e;try{Object.defineProperty(Function.prototype,"_xyz",{get:function(){return"blah"},configurable:!0}),e="blah"===Function.prototype._xyz,delete Function.prototype._xyz}catch(t){e=!1}return e}(),r="function"==typeof Object.prototype.__defineGetter__&&function(){var e;try{Function.prototype.__defineGetter__("_abc",function(){return"foo"}),e="foo"===Function.prototype._abc,delete Function.prototype._abc}catch(t){e=!1}return e}();Function.prototype._name=_name,t&&(n?Object.defineProperty(Function.prototype,"name",{get:function(){var e=_name.call(this);return this!==Function.prototype&&Object.defineProperty(this,"name",{value:e,configurable:!0}),e},configurable:!0}):r&&Function.prototype.__defineGetter__("name",function(){var e=_name.call(this);return this!==Function.prototype&&this.__defineGetter__("name",function(){return e}),e}))}()},function(e,t,n){"use strict";n(275).polyfill()},function(e,t,n){"use strict";function assign(e,t){if(null==e)throw new TypeError("Cannot convert first argument to object");for(var n=Object(e),r=1;r<arguments.length;r++){var i=arguments[r];if(null!=i)for(var o=Object.keys(Object(i)),a=0,s=o.length;a<s;a++){var l=o[a],u=Object.getOwnPropertyDescriptor(i,l);void 0!==u&&u.enumerable&&(n[l]=i[l])}}return n}e.exports={assign:assign,polyfill:function polyfill(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:assign})}}},function(e,t,n){"use strict";e.exports=n(277).polyfill()},function(e,t,n){(function(t,n){
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.6+9869a4bc
 */var r;r=function(){"use strict";function isFunction(e){return"function"==typeof e}var e=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},r=0,i=void 0,o=void 0,a=function asap(e,t){h[r]=e,h[r+1]=t,2===(r+=2)&&(o?o(flush):f())},s="undefined"!=typeof window?window:void 0,l=s||{},u=l.MutationObserver||l.WebKitMutationObserver,c="undefined"==typeof self&&void 0!==t&&"[object process]"==={}.toString.call(t),p="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function useSetTimeout(){var e=setTimeout;return function(){return e(flush,1)}}var h=new Array(1e3);function flush(){for(var e=0;e<r;e+=2){(0,h[e])(h[e+1]),h[e]=void 0,h[e+1]=void 0}r=0}var f=void 0;function then(e,t){var n=this,r=new this.constructor(noop);void 0===r[d]&&makePromise(r);var i=n._state;if(i){var o=arguments[i-1];a(function(){return invokeCallback(i,r,o,n._result)})}else subscribe(n,r,e,t);return r}function resolve$1(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(noop);return resolve(t,e),t}f=c?function useNextTick(){return function(){return t.nextTick(flush)}}():u?function useMutationObserver(){var e=0,t=new u(flush),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}():p?function useMessageChannel(){var e=new MessageChannel;return e.port1.onmessage=flush,function(){return e.port2.postMessage(0)}}():void 0===s?function attemptVertx(){try{var e=Function("return this")().require("vertx");return void 0!==(i=e.runOnLoop||e.runOnContext)?function(){i(flush)}:useSetTimeout()}catch(e){return useSetTimeout()}}():useSetTimeout();var d=Math.random().toString(36).substring(2);function noop(){}var g=void 0,m=1,y=2,v={error:null};function getThen(e){try{return e.then}catch(e){return v.error=e,v}}function tryThen(e,t,n,r){try{e.call(t,n,r)}catch(e){return e}}function handleForeignThenable(e,t,n){a(function(e){var r=!1,i=tryThen(n,t,function(n){r||(r=!0,t!==n?resolve(e,n):fulfill(e,n))},function(t){r||(r=!0,reject(e,t))},e._label);!r&&i&&(r=!0,reject(e,i))},e)}function handleOwnThenable(e,t){t._state===m?fulfill(e,t._result):t._state===y?reject(e,t._result):subscribe(t,void 0,function(t){return resolve(e,t)},function(t){return reject(e,t)})}function handleMaybeThenable(e,t,n){t.constructor===e.constructor&&n===then&&t.constructor.resolve===resolve$1?handleOwnThenable(e,t):n===v?(reject(e,v.error),v.error=null):void 0===n?fulfill(e,t):isFunction(n)?handleForeignThenable(e,t,n):fulfill(e,t)}function resolve(e,t){var n,r;e===t?reject(e,new TypeError("You cannot resolve a promise with itself")):(r=typeof(n=t),null===n||"object"!==r&&"function"!==r?fulfill(e,t):handleMaybeThenable(e,t,getThen(t)))}function publishRejection(e){e._onerror&&e._onerror(e._result),publish(e)}function fulfill(e,t){e._state===g&&(e._result=t,e._state=m,0!==e._subscribers.length&&a(publish,e))}function reject(e,t){e._state===g&&(e._state=y,e._result=t,a(publishRejection,e))}function subscribe(e,t,n,r){var i=e._subscribers,o=i.length;e._onerror=null,i[o]=t,i[o+m]=n,i[o+y]=r,0===o&&e._state&&a(publish,e)}function publish(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=void 0,i=void 0,o=e._result,a=0;a<t.length;a+=3)r=t[a],i=t[a+n],r?invokeCallback(n,r,i,o):i(o);e._subscribers.length=0}}function tryCatch(e,t){try{return e(t)}catch(e){return v.error=e,v}}function invokeCallback(e,t,n,r){var i=isFunction(n),o=void 0,a=void 0,s=void 0,l=void 0;if(i){if((o=tryCatch(n,r))===v?(l=!0,a=o.error,o.error=null):s=!0,t===o)return void reject(t,new TypeError("A promises callback cannot return that same promise."))}else o=r,s=!0;t._state!==g||(i&&s?resolve(t,o):l?reject(t,a):e===m?fulfill(t,o):e===y&&reject(t,o))}function initializePromise(e,t){try{t(function resolvePromise(t){resolve(e,t)},function rejectPromise(t){reject(e,t)})}catch(t){reject(e,t)}}var _=0;function makePromise(e){e[d]=_++,e._state=void 0,e._result=void 0,e._subscribers=[]}var b=function(){function Enumerator(t,n){this._instanceConstructor=t,this.promise=new t(noop),this.promise[d]||makePromise(this.promise),e(n)?(this.length=n.length,this._remaining=n.length,this._result=new Array(this.length),0===this.length?fulfill(this.promise,this._result):(this.length=this.length||0,this._enumerate(n),0===this._remaining&&fulfill(this.promise,this._result))):reject(this.promise,new Error("Array Methods must be provided an Array"))}return Enumerator.prototype._enumerate=function _enumerate(e){for(var t=0;this._state===g&&t<e.length;t++)this._eachEntry(e[t],t)},Enumerator.prototype._eachEntry=function _eachEntry(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===resolve$1){var i=getThen(e);if(i===then&&e._state!==g)this._settledAt(e._state,t,e._result);else if("function"!=typeof i)this._remaining--,this._result[t]=e;else if(n===x){var o=new n(noop);handleMaybeThenable(o,e,i),this._willSettleAt(o,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(r(e),t)},Enumerator.prototype._settledAt=function _settledAt(e,t,n){var r=this.promise;r._state===g&&(this._remaining--,e===y?reject(r,n):this._result[t]=n),0===this._remaining&&fulfill(r,this._result)},Enumerator.prototype._willSettleAt=function _willSettleAt(e,t){var n=this;subscribe(e,void 0,function(e){return n._settledAt(m,t,e)},function(e){return n._settledAt(y,t,e)})},Enumerator}();function needsResolver(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function needsNew(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var x=function(){function Promise(e){this[d]=_++,this._result=this._state=void 0,this._subscribers=[],noop!==e&&("function"!=typeof e&&needsResolver(),this instanceof Promise?initializePromise(this,e):needsNew())}return Promise.prototype.catch=function _catch(e){return this.then(null,e)},Promise.prototype.finally=function _finally(e){var t=this.constructor;return isFunction(e)?this.then(function(n){return t.resolve(e()).then(function(){return n})},function(n){return t.resolve(e()).then(function(){throw n})}):this.then(e,e)},Promise}();return x.prototype.then=then,x.all=function all(e){return new b(this,e).promise},x.race=function race(t){var n=this;return e(t)?new n(function(e,r){for(var i=t.length,o=0;o<i;o++)n.resolve(t[o]).then(e,r)}):new n(function(e,t){return t(new TypeError("You must pass an array to race."))})},x.resolve=resolve$1,x.reject=function reject$1(e){var t=new this(noop);return reject(t,e),t},x._setScheduler=function setScheduler(e){o=e},x._setAsap=function setAsap(e){a=e},x._asap=a,x.polyfill=function polyfill(){var e=void 0;if(void 0!==n)e=n;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var r=null;try{r=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===r&&!t.cast)return}e.Promise=x},x.Promise=x,x},e.exports=r()}).call(this,n(66),n(31))},function(e,t,n){e.exports=n(161)("native-function-to-string",Function.toString)},function(e,t,n){"use strict";var r=n(110),i=n(282),o=n(199),a=n(114),s=n(198),l=Object.assign;e.exports=!l||n(60)(function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=l({},e)[n]||Object.keys(l({},t)).join("")!=r})?function assign(e,t){for(var n=a(e),l=arguments.length,u=1,c=i.f,p=o.f;l>u;)for(var h,f=s(arguments[u++]),d=c?r(f).concat(c(f)):r(f),g=d.length,m=0;g>m;)p.call(f,h=d[m++])&&(n[h]=f[h]);return n}:l},function(e,t,n){var r=n(111),i=n(112),o=n(281);e.exports=function(e){return function(t,n,a){var s,l=r(t),u=i(l.length),c=o(a,u);if(e&&n!=n){for(;u>c;)if((s=l[c++])!=s)return!0}else for(;u>c;c++)if((e||c in l)&&l[c]===n)return e||c||0;return!e&&-1}}},function(e,t,n){var r=n(113),i=Math.max,o=Math.min;e.exports=function(e,t){return(e=r(e))<0?i(e+t,0):o(e,t)}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=function getDynamicStyles(e){var t=null;for(var n in e){var i=e[n],o=void 0===i?"undefined":r(i);if("function"===o)t||(t={}),t[n]=i;else if("object"===o&&null!==i&&!Array.isArray(i)){var a=getDynamicStyles(i);a&&(t||(t={}),t[n]=a)}}return t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),i=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n(72));function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function SheetsManager(){_classCallCheck(this,SheetsManager),this.sheets=[],this.refs=[],this.keys=[]}return r(SheetsManager,[{key:"get",value:function get(e){var t=this.keys.indexOf(e);return this.sheets[t]}},{key:"add",value:function add(e,t){var n=this.sheets,r=this.refs,i=this.keys,o=n.indexOf(t);return-1!==o?o:(n.push(t),r.push(0),i.push(e),n.length-1)}},{key:"manage",value:function manage(e){var t=this.keys.indexOf(e),n=this.sheets[t];return 0===this.refs[t]&&n.attach(),this.refs[t]++,this.keys[t]||this.keys.splice(t,0,e),n}},{key:"unmanage",value:function unmanage(e){var t=this.keys.indexOf(e);-1!==t?this.refs[t]>0&&(this.refs[t]--,0===this.refs[t]&&this.sheets[t].detach()):(0,i.default)(!1,"SheetsManager: can't find sheet to unmanage")}},{key:"size",get:function get(){return this.keys.length}}]),SheetsManager}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=function cloneStyle(e){if(null==e)return e;var t=void 0===e?"undefined":r(e);if("string"===t||"number"===t||"function"===t)return e;if(o(e))return e.map(cloneStyle);if((0,i.default)(e))return e;var n={};for(var a in e){var s=e[a];"object"!==(void 0===s?"undefined":r(s))?n[a]=s:n[a]=cloneStyle(s)}return n};var i=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n(201));var o=Array.isArray},function(e,t,n){"use strict";n.r(t),function(e,r){var i,o=n(238);i="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:r;var a=Object(o.a)(i);t.default=a}.call(this,n(31),n(287)(e))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});e.CSS;t.default=function(e){return e}}).call(this,n(31))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n="2f1acc6c3a606b082e5eef5e54414ffb";null==e[n]&&(e[n]=0),t.default=e[n]++}).call(this,n(31))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),a=_interopRequireDefault(n(291)),s=_interopRequireDefault(n(204)),l=_interopRequireDefault(n(292)),u=_interopRequireDefault(n(293)),c=_interopRequireDefault(n(299)),p=_interopRequireDefault(n(300)),h=_interopRequireDefault(n(166)),f=_interopRequireDefault(n(90)),d=_interopRequireDefault(n(203)),g=_interopRequireDefault(n(116)),m=_interopRequireDefault(n(301)),y=_interopRequireDefault(n(302));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var v=u.default.concat([c.default,p.default]),_=0,b=function(){function Jss(e){_classCallCheck(this,Jss),this.id=_++,this.version="9.8.7",this.plugins=new l.default,this.options={createGenerateClassName:d.default,Renderer:a.default?m.default:y.default,plugins:[]},this.generateClassName=(0,d.default)(),this.use.apply(this,v),this.setup(e)}return o(Jss,[{key:"setup",value:function setup(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.createGenerateClassName&&(this.options.createGenerateClassName=e.createGenerateClassName,this.generateClassName=e.createGenerateClassName()),null!=e.insertionPoint&&(this.options.insertionPoint=e.insertionPoint),(e.virtual||e.Renderer)&&(this.options.Renderer=e.Renderer||(e.virtual?y.default:m.default)),e.plugins&&this.use.apply(this,e.plugins),this}},{key:"createStyleSheet",value:function createStyleSheet(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.index;"number"!=typeof n&&(n=0===h.default.index?0:h.default.index+1);var r=new s.default(e,i({},t,{jss:this,generateClassName:t.generateClassName||this.generateClassName,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:n}));return this.plugins.onProcessSheet(r),r}},{key:"removeStyleSheet",value:function removeStyleSheet(e){return e.detach(),h.default.remove(e),this}},{key:"createRule",value:function createRule(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};"object"===(void 0===e?"undefined":r(e))&&(n=t,t=e,e=void 0);var i=n;i.jss=this,i.Renderer=this.options.Renderer,i.generateClassName||(i.generateClassName=this.generateClassName),i.classes||(i.classes={});var o=(0,g.default)(e,t,i);return!i.selector&&o instanceof f.default&&(o.selector="."+i.generateClassName(o)),this.plugins.onProcessRule(o),o}},{key:"use",value:function use(){for(var e=this,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach(function(t){-1===e.options.plugins.indexOf(t)&&(e.options.plugins.push(t),e.plugins.use(t))}),this}}]),Jss}();t.default=b},function(e,t,n){"use strict";n.r(t),n.d(t,"isBrowser",function(){return i});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i="object"===("undefined"==typeof window?"undefined":r(window))&&"object"===("undefined"==typeof document?"undefined":r(document))&&9===document.nodeType;t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),i=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n(72));function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function PluginsRegistry(){_classCallCheck(this,PluginsRegistry),this.hooks={onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}}return r(PluginsRegistry,[{key:"onCreateRule",value:function onCreateRule(e,t,n){for(var r=0;r<this.hooks.onCreateRule.length;r++){var i=this.hooks.onCreateRule[r](e,t,n);if(i)return i}return null}},{key:"onProcessRule",value:function onProcessRule(e){if(!e.isProcessed){for(var t=e.options.sheet,n=0;n<this.hooks.onProcessRule.length;n++)this.hooks.onProcessRule[n](e,t);e.style&&this.onProcessStyle(e.style,e,t),e.isProcessed=!0}}},{key:"onProcessStyle",value:function onProcessStyle(e,t,n){for(var r=e,i=0;i<this.hooks.onProcessStyle.length;i++)r=this.hooks.onProcessStyle[i](r,t,n),t.style=r}},{key:"onProcessSheet",value:function onProcessSheet(e){for(var t=0;t<this.hooks.onProcessSheet.length;t++)this.hooks.onProcessSheet[t](e)}},{key:"onUpdate",value:function onUpdate(e,t,n){for(var r=0;r<this.hooks.onUpdate.length;r++)this.hooks.onUpdate[r](e,t,n)}},{key:"onChangeValue",value:function onChangeValue(e,t,n){for(var r=e,i=0;i<this.hooks.onChangeValue.length;i++)r=this.hooks.onChangeValue[i](r,t,n);return r}},{key:"use",value:function use(e){for(var t in e)this.hooks[t]?this.hooks[t].push(e[t]):(0,i.default)(!1,'[JSS] Unknown hook "%s".',t)}}]),PluginsRegistry}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=_interopRequireDefault(n(294)),i=_interopRequireDefault(n(295)),o=_interopRequireDefault(n(296)),a=_interopRequireDefault(n(297)),s=_interopRequireDefault(n(298));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var l={"@charset":r.default,"@import":r.default,"@namespace":r.default,"@keyframes":i.default,"@media":o.default,"@supports":o.default,"@font-face":a.default,"@viewport":s.default,"@-ms-viewport":s.default},u=Object.keys(l).map(function(e){var t=new RegExp("^"+e),n=l[e];return{onCreateRule:function onCreateRule(e,r,i){return t.test(e)?new n(e,r,i):null}}});t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function SimpleRule(e,t,n){_classCallCheck(this,SimpleRule),this.type="simple",this.isProcessed=!1,this.key=e,this.value=t,this.options=n}return r(SimpleRule,[{key:"toString",value:function toString(e){if(Array.isArray(this.value)){for(var t="",n=0;n<this.value.length;n++)t+=this.key+" "+this.value[n]+";",this.value[n+1]&&(t+="\n");return t}return this.key+" "+this.value+";"}}]),SimpleRule}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),o=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n(102));function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function KeyframesRule(e,t,n){for(var i in _classCallCheck(this,KeyframesRule),this.type="keyframes",this.isProcessed=!1,this.key=e,this.options=n,this.rules=new o.default(r({},n,{parent:this})),t)this.rules.add(i,t[i],r({},this.options,{parent:this,selector:i}));this.rules.process()}return i(KeyframesRule,[{key:"toString",value:function toString(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{indent:1},t=this.rules.toString(e);return t&&(t+="\n"),this.key+" {\n"+t+"}"}}]),KeyframesRule}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),o=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n(102));function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function ConditionalRule(e,t,n){for(var i in _classCallCheck(this,ConditionalRule),this.type="conditional",this.isProcessed=!1,this.key=e,this.options=n,this.rules=new o.default(r({},n,{parent:this})),t)this.rules.add(i,t[i]);this.rules.process()}return i(ConditionalRule,[{key:"getRule",value:function getRule(e){return this.rules.get(e)}},{key:"indexOf",value:function indexOf(e){return this.rules.indexOf(e)}},{key:"addRule",value:function addRule(e,t,n){var r=this.rules.add(e,t,n);return this.options.jss.plugins.onProcessRule(r),r}},{key:"toString",value:function toString(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{indent:1},t=this.rules.toString(e);return t?this.key+" {\n"+t+"\n}":""}}]),ConditionalRule}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),i=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n(165));function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function FontFaceRule(e,t,n){_classCallCheck(this,FontFaceRule),this.type="font-face",this.isProcessed=!1,this.key=e,this.style=t,this.options=n}return r(FontFaceRule,[{key:"toString",value:function toString(e){if(Array.isArray(this.style)){for(var t="",n=0;n<this.style.length;n++)t+=(0,i.default)(this.key,this.style[n]),this.style[n+1]&&(t+="\n");return t}return(0,i.default)(this.key,this.style,e)}}]),FontFaceRule}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),i=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n(165));function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function ViewportRule(e,t,n){_classCallCheck(this,ViewportRule),this.type="viewport",this.isProcessed=!1,this.key=e,this.style=t,this.options=n}return r(ViewportRule,[{key:"toString",value:function toString(e){return(0,i.default)(this.key,this.style,e)}}]),ViewportRule}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=_interopRequireDefault(n(90)),i=_interopRequireDefault(n(116)),o=_interopRequireDefault(n(201));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}t.default={onCreateRule:function onCreateRule(e,t,n){if(!(0,o.default)(t))return null;var r=t,a=(0,i.default)(e,{},n);return r.subscribe(function(e){for(var t in e)a.prop(t,e[t])}),a},onProcessRule:function onProcessRule(e){if(e instanceof r.default){var t=e,n=t.style,i=function _loop(e){var r=n[e];if(!(0,o.default)(r))return"continue";delete n[e],r.subscribe({next:function next(n){t.prop(e,n)}})};for(var a in n)i(a)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=_interopRequireDefault(n(102)),i=_interopRequireDefault(n(90)),o=_interopRequireDefault(n(116));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var a=Date.now(),s="fnValues"+a,l="fnStyle"+ ++a;t.default={onCreateRule:function onCreateRule(e,t,n){if("function"!=typeof t)return null;var r=(0,o.default)(e,{},n);return r[l]=t,r},onProcessStyle:function onProcessStyle(e,t){var n={};for(var r in e){var i=e[r];"function"==typeof i&&(delete e[r],n[r]=i)}return(t=t)[s]=n,e},onUpdate:function onUpdate(e,t){if(t.rules instanceof r.default)t.rules.update(e);else if(t instanceof i.default){if((t=t)[s])for(var n in t[s])t.prop(n,t[s][n](e));var o=(t=t)[l];if(o){var a=o(e);for(var u in a)t.prop(u,a[u])}}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),i=_interopRequireDefault(n(72)),o=_interopRequireDefault(n(166)),a=_interopRequireDefault(n(90)),s=_interopRequireDefault(n(115));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var l=function memoize(e){var t=void 0;return function(){return t||(t=e()),t}};function getPropertyValue(e,t){try{return e.style.getPropertyValue(t)}catch(e){return""}}function setProperty(e,t,n){try{var r=n;if(Array.isArray(n)&&(r=(0,s.default)(n,!0),"!important"===n[n.length-1]))return e.style.setProperty(t,r,"important"),!0;e.style.setProperty(t,r)}catch(e){return!1}return!0}function removeProperty(e,t){try{e.style.removeProperty(t)}catch(e){(0,i.default)(!1,'[JSS] DOMException "%s" was thrown. Tried to remove property "%s".',e.message,t)}}var u,c=1,p=7,h=(u=function extractKey(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.substr(t,e.indexOf("{")-1)},function(e){if(e.type===c)return e.selectorText;if(e.type===p){var t=e.name;if(t)return"@keyframes "+t;var n=e.cssText;return"@"+u(n,n.indexOf("keyframes"))}return u(e.cssText)});function setSelector(e,t){return e.selectorText=t,e.selectorText===t}var f,d,g=l(function(){return document.head||document.getElementsByTagName("head")[0]}),m=(f=void 0,d=!1,function(e){var t={};f||(f=document.createElement("style"));for(var n=0;n<e.length;n++){var r=e[n];if(r instanceof a.default){var i=r.selector;if(i&&-1!==i.indexOf("\\")){d||(g().appendChild(f),d=!0),f.textContent=i+" {}";var o=f.sheet;if(o){var s=o.cssRules;s&&(t[s[0].selectorText]=r.key)}}}}return d&&(g().removeChild(f),d=!1),t});function findHigherSheet(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.attached&&r.options.index>t.index&&r.options.insertionPoint===t.insertionPoint)return r}return null}function findHighestSheet(e,t){for(var n=e.length-1;n>=0;n--){var r=e[n];if(r.attached&&r.options.insertionPoint===t.insertionPoint)return r}return null}function findCommentNode(e){for(var t=g(),n=0;n<t.childNodes.length;n++){var r=t.childNodes[n];if(8===r.nodeType&&r.nodeValue.trim()===e)return r}return null}function findPrevNode(e){var t=o.default.registry;if(t.length>0){var n=findHigherSheet(t,e);if(n)return n.renderer.element;if(n=findHighestSheet(t,e))return n.renderer.element.nextElementSibling}var r=e.insertionPoint;if(r&&"string"==typeof r){var a=findCommentNode(r);if(a)return a.nextSibling;(0,i.default)("jss"===r,'[JSS] Insertion point "%s" not found.',r)}return null}function insertStyle(e,t){var n=t.insertionPoint,r=findPrevNode(t);if(r){var o=r.parentNode;o&&o.insertBefore(e,r)}else if(n&&"number"==typeof n.nodeType){var a=n,s=a.parentNode;s?s.insertBefore(e,a.nextSibling):(0,i.default)(!1,"[JSS] Insertion point is not in the DOM.")}else g().insertBefore(e,r)}var y=l(function(){var e=document.querySelector('meta[property="csp-nonce"]');return e?e.getAttribute("content"):null}),v=function(){function DomRenderer(e){_classCallCheck(this,DomRenderer),this.getPropertyValue=getPropertyValue,this.setProperty=setProperty,this.removeProperty=removeProperty,this.setSelector=setSelector,this.getKey=h,this.getUnescapedKeysMap=m,this.hasInsertedRules=!1,e&&o.default.add(e),this.sheet=e;var t=this.sheet?this.sheet.options:{},n=t.media,r=t.meta,i=t.element;this.element=i||document.createElement("style"),this.element.setAttribute("data-jss",""),n&&this.element.setAttribute("media",n),r&&this.element.setAttribute("data-meta",r);var a=y();a&&this.element.setAttribute("nonce",a)}return r(DomRenderer,[{key:"attach",value:function attach(){!this.element.parentNode&&this.sheet&&(this.hasInsertedRules&&(this.deploy(),this.hasInsertedRules=!1),insertStyle(this.element,this.sheet.options))}},{key:"detach",value:function detach(){this.element.parentNode.removeChild(this.element)}},{key:"deploy",value:function deploy(){this.sheet&&(this.element.textContent="\n"+this.sheet.toString()+"\n")}},{key:"insertRule",value:function insertRule(e,t){var n=this.element.sheet,r=n.cssRules,o=e.toString();if(t||(t=r.length),!o)return!1;try{n.insertRule(o,t)}catch(t){return(0,i.default)(!1,"[JSS] Can not insert an unsupported rule \n\r%s",e),!1}return this.hasInsertedRules=!0,r[t]}},{key:"deleteRule",value:function deleteRule(e){var t=this.element.sheet,n=this.indexOf(e);return-1!==n&&(t.deleteRule(n),!0)}},{key:"indexOf",value:function indexOf(e){for(var t=this.element.sheet.cssRules,n=0;n<t.length;n++)if(e===t[n])return n;return-1}},{key:"replaceRule",value:function replaceRule(e,t){var n=this.indexOf(e),r=this.insertRule(t,n);return this.element.sheet.deleteRule(n),r}},{key:"getRules",value:function getRules(){return this.element.sheet.cssRules}}]),DomRenderer}();t.default=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function VirtualRenderer(){_classCallCheck(this,VirtualRenderer)}return r(VirtualRenderer,[{key:"setProperty",value:function setProperty(){return!0}},{key:"getPropertyValue",value:function getPropertyValue(){return""}},{key:"removeProperty",value:function removeProperty(){}},{key:"setSelector",value:function setSelector(){return!0}},{key:"getKey",value:function getKey(){return""}},{key:"attach",value:function attach(){}},{key:"detach",value:function detach(){}},{key:"deploy",value:function deploy(){}},{key:"insertRule",value:function insertRule(){return!1}},{key:"deleteRule",value:function deleteRule(){return!0}},{key:"replaceRule",value:function replaceRule(){return!1}},{key:"getRules",value:function getRules(){}},{key:"indexOf",value:function indexOf(){return-1}}]),VirtualRenderer}();t.default=i},function(e,t){e.exports={azimuth:"center","border-collapse":"separate","border-spacing":"0","caption-side":"top","caret-color":"auto",color:"initial",cursor:"auto","empty-cells":"show","font-family":"initial","font-feature-settings":"normal","font-kerning":"auto","font-language-override":"normal","font-size":"medium","font-size-adjust":"none","font-stretch":"normal","font-style":"normal","font-synthesis":"weight style","font-variant":"normal","font-variant-alternates":"normal","font-variant-caps":"normal","font-variant-east-asian":"normal","font-variant-ligatures":"normal","font-variant-numeric":"normal","font-variant-position":"normal","font-weight":"normal",hyphens:"manual","image-orientation":"0deg","image-rendering":"auto","image-resolution":"1dppx","letter-spacing":"normal","line-height":"normal","list-style-image":"none","list-style-position":"outside","list-style-type":"disc","object-position":"50% 50%",orphans:"2","overflow-wrap":"normal","pointer-events":"auto",quotes:"initial","ruby-align":"space-around","ruby-merge":"separate","ruby-position":"over","tab-size":"8","text-align":"initial","text-align-last":"auto","text-combine-upright":"none","text-indent":"0","text-justify":"auto","text-orientation":"mixed","text-rendering":"auto","text-shadow":"none","text-transform":"none","text-underline-position":"auto",visibility:"visible","white-space":"normal",widows:"2","word-break":"normal","word-spacing":"normal","word-wrap":"normal","writing-mode":"horizontal-tb","-webkit-appearance":"none","-moz-appearance":"none","-ms-appearance":"none",appearance:"none"}},function(e,t){e.exports={"align-content":"stretch","align-items":"stretch","align-self":"auto","animation-delay":"0s","animation-direction":"normal","animation-duration":"0s","animation-fill-mode":"none","animation-iteration-count":"1","animation-name":"none","animation-play-state":"running","animation-timing-function":"ease",azimuth:"center","backface-visibility":"visible","background-attachment":"scroll","background-blend-mode":"normal","background-clip":"border-box","background-color":"transparent","background-image":"none","background-origin":"padding-box","background-position":"0% 0%","background-repeat":"repeat","background-size":"auto auto","block-size":"auto","border-block-end-color":"currentcolor","border-block-end-style":"none","border-block-end-width":"medium","border-block-start-color":"currentcolor","border-block-start-style":"none","border-block-start-width":"medium","border-bottom-color":"currentcolor","border-bottom-left-radius":"0","border-bottom-right-radius":"0","border-bottom-style":"none","border-bottom-width":"medium","border-collapse":"separate","border-image-outset":"0s","border-image-repeat":"stretch","border-image-slice":"100%","border-image-source":"none","border-image-width":"1","border-inline-end-color":"currentcolor","border-inline-end-style":"none","border-inline-end-width":"medium","border-inline-start-color":"currentcolor","border-inline-start-style":"none","border-inline-start-width":"medium","border-left-color":"currentcolor","border-left-style":"none","border-left-width":"medium","border-right-color":"currentcolor","border-right-style":"none","border-right-width":"medium","border-spacing":"0","border-top-color":"currentcolor","border-top-left-radius":"0","border-top-right-radius":"0","border-top-style":"none","border-top-width":"medium",bottom:"auto","box-decoration-break":"slice","box-shadow":"none","box-sizing":"content-box","break-after":"auto","break-before":"auto","break-inside":"auto","caption-side":"top","caret-color":"auto",clear:"none",clip:"auto","clip-path":"none",color:"initial","column-count":"auto","column-fill":"balance","column-gap":"normal","column-rule-color":"currentcolor","column-rule-style":"none","column-rule-width":"medium","column-span":"none","column-width":"auto",content:"normal","counter-increment":"none","counter-reset":"none",cursor:"auto",display:"inline","empty-cells":"show",filter:"none","flex-basis":"auto","flex-direction":"row","flex-grow":"0","flex-shrink":"1","flex-wrap":"nowrap",float:"none","font-family":"initial","font-feature-settings":"normal","font-kerning":"auto","font-language-override":"normal","font-size":"medium","font-size-adjust":"none","font-stretch":"normal","font-style":"normal","font-synthesis":"weight style","font-variant":"normal","font-variant-alternates":"normal","font-variant-caps":"normal","font-variant-east-asian":"normal","font-variant-ligatures":"normal","font-variant-numeric":"normal","font-variant-position":"normal","font-weight":"normal","grid-auto-columns":"auto","grid-auto-flow":"row","grid-auto-rows":"auto","grid-column-end":"auto","grid-column-gap":"0","grid-column-start":"auto","grid-row-end":"auto","grid-row-gap":"0","grid-row-start":"auto","grid-template-areas":"none","grid-template-columns":"none","grid-template-rows":"none",height:"auto",hyphens:"manual","image-orientation":"0deg","image-rendering":"auto","image-resolution":"1dppx","ime-mode":"auto","inline-size":"auto",isolation:"auto","justify-content":"flex-start",left:"auto","letter-spacing":"normal","line-break":"auto","line-height":"normal","list-style-image":"none","list-style-position":"outside","list-style-type":"disc","margin-block-end":"0","margin-block-start":"0","margin-bottom":"0","margin-inline-end":"0","margin-inline-start":"0","margin-left":"0","margin-right":"0","margin-top":"0","mask-clip":"border-box","mask-composite":"add","mask-image":"none","mask-mode":"match-source","mask-origin":"border-box","mask-position":"0% 0%","mask-repeat":"repeat","mask-size":"auto","mask-type":"luminance","max-height":"none","max-width":"none","min-block-size":"0","min-height":"0","min-inline-size":"0","min-width":"0","mix-blend-mode":"normal","object-fit":"fill","object-position":"50% 50%","offset-block-end":"auto","offset-block-start":"auto","offset-inline-end":"auto","offset-inline-start":"auto",opacity:"1.0",order:"0",orphans:"2","outline-color":"initial","outline-offset":"0","outline-style":"none","outline-width":"medium",overflow:"visible","overflow-wrap":"normal","overflow-x":"visible","overflow-y":"visible","padding-block-end":"0","padding-block-start":"0","padding-bottom":"0","padding-inline-end":"0","padding-inline-start":"0","padding-left":"0","padding-right":"0","padding-top":"0","page-break-after":"auto","page-break-before":"auto","page-break-inside":"auto",perspective:"none","perspective-origin":"50% 50%","pointer-events":"auto",position:"static",quotes:"initial",resize:"none",right:"auto","ruby-align":"space-around","ruby-merge":"separate","ruby-position":"over","scroll-behavior":"auto","scroll-snap-coordinate":"none","scroll-snap-destination":"0px 0px","scroll-snap-points-x":"none","scroll-snap-points-y":"none","scroll-snap-type":"none","shape-image-threshold":"0.0","shape-margin":"0","shape-outside":"none","tab-size":"8","table-layout":"auto","text-align":"initial","text-align-last":"auto","text-combine-upright":"none","text-decoration-color":"currentcolor","text-decoration-line":"none","text-decoration-style":"solid","text-emphasis-color":"currentcolor","text-emphasis-position":"over right","text-emphasis-style":"none","text-indent":"0","text-justify":"auto","text-orientation":"mixed","text-overflow":"clip","text-rendering":"auto","text-shadow":"none","text-transform":"none","text-underline-position":"auto",top:"auto","touch-action":"auto",transform:"none","transform-box":"border-box ","transform-origin":"50% 50% 0","transform-style":"flat","transition-delay":"0s","transition-duration":"0s","transition-property":"all","transition-timing-function":"ease","vertical-align":"baseline",visibility:"visible","white-space":"normal",widows:"2",width:"auto","will-change":"auto","word-break":"normal","word-spacing":"normal","word-wrap":"normal","writing-mode":"horizontal-tb","z-index":"auto","-webkit-appearance":"none","-moz-appearance":"none","-ms-appearance":"none",appearance:"none"}},function(e,t,n){"use strict";n.r(t);var r=/[A-Z]/g,i=/^ms-/,o={};function toHyphenLower(e){return"-"+e.toLowerCase()}t.default=function hyphenateStyleName(e){if(o.hasOwnProperty(e))return o[e];var t=e.replace(r,toHyphenLower);return o[e]=i.test(t)?"-"+t:t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={"animation-delay":"ms","animation-duration":"ms","background-position":"px","background-position-x":"px","background-position-y":"px","background-size":"px",border:"px","border-bottom":"px","border-bottom-left-radius":"px","border-bottom-right-radius":"px","border-bottom-width":"px","border-left":"px","border-left-width":"px","border-radius":"px","border-right":"px","border-right-width":"px","border-spacing":"px","border-top":"px","border-top-left-radius":"px","border-top-right-radius":"px","border-top-width":"px","border-width":"px","border-after-width":"px","border-before-width":"px","border-end-width":"px","border-horizontal-spacing":"px","border-start-width":"px","border-vertical-spacing":"px",bottom:"px","box-shadow":"px","column-gap":"px","column-rule":"px","column-rule-width":"px","column-width":"px","flex-basis":"px","font-size":"px","font-size-delta":"px",height:"px",left:"px","letter-spacing":"px","logical-height":"px","logical-width":"px",margin:"px","margin-after":"px","margin-before":"px","margin-bottom":"px","margin-left":"px","margin-right":"px","margin-top":"px","max-height":"px","max-width":"px","margin-end":"px","margin-start":"px","mask-position-x":"px","mask-position-y":"px","mask-size":"px","max-logical-height":"px","max-logical-width":"px","min-height":"px","min-width":"px","min-logical-height":"px","min-logical-width":"px",motion:"px","motion-offset":"px",outline:"px","outline-offset":"px","outline-width":"px",padding:"px","padding-bottom":"px","padding-left":"px","padding-right":"px","padding-top":"px","padding-after":"px","padding-before":"px","padding-end":"px","padding-start":"px","perspective-origin-x":"%","perspective-origin-y":"%",perspective:"px",right:"px","shape-margin":"px",size:"px","text-indent":"px","text-stroke":"px","text-stroke-width":"px",top:"px","transform-origin":"%","transform-origin-x":"%","transform-origin-y":"%","transform-origin-z":"%","transition-delay":"ms","transition-duration":"ms","vertical-align":"px",width:"px","word-spacing":"px","box-shadow-x":"px","box-shadow-y":"px","box-shadow-blur":"px","box-shadow-spread":"px","font-line-height":"px","text-shadow-x":"px","text-shadow-y":"px","text-shadow-blur":"px"}},function(n,r,i){"use strict";
/** @license React v16.8.4
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o=i(1),a=i(205),s=i(309);function ba(e,t,n,r,i,o,a,s){if(!e){if(e=void 0,void 0===t)e=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,i,o,a,s],u=0;(e=Error(t.replace(/%s/g,function(){return l[u++]}))).name="Invariant Violation"}throw e.framesToPop=1,e}}function x(e){for(var t=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);ba(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}function ca(e,t,n,r,i,o,a,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(e){this.onError(e)}}o||x("227");var u=!1,_=null,w=!1,P=null,T={onError:function(e){u=!0,_=e}};function ja(e,t,n,r,i,o,a,s,l){u=!1,_=null,ca.apply(T,arguments)}function ka(e,t,n,r,i,o,a,s,l){if(ja.apply(this,arguments),u){if(u){var c=_;u=!1,_=null}else x("198"),c=void 0;w||(w=!0,P=c)}}var O=null,I={};function na(){if(O)for(var e in I){var t=I[e],n=O.indexOf(e);if(-1<n||x("96",e),!j[n])for(var r in t.extractEvents||x("97",e),j[n]=t,n=t.eventTypes){var i=void 0,o=n[r],a=t,s=r;D.hasOwnProperty(s)&&x("99",s),D[s]=o;var l=o.phasedRegistrationNames;if(l){for(i in l)l.hasOwnProperty(i)&&qa(l[i],a,s);i=!0}else o.registrationName?(qa(o.registrationName,a,s),i=!0):i=!1;i||x("98",r,e)}}}function qa(e,t,n){N[e]&&x("100",e),N[e]=t,B[e]=t.eventTypes[n].dependencies}var j=[],D={},N={},B={},z=null,U=null,V=null;function wa(e,t,n){var r=e.type||"unknown-event";e.currentTarget=V(n),ka(r,t,void 0,e),e.currentTarget=null}function xa(e,t){return null==t&&x("30"),null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function ya(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var W=null;function Aa(e){if(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t))for(var r=0;r<t.length&&!e.isPropagationStopped();r++)wa(e,t[r],n[r]);else t&&wa(e,t,n);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}var q={injectEventPluginOrder:function(e){O&&x("101"),O=Array.prototype.slice.call(e),na()},injectEventPluginsByName:function(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var r=e[t];I.hasOwnProperty(t)&&I[t]===r||(I[t]&&x("102",t),I[t]=r,n=!0)}n&&na()}};function Ca(e,t){var n=e.stateNode;if(!n)return null;var r=z(n);if(!r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}return e?null:(n&&"function"!=typeof n&&x("231",t,typeof n),n)}function Da(e){if(null!==e&&(W=xa(W,e)),e=W,W=null,e&&(ya(e,Aa),W&&x("95"),w))throw e=P,w=!1,P=null,e}var H=Math.random().toString(36).slice(2),X="__reactInternalInstance$"+H,Z="__reactEventHandlers$"+H;function Ha(e){if(e[X])return e[X];for(;!e[X];){if(!e.parentNode)return null;e=e.parentNode}return 5===(e=e[X]).tag||6===e.tag?e:null}function Ia(e){return!(e=e[X])||5!==e.tag&&6!==e.tag?null:e}function Ja(e){if(5===e.tag||6===e.tag)return e.stateNode;x("33")}function Ka(e){return e[Z]||null}function La(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function Ma(e,t,n){(t=Ca(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=xa(n._dispatchListeners,t),n._dispatchInstances=xa(n._dispatchInstances,e))}function Na(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,n=[];t;)n.push(t),t=La(t);for(t=n.length;0<t--;)Ma(n[t],"captured",e);for(t=0;t<n.length;t++)Ma(n[t],"bubbled",e)}}function Oa(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=Ca(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=xa(n._dispatchListeners,t),n._dispatchInstances=xa(n._dispatchInstances,e))}function Pa(e){e&&e.dispatchConfig.registrationName&&Oa(e._targetInst,null,e)}function Qa(e){ya(e,Na)}var Y=!("undefined"==typeof window||!window.document||!window.document.createElement);function Sa(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Q={animationend:Sa("Animation","AnimationEnd"),animationiteration:Sa("Animation","AnimationIteration"),animationstart:Sa("Animation","AnimationStart"),transitionend:Sa("Transition","TransitionEnd")},$={},ie={};function Wa(e){if($[e])return $[e];if(!Q[e])return e;var t,n=Q[e];for(t in n)if(n.hasOwnProperty(t)&&t in ie)return $[e]=n[t];return e}Y&&(ie=document.createElement("div").style,"AnimationEvent"in window||(delete Q.animationend.animation,delete Q.animationiteration.animation,delete Q.animationstart.animation),"TransitionEvent"in window||delete Q.transitionend.transition);var le=Wa("animationend"),ue=Wa("animationiteration"),pe=Wa("animationstart"),fe=Wa("transitionend"),me="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ye=null,ve=null,_e=null;function eb(){if(_e)return _e;var e,t,n=ve,r=n.length,i="value"in ye?ye.value:ye.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return _e=i.slice(e,1<t?1-t:void 0)}function fb(){return!0}function gb(){return!1}function y(e,t,n,r){for(var i in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(i)&&((t=e[i])?this[i]=t(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?fb:gb,this.isPropagationStopped=gb,this}function ib(e,t,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,e,t,n,r),i}return new this(e,t,n,r)}function jb(e){e instanceof this||x("279"),e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function hb(e){e.eventPool=[],e.getPooled=ib,e.release=jb}a(y.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=fb)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=fb)},persist:function(){this.isPersistent=fb},isPersistent:gb,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=gb,this._dispatchInstances=this._dispatchListeners=null}}),y.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},y.extend=function(e){function b(){}function c(){return t.apply(this,arguments)}var t=this;b.prototype=t.prototype;var n=new b;return a(n,c.prototype),c.prototype=n,c.prototype.constructor=c,c.Interface=a({},t.Interface,e),c.extend=t.extend,hb(c),c},hb(y);var Ae=y.extend({data:null}),Ie=y.extend({data:null}),Re=[9,13,27,32],je=Y&&"CompositionEvent"in window,Fe=null;Y&&"documentMode"in document&&(Fe=document.documentMode);var Be=Y&&"TextEvent"in window&&!Fe,ze=Y&&(!je||Fe&&8<Fe&&11>=Fe),Ge=String.fromCharCode(32),He={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},Qe=!1;function ub(e,t){switch(e){case"keyup":return-1!==Re.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function vb(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var et=!1;function xb(e,t){switch(e){case"compositionend":return vb(t);case"keypress":return 32!==t.which?null:(Qe=!0,Ge);case"textInput":return(e=t.data)===Ge&&Qe?null:e;default:return null}}function yb(e,t){if(et)return"compositionend"===e||!je&&ub(e,t)?(e=eb(),_e=ve=ye=null,et=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ze&&"ko"!==t.locale?null:t.data;default:return null}}var tt={eventTypes:He,extractEvents:function(e,t,n,r){var i=void 0,o=void 0;if(je)e:{switch(e){case"compositionstart":i=He.compositionStart;break e;case"compositionend":i=He.compositionEnd;break e;case"compositionupdate":i=He.compositionUpdate;break e}i=void 0}else et?ub(e,n)&&(i=He.compositionEnd):"keydown"===e&&229===n.keyCode&&(i=He.compositionStart);return i?(ze&&"ko"!==n.locale&&(et||i!==He.compositionStart?i===He.compositionEnd&&et&&(o=eb()):(ve="value"in(ye=r)?ye.value:ye.textContent,et=!0)),i=Ae.getPooled(i,t,n,r),o?i.data=o:null!==(o=vb(n))&&(i.data=o),Qa(i),o=i):o=null,(e=Be?xb(e,n):yb(e,n))?((t=Ie.getPooled(He.beforeInput,t,n,r)).data=e,Qa(t)):t=null,null===o?t:null===t?o:[o,t]}},nt=null,rt=null,it=null;function Db(e){if(e=U(e)){"function"!=typeof nt&&x("280");var t=z(e.stateNode);nt(e.stateNode,e.type,t)}}function Eb(e){rt?it?it.push(e):it=[e]:rt=e}function Fb(){if(rt){var e=rt,t=it;if(it=rt=null,Db(e),t)for(e=0;e<t.length;e++)Db(t[e])}}function Gb(e,t){return e(t)}function Hb(e,t,n){return e(t,n)}function Ib(){}var ot=!1;function Kb(e,t){if(ot)return e(t);ot=!0;try{return Gb(e,t)}finally{ot=!1,(null!==rt||null!==it)&&(Ib(),Fb())}}var at={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mb(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!at[e.type]:"textarea"===t}function Nb(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function Ob(e){if(!Y)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"==typeof t[e]),t}function Pb(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Qb(e){var t=Pb(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Rb(e){e._valueTracker||(e._valueTracker=Qb(e))}function Sb(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Pb(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}var st=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;st.hasOwnProperty("ReactCurrentDispatcher")||(st.ReactCurrentDispatcher={current:null});var lt=/^(.*)[\\\/]/,ut="function"==typeof Symbol&&Symbol.for,ct=ut?Symbol.for("react.element"):60103,pt=ut?Symbol.for("react.portal"):60106,ht=ut?Symbol.for("react.fragment"):60107,ft=ut?Symbol.for("react.strict_mode"):60108,dt=ut?Symbol.for("react.profiler"):60114,gt=ut?Symbol.for("react.provider"):60109,mt=ut?Symbol.for("react.context"):60110,yt=ut?Symbol.for("react.concurrent_mode"):60111,vt=ut?Symbol.for("react.forward_ref"):60112,_t=ut?Symbol.for("react.suspense"):60113,bt=ut?Symbol.for("react.memo"):60115,xt=ut?Symbol.for("react.lazy"):60116,wt="function"==typeof Symbol&&Symbol.iterator;function hc(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=wt&&e[wt]||e["@@iterator"])?e:null}function ic(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case yt:return"ConcurrentMode";case ht:return"Fragment";case pt:return"Portal";case dt:return"Profiler";case ft:return"StrictMode";case _t:return"Suspense"}if("object"==typeof e)switch(e.$$typeof){case mt:return"Context.Consumer";case gt:return"Context.Provider";case vt:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case bt:return ic(e.type);case xt:if(e=1===e._status?e._result:null)return ic(e)}return null}function jc(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break e;default:var r=e._debugOwner,i=e._debugSource,o=ic(e.type);n=null,r&&(n=ic(r.type)),r=o,o="",i?o=" (at "+i.fileName.replace(lt,"")+":"+i.lineNumber+")":n&&(o=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+o}t+=n,e=e.return}while(e);return t}var St=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Et=Object.prototype.hasOwnProperty,Pt={},Ct={};function oc(e){return!!Et.call(Ct,e)||!Et.call(Pt,e)&&(St.test(e)?Ct[e]=!0:(Pt[e]=!0,!1))}function pc(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}function qc(e,t,n,r){if(null==t||pc(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function C(e,t,n,r,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t}var kt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){kt[e]=new C(e,0,!1,e,null)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];kt[t]=new C(t,1,!1,e[1],null)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){kt[e]=new C(e,2,!1,e.toLowerCase(),null)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){kt[e]=new C(e,2,!1,e,null)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){kt[e]=new C(e,3,!1,e.toLowerCase(),null)}),["checked","multiple","muted","selected"].forEach(function(e){kt[e]=new C(e,3,!0,e,null)}),["capture","download"].forEach(function(e){kt[e]=new C(e,4,!1,e,null)}),["cols","rows","size","span"].forEach(function(e){kt[e]=new C(e,6,!1,e,null)}),["rowSpan","start"].forEach(function(e){kt[e]=new C(e,5,!1,e.toLowerCase(),null)});var Tt=/[\-:]([a-z])/g;function sc(e){return e[1].toUpperCase()}function tc(e,t,n,r){var i=kt.hasOwnProperty(t)?kt[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(qc(t,n,i,r)&&(n=null),r||null===i?oc(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}function uc(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function vc(e,t){var n=t.checked;return a({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function wc(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=uc(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function xc(e,t){null!=(t=t.checked)&&tc(e,"checked",t,!1)}function yc(e,t){xc(e,t);var n=uc(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?zc(e,t.type,n):t.hasOwnProperty("defaultValue")&&zc(e,t.type,uc(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Ac(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!e.defaultChecked,e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function zc(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Tt,sc);kt[t]=new C(t,1,!1,e,null)}),"xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Tt,sc);kt[t]=new C(t,1,!1,e,"http://www.w3.org/1999/xlink")}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Tt,sc);kt[t]=new C(t,1,!1,e,"http://www.w3.org/XML/1998/namespace")}),["tabIndex","crossOrigin"].forEach(function(e){kt[e]=new C(e,1,!1,e.toLowerCase(),null)});var At={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function Cc(e,t,n){return(e=y.getPooled(At.change,e,t,n)).type="change",Eb(n),Qa(e),e}var Ot=null,It=null;function Fc(e){Da(e)}function Gc(e){if(Sb(Ja(e)))return e}function Hc(e,t){if("change"===e)return t}var Rt=!1;function Jc(){Ot&&(Ot.detachEvent("onpropertychange",Kc),It=Ot=null)}function Kc(e){"value"===e.propertyName&&Gc(It)&&Kb(Fc,e=Cc(It,e,Nb(e)))}function Lc(e,t,n){"focus"===e?(Jc(),It=n,(Ot=t).attachEvent("onpropertychange",Kc)):"blur"===e&&Jc()}function Mc(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Gc(It)}function Nc(e,t){if("click"===e)return Gc(t)}function Oc(e,t){if("input"===e||"change"===e)return Gc(t)}Y&&(Rt=Ob("input")&&(!document.documentMode||9<document.documentMode));var Lt={eventTypes:At,_isInputEventSupported:Rt,extractEvents:function(e,t,n,r){var i=t?Ja(t):window,o=void 0,a=void 0,s=i.nodeName&&i.nodeName.toLowerCase();if("select"===s||"input"===s&&"file"===i.type?o=Hc:Mb(i)?Rt?o=Oc:(o=Mc,a=Lc):(s=i.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(o=Nc),o&&(o=o(e,t)))return Cc(o,n,r);a&&a(e,i,t),"blur"===e&&(e=i._wrapperState)&&e.controlled&&"number"===i.type&&zc(i,"number",i.value)}},Mt=y.extend({view:null,detail:null}),jt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sc(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=jt[e])&&!!t[e]}function Tc(){return Sc}var Dt=0,Ft=0,Nt=!1,Bt=!1,zt=Mt.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Tc,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=Dt;return Dt=e.screenX,Nt?"mousemove"===e.type?e.screenX-t:0:(Nt=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Ft;return Ft=e.screenY,Bt?"mousemove"===e.type?e.screenY-t:0:(Bt=!0,0)}}),Ut=zt.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Vt={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Gt={eventTypes:Vt,extractEvents:function(e,t,n,r){var i="mouseover"===e||"pointerover"===e,o="mouseout"===e||"pointerout"===e;if(i&&(n.relatedTarget||n.fromElement)||!o&&!i)return null;if(i=r.window===r?r:(i=r.ownerDocument)?i.defaultView||i.parentWindow:window,o?(o=t,t=(t=n.relatedTarget||n.toElement)?Ha(t):null):o=null,o===t)return null;var a=void 0,s=void 0,l=void 0,u=void 0;"mouseout"===e||"mouseover"===e?(a=zt,s=Vt.mouseLeave,l=Vt.mouseEnter,u="mouse"):"pointerout"!==e&&"pointerover"!==e||(a=Ut,s=Vt.pointerLeave,l=Vt.pointerEnter,u="pointer");var c=null==o?i:Ja(o);if(i=null==t?i:Ja(t),(e=a.getPooled(s,o,n,r)).type=u+"leave",e.target=c,e.relatedTarget=i,(n=a.getPooled(l,t,n,r)).type=u+"enter",n.target=i,n.relatedTarget=c,r=t,o&&r)e:{for(i=r,u=0,a=t=o;a;a=La(a))u++;for(a=0,l=i;l;l=La(l))a++;for(;0<u-a;)t=La(t),u--;for(;0<a-u;)i=La(i),a--;for(;u--;){if(t===i||t===i.alternate)break e;t=La(t),i=La(i)}t=null}else t=null;for(i=t,t=[];o&&o!==i&&(null===(u=o.alternate)||u!==i);)t.push(o),o=La(o);for(o=[];r&&r!==i&&(null===(u=r.alternate)||u!==i);)o.push(r),r=La(r);for(r=0;r<t.length;r++)Oa(t[r],"bubbled",e);for(r=o.length;0<r--;)Oa(o[r],"captured",n);return[e,n]}};function bd(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t}var Wt=Object.prototype.hasOwnProperty;function dd(e,t){if(bd(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!Wt.call(t,n[r])||!bd(e[n[r]],t[n[r]]))return!1;return!0}function ed(e){var t=e;if(e.alternate)for(;t.return;)t=t.return;else{if(0!=(2&t.effectTag))return 1;for(;t.return;)if(0!=(2&(t=t.return).effectTag))return 1}return 3===t.tag?2:3}function fd(e){2!==ed(e)&&x("188")}function gd(e){var t=e.alternate;if(!t)return 3===(t=ed(e))&&x("188"),1===t?null:e;for(var n=e,r=t;;){var i=n.return,o=i?i.alternate:null;if(!i||!o)break;if(i.child===o.child){for(var a=i.child;a;){if(a===n)return fd(i),e;if(a===r)return fd(i),t;a=a.sibling}x("188")}if(n.return!==r.return)n=i,r=o;else{a=!1;for(var s=i.child;s;){if(s===n){a=!0,n=i,r=o;break}if(s===r){a=!0,r=i,n=o;break}s=s.sibling}if(!a){for(s=o.child;s;){if(s===n){a=!0,n=o,r=i;break}if(s===r){a=!0,r=o,n=i;break}s=s.sibling}a||x("189")}}n.alternate!==r&&x("190")}return 3!==n.tag&&x("188"),n.stateNode.current===n?e:t}function hd(e){if(!(e=gd(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}var qt=y.extend({animationName:null,elapsedTime:null,pseudoElement:null}),Ht=y.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Xt=Mt.extend({relatedTarget:null});function ld(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var Kt={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yt=Mt.extend({key:function(e){if(e.key){var t=Kt[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=ld(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Zt[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Tc,charCode:function(e){return"keypress"===e.type?ld(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?ld(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Jt=zt.extend({dataTransfer:null}),Qt=Mt.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Tc}),$t=y.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),en=zt.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),tn=[["abort","abort"],[le,"animationEnd"],[ue,"animationIteration"],[pe,"animationStart"],["canplay","canPlay"],["canplaythrough","canPlayThrough"],["drag","drag"],["dragenter","dragEnter"],["dragexit","dragExit"],["dragleave","dragLeave"],["dragover","dragOver"],["durationchange","durationChange"],["emptied","emptied"],["encrypted","encrypted"],["ended","ended"],["error","error"],["gotpointercapture","gotPointerCapture"],["load","load"],["loadeddata","loadedData"],["loadedmetadata","loadedMetadata"],["loadstart","loadStart"],["lostpointercapture","lostPointerCapture"],["mousemove","mouseMove"],["mouseout","mouseOut"],["mouseover","mouseOver"],["playing","playing"],["pointermove","pointerMove"],["pointerout","pointerOut"],["pointerover","pointerOver"],["progress","progress"],["scroll","scroll"],["seeking","seeking"],["stalled","stalled"],["suspend","suspend"],["timeupdate","timeUpdate"],["toggle","toggle"],["touchmove","touchMove"],[fe,"transitionEnd"],["waiting","waiting"],["wheel","wheel"]],nn={},rn={};function wd(e,t){var n=e[0],r="on"+((e=e[1])[0].toUpperCase()+e.slice(1));t={phasedRegistrationNames:{bubbled:r,captured:r+"Capture"},dependencies:[n],isInteractive:t},nn[e]=t,rn[n]=t}[["blur","blur"],["cancel","cancel"],["click","click"],["close","close"],["contextmenu","contextMenu"],["copy","copy"],["cut","cut"],["auxclick","auxClick"],["dblclick","doubleClick"],["dragend","dragEnd"],["dragstart","dragStart"],["drop","drop"],["focus","focus"],["input","input"],["invalid","invalid"],["keydown","keyDown"],["keypress","keyPress"],["keyup","keyUp"],["mousedown","mouseDown"],["mouseup","mouseUp"],["paste","paste"],["pause","pause"],["play","play"],["pointercancel","pointerCancel"],["pointerdown","pointerDown"],["pointerup","pointerUp"],["ratechange","rateChange"],["reset","reset"],["seeked","seeked"],["submit","submit"],["touchcancel","touchCancel"],["touchend","touchEnd"],["touchstart","touchStart"],["volumechange","volumeChange"]].forEach(function(e){wd(e,!0)}),tn.forEach(function(e){wd(e,!1)});var on={eventTypes:nn,isInteractiveTopLevelEventType:function(e){return void 0!==(e=rn[e])&&!0===e.isInteractive},extractEvents:function(e,t,n,r){var i=rn[e];if(!i)return null;switch(e){case"keypress":if(0===ld(n))return null;case"keydown":case"keyup":e=Yt;break;case"blur":case"focus":e=Xt;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=zt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=Jt;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=Qt;break;case le:case ue:case pe:e=qt;break;case fe:e=$t;break;case"scroll":e=Mt;break;case"wheel":e=en;break;case"copy":case"cut":case"paste":e=Ht;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=Ut;break;default:e=y}return Qa(t=e.getPooled(i,t,n,r)),t}},an=on.isInteractiveTopLevelEventType,sn=[];function Ad(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var r;for(r=n;r.return;)r=r.return;if(!(r=3!==r.tag?null:r.stateNode.containerInfo))break;e.ancestors.push(n),n=Ha(r)}while(n);for(n=0;n<e.ancestors.length;n++){t=e.ancestors[n];var i=Nb(e.nativeEvent);r=e.topLevelType;for(var o=e.nativeEvent,a=null,s=0;s<j.length;s++){var l=j[s];l&&(l=l.extractEvents(r,t,o,i))&&(a=xa(a,l))}Da(a)}}var ln=!0;function E(e,t){if(!t)return null;var n=(an(e)?Cd:Dd).bind(null,e);t.addEventListener(e,n,!1)}function Ed(e,t){if(!t)return null;var n=(an(e)?Cd:Dd).bind(null,e);t.addEventListener(e,n,!0)}function Cd(e,t){Hb(Dd,e,t)}function Dd(e,t){if(ln){var n=Nb(t);if(null===(n=Ha(n))||"number"!=typeof n.tag||2===ed(n)||(n=null),sn.length){var r=sn.pop();r.topLevelType=e,r.nativeEvent=t,r.targetInst=n,e=r}else e={topLevelType:e,nativeEvent:t,targetInst:n,ancestors:[]};try{Kb(Ad,e)}finally{e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>sn.length&&sn.push(e)}}}var un={},cn=0,pn="_reactListenersID"+(""+Math.random()).slice(2);function Id(e){return Object.prototype.hasOwnProperty.call(e,pn)||(e[pn]=cn++,un[e[pn]]={}),un[e[pn]]}function Jd(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Kd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ld(e,t){var n,r=Kd(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Kd(r)}}function Md(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Md(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function Nd(){for(var e=window,t=Jd();t instanceof e.HTMLIFrameElement;){try{e=t.contentDocument.defaultView}catch(e){break}t=Jd(e.document)}return t}function Od(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function Pd(){var e=Nd();if(Od(e)){if("selectionStart"in e)var t={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(t=(t=e.ownerDocument)&&t.defaultView||window).getSelection&&t.getSelection();if(n&&0!==n.rangeCount){t=n.anchorNode;var r=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{t.nodeType,i.nodeType}catch(e){t=null;break e}var o=0,a=-1,s=-1,l=0,u=0,c=e,p=null;t:for(;;){for(var h;c!==t||0!==r&&3!==c.nodeType||(a=o+r),c!==i||0!==n&&3!==c.nodeType||(s=o+n),3===c.nodeType&&(o+=c.nodeValue.length),null!==(h=c.firstChild);)p=c,c=h;for(;;){if(c===e)break t;if(p===t&&++l===r&&(a=o),p===i&&++u===n&&(s=o),null!==(h=c.nextSibling))break;p=(c=p).parentNode}c=h}t=-1===a||-1===s?null:{start:a,end:s}}else t=null}t=t||{start:0,end:0}}else t=null;return{focusedElem:e,selectionRange:t}}function Qd(e){var t=Nd(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Md(n.ownerDocument.documentElement,n)){if(null!==r&&Od(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=Ld(n,o);var a=Ld(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var hn=Y&&"documentMode"in document&&11>=document.documentMode,fn={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},dn=null,gn=null,mn=null,yn=!1;function Xd(e,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return yn||null==dn||dn!==Jd(n)?null:("selectionStart"in(n=dn)&&Od(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},mn&&dd(mn,n)?null:(mn=n,(e=y.getPooled(fn.select,gn,e,t)).type="select",e.target=dn,Qa(e),e))}var vn={eventTypes:fn,extractEvents:function(e,t,n,r){var i,o=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;if(!(i=!o)){e:{o=Id(o),i=B.onSelect;for(var a=0;a<i.length;a++){var s=i[a];if(!o.hasOwnProperty(s)||!o[s]){o=!1;break e}}o=!0}i=!o}if(i)return null;switch(o=t?Ja(t):window,e){case"focus":(Mb(o)||"true"===o.contentEditable)&&(dn=o,gn=t,mn=null);break;case"blur":mn=gn=dn=null;break;case"mousedown":yn=!0;break;case"contextmenu":case"mouseup":case"dragend":return yn=!1,Xd(n,r);case"selectionchange":if(hn)break;case"keydown":case"keyup":return Xd(n,r)}return null}};function Zd(e){var t="";return o.Children.forEach(e,function(e){null!=e&&(t+=e)}),t}function $d(e,t){return e=a({children:void 0},t),(t=Zd(t.children))&&(e.children=t),e}function ae(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+uc(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function be(e,t){return null!=t.dangerouslySetInnerHTML&&x("91"),a({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ce(e,t){var n=t.value;null==n&&(n=t.defaultValue,null!=(t=t.children)&&(null!=n&&x("92"),Array.isArray(t)&&(1>=t.length||x("93"),t=t[0]),n=t),null==n&&(n="")),e._wrapperState={initialValue:uc(n)}}function de(e,t){var n=uc(t.value),r=uc(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ee(e){var t=e.textContent;t===e._wrapperState.initialValue&&(e.value=t)}q.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),z=Ka,U=Ia,V=Ja,q.injectEventPluginsByName({SimpleEventPlugin:on,EnterLeaveEventPlugin:Gt,ChangeEventPlugin:Lt,SelectEventPlugin:vn,BeforeInputEventPlugin:tt});var _n={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function ge(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function he(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ge(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var bn,xn=void 0,wn=(bn=function(e,t){if(e.namespaceURI!==_n.svg||"innerHTML"in e)e.innerHTML=t;else{for((xn=xn||document.createElement("div")).innerHTML="<svg>"+t+"</svg>",t=xn.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return bn(e,t)})}:bn);function ke(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var Sn={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},En=["Webkit","ms","Moz","O"];function ne(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||Sn.hasOwnProperty(e)&&Sn[e]?(""+t).trim():t+"px"}function oe(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ne(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(Sn).forEach(function(e){En.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Sn[t]=Sn[e]})});var Pn=a({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function qe(e,t){t&&(Pn[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML)&&x("137",e,""),null!=t.dangerouslySetInnerHTML&&(null!=t.children&&x("60"),"object"==typeof t.dangerouslySetInnerHTML&&"__html"in t.dangerouslySetInnerHTML||x("61")),null!=t.style&&"object"!=typeof t.style&&x("62",""))}function re(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function se(e,t){var n=Id(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=B[t];for(var r=0;r<t.length;r++){var i=t[r];if(!n.hasOwnProperty(i)||!n[i]){switch(i){case"scroll":Ed("scroll",e);break;case"focus":case"blur":Ed("focus",e),Ed("blur",e),n.blur=!0,n.focus=!0;break;case"cancel":case"close":Ob(i)&&Ed(i,e);break;case"invalid":case"submit":case"reset":break;default:-1===me.indexOf(i)&&E(i,e)}n[i]=!0}}}function te(){}var Cn=null,kn=null;function we(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function xe(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Tn="function"==typeof setTimeout?setTimeout:void 0,An="function"==typeof clearTimeout?clearTimeout:void 0,On=s.unstable_scheduleCallback,In=s.unstable_cancelCallback;function Ce(e,t,n,r,i){e[Z]=i,"input"===n&&"radio"===i.type&&null!=i.name&&xc(e,i),re(n,r),r=re(n,i);for(var o=0;o<t.length;o+=2){var a=t[o],s=t[o+1];"style"===a?oe(e,s):"dangerouslySetInnerHTML"===a?wn(e,s):"children"===a?ke(e,s):tc(e,a,s,r)}switch(n){case"input":yc(e,i);break;case"textarea":de(e,i);break;case"select":t=e._wrapperState.wasMultiple,e._wrapperState.wasMultiple=!!i.multiple,null!=(n=i.value)?ae(e,!!i.multiple,n,!1):t!==!!i.multiple&&(null!=i.defaultValue?ae(e,!!i.multiple,i.defaultValue,!0):ae(e,!!i.multiple,i.multiple?[]:"",!1))}}function De(e){for(e=e.nextSibling;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e}function Ee(e){for(e=e.firstChild;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e}new Set;var Rn=[],Ln=-1;function F(e){0>Ln||(e.current=Rn[Ln],Rn[Ln]=null,Ln--)}function G(e,t){Rn[++Ln]=e.current,e.current=t}var Mn={},jn={current:Mn},Dn={current:!1},Fn=Mn;function Je(e,t){var n=e.type.contextTypes;if(!n)return Mn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function J(e){return null!=(e=e.childContextTypes)}function Ke(e){F(Dn),F(jn)}function Le(e){F(Dn),F(jn)}function Me(e,t,n){jn.current!==Mn&&x("168"),G(jn,t),G(Dn,n)}function Ne(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var i in r=r.getChildContext())i in e||x("108",ic(t)||"Unknown",i);return a({},n,r)}function Oe(e){var t=e.stateNode;return t=t&&t.__reactInternalMemoizedMergedChildContext||Mn,Fn=jn.current,G(jn,t),G(Dn,Dn.current),!0}function Pe(e,t,n){var r=e.stateNode;r||x("169"),n?(t=Ne(e,t,Fn),r.__reactInternalMemoizedMergedChildContext=t,F(Dn),F(jn),G(jn,t)):F(Dn),G(Dn,n)}var Nn=null,Bn=null;function Se(e){return function(t){try{return e(t)}catch(e){}}}function Te(e){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);Nn=Se(function(e){return t.onCommitFiberRoot(n,e)}),Bn=Se(function(e){return t.onCommitFiberUnmount(n,e)})}catch(e){}return!0}function Ue(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.contextDependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function K(e,t,n,r){return new Ue(e,t,n,r)}function Ve(e){return!(!(e=e.prototype)||!e.isReactComponent)}function We(e){if("function"==typeof e)return Ve(e)?1:0;if(null!=e){if((e=e.$$typeof)===vt)return 11;if(e===bt)return 14}return 2}function Xe(e,t){var n=e.alternate;return null===n?((n=K(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,n.contextDependencies=e.contextDependencies,n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ye(e,t,n,r,i,o){var a=2;if(r=e,"function"==typeof e)Ve(e)&&(a=1);else if("string"==typeof e)a=5;else e:switch(e){case ht:return Ze(n.children,i,o,t);case yt:return $e(n,3|i,o,t);case ft:return $e(n,2|i,o,t);case dt:return(e=K(12,n,t,4|i)).elementType=dt,e.type=dt,e.expirationTime=o,e;case _t:return(e=K(13,n,t,i)).elementType=_t,e.type=_t,e.expirationTime=o,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case gt:a=10;break e;case mt:a=9;break e;case vt:a=11;break e;case bt:a=14;break e;case xt:a=16,r=null;break e}x("130",null==e?e:typeof e,"")}return(t=K(a,n,t,i)).elementType=e,t.type=r,t.expirationTime=o,t}function Ze(e,t,n,r){return(e=K(7,e,r,t)).expirationTime=n,e}function $e(e,t,n,r){return e=K(8,e,r,t),t=0==(1&t)?ft:yt,e.elementType=t,e.type=t,e.expirationTime=n,e}function af(e,t,n){return(e=K(6,e,null,t)).expirationTime=n,e}function bf(e,t,n){return(t=K(4,null!==e.children?e.children:[],e.key,t)).expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function cf(e,t){e.didError=!1;var n=e.earliestPendingTime;0===n?e.earliestPendingTime=e.latestPendingTime=t:n<t?e.earliestPendingTime=t:e.latestPendingTime>t&&(e.latestPendingTime=t),df(t,e)}function ef(e,t){if(e.didError=!1,0===t)e.earliestPendingTime=0,e.latestPendingTime=0,e.earliestSuspendedTime=0,e.latestSuspendedTime=0,e.latestPingedTime=0;else{t<e.latestPingedTime&&(e.latestPingedTime=0);var n=e.latestPendingTime;0!==n&&(n>t?e.earliestPendingTime=e.latestPendingTime=0:e.earliestPendingTime>t&&(e.earliestPendingTime=e.latestPendingTime)),0===(n=e.earliestSuspendedTime)?cf(e,t):t<e.latestSuspendedTime?(e.earliestSuspendedTime=0,e.latestSuspendedTime=0,e.latestPingedTime=0,cf(e,t)):t>n&&cf(e,t)}df(0,e)}function ff(e,t){e.didError=!1,e.latestPingedTime>=t&&(e.latestPingedTime=0);var n=e.earliestPendingTime,r=e.latestPendingTime;n===t?e.earliestPendingTime=r===t?e.latestPendingTime=0:r:r===t&&(e.latestPendingTime=n),n=e.earliestSuspendedTime,r=e.latestSuspendedTime,0===n?e.earliestSuspendedTime=e.latestSuspendedTime=t:n<t?e.earliestSuspendedTime=t:r>t&&(e.latestSuspendedTime=t),df(t,e)}function gf(e,t){var n=e.earliestPendingTime;return n>t&&(t=n),(e=e.earliestSuspendedTime)>t&&(t=e),t}function df(e,t){var n=t.earliestSuspendedTime,r=t.latestSuspendedTime,i=t.earliestPendingTime,o=t.latestPingedTime;0===(i=0!==i?i:o)&&(0===e||r<e)&&(i=r),0!==(e=i)&&n>e&&(e=n),t.nextExpirationTimeToWorkOn=i,t.expirationTime=e}function L(e,t){if(e&&e.defaultProps)for(var n in t=a({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}function hf(e){var t=e._result;switch(e._status){case 1:return t;case 2:case 0:throw t;default:switch(e._status=0,(t=(t=e._ctor)()).then(function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)},function(t){0===e._status&&(e._status=2,e._result=t)}),e._status){case 1:return e._result;case 2:throw e._result}throw e._result=t,t}}var zn=(new o.Component).refs;function kf(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:a({},t,n),e.memoizedState=n,null!==(r=e.updateQueue)&&0===e.expirationTime&&(r.baseState=n)}var Un={isMounted:function(e){return!!(e=e._reactInternalFiber)&&2===ed(e)},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var r=lf(),i=nf(r=mf(r,e));i.payload=t,null!=n&&(i.callback=n),of(),pf(e,i),qf(e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var r=lf(),i=nf(r=mf(r,e));i.tag=Or,i.payload=t,null!=n&&(i.callback=n),of(),pf(e,i),qf(e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=lf(),r=nf(n=mf(n,e));r.tag=Ir,null!=t&&(r.callback=t),of(),pf(e,r),qf(e,n)}};function uf(e,t,n,r,i,o,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!dd(n,r)||!dd(i,o))}function vf(e,t,n){var r=!1,i=Mn,o=t.contextType;return"object"==typeof o&&null!==o?o=M(o):(i=J(t)?Fn:jn.current,o=(r=null!=(r=t.contextTypes))?Je(e,i):Mn),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Un,e.stateNode=t,t._reactInternalFiber=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function wf(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Un.enqueueReplaceState(t,t.state,null)}function xf(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=zn;var o=t.contextType;"object"==typeof o&&null!==o?i.context=M(o):(o=J(t)?Fn:jn.current,i.context=Je(e,o)),null!==(o=e.updateQueue)&&(yf(e,o,n,i,r),i.state=e.memoizedState),"function"==typeof(o=t.getDerivedStateFromProps)&&(kf(e,t,o,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Un.enqueueReplaceState(i,i.state,null),null!==(o=e.updateQueue)&&(yf(e,o,n,i,r),i.state=e.memoizedState)),"function"==typeof i.componentDidMount&&(e.effectTag|=4)}var Vn=Array.isArray;function Af(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){n=n._owner;var r=void 0;n&&(1!==n.tag&&x("309"),r=n.stateNode),r||x("147",e);var i=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===i?t.ref:((t=function(e){var t=r.refs;t===zn&&(t=r.refs={}),null===e?delete t[i]:t[i]=e})._stringRef=i,t)}"string"!=typeof e&&x("284"),n._owner||x("290",e)}return e}function Bf(e,t){"textarea"!==e.type&&x("31","[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,"")}function Cf(n){function b(e,t){if(n){var r=e.lastEffect;null!==r?(r.nextEffect=t,e.lastEffect=t):e.firstEffect=e.lastEffect=t,t.nextEffect=null,t.effectTag=8}}function c(e,t){if(!n)return null;for(;null!==t;)b(e,t),t=t.sibling;return null}function d(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function e(e,t,n){return(e=Xe(e,t)).index=0,e.sibling=null,e}function f(e,t,r){return e.index=r,n?null!==(r=e.alternate)?(r=r.index)<t?(e.effectTag=2,t):r:(e.effectTag=2,t):t}function g(e){return n&&null===e.alternate&&(e.effectTag=2),e}function h(t,n,r,i){return null===n||6!==n.tag?((n=af(r,t.mode,i)).return=t,n):((n=e(n,r)).return=t,n)}function l(t,n,r,i){return null!==n&&n.elementType===r.type?((i=e(n,r.props)).ref=Af(t,n,r),i.return=t,i):((i=Ye(r.type,r.key,r.props,null,t.mode,i)).ref=Af(t,n,r),i.return=t,i)}function k(t,n,r,i){return null===n||4!==n.tag||n.stateNode.containerInfo!==r.containerInfo||n.stateNode.implementation!==r.implementation?((n=bf(r,t.mode,i)).return=t,n):((n=e(n,r.children||[])).return=t,n)}function m(t,n,r,i,o){return null===n||7!==n.tag?((n=Ze(r,t.mode,i,o)).return=t,n):((n=e(n,r)).return=t,n)}function p(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=af(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case ct:return(n=Ye(t.type,t.key,t.props,null,e.mode,n)).ref=Af(e,null,t),n.return=e,n;case pt:return(t=bf(t,e.mode,n)).return=e,t}if(Vn(t)||hc(t))return(t=Ze(t,e.mode,n,null)).return=e,t;Bf(e,t)}return null}function t(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==i?null:h(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case ct:return n.key===i?n.type===ht?m(e,t,n.props.children,r,i):l(e,t,n,r):null;case pt:return n.key===i?k(e,t,n,r):null}if(Vn(n)||hc(n))return null!==i?null:m(e,t,n,r,null);Bf(e,n)}return null}function A(e,t,n,r,i){if("string"==typeof r||"number"==typeof r)return h(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case ct:return e=e.get(null===r.key?n:r.key)||null,r.type===ht?m(t,e,r.props.children,i,r.key):l(t,e,r,i);case pt:return k(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(Vn(r)||hc(r))return m(t,e=e.get(n)||null,r,i,null);Bf(t,r)}return null}function v(e,r,i,o){for(var a=null,s=null,l=r,u=r=0,h=null;null!==l&&u<i.length;u++){l.index>u?(h=l,l=null):h=l.sibling;var g=t(e,l,i[u],o);if(null===g){null===l&&(l=h);break}n&&l&&null===g.alternate&&b(e,l),r=f(g,r,u),null===s?a=g:s.sibling=g,s=g,l=h}if(u===i.length)return c(e,l),a;if(null===l){for(;u<i.length;u++)(l=p(e,i[u],o))&&(r=f(l,r,u),null===s?a=l:s.sibling=l,s=l);return a}for(l=d(e,l);u<i.length;u++)(h=A(l,e,u,i[u],o))&&(n&&null!==h.alternate&&l.delete(null===h.key?u:h.key),r=f(h,r,u),null===s?a=h:s.sibling=h,s=h);return n&&l.forEach(function(t){return b(e,t)}),a}function R(e,r,i,o){var a=hc(i);"function"!=typeof a&&x("150"),null==(i=a.call(i))&&x("151");for(var s=a=null,l=r,u=r=0,h=null,g=i.next();null!==l&&!g.done;u++,g=i.next()){l.index>u?(h=l,l=null):h=l.sibling;var m=t(e,l,g.value,o);if(null===m){l||(l=h);break}n&&l&&null===m.alternate&&b(e,l),r=f(m,r,u),null===s?a=m:s.sibling=m,s=m,l=h}if(g.done)return c(e,l),a;if(null===l){for(;!g.done;u++,g=i.next())null!==(g=p(e,g.value,o))&&(r=f(g,r,u),null===s?a=g:s.sibling=g,s=g);return a}for(l=d(e,l);!g.done;u++,g=i.next())null!==(g=A(l,e,u,g.value,o))&&(n&&null!==g.alternate&&l.delete(null===g.key?u:g.key),r=f(g,r,u),null===s?a=g:s.sibling=g,s=g);return n&&l.forEach(function(t){return b(e,t)}),a}return function(t,n,r,i){var o="object"==typeof r&&null!==r&&r.type===ht&&null===r.key;o&&(r=r.props.children);var a="object"==typeof r&&null!==r;if(a)switch(r.$$typeof){case ct:e:{for(a=r.key,o=n;null!==o;){if(o.key===a){if(7===o.tag?r.type===ht:o.elementType===r.type){c(t,o.sibling),(n=e(o,r.type===ht?r.props.children:r.props)).ref=Af(t,o,r),n.return=t,t=n;break e}c(t,o);break}b(t,o),o=o.sibling}r.type===ht?((n=Ze(r.props.children,t.mode,i,r.key)).return=t,t=n):((i=Ye(r.type,r.key,r.props,null,t.mode,i)).ref=Af(t,n,r),i.return=t,t=i)}return g(t);case pt:e:{for(o=r.key;null!==n;){if(n.key===o){if(4===n.tag&&n.stateNode.containerInfo===r.containerInfo&&n.stateNode.implementation===r.implementation){c(t,n.sibling),(n=e(n,r.children||[])).return=t,t=n;break e}c(t,n);break}b(t,n),n=n.sibling}(n=bf(r,t.mode,i)).return=t,t=n}return g(t)}if("string"==typeof r||"number"==typeof r)return r=""+r,null!==n&&6===n.tag?(c(t,n.sibling),(n=e(n,r)).return=t,t=n):(c(t,n),(n=af(r,t.mode,i)).return=t,t=n),g(t);if(Vn(r))return v(t,n,r,i);if(hc(r))return R(t,n,r,i);if(a&&Bf(t,r),void 0===r&&!o)switch(t.tag){case 1:case 0:x("152",(i=t.type).displayName||i.name||"Component")}return c(t,n)}}var Gn=Cf(!0),Wn=Cf(!1),qn={},Hn={current:qn},Xn={current:qn},Kn={current:qn};function If(e){return e===qn&&x("174"),e}function Jf(e,t){G(Kn,t),G(Xn,e),G(Hn,qn);var n=t.nodeType;switch(n){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:he(null,"");break;default:t=he(t=(n=8===n?t.parentNode:t).namespaceURI||null,n=n.tagName)}F(Hn),G(Hn,t)}function Kf(e){F(Hn),F(Xn),F(Kn)}function Lf(e){If(Kn.current);var t=If(Hn.current),n=he(t,e.type);t!==n&&(G(Xn,e),G(Hn,n))}function Mf(e){Xn.current===e&&(F(Hn),F(Xn))}var Zn=0,Yn=2,Jn=4,Qn=8,$n=16,er=32,tr=64,nr=128,rr=st.ReactCurrentDispatcher,ir=0,or=null,ar=null,sr=null,lr=null,ur=null,cr=null,pr=0,hr=null,fr=0,dr=!1,gr=null,mr=0;function fg(){x("307")}function gg(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!bd(e[n],t[n]))return!1;return!0}function hg(e,t,n,r,i,o){if(ir=o,or=t,sr=null!==e?e.memoizedState:null,rr.current=null===sr?vr:_r,t=n(r,i),dr){do{dr=!1,mr+=1,sr=null!==e?e.memoizedState:null,cr=lr,hr=ur=ar=null,rr.current=_r,t=n(r,i)}while(dr);gr=null,mr=0}return rr.current=yr,(e=or).memoizedState=lr,e.expirationTime=pr,e.updateQueue=hr,e.effectTag|=fr,e=null!==ar&&null!==ar.next,ir=0,cr=ur=lr=sr=ar=or=null,pr=0,hr=null,fr=0,e&&x("300"),t}function lg(){rr.current=yr,ir=0,cr=ur=lr=sr=ar=or=null,pr=0,hr=null,fr=0,dr=!1,gr=null,mr=0}function mg(){var e={memoizedState:null,baseState:null,queue:null,baseUpdate:null,next:null};return null===ur?lr=ur=e:ur=ur.next=e,ur}function ng(){if(null!==cr)cr=(ur=cr).next,sr=null!==(ar=sr)?ar.next:null;else{null===sr&&x("310");var e={memoizedState:(ar=sr).memoizedState,baseState:ar.baseState,queue:ar.queue,baseUpdate:ar.baseUpdate,next:null};ur=null===ur?lr=e:ur.next=e,sr=ar.next}return ur}function og(e,t){return"function"==typeof t?t(e):t}function pg(e){var t=ng(),n=t.queue;if(null===n&&x("311"),0<mr){var r=n.dispatch;if(null!==gr){var i=gr.get(n);if(void 0!==i){gr.delete(n);var o=t.memoizedState;do{o=e(o,i.action),i=i.next}while(null!==i);return bd(o,t.memoizedState)||(Er=!0),t.memoizedState=o,t.baseUpdate===n.last&&(t.baseState=o),n.eagerReducer=e,n.eagerState=o,[o,r]}}return[t.memoizedState,r]}r=n.last;var a=t.baseUpdate;if(o=t.baseState,null!==a?(null!==r&&(r.next=null),r=a.next):r=null!==r?r.next:null,null!==r){var s=i=null,l=r,u=!1;do{var c=l.expirationTime;c<ir?(u||(u=!0,s=a,i=o),c>pr&&(pr=c)):o=l.eagerReducer===e?l.eagerState:e(o,l.action),a=l,l=l.next}while(null!==l&&l!==r);u||(s=a,i=o),bd(o,t.memoizedState)||(Er=!0),t.memoizedState=o,t.baseUpdate=s,t.baseState=i,n.eagerReducer=e,n.eagerState=o}return[t.memoizedState,n.dispatch]}function rg(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===hr?(hr={lastEffect:null}).lastEffect=e.next=e:null===(t=hr.lastEffect)?hr.lastEffect=e.next=e:(n=t.next,t.next=e,e.next=n,hr.lastEffect=e),e}function sg(e,t,n,r){var i=mg();fr|=e,i.memoizedState=rg(t,n,void 0,void 0===r?null:r)}function tg(e,t,n,r){var i=ng();r=void 0===r?null:r;var o=void 0;if(null!==ar){var a=ar.memoizedState;if(o=a.destroy,null!==r&&gg(r,a.deps))return void rg(Zn,n,o,r)}fr|=e,i.memoizedState=rg(t,n,o,r)}function ug(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function vg(){}function wg(e,t,n){25>mr||x("301");var r=e.alternate;if(e===or||null!==r&&r===or)if(dr=!0,e={expirationTime:ir,action:n,eagerReducer:null,eagerState:null,next:null},null===gr&&(gr=new Map),void 0===(n=gr.get(t)))gr.set(t,e);else{for(t=n;null!==t.next;)t=t.next;t.next=e}else{of();var i=lf(),o={expirationTime:i=mf(i,e),action:n,eagerReducer:null,eagerState:null,next:null},a=t.last;if(null===a)o.next=o;else{var s=a.next;null!==s&&(o.next=s),a.next=o}if(t.last=o,0===e.expirationTime&&(null===r||0===r.expirationTime)&&null!==(r=t.eagerReducer))try{var l=t.eagerState,u=r(l,n);if(o.eagerReducer=r,o.eagerState=u,bd(u,l))return}catch(e){}qf(e,i)}}var yr={readContext:M,useCallback:fg,useContext:fg,useEffect:fg,useImperativeHandle:fg,useLayoutEffect:fg,useMemo:fg,useReducer:fg,useRef:fg,useState:fg,useDebugValue:fg},vr={readContext:M,useCallback:function(e,t){return mg().memoizedState=[e,void 0===t?null:t],e},useContext:M,useEffect:function(e,t){return sg(516,nr|tr,e,t)},useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,sg(4,Jn|er,ug.bind(null,t,e),n)},useLayoutEffect:function(e,t){return sg(4,Jn|er,e,t)},useMemo:function(e,t){var n=mg();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=mg();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={last:null,dispatch:null,eagerReducer:e,eagerState:t}).dispatch=wg.bind(null,or,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},mg().memoizedState=e},useState:function(e){var t=mg();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={last:null,dispatch:null,eagerReducer:og,eagerState:e}).dispatch=wg.bind(null,or,e),[t.memoizedState,e]},useDebugValue:vg},_r={readContext:M,useCallback:function(e,t){var n=ng();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&gg(t,r[1])?r[0]:(n.memoizedState=[e,t],e)},useContext:M,useEffect:function(e,t){return tg(516,nr|tr,e,t)},useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,tg(4,Jn|er,ug.bind(null,t,e),n)},useLayoutEffect:function(e,t){return tg(4,Jn|er,e,t)},useMemo:function(e,t){var n=ng();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&gg(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)},useReducer:pg,useRef:function(){return ng().memoizedState},useState:function(e){return pg(og)},useDebugValue:vg},br=null,xr=null,wr=!1;function Ag(e,t){var n=K(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Bg(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function Cg(e){if(wr){var t=xr;if(t){var n=t;if(!Bg(e,t)){if(!(t=De(n))||!Bg(e,t))return e.effectTag|=2,wr=!1,void(br=e);Ag(br,n)}br=e,xr=Ee(t)}else e.effectTag|=2,wr=!1,br=e}}function Dg(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&18!==e.tag;)e=e.return;br=e}function Eg(e){if(e!==br)return!1;if(!wr)return Dg(e),wr=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!xe(t,e.memoizedProps))for(t=xr;t;)Ag(e,t),t=De(t);return Dg(e),xr=br?De(e.stateNode):null,!0}function Fg(){xr=br=null,wr=!1}var Sr=st.ReactCurrentOwner,Er=!1;function S(e,t,n,r){t.child=null===e?Wn(t,null,n,r):Gn(t,e.child,n,r)}function Hg(e,t,n,r,i){n=n.render;var o=t.ref;return Ig(t,i),r=hg(e,t,n,r,o,i),null===e||Er?(t.effectTag|=1,S(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),Jg(e,t,i))}function Kg(e,t,n,r,i,o){if(null===e){var a=n.type;return"function"!=typeof a||Ve(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ye(n.type,null,r,null,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Lg(e,t,a,r,i,o))}return a=e.child,i<o&&(i=a.memoizedProps,(n=null!==(n=n.compare)?n:dd)(i,r)&&e.ref===t.ref)?Jg(e,t,o):(t.effectTag|=1,(e=Xe(a,r)).ref=t.ref,e.return=t,t.child=e)}function Lg(e,t,n,r,i,o){return null!==e&&dd(e.memoizedProps,r)&&e.ref===t.ref&&(Er=!1,i<o)?Jg(e,t,o):Mg(e,t,n,r,o)}function Ng(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function Mg(e,t,n,r,i){var o=J(n)?Fn:jn.current;return o=Je(t,o),Ig(t,i),n=hg(e,t,n,r,o,i),null===e||Er?(t.effectTag|=1,S(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),Jg(e,t,i))}function Og(e,t,n,r,i){if(J(n)){var o=!0;Oe(t)}else o=!1;if(Ig(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),vf(t,n,r),xf(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,u=n.contextType;"object"==typeof u&&null!==u?u=M(u):u=Je(t,u=J(n)?Fn:jn.current);var c=n.getDerivedStateFromProps,p="function"==typeof c||"function"==typeof a.getSnapshotBeforeUpdate;p||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==r||l!==u)&&wf(t,a,r,u),Lr=!1;var h=t.memoizedState;l=a.state=h;var f=t.updateQueue;null!==f&&(yf(t,f,r,a,i),l=t.memoizedState),s!==r||h!==l||Dn.current||Lr?("function"==typeof c&&(kf(t,n,c,r),l=t.memoizedState),(s=Lr||uf(t,n,s,r,h,l,u))?(p||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.effectTag|=4)):("function"==typeof a.componentDidMount&&(t.effectTag|=4),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=u,r=s):("function"==typeof a.componentDidMount&&(t.effectTag|=4),r=!1)}else a=t.stateNode,s=t.memoizedProps,a.props=t.type===t.elementType?s:L(t.type,s),l=a.context,"object"==typeof(u=n.contextType)&&null!==u?u=M(u):u=Je(t,u=J(n)?Fn:jn.current),(p="function"==typeof(c=n.getDerivedStateFromProps)||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==r||l!==u)&&wf(t,a,r,u),Lr=!1,l=t.memoizedState,h=a.state=l,null!==(f=t.updateQueue)&&(yf(t,f,r,a,i),h=t.memoizedState),s!==r||l!==h||Dn.current||Lr?("function"==typeof c&&(kf(t,n,c,r),h=t.memoizedState),(c=Lr||uf(t,n,s,r,l,h,u))?(p||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,h,u),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,h,u)),"function"==typeof a.componentDidUpdate&&(t.effectTag|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),t.memoizedProps=r,t.memoizedState=h),a.props=r,a.state=h,a.context=u,r=c):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),r=!1);return Qg(e,t,n,r,o,i)}function Qg(e,t,n,r,i,o){Ng(e,t);var a=0!=(64&t.effectTag);if(!r&&!a)return i&&Pe(t,n,!1),Jg(e,t,o);r=t.stateNode,Sr.current=t;var s=a&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.effectTag|=1,null!==e&&a?(t.child=Gn(t,e.child,null,o),t.child=Gn(t,null,s,o)):S(e,t,s,o),t.memoizedState=r.state,i&&Pe(t,n,!0),t.child}function Rg(e){var t=e.stateNode;t.pendingContext?Me(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Me(0,t.context,!1),Jf(e,t.containerInfo)}function Sg(e,t,n){var r=t.mode,i=t.pendingProps,o=t.memoizedState;if(0==(64&t.effectTag)){o=null;var a=!1}else o={timedOutAt:null!==o?o.timedOutAt:0},a=!0,t.effectTag&=-65;if(null===e)if(a){var s=i.fallback;e=Ze(null,r,0,null),0==(1&t.mode)&&(e.child=null!==t.memoizedState?t.child.child:t.child),r=Ze(s,r,n,null),e.sibling=r,(n=e).return=r.return=t}else n=r=Wn(t,null,i.children,n);else null!==e.memoizedState?(s=(r=e.child).sibling,a?(n=i.fallback,i=Xe(r,r.pendingProps),0==(1&t.mode)&&((a=null!==t.memoizedState?t.child.child:t.child)!==r.child&&(i.child=a)),r=i.sibling=Xe(s,n,s.expirationTime),n=i,i.childExpirationTime=0,n.return=r.return=t):n=r=Gn(t,r.child,i.children,n)):(s=e.child,a?(a=i.fallback,(i=Ze(null,r,0,null)).child=s,0==(1&t.mode)&&(i.child=null!==t.memoizedState?t.child.child:t.child),(r=i.sibling=Ze(a,r,n,null)).effectTag|=2,n=i,i.childExpirationTime=0,n.return=r.return=t):r=n=Gn(t,s,i.children,n)),t.stateNode=e.stateNode;return t.memoizedState=o,t.child=n,r}function Jg(e,t,n){if(null!==e&&(t.contextDependencies=e.contextDependencies),t.childExpirationTime<n)return null;if(null!==e&&t.child!==e.child&&x("153"),null!==t.child){for(n=Xe(e=t.child,e.pendingProps,e.expirationTime),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Xe(e,e.pendingProps,e.expirationTime)).return=t;n.sibling=null}return t.child}function Tg(e,t,n){var r=t.expirationTime;if(null!==e){if(e.memoizedProps!==t.pendingProps||Dn.current)Er=!0;else if(r<n){switch(Er=!1,t.tag){case 3:Rg(t),Fg();break;case 5:Lf(t);break;case 1:J(t.type)&&Oe(t);break;case 4:Jf(t,t.stateNode.containerInfo);break;case 10:Ug(t,t.memoizedProps.value);break;case 13:if(null!==t.memoizedState)return 0!==(r=t.child.childExpirationTime)&&r>=n?Sg(e,t,n):null!==(t=Jg(e,t,n))?t.sibling:null}return Jg(e,t,n)}}else Er=!1;switch(t.expirationTime=0,t.tag){case 2:r=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps;var i=Je(t,jn.current);if(Ig(t,n),i=hg(null,t,r,e,i,n),t.effectTag|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof){if(t.tag=1,lg(),J(r)){var o=!0;Oe(t)}else o=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null;var a=r.getDerivedStateFromProps;"function"==typeof a&&kf(t,r,a,e),i.updater=Un,t.stateNode=i,i._reactInternalFiber=t,xf(t,r,e,n),t=Qg(null,t,r,!0,o,n)}else t.tag=0,S(null,t,i,n),t=t.child;return t;case 16:switch(i=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),o=t.pendingProps,e=hf(i),t.type=e,i=t.tag=We(e),o=L(e,o),a=void 0,i){case 0:a=Mg(null,t,e,o,n);break;case 1:a=Og(null,t,e,o,n);break;case 11:a=Hg(null,t,e,o,n);break;case 14:a=Kg(null,t,e,L(e.type,o),r,n);break;default:x("306",e,"")}return a;case 0:return r=t.type,i=t.pendingProps,Mg(e,t,r,i=t.elementType===r?i:L(r,i),n);case 1:return r=t.type,i=t.pendingProps,Og(e,t,r,i=t.elementType===r?i:L(r,i),n);case 3:return Rg(t),null===(r=t.updateQueue)&&x("282"),i=null!==(i=t.memoizedState)?i.element:null,yf(t,r,t.pendingProps,null,n),(r=t.memoizedState.element)===i?(Fg(),t=Jg(e,t,n)):(i=t.stateNode,(i=(null===e||null===e.child)&&i.hydrate)&&(xr=Ee(t.stateNode.containerInfo),br=t,i=wr=!0),i?(t.effectTag|=2,t.child=Wn(t,null,r,n)):(S(e,t,r,n),Fg()),t=t.child),t;case 5:return Lf(t),null===e&&Cg(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,xe(r,i)?a=null:null!==o&&xe(r,o)&&(t.effectTag|=16),Ng(e,t),1!==n&&1&t.mode&&i.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(S(e,t,a,n),t=t.child),t;case 6:return null===e&&Cg(t),null;case 13:return Sg(e,t,n);case 4:return Jf(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Gn(t,null,r,n):S(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Hg(e,t,r,i=t.elementType===r?i:L(r,i),n);case 7:return S(e,t,t.pendingProps,n),t.child;case 8:case 12:return S(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,Ug(t,o=i.value),null!==a){var s=a.value;if(0===(o=bd(s,o)?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(s,o):1073741823))){if(a.children===i.children&&!Dn.current){t=Jg(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var l=s.contextDependencies;if(null!==l){a=s.child;for(var u=l.first;null!==u;){if(u.context===r&&0!=(u.observedBits&o)){1===s.tag&&((u=nf(n)).tag=Ir,pf(s,u)),s.expirationTime<n&&(s.expirationTime=n),null!==(u=s.alternate)&&u.expirationTime<n&&(u.expirationTime=n),u=n;for(var c=s.return;null!==c;){var p=c.alternate;if(c.childExpirationTime<u)c.childExpirationTime=u,null!==p&&p.childExpirationTime<u&&(p.childExpirationTime=u);else{if(!(null!==p&&p.childExpirationTime<u))break;p.childExpirationTime=u}c=c.return}l.expirationTime<n&&(l.expirationTime=n);break}u=u.next}}else a=10===s.tag&&s.type===t.type?null:s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===t){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}}S(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(o=t.pendingProps).children,Ig(t,n),r=r(i=M(i,o.unstable_observedBits)),t.effectTag|=1,S(e,t,r,n),t.child;case 14:return o=L(i=t.type,t.pendingProps),Kg(e,t,i,o=L(i.type,o),r,n);case 15:return Lg(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:L(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,J(r)?(e=!0,Oe(t)):e=!1,Ig(t,n),vf(t,r,i),xf(t,r,i,n),Qg(null,t,r,!0,e,n)}x("156")}var Pr={current:null},Cr=null,kr=null,Tr=null;function Ug(e,t){var n=e.type._context;G(Pr,n._currentValue),n._currentValue=t}function Zg(e){var t=Pr.current;F(Pr),e.type._context._currentValue=t}function Ig(e,t){Cr=e,Tr=kr=null;var n=e.contextDependencies;null!==n&&n.expirationTime>=t&&(Er=!0),e.contextDependencies=null}function M(e,t){return Tr!==e&&!1!==t&&0!==t&&("number"==typeof t&&1073741823!==t||(Tr=e,t=1073741823),t={context:e,observedBits:t,next:null},null===kr?(null===Cr&&x("308"),kr=t,Cr.contextDependencies={first:t,expirationTime:0}):kr=kr.next=t),e._currentValue}var Ar=0,Or=1,Ir=2,Rr=3,Lr=!1;function bh(e){return{baseState:e,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function ch(e){return{baseState:e.baseState,firstUpdate:e.firstUpdate,lastUpdate:e.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function nf(e){return{expirationTime:e,tag:Ar,payload:null,callback:null,next:null,nextEffect:null}}function dh(e,t){null===e.lastUpdate?e.firstUpdate=e.lastUpdate=t:(e.lastUpdate.next=t,e.lastUpdate=t)}function pf(e,t){var n=e.alternate;if(null===n){var r=e.updateQueue,i=null;null===r&&(r=e.updateQueue=bh(e.memoizedState))}else r=e.updateQueue,i=n.updateQueue,null===r?null===i?(r=e.updateQueue=bh(e.memoizedState),i=n.updateQueue=bh(n.memoizedState)):r=e.updateQueue=ch(i):null===i&&(i=n.updateQueue=ch(r));null===i||r===i?dh(r,t):null===r.lastUpdate||null===i.lastUpdate?(dh(r,t),dh(i,t)):(dh(r,t),i.lastUpdate=t)}function eh(e,t){var n=e.updateQueue;null===(n=null===n?e.updateQueue=bh(e.memoizedState):fh(e,n)).lastCapturedUpdate?n.firstCapturedUpdate=n.lastCapturedUpdate=t:(n.lastCapturedUpdate.next=t,n.lastCapturedUpdate=t)}function fh(e,t){var n=e.alternate;return null!==n&&t===n.updateQueue&&(t=e.updateQueue=ch(t)),t}function gh(e,t,n,r,i,o){switch(n.tag){case Or:return"function"==typeof(e=n.payload)?e.call(o,r,i):e;case Rr:e.effectTag=-2049&e.effectTag|64;case Ar:if(null==(i="function"==typeof(e=n.payload)?e.call(o,r,i):e))break;return a({},r,i);case Ir:Lr=!0}return r}function yf(e,t,n,r,i){Lr=!1;for(var o=(t=fh(e,t)).baseState,a=null,s=0,l=t.firstUpdate,u=o;null!==l;){var c=l.expirationTime;c<i?(null===a&&(a=l,o=u),s<c&&(s=c)):(u=gh(e,0,l,u,n,r),null!==l.callback&&(e.effectTag|=32,l.nextEffect=null,null===t.lastEffect?t.firstEffect=t.lastEffect=l:(t.lastEffect.nextEffect=l,t.lastEffect=l))),l=l.next}for(c=null,l=t.firstCapturedUpdate;null!==l;){var p=l.expirationTime;p<i?(null===c&&(c=l,null===a&&(o=u)),s<p&&(s=p)):(u=gh(e,0,l,u,n,r),null!==l.callback&&(e.effectTag|=32,l.nextEffect=null,null===t.lastCapturedEffect?t.firstCapturedEffect=t.lastCapturedEffect=l:(t.lastCapturedEffect.nextEffect=l,t.lastCapturedEffect=l))),l=l.next}null===a&&(t.lastUpdate=null),null===c?t.lastCapturedUpdate=null:e.effectTag|=32,null===a&&null===c&&(o=u),t.baseState=o,t.firstUpdate=a,t.firstCapturedUpdate=c,e.expirationTime=s,e.memoizedState=u}function hh(e,t,n){null!==t.firstCapturedUpdate&&(null!==t.lastUpdate&&(t.lastUpdate.next=t.firstCapturedUpdate,t.lastUpdate=t.lastCapturedUpdate),t.firstCapturedUpdate=t.lastCapturedUpdate=null),ih(t.firstEffect,n),t.firstEffect=t.lastEffect=null,ih(t.firstCapturedEffect,n),t.firstCapturedEffect=t.lastCapturedEffect=null}function ih(e,t){for(;null!==e;){var n=e.callback;if(null!==n){e.callback=null;var r=t;"function"!=typeof n&&x("191",n),n.call(r)}e=e.nextEffect}}function jh(e,t){return{value:e,source:t,stack:jc(t)}}function kh(e){e.effectTag|=4}var Mr=void 0,jr=void 0,Dr=void 0,Fr=void 0;Mr=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},jr=function(){},Dr=function(e,t,n,r,i){var o=e.memoizedProps;if(o!==r){var s=t.stateNode;switch(If(Hn.current),e=null,n){case"input":o=vc(s,o),r=vc(s,r),e=[];break;case"option":o=$d(s,o),r=$d(s,r),e=[];break;case"select":o=a({},o,{value:void 0}),r=a({},r,{value:void 0}),e=[];break;case"textarea":o=be(s,o),r=be(s,r),e=[];break;default:"function"!=typeof o.onClick&&"function"==typeof r.onClick&&(s.onclick=te)}qe(n,r),s=n=void 0;var l=null;for(n in o)if(!r.hasOwnProperty(n)&&o.hasOwnProperty(n)&&null!=o[n])if("style"===n){var u=o[n];for(s in u)u.hasOwnProperty(s)&&(l||(l={}),l[s]="")}else"dangerouslySetInnerHTML"!==n&&"children"!==n&&"suppressContentEditableWarning"!==n&&"suppressHydrationWarning"!==n&&"autoFocus"!==n&&(N.hasOwnProperty(n)?e||(e=[]):(e=e||[]).push(n,null));for(n in r){var c=r[n];if(u=null!=o?o[n]:void 0,r.hasOwnProperty(n)&&c!==u&&(null!=c||null!=u))if("style"===n)if(u){for(s in u)!u.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(l||(l={}),l[s]="");for(s in c)c.hasOwnProperty(s)&&u[s]!==c[s]&&(l||(l={}),l[s]=c[s])}else l||(e||(e=[]),e.push(n,l)),l=c;else"dangerouslySetInnerHTML"===n?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(e=e||[]).push(n,""+c)):"children"===n?u===c||"string"!=typeof c&&"number"!=typeof c||(e=e||[]).push(n,""+c):"suppressContentEditableWarning"!==n&&"suppressHydrationWarning"!==n&&(N.hasOwnProperty(n)?(null!=c&&se(i,n),e||u===c||(e=[])):(e=e||[]).push(n,c))}l&&(e=e||[]).push("style",l),i=e,(t.updateQueue=i)&&kh(t)}},Fr=function(e,t,n,r){n!==r&&kh(t)};var Nr="function"==typeof WeakSet?WeakSet:Set;function qh(e,t){var n=t.source,r=t.stack;null===r&&null!==n&&(r=jc(n)),null!==n&&ic(n.type),t=t.value,null!==e&&1===e.tag&&ic(e.type);try{console.error(t)}catch(e){setTimeout(function(){throw e})}}function rh(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){sh(e,t)}else t.current=null}function th(e,t,n){if(null!==(n=null!==(n=n.updateQueue)?n.lastEffect:null)){var r=n=n.next;do{if((r.tag&e)!==Zn){var i=r.destroy;r.destroy=void 0,void 0!==i&&i()}(r.tag&t)!==Zn&&(i=r.create,r.destroy=i()),r=r.next}while(r!==n)}}function uh(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)r.style.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=null!=i&&i.hasOwnProperty("display")?i.display:null,r.style.display=ne("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else{if(13===n.tag&&null!==n.memoizedState){(r=n.child.sibling).return=n,n=r;continue}if(null!==n.child){n.child.return=n,n=n.child;continue}}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function vh(e){switch("function"==typeof Bn&&Bn(e),e.tag){case 0:case 11:case 14:case 15:var t=e.updateQueue;if(null!==t&&null!==(t=t.lastEffect)){var n=t=t.next;do{var r=n.destroy;if(void 0!==r){var i=e;try{r()}catch(e){sh(i,e)}}n=n.next}while(n!==t)}break;case 1:if(rh(e),"function"==typeof(t=e.stateNode).componentWillUnmount)try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(t){sh(e,t)}break;case 5:rh(e);break;case 4:wh(e)}}function xh(e){return 5===e.tag||3===e.tag||4===e.tag}function yh(e){e:{for(var t=e.return;null!==t;){if(xh(t)){var n=t;break e}t=t.return}x("160"),n=void 0}var r=t=void 0;switch(n.tag){case 5:t=n.stateNode,r=!1;break;case 3:case 4:t=n.stateNode.containerInfo,r=!0;break;default:x("161")}16&n.effectTag&&(ke(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||xh(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}for(var i=e;;){if(5===i.tag||6===i.tag)if(n)if(r){var o=t,a=i.stateNode,s=n;8===o.nodeType?o.parentNode.insertBefore(a,s):o.insertBefore(a,s)}else t.insertBefore(i.stateNode,n);else r?(a=t,s=i.stateNode,8===a.nodeType?(o=a.parentNode).insertBefore(s,a):(o=a).appendChild(s),null!=(a=a._reactRootContainer)||null!==o.onclick||(o.onclick=te)):t.appendChild(i.stateNode);else if(4!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===e)break;for(;null===i.sibling;){if(null===i.return||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}}function wh(e){for(var t=e,n=!1,r=void 0,i=void 0;;){if(!n){n=t.return;e:for(;;){switch(null===n&&x("160"),n.tag){case 5:r=n.stateNode,i=!1;break e;case 3:case 4:r=n.stateNode.containerInfo,i=!0;break e}n=n.return}n=!0}if(5===t.tag||6===t.tag){e:for(var o=t,a=o;;)if(vh(a),null!==a.child&&4!==a.tag)a.child.return=a,a=a.child;else{if(a===o)break;for(;null===a.sibling;){if(null===a.return||a.return===o)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}i?(o=r,a=t.stateNode,8===o.nodeType?o.parentNode.removeChild(a):o.removeChild(a)):r.removeChild(t.stateNode)}else if(4===t.tag){if(null!==t.child){r=t.stateNode.containerInfo,i=!0,t.child.return=t,t=t.child;continue}}else if(vh(t),null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return;4===(t=t.return).tag&&(n=!1)}t.sibling.return=t.return,t=t.sibling}}function zh(e,t){switch(t.tag){case 0:case 11:case 14:case 15:th(Jn,Qn,t);break;case 1:break;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps;e=null!==e?e.memoizedProps:r;var i=t.type,o=t.updateQueue;t.updateQueue=null,null!==o&&Ce(n,o,i,e,r)}break;case 6:null===t.stateNode&&x("162"),t.stateNode.nodeValue=t.memoizedProps;break;case 3:case 12:break;case 13:if(n=t.memoizedState,r=void 0,e=t,null===n?r=!1:(r=!0,e=t.child,0===n.timedOutAt&&(n.timedOutAt=lf())),null!==e&&uh(e,r),null!==(n=t.updateQueue)){t.updateQueue=null;var a=t.stateNode;null===a&&(a=t.stateNode=new Nr),n.forEach(function(e){var n=Ah.bind(null,t,e);a.has(e)||(a.add(e),e.then(n,n))})}break;case 17:break;default:x("163")}}var Br="function"==typeof WeakMap?WeakMap:Map;function Ch(e,t,n){(n=nf(n)).tag=Rr,n.payload={element:null};var r=t.value;return n.callback=function(){Dh(r),qh(e,t)},n}function Eh(e,t,n){(n=nf(n)).tag=Rr;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return r(i)}}var o=e.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===ti?ti=new Set([this]):ti.add(this));var n=t.value,i=t.stack;qh(e,t),this.componentDidCatch(n,{componentStack:null!==i?i:""})}),n}function Gh(e){switch(e.tag){case 1:J(e.type)&&Ke();var t=e.effectTag;return 2048&t?(e.effectTag=-2049&t|64,e):null;case 3:return Kf(),Le(),0!=(64&(t=e.effectTag))&&x("285"),e.effectTag=-2049&t|64,e;case 5:return Mf(e),null;case 13:return 2048&(t=e.effectTag)?(e.effectTag=-2049&t|64,e):null;case 18:return null;case 4:return Kf(),null;case 10:return Zg(e),null;default:return null}}var zr=st.ReactCurrentDispatcher,Ur=st.ReactCurrentOwner,Vr=1073741822,Gr=!1,Wr=null,qr=null,Hr=0,Xr=-1,Kr=!1,Zr=null,Yr=!1,Jr=null,Qr=null,$r=null,ti=null;function Sh(){if(null!==Wr)for(var e=Wr.return;null!==e;){var t=e;switch(t.tag){case 1:var n=t.type.childContextTypes;null!=n&&Ke();break;case 3:Kf(),Le();break;case 5:Mf(t);break;case 4:Kf();break;case 10:Zg(t)}e=e.return}qr=null,Hr=0,Xr=-1,Kr=!1,Wr=null}function Th(){for(;null!==Zr;){var e=Zr.effectTag;if(16&e&&ke(Zr.stateNode,""),128&e){var t=Zr.alternate;null!==t&&(null!==(t=t.ref)&&("function"==typeof t?t(null):t.current=null))}switch(14&e){case 2:yh(Zr),Zr.effectTag&=-3;break;case 6:yh(Zr),Zr.effectTag&=-3,zh(Zr.alternate,Zr);break;case 4:zh(Zr.alternate,Zr);break;case 8:wh(e=Zr),e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,null!==(e=e.alternate)&&(e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null)}Zr=Zr.nextEffect}}function Uh(){for(;null!==Zr;){if(256&Zr.effectTag)e:{var e=Zr.alternate,t=Zr;switch(t.tag){case 0:case 11:case 15:th(Yn,Zn,t);break e;case 1:if(256&t.effectTag&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:L(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}break e;case 3:case 5:case 6:case 4:case 17:break e;default:x("163")}}Zr=Zr.nextEffect}}function Vh(e,t){for(;null!==Zr;){var n=Zr.effectTag;if(36&n){var r=Zr.alternate,i=Zr,o=t;switch(i.tag){case 0:case 11:case 15:th($n,er,i);break;case 1:var a=i.stateNode;if(4&i.effectTag)if(null===r)a.componentDidMount();else{var s=i.elementType===i.type?r.memoizedProps:L(i.type,r.memoizedProps);a.componentDidUpdate(s,r.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}null!==(r=i.updateQueue)&&hh(0,r,a);break;case 3:if(null!==(r=i.updateQueue)){if(a=null,null!==i.child)switch(i.child.tag){case 5:a=i.child.stateNode;break;case 1:a=i.child.stateNode}hh(0,r,a)}break;case 5:o=i.stateNode,null===r&&4&i.effectTag&&we(i.type,i.memoizedProps)&&o.focus();break;case 6:case 4:case 12:case 13:case 17:break;default:x("163")}}128&n&&(null!==(i=Zr.ref)&&(o=Zr.stateNode,"function"==typeof i?i(o):i.current=o)),512&n&&(Jr=e),Zr=Zr.nextEffect}}function Wh(e,t){$r=Qr=Jr=null;var n=si;si=!0;do{if(512&t.effectTag){var r=!1,i=void 0;try{var o=t;th(nr,Zn,o),th(Zn,tr,o)}catch(e){r=!0,i=e}r&&sh(t,i)}t=t.nextEffect}while(null!==t);si=n,0!==(n=e.expirationTime)&&Xh(e,n),vi||si||Yh(1073741823,!1)}function of(){null!==Qr&&In(Qr),null!==$r&&$r()}function Zh(e,t){Yr=Gr=!0,e.current===t&&x("177");var n=e.pendingCommitExpirationTime;0===n&&x("261"),e.pendingCommitExpirationTime=0;var r=t.expirationTime,i=t.childExpirationTime;for(ef(e,i>r?i:r),Ur.current=null,r=void 0,1<t.effectTag?null!==t.lastEffect?(t.lastEffect.nextEffect=t,r=t.firstEffect):r=t:r=t.firstEffect,Cn=ln,kn=Pd(),ln=!1,Zr=r;null!==Zr;){i=!1;var o=void 0;try{Uh()}catch(e){i=!0,o=e}i&&(null===Zr&&x("178"),sh(Zr,o),null!==Zr&&(Zr=Zr.nextEffect))}for(Zr=r;null!==Zr;){i=!1,o=void 0;try{Th()}catch(e){i=!0,o=e}i&&(null===Zr&&x("178"),sh(Zr,o),null!==Zr&&(Zr=Zr.nextEffect))}for(Qd(kn),kn=null,ln=!!Cn,Cn=null,e.current=t,Zr=r;null!==Zr;){i=!1,o=void 0;try{Vh(e,n)}catch(e){i=!0,o=e}i&&(null===Zr&&x("178"),sh(Zr,o),null!==Zr&&(Zr=Zr.nextEffect))}if(null!==r&&null!==Jr){var a=Wh.bind(null,e,r);Qr=s.unstable_runWithPriority(s.unstable_NormalPriority,function(){return On(a)}),$r=a}Gr=Yr=!1,"function"==typeof Nn&&Nn(t.stateNode),n=t.expirationTime,0===(t=(t=t.childExpirationTime)>n?t:n)&&(ti=null),$h(e,t)}function ai(e){for(;;){var t=e.alternate,n=e.return,r=e.sibling;if(0==(1024&e.effectTag)){Wr=e;e:{var i=t,o=Hr,s=(t=e).pendingProps;switch(t.tag){case 2:case 16:break;case 15:case 0:break;case 1:J(t.type)&&Ke();break;case 3:Kf(),Le(),(s=t.stateNode).pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),null!==i&&null!==i.child||(Eg(t),t.effectTag&=-3),jr(t);break;case 5:Mf(t);var l=If(Kn.current);if(o=t.type,null!==i&&null!=t.stateNode)Dr(i,t,o,s,l),i.ref!==t.ref&&(t.effectTag|=128);else if(s){var u=If(Hn.current);if(Eg(t)){i=(s=t).stateNode;var c=s.type,p=s.memoizedProps,h=l;switch(i[X]=s,i[Z]=p,o=void 0,l=c){case"iframe":case"object":E("load",i);break;case"video":case"audio":for(c=0;c<me.length;c++)E(me[c],i);break;case"source":E("error",i);break;case"img":case"image":case"link":E("error",i),E("load",i);break;case"form":E("reset",i),E("submit",i);break;case"details":E("toggle",i);break;case"input":wc(i,p),E("invalid",i),se(h,"onChange");break;case"select":i._wrapperState={wasMultiple:!!p.multiple},E("invalid",i),se(h,"onChange");break;case"textarea":ce(i,p),E("invalid",i),se(h,"onChange")}for(o in qe(l,p),c=null,p)p.hasOwnProperty(o)&&(u=p[o],"children"===o?"string"==typeof u?i.textContent!==u&&(c=["children",u]):"number"==typeof u&&i.textContent!==""+u&&(c=["children",""+u]):N.hasOwnProperty(o)&&null!=u&&se(h,o));switch(l){case"input":Rb(i),Ac(i,p,!0);break;case"textarea":Rb(i),ee(i);break;case"select":case"option":break;default:"function"==typeof p.onClick&&(i.onclick=te)}o=c,s.updateQueue=o,(s=null!==o)&&kh(t)}else{p=t,i=o,h=s,c=9===l.nodeType?l:l.ownerDocument,u===_n.html&&(u=ge(i)),u===_n.html?"script"===i?((i=c.createElement("div")).innerHTML="<script><\/script>",c=i.removeChild(i.firstChild)):"string"==typeof h.is?c=c.createElement(i,{is:h.is}):(c=c.createElement(i),"select"===i&&h.multiple&&(c.multiple=!0)):c=c.createElementNS(u,i),(i=c)[X]=p,i[Z]=s,Mr(i,t,!1,!1),h=i;var f=l,d=re(c=o,p=s);switch(c){case"iframe":case"object":E("load",h),l=p;break;case"video":case"audio":for(l=0;l<me.length;l++)E(me[l],h);l=p;break;case"source":E("error",h),l=p;break;case"img":case"image":case"link":E("error",h),E("load",h),l=p;break;case"form":E("reset",h),E("submit",h),l=p;break;case"details":E("toggle",h),l=p;break;case"input":wc(h,p),l=vc(h,p),E("invalid",h),se(f,"onChange");break;case"option":l=$d(h,p);break;case"select":h._wrapperState={wasMultiple:!!p.multiple},l=a({},p,{value:void 0}),E("invalid",h),se(f,"onChange");break;case"textarea":ce(h,p),l=be(h,p),E("invalid",h),se(f,"onChange");break;default:l=p}qe(c,l),u=void 0;var g=c,m=h,y=l;for(u in y)if(y.hasOwnProperty(u)){var v=y[u];"style"===u?oe(m,v):"dangerouslySetInnerHTML"===u?null!=(v=v?v.__html:void 0)&&wn(m,v):"children"===u?"string"==typeof v?("textarea"!==g||""!==v)&&ke(m,v):"number"==typeof v&&ke(m,""+v):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(N.hasOwnProperty(u)?null!=v&&se(f,u):null!=v&&tc(m,u,v,d))}switch(c){case"input":Rb(h),Ac(h,p,!1);break;case"textarea":Rb(h),ee(h);break;case"option":null!=p.value&&h.setAttribute("value",""+uc(p.value));break;case"select":(l=h).multiple=!!p.multiple,null!=(h=p.value)?ae(l,!!p.multiple,h,!1):null!=p.defaultValue&&ae(l,!!p.multiple,p.defaultValue,!0);break;default:"function"==typeof l.onClick&&(h.onclick=te)}(s=we(o,s))&&kh(t),t.stateNode=i}null!==t.ref&&(t.effectTag|=128)}else null===t.stateNode&&x("166");break;case 6:i&&null!=t.stateNode?Fr(i,t,i.memoizedProps,s):("string"!=typeof s&&(null===t.stateNode&&x("166")),i=If(Kn.current),If(Hn.current),Eg(t)?(o=(s=t).stateNode,i=s.memoizedProps,o[X]=s,(s=o.nodeValue!==i)&&kh(t)):(o=t,(s=(9===i.nodeType?i:i.ownerDocument).createTextNode(s))[X]=t,o.stateNode=s));break;case 11:break;case 13:if(s=t.memoizedState,0!=(64&t.effectTag)){t.expirationTime=o,Wr=t;break e}s=null!==s,o=null!==i&&null!==i.memoizedState,null!==i&&!s&&o&&(null!==(i=i.child.sibling)&&(null!==(l=t.firstEffect)?(t.firstEffect=i,i.nextEffect=l):(t.firstEffect=t.lastEffect=i,i.nextEffect=null),i.effectTag=8)),(s||o)&&(t.effectTag|=4);break;case 7:case 8:case 12:break;case 4:Kf(),jr(t);break;case 10:Zg(t);break;case 9:case 14:break;case 17:J(t.type)&&Ke();break;case 18:break;default:x("156")}Wr=null}if(t=e,1===Hr||1!==t.childExpirationTime){for(s=0,o=t.child;null!==o;)(i=o.expirationTime)>s&&(s=i),(l=o.childExpirationTime)>s&&(s=l),o=o.sibling;t.childExpirationTime=s}if(null!==Wr)return Wr;null!==n&&0==(1024&n.effectTag)&&(null===n.firstEffect&&(n.firstEffect=e.firstEffect),null!==e.lastEffect&&(null!==n.lastEffect&&(n.lastEffect.nextEffect=e.firstEffect),n.lastEffect=e.lastEffect),1<e.effectTag&&(null!==n.lastEffect?n.lastEffect.nextEffect=e:n.firstEffect=e,n.lastEffect=e))}else{if(null!==(e=Gh(e)))return e.effectTag&=1023,e;null!==n&&(n.firstEffect=n.lastEffect=null,n.effectTag|=1024)}if(null!==r)return r;if(null===n)break;e=n}return null}function bi(e){var t=Tg(e.alternate,e,Hr);return e.memoizedProps=e.pendingProps,null===t&&(t=ai(e)),Ur.current=null,t}function ci(e,t){Gr&&x("243"),of(),Gr=!0;var n=zr.current;zr.current=yr;var r=e.nextExpirationTimeToWorkOn;r===Hr&&e===qr&&null!==Wr||(Sh(),Hr=r,Wr=Xe((qr=e).current,null),e.pendingCommitExpirationTime=0);for(var i=!1;;){try{if(t)for(;null!==Wr&&!di();)Wr=bi(Wr);else for(;null!==Wr;)Wr=bi(Wr)}catch(t){if(Tr=kr=Cr=null,lg(),null===Wr)i=!0,Dh(t);else{null===Wr&&x("271");var o=Wr,a=o.return;if(null!==a){e:{var s=e,l=a,u=o,c=t;if(a=Hr,u.effectTag|=1024,u.firstEffect=u.lastEffect=null,null!==c&&"object"==typeof c&&"function"==typeof c.then){var p=c;c=l;var h=-1,f=-1;do{if(13===c.tag){var d=c.alternate;if(null!==d&&null!==(d=d.memoizedState)){f=10*(1073741822-d.timedOutAt);break}"number"==typeof(d=c.pendingProps.maxDuration)&&(0>=d?h=0:(-1===h||d<h)&&(h=d))}c=c.return}while(null!==c);c=l;do{if((d=13===c.tag)&&(d=void 0!==c.memoizedProps.fallback&&null===c.memoizedState),d){if(null===(l=c.updateQueue)?((l=new Set).add(p),c.updateQueue=l):l.add(p),0==(1&c.mode)){c.effectTag|=64,u.effectTag&=-1957,1===u.tag&&(null===u.alternate?u.tag=17:((a=nf(1073741823)).tag=Ir,pf(u,a))),u.expirationTime=1073741823;break e}l=a;var g=(u=s).pingCache;null===g?(g=u.pingCache=new Br,d=new Set,g.set(p,d)):void 0===(d=g.get(p))&&(d=new Set,g.set(p,d)),d.has(l)||(d.add(l),u=ei.bind(null,u,p,l),p.then(u,u)),-1===h?s=1073741823:(-1===f&&(f=10*(1073741822-gf(s,a))-5e3),s=f+h),0<=s&&Xr<s&&(Xr=s),c.effectTag|=2048,c.expirationTime=a;break e}c=c.return}while(null!==c);c=Error((ic(u.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+jc(u))}Kr=!0,c=jh(c,u),s=l;do{switch(s.tag){case 3:s.effectTag|=2048,s.expirationTime=a,eh(s,a=Ch(s,c,a));break e;case 1:if(h=c,f=s.type,u=s.stateNode,0==(64&s.effectTag)&&("function"==typeof f.getDerivedStateFromError||null!==u&&"function"==typeof u.componentDidCatch&&(null===ti||!ti.has(u)))){s.effectTag|=2048,s.expirationTime=a,eh(s,a=Eh(s,h,a));break e}}s=s.return}while(null!==s)}Wr=ai(o);continue}i=!0,Dh(t)}}break}if(Gr=!1,zr.current=n,Tr=kr=Cr=null,lg(),i)qr=null,e.finishedWork=null;else if(null!==Wr)e.finishedWork=null;else{if(null===(n=e.current.alternate)&&x("281"),qr=null,Kr){if(i=e.latestPendingTime,o=e.latestSuspendedTime,a=e.latestPingedTime,0!==i&&i<r||0!==o&&o<r||0!==a&&a<r)return ff(e,r),void fi(e,n,r,e.expirationTime,-1);if(!e.didError&&t)return e.didError=!0,r=e.nextExpirationTimeToWorkOn=r,t=e.expirationTime=1073741823,void fi(e,n,r,t,-1)}t&&-1!==Xr?(ff(e,r),(t=10*(1073741822-gf(e,r)))<Xr&&(Xr=t),t=10*(1073741822-lf()),t=Xr-t,fi(e,n,r,e.expirationTime,0>t?0:t)):(e.pendingCommitExpirationTime=r,e.finishedWork=n)}}function sh(e,t){for(var n=e.return;null!==n;){switch(n.tag){case 1:var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===ti||!ti.has(r)))return pf(n,e=Eh(n,e=jh(t,e),1073741823)),void qf(n,1073741823);break;case 3:return pf(n,e=Ch(n,e=jh(t,e),1073741823)),void qf(n,1073741823)}n=n.return}3===e.tag&&(pf(e,n=Ch(e,n=jh(t,e),1073741823)),qf(e,1073741823))}function mf(e,t){var n=s.unstable_getCurrentPriorityLevel(),r=void 0;if(0==(1&t.mode))r=1073741823;else if(Gr&&!Yr)r=Hr;else{switch(n){case s.unstable_ImmediatePriority:r=1073741823;break;case s.unstable_UserBlockingPriority:r=1073741822-10*(1+((1073741822-e+15)/10|0));break;case s.unstable_NormalPriority:r=1073741822-25*(1+((1073741822-e+500)/25|0));break;case s.unstable_LowPriority:case s.unstable_IdlePriority:r=1;break;default:x("313")}null!==qr&&r===Hr&&--r}return n===s.unstable_UserBlockingPriority&&(0===pi||r<pi)&&(pi=r),r}function ei(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),null!==qr&&Hr===n?qr=null:(t=e.earliestSuspendedTime,r=e.latestSuspendedTime,0!==t&&n<=t&&n>=r&&(e.didError=!1,(0===(t=e.latestPingedTime)||t>n)&&(e.latestPingedTime=n),df(n,e),0!==(n=e.expirationTime)&&Xh(e,n)))}function Ah(e,t){var n=e.stateNode;null!==n&&n.delete(t),null!==(e=hi(e,t=mf(t=lf(),e)))&&(cf(e,t),0!==(t=e.expirationTime)&&Xh(e,t))}function hi(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t);var r=e.return,i=null;if(null===r&&3===e.tag)i=e.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<t&&(r.childExpirationTime=t),null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return i}function qf(e,t){null!==(e=hi(e,t))&&(!Gr&&0!==Hr&&t>Hr&&Sh(),cf(e,t),Gr&&!Yr&&qr===e||Xh(e,e.expirationTime),qi>Wi&&(qi=0,x("185")))}function ki(e,t,n,r,i){return s.unstable_runWithPriority(s.unstable_ImmediatePriority,function(){return e(t,n,r,i)})}var ni=null,ri=null,ii=0,oi=void 0,si=!1,li=null,ui=0,pi=0,gi=!1,mi=null,vi=!1,_i=!1,wi=null,Ei=s.unstable_now(),ji=1073741822-(Ei/10|0),Vi=ji,Wi=50,qi=0,Xi=null;function xi(){ji=1073741822-((s.unstable_now()-Ei)/10|0)}function yi(e,t){if(0!==ii){if(t<ii)return;null!==oi&&s.unstable_cancelCallback(oi)}ii=t,e=s.unstable_now()-Ei,oi=s.unstable_scheduleCallback(zi,{timeout:10*(1073741822-t)-e})}function fi(e,t,n,r,i){e.expirationTime=r,0!==i||di()?0<i&&(e.timeoutHandle=Tn(Ai.bind(null,e,t,n),i)):(e.pendingCommitExpirationTime=n,e.finishedWork=t)}function Ai(e,t,n){e.pendingCommitExpirationTime=n,e.finishedWork=t,xi(),Vi=ji,Bi(e,n)}function $h(e,t){e.expirationTime=t,e.finishedWork=null}function lf(){return si?Vi:(Ci(),0!==ui&&1!==ui||(xi(),Vi=ji),Vi)}function Xh(e,t){null===e.nextScheduledRoot?(e.expirationTime=t,null===ri?(ni=ri=e,e.nextScheduledRoot=e):(ri=ri.nextScheduledRoot=e).nextScheduledRoot=ni):t>e.expirationTime&&(e.expirationTime=t),si||(vi?_i&&(li=e,ui=1073741823,Di(e,1073741823,!1)):1073741823===t?Yh(1073741823,!1):yi(e,t))}function Ci(){var e=0,t=null;if(null!==ri)for(var n=ri,r=ni;null!==r;){var i=r.expirationTime;if(0===i){if((null===n||null===ri)&&x("244"),r===r.nextScheduledRoot){ni=ri=r.nextScheduledRoot=null;break}if(r===ni)ni=i=r.nextScheduledRoot,ri.nextScheduledRoot=i,r.nextScheduledRoot=null;else{if(r===ri){(ri=n).nextScheduledRoot=ni,r.nextScheduledRoot=null;break}n.nextScheduledRoot=r.nextScheduledRoot,r.nextScheduledRoot=null}r=n.nextScheduledRoot}else{if(i>e&&(e=i,t=r),r===ri)break;if(1073741823===e)break;n=r,r=r.nextScheduledRoot}}li=t,ui=e}var Zi=!1;function di(){return!!Zi||!!s.unstable_shouldYield()&&(Zi=!0)}function zi(){try{if(!di()&&null!==ni){xi();var e=ni;do{var t=e.expirationTime;0!==t&&ji<=t&&(e.nextExpirationTimeToWorkOn=ji),e=e.nextScheduledRoot}while(e!==ni)}Yh(0,!0)}finally{Zi=!1}}function Yh(e,t){if(Ci(),t)for(xi(),Vi=ji;null!==li&&0!==ui&&e<=ui&&!(Zi&&ji>ui);)Di(li,ui,ji>ui),Ci(),xi(),Vi=ji;else for(;null!==li&&0!==ui&&e<=ui;)Di(li,ui,!1),Ci();if(t&&(ii=0,oi=null),0!==ui&&yi(li,ui),qi=0,Xi=null,null!==wi)for(e=wi,wi=null,t=0;t<e.length;t++){var n=e[t];try{n._onComplete()}catch(e){gi||(gi=!0,mi=e)}}if(gi)throw e=mi,mi=null,gi=!1,e}function Bi(e,t){si&&x("253"),li=e,ui=t,Di(e,t,!1),Yh(1073741823,!1)}function Di(e,t,n){if(si&&x("245"),si=!0,n){var r=e.finishedWork;null!==r?Fi(e,r,t):(e.finishedWork=null,-1!==(r=e.timeoutHandle)&&(e.timeoutHandle=-1,An(r)),ci(e,n),null!==(r=e.finishedWork)&&(di()?e.finishedWork=r:Fi(e,r,t)))}else null!==(r=e.finishedWork)?Fi(e,r,t):(e.finishedWork=null,-1!==(r=e.timeoutHandle)&&(e.timeoutHandle=-1,An(r)),ci(e,n),null!==(r=e.finishedWork)&&Fi(e,r,t));si=!1}function Fi(e,t,n){var r=e.firstBatch;if(null!==r&&r._expirationTime>=n&&(null===wi?wi=[r]:wi.push(r),r._defer))return e.finishedWork=t,void(e.expirationTime=0);e.finishedWork=null,e===Xi?qi++:(Xi=e,qi=0),s.unstable_runWithPriority(s.unstable_ImmediatePriority,function(){Zh(e,t)})}function Dh(e){null===li&&x("246"),li.expirationTime=0,gi||(gi=!0,mi=e)}function Gi(e,t){var n=vi;vi=!0;try{return e(t)}finally{(vi=n)||si||Yh(1073741823,!1)}}function Hi(e,t){if(vi&&!_i){_i=!0;try{return e(t)}finally{_i=!1}}return e(t)}function Ii(e,t,n){vi||si||0===pi||(Yh(pi,!1),pi=0);var r=vi;vi=!0;try{return s.unstable_runWithPriority(s.unstable_UserBlockingPriority,function(){return e(t,n)})}finally{(vi=r)||si||Yh(1073741823,!1)}}function Ji(e,t,n,r,i){var o=t.current;e:if(n){t:{2===ed(n=n._reactInternalFiber)&&1===n.tag||x("170");var a=n;do{switch(a.tag){case 3:a=a.stateNode.context;break t;case 1:if(J(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break t}}a=a.return}while(null!==a);x("171"),a=void 0}if(1===n.tag){var s=n.type;if(J(s)){n=Ne(n,s,a);break e}}n=a}else n=Mn;return null===t.context?t.context=n:t.pendingContext=n,t=i,(i=nf(r)).payload={element:e},null!==(t=void 0===t?null:t)&&(i.callback=t),of(),pf(o,i),qf(o,r),r}function Ki(e,t,n,r){var i=t.current;return Ji(e,t,n,i=mf(lf(),i),r)}function Li(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Mi(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:pt,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Ni(e){var t=1073741822-25*(1+((1073741822-lf()+500)/25|0));t>=Vr&&(t=Vr-1),this._expirationTime=Vr=t,this._root=e,this._callbacks=this._next=null,this._hasChildren=this._didComplete=!1,this._children=null,this._defer=!0}function Oi(){this._callbacks=null,this._didCommit=!1,this._onCommit=this._onCommit.bind(this)}function Pi(e,t,n){e={current:t=K(3,null,null,t?3:0),containerInfo:e,pendingChildren:null,pingCache:null,earliestPendingTime:0,latestPendingTime:0,earliestSuspendedTime:0,latestSuspendedTime:0,latestPingedTime:0,didError:!1,pendingCommitExpirationTime:0,finishedWork:null,timeoutHandle:-1,context:null,pendingContext:null,hydrate:n,nextExpirationTimeToWorkOn:0,expirationTime:0,firstBatch:null,nextScheduledRoot:null},this._internalRoot=t.stateNode=e}function Qi(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Ri(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new Pi(e,!1,t)}function Si(e,t,n,r,i){var o=n._reactRootContainer;if(o){if("function"==typeof i){var a=i;i=function(){var e=Li(o._internalRoot);a.call(e)}}null!=e?o.legacy_renderSubtreeIntoContainer(e,t,i):o.render(t,i)}else{if(o=n._reactRootContainer=Ri(n,r),"function"==typeof i){var s=i;i=function(){var e=Li(o._internalRoot);s.call(e)}}Hi(function(){null!=e?o.legacy_renderSubtreeIntoContainer(e,t,i):o.render(t,i)})}return Li(o._internalRoot)}function Ti(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return Qi(t)||x("200"),Mi(e,t,null,n)}nt=function(e,t,n){switch(t){case"input":if(yc(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Ka(r);i||x("90"),Sb(r),yc(r,i)}}}break;case"textarea":de(e,n);break;case"select":null!=(t=n.value)&&ae(e,!!n.multiple,t,!1)}},Ni.prototype.render=function(e){this._defer||x("250"),this._hasChildren=!0,this._children=e;var t=this._root._internalRoot,n=this._expirationTime,r=new Oi;return Ji(e,t,null,n,r._onCommit),r},Ni.prototype.then=function(e){if(this._didComplete)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},Ni.prototype.commit=function(){var e=this._root._internalRoot,t=e.firstBatch;if(this._defer&&null!==t||x("251"),this._hasChildren){var n=this._expirationTime;if(t!==this){this._hasChildren&&(n=this._expirationTime=t._expirationTime,this.render(this._children));for(var r=null,i=t;i!==this;)r=i,i=i._next;null===r&&x("251"),r._next=i._next,this._next=t,e.firstBatch=this}this._defer=!1,Bi(e,n),t=this._next,this._next=null,null!==(t=e.firstBatch=t)&&t._hasChildren&&t.render(t._children)}else this._next=null,this._defer=!1},Ni.prototype._onComplete=function(){if(!this._didComplete){this._didComplete=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++)(0,e[t])()}},Oi.prototype.then=function(e){if(this._didCommit)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},Oi.prototype._onCommit=function(){if(!this._didCommit){this._didCommit=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++){var n=e[t];"function"!=typeof n&&x("191",n),n()}}},Pi.prototype.render=function(e,t){var n=this._internalRoot,r=new Oi;return null!==(t=void 0===t?null:t)&&r.then(t),Ki(e,n,null,r._onCommit),r},Pi.prototype.unmount=function(e){var t=this._internalRoot,n=new Oi;return null!==(e=void 0===e?null:e)&&n.then(e),Ki(null,t,null,n._onCommit),n},Pi.prototype.legacy_renderSubtreeIntoContainer=function(e,t,n){var r=this._internalRoot,i=new Oi;return null!==(n=void 0===n?null:n)&&i.then(n),Ki(t,r,e,i._onCommit),i},Pi.prototype.createBatch=function(){var e=new Ni(this),t=e._expirationTime,n=this._internalRoot,r=n.firstBatch;if(null===r)n.firstBatch=e,e._next=null;else{for(n=null;null!==r&&r._expirationTime>=t;)n=r,r=r._next;e._next=r,null!==n&&(n._next=e)}return e},Gb=Gi,Hb=Ii,Ib=function(){si||0===pi||(Yh(pi,!1),pi=0)};var Yi={createPortal:Ti,findDOMNode:function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;return void 0===t&&("function"==typeof e.render?x("188"):x("268",Object.keys(e))),e=null===(e=hd(t))?null:e.stateNode},hydrate:function(e,t,n){return Qi(t)||x("200"),Si(null,e,t,!0,n)},render:function(e,t,n){return Qi(t)||x("200"),Si(null,e,t,!1,n)},unstable_renderSubtreeIntoContainer:function(e,t,n,r){return Qi(n)||x("200"),(null==e||void 0===e._reactInternalFiber)&&x("38"),Si(e,t,n,!1,r)},unmountComponentAtNode:function(e){return Qi(e)||x("40"),!!e._reactRootContainer&&(Hi(function(){Si(null,null,e,!1,function(){e._reactRootContainer=null})}),!0)},unstable_createPortal:function(){return Ti.apply(void 0,arguments)},unstable_batchedUpdates:Gi,unstable_interactiveUpdates:Ii,flushSync:function(e,t){si&&x("187");var n=vi;vi=!0;try{return ki(e,t)}finally{vi=n,Yh(1073741823,!1)}},unstable_createRoot:function Ui(e,t){return Qi(e)||x("299","unstable_createRoot"),new Pi(e,!0,null!=t&&!0===t.hydrate)},unstable_flushControlled:function(e){var t=vi;vi=!0;try{ki(e)}finally{(vi=t)||si||Yh(1073741823,!1)}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{Events:[Ia,Ja,Ka,q.injectEventPluginsByName,D,Qa,function(e){ya(e,Pa)},Eb,Fb,Dd,Da]}};!function(e){var t=e.findFiberByHostInstance;Te(a({},e,{overrideProps:null,currentDispatcherRef:st.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=hd(e))?null:e.stateNode},findFiberByHostInstance:function(e){return t?t(e):null}}))}({findFiberByHostInstance:Ha,bundleType:0,version:"16.8.4",rendererPackageName:"react-dom"});var $i={default:Yi},eo=$i&&Yi||$i;n.exports=eo.default||eo},function(e,t,n){"use strict";
/** @license React v16.8.4
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(205),i="function"==typeof Symbol&&Symbol.for,o=i?Symbol.for("react.element"):60103,a=i?Symbol.for("react.portal"):60106,s=i?Symbol.for("react.fragment"):60107,l=i?Symbol.for("react.strict_mode"):60108,u=i?Symbol.for("react.profiler"):60114,c=i?Symbol.for("react.provider"):60109,p=i?Symbol.for("react.context"):60110,h=i?Symbol.for("react.concurrent_mode"):60111,f=i?Symbol.for("react.forward_ref"):60112,d=i?Symbol.for("react.suspense"):60113,g=i?Symbol.for("react.memo"):60115,m=i?Symbol.for("react.lazy"):60116,y="function"==typeof Symbol&&Symbol.iterator;function ca(e,t,n,r,i,o,a,s){if(!e){if(e=void 0,void 0===t)e=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,i,o,a,s],u=0;(e=Error(t.replace(/%s/g,function(){return l[u++]}))).name="Invariant Violation"}throw e.framesToPop=1,e}}function B(e){for(var t=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);ca(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_={};function E(e,t,n){this.props=e,this.context=t,this.refs=_,this.updater=n||v}function F(){}function G(e,t,n){this.props=e,this.context=t,this.refs=_,this.updater=n||v}E.prototype.isReactComponent={},E.prototype.setState=function(e,t){"object"!=typeof e&&"function"!=typeof e&&null!=e&&B("85"),this.updater.enqueueSetState(this,e,t,"setState")},E.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},F.prototype=E.prototype;var b=G.prototype=new F;b.constructor=G,r(b,E.prototype),b.isPureReactComponent=!0;var x={current:null},w={current:null},P=Object.prototype.hasOwnProperty,C={key:!0,ref:!0,__self:!0,__source:!0};function M(e,t,n){var r=void 0,i={},a=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)P.call(t,r)&&!C.hasOwnProperty(r)&&(i[r]=t[r]);var l=arguments.length-2;if(1===l)i.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===i[r]&&(i[r]=l[r]);return{$$typeof:o,type:e,key:a,ref:s,props:i,_owner:w.current}}function da(e,t){return{$$typeof:o,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function N(e){return"object"==typeof e&&null!==e&&e.$$typeof===o}function escape(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(e){return t[e]})}var k=/\/+/g,A=[];function Q(e,t,n,r){if(A.length){var i=A.pop();return i.result=e,i.keyPrefix=t,i.func=n,i.context=r,i.count=0,i}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function R(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>A.length&&A.push(e)}function S(e,t,n,r){var i=typeof e;"undefined"!==i&&"boolean"!==i||(e=null);var s=!1;if(null===e)s=!0;else switch(i){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case o:case a:s=!0}}if(s)return n(r,e,""===t?"."+T(e,0):t),1;if(s=0,t=""===t?".":t+":",Array.isArray(e))for(var l=0;l<e.length;l++){var u=t+T(i=e[l],l);s+=S(i,u,n,r)}else if(null===e||"object"!=typeof e?u=null:u="function"==typeof(u=y&&e[y]||e["@@iterator"])?u:null,"function"==typeof u)for(e=u.call(e),l=0;!(i=e.next()).done;)s+=S(i=i.value,u=t+T(i,l++),n,r);else"object"===i&&B("31","[object Object]"===(n=""+e)?"object with keys {"+Object.keys(e).join(", ")+"}":n,"");return s}function U(e,t,n){return null==e?0:S(e,"",t,n)}function T(e,t){return"object"==typeof e&&null!==e&&null!=e.key?escape(e.key):t.toString(36)}function ea(e,t){e.func.call(e.context,t,e.count++)}function fa(e,t,n){var r=e.result,i=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?V(e,r,n,function(e){return e}):null!=e&&(N(e)&&(e=da(e,i+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(k,"$&/")+"/")+n)),r.push(e))}function V(e,t,n,r,i){var o="";null!=n&&(o=(""+n).replace(k,"$&/")+"/"),U(e,fa,t=Q(t,o,r,i)),R(t)}function W(){var e=x.current;return null===e&&B("307"),e}var O={Children:{map:function(e,t,n){if(null==e)return e;var r=[];return V(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;U(e,ea,t=Q(null,null,t,n)),R(t)},count:function(e){return U(e,function(){return null},null)},toArray:function(e){var t=[];return V(e,t,null,function(e){return e}),t},only:function(e){return N(e)||B("143"),e}},createRef:function(){return{current:null}},Component:E,PureComponent:G,createContext:function(e,t){return void 0===t&&(t=null),(e={$$typeof:p,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:c,_context:e},e.Consumer=e},forwardRef:function(e){return{$$typeof:f,render:e}},lazy:function(e){return{$$typeof:m,_ctor:e,_status:-1,_result:null}},memo:function(e,t){return{$$typeof:g,type:e,compare:void 0===t?null:t}},useCallback:function(e,t){return W().useCallback(e,t)},useContext:function(e,t){return W().useContext(e,t)},useEffect:function(e,t){return W().useEffect(e,t)},useImperativeHandle:function(e,t,n){return W().useImperativeHandle(e,t,n)},useDebugValue:function(){},useLayoutEffect:function(e,t){return W().useLayoutEffect(e,t)},useMemo:function(e,t){return W().useMemo(e,t)},useReducer:function(e,t,n){return W().useReducer(e,t,n)},useRef:function(e){return W().useRef(e)},useState:function(e){return W().useState(e)},Fragment:s,StrictMode:l,Suspense:d,createElement:M,cloneElement:function(e,t,n){null==e&&B("267",e);var i=void 0,a=r({},e.props),s=e.key,l=e.ref,u=e._owner;if(null!=t){void 0!==t.ref&&(l=t.ref,u=w.current),void 0!==t.key&&(s=""+t.key);var c=void 0;for(i in e.type&&e.type.defaultProps&&(c=e.type.defaultProps),t)P.call(t,i)&&!C.hasOwnProperty(i)&&(a[i]=void 0===t[i]&&void 0!==c?c[i]:t[i])}if(1===(i=arguments.length-2))a.children=n;else if(1<i){c=Array(i);for(var p=0;p<i;p++)c[p]=arguments[p+2];a.children=c}return{$$typeof:o,type:e.type,key:s,ref:l,props:a,_owner:u}},createFactory:function(e){var t=M.bind(null,e);return t.type=e,t},isValidElement:N,version:"16.8.4",unstable_ConcurrentMode:h,unstable_Profiler:u,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentDispatcher:x,ReactCurrentOwner:w,assign:r}},I={default:O},L=I&&O||I;e.exports=L.default||L},function(e,t,n){"use strict";e.exports=n(310)},function(e,n,r){"use strict";(function(e){
/** @license React v0.13.4
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
Object.defineProperty(n,"__esModule",{value:!0});var r=null,i=!1,o=3,a=-1,s=-1,l=!1,c=!1;function p(){if(!l){var e=r.expirationTime;c?w():c=!0,x(t,e)}}function u(){var e=r,t=r.next;if(r===t)r=null;else{var n=r.previous;r=n.next=t,t.previous=n}e.next=e.previous=null,n=e.callback,t=e.expirationTime,e=e.priorityLevel;var i=o,a=s;o=e,s=t;try{var l=n()}finally{o=i,s=a}if("function"==typeof l)if(l={callback:l,priorityLevel:e,expirationTime:t,next:null,previous:null},null===r)r=l.next=l.previous=l;else{n=null,e=r;do{if(e.expirationTime>=t){n=e;break}e=e.next}while(e!==r);null===n?n=r:n===r&&(r=l,p()),(t=n.previous).next=n.previous=l,l.next=n,l.previous=t}}function v(){if(-1===a&&null!==r&&1===r.priorityLevel){l=!0;try{do{u()}while(null!==r&&1===r.priorityLevel)}finally{l=!1,null!==r?p():c=!1}}}function t(e){l=!0;var t=i;i=e;try{if(e)for(;null!==r;){var o=n.unstable_now();if(!(r.expirationTime<=o))break;do{u()}while(null!==r&&r.expirationTime<=o)}else if(null!==r)do{u()}while(null!==r&&!S())}finally{l=!1,i=t,null!==r?p():c=!1,v()}}var h,f,d=Date,g="function"==typeof setTimeout?setTimeout:void 0,m="function"==typeof clearTimeout?clearTimeout:void 0,y="function"==typeof requestAnimationFrame?requestAnimationFrame:void 0,_="function"==typeof cancelAnimationFrame?cancelAnimationFrame:void 0;function E(e){h=y(function(t){m(f),e(t)}),f=g(function(){_(h),e(n.unstable_now())},100)}if("object"==typeof performance&&"function"==typeof performance.now){var b=performance;n.unstable_now=function(){return b.now()}}else n.unstable_now=function(){return d.now()};var x,w,S,P=null;if("undefined"!=typeof window?P=window:void 0!==e&&(P=e),P&&P._schedMock){var C=P._schedMock;x=C[0],w=C[1],S=C[2],n.unstable_now=C[3]}else if("undefined"==typeof window||"function"!=typeof MessageChannel){var k=null,T=function(e){if(null!==k)try{k(e)}finally{k=null}};x=function(e){null!==k?setTimeout(x,0,e):(k=e,setTimeout(T,0,!1))},w=function(){k=null},S=function(){return!1}}else{"undefined"!=typeof console&&("function"!=typeof y&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof _&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"));var A=null,O=!1,I=-1,R=!1,L=!1,M=0,j=33,D=33;S=function(){return M<=n.unstable_now()};var F=new MessageChannel,N=F.port2;F.port1.onmessage=function(){O=!1;var e=A,t=I;A=null,I=-1;var r=n.unstable_now(),i=!1;if(0>=M-r){if(!(-1!==t&&t<=r))return R||(R=!0,E(B)),A=e,void(I=t);i=!0}if(null!==e){L=!0;try{e(i)}finally{L=!1}}};var B=function(e){if(null!==A){E(B);var t=e-M+D;t<D&&j<D?(8>t&&(t=8),D=t<j?j:t):j=t,M=e+D,O||(O=!0,N.postMessage(void 0))}else R=!1};x=function(e,t){A=e,I=t,L||0>t?N.postMessage(void 0):R||(R=!0,E(B))},w=function(){A=null,O=!1,I=-1}}n.unstable_ImmediatePriority=1,n.unstable_UserBlockingPriority=2,n.unstable_NormalPriority=3,n.unstable_IdlePriority=5,n.unstable_LowPriority=4,n.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=o,i=a;o=e,a=n.unstable_now();try{return t()}finally{o=r,a=i,v()}},n.unstable_next=function(e){switch(o){case 1:case 2:case 3:var t=3;break;default:t=o}var r=o,i=a;o=t,a=n.unstable_now();try{return e()}finally{o=r,a=i,v()}},n.unstable_scheduleCallback=function(e,t){var i=-1!==a?a:n.unstable_now();if("object"==typeof t&&null!==t&&"number"==typeof t.timeout)t=i+t.timeout;else switch(o){case 1:t=i+-1;break;case 2:t=i+250;break;case 5:t=i+1073741823;break;case 4:t=i+1e4;break;default:t=i+5e3}if(e={callback:e,priorityLevel:o,expirationTime:t,next:null,previous:null},null===r)r=e.next=e.previous=e,p();else{i=null;var s=r;do{if(s.expirationTime>t){i=s;break}s=s.next}while(s!==r);null===i?i=r:i===r&&(r=e,p()),(t=i.previous).next=i.previous=e,e.next=i,e.previous=t}return e},n.unstable_cancelCallback=function(e){var t=e.next;if(null!==t){if(t===e)r=null;else{e===r&&(r=t);var n=e.previous;n.next=t,t.previous=n}e.next=e.previous=null}},n.unstable_wrapCallback=function(e){var t=o;return function(){var r=o,i=a;o=t,a=n.unstable_now();try{return e.apply(this,arguments)}finally{o=r,a=i,v()}}},n.unstable_getCurrentPriorityLevel=function(){return o},n.unstable_shouldYield=function(){return!i&&(null!==r&&r.expirationTime<s||S())},n.unstable_continueExecution=function(){null!==r&&p()},n.unstable_pauseExecution=function(){},n.unstable_getFirstCallbackNode=function(){return r}}).call(this,r(31))},function(e,t){e.exports=Object.is||function is(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},function(e,t,n){var r=n(162),i=n(54)("toStringTag"),o="Arguments"==r(function(){return arguments}()),a=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,n,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=a(t=Object(e),i))?n:o?r(t):"Object"==(s=r(t))&&"function"==typeof t.callee?"Arguments":s}},function(e,t,n){"use strict";var r=n(167);n(100)({target:"RegExp",proto:!0,forced:r!==/./.exec},{exec:r})},function(e,t,n){"use strict";var r=n(315);function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction,e.exports=function(){function shim(e,t,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function getShim(){return shim}shim.isRequired=shim;var e={array:shim,bool:shim,func:shim,number:shim,object:shim,string:shim,symbol:shim,any:shim,arrayOf:getShim,element:shim,elementType:shim,instanceOf:getShim,node:shim,objectOf:getShim,oneOf:getShim,oneOfType:getShim,shape:getShim,exact:getShim,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return e.PropTypes=e,e}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){var r=n(113),i=n(101);e.exports=function(e){return function(t,n){var o,a,s=String(i(t)),l=r(n),u=s.length;return l<0||l>=u?e?"":void 0:(o=s.charCodeAt(l))<55296||o>56319||l+1===u||(a=s.charCodeAt(l+1))<56320||a>57343?e?s.charAt(l):o:e?s.slice(l,l+2):a-56320+(o-55296<<10)+65536}}},function(e,t,n){var r=n(170),i=n(209),o=n(211),a=n(347),s=n(61),l=n(216),u=n(215);e.exports=function baseMerge(e,t,n,c,p){e!==t&&o(t,function(o,l){if(s(o))p||(p=new r),a(e,t,l,n,baseMerge,c,p);else{var h=c?c(u(e,l),o,l+"",e,t,p):void 0;void 0===h&&(h=o),i(e,l,h)}},l)}},function(e,t){e.exports=function listCacheClear(){this.__data__=[],this.size=0}},function(e,t,n){var r=n(122),i=Array.prototype.splice;e.exports=function listCacheDelete(e){var t=this.__data__,n=r(t,e);return!(n<0||(n==t.length-1?t.pop():i.call(t,n,1),--this.size,0))}},function(e,t,n){var r=n(122);e.exports=function listCacheGet(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},function(e,t,n){var r=n(122);e.exports=function listCacheHas(e){return r(this.__data__,e)>-1}},function(e,t,n){var r=n(122);e.exports=function listCacheSet(e,t){var n=this.__data__,i=r(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}},function(e,t,n){var r=n(121);e.exports=function stackClear(){this.__data__=new r,this.size=0}},function(e,t){e.exports=function stackDelete(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},function(e,t){e.exports=function stackGet(e){return this.__data__.get(e)}},function(e,t){e.exports=function stackHas(e){return this.__data__.has(e)}},function(e,t,n){var r=n(121),i=n(171),o=n(173),a=200;e.exports=function stackSet(e,t){var n=this.__data__;if(n instanceof r){var s=n.__data__;if(!i||s.length<a-1)return s.push([e,t]),this.size=++n.size,this;n=this.__data__=new o(s)}return n.set(e,t),this.size=n.size,this}},function(e,t,n){var r=n(172),i=n(331),o=n(61),a=n(208),s=/^\[object .+?Constructor\]$/,l=Function.prototype,u=Object.prototype,c=l.toString,p=u.hasOwnProperty,h=RegExp("^"+c.call(p).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function baseIsNative(e){return!(!o(e)||i(e))&&(r(e)?h:s).test(a(e))}},function(e,t,n){var r=n(123),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r?r.toStringTag:void 0;e.exports=function getRawTag(e){var t=o.call(e,s),n=e[s];try{e[s]=void 0;var r=!0}catch(e){}var i=a.call(e);return r&&(t?e[s]=n:delete e[s]),i}},function(e,t){var n=Object.prototype.toString;e.exports=function objectToString(e){return n.call(e)}},function(e,t,n){var r,i=n(332),o=(r=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";e.exports=function isMasked(e){return!!o&&o in e}},function(e,t,n){var r=n(51)["__core-js_shared__"];e.exports=r},function(e,t){e.exports=function getValue(e,t){return null==e?void 0:e[t]}},function(e,t,n){var r=n(335),i=n(121),o=n(171);e.exports=function mapCacheClear(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},function(e,t,n){var r=n(336),i=n(337),o=n(338),a=n(339),s=n(340);function Hash(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Hash.prototype.clear=r,Hash.prototype.delete=i,Hash.prototype.get=o,Hash.prototype.has=a,Hash.prototype.set=s,e.exports=Hash},function(e,t,n){var r=n(124);e.exports=function hashClear(){this.__data__=r?r(null):{},this.size=0}},function(e,t){e.exports=function hashDelete(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},function(e,t,n){var r=n(124),i="__lodash_hash_undefined__",o=Object.prototype.hasOwnProperty;e.exports=function hashGet(e){var t=this.__data__;if(r){var n=t[e];return n===i?void 0:n}return o.call(t,e)?t[e]:void 0}},function(e,t,n){var r=n(124),i=Object.prototype.hasOwnProperty;e.exports=function hashHas(e){var t=this.__data__;return r?void 0!==t[e]:i.call(t,e)}},function(e,t,n){var r=n(124),i="__lodash_hash_undefined__";e.exports=function hashSet(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?i:t,this}},function(e,t,n){var r=n(125);e.exports=function mapCacheDelete(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},function(e,t){e.exports=function isKeyable(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},function(e,t,n){var r=n(125);e.exports=function mapCacheGet(e){return r(this,e).get(e)}},function(e,t,n){var r=n(125);e.exports=function mapCacheHas(e){return r(this,e).has(e)}},function(e,t,n){var r=n(125);e.exports=function mapCacheSet(e,t){var n=r(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}},function(e,t){e.exports=function createBaseFor(e){return function(t,n,r){for(var i=-1,o=Object(t),a=r(t),s=a.length;s--;){var l=a[e?s:++i];if(!1===n(o[l],l,o))break}return t}}},function(e,t,n){var r=n(209),i=n(348),o=n(349),a=n(351),s=n(352),l=n(127),u=n(55),c=n(355),p=n(128),h=n(172),f=n(61),d=n(357),g=n(129),m=n(215),y=n(361);e.exports=function baseMergeDeep(e,t,n,v,_,b,x){var w=m(e,n),S=m(t,n),E=x.get(S);if(E)r(e,n,E);else{var P=b?b(w,S,n+"",e,t,x):void 0,C=void 0===P;if(C){var k=u(S),T=!k&&p(S),A=!k&&!T&&g(S);P=S,k||T||A?u(w)?P=w:c(w)?P=a(w):T?(C=!1,P=i(S,!0)):A?(C=!1,P=o(S,!0)):P=[]:d(S)||l(S)?(P=w,l(w)?P=y(w):f(w)&&!h(w)||(P=s(S))):C=!1}C&&(x.set(S,P),_(P,S,v,b,x),x.delete(S)),r(e,n,P)}}},function(e,t,n){(function(e){var r=n(51),i=t&&!t.nodeType&&t,o=i&&"object"==typeof e&&e&&!e.nodeType&&e,a=o&&o.exports===i?r.Buffer:void 0,s=a?a.allocUnsafe:void 0;e.exports=function cloneBuffer(e,t){if(t)return e.slice();var n=e.length,r=s?s(n):new e.constructor(n);return e.copy(r),r}}).call(this,n(175)(e))},function(e,t,n){var r=n(350);e.exports=function cloneTypedArray(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},function(e,t,n){var r=n(212);e.exports=function cloneArrayBuffer(e){var t=new e.constructor(e.byteLength);return new r(t).set(new r(e)),t}},function(e,t){e.exports=function copyArray(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}},function(e,t,n){var r=n(353),i=n(213),o=n(126);e.exports=function initCloneObject(e){return"function"!=typeof e.constructor||o(e)?{}:r(i(e))}},function(e,t,n){var r=n(61),i=Object.create,o=function(){function object(){}return function(e){if(!r(e))return{};if(i)return i(e);object.prototype=e;var t=new object;return object.prototype=void 0,t}}();e.exports=o},function(e,t,n){var r=n(83),i=n(73),o="[object Arguments]";e.exports=function baseIsArguments(e){return i(e)&&r(e)==o}},function(e,t,n){var r=n(74),i=n(73);e.exports=function isArrayLikeObject(e){return i(e)&&r(e)}},function(e,t){e.exports=function stubFalse(){return!1}},function(e,t,n){var r=n(83),i=n(213),o=n(73),a="[object Object]",s=Function.prototype,l=Object.prototype,u=s.toString,c=l.hasOwnProperty,p=u.call(Object);e.exports=function isPlainObject(e){if(!o(e)||r(e)!=a)return!1;var t=i(e);if(null===t)return!0;var n=c.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&u.call(n)==p}},function(e,t,n){var r=n(83),i=n(176),o=n(73),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=function baseIsTypedArray(e){return o(e)&&i(e.length)&&!!a[r(e)]}},function(e,t){e.exports=function baseUnary(e){return function(t){return e(t)}}},function(e,t,n){(function(e){var r=n(207),i=t&&!t.nodeType&&t,o=i&&"object"==typeof e&&e&&!e.nodeType&&e,a=o&&o.exports===i&&r.process,s=function(){try{var e=o&&o.require&&o.require("util").types;return e||a&&a.binding&&a.binding("util")}catch(e){}}();e.exports=s}).call(this,n(175)(e))},function(e,t,n){var r=n(362),i=n(216);e.exports=function toPlainObject(e){return r(e,i(e))}},function(e,t,n){var r=n(363),i=n(174);e.exports=function copyObject(e,t,n,o){var a=!n;n||(n={});for(var s=-1,l=t.length;++s<l;){var u=t[s],c=o?o(n[u],e[u],u,n,e):void 0;void 0===c&&(c=e[u]),a?i(n,u,c):r(n,u,c)}return n}},function(e,t,n){var r=n(174),i=n(103),o=Object.prototype.hasOwnProperty;e.exports=function assignValue(e,t,n){var a=e[t];o.call(e,t)&&i(a,n)&&(void 0!==n||t in e)||r(e,t,n)}},function(e,t){e.exports=function baseTimes(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},function(e,t,n){var r=n(61),i=n(126),o=n(366),a=Object.prototype.hasOwnProperty;e.exports=function baseKeysIn(e){if(!r(e))return o(e);var t=i(e),n=[];for(var s in e)("constructor"!=s||!t&&a.call(e,s))&&n.push(s);return n}},function(e,t){e.exports=function nativeKeysIn(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},function(e,t,n){var r=n(368),i=n(375);e.exports=function createAssigner(e){return r(function(t,n){var r=-1,o=n.length,a=o>1?n[o-1]:void 0,s=o>2?n[2]:void 0;for(a=e.length>3&&"function"==typeof a?(o--,a):void 0,s&&i(n[0],n[1],s)&&(a=o<3?void 0:a,o=1),t=Object(t);++r<o;){var l=n[r];l&&e(t,l,r,a)}return t})}},function(e,t,n){var r=n(178),i=n(369),o=n(371);e.exports=function baseRest(e,t){return o(i(e,t,r),e+"")}},function(e,t,n){var r=n(370),i=Math.max;e.exports=function overRest(e,t,n){return t=i(void 0===t?e.length-1:t,0),function(){for(var o=arguments,a=-1,s=i(o.length-t,0),l=Array(s);++a<s;)l[a]=o[t+a];a=-1;for(var u=Array(t+1);++a<t;)u[a]=o[a];return u[t]=n(l),r(e,this,u)}}},function(e,t){e.exports=function apply(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},function(e,t,n){var r=n(372),i=n(374)(r);e.exports=i},function(e,t,n){var r=n(373),i=n(210),o=n(178),a=i?function(e,t){return i(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:o;e.exports=a},function(e,t){e.exports=function constant(e){return function(){return e}}},function(e,t){var n=800,r=16,i=Date.now;e.exports=function shortOut(e){var t=0,o=0;return function(){var a=i(),s=r-(a-o);if(o=a,s>0){if(++t>=n)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}},function(e,t,n){var r=n(103),i=n(74),o=n(177),a=n(61);e.exports=function isIterateeCall(e,t,n){if(!a(n))return!1;var s=typeof t;return!!("number"==s?i(n)&&o(t,n.length):"string"==s&&t in n)&&r(n[t],e)}},function(e,t){Prism.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/((?:\b(?:class|interface|extends|implements|trait|instanceof|new)\s+)|(?:catch\s+\())[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/,boolean:/\b(?:true|false)\b/,function:/[a-z0-9_]+(?=\()/i,number:/\b0x[\da-f]+\b|(?:\b\d+\.?\d*|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/--?|\+\+?|!=?=?|<=?|>=?|==?=?|&&?|\|\|?|\?|\*|\/|~|\^|%/,punctuation:/[{}[\];(),.:]/}},function(e,t){Prism.languages.markup={comment:/<!--[\s\S]*?-->/,prolog:/<\?[\s\S]+?\?>/,doctype:/<!DOCTYPE[\s\S]+?>/i,cdata:/<!\[CDATA\[[\s\S]*?]]>/i,tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s+[^\s>\/=]+(?:=(?:("|')(?:\\[\s\S]|(?!\1)[^\\])*\1|[^\s'">=]+))?)*\s*\/?>/i,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/i,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"attr-value":{pattern:/=(?:("|')(?:\\[\s\S]|(?!\1)[^\\])*\1|[^\s'">=]+)/i,inside:{punctuation:[/^=/,{pattern:/(^|[^\\])["']/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:/&#?[\da-z]{1,8};/i},Prism.languages.markup.tag.inside["attr-value"].inside.entity=Prism.languages.markup.entity,Prism.hooks.add("wrap",function(e){"entity"===e.type&&(e.attributes.title=e.content.replace(/&amp;/,"&"))}),Prism.languages.xml=Prism.languages.markup,Prism.languages.html=Prism.languages.markup,Prism.languages.mathml=Prism.languages.markup,Prism.languages.svg=Prism.languages.markup},function(e,t){Prism.languages.javascript=Prism.languages.extend("clike",{keyword:/\b(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|var|void|while|with|yield)\b/,number:/\b(?:0[xX][\dA-Fa-f]+|0[bB][01]+|0[oO][0-7]+|NaN|Infinity)\b|(?:\b\d+\.?\d*|\B\.\d+)(?:[Ee][+-]?\d+)?/,function:/[_$a-z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\s*\()/i,operator:/-[-=]?|\+[+=]?|!=?=?|<<?=?|>>?>?=?|=(?:==?|>)?|&[&=]?|\|[|=]?|\*\*?=?|\/=?|~|\^=?|%=?|\?|\.{3}/}),Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:/((?:^|[^$\w\xA0-\uFFFF."'\])\s])\s*)\/(\[[^\]\r\n]+]|\\.|[^\/\\\[\r\n])+\/[gimyu]{0,5}(?=\s*($|[\r\n,.;})\]]))/,lookbehind:!0,greedy:!0},"function-variable":{pattern:/[_$a-z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\s*=\s*(?:function\b|(?:\([^()]*\)|[_$a-z\xA0-\uFFFF][$\w\xA0-\uFFFF]*)\s*=>))/i,alias:"function"},constant:/\b[A-Z][A-Z\d_]*\b/}),Prism.languages.insertBefore("javascript","string",{"template-string":{pattern:/`(?:\\[\s\S]|\${[^}]+}|[^\\`])*`/,greedy:!0,inside:{interpolation:{pattern:/\${[^}]+}/,inside:{"interpolation-punctuation":{pattern:/^\${|}$/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}}}),Prism.languages.javascript["template-string"].inside.interpolation.inside.rest=Prism.languages.javascript,Prism.languages.markup&&Prism.languages.insertBefore("markup","tag",{script:{pattern:/(<script[\s\S]*?>)[\s\S]*?(?=<\/script>)/i,lookbehind:!0,inside:Prism.languages.javascript,alias:"language-javascript",greedy:!0}}),Prism.languages.js=Prism.languages.javascript},function(e,t){!function(e){var t=e.util.clone(e.languages.javascript);e.languages.jsx=e.languages.extend("markup",t),e.languages.jsx.tag.pattern=/<\/?(?:[\w.:-]+\s*(?:\s+(?:[\w.:-]+(?:=(?:("|')(?:\\[\s\S]|(?!\1)[^\\])*\1|[^\s{'">=]+|\{(?:\{(?:\{[^}]*\}|[^{}])*\}|[^{}])+\}))?|\{\.{3}[a-z_$][\w$]*(?:\.[a-z_$][\w$]*)*\}))*\s*\/?)?>/i,e.languages.jsx.tag.inside.tag.pattern=/^<\/?[^\s>\/]*/i,e.languages.jsx.tag.inside["attr-value"].pattern=/=(?!\{)(?:("|')(?:\\[\s\S]|(?!\1)[^\\])*\1|[^\s'">]+)/i,e.languages.insertBefore("inside","attr-name",{spread:{pattern:/\{\.{3}[a-z_$][\w$]*(?:\.[a-z_$][\w$]*)*\}/,inside:{punctuation:/\.{3}|[{}.]/,"attr-value":/\w+/}}},e.languages.jsx.tag),e.languages.insertBefore("inside","attr-value",{script:{pattern:/=(\{(?:\{(?:\{[^}]*\}|[^}])*\}|[^}])+\})/i,inside:{"script-punctuation":{pattern:/^=(?={)/,alias:"punctuation"},rest:e.languages.jsx},alias:"language-javascript"}},e.languages.jsx.tag);var n=function(e){return e?"string"==typeof e?e:"string"==typeof e.content?e.content:e.content.map(n).join(""):""},r=function(t){for(var i=[],o=0;o<t.length;o++){var a=t[o],s=!1;if("string"!=typeof a&&("tag"===a.type&&a.content[0]&&"tag"===a.content[0].type?"</"===a.content[0].content[0].content?i.length>0&&i[i.length-1].tagName===n(a.content[0].content[1])&&i.pop():"/>"===a.content[a.content.length-1].content||i.push({tagName:n(a.content[0].content[1]),openedBraces:0}):i.length>0&&"punctuation"===a.type&&"{"===a.content?i[i.length-1].openedBraces++:i.length>0&&i[i.length-1].openedBraces>0&&"punctuation"===a.type&&"}"===a.content?i[i.length-1].openedBraces--:s=!0),(s||"string"==typeof a)&&i.length>0&&0===i[i.length-1].openedBraces){var l=n(a);o<t.length-1&&("string"==typeof t[o+1]||"plain-text"===t[o+1].type)&&(l+=n(t[o+1]),t.splice(o+1,1)),o>0&&("string"==typeof t[o-1]||"plain-text"===t[o-1].type)&&(l=n(t[o-1])+l,t.splice(o-1,1),o--),t[o]=new e.Token("plain-text",l,null,l)}a.content&&"string"!=typeof a.content&&r(a.content)}};e.hooks.add("after-tokenize",function(e){"jsx"!==e.language&&"tsx"!==e.language||r(e.tokens)})}(Prism)},function(e,t,n){"use strict";t.byteLength=function byteLength(e){var t=getLens(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function toByteArray(e){for(var t,n=getLens(e),r=n[0],a=n[1],s=new o(_byteLength(e,r,a)),l=0,u=a>0?r-4:r,c=0;c<u;c+=4)t=i[e.charCodeAt(c)]<<18|i[e.charCodeAt(c+1)]<<12|i[e.charCodeAt(c+2)]<<6|i[e.charCodeAt(c+3)],s[l++]=t>>16&255,s[l++]=t>>8&255,s[l++]=255&t;2===a&&(t=i[e.charCodeAt(c)]<<2|i[e.charCodeAt(c+1)]>>4,s[l++]=255&t);1===a&&(t=i[e.charCodeAt(c)]<<10|i[e.charCodeAt(c+1)]<<4|i[e.charCodeAt(c+2)]>>2,s[l++]=t>>8&255,s[l++]=255&t);return s},t.fromByteArray=function fromByteArray(e){for(var t,n=e.length,i=n%3,o=[],a=0,s=n-i;a<s;a+=16383)o.push(encodeChunk(e,a,a+16383>s?s:a+16383));1===i?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,l=a.length;s<l;++s)r[s]=a[s],i[a.charCodeAt(s)]=s;function getLens(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function _byteLength(e,t,n){return 3*(t+n)/4-n}function encodeChunk(e,t,n){for(var i,o,a=[],s=t;s<n;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,l=(1<<s)-1,u=l>>1,c=-7,p=n?i-1:0,h=n?-1:1,f=e[t+p];for(p+=h,o=f&(1<<-c)-1,f>>=-c,c+=s;c>0;o=256*o+e[t+p],p+=h,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+e[t+p],p+=h,c-=8);if(0===o)o=1-u;else{if(o===l)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,r),o-=u}return(f?-1:1)*a*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var a,s,l,u=8*o-i-1,c=(1<<u)-1,p=c>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,d=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),(t+=a+p>=1?h/l:h*Math.pow(2,1-p))*l>=2&&(a++,l/=2),a+p>=c?(s=0,a=c):a+p>=1?(s=(t*l-1)*Math.pow(2,i),a+=p):(s=t*Math.pow(2,p-1)*Math.pow(2,i),a=0));i>=8;e[n+f]=255&s,f+=d,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;e[n+f]=255&a,f+=d,a/=256,u-=8);e[n+f-d]|=128*g}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){var r=n(54)("unscopables"),i=Array.prototype;null==i[r]&&n(80)(i,r,{}),e.exports=function(e){i[r][e]=!0}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){"use strict";var r=n(194),i=n(100),o=n(88),a=n(80),s=n(179),l=n(386),u=n(220),c=n(390),p=n(54)("iterator"),h=!([].keys&&"next"in[].keys()),f=function(){return this};e.exports=function(e,t,n,d,g,m,y){l(n,t,d);var v,_,b,x=function(e){if(!h&&e in P)return P[e];switch(e){case"keys":return function keys(){return new n(this,e)};case"values":return function values(){return new n(this,e)}}return function entries(){return new n(this,e)}},w=t+" Iterator",S="values"==g,E=!1,P=e.prototype,C=P[p]||P["@@iterator"]||g&&P[g],k=C||x(g),T=g?S?x("entries"):k:void 0,A="Array"==t&&P.entries||C;if(A&&(b=c(A.call(new e)))!==Object.prototype&&b.next&&(u(b,w,!0),r||"function"==typeof b[p]||a(b,p,f)),S&&C&&"values"!==C.name&&(E=!0,k=function values(){return C.call(this)}),r&&!y||!h&&!E&&P[p]||a(P,p,k),s[t]=k,s[w]=f,g)if(v={values:S?k:x("values"),keys:m?k:x("keys"),entries:T},y)for(_ in v)_ in P||o(P,_,v[_]);else i(i.P+i.F*(h||E),t,v);return v}},function(e,t,n){"use strict";var r=n(387),i=n(160),o=n(220),a={};n(80)(a,n(54)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=r(a,{next:i(1,n)}),o(e,t+" Iterator")}},function(e,t,n){var r=n(53),i=n(388),o=n(164),a=n(163)("IE_PROTO"),s=function(){},l=function(){var e,t=n(192)("iframe"),r=o.length;for(t.style.display="none",n(389).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),l=e.F;r--;)delete l.prototype[o[r]];return l()};e.exports=Object.create||function create(e,t){var n;return null!==e?(s.prototype=r(e),n=new s,s.prototype=null,n[a]=e):n=l(),void 0===t?n:i(n,t)}},function(e,t,n){var r=n(70),i=n(53),o=n(110);e.exports=n(59)?Object.defineProperties:function defineProperties(e,t){i(e);for(var n,a=o(t),s=a.length,l=0;s>l;)r.f(e,n=a[l++],t[n]);return e}},function(e,t,n){var r=n(67).document;e.exports=r&&r.documentElement},function(e,t,n){var r=n(89),i=n(114),o=n(163)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){var r=n(392),i=n(414),o=n(228);e.exports=function baseMatches(e){var t=i(e);return 1==t.length&&t[0][2]?o(t[0][0],t[0][1]):function(n){return n===e||r(n,e,t)}}},function(e,t,n){var r=n(170),i=n(223),o=1,a=2;e.exports=function baseIsMatch(e,t,n,s){var l=n.length,u=l,c=!s;if(null==e)return!u;for(e=Object(e);l--;){var p=n[l];if(c&&p[2]?p[1]!==e[p[0]]:!(p[0]in e))return!1}for(;++l<u;){var h=(p=n[l])[0],f=e[h],d=p[1];if(c&&p[2]){if(void 0===f&&!(h in e))return!1}else{var g=new r;if(s)var m=s(f,d,h,e,t,g);if(!(void 0===m?i(d,f,o|a,s,g):m))return!1}}return!0}},function(e,t,n){var r=n(170),i=n(224),o=n(399),a=n(402),s=n(226),l=n(55),u=n(128),c=n(129),p=1,h="[object Arguments]",f="[object Array]",d="[object Object]",g=Object.prototype.hasOwnProperty;e.exports=function baseIsEqualDeep(e,t,n,m,y,v){var _=l(e),b=l(t),x=_?f:s(e),w=b?f:s(t),S=(x=x==h?d:x)==d,E=(w=w==h?d:w)==d,P=x==w;if(P&&u(e)){if(!u(t))return!1;_=!0,S=!1}if(P&&!S)return v||(v=new r),_||c(e)?i(e,t,n,m,y,v):o(e,t,x,n,m,y,v);if(!(n&p)){var C=S&&g.call(e,"__wrapped__"),k=E&&g.call(t,"__wrapped__");if(C||k){var T=C?e.value():e,A=k?t.value():t;return v||(v=new r),y(T,A,n,m,v)}}return!!P&&(v||(v=new r),a(e,t,n,m,y,v))}},function(e,t,n){var r=n(173),i=n(395),o=n(396);function SetCache(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}SetCache.prototype.add=SetCache.prototype.push=i,SetCache.prototype.has=o,e.exports=SetCache},function(e,t){var n="__lodash_hash_undefined__";e.exports=function setCacheAdd(e){return this.__data__.set(e,n),this}},function(e,t){e.exports=function setCacheHas(e){return this.__data__.has(e)}},function(e,t){e.exports=function arraySome(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},function(e,t){e.exports=function cacheHas(e,t){return e.has(t)}},function(e,t,n){var r=n(123),i=n(212),o=n(103),a=n(224),s=n(400),l=n(401),u=1,c=2,p="[object Boolean]",h="[object Date]",f="[object Error]",d="[object Map]",g="[object Number]",m="[object RegExp]",y="[object Set]",v="[object String]",_="[object Symbol]",b="[object ArrayBuffer]",x="[object DataView]",w=r?r.prototype:void 0,S=w?w.valueOf:void 0;e.exports=function equalByTag(e,t,n,r,w,E,P){switch(n){case x:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case b:return!(e.byteLength!=t.byteLength||!E(new i(e),new i(t)));case p:case h:case g:return o(+e,+t);case f:return e.name==t.name&&e.message==t.message;case m:case v:return e==t+"";case d:var C=s;case y:var k=r&u;if(C||(C=l),e.size!=t.size&&!k)return!1;var T=P.get(e);if(T)return T==t;r|=c,P.set(e,t);var A=a(C(e),C(t),r,w,E,P);return P.delete(e),A;case _:if(S)return S.call(e)==S.call(t)}return!1}},function(e,t){e.exports=function mapToArray(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}},function(e,t){e.exports=function setToArray(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}},function(e,t,n){var r=n(403),i=1,o=Object.prototype.hasOwnProperty;e.exports=function equalObjects(e,t,n,a,s,l){var u=n&i,c=r(e),p=c.length;if(p!=r(t).length&&!u)return!1;for(var h=p;h--;){var f=c[h];if(!(u?f in t:o.call(t,f)))return!1}var d=l.get(e);if(d&&l.get(t))return d==t;var g=!0;l.set(e,t),l.set(t,e);for(var m=u;++h<p;){var y=e[f=c[h]],v=t[f];if(a)var _=u?a(v,y,f,t,e,l):a(y,v,f,e,t,l);if(!(void 0===_?y===v||s(y,v,n,a,l):_)){g=!1;break}m||(m="constructor"==f)}if(g&&!m){var b=e.constructor,x=t.constructor;b!=x&&"constructor"in e&&"constructor"in t&&!("function"==typeof b&&b instanceof b&&"function"==typeof x&&x instanceof x)&&(g=!1)}return l.delete(e),l.delete(t),g}},function(e,t,n){var r=n(404),i=n(406),o=n(130);e.exports=function getAllKeys(e){return r(e,o,i)}},function(e,t,n){var r=n(405),i=n(55);e.exports=function baseGetAllKeys(e,t,n){var o=t(e);return i(e)?o:r(o,n(e))}},function(e,t){e.exports=function arrayPush(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}},function(e,t,n){var r=n(407),i=n(408),o=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(e){return null==e?[]:(e=Object(e),r(a(e),function(t){return o.call(e,t)}))}:i;e.exports=s},function(e,t){e.exports=function arrayFilter(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}},function(e,t){e.exports=function stubArray(){return[]}},function(e,t,n){var r=n(214)(Object.keys,Object);e.exports=r},function(e,t,n){var r=n(82)(n(51),"DataView");e.exports=r},function(e,t,n){var r=n(82)(n(51),"Promise");e.exports=r},function(e,t,n){var r=n(82)(n(51),"Set");e.exports=r},function(e,t,n){var r=n(82)(n(51),"WeakMap");e.exports=r},function(e,t,n){var r=n(227),i=n(130);e.exports=function getMatchData(e){for(var t=i(e),n=t.length;n--;){var o=t[n],a=e[o];t[n]=[o,a,r(a)]}return t}},function(e,t,n){var r=n(223),i=n(186),o=n(419),a=n(181),s=n(227),l=n(228),u=n(132),c=1,p=2;e.exports=function baseMatchesProperty(e,t){return a(e)&&s(t)?l(u(e),t):function(n){var a=i(n,e);return void 0===a&&a===t?o(n,e):r(t,a,c|p)}}},function(e,t,n){var r=n(417),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,a=r(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(i,function(e,n,r,i){t.push(r?i.replace(o,"$1"):n||e)}),t});e.exports=a},function(e,t,n){var r=n(185),i=500;e.exports=function memoizeCapped(e){var t=r(e,function(e){return n.size===i&&n.clear(),e}),n=t.cache;return t}},function(e,t,n){var r=n(123),i=n(222),o=n(55),a=n(131),s=1/0,l=r?r.prototype:void 0,u=l?l.toString:void 0;e.exports=function baseToString(e){if("string"==typeof e)return e;if(o(e))return i(e,baseToString)+"";if(a(e))return u?u.call(e):"";var t=e+"";return"0"==t&&1/e==-s?"-0":t}},function(e,t,n){var r=n(420),i=n(421);e.exports=function hasIn(e,t){return null!=e&&i(e,t,r)}},function(e,t){e.exports=function baseHasIn(e,t){return null!=e&&t in Object(e)}},function(e,t,n){var r=n(230),i=n(127),o=n(55),a=n(177),s=n(176),l=n(132);e.exports=function hasPath(e,t,n){for(var u=-1,c=(t=r(t,e)).length,p=!1;++u<c;){var h=l(t[u]);if(!(p=null!=e&&n(e,h)))break;e=e[h]}return p||++u!=c?p:!!(c=null==e?0:e.length)&&s(c)&&a(h,c)&&(o(e)||i(e))}},function(e,t,n){var r=n(423),i=n(424),o=n(181),a=n(132);e.exports=function property(e){return o(e)?r(a(e)):i(e)}},function(e,t){e.exports=function baseProperty(e){return function(t){return null==t?void 0:t[e]}}},function(e,t,n){var r=n(229);e.exports=function basePropertyDeep(e){return function(t){return r(t,e)}}},function(e,t,n){var r=n(426),i=n(74);e.exports=function baseMap(e,t){var n=-1,o=i(e)?Array(e.length):[];return r(e,function(e,r,i){o[++n]=t(e,r,i)}),o}},function(e,t,n){var r=n(427),i=n(428)(r);e.exports=i},function(e,t,n){var r=n(211),i=n(130);e.exports=function baseForOwn(e,t){return e&&r(e,t,i)}},function(e,t,n){var r=n(74);e.exports=function createBaseEach(e,t){return function(n,i){if(null==n)return n;if(!r(n))return e(n,i);for(var o=n.length,a=t?o:-1,s=Object(n);(t?a--:++a<o)&&!1!==i(s[a],a,s););return n}}},function(e,t,n){"use strict";n(168)("anchor",function(e){return function anchor(t){return e(this,"a","name",t)}})},function(e,t,n){var r=n(53),i=n(196),o=n(54)("species");e.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||null==(n=r(a)[o])?t:i(n)}},function(e,t,n){var r=n(71),i=n(432).set;e.exports=function(e,t,n){var o,a=t.constructor;return a!==n&&"function"==typeof a&&(o=a.prototype)!==n.prototype&&r(o)&&i&&i(e,o),e}},function(e,t,n){var r=n(71),i=n(53),o=function(e,t){if(i(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{(r=n(195)(Function.call,n(433).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function setPrototypeOf(e,n){return o(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:o}},function(e,t,n){var r=n(199),i=n(160),o=n(111),a=n(193),s=n(89),l=n(191),u=Object.getOwnPropertyDescriptor;t.f=n(59)?u:function getOwnPropertyDescriptor(e,t){if(e=o(e),t=a(t,!0),l)try{return u(e,t)}catch(e){}if(s(e,t))return i(!r.f.call(e,t),e[t])}},function(e,t,n){var r=n(197),i=n(164).concat("length","prototype");t.f=Object.getOwnPropertyNames||function getOwnPropertyNames(e){return r(e,i)}},function(e,t,n){"use strict";var r=n(67),i=n(70),o=n(59),a=n(54)("species");e.exports=function(e){var t=r[e];o&&t&&!t[a]&&i.f(t,a,{configurable:!0,get:function(){return this}})}},function(e,t,n){var r=n(51);e.exports=function(){return r.Date.now()}},function(e,t,n){n(59)&&"g"!=/./g.flags&&n(70).f(RegExp.prototype,"flags",{configurable:!0,get:n(119)})},function(e,t,n){var r=n(180),i=n(74),o=n(130);e.exports=function createFind(e){return function(t,n,a){var s=Object(t);if(!i(t)){var l=r(n,3);t=o(t),n=function(e){return l(s[e],e,s)}}var u=e(t,n,a);return u>-1?s[l?t[u]:u]:void 0}}},function(e,t,n){var r=n(440),i=n(180),o=n(441),a=Math.max;e.exports=function findIndex(e,t,n){var s=null==e?0:e.length;if(!s)return-1;var l=null==n?0:o(n);return l<0&&(l=a(s+l,0)),r(e,i(t,3),l)}},function(e,t){e.exports=function baseFindIndex(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}},function(e,t,n){var r=n(442);e.exports=function toInteger(e){var t=r(e),n=t%1;return t==t?n?t-n:t:0}},function(e,t,n){var r=n(234),i=1/0,o=1.7976931348623157e308;e.exports=function toFinite(e){return e?(e=r(e))===i||e===-i?(e<0?-1:1)*o:e==e?e:0:0===e?e:0}},function(e,t,n){var r=n(71),i=n(444).onFreeze;n(221)("freeze",function(e){return function freeze(t){return e&&r(t)?e(i(t)):t}})},function(e,t,n){var r=n(109)("meta"),i=n(71),o=n(89),a=n(70).f,s=0,l=Object.isExtensible||function(){return!0},u=!n(60)(function(){return l(Object.preventExtensions({}))}),c=function(e){a(e,r,{value:{i:"O"+ ++s,w:{}}})},p=e.exports={KEY:r,NEED:!1,fastKey:function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,r)){if(!l(e))return"F";if(!t)return"E";c(e)}return e[r].i},getWeak:function(e,t){if(!o(e,r)){if(!l(e))return!0;if(!t)return!1;c(e)}return e[r].w},onFreeze:function(e){return u&&p.NEED&&l(e)&&!o(e,r)&&c(e),e}}},function(e,t,n){var r=n(83),i=n(73),o="[object Number]";e.exports=function isNumber(e){return"number"==typeof e||i(e)&&r(e)==o}},function(e,t,n){e.exports={config:{compilerConfig:{objectAssign:"Object.assign",target:{ie:11},transforms:{modules:!1,dangerousTaggedTemplateString:!0}},mountPointId:"rsg-root",pagePerSection:!0,previewDelay:500,ribbon:void 0,showSidebar:!0,styles:{},theme:{},title:"Urbica React Map GL",version:void 0},welcomeScreen:!1,patterns:void 0,sections:[{name:"Introduction",exampleMode:"expand",usageMode:"expand",sectionDepth:0,description:void 0,slug:"introduction",sections:[],filepath:"docs/introduction.md",href:void 0,components:[],content:n(447),external:void 0},{name:"Installation",exampleMode:"expand",usageMode:"expand",sectionDepth:0,description:void 0,slug:"installation",sections:[],filepath:"docs/installation.md",href:void 0,components:[],content:n(448),external:void 0},{name:"Components",exampleMode:"expand",usageMode:"expand",sectionDepth:1,description:void 0,slug:"components",sections:[],filepath:void 0,href:void 0,components:[{filepath:"src/components/MapGL/index.js",slug:"mapgl",pathLine:"src/components/MapGL/index.js",module:n(133),props:n(450),hasExamples:!0,metadata:{}},{filepath:"src/components/Source/index.js",slug:"source",pathLine:"src/components/Source/index.js",module:n(146),props:n(452),hasExamples:!0,metadata:{}},{filepath:"src/components/Layer/index.js",slug:"layer",pathLine:"src/components/Layer/index.js",module:n(92),props:n(456),hasExamples:!0,metadata:{}},{filepath:"src/components/CustomLayer/index.js",slug:"customlayer",pathLine:"src/components/CustomLayer/index.js",module:n(134),props:n(458),hasExamples:!0,metadata:{}},{filepath:"src/components/Popup/index.js",slug:"popup",pathLine:"src/components/Popup/index.js",module:n(135),props:n(474),hasExamples:!0,metadata:{}},{filepath:"src/components/Marker/index.js",slug:"marker",pathLine:"src/components/Marker/index.js",module:n(136),props:n(476),hasExamples:!0,metadata:{}},{filepath:"src/components/FeatureState/index.js",slug:"featurestate",pathLine:"src/components/FeatureState/index.js",module:n(137),props:n(478),hasExamples:!0,metadata:{}}],content:void 0,external:void 0},{name:"Controls",exampleMode:"expand",usageMode:"expand",sectionDepth:1,description:void 0,slug:"controls",sections:[],filepath:void 0,href:void 0,components:[{filepath:"src/components/AttributionControl/index.js",slug:"attributioncontrol",pathLine:"src/components/AttributionControl/index.js",module:n(138),props:n(480),hasExamples:!0,metadata:{}},{filepath:"src/components/FullscreenControl/index.js",slug:"fullscreencontrol",pathLine:"src/components/FullscreenControl/index.js",module:n(139),props:n(482),hasExamples:!0,metadata:{}},{filepath:"src/components/GeolocateControl/index.js",slug:"geolocatecontrol",pathLine:"src/components/GeolocateControl/index.js",module:n(140),props:n(484),hasExamples:!0,metadata:{}},{filepath:"src/components/NavigationControl/index.js",slug:"navigationcontrol",pathLine:"src/components/NavigationControl/index.js",module:n(141),props:n(486),hasExamples:!0,metadata:{}},{filepath:"src/components/ScaleControl/index.js",slug:"scalecontrol",pathLine:"src/components/ScaleControl/index.js",module:n(142),props:n(488),hasExamples:!0,metadata:{}}],content:void 0,external:void 0}]}},function(e,t,n){var r={react:n(1)},i=n(44).default.bind(null,r);n(45).default.bind(null,"const React$0 = require('react');\nconst React = React$0.default || React$0;",i);e.exports=[{type:"markdown",content:"[Mapbox GL JS](https://github.com/mapbox/mapbox-gl-js) is a JavaScript library that renders interactive maps from vector tiles and Mapbox styles using WebGL.\n\nTo use any of Mapbox’s tools, APIs, or SDKs, you’ll need a Mapbox [access token](https://www.mapbox.com/help/define-access-token/). Mapbox uses access tokens to associate requests to API resources with your account. You can find all your access tokens, create new ones, or delete existing ones on your [API access tokens page](https://www.mapbox.com/studio/account/tokens/).\n\nThis package is heavily inspired by [uber/react-map-gl](https://github.com/uber/react-map-gl)."}]},function(e,t,n){var r={react:n(1)},i=n(44).default.bind(null,r);n(45).default.bind(null,"const React$0 = require('react');\nconst React = React$0.default || React$0;",i);e.exports=[{type:"markdown",content:'`@urbica/react-map-gl` requires `mapbox-gl` as peer dependency:\n\n```shell\n<span class="token function">npm</span> <span class="token function">install</span> --save mapbox-gl @urbica/react-map-gl\n```\n\n...or if you are using yarn:\n\n```shell\nyarn add mapbox-gl @urbica/react-map-gl\n```'}]},function(e,t,n){e.exports=function(){"use strict";var e,t,n;function define(r,i){if(e)if(t){var o="var sharedChunk = {}; ("+e+")(sharedChunk); ("+t+")(sharedChunk);",a={};e(a),(n=i(a)).workerUrl=window.URL.createObjectURL(new Blob([o],{type:"text/javascript"}))}else t=i;else e=i}return define(0,function(u){function e(e,t){return e(t={exports:{}},t.exports),t.exports}var _=n;function n(e,t,n,r){this.cx=3*e,this.bx=3*(n-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(r-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=r,this.p2x=n,this.p2y=r}n.prototype.sampleCurveX=function(e){return((this.ax*e+this.bx)*e+this.cx)*e},n.prototype.sampleCurveY=function(e){return((this.ay*e+this.by)*e+this.cy)*e},n.prototype.sampleCurveDerivativeX=function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},n.prototype.solveCurveX=function(e,t){var n,r,i,o,a;for(void 0===t&&(t=1e-6),i=e,a=0;a<8;a++){if(o=this.sampleCurveX(i)-e,Math.abs(o)<t)return i;var s=this.sampleCurveDerivativeX(i);if(Math.abs(s)<1e-6)break;i-=o/s}if((i=e)<(n=0))return n;if(i>(r=1))return r;for(;n<r;){if(o=this.sampleCurveX(i),Math.abs(o-e)<t)return i;e>o?n=i:r=i,i=.5*(r-n)+n}return i},n.prototype.solve=function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))};var E=a;function a(e,t){this.x=e,this.y=t}function o(e,t){if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!o(e[n],t[n]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==t){if("object"!=typeof t)return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var r in e)if(!o(e[r],t[r]))return!1;return!0}return e===t}function s(e,t,n,r){var i=new _(e,t,n,r);return function(e){return i.solve(e)}}a.prototype={clone:function(){return new a(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,n=e.y-this.y;return t*t+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[0]*this.x+e[1]*this.y,n=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=n,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),n=Math.sin(e),r=t*this.x-n*this.y,i=n*this.x+t*this.y;return this.x=r,this.y=i,this},_rotateAround:function(e,t){var n=Math.cos(e),r=Math.sin(e),i=t.x+n*(this.x-t.x)-r*(this.y-t.y),o=t.y+r*(this.x-t.x)+n*(this.y-t.y);return this.x=i,this.y=o,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},a.convert=function(e){return e instanceof a?e:Array.isArray(e)?new a(e[0],e[1]):e};var P=s(.25,.1,.25,1);function l(e,t,n){return Math.min(n,Math.max(t,e))}function p(e,t,n){var r=n-t,i=((e-t)%r+r)%r+t;return i===t?n:i}function c(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];for(var r=0,i=t;r<i.length;r+=1){var o=i[r];for(var a in o)e[a]=o[a]}return e}var C=1;function f(){return C++}function y(){return function t(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,t)}()}function d(e){return!!e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}function m(e,t){e.forEach(function(e){t[e]&&(t[e]=t[e].bind(t))})}function v(e,t){return-1!==e.indexOf(t,e.length-t.length)}function g(e,t,n){var r={};for(var i in e)r[i]=t.call(n||this,e[i],i,e);return r}function x(e,t,n){var r={};for(var i in e)t.call(n||this,e[i],i,e)&&(r[i]=e[i]);return r}function b(e){return Array.isArray(e)?e.map(b):"object"==typeof e&&e?g(e,b):e}var T={};function w(e){T[e]||("undefined"!=typeof console&&console.warn(e),T[e]=!0)}function A(e,t,n){return(n.y-e.y)*(t.x-e.x)>(t.y-e.y)*(n.x-e.x)}function S(e){for(var t=0,n=0,r=e.length,i=r-1,o=void 0,a=void 0;n<r;i=n++)o=e[n],t+=((a=e[i]).x-o.x)*(o.y+a.y);return t}function k(e){try{var t=self[e];return t.setItem("_mapbox_test_",1),t.removeItem("_mapbox_test_"),!0}catch(e){return!1}}var O,I,M=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),j=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,F=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,N={now:M,frame:function(e){var t=j(e);return{cancel:function(){return F(t)}}},getImageData:function(e){var t=self.document.createElement("canvas"),n=t.getContext("2d");if(!n)throw new Error("failed to create canvas 2d context");return t.width=e.width,t.height=e.height,n.drawImage(e,0,0,e.width,e.height),n.getImageData(0,0,e.width,e.height)},resolveURL:function(e){var t=self.document.createElement("a");return t.href=e,t.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio}},B={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},z={supported:!1,testSupport:function(e){!V&&I&&(G?L(e):O=e)}},V=!1,G=!1;function L(e){var t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,I),e.isContextLost())return;z.supported=!0}catch(e){}e.deleteTexture(t),V=!0}self.document&&((I=self.document.createElement("img")).onload=function(){O&&L(O),O=null,G=!0},I.onerror=function(){V=!0,O=null},I.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var W="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes";function D(e,t){var n=X(B.API_URL);if(e.protocol=n.protocol,e.authority=n.authority,"/"!==n.path&&(e.path=""+n.path+e.path),!B.REQUIRE_ACCESS_TOKEN)return Z(e);if(!(t=t||B.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+W);if("s"===t[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+W);return e.params.push("access_token="+t),Z(e)}function U(e){return 0===e.indexOf("mapbox:")}var q=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function R(e){return q.test(e)}var K=/(\.(png|jpg)\d*)(?=$)/,Y=/\.[\w]+$/,J=function(e){var t=X(e);if(!t.path.match(/(^\/v4\/)/)||!t.path.match(Y))return e;var n="mapbox://tiles/";n+=t.path.replace("/v4/","");var r=t.params.filter(function(e){return!e.match(/^access_token=/)});return r.length&&(n+="?"+r.join("&")),n},Q=/^(\w+):\/\/([^\/?]*)(\/[^?]+)?\??(.+)?/;function X(e){var t=e.match(Q);if(!t)throw new Error("Unable to parse URL object");return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}function Z(e){var t=e.params.length?"?"+e.params.join("&"):"";return e.protocol+"://"+e.authority+e.path+t}function H(e){if(!e)return null;var t,n=e.split(".");if(!n||3!==n.length)return null;try{return JSON.parse((t=n[1],decodeURIComponent(self.atob(t).split("").map(function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)}).join(""))))}catch(e){return null}}var $=function(e){this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};$.prototype.getStorageKey=function(e){var t,n=H(B.ACCESS_TOKEN),r="";return n&&n.u?(t=n.u,r=self.btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,function(e,t){return String.fromCharCode(Number("0x"+t))}))):r=B.ACCESS_TOKEN||"",e?"mapbox.eventData."+e+":"+r:"mapbox.eventData:"+r},$.prototype.fetchEventData=function(){var e=k("localStorage"),t=this.getStorageKey(),n=this.getStorageKey("uuid");if(e)try{var r=self.localStorage.getItem(t);r&&(this.eventData=JSON.parse(r));var i=self.localStorage.getItem(n);i&&(this.anonId=i)}catch(e){w("Unable to read from LocalStorage")}},$.prototype.saveEventData=function(){var e=k("localStorage"),t=this.getStorageKey(),n=this.getStorageKey("uuid");if(e)try{self.localStorage.setItem(n,this.anonId),Object.keys(this.eventData).length>=1&&self.localStorage.setItem(t,JSON.stringify(this.eventData))}catch(e){w("Unable to write to LocalStorage")}},$.prototype.processRequests=function(){},$.prototype.postEvent=function(e,t,n){var r=this;if(B.EVENTS_URL){var i=X(B.EVENTS_URL);i.params.push("access_token="+(B.ACCESS_TOKEN||""));var o={event:this.type,created:new Date(e).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"0.53.1",userId:this.anonId},a=t?c(o,t):o,s={url:Z(i),headers:{"Content-Type":"text/plain"},body:JSON.stringify([a])};this.pendingRequest=ye(s,function(e){r.pendingRequest=null,n(e),r.saveEventData(),r.processRequests()})}},$.prototype.queueRequest=function(e){this.queue.push(e),this.processRequests()};var ee=function(t){function e(){t.call(this,"map.load"),this.success={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.postMapLoadEvent=function(e,t){B.EVENTS_URL&&B.ACCESS_TOKEN&&Array.isArray(e)&&e.some(function(e){return U(e)||R(e)})&&this.queueRequest({id:t,timestamp:Date.now()})},e.prototype.processRequests=function(){var e=this;if(!this.pendingRequest&&0!==this.queue.length){var t=this.queue.shift(),n=t.id,r=t.timestamp;n&&this.success[n]||(this.anonId||this.fetchEventData(),d(this.anonId)||(this.anonId=y()),this.postEvent(r,{},function(t){t||n&&(e.success[n]=!0)}))}},e}($),te=new(function(t){function e(){t.call(this,"appUserTurnstile")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.postTurnstileEvent=function(e){B.EVENTS_URL&&B.ACCESS_TOKEN&&Array.isArray(e)&&e.some(function(e){return U(e)||R(e)})&&this.queueRequest(Date.now())},e.prototype.processRequests=function(){var e=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var t=H(B.ACCESS_TOKEN),n=t?t.u:B.ACCESS_TOKEN,r=n!==this.eventData.tokenU;d(this.anonId)||(this.anonId=y(),r=!0);var i=this.queue.shift();if(this.eventData.lastSuccess){var o=new Date(this.eventData.lastSuccess),a=new Date(i),s=(i-this.eventData.lastSuccess)/864e5;r=r||s>=1||s<-1||o.getDate()!==a.getDate()}else r=!0;if(!r)return this.processRequests();this.postEvent(i,{"enabled.telemetry":!1},function(t){t||(e.eventData.lastSuccess=i,e.eventData.tokenU=n)})}},e}($)),oe=te.postTurnstileEvent.bind(te),ae=new ee,ue=ae.postMapLoadEvent.bind(ae),ce={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(ce);var pe=function(t){function e(e,n,r){401===n&&R(r)&&(e+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),t.call(this,e),this.status=n,this.url=r,this.name=this.constructor.name,this.message=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},e}(Error);function nt(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}var he,fe,de=nt()?function(){return self.worker&&self.worker.referrer}:function(){var e=self.location.origin;if(e&&"null"!==e&&"file://"!==e)return e+self.location.pathname},ge=function(e,t){if(!/^file:/.test(e.url)){if(self.fetch&&self.Request&&self.AbortController)return function(e,t){var n=new self.AbortController,r=new self.Request(e.url,{method:e.method||"GET",body:e.body,credentials:e.credentials,headers:e.headers,referrer:de(),signal:n.signal});return"json"===e.type&&r.headers.set("Accept","application/json"),self.fetch(r).then(function(n){n.ok?n[e.type||"text"]().then(function(e){t(null,e,n.headers.get("Cache-Control"),n.headers.get("Expires"))}).catch(function(e){return t(new Error(e.message))}):t(new pe(n.statusText,n.status,e.url))}).catch(function(e){20!==e.code&&t(new Error(e.message))}),{cancel:function(){return n.abort()}}}(e,t);if(nt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",e,t)}return function(e,t){var n=new self.XMLHttpRequest;for(var r in n.open(e.method||"GET",e.url,!0),"arrayBuffer"===e.type&&(n.responseType="arraybuffer"),e.headers)n.setRequestHeader(r,e.headers[r]);return"json"===e.type&&n.setRequestHeader("Accept","application/json"),n.withCredentials="include"===e.credentials,n.onerror=function(){t(new Error(n.statusText))},n.onload=function(){if((n.status>=200&&n.status<300||0===n.status)&&null!==n.response){var r=n.response;if("json"===e.type)try{r=JSON.parse(n.response)}catch(e){return t(e)}t(null,r,n.getResponseHeader("Cache-Control"),n.getResponseHeader("Expires"))}else t(new pe(n.statusText,n.status,e.url))},n.send(e.body),{cancel:function(){return n.abort()}}}(e,t)},me=function(e,t){return ge(c(e,{type:"arrayBuffer"}),t)},ye=function(e,t){return ge(c(e,{method:"POST"}),t)};he=[],fe=0;var ve=function(e,t){if(fe>=B.MAX_PARALLEL_IMAGE_REQUESTS){var n={requestParameters:e,callback:t,cancelled:!1,cancel:function(){this.cancelled=!0}};return he.push(n),n}fe++;var r=!1,i=function(){if(!r)for(r=!0,fe--;he.length&&fe<B.MAX_PARALLEL_IMAGE_REQUESTS;){var e=he.shift(),t=e.requestParameters,n=e.callback;e.cancelled||(e.cancel=ve(t,n).cancel)}},o=me(e,function(e,n,r,o){if(i(),e)t(e);else if(n){var a=new self.Image,s=self.URL||self.webkitURL;a.onload=function(){t(null,a),s.revokeObjectURL(a.src)},a.onerror=function(){return t(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var l=new self.Blob([new Uint8Array(n)],{type:"image/png"});a.cacheControl=r,a.expires=o,a.src=n.byteLength?s.createObjectURL(l):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}});return{cancel:function(){o.cancel(),i()}}};function ct(e,t,n){n[e]&&-1!==n[e].indexOf(t)||(n[e]=n[e]||[],n[e].push(t))}function ht(e,t,n){if(n&&n[e]){var r=n[e].indexOf(t);-1!==r&&n[e].splice(r,1)}}var xe=function(e,t){void 0===t&&(t={}),c(this,t),this.type=e},Ee=function(t){function e(e,n){void 0===n&&(n={}),t.call(this,"error",c({error:e},n))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(xe),Pe=function(){};Pe.prototype.on=function(e,t){return this._listeners=this._listeners||{},ct(e,t,this._listeners),this},Pe.prototype.off=function(e,t){return ht(e,t,this._listeners),ht(e,t,this._oneTimeListeners),this},Pe.prototype.once=function(e,t){return this._oneTimeListeners=this._oneTimeListeners||{},ct(e,t,this._oneTimeListeners),this},Pe.prototype.fire=function(e,t){"string"==typeof e&&(e=new xe(e,t||{}));var n=e.type;if(this.listens(n)){e.target=this;for(var r=0,i=this._listeners&&this._listeners[n]?this._listeners[n].slice():[];r<i.length;r+=1)i[r].call(this,e);for(var o=0,a=this._oneTimeListeners&&this._oneTimeListeners[n]?this._oneTimeListeners[n].slice():[];o<a.length;o+=1){var s=a[o];ht(n,s,this._oneTimeListeners),s.call(this,e)}var l=this._eventedParent;l&&(c(e,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),l.fire(e))}else e instanceof Ee&&console.error(e.error);return this},Pe.prototype.listens=function(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)},Pe.prototype.setEventedParent=function(e,t){return this._eventedParent=e,this._eventedParentData=t,this};var Ce={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"string",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:22,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}}},Te=function(e,t,n,r){this.message=(e?e+": ":"")+n,r&&(this.identifier=r),null!=t&&t.__line__&&(this.line=t.__line__)};function gt(e){var t=e.key,n=e.value;return n?[new Te(t,n,"constants have been deprecated as of v8")]:[]}function xt(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];for(var r=0,i=t;r<i.length;r+=1){var o=i[r];for(var a in o)e[a]=o[a]}return e}function bt(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function _t(e){return Array.isArray(e)?e.map(_t):bt(e)}var Ie=function(t){function e(e,n){t.call(this,n),this.message=n,this.key=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),Re=function(e,t){void 0===t&&(t=[]),this.parent=e,this.bindings={};for(var n=0,r=t;n<r.length;n+=1){var i=r[n],o=i[0],a=i[1];this.bindings[o]=a}};Re.prototype.concat=function(e){return new Re(this,e)},Re.prototype.get=function(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(e+" not found in scope.")},Re.prototype.has=function(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)};var Le={kind:"null"},Me={kind:"number"},je={kind:"string"},Fe={kind:"boolean"},Ne={kind:"color"},Be={kind:"object"},Ge={kind:"value"},qe={kind:"collator"},He={kind:"formatted"};function Mt(e,t){return{kind:"array",itemType:e,N:t}}function Tt(e){if("array"===e.kind){var t=Tt(e.itemType);return"number"==typeof e.N?"array<"+t+", "+e.N+">":"value"===e.itemType.kind?"array":"array<"+t+">"}return e.kind}var Xe=[Le,Me,je,Fe,Ne,He,Be,Mt(Ge)];function Lt(e,t){if("error"===t.kind)return null;if("array"===e.kind){if("array"===t.kind&&(0===t.N&&"value"===t.itemType.kind||!Lt(e.itemType,t.itemType))&&("number"!=typeof e.N||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if("value"===e.kind)for(var n=0,r=Xe;n<r.length;n+=1)if(!Lt(r[n],t))return null}return"Expected "+Tt(e)+" but found "+Tt(t)+" instead."}var Ke=e(function(e,t){var r={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function n(e){return(e=Math.round(e))<0?0:e>255?255:e}function i(e){return e<0?0:e>1?1:e}function a(e){return"%"===e[e.length-1]?n(parseFloat(e)/100*255):n(parseInt(e))}function o(e){return"%"===e[e.length-1]?i(parseFloat(e)/100):i(parseFloat(e))}function s(e,t,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?e+(t-e)*n*6:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e}try{t.parseCSSColor=function(e){var t,i=e.replace(/ /g,"").toLowerCase();if(i in r)return r[i].slice();if("#"===i[0])return 4===i.length?(t=parseInt(i.substr(1),16))>=0&&t<=4095?[(3840&t)>>4|(3840&t)>>8,240&t|(240&t)>>4,15&t|(15&t)<<4,1]:null:7===i.length&&(t=parseInt(i.substr(1),16))>=0&&t<=16777215?[(16711680&t)>>16,(65280&t)>>8,255&t,1]:null;var l=i.indexOf("("),u=i.indexOf(")");if(-1!==l&&u+1===i.length){var c=i.substr(0,l),p=i.substr(l+1,u-(l+1)).split(","),h=1;switch(c){case"rgba":if(4!==p.length)return null;h=o(p.pop());case"rgb":return 3!==p.length?null:[a(p[0]),a(p[1]),a(p[2]),h];case"hsla":if(4!==p.length)return null;h=o(p.pop());case"hsl":if(3!==p.length)return null;var f=(parseFloat(p[0])%360+360)%360/360,d=o(p[1]),g=o(p[2]),m=g<=.5?g*(d+1):g+d-g*d,y=2*g-m;return[n(255*s(y,m,f+1/3)),n(255*s(y,m,f)),n(255*s(y,m,f-1/3)),h];default:return null}}return null}}catch(e){}}).parseCSSColor,Ze=function(e,t,n,r){void 0===r&&(r=1),this.r=e,this.g=t,this.b=n,this.a=r};Ze.parse=function(e){if(e){if(e instanceof Ze)return e;if("string"==typeof e){var t=Ke(e);if(t)return new Ze(t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3])}}},Ze.prototype.toString=function(){var e=this.toArray(),t=e[0],n=e[1],r=e[2],i=e[3];return"rgba("+Math.round(t)+","+Math.round(n)+","+Math.round(r)+","+i+")"},Ze.prototype.toArray=function(){var e=this.r,t=this.g,n=this.b,r=this.a;return 0===r?[0,0,0,0]:[255*e/r,255*t/r,255*n/r,r]},Ze.black=new Ze(0,0,0,1),Ze.white=new Ze(1,1,1,1),Ze.transparent=new Ze(0,0,0,0),Ze.red=new Ze(1,0,0,1);var et=function(e,t,n){this.sensitivity=e?t?"variant":"case":t?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};et.prototype.compare=function(e,t){return this.collator.compare(e,t)},et.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var tt=function(e,t,n){this.text=e,this.scale=t,this.fontStack=n},rt=function(e){this.sections=e};function qt(e,t,n,r){return"number"==typeof e&&e>=0&&e<=255&&"number"==typeof t&&t>=0&&t<=255&&"number"==typeof n&&n>=0&&n<=255?void 0===r||"number"==typeof r&&r>=0&&r<=1?null:"Invalid rgba value ["+[e,t,n,r].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof r?[e,t,n,r]:[e,t,n]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function Nt(e){if(null===e)return Le;if("string"==typeof e)return je;if("boolean"==typeof e)return Fe;if("number"==typeof e)return Me;if(e instanceof Ze)return Ne;if(e instanceof et)return qe;if(e instanceof rt)return He;if(Array.isArray(e)){for(var t,n=e.length,r=0,i=e;r<i.length;r+=1){var o=Nt(i[r]);if(t){if(t===o)continue;t=Ge;break}t=o}return Mt(t||Ge,n)}return Be}function Kt(e){var t=typeof e;return null===e?"":"string"===t||"number"===t||"boolean"===t?String(e):e instanceof Ze||e instanceof rt?e.toString():JSON.stringify(e)}rt.fromString=function(e){return new rt([new tt(e,null,null)])},rt.prototype.toString=function(){return this.sections.map(function(e){return e.text}).join("")},rt.prototype.serialize=function(){for(var e=["format"],t=0,n=this.sections;t<n.length;t+=1){var r=n[t];e.push(r.text);var i={};r.fontStack&&(i["text-font"]=["literal",r.fontStack.split(",")]),r.scale&&(i["font-scale"]=r.scale),e.push(i)}return e};var it=function(e,t){this.type=e,this.value=t};it.parse=function(e,t){if(2!==e.length)return t.error("'literal' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(!function t(e){if(null===e)return!0;if("string"==typeof e)return!0;if("boolean"==typeof e)return!0;if("number"==typeof e)return!0;if(e instanceof Ze)return!0;if(e instanceof et)return!0;if(e instanceof rt)return!0;if(Array.isArray(e)){for(var n=0,r=e;n<r.length;n+=1)if(!t(r[n]))return!1;return!0}if("object"==typeof e){for(var i in e)if(!t(e[i]))return!1;return!0}return!1}(e[1]))return t.error("invalid value");var n=e[1],r=Nt(n),i=t.expectedType;return"array"!==r.kind||0!==r.N||!i||"array"!==i.kind||"number"==typeof i.N&&0!==i.N||(r=i),new it(r,n)},it.prototype.evaluate=function(){return this.value},it.prototype.eachChild=function(){},it.prototype.possibleOutputs=function(){return[this.value]},it.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Ze?["rgba"].concat(this.value.toArray()):this.value instanceof rt?this.value.serialize():this.value};var ot=function(e){this.name="ExpressionEvaluationError",this.message=e};ot.prototype.toJSON=function(){return this.message};var at={string:je,number:Me,boolean:Fe,object:Be},st=function(e,t){this.type=e,this.args=t};st.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var n,r=1,i=e[0];if("array"===i){var o,a;if(e.length>2){var s=e[1];if("string"!=typeof s||!(s in at)||"object"===s)return t.error('The item type argument of "array" must be one of string, number, boolean',1);o=at[s],r++}else o=Ge;if(e.length>3){if(null!==e[2]&&("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);a=e[2],r++}n=Mt(o,a)}else n=at[i];for(var l=[];r<e.length;r++){var u=t.parse(e[r],r,Ge);if(!u)return null;l.push(u)}return new st(n,l)},st.prototype.evaluate=function(e){for(var t=0;t<this.args.length;t++){var n=this.args[t].evaluate(e);if(!Lt(this.type,Nt(n)))return n;if(t===this.args.length-1)throw new ot("Expected value to be of type "+Tt(this.type)+", but found "+Tt(Nt(n))+" instead.")}return null},st.prototype.eachChild=function(e){this.args.forEach(e)},st.prototype.possibleOutputs=function(){var e;return(e=[]).concat.apply(e,this.args.map(function(e){return e.possibleOutputs()}))},st.prototype.serialize=function(){var e=this.type,t=[e.kind];if("array"===e.kind){var n=e.itemType;if("string"===n.kind||"number"===n.kind||"boolean"===n.kind){t.push(n.kind);var r=e.N;("number"==typeof r||this.args.length>1)&&t.push(r)}}return t.concat(this.args.map(function(e){return e.serialize()}))};var lt=function(e){this.type=He,this.sections=e};lt.parse=function(e,t){if(e.length<3)return t.error("Expected at least two arguments.");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");for(var n=[],r=1;r<e.length-1;r+=2){var i=t.parse(e[r],1,Ge);if(!i)return null;var o=i.type.kind;if("string"!==o&&"value"!==o&&"null"!==o)return t.error("Formatted text type must be 'string', 'value', or 'null'.");var a=e[r+1];if("object"!=typeof a||Array.isArray(a))return t.error("Format options argument must be an object.");var s=null;if(a["font-scale"]&&!(s=t.parse(a["font-scale"],1,Me)))return null;var l=null;if(a["text-font"]&&!(l=t.parse(a["text-font"],1,Mt(je))))return null;n.push({text:i,scale:s,font:l})}return new lt(n)},lt.prototype.evaluate=function(e){return new rt(this.sections.map(function(t){return new tt(Kt(t.text.evaluate(e)),t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null)}))},lt.prototype.eachChild=function(e){for(var t=0,n=this.sections;t<n.length;t+=1){var r=n[t];e(r.text),r.scale&&e(r.scale),r.font&&e(r.font)}},lt.prototype.possibleOutputs=function(){return[void 0]},lt.prototype.serialize=function(){for(var e=["format"],t=0,n=this.sections;t<n.length;t+=1){var r=n[t];e.push(r.text.serialize());var i={};r.scale&&(i["font-scale"]=r.scale.serialize()),r.font&&(i["text-font"]=r.font.serialize()),e.push(i)}return e};var ut={"to-boolean":Fe,"to-color":Ne,"to-number":Me,"to-string":je},pt=function(e,t){this.type=e,this.args=t};pt.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var n=e[0];if(("to-boolean"===n||"to-string"===n)&&2!==e.length)return t.error("Expected one argument.");for(var r=ut[n],i=[],o=1;o<e.length;o++){var a=t.parse(e[o],o,Ge);if(!a)return null;i.push(a)}return new pt(r,i)},pt.prototype.evaluate=function(e){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(e));if("color"===this.type.kind){for(var t,n,r=0,i=this.args;r<i.length;r+=1){if(n=null,(t=i[r].evaluate(e))instanceof Ze)return t;if("string"==typeof t){var o=e.parseColor(t);if(o)return o}else if(Array.isArray(t)&&!(n=t.length<3||t.length>4?"Invalid rbga value "+JSON.stringify(t)+": expected an array containing either three or four numeric values.":qt(t[0],t[1],t[2],t[3])))return new Ze(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new ot(n||"Could not parse color from value '"+("string"==typeof t?t:JSON.stringify(t))+"'")}if("number"===this.type.kind){for(var a=null,s=0,l=this.args;s<l.length;s+=1){if(null===(a=l[s].evaluate(e)))return 0;var u=Number(a);if(!isNaN(u))return u}throw new ot("Could not convert "+JSON.stringify(a)+" to number.")}return"formatted"===this.type.kind?rt.fromString(Kt(this.args[0].evaluate(e))):Kt(this.args[0].evaluate(e))},pt.prototype.eachChild=function(e){this.args.forEach(e)},pt.prototype.possibleOutputs=function(){var e;return(e=[]).concat.apply(e,this.args.map(function(e){return e.possibleOutputs()}))},pt.prototype.serialize=function(){if("formatted"===this.type.kind)return new lt([{text:this.args[0],scale:null,font:null}]).serialize();var e=["to-"+this.type.kind];return this.eachChild(function(t){e.push(t.serialize())}),e};var ft=["Unknown","Point","LineString","Polygon"],dt=function(){this.globals=null,this.feature=null,this.featureState=null,this._parseColorCache={}};dt.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},dt.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?ft[this.feature.type]:this.feature.type:null},dt.prototype.properties=function(){return this.feature&&this.feature.properties||{}},dt.prototype.parseColor=function(e){var t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=Ze.parse(e)),t};var mt=function(e,t,n,r){this.name=e,this.type=t,this._evaluate=n,this.args=r};mt.prototype.evaluate=function(e){return this._evaluate(e,this.args)},mt.prototype.eachChild=function(e){this.args.forEach(e)},mt.prototype.possibleOutputs=function(){return[void 0]},mt.prototype.serialize=function(){return[this.name].concat(this.args.map(function(e){return e.serialize()}))},mt.parse=function(e,t){var n,r=e[0],i=mt.definitions[r];if(!i)return t.error('Unknown expression "'+r+'". If you wanted a literal array, use ["literal", [...]].',0);for(var o=Array.isArray(i)?i[0]:i.type,a=Array.isArray(i)?[[i[1],i[2]]]:i.overloads,s=a.filter(function(t){var n=t[0];return!Array.isArray(n)||n.length===e.length-1}),l=null,u=0,c=s;u<c.length;u+=1){var p=c[u],h=p[0],f=p[1];l=new wt(t.registry,t.path,null,t.scope);for(var d=[],g=!1,m=1;m<e.length;m++){var y=e[m],v=Array.isArray(h)?h[m-1]:h.type,_=l.parse(y,1+d.length,v);if(!_){g=!0;break}d.push(_)}if(!g)if(Array.isArray(h)&&h.length!==d.length)l.error("Expected "+h.length+" arguments, but found "+d.length+" instead.");else{for(var b=0;b<d.length;b++){var x=Array.isArray(h)?h[b]:h.type,w=d[b];l.concat(b+1).checkSubtype(x,w.type)}if(0===l.errors.length)return new mt(r,o,f,d)}}if(1===s.length)(n=t.errors).push.apply(n,l.errors);else{for(var S=(s.length?s:a).map(function(e){var t;return t=e[0],Array.isArray(t)?"("+t.map(Tt).join(", ")+")":"("+Tt(t.type)+"...)"}).join(" | "),E=[],P=1;P<e.length;P++){var C=t.parse(e[P],1+E.length);if(!C)return null;E.push(Tt(C.type))}t.error("Expected arguments of type "+S+", but found ("+E.join(", ")+") instead.")}return null},mt.register=function(e,t){for(var n in mt.definitions=t,t)e[n]=mt};var yt=function(e,t,n){this.type=qe,this.locale=n,this.caseSensitive=e,this.diacriticSensitive=t};function re(e){if(e instanceof mt){if("get"===e.name&&1===e.args.length)return!1;if("feature-state"===e.name)return!1;if("has"===e.name&&1===e.args.length)return!1;if("properties"===e.name||"geometry-type"===e.name||"id"===e.name)return!1;if(/^filter-/.test(e.name))return!1}var t=!0;return e.eachChild(function(e){t&&!re(e)&&(t=!1)}),t}function ne(e){if(e instanceof mt&&"feature-state"===e.name)return!1;var t=!0;return e.eachChild(function(e){t&&!ne(e)&&(t=!1)}),t}function ie(e,t){if(e instanceof mt&&t.indexOf(e.name)>=0)return!1;var n=!0;return e.eachChild(function(e){n&&!ie(e,t)&&(n=!1)}),n}yt.parse=function(e,t){if(2!==e.length)return t.error("Expected one argument.");var n=e[1];if("object"!=typeof n||Array.isArray(n))return t.error("Collator options argument must be an object.");var r=t.parse(void 0!==n["case-sensitive"]&&n["case-sensitive"],1,Fe);if(!r)return null;var i=t.parse(void 0!==n["diacritic-sensitive"]&&n["diacritic-sensitive"],1,Fe);if(!i)return null;var o=null;return n.locale&&!(o=t.parse(n.locale,1,je))?null:new yt(r,i,o)},yt.prototype.evaluate=function(e){return new et(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)},yt.prototype.eachChild=function(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)},yt.prototype.possibleOutputs=function(){return[void 0]},yt.prototype.serialize=function(){var e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]};var vt=function(e,t){this.type=t.type,this.name=e,this.boundExpression=t};vt.parse=function(e,t){if(2!==e.length||"string"!=typeof e[1])return t.error("'var' expression requires exactly one string literal argument.");var n=e[1];return t.scope.has(n)?new vt(n,t.scope.get(n)):t.error('Unknown variable "'+n+'". Make sure "'+n+'" has been bound in an enclosing "let" expression before using it.',1)},vt.prototype.evaluate=function(e){return this.boundExpression.evaluate(e)},vt.prototype.eachChild=function(){},vt.prototype.possibleOutputs=function(){return[void 0]},vt.prototype.serialize=function(){return["var",this.name]};var wt=function(e,t,n,r,i){void 0===t&&(t=[]),void 0===r&&(r=new Re),void 0===i&&(i=[]),this.registry=e,this.path=t,this.key=t.map(function(e){return"["+e+"]"}).join(""),this.scope=r,this.errors=i,this.expectedType=n};function se(e,t){for(var n,r,i=0,o=e.length-1,a=0;i<=o;){if(n=e[a=Math.floor((i+o)/2)],r=e[a+1],t===n||t>n&&t<r)return a;if(n<t)i=a+1;else{if(!(n>t))throw new ot("Input is not a number.");o=a-1}}return Math.max(a-1,0)}wt.prototype.parse=function(e,t,n,r,i){return void 0===i&&(i={}),t?this.concat(t,n,r)._parse(e,i):this._parse(e,i)},wt.prototype._parse=function(e,t){function r(e,t,n){return"assert"===n?new st(t,[e]):"coerce"===n?new pt(t,[e]):e}if(null!==e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e||(e=["literal",e]),Array.isArray(e)){if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var n=e[0];if("string"!=typeof n)return this.error("Expression name must be a string, but found "+typeof n+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var i=this.registry[n];if(i){var o=i.parse(e,this);if(!o)return null;if(this.expectedType){var a=this.expectedType,s=o.type;if("string"!==a.kind&&"number"!==a.kind&&"boolean"!==a.kind&&"object"!==a.kind&&"array"!==a.kind||"value"!==s.kind)if("color"!==a.kind&&"formatted"!==a.kind||"value"!==s.kind&&"string"!==s.kind){if(this.checkSubtype(a,s))return null}else o=r(o,a,t.typeAnnotation||"coerce");else o=r(o,a,t.typeAnnotation||"assert")}if(!(o instanceof it)&&function t(e){if(e instanceof vt)return t(e.boundExpression);if(e instanceof mt&&"error"===e.name)return!1;if(e instanceof yt)return!1;var n=e instanceof pt||e instanceof st,r=!0;return e.eachChild(function(e){r=n?r&&t(e):r&&e instanceof it}),!!r&&re(e)&&ie(e,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(o)){var l=new dt;try{o=new it(o.type,o.evaluate(l))}catch(e){return this.error(e.message),null}}return o}return this.error('Unknown expression "'+n+'". If you wanted a literal array, use ["literal", [...]].',0)}return void 0===e?this.error("'undefined' value invalid. Use null instead."):"object"==typeof e?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof e+" instead.")},wt.prototype.concat=function(e,t,n){var r="number"==typeof e?this.path.concat(e):this.path,i=n?this.scope.concat(n):this.scope;return new wt(this.registry,r,t||null,i,this.errors)},wt.prototype.error=function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];var r=""+this.key+t.map(function(e){return"["+e+"]"}).join("");this.errors.push(new Ie(r,e))},wt.prototype.checkSubtype=function(e,t){var n=Lt(e,t);return n&&this.error(n),n};var St=function(e,t,n){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(var r=0,i=n;r<i.length;r+=1){var o=i[r],a=o[0],s=o[1];this.labels.push(a),this.outputs.push(s)}};function le(e,t,n){return e*(1-n)+t*n}St.parse=function(e,t){var n=e[1],r=e.slice(2);if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(!(n=t.parse(n,1,Me)))return null;var i=[],o=null;t.expectedType&&"value"!==t.expectedType.kind&&(o=t.expectedType),r.unshift(-1/0);for(var a=0;a<r.length;a+=2){var s=r[a],l=r[a+1],u=a+1,c=a+2;if("number"!=typeof s)return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',u);if(i.length&&i[i.length-1][0]>=s)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',u);var p=t.parse(l,c,o);if(!p)return null;o=o||p.type,i.push([s,p])}return new St(o,n,i)},St.prototype.evaluate=function(e){var t=this.labels,n=this.outputs;if(1===t.length)return n[0].evaluate(e);var r=this.input.evaluate(e);if(r<=t[0])return n[0].evaluate(e);var i=t.length;return r>=t[i-1]?n[i-1].evaluate(e):n[se(t,r)].evaluate(e)},St.prototype.eachChild=function(e){e(this.input);for(var t=0,n=this.outputs;t<n.length;t+=1)e(n[t])},St.prototype.possibleOutputs=function(){var e;return(e=[]).concat.apply(e,this.outputs.map(function(e){return e.possibleOutputs()}))},St.prototype.serialize=function(){for(var e=["step",this.input.serialize()],t=0;t<this.labels.length;t++)t>0&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e};var Et=Object.freeze({number:le,color:function(e,t,n){return new Ze(le(e.r,t.r,n),le(e.g,t.g,n),le(e.b,t.b,n),le(e.a,t.a,n))},array:function(e,t,n){return e.map(function(e,r){return le(e,t[r],n)})}}),Pt=.95047,Ct=1,kt=1.08883,At=4/29,Ot=6/29,It=3*Ot*Ot,Rt=Ot*Ot*Ot,jt=Math.PI/180,Dt=180/Math.PI;function be(e){return e>Rt?Math.pow(e,1/3):e/It+At}function _e(e){return e>Ot?e*e*e:It*(e-At)}function we(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Ae(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Se(e){var t=Ae(e.r),n=Ae(e.g),r=Ae(e.b),i=be((.4124564*t+.3575761*n+.1804375*r)/Pt),o=be((.2126729*t+.7151522*n+.072175*r)/Ct);return{l:116*o-16,a:500*(i-o),b:200*(o-be((.0193339*t+.119192*n+.9503041*r)/kt)),alpha:e.a}}function ke(e){var t=(e.l+16)/116,n=isNaN(e.a)?t:t+e.a/500,r=isNaN(e.b)?t:t-e.b/200;return t=Ct*_e(t),n=Pt*_e(n),r=kt*_e(r),new Ze(we(3.2404542*n-1.5371385*t-.4985314*r),we(-.969266*n+1.8760108*t+.041556*r),we(.0556434*n-.2040259*t+1.0572252*r),e.alpha)}function ze(e,t,n){var r=t-e;return e+n*(r>180||r<-180?r-360*Math.round(r/360):r)}var Ft={forward:Se,reverse:ke,interpolate:function(e,t,n){return{l:le(e.l,t.l,n),a:le(e.a,t.a,n),b:le(e.b,t.b,n),alpha:le(e.alpha,t.alpha,n)}}},Bt={forward:function(e){var t=Se(e),n=t.l,r=t.a,i=t.b,o=Math.atan2(i,r)*Dt;return{h:o<0?o+360:o,c:Math.sqrt(r*r+i*i),l:n,alpha:e.a}},reverse:function(e){var t=e.h*jt,n=e.c;return ke({l:e.l,a:Math.cos(t)*n,b:Math.sin(t)*n,alpha:e.alpha})},interpolate:function(e,t,n){return{h:ze(e.h,t.h,n),c:le(e.c,t.c,n),l:le(e.l,t.l,n),alpha:le(e.alpha,t.alpha,n)}}},zt=Object.freeze({lab:Ft,hcl:Bt}),Ut=function(e,t,n,r,i){this.type=e,this.operator=t,this.interpolation=n,this.input=r,this.labels=[],this.outputs=[];for(var o=0,a=i;o<a.length;o+=1){var s=a[o],l=s[0],u=s[1];this.labels.push(l),this.outputs.push(u)}};function Ve(e,t,n,r){var i=r-n,o=e-n;return 0===i?0:1===t?o/i:(Math.pow(t,o)-1)/(Math.pow(t,i)-1)}Ut.interpolationFactor=function(e,t,n,r){var i=0;if("exponential"===e.name)i=Ve(t,e.base,n,r);else if("linear"===e.name)i=Ve(t,1,n,r);else if("cubic-bezier"===e.name){var o=e.controlPoints;i=new _(o[0],o[1],o[2],o[3]).solve(Ve(t,1,n,r))}return i},Ut.parse=function(e,t){var n=e[0],r=e[1],i=e[2],o=e.slice(3);if(!Array.isArray(r)||0===r.length)return t.error("Expected an interpolation type expression.",1);if("linear"===r[0])r={name:"linear"};else if("exponential"===r[0]){var a=r[1];if("number"!=typeof a)return t.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:a}}else{if("cubic-bezier"!==r[0])return t.error("Unknown interpolation type "+String(r[0]),1,0);var s=r.slice(1);if(4!==s.length||s.some(function(e){return"number"!=typeof e||e<0||e>1}))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:s}}if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(!(i=t.parse(i,2,Me)))return null;var l=[],u=null;"interpolate-hcl"===n||"interpolate-lab"===n?u=Ne:t.expectedType&&"value"!==t.expectedType.kind&&(u=t.expectedType);for(var c=0;c<o.length;c+=2){var p=o[c],h=o[c+1],f=c+3,d=c+4;if("number"!=typeof p)return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',f);if(l.length&&l[l.length-1][0]>=p)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',f);var g=t.parse(h,d,u);if(!g)return null;u=u||g.type,l.push([p,g])}return"number"===u.kind||"color"===u.kind||"array"===u.kind&&"number"===u.itemType.kind&&"number"==typeof u.N?new Ut(u,n,r,i,l):t.error("Type "+Tt(u)+" is not interpolatable.")},Ut.prototype.evaluate=function(e){var t=this.labels,n=this.outputs;if(1===t.length)return n[0].evaluate(e);var r=this.input.evaluate(e);if(r<=t[0])return n[0].evaluate(e);var i=t.length;if(r>=t[i-1])return n[i-1].evaluate(e);var o=se(t,r),a=t[o],s=t[o+1],l=Ut.interpolationFactor(this.interpolation,r,a,s),u=n[o].evaluate(e),c=n[o+1].evaluate(e);return"interpolate"===this.operator?Et[this.type.kind.toLowerCase()](u,c,l):"interpolate-hcl"===this.operator?Bt.reverse(Bt.interpolate(Bt.forward(u),Bt.forward(c),l)):Ft.reverse(Ft.interpolate(Ft.forward(u),Ft.forward(c),l))},Ut.prototype.eachChild=function(e){e(this.input);for(var t=0,n=this.outputs;t<n.length;t+=1)e(n[t])},Ut.prototype.possibleOutputs=function(){var e;return(e=[]).concat.apply(e,this.outputs.map(function(e){return e.possibleOutputs()}))},Ut.prototype.serialize=function(){var e;e="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var t=[this.operator,e,this.input.serialize()],n=0;n<this.labels.length;n++)t.push(this.labels[n],this.outputs[n].serialize());return t};var Vt=function(e,t){this.type=e,this.args=t};Vt.parse=function(e,t){if(e.length<2)return t.error("Expectected at least one argument.");var n=null,r=t.expectedType;r&&"value"!==r.kind&&(n=r);for(var i=[],o=0,a=e.slice(1);o<a.length;o+=1){var s=a[o],l=t.parse(s,1+i.length,n,void 0,{typeAnnotation:"omit"});if(!l)return null;n=n||l.type,i.push(l)}var u=r&&i.some(function(e){return Lt(r,e.type)});return new Vt(u?Ge:n,i)},Vt.prototype.evaluate=function(e){for(var t=null,n=0,r=this.args;n<r.length&&null===(t=r[n].evaluate(e));n+=1);return t},Vt.prototype.eachChild=function(e){this.args.forEach(e)},Vt.prototype.possibleOutputs=function(){var e;return(e=[]).concat.apply(e,this.args.map(function(e){return e.possibleOutputs()}))},Vt.prototype.serialize=function(){var e=["coalesce"];return this.eachChild(function(t){e.push(t.serialize())}),e};var Gt=function(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t};Gt.prototype.evaluate=function(e){return this.result.evaluate(e)},Gt.prototype.eachChild=function(e){for(var t=0,n=this.bindings;t<n.length;t+=1)e(n[t][1]);e(this.result)},Gt.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found "+(e.length-1)+" instead.");for(var n=[],r=1;r<e.length-1;r+=2){var i=e[r];if("string"!=typeof i)return t.error("Expected string, but found "+typeof i+" instead.",r);if(/[^a-zA-Z0-9_]/.test(i))return t.error("Variable names must contain only alphanumeric characters or '_'.",r);var o=t.parse(e[r+1],r+1);if(!o)return null;n.push([i,o])}var a=t.parse(e[e.length-1],e.length-1,t.expectedType,n);return a?new Gt(n,a):null},Gt.prototype.possibleOutputs=function(){return this.result.possibleOutputs()},Gt.prototype.serialize=function(){for(var e=["let"],t=0,n=this.bindings;t<n.length;t+=1){var r=n[t],i=r[0],o=r[1];e.push(i,o.serialize())}return e.push(this.result.serialize()),e};var Wt=function(e,t,n){this.type=e,this.index=t,this.input=n};Wt.parse=function(e,t){if(3!==e.length)return t.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var n=t.parse(e[1],1,Me),r=t.parse(e[2],2,Mt(t.expectedType||Ge));if(!n||!r)return null;var i=r.type;return new Wt(i.itemType,n,r)},Wt.prototype.evaluate=function(e){var t=this.index.evaluate(e),n=this.input.evaluate(e);if(t<0)throw new ot("Array index out of bounds: "+t+" < 0.");if(t>=n.length)throw new ot("Array index out of bounds: "+t+" > "+(n.length-1)+".");if(t!==Math.floor(t))throw new ot("Array index must be an integer, but found "+t+" instead.");return n[t]},Wt.prototype.eachChild=function(e){e(this.index),e(this.input)},Wt.prototype.possibleOutputs=function(){return[void 0]},Wt.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Ht=function(e,t,n,r,i,o){this.inputType=e,this.type=t,this.input=n,this.cases=r,this.outputs=i,this.otherwise=o};Ht.parse=function(e,t){if(e.length<5)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if(e.length%2!=1)return t.error("Expected an even number of arguments.");var n,r;t.expectedType&&"value"!==t.expectedType.kind&&(r=t.expectedType);for(var i={},o=[],a=2;a<e.length-1;a+=2){var s=e[a],l=e[a+1];Array.isArray(s)||(s=[s]);var u=t.concat(a);if(0===s.length)return u.error("Expected at least one branch label.");for(var c=0,p=s;c<p.length;c+=1){var h=p[c];if("number"!=typeof h&&"string"!=typeof h)return u.error("Branch labels must be numbers or strings.");if("number"==typeof h&&Math.abs(h)>Number.MAX_SAFE_INTEGER)return u.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof h&&Math.floor(h)!==h)return u.error("Numeric branch labels must be integer values.");if(n){if(u.checkSubtype(n,Nt(h)))return null}else n=Nt(h);if(void 0!==i[String(h)])return u.error("Branch labels must be unique.");i[String(h)]=o.length}var f=t.parse(l,a,r);if(!f)return null;r=r||f.type,o.push(f)}var d=t.parse(e[1],1,Ge);if(!d)return null;var g=t.parse(e[e.length-1],e.length-1,r);return g?"value"!==d.type.kind&&t.concat(1).checkSubtype(n,d.type)?null:new Ht(n,r,d,i,o,g):null},Ht.prototype.evaluate=function(e){var t=this.input.evaluate(e);return(Nt(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)},Ht.prototype.eachChild=function(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)},Ht.prototype.possibleOutputs=function(){var e;return(e=[]).concat.apply(e,this.outputs.map(function(e){return e.possibleOutputs()})).concat(this.otherwise.possibleOutputs())},Ht.prototype.serialize=function(){for(var e=this,t=["match",this.input.serialize()],n=[],r={},i=0,o=Object.keys(this.cases).sort();i<o.length;i+=1){var a=o[i];void 0===(p=r[this.cases[a]])?(r[this.cases[a]]=n.length,n.push([this.cases[a],[a]])):n[p][1].push(a)}for(var s=function(t){return"number"===e.inputType.kind?Number(t):t},l=0,u=n;l<u.length;l+=1){var c=u[l],p=c[0],h=c[1];1===h.length?t.push(s(h[0])):t.push(h.map(s)),t.push(this.outputs[outputIndex$1].serialize())}return t.push(this.otherwise.serialize()),t};var Xt=function(e,t,n){this.type=e,this.branches=t,this.otherwise=n};function Oe(e,t){return"=="===e||"!="===e?"boolean"===t.kind||"string"===t.kind||"number"===t.kind||"null"===t.kind||"value"===t.kind:"string"===t.kind||"number"===t.kind||"value"===t.kind}function De(e,t,n,r){return 0===r.compare(t,n)}function Ue(e,t,n){var r="=="!==e&&"!="!==e;return function(){function i(e,t,n){this.type=Fe,this.lhs=e,this.rhs=t,this.collator=n,this.hasUntypedArgument="value"===e.type.kind||"value"===t.type.kind}return i.parse=function(e,t){if(3!==e.length&&4!==e.length)return t.error("Expected two or three arguments.");var n=e[0],o=t.parse(e[1],1,Ge);if(!o)return null;if(!Oe(n,o.type))return t.concat(1).error('"'+n+"\" comparisons are not supported for type '"+Tt(o.type)+"'.");var a=t.parse(e[2],2,Ge);if(!a)return null;if(!Oe(n,a.type))return t.concat(2).error('"'+n+"\" comparisons are not supported for type '"+Tt(a.type)+"'.");if(o.type.kind!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return t.error("Cannot compare types '"+Tt(o.type)+"' and '"+Tt(a.type)+"'.");r&&("value"===o.type.kind&&"value"!==a.type.kind?o=new st(a.type,[o]):"value"!==o.type.kind&&"value"===a.type.kind&&(a=new st(o.type,[a])));var s=null;if(4===e.length){if("string"!==o.type.kind&&"string"!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return t.error("Cannot use collator to compare non-string types.");if(!(s=t.parse(e[3],3,qe)))return null}return new i(o,a,s)},i.prototype.evaluate=function(i){var o=this.lhs.evaluate(i),a=this.rhs.evaluate(i);if(r&&this.hasUntypedArgument){var s=Nt(o),l=Nt(a);if(s.kind!==l.kind||"string"!==s.kind&&"number"!==s.kind)throw new ot('Expected arguments for "'+e+'" to be (string, string) or (number, number), but found ('+s.kind+", "+l.kind+") instead.")}if(this.collator&&!r&&this.hasUntypedArgument){var u=Nt(o),c=Nt(a);if("string"!==u.kind||"string"!==c.kind)return t(i,o,a)}return this.collator?n(i,o,a,this.collator.evaluate(i)):t(i,o,a)},i.prototype.eachChild=function(e){e(this.lhs),e(this.rhs),this.collator&&e(this.collator)},i.prototype.possibleOutputs=function(){return[!0,!1]},i.prototype.serialize=function(){var t=[e];return this.eachChild(function(e){t.push(e.serialize())}),t},i}()}Xt.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found only "+(e.length-1)+".");if(e.length%2!=0)return t.error("Expected an odd number of arguments.");var n;t.expectedType&&"value"!==t.expectedType.kind&&(n=t.expectedType);for(var r=[],i=1;i<e.length-1;i+=2){var o=t.parse(e[i],i,Fe);if(!o)return null;var a=t.parse(e[i+1],i+1,n);if(!a)return null;r.push([o,a]),n=n||a.type}var s=t.parse(e[e.length-1],e.length-1,n);return s?new Xt(n,r,s):null},Xt.prototype.evaluate=function(e){for(var t=0,n=this.branches;t<n.length;t+=1){var r=n[t],i=r[0],o=r[1];if(i.evaluate(e))return o.evaluate(e)}return this.otherwise.evaluate(e)},Xt.prototype.eachChild=function(e){for(var t=0,n=this.branches;t<n.length;t+=1){var r=n[t],i=r[0],o=r[1];e(i),e(o)}e(this.otherwise)},Xt.prototype.possibleOutputs=function(){var e;return(e=[]).concat.apply(e,this.branches.map(function(e){return e[0],e[1].possibleOutputs()})).concat(this.otherwise.possibleOutputs())},Xt.prototype.serialize=function(){var e=["case"];return this.eachChild(function(t){e.push(t.serialize())}),e};var Zt=Ue("==",function(e,t,n){return t===n},De),Yt=Ue("!=",function(e,t,n){return t!==n},function(e,t,n,r){return!De(0,t,n,r)}),Jt=Ue("<",function(e,t,n){return t<n},function(e,t,n,r){return r.compare(t,n)<0}),Qt=Ue(">",function(e,t,n){return t>n},function(e,t,n,r){return r.compare(t,n)>0}),$t=Ue("<=",function(e,t,n){return t<=n},function(e,t,n,r){return r.compare(t,n)<=0}),en=Ue(">=",function(e,t,n){return t>=n},function(e,t,n,r){return r.compare(t,n)>=0}),rn=function(e,t,n,r,i){this.type=je,this.number=e,this.locale=t,this.currency=n,this.minFractionDigits=r,this.maxFractionDigits=i};rn.parse=function(e,t){if(3!==e.length)return t.error("Expected two arguments.");var n=t.parse(e[1],1,Me);if(!n)return null;var r=e[2];if("object"!=typeof r||Array.isArray(r))return t.error("NumberFormat options argument must be an object.");var i=null;if(r.locale&&!(i=t.parse(r.locale,1,je)))return null;var o=null;if(r.currency&&!(o=t.parse(r.currency,1,je)))return null;var a=null;if(r["min-fraction-digits"]&&!(a=t.parse(r["min-fraction-digits"],1,Me)))return null;var s=null;return r["max-fraction-digits"]&&!(s=t.parse(r["max-fraction-digits"],1,Me))?null:new rn(n,i,o,a,s)},rn.prototype.evaluate=function(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))},rn.prototype.eachChild=function(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)},rn.prototype.possibleOutputs=function(){return[void 0]},rn.prototype.serialize=function(){var e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]};var on=function(e){this.type=Me,this.input=e};on.parse=function(e,t){if(2!==e.length)return t.error("Expected 1 argument, but found "+(e.length-1)+" instead.");var n=t.parse(e[1],1);return n?"array"!==n.type.kind&&"string"!==n.type.kind&&"value"!==n.type.kind?t.error("Expected argument of type string or array, but found "+Tt(n.type)+" instead."):new on(n):null},on.prototype.evaluate=function(e){var t=this.input.evaluate(e);if("string"==typeof t)return t.length;if(Array.isArray(t))return t.length;throw new ot("Expected value to be of type string or array, but found "+Tt(Nt(t))+" instead.")},on.prototype.eachChild=function(e){e(this.input)},on.prototype.possibleOutputs=function(){return[void 0]},on.prototype.serialize=function(){var e=["length"];return this.eachChild(function(t){e.push(t.serialize())}),e};var an={"==":Zt,"!=":Yt,">":Qt,"<":Jt,">=":en,"<=":$t,array:st,at:Wt,boolean:st,case:Xt,coalesce:Vt,collator:yt,format:lt,interpolate:Ut,"interpolate-hcl":Ut,"interpolate-lab":Ut,length:on,let:Gt,literal:it,match:Ht,number:st,"number-format":rn,object:st,step:St,string:st,"to-boolean":pt,"to-color":pt,"to-number":pt,"to-string":pt,var:vt};function Ye(e,t){var n=t[0],r=t[1],i=t[2],o=t[3];n=n.evaluate(e),r=r.evaluate(e),i=i.evaluate(e);var a=o?o.evaluate(e):1,s=qt(n,r,i,a);if(s)throw new ot(s);return new Ze(n/255*a,r/255*a,i/255*a,a)}function Je(e,t){return e in t}function $e(e,t){var n=t[e];return void 0===n?null:n}function We(e){return{type:e}}function Qe(e){return{result:"success",value:e}}function tr(e){return{result:"error",value:e}}function er(e){return"data-driven"===e["property-type"]||"cross-faded-data-driven"===e["property-type"]}function rr(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function nr(e){return!!e.expression&&e.expression.interpolated}function ir(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":null===e?"null":typeof e}function ar(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function or(e){return e}function sr(e,t,n){return void 0!==e?e:void 0!==t?t:void 0!==n?n:void 0}function ur(e,t,n,r,i){return sr(typeof n===i?r[n]:void 0,e.default,t.default)}function lr(e,t,n){if("number"!==ir(n))return sr(e.default,t.default);var r=e.stops.length;if(1===r)return e.stops[0][1];if(n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[r-1][0])return e.stops[r-1][1];var i=hr(e.stops,n);return e.stops[i][1]}function pr(e,t,n){var r=void 0!==e.base?e.base:1;if("number"!==ir(n))return sr(e.default,t.default);var i=e.stops.length;if(1===i)return e.stops[0][1];if(n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[i-1][0])return e.stops[i-1][1];var o=hr(e.stops,n),a=function(e,t,n,r){var i=r-n,o=e-n;return 0===i?0:1===t?o/i:(Math.pow(t,o)-1)/(Math.pow(t,i)-1)}(n,r,e.stops[o][0],e.stops[o+1][0]),s=e.stops[o][1],l=e.stops[o+1][1],u=Et[t.type]||or;if(e.colorSpace&&"rgb"!==e.colorSpace){var c=zt[e.colorSpace];u=function(e,t){return c.reverse(c.interpolate(c.forward(e),c.forward(t),a))}}return"function"==typeof s.evaluate?{evaluate:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=s.evaluate.apply(void 0,e),r=l.evaluate.apply(void 0,e);if(void 0!==n&&void 0!==r)return u(n,r,a)}}:u(s,l,a)}function cr(e,t,n){return"color"===t.type?n=Ze.parse(n):"formatted"===t.type?n=rt.fromString(n.toString()):ir(n)===t.type||"enum"===t.type&&t.values[n]||(n=void 0),sr(n,e.default,t.default)}function hr(e,t){for(var n,r,i=0,o=e.length-1,a=0;i<=o;){if(n=e[a=Math.floor((i+o)/2)][0],r=e[a+1][0],t===n||t>n&&t<r)return a;n<t?i=a+1:n>t&&(o=a-1)}return Math.max(a-1,0)}mt.register(an,{error:[{kind:"error"},[je],function(e,t){var n=t[0];throw new ot(n.evaluate(e))}],typeof:[je,[Ge],function(e,t){return Tt(Nt(t[0].evaluate(e)))}],"to-rgba":[Mt(Me,4),[Ne],function(e,t){return t[0].evaluate(e).toArray()}],rgb:[Ne,[Me,Me,Me],Ye],rgba:[Ne,[Me,Me,Me,Me],Ye],has:{type:Fe,overloads:[[[je],function(e,t){return Je(t[0].evaluate(e),e.properties())}],[[je,Be],function(e,t){var n=t[0],r=t[1];return Je(n.evaluate(e),r.evaluate(e))}]]},get:{type:Ge,overloads:[[[je],function(e,t){return $e(t[0].evaluate(e),e.properties())}],[[je,Be],function(e,t){var n=t[0],r=t[1];return $e(n.evaluate(e),r.evaluate(e))}]]},"feature-state":[Ge,[je],function(e,t){return $e(t[0].evaluate(e),e.featureState||{})}],properties:[Be,[],function(e){return e.properties()}],"geometry-type":[je,[],function(e){return e.geometryType()}],id:[Ge,[],function(e){return e.id()}],zoom:[Me,[],function(e){return e.globals.zoom}],"heatmap-density":[Me,[],function(e){return e.globals.heatmapDensity||0}],"line-progress":[Me,[],function(e){return e.globals.lineProgress||0}],accumulated:[Ge,[],function(e){return void 0===e.globals.accumulated?null:e.globals.accumulated}],"+":[Me,We(Me),function(e,t){for(var n=0,r=0,i=t;r<i.length;r+=1)n+=i[r].evaluate(e);return n}],"*":[Me,We(Me),function(e,t){for(var n=1,r=0,i=t;r<i.length;r+=1)n*=i[r].evaluate(e);return n}],"-":{type:Me,overloads:[[[Me,Me],function(e,t){var n=t[0],r=t[1];return n.evaluate(e)-r.evaluate(e)}],[[Me],function(e,t){return-t[0].evaluate(e)}]]},"/":[Me,[Me,Me],function(e,t){var n=t[0],r=t[1];return n.evaluate(e)/r.evaluate(e)}],"%":[Me,[Me,Me],function(e,t){var n=t[0],r=t[1];return n.evaluate(e)%r.evaluate(e)}],ln2:[Me,[],function(){return Math.LN2}],pi:[Me,[],function(){return Math.PI}],e:[Me,[],function(){return Math.E}],"^":[Me,[Me,Me],function(e,t){var n=t[0],r=t[1];return Math.pow(n.evaluate(e),r.evaluate(e))}],sqrt:[Me,[Me],function(e,t){var n=t[0];return Math.sqrt(n.evaluate(e))}],log10:[Me,[Me],function(e,t){var n=t[0];return Math.log(n.evaluate(e))/Math.LN10}],ln:[Me,[Me],function(e,t){var n=t[0];return Math.log(n.evaluate(e))}],log2:[Me,[Me],function(e,t){var n=t[0];return Math.log(n.evaluate(e))/Math.LN2}],sin:[Me,[Me],function(e,t){var n=t[0];return Math.sin(n.evaluate(e))}],cos:[Me,[Me],function(e,t){var n=t[0];return Math.cos(n.evaluate(e))}],tan:[Me,[Me],function(e,t){var n=t[0];return Math.tan(n.evaluate(e))}],asin:[Me,[Me],function(e,t){var n=t[0];return Math.asin(n.evaluate(e))}],acos:[Me,[Me],function(e,t){var n=t[0];return Math.acos(n.evaluate(e))}],atan:[Me,[Me],function(e,t){var n=t[0];return Math.atan(n.evaluate(e))}],min:[Me,We(Me),function(e,t){return Math.min.apply(Math,t.map(function(t){return t.evaluate(e)}))}],max:[Me,We(Me),function(e,t){return Math.max.apply(Math,t.map(function(t){return t.evaluate(e)}))}],abs:[Me,[Me],function(e,t){var n=t[0];return Math.abs(n.evaluate(e))}],round:[Me,[Me],function(e,t){var n=t[0].evaluate(e);return n<0?-Math.round(-n):Math.round(n)}],floor:[Me,[Me],function(e,t){var n=t[0];return Math.floor(n.evaluate(e))}],ceil:[Me,[Me],function(e,t){var n=t[0];return Math.ceil(n.evaluate(e))}],"filter-==":[Fe,[je,Ge],function(e,t){var n=t[0],r=t[1];return e.properties()[n.value]===r.value}],"filter-id-==":[Fe,[Ge],function(e,t){var n=t[0];return e.id()===n.value}],"filter-type-==":[Fe,[je],function(e,t){var n=t[0];return e.geometryType()===n.value}],"filter-<":[Fe,[je,Ge],function(e,t){var n=t[0],r=t[1],i=e.properties()[n.value],o=r.value;return typeof i==typeof o&&i<o}],"filter-id-<":[Fe,[Ge],function(e,t){var n=t[0],r=e.id(),i=n.value;return typeof r==typeof i&&r<i}],"filter->":[Fe,[je,Ge],function(e,t){var n=t[0],r=t[1],i=e.properties()[n.value],o=r.value;return typeof i==typeof o&&i>o}],"filter-id->":[Fe,[Ge],function(e,t){var n=t[0],r=e.id(),i=n.value;return typeof r==typeof i&&r>i}],"filter-<=":[Fe,[je,Ge],function(e,t){var n=t[0],r=t[1],i=e.properties()[n.value],o=r.value;return typeof i==typeof o&&i<=o}],"filter-id-<=":[Fe,[Ge],function(e,t){var n=t[0],r=e.id(),i=n.value;return typeof r==typeof i&&r<=i}],"filter->=":[Fe,[je,Ge],function(e,t){var n=t[0],r=t[1],i=e.properties()[n.value],o=r.value;return typeof i==typeof o&&i>=o}],"filter-id->=":[Fe,[Ge],function(e,t){var n=t[0],r=e.id(),i=n.value;return typeof r==typeof i&&r>=i}],"filter-has":[Fe,[Ge],function(e,t){return t[0].value in e.properties()}],"filter-has-id":[Fe,[],function(e){return null!==e.id()}],"filter-type-in":[Fe,[Mt(je)],function(e,t){return t[0].value.indexOf(e.geometryType())>=0}],"filter-id-in":[Fe,[Mt(Ge)],function(e,t){return t[0].value.indexOf(e.id())>=0}],"filter-in-small":[Fe,[je,Mt(Ge)],function(e,t){var n=t[0];return t[1].value.indexOf(e.properties()[n.value])>=0}],"filter-in-large":[Fe,[je,Mt(Ge)],function(e,t){var n=t[0],r=t[1];return function(e,t,n,r){for(;n<=r;){var i=n+r>>1;if(t[i]===e)return!0;t[i]>e?r=i-1:n=i+1}return!1}(e.properties()[n.value],r.value,0,r.value.length-1)}],all:{type:Fe,overloads:[[[Fe,Fe],function(e,t){var n=t[0],r=t[1];return n.evaluate(e)&&r.evaluate(e)}],[We(Fe),function(e,t){for(var n=0,r=t;n<r.length;n+=1)if(!r[n].evaluate(e))return!1;return!0}]]},any:{type:Fe,overloads:[[[Fe,Fe],function(e,t){var n=t[0],r=t[1];return n.evaluate(e)||r.evaluate(e)}],[We(Fe),function(e,t){for(var n=0,r=t;n<r.length;n+=1)if(r[n].evaluate(e))return!0;return!1}]]},"!":[Fe,[Fe],function(e,t){return!t[0].evaluate(e)}],"is-supported-script":[Fe,[je],function(e,t){var n=t[0],r=e.globals&&e.globals.isSupportedScript;return!r||r(n.evaluate(e))}],upcase:[je,[je],function(e,t){return t[0].evaluate(e).toUpperCase()}],downcase:[je,[je],function(e,t){return t[0].evaluate(e).toLowerCase()}],concat:[je,We(Ge),function(e,t){return t.map(function(t){return Kt(t.evaluate(e))}).join("")}],"resolved-locale":[je,[qe],function(e,t){return t[0].evaluate(e).resolvedLocale()}]});var un=function(e,t){var n;this.expression=e,this._warningHistory={},this._evaluator=new dt,this._defaultValue=t?"color"===(n=t).type&&ar(n.default)?new Ze(0,0,0,0):"color"===n.type?Ze.parse(n.default)||null:void 0===n.default?null:n.default:null,this._enumValues=t&&"enum"===t.type?t.values:null};function yr(e){return Array.isArray(e)&&e.length>0&&"string"==typeof e[0]&&e[0]in an}function dr(e,t){var n=new wt(an,[],t?function(e){var t={color:Ne,string:je,number:Me,enum:je,boolean:Fe,formatted:He};return"array"===e.type?Mt(t[e.value]||Ge,e.length):t[e.type]}(t):void 0),r=n.parse(e,void 0,void 0,void 0,t&&"string"===t.type?{typeAnnotation:"coerce"}:void 0);return r?Qe(new un(r,t)):tr(n.errors)}un.prototype.evaluateWithoutErrorHandling=function(e,t,n){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=n,this.expression.evaluate(this._evaluator)},un.prototype.evaluate=function(e,t,n){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=n||null;try{var r=this.expression.evaluate(this._evaluator);if(null==r)return this._defaultValue;if(this._enumValues&&!(r in this._enumValues))throw new ot("Expected value to be one of "+Object.keys(this._enumValues).map(function(e){return JSON.stringify(e)}).join(", ")+", but found "+JSON.stringify(r)+" instead.");return r}catch(e){return this._warningHistory[e.message]||(this._warningHistory[e.message]=!0,"undefined"!=typeof console&&console.warn(e.message)),this._defaultValue}};var cn=function(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent="constant"!==e&&!ne(t.expression)};cn.prototype.evaluateWithoutErrorHandling=function(e,t,n){return this._styleExpression.evaluateWithoutErrorHandling(e,t,n)},cn.prototype.evaluate=function(e,t,n){return this._styleExpression.evaluate(e,t,n)};var hn=function(e,t,n){this.kind=e,this.zoomStops=n.labels,this._styleExpression=t,this.isStateDependent="camera"!==e&&!ne(t.expression),n instanceof Ut&&(this._interpolationType=n.interpolation)};function gr(e,t){if("error"===(e=dr(e,t)).result)return e;var n=e.value.expression,r=re(n);if(!r&&!er(t))return tr([new Ie("","data expressions not supported")]);var i=ie(n,["zoom"]);if(!i&&!rr(t))return tr([new Ie("","zoom expressions not supported")]);var o=function t(e){var n=null;if(e instanceof Gt)n=t(e.result);else if(e instanceof Vt)for(var r=0,i=e.args;r<i.length;r+=1){var o=i[r];if(n=t(o))break}else(e instanceof St||e instanceof Ut)&&e.input instanceof mt&&"zoom"===e.input.name&&(n=e);return n instanceof Ie?n:(e.eachChild(function(e){var r=t(e);r instanceof Ie?n=r:!n&&r?n=new Ie("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&r&&n!==r&&(n=new Ie("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n)}(n);return o||i?o instanceof Ie?tr([o]):o instanceof Ut&&!nr(t)?tr([new Ie("",'"interpolate" expressions cannot be used with this property')]):Qe(o?new hn(r?"camera":"composite",e.value,o):new cn(r?"constant":"source",e.value)):tr([new Ie("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}hn.prototype.evaluateWithoutErrorHandling=function(e,t,n){return this._styleExpression.evaluateWithoutErrorHandling(e,t,n)},hn.prototype.evaluate=function(e,t,n){return this._styleExpression.evaluate(e,t,n)},hn.prototype.interpolationFactor=function(e,t,n){return this._interpolationType?Ut.interpolationFactor(this._interpolationType,e,t,n):0};var gn=function(e,t){this._parameters=e,this._specification=t,xt(this,function t(e,n){var r,i,o,a="color"===n.type,s=e.stops&&"object"==typeof e.stops[0][0],l=s||void 0!==e.property,u=s||!l,c=e.type||(nr(n)?"exponential":"interval");if(a&&((e=xt({},e)).stops&&(e.stops=e.stops.map(function(e){return[e[0],Ze.parse(e[1])]})),e.default?e.default=Ze.parse(e.default):e.default=Ze.parse(n.default)),e.colorSpace&&"rgb"!==e.colorSpace&&!zt[e.colorSpace])throw new Error("Unknown color space: "+e.colorSpace);if("exponential"===c)r=pr;else if("interval"===c)r=lr;else if("categorical"===c){r=ur,i=Object.create(null);for(var p=0,h=e.stops;p<h.length;p+=1){var f=h[p];i[f[0]]=f[1]}o=typeof e.stops[0][0]}else{if("identity"!==c)throw new Error('Unknown function type "'+c+'"');r=cr}if(s){for(var d={},g=[],m=0;m<e.stops.length;m++){var y=e.stops[m],v=y[0].zoom;void 0===d[v]&&(d[v]={zoom:v,type:e.type,property:e.property,default:e.default,stops:[]},g.push(v)),d[v].stops.push([y[0].value,y[1]])}for(var _=[],b=0,x=g;b<x.length;b+=1){var w=x[b];_.push([d[w].zoom,t(d[w],n)])}return{kind:"composite",interpolationFactor:Ut.interpolationFactor.bind(void 0,{name:"linear"}),zoomStops:_.map(function(e){return e[0]}),evaluate:function(t,r){var i=t.zoom;return pr({stops:_,base:e.base},n,i).evaluate(i,r)}}}return u?{kind:"camera",interpolationFactor:"exponential"===c?Ut.interpolationFactor.bind(void 0,{name:"exponential",base:void 0!==e.base?e.base:1}):function(){return 0},zoomStops:e.stops.map(function(e){return e[0]}),evaluate:function(t){var a=t.zoom;return r(e,n,a,i,o)}}:{kind:"source",evaluate:function(t,a){var s=a&&a.properties?a.properties[e.property]:void 0;return void 0===s?sr(e.default,n.default):r(e,n,s,i,o)}}}(this._parameters,this._specification))};function br(e,t){if(ar(e))return new gn(e,t);if(yr(e)){var n=gr(e,t);if("error"===n.result)throw new Error(n.value.map(function(e){return e.key+": "+e.message}).join(", "));return n.value}var r=e;return"string"==typeof e&&"color"===t.type&&(r=Ze.parse(e)),{kind:"constant",evaluate:function(){return r}}}function _r(e){var t=e.key,n=e.value,r=e.valueSpec||{},i=e.objectElementValidators||{},o=e.style,a=e.styleSpec,s=[],l=ir(n);if("object"!==l)return[new Te(t,n,"object expected, "+l+" found")];for(var u in n){var c=u.split(".")[0],p=r[c]||r["*"],h=void 0;if(i[c])h=i[c];else if(r[c])h=Gr;else if(i["*"])h=i["*"];else{if(!r["*"]){s.push(new Te(t,n[u],'unknown property "'+u+'"'));continue}h=Gr}s=s.concat(h({key:(t?t+".":t)+u,value:n[u],valueSpec:p,style:o,styleSpec:a,object:n,objectKey:u},n))}for(var f in r)i[f]||r[f].required&&void 0===r[f].default&&void 0===n[f]&&s.push(new Te(t,n,'missing required property "'+f+'"'));return s}function wr(e){var t=e.value,n=e.valueSpec,r=e.style,i=e.styleSpec,o=e.key,a=e.arrayElementValidator||Gr;if("array"!==ir(t))return[new Te(o,t,"array expected, "+ir(t)+" found")];if(n.length&&t.length!==n.length)return[new Te(o,t,"array length "+n.length+" expected, length "+t.length+" found")];if(n["min-length"]&&t.length<n["min-length"])return[new Te(o,t,"array length at least "+n["min-length"]+" expected, length "+t.length+" found")];var s={type:n.value};i.$version<7&&(s.function=n.function),"object"===ir(n.value)&&(s=n.value);for(var l=[],u=0;u<t.length;u++)l=l.concat(a({array:t,arrayIndex:u,value:t[u],valueSpec:s,style:r,styleSpec:i,key:o+"["+u+"]"}));return l}function Ar(e){var t=e.key,n=e.value,r=e.valueSpec,i=ir(n);return"number"!==i?[new Te(t,n,"number expected, "+i+" found")]:"minimum"in r&&n<r.minimum?[new Te(t,n,n+" is less than the minimum value "+r.minimum)]:"maximum"in r&&n>r.maximum?[new Te(t,n,n+" is greater than the maximum value "+r.maximum)]:[]}function Sr(e){var t,n,r,i=e.valueSpec,o=bt(e.value.type),a={},s="categorical"!==o&&void 0===e.value.property,l=!s,u="array"===ir(e.value.stops)&&"array"===ir(e.value.stops[0])&&"object"===ir(e.value.stops[0][0]),p=_r({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(e){if("identity"===o)return[new Te(e.key,e.value,'identity function may not have a "stops" property')];var t=[],n=e.value;return t=t.concat(wr({key:e.key,value:n,valueSpec:e.valueSpec,style:e.style,styleSpec:e.styleSpec,arrayElementValidator:c})),"array"===ir(n)&&0===n.length&&t.push(new Te(e.key,n,"array must have at least one stop")),t},default:function(e){return Gr({key:e.key,value:e.value,valueSpec:i,style:e.style,styleSpec:e.styleSpec})}}});return"identity"===o&&s&&p.push(new Te(e.key,e.value,'missing required property "property"')),"identity"===o||e.value.stops||p.push(new Te(e.key,e.value,'missing required property "stops"')),"exponential"===o&&e.valueSpec.expression&&!nr(e.valueSpec)&&p.push(new Te(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(l&&!er(e.valueSpec)?p.push(new Te(e.key,e.value,"property functions not supported")):s&&!rr(e.valueSpec)&&p.push(new Te(e.key,e.value,"zoom functions not supported"))),"categorical"!==o&&!u||void 0!==e.value.property||p.push(new Te(e.key,e.value,'"property" property is required')),p;function c(e){var t=[],o=e.value,s=e.key;if("array"!==ir(o))return[new Te(s,o,"array expected, "+ir(o)+" found")];if(2!==o.length)return[new Te(s,o,"array length 2 expected, length "+o.length+" found")];if(u){if("object"!==ir(o[0]))return[new Te(s,o,"object expected, "+ir(o[0])+" found")];if(void 0===o[0].zoom)return[new Te(s,o,"object stop key must have zoom")];if(void 0===o[0].value)return[new Te(s,o,"object stop key must have value")];if(r&&r>bt(o[0].zoom))return[new Te(s,o[0].zoom,"stop zoom values must appear in ascending order")];bt(o[0].zoom)!==r&&(r=bt(o[0].zoom),n=void 0,a={}),t=t.concat(_r({key:s+"[0]",value:o[0],valueSpec:{zoom:{}},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{zoom:Ar,value:h}}))}else t=t.concat(h({key:s+"[0]",value:o[0],valueSpec:{},style:e.style,styleSpec:e.styleSpec},o));return yr(_t(o[1]))?t.concat([new Te(s+"[1]",o[1],"expressions are not allowed in function stops.")]):t.concat(Gr({key:s+"[1]",value:o[1],valueSpec:i,style:e.style,styleSpec:e.styleSpec}))}function h(e,r){var s=ir(e.value),l=bt(e.value),u=null!==e.value?e.value:r;if(t){if(s!==t)return[new Te(e.key,u,s+" stop domain type must match previous stop domain type "+t)]}else t=s;if("number"!==s&&"string"!==s&&"boolean"!==s)return[new Te(e.key,u,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==o){var c="number expected, "+s+" found";return er(i)&&void 0===o&&(c+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Te(e.key,u,c)]}return"categorical"!==o||"number"!==s||isFinite(l)&&Math.floor(l)===l?"categorical"!==o&&"number"===s&&void 0!==n&&l<n?[new Te(e.key,u,"stop domain values must appear in ascending order")]:(n=l,"categorical"===o&&l in a?[new Te(e.key,u,"stop domain values must be unique")]:(a[l]=!0,[])):[new Te(e.key,u,"integer expected, found "+l)]}}function kr(e){var t=("property"===e.expressionContext?gr:dr)(_t(e.value),e.valueSpec);if("error"===t.result)return t.value.map(function(t){return new Te(""+e.key+t.key,e.value,t.message)});var n=t.value.expression||t.value._styleExpression.expression;if("property"===e.expressionContext&&"text-font"===e.propertyKey&&-1!==n.possibleOutputs().indexOf(void 0))return[new Te(e.key,e.value,'Invalid data expression for "'+e.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===e.expressionContext&&"layout"===e.propertyType&&!ne(n))return[new Te(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===e.expressionContext&&!ne(n))return[new Te(e.key,e.value,'"feature-state" data expressions are not supported with filters.')];if(e.expressionContext&&0===e.expressionContext.indexOf("cluster")){if(!ie(n,["zoom","feature-state"]))return[new Te(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===e.expressionContext&&!re(n))return[new Te(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function zr(e){var t=e.key,n=e.value,r=e.valueSpec,i=[];return Array.isArray(r.values)?-1===r.values.indexOf(bt(n))&&i.push(new Te(t,n,"expected one of ["+r.values.join(", ")+"], "+JSON.stringify(n)+" found")):-1===Object.keys(r.values).indexOf(bt(n))&&i.push(new Te(t,n,"expected one of ["+Object.keys(r.values).join(", ")+"], "+JSON.stringify(n)+" found")),i}function Ir(e){if(!0===e||!1===e)return!0;if(!Array.isArray(e)||0===e.length)return!1;switch(e[0]){case"has":return e.length>=2&&"$id"!==e[1]&&"$type"!==e[1];case"in":case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==e.length||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(var t=0,n=e.slice(1);t<n.length;t+=1){var r=n[t];if(!Ir(r)&&"boolean"!=typeof r)return!1}return!0;default:return!0}}gn.deserialize=function(e){return new gn(e._parameters,e._specification)},gn.serialize=function(e){return{_parameters:e._parameters,_specification:e._specification}};var _n={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Er(e){if(null==e)return function(){return!0};Ir(e)||(e=Vr(e));var t=dr(e,_n);if("error"===t.result)throw new Error(t.value.map(function(e){return e.key+": "+e.message}).join(", "));return function(e,n){return t.value.evaluate(e,n)}}function Pr(e,t){return e<t?-1:e>t?1:0}function Vr(e){if(!e)return!0;var t,n=e[0];return e.length<=1?"any"!==n:"=="===n?Cr(e[1],e[2],"=="):"!="===n?Fr(Cr(e[1],e[2],"==")):"<"===n||">"===n||"<="===n||">="===n?Cr(e[1],e[2],n):"any"===n?(t=e.slice(1),["any"].concat(t.map(Vr))):"all"===n?["all"].concat(e.slice(1).map(Vr)):"none"===n?["all"].concat(e.slice(1).map(Vr).map(Fr)):"in"===n?Mr(e[1],e.slice(2)):"!in"===n?Fr(Mr(e[1],e.slice(2))):"has"===n?Tr(e[1]):"!has"!==n||Fr(Tr(e[1]))}function Cr(e,t,n){switch(e){case"$type":return["filter-type-"+n,t];case"$id":return["filter-id-"+n,t];default:return["filter-"+n,e,t]}}function Mr(e,t){if(0===t.length)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(function(e){return typeof e!=typeof t[0]})?["filter-in-large",e,["literal",t.sort(Pr)]]:["filter-in-small",e,["literal",t]]}}function Tr(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function Fr(e){return["!",e]}function Lr(e){return Ir(_t(e.value))?kr(xt({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function t(e){var n=e.value,r=e.key;if("array"!==ir(n))return[new Te(r,n,"array expected, "+ir(n)+" found")];var i,o=e.styleSpec,a=[];if(n.length<1)return[new Te(r,n,"filter array must have at least 1 element")];switch(a=a.concat(zr({key:r+"[0]",value:n[0],valueSpec:o.filter_operator,style:e.style,styleSpec:e.styleSpec})),bt(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&"$type"===bt(n[1])&&a.push(new Te(r,n,'"$type" cannot be use with operator "'+n[0]+'"'));case"==":case"!=":3!==n.length&&a.push(new Te(r,n,'filter array for operator "'+n[0]+'" must have 3 elements'));case"in":case"!in":n.length>=2&&"string"!==(i=ir(n[1]))&&a.push(new Te(r+"[1]",n[1],"string expected, "+i+" found"));for(var s=2;s<n.length;s++)i=ir(n[s]),"$type"===bt(n[1])?a=a.concat(zr({key:r+"["+s+"]",value:n[s],valueSpec:o.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==i&&"number"!==i&&"boolean"!==i&&a.push(new Te(r+"["+s+"]",n[s],"string, number, or boolean expected, "+i+" found"));break;case"any":case"all":case"none":for(var l=1;l<n.length;l++)a=a.concat(t({key:r+"["+l+"]",value:n[l],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":i=ir(n[1]),2!==n.length?a.push(new Te(r,n,'filter array for "'+n[0]+'" operator must have 2 elements')):"string"!==i&&a.push(new Te(r+"[1]",n[1],"string expected, "+i+" found"))}return a}(e)}function Or(e,t){var n=e.key,r=e.style,i=e.styleSpec,o=e.value,a=e.objectKey,s=i[t+"_"+e.layerType];if(!s)return[];var l=a.match(/^(.*)-transition$/);if("paint"===t&&l&&s[l[1]]&&s[l[1]].transition)return Gr({key:n,value:o,valueSpec:i.transition,style:r,styleSpec:i});var u,c=e.valueSpec||s[a];if(!c)return[new Te(n,o,'unknown property "'+a+'"')];if("string"===ir(o)&&er(c)&&!c.tokens&&(u=/^{([^}]+)}$/.exec(o)))return[new Te(n,o,'"'+a+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(u[1])+" }`.")];var p=[];return"symbol"===e.layerType&&("text-field"===a&&r&&!r.glyphs&&p.push(new Te(n,o,'use of "text-field" requires a style "glyphs" property')),"text-font"===a&&ar(_t(o))&&"identity"===bt(o.type)&&p.push(new Te(n,o,'"text-font" does not support identity functions'))),p.concat(Gr({key:e.key,value:o,valueSpec:c,style:r,styleSpec:i,expressionContext:"property",propertyType:t,propertyKey:a}))}function Dr(e){return Or(e,"paint")}function Ur(e){return Or(e,"layout")}function jr(e){var t=[],n=e.value,r=e.key,i=e.style,o=e.styleSpec;n.type||n.ref||t.push(new Te(r,n,'either "type" or "ref" is required'));var a,s=bt(n.type),l=bt(n.ref);if(n.id)for(var u=bt(n.id),c=0;c<e.arrayIndex;c++){var p=i.layers[c];bt(p.id)===u&&t.push(new Te(r,n.id,'duplicate layer id "'+n.id+'", previously used at line '+p.id.__line__))}if("ref"in n)["type","source","source-layer","filter","layout"].forEach(function(e){e in n&&t.push(new Te(r,n[e],'"'+e+'" is prohibited for ref layers'))}),i.layers.forEach(function(e){bt(e.id)===l&&(a=e)}),a?a.ref?t.push(new Te(r,n.ref,"ref cannot reference another ref layer")):s=bt(a.type):t.push(new Te(r,n.ref,'ref layer "'+l+'" not found'));else if("background"!==s)if(n.source){var h=i.sources&&i.sources[n.source],f=h&&bt(h.type);h?"vector"===f&&"raster"===s?t.push(new Te(r,n.source,'layer "'+n.id+'" requires a raster source')):"raster"===f&&"raster"!==s?t.push(new Te(r,n.source,'layer "'+n.id+'" requires a vector source')):"vector"!==f||n["source-layer"]?"raster-dem"===f&&"hillshade"!==s?t.push(new Te(r,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==s||!n.paint||!n.paint["line-gradient"]||"geojson"===f&&h.lineMetrics||t.push(new Te(r,n,'layer "'+n.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):t.push(new Te(r,n,'layer "'+n.id+'" must specify a "source-layer"')):t.push(new Te(r,n.source,'source "'+n.source+'" not found'))}else t.push(new Te(r,n,'missing required property "source"'));return t=t.concat(_r({key:r,value:n,valueSpec:o.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Gr({key:r+".type",value:n.type,valueSpec:o.layer.type,style:e.style,styleSpec:e.styleSpec,object:n,objectKey:"type"})},filter:Lr,layout:function(e){return _r({layer:n,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(e){return Ur(xt({layerType:s},e))}}})},paint:function(e){return _r({layer:n,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(e){return Dr(xt({layerType:s},e))}}})}}}))}function Rr(e){var t=e.value,n=e.key,r=e.styleSpec,i=e.style;if(!t.type)return[new Te(n,t,'"type" is required')];var o,a=bt(t.type);switch(a){case"vector":case"raster":case"raster-dem":if(o=_r({key:n,value:t,valueSpec:r["source_"+a.replace("-","_")],style:e.style,styleSpec:r}),"url"in t)for(var s in t)["type","url","tileSize"].indexOf(s)<0&&o.push(new Te(n+"."+s,t[s],'a source with a "url" property may not include a "'+s+'" property'));return o;case"geojson":if(o=_r({key:n,value:t,valueSpec:r.source_geojson,style:i,styleSpec:r}),t.cluster)for(var l in t.clusterProperties){var u=t.clusterProperties[l],c=u[0],p=u[1],h="string"==typeof c?[c,["accumulated"],["get",l]]:c;o.push.apply(o,kr({key:n+"."+l+".map",value:p,expressionContext:"cluster-map"})),o.push.apply(o,kr({key:n+"."+l+".reduce",value:h,expressionContext:"cluster-reduce"}))}return o;case"video":return _r({key:n,value:t,valueSpec:r.source_video,style:i,styleSpec:r});case"image":return _r({key:n,value:t,valueSpec:r.source_image,style:i,styleSpec:r});case"canvas":return[new Te(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return zr({key:n+".type",value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:i,styleSpec:r})}}function qr(e){var t=e.value,n=e.styleSpec,r=n.light,i=e.style,o=[],a=ir(t);if(void 0===t)return o;if("object"!==a)return o.concat([new Te("light",t,"object expected, "+a+" found")]);for(var s in t){var l=s.match(/^(.*)-transition$/);o=l&&r[l[1]]&&r[l[1]].transition?o.concat(Gr({key:s,value:t[s],valueSpec:n.transition,style:i,styleSpec:n})):r[s]?o.concat(Gr({key:s,value:t[s],valueSpec:r[s],style:i,styleSpec:n})):o.concat([new Te(s,t[s],'unknown property "'+s+'"')])}return o}function Nr(e){var t=e.value,n=e.key,r=ir(t);return"string"!==r?[new Te(n,t,"string expected, "+r+" found")]:[]}var bn={"*":function(){return[]},array:wr,boolean:function(e){var t=e.value,n=e.key,r=ir(t);return"boolean"!==r?[new Te(n,t,"boolean expected, "+r+" found")]:[]},number:Ar,color:function(e){var t=e.key,n=e.value,r=ir(n);return"string"!==r?[new Te(t,n,"color expected, "+r+" found")]:null===Ke(n)?[new Te(t,n,'color expected, "'+n+'" found')]:[]},constants:gt,enum:zr,filter:Lr,function:Sr,layer:jr,object:_r,source:Rr,light:qr,string:Nr,formatted:function(e){return 0===Nr(e).length?[]:kr(e)}};function Gr(e){var t=e.value,n=e.valueSpec,r=e.styleSpec;return n.expression&&ar(bt(t))?Sr(e):n.expression&&yr(_t(t))?kr(e):n.type&&bn[n.type]?bn[n.type](e):_r(xt({},e,{valueSpec:n.type?r[n.type]:n}))}function Xr(e){var t=e.value,n=e.key,r=Nr(e);return r.length?r:(-1===t.indexOf("{fontstack}")&&r.push(new Te(n,t,'"glyphs" url must include a "{fontstack}" token')),-1===t.indexOf("{range}")&&r.push(new Te(n,t,'"glyphs" url must include a "{range}" token')),r)}function Zr(e,t){t=t||Ce;var n=[];return n=n.concat(Gr({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,objectElementValidators:{glyphs:Xr,"*":function(){return[]}}})),e.constants&&(n=n.concat(gt({key:"constants",value:e.constants,style:e,styleSpec:t}))),Hr(n)}function Hr(e){return[].concat(e).sort(function(e,t){return e.line-t.line})}function Yr(e){return function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return Hr(e.apply(this,t))}}Zr.source=Yr(Rr),Zr.light=Yr(qr),Zr.layer=Yr(jr),Zr.filter=Yr(Lr),Zr.paintProperty=Yr(Dr),Zr.layoutProperty=Yr(Ur);var xn=Zr,wn=Zr.light,Sn=Zr.paintProperty,En=Zr.layoutProperty;function tn(e,t){var n=!1;if(t&&t.length)for(var r=0,i=t;r<i.length;r+=1){var o=i[r];e.fire(new Ee(new Error(o.message))),n=!0}return n}var Pn=nn,Cn=3;function nn(e,t,n){var r=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var i=new Int32Array(this.arrayBuffer);e=i[0],t=i[1],n=i[2],this.d=t+2*n;for(var o=0;o<this.d*this.d;o++){var a=i[Cn+o],s=i[Cn+o+1];r.push(a===s?null:i.subarray(a,s))}var l=i[Cn+r.length],u=i[Cn+r.length+1];this.keys=i.subarray(l,u),this.bboxes=i.subarray(u),this.insert=this._insertReadonly}else{this.d=t+2*n;for(var c=0;c<this.d*this.d;c++)r.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=n,this.scale=t/e,this.uid=0;var p=n/t*e;this.min=-p,this.max=e+p}nn.prototype.insert=function(e,t,n,r,i){this._forEachCell(t,n,r,i,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)},nn.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},nn.prototype._insertCell=function(e,t,n,r,i,o){this.cells[i].push(o)},nn.prototype.query=function(e,t,n,r,i){var o=this.min,a=this.max;if(e<=o&&t<=o&&a<=n&&a<=r&&!i)return Array.prototype.slice.call(this.keys);var s=[];return this._forEachCell(e,t,n,r,this._queryCell,s,{},i),s},nn.prototype._queryCell=function(e,t,n,r,i,o,a,s){var l=this.cells[i];if(null!==l)for(var u=this.keys,c=this.bboxes,p=0;p<l.length;p++){var h=l[p];if(void 0===a[h]){var f=4*h;(s?s(c[f+0],c[f+1],c[f+2],c[f+3]):e<=c[f+2]&&t<=c[f+3]&&n>=c[f+0]&&r>=c[f+1])?(a[h]=!0,o.push(u[h])):a[h]=!1}}},nn.prototype._forEachCell=function(e,t,n,r,i,o,a,s){for(var l=this._convertToCellCoord(e),u=this._convertToCellCoord(t),c=this._convertToCellCoord(n),p=this._convertToCellCoord(r),h=l;h<=c;h++)for(var f=u;f<=p;f++){var d=this.d*f+h;if((!s||s(this._convertFromCellCoord(h),this._convertFromCellCoord(f),this._convertFromCellCoord(h+1),this._convertFromCellCoord(f+1)))&&i.call(this,e,t,n,r,d,o,a,s))return}},nn.prototype._convertFromCellCoord=function(e){return(e-this.padding)/this.scale},nn.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},nn.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var e=this.cells,t=Cn+this.cells.length+1+1,n=0,r=0;r<this.cells.length;r++)n+=this.cells[r].length;var i=new Int32Array(t+n+this.keys.length+this.bboxes.length);i[0]=this.extent,i[1]=this.n,i[2]=this.padding;for(var o=t,a=0;a<e.length;a++){var s=e[a];i[Cn+a]=o,i.set(s,o),o+=s.length}return i[Cn+e.length]=o,i.set(this.keys,o),o+=this.keys.length,i[Cn+e.length+1]=o,i.set(this.bboxes,o),o+=this.bboxes.length,i.buffer};var kn=self.ImageData,Tn={};function sn(e,t,n){void 0===n&&(n={}),Object.defineProperty(t,"_classRegistryKey",{value:e,writeable:!1}),Tn[e]={klass:t,omit:n.omit||[],shallow:n.shallow||[]}}for(var An in sn("Object",Object),Pn.serialize=function(e,t){var n=e.toArrayBuffer();return t&&t.push(n),{buffer:n}},Pn.deserialize=function(e){return new Pn(e.buffer)},sn("Grid",Pn),sn("Color",Ze),sn("Error",Error),sn("StylePropertyFunction",gn),sn("StyleExpression",un,{omit:["_evaluator"]}),sn("ZoomDependentExpression",hn),sn("ZoomConstantExpression",cn),sn("CompoundExpression",mt,{omit:["_evaluate"]}),an)an[An]._classRegistryKey||sn("Expression_"+An,an[An]);function ln(e,t){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(e instanceof ArrayBuffer)return t&&t.push(e),e;if(ArrayBuffer.isView(e)){var n=e;return t&&t.push(n.buffer),n}if(e instanceof kn)return t&&t.push(e.data.buffer),e;if(Array.isArray(e)){for(var r=[],i=0,o=e;i<o.length;i+=1){var a=o[i];r.push(ln(a,t))}return r}if("object"==typeof e){var s=e.constructor,l=s._classRegistryKey;if(!l)throw new Error("can't serialize object of unregistered class");var u=s.serialize?s.serialize(e,t):{};if(!s.serialize){for(var c in e)if(e.hasOwnProperty(c)&&!(Tn[l].omit.indexOf(c)>=0)){var p=e[c];u[c]=Tn[l].shallow.indexOf(c)>=0?p:ln(p,t)}e instanceof Error&&(u.message=e.message)}if(u.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==l&&(u.$name=l),u}throw new Error("can't serialize object of type "+typeof e)}function pn(e){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||e instanceof ArrayBuffer||ArrayBuffer.isView(e)||e instanceof kn)return e;if(Array.isArray(e))return e.map(pn);if("object"==typeof e){var t=e.$name||"Object",n=Tn[t].klass;if(!n)throw new Error("can't deserialize unregistered class "+t);if(n.deserialize)return n.deserialize(e);for(var r=Object.create(n.prototype),i=0,o=Object.keys(e);i<o.length;i+=1){var a=o[i];if("$name"!==a){var s=e[a];r[a]=Tn[t].shallow.indexOf(a)>=0?s:pn(s)}}return r}throw new Error("can't deserialize object of type "+typeof e)}var On=function(){this.first=!0};On.prototype.update=function(e,t){var n=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=n,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=n,!0):(this.lastFloorZoom>n?(this.lastIntegerZoom=n+1,this.lastIntegerZoomTime=t):this.lastFloorZoom<n&&(this.lastIntegerZoom=n,this.lastIntegerZoomTime=t),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=n,!0))};var In={"Latin-1 Supplement":function(e){return e>=128&&e<=255},Arabic:function(e){return e>=1536&&e<=1791},"Arabic Supplement":function(e){return e>=1872&&e<=1919},"Arabic Extended-A":function(e){return e>=2208&&e<=2303},"Hangul Jamo":function(e){return e>=4352&&e<=4607},"Unified Canadian Aboriginal Syllabics":function(e){return e>=5120&&e<=5759},Khmer:function(e){return e>=6016&&e<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(e){return e>=6320&&e<=6399},"General Punctuation":function(e){return e>=8192&&e<=8303},"Letterlike Symbols":function(e){return e>=8448&&e<=8527},"Number Forms":function(e){return e>=8528&&e<=8591},"Miscellaneous Technical":function(e){return e>=8960&&e<=9215},"Control Pictures":function(e){return e>=9216&&e<=9279},"Optical Character Recognition":function(e){return e>=9280&&e<=9311},"Enclosed Alphanumerics":function(e){return e>=9312&&e<=9471},"Geometric Shapes":function(e){return e>=9632&&e<=9727},"Miscellaneous Symbols":function(e){return e>=9728&&e<=9983},"Miscellaneous Symbols and Arrows":function(e){return e>=11008&&e<=11263},"CJK Radicals Supplement":function(e){return e>=11904&&e<=12031},"Kangxi Radicals":function(e){return e>=12032&&e<=12255},"Ideographic Description Characters":function(e){return e>=12272&&e<=12287},"CJK Symbols and Punctuation":function(e){return e>=12288&&e<=12351},Hiragana:function(e){return e>=12352&&e<=12447},Katakana:function(e){return e>=12448&&e<=12543},Bopomofo:function(e){return e>=12544&&e<=12591},"Hangul Compatibility Jamo":function(e){return e>=12592&&e<=12687},Kanbun:function(e){return e>=12688&&e<=12703},"Bopomofo Extended":function(e){return e>=12704&&e<=12735},"CJK Strokes":function(e){return e>=12736&&e<=12783},"Katakana Phonetic Extensions":function(e){return e>=12784&&e<=12799},"Enclosed CJK Letters and Months":function(e){return e>=12800&&e<=13055},"CJK Compatibility":function(e){return e>=13056&&e<=13311},"CJK Unified Ideographs Extension A":function(e){return e>=13312&&e<=19903},"Yijing Hexagram Symbols":function(e){return e>=19904&&e<=19967},"CJK Unified Ideographs":function(e){return e>=19968&&e<=40959},"Yi Syllables":function(e){return e>=40960&&e<=42127},"Yi Radicals":function(e){return e>=42128&&e<=42191},"Hangul Jamo Extended-A":function(e){return e>=43360&&e<=43391},"Hangul Syllables":function(e){return e>=44032&&e<=55215},"Hangul Jamo Extended-B":function(e){return e>=55216&&e<=55295},"Private Use Area":function(e){return e>=57344&&e<=63743},"CJK Compatibility Ideographs":function(e){return e>=63744&&e<=64255},"Arabic Presentation Forms-A":function(e){return e>=64336&&e<=65023},"Vertical Forms":function(e){return e>=65040&&e<=65055},"CJK Compatibility Forms":function(e){return e>=65072&&e<=65103},"Small Form Variants":function(e){return e>=65104&&e<=65135},"Arabic Presentation Forms-B":function(e){return e>=65136&&e<=65279},"Halfwidth and Fullwidth Forms":function(e){return e>=65280&&e<=65519}};function fn(e){for(var t=0,n=e;t<n.length;t+=1)if(dn(n[t].charCodeAt(0)))return!0;return!1}function yn(e){return!(In.Arabic(e)||In["Arabic Supplement"](e)||In["Arabic Extended-A"](e)||In["Arabic Presentation Forms-A"](e)||In["Arabic Presentation Forms-B"](e))}function dn(e){return!(746!==e&&747!==e&&(e<4352||!(In["Bopomofo Extended"](e)||In.Bopomofo(e)||In["CJK Compatibility Forms"](e)&&!(e>=65097&&e<=65103)||In["CJK Compatibility Ideographs"](e)||In["CJK Compatibility"](e)||In["CJK Radicals Supplement"](e)||In["CJK Strokes"](e)||!(!In["CJK Symbols and Punctuation"](e)||e>=12296&&e<=12305||e>=12308&&e<=12319||12336===e)||In["CJK Unified Ideographs Extension A"](e)||In["CJK Unified Ideographs"](e)||In["Enclosed CJK Letters and Months"](e)||In["Hangul Compatibility Jamo"](e)||In["Hangul Jamo Extended-A"](e)||In["Hangul Jamo Extended-B"](e)||In["Hangul Jamo"](e)||In["Hangul Syllables"](e)||In.Hiragana(e)||In["Ideographic Description Characters"](e)||In.Kanbun(e)||In["Kangxi Radicals"](e)||In["Katakana Phonetic Extensions"](e)||In.Katakana(e)&&12540!==e||!(!In["Halfwidth and Fullwidth Forms"](e)||65288===e||65289===e||65293===e||e>=65306&&e<=65310||65339===e||65341===e||65343===e||e>=65371&&e<=65503||65507===e||e>=65512&&e<=65519)||!(!In["Small Form Variants"](e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||In["Unified Canadian Aboriginal Syllabics"](e)||In["Unified Canadian Aboriginal Syllabics Extended"](e)||In["Vertical Forms"](e)||In["Yijing Hexagram Symbols"](e)||In["Yi Syllables"](e)||In["Yi Radicals"](e))))}function mn(e){return!(dn(e)||function(e){return!!(In["Latin-1 Supplement"](e)&&(167===e||169===e||174===e||177===e||188===e||189===e||190===e||215===e||247===e)||In["General Punctuation"](e)&&(8214===e||8224===e||8225===e||8240===e||8241===e||8251===e||8252===e||8258===e||8263===e||8264===e||8265===e||8273===e)||In["Letterlike Symbols"](e)||In["Number Forms"](e)||In["Miscellaneous Technical"](e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||9003===e||e>=9085&&e<=9114||e>=9150&&e<=9165||9167===e||e>=9169&&e<=9179||e>=9186&&e<=9215)||In["Control Pictures"](e)&&9251!==e||In["Optical Character Recognition"](e)||In["Enclosed Alphanumerics"](e)||In["Geometric Shapes"](e)||In["Miscellaneous Symbols"](e)&&!(e>=9754&&e<=9759)||In["Miscellaneous Symbols and Arrows"](e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||In["CJK Symbols and Punctuation"](e)||In.Katakana(e)||In["Private Use Area"](e)||In["CJK Compatibility Forms"](e)||In["Small Form Variants"](e)||In["Halfwidth and Fullwidth Forms"](e)||8734===e||8756===e||8757===e||e>=9984&&e<=10087||e>=10102&&e<=10131||65532===e||65533===e)}(e))}function vn(e,t){return!(!t&&(e>=1424&&e<=2303||In["Arabic Presentation Forms-A"](e)||In["Arabic Presentation Forms-B"](e))||e>=2304&&e<=3583||e>=3840&&e<=4255||In.Khmer(e))}var Rn,Ln=!1,Mn=null,jn=!1,Dn=new Pe,Fn={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return jn||null!=Fn.applyArabicShaping}},Bn=function(e,t){this.zoom=e,t?(this.now=t.now,this.fadeDuration=t.fadeDuration,this.zoomHistory=t.zoomHistory,this.transition=t.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new On,this.transition={})};Bn.prototype.isSupportedScript=function(e){return function(e,t){for(var n=0,r=e;n<r.length;n+=1)if(!vn(r[n].charCodeAt(0),t))return!1;return!0}(e,Fn.isLoaded())},Bn.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},Bn.prototype.getCrossfadeParameters=function(){var e=this.zoom,t=e-Math.floor(e),n=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:t+(1-t)*n}:{fromScale:.5,toScale:1,t:1-(1-n)*t}};var zn=function(e,t){this.property=e,this.value=t,this.expression=br(void 0===t?e.specification.default:t,e.specification)};zn.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},zn.prototype.possiblyEvaluate=function(e){return this.property.possiblyEvaluate(this,e)};var Un=function(e){this.property=e,this.value=new zn(e,void 0)};Un.prototype.transitioned=function(e,t){return new Gn(this.property,this.value,t,c({},e.transition,this.transition),e.now)},Un.prototype.untransitioned=function(){return new Gn(this.property,this.value,null,{},0)};var Vn=function(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)};Vn.prototype.getValue=function(e){return b(this._values[e].value.value)},Vn.prototype.setValue=function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new Un(this._values[e].property)),this._values[e].value=new zn(this._values[e].property,null===t?void 0:b(t))},Vn.prototype.getTransition=function(e){return b(this._values[e].transition)},Vn.prototype.setTransition=function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new Un(this._values[e].property)),this._values[e].transition=b(t)||void 0},Vn.prototype.serialize=function(){for(var e={},t=0,n=Object.keys(this._values);t<n.length;t+=1){var r=n[t],i=this.getValue(r);void 0!==i&&(e[r]=i);var o=this.getTransition(r);void 0!==o&&(e[r+"-transition"]=o)}return e},Vn.prototype.transitioned=function(e,t){for(var n=new Wn(this._properties),r=0,i=Object.keys(this._values);r<i.length;r+=1){var o=i[r];n._values[o]=this._values[o].transitioned(e,t._values[o])}return n},Vn.prototype.untransitioned=function(){for(var e=new Wn(this._properties),t=0,n=Object.keys(this._values);t<n.length;t+=1){var r=n[t];e._values[r]=this._values[r].untransitioned()}return e};var Gn=function(e,t,n,r,i){this.property=e,this.value=t,this.begin=i+r.delay||0,this.end=this.begin+r.duration||0,e.specification.transition&&(r.delay||r.duration)&&(this.prior=n)};Gn.prototype.possiblyEvaluate=function(e){var t=e.now||0,n=this.value.possiblyEvaluate(e),r=this.prior;if(r){if(t>this.end)return this.prior=null,n;if(this.value.isDataDriven())return this.prior=null,n;if(t<this.begin)return r.possiblyEvaluate(e);var i=(t-this.begin)/(this.end-this.begin);return this.property.interpolate(r.possiblyEvaluate(e),n,function(e){if(i<=0)return 0;if(i>=1)return 1;var t=i*i,n=t*i;return 4*(i<.5?n:3*(i-t)+n-.75)}())}return n};var Wn=function(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)};Wn.prototype.possiblyEvaluate=function(e){for(var t=new Xn(this._properties),n=0,r=Object.keys(this._values);n<r.length;n+=1){var i=r[n];t._values[i]=this._values[i].possiblyEvaluate(e)}return t},Wn.prototype.hasTransition=function(){for(var e=0,t=Object.keys(this._values);e<t.length;e+=1){var n=t[e];if(this._values[n].prior)return!0}return!1};var qn=function(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)};qn.prototype.getValue=function(e){return b(this._values[e].value)},qn.prototype.setValue=function(e,t){this._values[e]=new zn(this._values[e].property,null===t?void 0:b(t))},qn.prototype.serialize=function(){for(var e={},t=0,n=Object.keys(this._values);t<n.length;t+=1){var r=n[t],i=this.getValue(r);void 0!==i&&(e[r]=i)}return e},qn.prototype.possiblyEvaluate=function(e){for(var t=new Xn(this._properties),n=0,r=Object.keys(this._values);n<r.length;n+=1){var i=r[n];t._values[i]=this._values[i].possiblyEvaluate(e)}return t};var Hn=function(e,t,n){this.property=e,this.value=t,this.parameters=n};Hn.prototype.isConstant=function(){return"constant"===this.value.kind},Hn.prototype.constantOr=function(e){return"constant"===this.value.kind?this.value.value:e},Hn.prototype.evaluate=function(e,t){return this.property.evaluate(this.value,this.parameters,e,t)};var Xn=function(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)};Xn.prototype.get=function(e){return this._values[e]};var Zn=function(e){this.specification=e};Zn.prototype.possiblyEvaluate=function(e,t){return e.expression.evaluate(t)},Zn.prototype.interpolate=function(e,t,n){var r=Et[this.specification.type];return r?r(e,t,n):e};var Yn=function(e){this.specification=e};Yn.prototype.possiblyEvaluate=function(e,t){return"constant"===e.expression.kind||"camera"===e.expression.kind?new Hn(this,{kind:"constant",value:e.expression.evaluate(t)},t):new Hn(this,e.expression,t)},Yn.prototype.interpolate=function(e,t,n){if("constant"!==e.value.kind||"constant"!==t.value.kind)return e;if(void 0===e.value.value||void 0===t.value.value)return new Hn(this,{kind:"constant",value:void 0},e.parameters);var r=Et[this.specification.type];return r?new Hn(this,{kind:"constant",value:r(e.value.value,t.value.value,n)},e.parameters):e},Yn.prototype.evaluate=function(e,t,n,r){return"constant"===e.kind?e.value:e.evaluate(t,n,r)};var Jn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.possiblyEvaluate=function(e,t){if(void 0===e.value)return new Hn(this,{kind:"constant",value:void 0},t);if("constant"===e.expression.kind){var n=e.expression.evaluate(t),r=this._calculate(n,n,n,t);return new Hn(this,{kind:"constant",value:r},t)}if("camera"===e.expression.kind){var i=this._calculate(e.expression.evaluate({zoom:t.zoom-1}),e.expression.evaluate({zoom:t.zoom}),e.expression.evaluate({zoom:t.zoom+1}),t);return new Hn(this,{kind:"constant",value:i},t)}return new Hn(this,e.expression,t)},e.prototype.evaluate=function(e,t,n,r){if("source"===e.kind){var i=e.evaluate(t,n,r);return this._calculate(i,i,i,t)}return"composite"===e.kind?this._calculate(e.evaluate({zoom:Math.floor(t.zoom)-1},n,r),e.evaluate({zoom:Math.floor(t.zoom)},n,r),e.evaluate({zoom:Math.floor(t.zoom)+1},n,r),t):e.value},e.prototype._calculate=function(e,t,n,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:n,to:t}},e.prototype.interpolate=function(e){return e},e}(Yn),Qn=function(e){this.specification=e};Qn.prototype.possiblyEvaluate=function(e,t){if(void 0!==e.value){if("constant"===e.expression.kind){var n=e.expression.evaluate(t);return this._calculate(n,n,n,t)}return this._calculate(e.expression.evaluate(new Bn(Math.floor(t.zoom-1),t)),e.expression.evaluate(new Bn(Math.floor(t.zoom),t)),e.expression.evaluate(new Bn(Math.floor(t.zoom+1),t)),t)}},Qn.prototype._calculate=function(e,t,n,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:n,to:t}},Qn.prototype.interpolate=function(e){return e};var $n=function(e){this.specification=e};$n.prototype.possiblyEvaluate=function(e,t){return!!e.expression.evaluate(t)},$n.prototype.interpolate=function(){return!1};var fr=function(e){for(var t in this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},e){var n=e[t],r=this.defaultPropertyValues[t]=new zn(n,void 0),i=this.defaultTransitionablePropertyValues[t]=new Un(n);this.defaultTransitioningPropertyValues[t]=i.untransitioned(),this.defaultPossiblyEvaluatedValues[t]=r.possiblyEvaluate({})}};sn("DataDrivenProperty",Yn),sn("DataConstantProperty",Zn),sn("CrossFadedDataDrivenProperty",Jn),sn("CrossFadedProperty",Qn),sn("ColorRampProperty",$n);var mr=function(t){function e(e,n){if(t.call(this),this.id=e.id,this.type=e.type,this.visibility="visible",this._featureFilter=function(){return!0},"custom"!==e.type&&(e=e,this.metadata=e.metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,"background"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),n.layout&&(this._unevaluatedLayout=new qn(n.layout)),n.paint)){for(var r in this._transitionablePaint=new Vn(n.paint),e.paint)this.setPaintProperty(r,e.paint[r],{validate:!1});for(var i in e.layout)this.setLayoutProperty(i,e.layout[i],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned()}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},e.prototype.getLayoutProperty=function(e){return"visibility"===e?this.visibility:this._unevaluatedLayout.getValue(e)},e.prototype.setLayoutProperty=function(e,t,n){if(void 0===n&&(n={}),null!=t){var r="layers."+this.id+".layout."+e;if(this._validate(En,r,e,t,n))return}"visibility"!==e?this._unevaluatedLayout.setValue(e,t):this.visibility="none"===t?t:"visible"},e.prototype.getPaintProperty=function(e){return v(e,"-transition")?this._transitionablePaint.getTransition(e.slice(0,-"-transition".length)):this._transitionablePaint.getValue(e)},e.prototype.setPaintProperty=function(e,t,n){if(void 0===n&&(n={}),null!=t){var r="layers."+this.id+".paint."+e;if(this._validate(Sn,r,e,t,n))return!1}if(v(e,"-transition"))return this._transitionablePaint.setTransition(e.slice(0,-"-transition".length),t||void 0),!1;var i=this._transitionablePaint._values[e],o="cross-faded-data-driven"===i.property.specification["property-type"]&&!i.value.value&&t,a=this._transitionablePaint._values[e].value.isDataDriven();this._transitionablePaint.setValue(e,t);var s=this._transitionablePaint._values[e].value.isDataDriven();return this._handleSpecialPaintPropertyUpdate(e),s||a||o},e.prototype._handleSpecialPaintPropertyUpdate=function(e){},e.prototype.isHidden=function(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||"none"===this.visibility},e.prototype.updateTransitions=function(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)},e.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},e.prototype.recalculate=function(e){e.getCrossfadeParameters&&(this._crossfadeParameters=e.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e)),this.paint=this._transitioningPaint.possiblyEvaluate(e)},e.prototype.serialize=function(){var e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return"none"===this.visibility&&(e.layout=e.layout||{},e.layout.visibility="none"),x(e,function(e,t){return!(void 0===e||"layout"===t&&!Object.keys(e).length||"paint"===t&&!Object.keys(e).length)})},e.prototype._validate=function(e,t,n,r,i){return void 0===i&&(i={}),(!i||!1!==i.validate)&&tn(this,e.call(xn,{key:t,layerType:this.type,objectKey:n,value:r,styleSpec:Ce,style:{glyphs:!0,sprite:!0}}))},e.prototype.hasOffscreenPass=function(){return!1},e.prototype.resize=function(){},e.prototype.isStateDependent=function(){for(var e in this.paint._values){var t=this.paint.get(e);if(t instanceof Hn&&er(t.property.specification)&&("source"===t.value.kind||"composite"===t.value.kind)&&t.value.isStateDependent)return!0}return!1},e}(Pe),vr={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},xr=function(e,t){this._structArray=e,this._pos1=t*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Br=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function Nn(e,t){void 0===t&&(t=1);var n=0,r=0;return{members:e.map(function(e){var i,o=(i=e.type,vr[i].BYTES_PER_ELEMENT),a=n=Kn(n,Math.max(t,o)),s=e.components||1;return r=Math.max(r,o),n+=o*s,{name:e.name,type:e.type,components:s,offset:a}}),size:Kn(n,Math.max(r,t)),alignment:t}}function Kn(e,t){return Math.ceil(e/t)*t}Br.serialize=function(e,t){return e._trim(),t&&(e.isTransferred=!0,t.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}},Br.deserialize=function(e){var t=Object.create(this.prototype);return t.arrayBuffer=e.arrayBuffer,t.length=e.length,t.capacity=e.arrayBuffer.byteLength/t.bytesPerElement,t._refreshViews(),t},Br.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Br.prototype.clear=function(){this.length=0},Br.prototype.resize=function(e){this.reserve(e),this.length=e},Br.prototype.reserve=function(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}},Br.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var Wr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(e,t){var n=this.length;return this.resize(n+1),this.emplace(n,e,t)},e.prototype.emplace=function(e,t,n){var r=2*e;return this.int16[r+0]=t,this.int16[r+1]=n,e},e}(Br);Wr.prototype.bytesPerElement=4,sn("StructArrayLayout2i4",Wr);var Kr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(e,t,n,r){var i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)},e.prototype.emplace=function(e,t,n,r,i){var o=4*e;return this.int16[o+0]=t,this.int16[o+1]=n,this.int16[o+2]=r,this.int16[o+3]=i,e},e}(Br);Kr.prototype.bytesPerElement=8,sn("StructArrayLayout4i8",Kr);var Jr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(e,t,n,r,i,o){var a=this.length;return this.resize(a+1),this.emplace(a,e,t,n,r,i,o)},e.prototype.emplace=function(e,t,n,r,i,o,a){var s=6*e;return this.int16[s+0]=t,this.int16[s+1]=n,this.int16[s+2]=r,this.int16[s+3]=i,this.int16[s+4]=o,this.int16[s+5]=a,e},e}(Br);Jr.prototype.bytesPerElement=12,sn("StructArrayLayout2i4i12",Jr);var Qr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(e,t,n,r,i,o,a,s){var l=this.length;return this.resize(l+1),this.emplace(l,e,t,n,r,i,o,a,s)},e.prototype.emplace=function(e,t,n,r,i,o,a,s,l){var u=6*e,c=12*e;return this.int16[u+0]=t,this.int16[u+1]=n,this.int16[u+2]=r,this.int16[u+3]=i,this.uint8[c+8]=o,this.uint8[c+9]=a,this.uint8[c+10]=s,this.uint8[c+11]=l,e},e}(Br);Qr.prototype.bytesPerElement=12,sn("StructArrayLayout4i4ub12",Qr);var $r=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(e,t,n,r,i,o,a,s){var l=this.length;return this.resize(l+1),this.emplace(l,e,t,n,r,i,o,a,s)},e.prototype.emplace=function(e,t,n,r,i,o,a,s,l){var u=8*e;return this.uint16[u+0]=t,this.uint16[u+1]=n,this.uint16[u+2]=r,this.uint16[u+3]=i,this.uint16[u+4]=o,this.uint16[u+5]=a,this.uint16[u+6]=s,this.uint16[u+7]=l,e},e}(Br);$r.prototype.bytesPerElement=16,sn("StructArrayLayout8ui16",$r);var ei=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(e,t,n,r,i,o,a,s){var l=this.length;return this.resize(l+1),this.emplace(l,e,t,n,r,i,o,a,s)},e.prototype.emplace=function(e,t,n,r,i,o,a,s,l){var u=8*e;return this.int16[u+0]=t,this.int16[u+1]=n,this.int16[u+2]=r,this.int16[u+3]=i,this.uint16[u+4]=o,this.uint16[u+5]=a,this.uint16[u+6]=s,this.uint16[u+7]=l,e},e}(Br);ei.prototype.bytesPerElement=16,sn("StructArrayLayout4i4ui16",ei);var ti=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(e,t,n){var r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)},e.prototype.emplace=function(e,t,n,r){var i=3*e;return this.float32[i+0]=t,this.float32[i+1]=n,this.float32[i+2]=r,e},e}(Br);ti.prototype.bytesPerElement=12,sn("StructArrayLayout3f12",ti);var ni=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(e){var t=this.length;return this.resize(t+1),this.emplace(t,e)},e.prototype.emplace=function(e,t){var n=1*e;return this.uint32[n+0]=t,e},e}(Br);ni.prototype.bytesPerElement=4,sn("StructArrayLayout1ul4",ni);var ri=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(e,t,n,r,i,o,a,s,l,u,c){var p=this.length;return this.resize(p+1),this.emplace(p,e,t,n,r,i,o,a,s,l,u,c)},e.prototype.emplace=function(e,t,n,r,i,o,a,s,l,u,c,p){var h=12*e,f=6*e;return this.int16[h+0]=t,this.int16[h+1]=n,this.int16[h+2]=r,this.int16[h+3]=i,this.int16[h+4]=o,this.int16[h+5]=a,this.uint32[f+3]=s,this.uint16[h+8]=l,this.uint16[h+9]=u,this.int16[h+10]=c,this.int16[h+11]=p,e},e}(Br);ri.prototype.bytesPerElement=24,sn("StructArrayLayout6i1ul2ui2i24",ri);var ii=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(e,t,n,r,i,o){var a=this.length;return this.resize(a+1),this.emplace(a,e,t,n,r,i,o)},e.prototype.emplace=function(e,t,n,r,i,o,a){var s=6*e;return this.int16[s+0]=t,this.int16[s+1]=n,this.int16[s+2]=r,this.int16[s+3]=i,this.int16[s+4]=o,this.int16[s+5]=a,e},e}(Br);ii.prototype.bytesPerElement=12,sn("StructArrayLayout2i2i2i12",ii);var oi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer)},e.prototype.emplaceBack=function(e,t){var n=this.length;return this.resize(n+1),this.emplace(n,e,t)},e.prototype.emplace=function(e,t,n){var r=4*e;return this.uint8[r+0]=t,this.uint8[r+1]=n,e},e}(Br);oi.prototype.bytesPerElement=4,sn("StructArrayLayout2ub4",oi);var ai=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(e,t,n,r,i,o,a,s,l,u,c,p,h,f){var d=this.length;return this.resize(d+1),this.emplace(d,e,t,n,r,i,o,a,s,l,u,c,p,h,f)},e.prototype.emplace=function(e,t,n,r,i,o,a,s,l,u,c,p,h,f,d){var g=20*e,m=10*e,y=40*e;return this.int16[g+0]=t,this.int16[g+1]=n,this.uint16[g+2]=r,this.uint16[g+3]=i,this.uint32[m+2]=o,this.uint32[m+3]=a,this.uint32[m+4]=s,this.uint16[g+10]=l,this.uint16[g+11]=u,this.uint16[g+12]=c,this.float32[m+7]=p,this.float32[m+8]=h,this.uint8[y+36]=f,this.uint8[y+37]=d,e},e}(Br);ai.prototype.bytesPerElement=40,sn("StructArrayLayout2i2ui3ul3ui2f2ub40",ai);var si=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(e,t,n,r,i,o,a,s,l,u,c,p,h,f){var d=this.length;return this.resize(d+1),this.emplace(d,e,t,n,r,i,o,a,s,l,u,c,p,h,f)},e.prototype.emplace=function(e,t,n,r,i,o,a,s,l,u,c,p,h,f,d){var g=16*e,m=8*e;return this.int16[g+0]=t,this.int16[g+1]=n,this.int16[g+2]=r,this.int16[g+3]=i,this.uint16[g+4]=o,this.uint16[g+5]=a,this.uint16[g+6]=s,this.uint16[g+7]=l,this.uint16[g+8]=u,this.uint16[g+9]=c,this.uint16[g+10]=p,this.uint16[g+11]=h,this.uint16[g+12]=f,this.uint32[m+7]=d,e},e}(Br);si.prototype.bytesPerElement=32,sn("StructArrayLayout4i9ui1ul32",si);var li=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(e){var t=this.length;return this.resize(t+1),this.emplace(t,e)},e.prototype.emplace=function(e,t){var n=1*e;return this.float32[n+0]=t,e},e}(Br);li.prototype.bytesPerElement=4,sn("StructArrayLayout1f4",li);var ui=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(e,t,n){var r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)},e.prototype.emplace=function(e,t,n,r){var i=3*e;return this.int16[i+0]=t,this.int16[i+1]=n,this.int16[i+2]=r,e},e}(Br);ui.prototype.bytesPerElement=6,sn("StructArrayLayout3i6",ui);var ci=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(e,t,n){var r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)},e.prototype.emplace=function(e,t,n,r){var i=2*e,o=4*e;return this.uint32[i+0]=t,this.uint16[o+2]=n,this.uint16[o+3]=r,e},e}(Br);ci.prototype.bytesPerElement=8,sn("StructArrayLayout1ul2ui8",ci);var pi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(e,t,n){var r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)},e.prototype.emplace=function(e,t,n,r){var i=3*e;return this.uint16[i+0]=t,this.uint16[i+1]=n,this.uint16[i+2]=r,e},e}(Br);pi.prototype.bytesPerElement=6,sn("StructArrayLayout3ui6",pi);var hi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(e,t){var n=this.length;return this.resize(n+1),this.emplace(n,e,t)},e.prototype.emplace=function(e,t,n){var r=2*e;return this.uint16[r+0]=t,this.uint16[r+1]=n,e},e}(Br);hi.prototype.bytesPerElement=4,sn("StructArrayLayout2ui4",hi);var fi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(e){var t=this.length;return this.resize(t+1),this.emplace(t,e)},e.prototype.emplace=function(e,t){var n=1*e;return this.uint16[n+0]=t,e},e}(Br);fi.prototype.bytesPerElement=2,sn("StructArrayLayout1ui2",fi);var di=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(e,t){var n=this.length;return this.resize(n+1),this.emplace(n,e,t)},e.prototype.emplace=function(e,t,n){var r=2*e;return this.float32[r+0]=t,this.float32[r+1]=n,e},e}(Br);di.prototype.bytesPerElement=8,sn("StructArrayLayout2f8",di);var gi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(e,t,n,r){var i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)},e.prototype.emplace=function(e,t,n,r,i){var o=4*e;return this.float32[o+0]=t,this.float32[o+1]=n,this.float32[o+2]=r,this.float32[o+3]=i,e},e}(Br);gi.prototype.bytesPerElement=16,sn("StructArrayLayout4f16",gi);var mi=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},radius:{configurable:!0},signedDistanceFromAnchor:{configurable:!0},anchorPoint:{configurable:!0}};return n.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorPointX.set=function(e){this._structArray.int16[this._pos2+0]=e},n.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},n.anchorPointY.set=function(e){this._structArray.int16[this._pos2+1]=e},n.x1.get=function(){return this._structArray.int16[this._pos2+2]},n.x1.set=function(e){this._structArray.int16[this._pos2+2]=e},n.y1.get=function(){return this._structArray.int16[this._pos2+3]},n.y1.set=function(e){this._structArray.int16[this._pos2+3]=e},n.x2.get=function(){return this._structArray.int16[this._pos2+4]},n.x2.set=function(e){this._structArray.int16[this._pos2+4]=e},n.y2.get=function(){return this._structArray.int16[this._pos2+5]},n.y2.set=function(e){this._structArray.int16[this._pos2+5]=e},n.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},n.featureIndex.set=function(e){this._structArray.uint32[this._pos4+3]=e},n.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},n.sourceLayerIndex.set=function(e){this._structArray.uint16[this._pos2+8]=e},n.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},n.bucketIndex.set=function(e){this._structArray.uint16[this._pos2+9]=e},n.radius.get=function(){return this._structArray.int16[this._pos2+10]},n.radius.set=function(e){this._structArray.int16[this._pos2+10]=e},n.signedDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+11]},n.signedDistanceFromAnchor.set=function(e){this._structArray.int16[this._pos2+11]=e},n.anchorPoint.get=function(){return new E(this.anchorPointX,this.anchorPointY)},Object.defineProperties(e.prototype,n),e}(xr);mi.prototype.size=24;var yi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(e){return new mi(this,e)},e}(ri);sn("CollisionBoxArray",yi);var vi=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},hidden:{configurable:!0}};return n.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorX.set=function(e){this._structArray.int16[this._pos2+0]=e},n.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},n.anchorY.set=function(e){this._structArray.int16[this._pos2+1]=e},n.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},n.glyphStartIndex.set=function(e){this._structArray.uint16[this._pos2+2]=e},n.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},n.numGlyphs.set=function(e){this._structArray.uint16[this._pos2+3]=e},n.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},n.vertexStartIndex.set=function(e){this._structArray.uint32[this._pos4+2]=e},n.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},n.lineStartIndex.set=function(e){this._structArray.uint32[this._pos4+3]=e},n.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},n.lineLength.set=function(e){this._structArray.uint32[this._pos4+4]=e},n.segment.get=function(){return this._structArray.uint16[this._pos2+10]},n.segment.set=function(e){this._structArray.uint16[this._pos2+10]=e},n.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},n.lowerSize.set=function(e){this._structArray.uint16[this._pos2+11]=e},n.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},n.upperSize.set=function(e){this._structArray.uint16[this._pos2+12]=e},n.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},n.lineOffsetX.set=function(e){this._structArray.float32[this._pos4+7]=e},n.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},n.lineOffsetY.set=function(e){this._structArray.float32[this._pos4+8]=e},n.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},n.writingMode.set=function(e){this._structArray.uint8[this._pos1+36]=e},n.hidden.get=function(){return this._structArray.uint8[this._pos1+37]},n.hidden.set=function(e){this._structArray.uint8[this._pos1+37]=e},Object.defineProperties(e.prototype,n),e}(xr);vi.prototype.size=40;var _i=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(e){return new vi(this,e)},e}(ai);sn("PlacedSymbolArray",_i);var bi=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={anchorX:{configurable:!0},anchorY:{configurable:!0},horizontalPlacedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},crossTileID:{configurable:!0}};return n.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorX.set=function(e){this._structArray.int16[this._pos2+0]=e},n.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},n.anchorY.set=function(e){this._structArray.int16[this._pos2+1]=e},n.horizontalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},n.horizontalPlacedTextSymbolIndex.set=function(e){this._structArray.int16[this._pos2+2]=e},n.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},n.verticalPlacedTextSymbolIndex.set=function(e){this._structArray.int16[this._pos2+3]=e},n.key.get=function(){return this._structArray.uint16[this._pos2+4]},n.key.set=function(e){this._structArray.uint16[this._pos2+4]=e},n.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+5]},n.textBoxStartIndex.set=function(e){this._structArray.uint16[this._pos2+5]=e},n.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+6]},n.textBoxEndIndex.set=function(e){this._structArray.uint16[this._pos2+6]=e},n.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+7]},n.iconBoxStartIndex.set=function(e){this._structArray.uint16[this._pos2+7]=e},n.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+8]},n.iconBoxEndIndex.set=function(e){this._structArray.uint16[this._pos2+8]=e},n.featureIndex.get=function(){return this._structArray.uint16[this._pos2+9]},n.featureIndex.set=function(e){this._structArray.uint16[this._pos2+9]=e},n.numGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+10]},n.numGlyphVertices.set=function(e){this._structArray.uint16[this._pos2+10]=e},n.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+11]},n.numVerticalGlyphVertices.set=function(e){this._structArray.uint16[this._pos2+11]=e},n.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+12]},n.numIconVertices.set=function(e){this._structArray.uint16[this._pos2+12]=e},n.crossTileID.get=function(){return this._structArray.uint32[this._pos4+7]},n.crossTileID.set=function(e){this._structArray.uint32[this._pos4+7]=e},Object.defineProperties(e.prototype,n),e}(xr);bi.prototype.size=32;var xi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(e){return new bi(this,e)},e}(si);sn("SymbolInstanceArray",xi);var wi=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={offsetX:{configurable:!0}};return n.offsetX.get=function(){return this._structArray.float32[this._pos4+0]},n.offsetX.set=function(e){this._structArray.float32[this._pos4+0]=e},Object.defineProperties(e.prototype,n),e}(xr);wi.prototype.size=4;var Si=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getoffsetX=function(e){return this.float32[1*e+0]},e.prototype.get=function(e){return new wi(this,e)},e}(li);sn("GlyphOffsetArray",Si);var Pi=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={x:{configurable:!0},y:{configurable:!0},tileUnitDistanceFromAnchor:{configurable:!0}};return n.x.get=function(){return this._structArray.int16[this._pos2+0]},n.x.set=function(e){this._structArray.int16[this._pos2+0]=e},n.y.get=function(){return this._structArray.int16[this._pos2+1]},n.y.set=function(e){this._structArray.int16[this._pos2+1]=e},n.tileUnitDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+2]},n.tileUnitDistanceFromAnchor.set=function(e){this._structArray.int16[this._pos2+2]=e},Object.defineProperties(e.prototype,n),e}(xr);Pi.prototype.size=6;var Ci=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getx=function(e){return this.int16[3*e+0]},e.prototype.gety=function(e){return this.int16[3*e+1]},e.prototype.gettileUnitDistanceFromAnchor=function(e){return this.int16[3*e+2]},e.prototype.get=function(e){return new Pi(this,e)},e}(ui);sn("SymbolLineVertexArray",Ci);var ki=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return n.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},n.featureIndex.set=function(e){this._structArray.uint32[this._pos4+0]=e},n.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},n.sourceLayerIndex.set=function(e){this._structArray.uint16[this._pos2+2]=e},n.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},n.bucketIndex.set=function(e){this._structArray.uint16[this._pos2+3]=e},Object.defineProperties(e.prototype,n),e}(xr);ki.prototype.size=8;var Ti=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(e){return new ki(this,e)},e}(ci);sn("FeatureIndexArray",Ti);var Ai=Nn([{name:"a_pos",components:2,type:"Int16"}],4),Oi=Ai.members,Ri=(Ai.size,Ai.alignment,function(e){void 0===e&&(e=[]),this.segments=e});function Ii(e,t){return 256*(e=l(Math.floor(e),0,255))+l(Math.floor(t),0,255)}Ri.prototype.prepareSegment=function(e,t,n,r){var i=this.segments[this.segments.length-1];return e>Ri.MAX_VERTEX_ARRAY_LENGTH&&w("Max vertices per segment is "+Ri.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+e),(!i||i.vertexLength+e>Ri.MAX_VERTEX_ARRAY_LENGTH||i.sortKey!==r)&&(i={vertexOffset:t.length,primitiveOffset:n.length,vertexLength:0,primitiveLength:0},void 0!==r&&(i.sortKey=r),this.segments.push(i)),i},Ri.prototype.get=function(){return this.segments},Ri.prototype.destroy=function(){for(var e=0,t=this.segments;e<t.length;e+=1){var n=t[e];for(var r in n.vaos)n.vaos[r].destroy()}},Ri.simpleSegment=function(e,t,n,r){return new Ri([{vertexOffset:e,primitiveOffset:t,vertexLength:n,primitiveLength:r,vaos:{},sortKey:0}])},Ri.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,sn("SegmentVector",Ri);var Li=function(){this.ids=[],this.positions=[],this.indexed=!1};function Ei(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}Li.prototype.add=function(e,t,n,r){this.ids.push(e),this.positions.push(t,n,r)},Li.prototype.getPositions=function(e){for(var t=0,n=this.ids.length-1;t<n;){var r=t+n>>1;this.ids[r]>=e?n=r:t=r+1}for(var i=[];this.ids[t]===e;){var o=this.positions[3*t],a=this.positions[3*t+1],s=this.positions[3*t+2];i.push({index:o,start:a,end:s}),t++}return i},Li.serialize=function(e,t){var n=new Float64Array(e.ids),r=new Uint32Array(e.positions);return function t(e,n,r,i){if(!(r>=i)){for(var o=e[r+i>>1],a=r-1,s=i+1;;){do{a++}while(e[a]<o);do{s--}while(e[s]>o);if(a>=s)break;Ei(e,a,s),Ei(n,3*a,3*s),Ei(n,3*a+1,3*s+1),Ei(n,3*a+2,3*s+2)}t(e,n,r,s),t(e,n,s+1,i)}}(n,r,0,n.length-1),t.push(n.buffer,r.buffer),{ids:n,positions:r}},Li.deserialize=function(e){var t=new Li;return t.ids=e.ids,t.positions=e.positions,t.indexed=!0,t},sn("FeaturePositionMap",Li);var Mi=function(e,t){this.gl=e.gl,this.location=t},ji=function(t){function e(e,n){t.call(this,e,n),this.current=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(e){this.current!==e&&(this.current=e,this.gl.uniform1i(this.location,e))},e}(Mi),Di=function(t){function e(e,n){t.call(this,e,n),this.current=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(e){this.current!==e&&(this.current=e,this.gl.uniform1f(this.location,e))},e}(Mi),Fi=function(t){function e(e,n){t.call(this,e,n),this.current=[0,0]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(e){e[0]===this.current[0]&&e[1]===this.current[1]||(this.current=e,this.gl.uniform2f(this.location,e[0],e[1]))},e}(Mi),Ni=function(t){function e(e,n){t.call(this,e,n),this.current=[0,0,0]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]||(this.current=e,this.gl.uniform3f(this.location,e[0],e[1],e[2]))},e}(Mi),Bi=function(t){function e(e,n){t.call(this,e,n),this.current=[0,0,0,0]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]&&e[3]===this.current[3]||(this.current=e,this.gl.uniform4f(this.location,e[0],e[1],e[2],e[3]))},e}(Mi),zi=function(t){function e(e,n){t.call(this,e,n),this.current=Ze.transparent}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(e){e.r===this.current.r&&e.g===this.current.g&&e.b===this.current.b&&e.a===this.current.a||(this.current=e,this.gl.uniform4f(this.location,e.r,e.g,e.b,e.a))},e}(Mi),Vi=new Float32Array(16),Gi=function(t){function e(e,n){t.call(this,e,n),this.current=Vi}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(e){if(e[12]!==this.current[12]||e[0]!==this.current[0])return this.current=e,void this.gl.uniformMatrix4fv(this.location,!1,e);for(var t=1;t<16;t++)if(e[t]!==this.current[t]){this.current=e,this.gl.uniformMatrix4fv(this.location,!1,e);break}},e}(Mi);function Ui(e){return[Ii(255*e.r,255*e.g),Ii(255*e.b,255*e.a)]}var qi=function(e,t,n){this.value=e,this.names=t,this.uniformNames=this.names.map(function(e){return"u_"+e}),this.type=n,this.maxValue=-1/0};qi.prototype.defines=function(){return this.names.map(function(e){return"#define HAS_UNIFORM_u_"+e})},qi.prototype.setConstantPatternPositions=function(){},qi.prototype.populatePaintArray=function(){},qi.prototype.updatePaintArray=function(){},qi.prototype.upload=function(){},qi.prototype.destroy=function(){},qi.prototype.setUniforms=function(e,t,n,r){t.set(r.constantOr(this.value))},qi.prototype.getBinding=function(e,t){return"color"===this.type?new zi(e,t):new Di(e,t)},qi.serialize=function(e){var t=e.value,n=e.names,r=e.type;return{value:ln(t),names:n,type:r}},qi.deserialize=function(e){var t=e.value,n=e.names,r=e.type;return new qi(pn(t),n,r)};var Xi=function(e,t,n){this.value=e,this.names=t,this.uniformNames=this.names.map(function(e){return"u_"+e}),this.type=n,this.maxValue=-1/0,this.patternPositions={patternTo:null,patternFrom:null}};Xi.prototype.defines=function(){return this.names.map(function(e){return"#define HAS_UNIFORM_u_"+e})},Xi.prototype.populatePaintArray=function(){},Xi.prototype.updatePaintArray=function(){},Xi.prototype.upload=function(){},Xi.prototype.destroy=function(){},Xi.prototype.setConstantPatternPositions=function(e,t){this.patternPositions.patternTo=e.tlbr,this.patternPositions.patternFrom=t.tlbr},Xi.prototype.setUniforms=function(e,t,n,r,i){var o=this.patternPositions;"u_pattern_to"===i&&o.patternTo&&t.set(o.patternTo),"u_pattern_from"===i&&o.patternFrom&&t.set(o.patternFrom)},Xi.prototype.getBinding=function(e,t){return new Bi(e,t)};var Ki=function(e,t,n,r){this.expression=e,this.names=t,this.type=n,this.uniformNames=this.names.map(function(e){return"a_"+e}),this.maxValue=-1/0,this.paintVertexAttributes=t.map(function(e){return{name:"a_"+e,type:"Float32",components:"color"===n?2:1,offset:0}}),this.paintVertexArray=new r};Ki.prototype.defines=function(){return[]},Ki.prototype.setConstantPatternPositions=function(){},Ki.prototype.populatePaintArray=function(e,t){var n=this.paintVertexArray,r=n.length;n.reserve(e);var i=this.expression.evaluate(new Bn(0),t,{});if("color"===this.type)for(var o=Ui(i),a=r;a<e;a++)n.emplaceBack(o[0],o[1]);else{for(var s=r;s<e;s++)n.emplaceBack(i);this.maxValue=Math.max(this.maxValue,i)}},Ki.prototype.updatePaintArray=function(e,t,n,r){var i=this.paintVertexArray,o=this.expression.evaluate({zoom:0},n,r);if("color"===this.type)for(var a=Ui(o),s=e;s<t;s++)i.emplace(s,a[0],a[1]);else{for(var l=e;l<t;l++)i.emplace(l,o);this.maxValue=Math.max(this.maxValue,o)}},Ki.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Ki.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Ki.prototype.setUniforms=function(e,t){t.set(0)},Ki.prototype.getBinding=function(e,t){return new Di(e,t)};var Yi=function(e,t,n,r,i,o){this.expression=e,this.names=t,this.uniformNames=this.names.map(function(e){return"a_"+e+"_t"}),this.type=n,this.useIntegerZoom=r,this.zoom=i,this.maxValue=-1/0;var a=o;this.paintVertexAttributes=t.map(function(e){return{name:"a_"+e,type:"Float32",components:"color"===n?4:2,offset:0}}),this.paintVertexArray=new a};Yi.prototype.defines=function(){return[]},Yi.prototype.setConstantPatternPositions=function(){},Yi.prototype.populatePaintArray=function(e,t){var n=this.paintVertexArray,r=n.length;n.reserve(e);var i=this.expression.evaluate(new Bn(this.zoom),t,{}),o=this.expression.evaluate(new Bn(this.zoom+1),t,{});if("color"===this.type)for(var a=Ui(i),s=Ui(o),l=r;l<e;l++)n.emplaceBack(a[0],a[1],s[0],s[1]);else{for(var u=r;u<e;u++)n.emplaceBack(i,o);this.maxValue=Math.max(this.maxValue,i,o)}},Yi.prototype.updatePaintArray=function(e,t,n,r){var i=this.paintVertexArray,o=this.expression.evaluate({zoom:this.zoom},n,r),a=this.expression.evaluate({zoom:this.zoom+1},n,r);if("color"===this.type)for(var s=Ui(o),l=Ui(a),u=e;u<t;u++)i.emplace(u,s[0],s[1],l[0],l[1]);else{for(var c=e;c<t;c++)i.emplace(c,o,a);this.maxValue=Math.max(this.maxValue,o,a)}},Yi.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Yi.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Yi.prototype.interpolationFactor=function(e){return this.useIntegerZoom?this.expression.interpolationFactor(Math.floor(e),this.zoom,this.zoom+1):this.expression.interpolationFactor(e,this.zoom,this.zoom+1)},Yi.prototype.setUniforms=function(e,t,n){t.set(this.interpolationFactor(n.zoom))},Yi.prototype.getBinding=function(e,t){return new Di(e,t)};var Ji=function(e,t,n,r,i,o,a){this.expression=e,this.names=t,this.type=n,this.uniformNames=this.names.map(function(e){return"a_"+e+"_t"}),this.useIntegerZoom=r,this.zoom=i,this.maxValue=-1/0,this.layerId=a,this.paintVertexAttributes=t.map(function(e){return{name:"a_"+e,type:"Uint16",components:4,offset:0}}),this.zoomInPaintVertexArray=new o,this.zoomOutPaintVertexArray=new o};Ji.prototype.defines=function(){return[]},Ji.prototype.setConstantPatternPositions=function(){},Ji.prototype.populatePaintArray=function(e,t,n){var r=this.zoomInPaintVertexArray,i=this.zoomOutPaintVertexArray,o=this.layerId,a=r.length;if(r.reserve(e),i.reserve(e),n&&t.patterns&&t.patterns[o]){var s=t.patterns[o],l=s.min,u=s.mid,c=s.max,p=n[l],h=n[u],f=n[c];if(!p||!h||!f)return;for(var d=a;d<e;d++)r.emplaceBack(h.tl[0],h.tl[1],h.br[0],h.br[1],p.tl[0],p.tl[1],p.br[0],p.br[1]),i.emplaceBack(h.tl[0],h.tl[1],h.br[0],h.br[1],f.tl[0],f.tl[1],f.br[0],f.br[1])}},Ji.prototype.updatePaintArray=function(e,t,n,r,i){var o=this.zoomInPaintVertexArray,a=this.zoomOutPaintVertexArray,s=this.layerId;if(i&&n.patterns&&n.patterns[s]){var l=n.patterns[s],u=l.min,c=l.mid,p=l.max,h=i[u],f=i[c],d=i[p];if(!h||!f||!d)return;for(var g=e;g<t;g++)o.emplace(g,f.tl[0],f.tl[1],f.br[0],f.br[1],h.tl[0],h.tl[1],h.br[0],h.br[1]),a.emplace(g,f.tl[0],f.tl[1],f.br[0],f.br[1],d.tl[0],d.tl[1],d.br[0],d.br[1])}},Ji.prototype.upload=function(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Ji.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()},Ji.prototype.setUniforms=function(e,t){t.set(0)},Ji.prototype.getBinding=function(e,t){return new Di(e,t)};var $i=function(){this.binders={},this.cacheKey="",this._buffers=[],this._featureMap=new Li,this._bufferOffset=0};$i.createDynamic=function(e,t,n){var r=new $i,i=[];for(var o in e.paint._values)if(n(o)){var a=e.paint.get(o);if(a instanceof Hn&&er(a.property.specification)){var s=Zi(o,e.type),l=a.property.specification.type,u=a.property.useIntegerZoom;if("cross-faded"===a.property.specification["property-type"]||"cross-faded-data-driven"===a.property.specification["property-type"])if("constant"===a.value.kind)r.binders[o]=new Xi(a.value.value,s,l),i.push("/u_"+o);else{var c=Hi(o,l,"source");r.binders[o]=new Ji(a.value,s,l,u,t,c,e.id),i.push("/a_"+o)}else if("constant"===a.value.kind)r.binders[o]=new qi(a.value.value,s,l),i.push("/u_"+o);else if("source"===a.value.kind){var p=Hi(o,l,"source");r.binders[o]=new Ki(a.value,s,l,p),i.push("/a_"+o)}else{var h=Hi(o,l,"composite");r.binders[o]=new Yi(a.value,s,l,u,t,h),i.push("/z_"+o)}}}return r.cacheKey=i.sort().join(""),r},$i.prototype.populatePaintArrays=function(e,t,n,r){for(var i in this.binders)this.binders[i].populatePaintArray(e,t,r);void 0!==t.id&&this._featureMap.add(+t.id,n,this._bufferOffset,e),this._bufferOffset=e},$i.prototype.setConstantPatternPositions=function(e,t){for(var n in this.binders)this.binders[n].setConstantPatternPositions(e,t)},$i.prototype.updatePaintArrays=function(e,t,n,r){var i=!1;for(var o in e)for(var a=0,s=this._featureMap.getPositions(+o);a<s.length;a+=1){var l=s[a],u=t.feature(l.index);for(var c in this.binders){var p=this.binders[c];if(!(p instanceof qi||p instanceof Xi)&&!0===p.expression.isStateDependent){var h=n.paint.get(c);p.expression=h.value,p.updatePaintArray(l.start,l.end,u,e[o],r),i=!0}}}return i},$i.prototype.defines=function(){var e=[];for(var t in this.binders)e.push.apply(e,this.binders[t].defines());return e},$i.prototype.getPaintVertexBuffers=function(){return this._buffers},$i.prototype.getUniforms=function(e,t){var n={};for(var r in this.binders)for(var i=this.binders[r],o=0,a=i.uniformNames;o<a.length;o+=1){var s=a[o];n[s]=i.getBinding(e,t[s])}return n},$i.prototype.setUniforms=function(e,t,n,r){for(var i in this.binders)for(var o=this.binders[i],a=0,s=o.uniformNames;a<s.length;a+=1){var l=s[a];o.setUniforms(e,t[l],r,n.get(i),l)}},$i.prototype.updatePatternPaintBuffers=function(e){var t=[];for(var n in this.binders){var r=this.binders[n];if(r instanceof Ji){var i=2===e.fromScale?r.zoomInPaintVertexBuffer:r.zoomOutPaintVertexBuffer;i&&t.push(i)}else(r instanceof Ki||r instanceof Yi)&&r.paintVertexBuffer&&t.push(r.paintVertexBuffer)}this._buffers=t},$i.prototype.upload=function(e){for(var t in this.binders)this.binders[t].upload(e);var n=[];for(var r in this.binders){var i=this.binders[r];(i instanceof Ki||i instanceof Yi)&&i.paintVertexBuffer&&n.push(i.paintVertexBuffer)}this._buffers=n},$i.prototype.destroy=function(){for(var e in this.binders)this.binders[e].destroy()};var Eo=function(e,t,n,r){void 0===r&&(r=function(){return!0}),this.programConfigurations={};for(var i=0,o=t;i<o.length;i+=1){var a=o[i];this.programConfigurations[a.id]=$i.createDynamic(a,n,r),this.programConfigurations[a.id].layoutAttributes=e}this.needsUpload=!1};function Zi(e,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from"],"fill-pattern":["pattern_to","pattern_from"],"fill-extrusion-pattern":["pattern_to","pattern_from"]}[e]||[e.replace(t+"-","").replace(/-/g,"_")]}function Hi(e,t,n){var r={color:{source:di,composite:gi},number:{source:li,composite:di}},i=function(e){return{"line-pattern":{source:$r,composite:$r},"fill-pattern":{source:$r,composite:$r},"fill-extrusion-pattern":{source:$r,composite:$r}}[e]}(e);return i&&i[n]||r[t][n]}Eo.prototype.populatePaintArrays=function(e,t,n,r){for(var i in this.programConfigurations)this.programConfigurations[i].populatePaintArrays(e,t,n,r);this.needsUpload=!0},Eo.prototype.updatePaintArrays=function(e,t,n,r){for(var i=0,o=n;i<o.length;i+=1){var a=o[i];this.needsUpload=this.programConfigurations[a.id].updatePaintArrays(e,t,a,r)||this.needsUpload}},Eo.prototype.get=function(e){return this.programConfigurations[e]},Eo.prototype.upload=function(e){if(this.needsUpload){for(var t in this.programConfigurations)this.programConfigurations[t].upload(e);this.needsUpload=!1}},Eo.prototype.destroy=function(){for(var e in this.programConfigurations)this.programConfigurations[e].destroy()},sn("ConstantBinder",qi),sn("CrossFadedConstantBinder",Xi),sn("SourceExpressionBinder",Ki),sn("CrossFadedCompositeBinder",Ji),sn("CompositeExpressionBinder",Yi),sn("ProgramConfiguration",$i,{omit:["_buffers"]}),sn("ProgramConfigurationSet",Eo);var Po=8192,Co={min:-1*Math.pow(2,15),max:Math.pow(2,15)-1};function Wi(e){for(var t=Po/e.extent,n=e.loadGeometry(),r=0;r<n.length;r++)for(var i=n[r],o=0;o<i.length;o++){var a=i[o];a.x=Math.round(a.x*t),a.y=Math.round(a.y*t),(a.x<Co.min||a.x>Co.max||a.y<Co.min||a.y>Co.max)&&w("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return n}function Qi(e,t,n,r,i){e.emplaceBack(2*t+(r+1)/2,2*n+(i+1)/2)}var Mo=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(e){return e.id}),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Wr,this.indexArray=new pi,this.segments=new Ri,this.programConfigurations=new Eo(Oi,e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter(function(e){return e.isStateDependent()}).map(function(e){return e.id})};function ea(e,t){for(var n=0;n<e.length;n++)if(pa(t,e[n]))return!0;for(var r=0;r<t.length;r++)if(pa(e,t[r]))return!0;return!!aa(e,t)}function ra(e,t,n){return!!pa(e,t)||!!sa(t,e,n)}function na(e,t){if(1===e.length)return la(t,e[0]);for(var n=0;n<t.length;n++)for(var r=t[n],i=0;i<r.length;i++)if(pa(e,r[i]))return!0;for(var o=0;o<e.length;o++)if(la(t,e[o]))return!0;for(var a=0;a<t.length;a++)if(aa(e,t[a]))return!0;return!1}function ia(e,t,n){if(e.length>1){if(aa(e,t))return!0;for(var r=0;r<t.length;r++)if(sa(t[r],e,n))return!0}for(var i=0;i<e.length;i++)if(sa(e[i],t,n))return!0;return!1}function aa(e,t){if(0===e.length||0===t.length)return!1;for(var n=0;n<e.length-1;n++)for(var r=e[n],i=e[n+1],o=0;o<t.length-1;o++)if(oa(r,i,t[o],t[o+1]))return!0;return!1}function oa(e,t,n,r){return A(e,n,r)!==A(t,n,r)&&A(e,t,n)!==A(e,t,r)}function sa(e,t,n){var r=n*n;if(1===t.length)return e.distSqr(t[0])<r;for(var i=1;i<t.length;i++)if(ua(e,t[i-1],t[i])<r)return!0;return!1}function ua(e,t,n){var r=t.distSqr(n);if(0===r)return e.distSqr(t);var i=((e.x-t.x)*(n.x-t.x)+(e.y-t.y)*(n.y-t.y))/r;return i<0?e.distSqr(t):i>1?e.distSqr(n):e.distSqr(n.sub(t)._mult(i)._add(t))}function la(e,t){for(var n,r,i,o=!1,a=0;a<e.length;a++)for(var s=0,l=(n=e[a]).length-1;s<n.length;l=s++)r=n[s],i=n[l],r.y>t.y!=i.y>t.y&&t.x<(i.x-r.x)*(t.y-r.y)/(i.y-r.y)+r.x&&(o=!o);return o}function pa(e,t){for(var n=!1,r=0,i=e.length-1;r<e.length;i=r++){var o=e[r],a=e[i];o.y>t.y!=a.y>t.y&&t.x<(a.x-o.x)*(t.y-o.y)/(a.y-o.y)+o.x&&(n=!n)}return n}function ca(e,t,n){var r=n[0],i=n[2];if(e.x<r.x&&t.x<r.x||e.x>i.x&&t.x>i.x||e.y<r.y&&t.y<r.y||e.y>i.y&&t.y>i.y)return!1;var o=A(e,t,n[0]);return o!==A(e,t,n[1])||o!==A(e,t,n[2])||o!==A(e,t,n[3])}function ha(e,t,n){var r=t.paint.get(e).value;return"constant"===r.kind?r.value:n.programConfigurations.get(t.id).binders[e].maxValue}function fa(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function ya(e,t,n,r,i){if(!t[0]&&!t[1])return e;var o=E.convert(t)._mult(i);"viewport"===n&&o._rotate(-r);for(var a=[],s=0;s<e.length;s++){var l=e[s];a.push(l.sub(o))}return a}Mo.prototype.populate=function(e,t){for(var n=0,r=e;n<r.length;n+=1){var i=r[n],o=i.feature,a=i.index,s=i.sourceLayerIndex;if(this.layers[0]._featureFilter(new Bn(this.zoom),o)){var l=Wi(o);this.addFeature(o,l,a),t.featureIndex.insert(o,l,a,s,this.index)}}},Mo.prototype.update=function(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)},Mo.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Mo.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Mo.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Oi),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},Mo.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Mo.prototype.addFeature=function(e,t,n){for(var r=0,i=t;r<i.length;r+=1)for(var o=0,a=i[r];o<a.length;o+=1){var s=a[o],l=s.x,u=s.y;if(!(l<0||l>=Po||u<0||u>=Po)){var c=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),p=c.vertexLength;Qi(this.layoutVertexArray,l,u,-1,-1),Qi(this.layoutVertexArray,l,u,1,-1),Qi(this.layoutVertexArray,l,u,1,1),Qi(this.layoutVertexArray,l,u,-1,1),this.indexArray.emplaceBack(p,p+1,p+2),this.indexArray.emplaceBack(p,p+3,p+2),c.vertexLength+=4,c.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,{})},sn("CircleBucket",Mo,{omit:["layers"]});var Do={paint:new fr({"circle-radius":new Yn(Ce.paint_circle["circle-radius"]),"circle-color":new Yn(Ce.paint_circle["circle-color"]),"circle-blur":new Yn(Ce.paint_circle["circle-blur"]),"circle-opacity":new Yn(Ce.paint_circle["circle-opacity"]),"circle-translate":new Zn(Ce.paint_circle["circle-translate"]),"circle-translate-anchor":new Zn(Ce.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Zn(Ce.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Zn(Ce.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Yn(Ce.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Yn(Ce.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Yn(Ce.paint_circle["circle-stroke-opacity"])})},Fo="undefined"!=typeof Float32Array?Float32Array:Array;function ga(){var e=new Fo(9);return Fo!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function xa(){var e=new Fo(3);return Fo!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function ba(e,t,n){var r=new Fo(3);return r[0]=e,r[1]=t,r[2]=n,r}function Sa(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,e[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,e[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,e[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,e}function ka(){var e=new Fo(4);return Fo!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}Math.PI,xa(),function(){var e;e=new Fo(4),Fo!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0)}(),xa(),ba(1,0,0),ba(0,1,0),ka(),ka(),ga(),function(){var e;e=new Fo(2),Fo!=Float32Array&&(e[0]=0,e[1]=0)}();var No=function(t){function e(e){t.call(this,e,Do)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createBucket=function(e){return new Mo(e)},e.prototype.queryRadius=function(e){var t=e;return ha("circle-radius",this,t)+ha("circle-stroke-width",this,t)+fa(this.paint.get("circle-translate"))},e.prototype.queryIntersectsFeature=function(e,t,n,r,i,o,a,s){for(var l=ya(e,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),o.angle,a),u=this.paint.get("circle-radius").evaluate(t,n)+this.paint.get("circle-stroke-width").evaluate(t,n),c="map"===this.paint.get("circle-pitch-alignment"),p=c?l:function(e,t){return l.map(function(e){return Fa(e,t)})}(0,s),h=c?u*a:u,f=0,d=r;f<d.length;f+=1)for(var g=0,m=d[f];g<m.length;g+=1){var y=m[g],v=c?y:Fa(y,s),_=h,b=Sa([],[y.x,y.y,0,1],s);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?_*=b[3]/o.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(_*=o.cameraToCenterDistance/b[3]),ra(p,v,_))return!0}return!1},e}(mr);function Fa(e,t){var n=Sa([],[e.x,e.y,0,1],t);return new E(n[0]/n[3],n[1]/n[3])}var Bo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Mo);function Oa(e,t,n,r){var i=t.width,o=t.height;if(r){if(r.length!==i*o*n)throw new RangeError("mismatched image size")}else r=new Uint8Array(i*o*n);return e.width=i,e.height=o,e.data=r,e}function Da(e,t,n){var r=t.width,i=t.height;if(r!==e.width||i!==e.height){var o=Oa({},{width:r,height:i},n);Ua(e,o,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,r),height:Math.min(e.height,i)},n),e.width=r,e.height=i,e.data=o.data}}function Ua(e,t,n,r,i,o){if(0===i.width||0===i.height)return t;if(i.width>e.width||i.height>e.height||n.x>e.width-i.width||n.y>e.height-i.height)throw new RangeError("out of range source coordinates for image copy");if(i.width>t.width||i.height>t.height||r.x>t.width-i.width||r.y>t.height-i.height)throw new RangeError("out of range destination coordinates for image copy");for(var a=e.data,s=t.data,l=0;l<i.height;l++)for(var u=((n.y+l)*e.width+n.x)*o,c=((r.y+l)*t.width+r.x)*o,p=0;p<i.width*o;p++)s[c+p]=a[u+p];return t}sn("HeatmapBucket",Bo,{omit:["layers"]});var Uo=function(e,t){Oa(this,e,1,t)};Uo.prototype.resize=function(e){Da(this,e,1)},Uo.prototype.clone=function(){return new Uo({width:this.width,height:this.height},new Uint8Array(this.data))},Uo.copy=function(e,t,n,r,i){Ua(e,t,n,r,i,1)};var Vo=function(e,t){Oa(this,e,4,t)};Vo.prototype.resize=function(e){Da(this,e,4)},Vo.prototype.clone=function(){return new Vo({width:this.width,height:this.height},new Uint8Array(this.data))},Vo.copy=function(e,t,n,r,i){Ua(e,t,n,r,i,4)},sn("AlphaImage",Uo),sn("RGBAImage",Vo);var Wo={paint:new fr({"heatmap-radius":new Yn(Ce.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Yn(Ce.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Zn(Ce.paint_heatmap["heatmap-intensity"]),"heatmap-color":new $n(Ce.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Zn(Ce.paint_heatmap["heatmap-opacity"])})};function Na(e,t){for(var n=new Uint8Array(1024),r={},i=0,o=0;i<256;i++,o+=4){r[t]=i/255;var a=e.evaluate(r);n[o+0]=Math.floor(255*a.r/a.a),n[o+1]=Math.floor(255*a.g/a.a),n[o+2]=Math.floor(255*a.b/a.a),n[o+3]=Math.floor(255*a.a)}return new Vo({width:256,height:1},n)}var qo=function(t){function e(e){t.call(this,e,Wo),this._updateColorRamp()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createBucket=function(e){return new Bo(e)},e.prototype._handleSpecialPaintPropertyUpdate=function(e){"heatmap-color"===e&&this._updateColorRamp()},e.prototype._updateColorRamp=function(){var e=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=Na(e,"heatmapDensity"),this.colorRampTexture=null},e.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},e}(mr),Ho={paint:new fr({"hillshade-illumination-direction":new Zn(Ce.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Zn(Ce.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Zn(Ce.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Zn(Ce.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Zn(Ce.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Zn(Ce.paint_hillshade["hillshade-accent-color"])})},Ko=function(t){function e(e){t.call(this,e,Ho)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},e}(mr),Qo=Nn([{name:"a_pos",components:2,type:"Int16"}],4),ta=Qo.members,da=(Qo.size,Qo.alignment,$a),ma=$a;function $a(e,t,n){n=n||2;var r,i,o,a,s,l,u,c=t&&t.length,p=c?t[0]*n:e.length,h=Wa(e,0,p,n,!0),f=[];if(!h||h.next===h.prev)return f;if(c&&(h=function(e,t,n,r){var i,o,a,s=[];for(i=0,o=t.length;i<o;i++)(a=Wa(e,t[i]*r,i<o-1?t[i+1]*r:e.length,r,!1))===a.next&&(a.steiner=!0),s.push(uo(a));for(s.sort(ao),i=0;i<s.length;i++)oo(s[i],n),n=Qa(n,n.next);return n}(e,t,h,n)),e.length>80*n){r=o=e[0],i=a=e[1];for(var d=n;d<p;d+=n)(s=e[d])<r&&(r=s),(l=e[d+1])<i&&(i=l),s>o&&(o=s),l>a&&(a=l);u=0!==(u=Math.max(o-r,a-i))?1/u:0}return to(h,f,n,r,i,u),f}function Wa(e,t,n,r,i){var o,a;if(i===bo(e,t,n,r)>0)for(o=t;o<n;o+=r)a=vo(o,e[o],e[o+1],a);else for(o=n-r;o>=t;o-=r)a=vo(o,e[o],e[o+1],a);return a&&ho(a,a.next)&&(go(a),a=a.next),a}function Qa(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!ho(r,r.next)&&0!==co(r.prev,r,r.next))r=r.next;else{if(go(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function to(e,t,n,r,i,o,a){if(e){!a&&o&&function(e,t,n,r){var i=e;do{null===i.z&&(i.z=so(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,r,i,o,a,s,l,u=1;do{for(n=e,e=null,o=null,a=0;n;){for(a++,r=n,s=0,t=0;t<u&&(s++,r=r.nextZ);t++);for(l=u;s>0||l>0&&r;)0!==s&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,l--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=r}o.nextZ=null,u*=2}while(a>1)}(i)}(e,r,i,o);for(var s,l,u=e;e.prev!==e.next;)if(s=e.prev,l=e.next,o?ro(e,r,i,o):eo(e))t.push(s.i/n),t.push(e.i/n),t.push(l.i/n),go(e),e=l.next,u=l.next;else if((e=l)===u){a?1===a?to(e=no(e,t,n),t,n,r,i,o,2):2===a&&io(e,t,n,r,i,o):to(Qa(e),t,n,r,i,o,1);break}}}function eo(e){var t=e.prev,n=e,r=e.next;if(co(t,n,r)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(lo(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&co(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function ro(e,t,n,r){var i=e.prev,o=e,a=e.next;if(co(i,o,a)>=0)return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,l=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,u=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,c=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,p=so(s,l,t,n,r),h=so(u,c,t,n,r),f=e.prevZ,d=e.nextZ;f&&f.z>=p&&d&&d.z<=h;){if(f!==e.prev&&f!==e.next&&lo(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&co(f.prev,f,f.next)>=0)return!1;if(f=f.prevZ,d!==e.prev&&d!==e.next&&lo(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&co(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;f&&f.z>=p;){if(f!==e.prev&&f!==e.next&&lo(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&co(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;d&&d.z<=h;){if(d!==e.prev&&d!==e.next&&lo(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&co(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function no(e,t,n){var r=e;do{var i=r.prev,o=r.next.next;!ho(i,o)&&fo(i,r,r.next,o)&&yo(i,o)&&yo(o,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(o.i/n),go(r),go(r.next),r=e=o),r=r.next}while(r!==e);return r}function io(e,t,n,r,i,o){var a=e;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&po(a,s)){var l=mo(a,s);return a=Qa(a,a.next),l=Qa(l,l.next),to(a,t,n,r,i,o),void to(l,t,n,r,i,o)}s=s.next}a=a.next}while(a!==e)}function ao(e,t){return e.x-t.x}function oo(e,t){if(t=function(e,t){var n,r=t,i=e.x,o=e.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!n)return null;if(i===a)return n.prev;var l,u=n,c=n.x,p=n.y,h=1/0;for(r=n.next;r!==u;)i>=r.x&&r.x>=c&&i!==r.x&&lo(o<p?i:a,o,c,p,o<p?a:i,o,r.x,r.y)&&((l=Math.abs(o-r.y)/(i-r.x))<h||l===h&&r.x>n.x)&&yo(r,e)&&(n=r,h=l),r=r.next;return n}(e,t)){var n=mo(t,e);Qa(n,n.next)}}function so(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function uo(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function lo(e,t,n,r,i,o,a,s){return(i-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(r-s)-(n-a)*(t-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function po(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&fo(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&yo(e,t)&&yo(t,e)&&function(e,t){var n=e,r=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)}function co(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function ho(e,t){return e.x===t.x&&e.y===t.y}function fo(e,t,n,r){return!!(ho(e,t)&&ho(n,r)||ho(e,r)&&ho(n,t))||co(e,t,n)>0!=co(e,t,r)>0&&co(n,r,e)>0!=co(n,r,t)>0}function yo(e,t){return co(e.prev,e,e.next)<0?co(e,t,e.next)>=0&&co(e,e.prev,t)>=0:co(e,t,e.prev)<0||co(e,e.next,t)<0}function mo(e,t){var n=new xo(e.i,e.x,e.y),r=new xo(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function vo(e,t,n,r){var i=new xo(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function go(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function xo(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function bo(e,t,n,r){for(var i=0,o=t,a=n-r;o<n;o+=r)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}function _o(e,t,n,r,i){!function t(e,n,r,i,o){for(;i>r;){if(i-r>600){var a=i-r+1,s=n-r+1,l=Math.log(a),u=.5*Math.exp(2*l/3),c=.5*Math.sqrt(l*u*(a-u)/a)*(s-a/2<0?-1:1);t(e,n,Math.max(r,Math.floor(n-s*u/a+c)),Math.min(i,Math.floor(n+(a-s)*u/a+c)),o)}var p=e[n],h=r,f=i;for(wo(e,r,n),o(e[i],p)>0&&wo(e,r,i);h<f;){for(wo(e,h,f),h++,f--;o(e[h],p)<0;)h++;for(;o(e[f],p)>0;)f--}0===o(e[r],p)?wo(e,r,f):wo(e,++f,i),f<=n&&(r=f+1),n<=f&&(i=f-1)}}(e,t,n||0,r||e.length-1,i||Ao)}function wo(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function Ao(e,t){return e<t?-1:e>t?1:0}function So(e,t){var n=e.length;if(n<=1)return[e];for(var r,i,o=[],a=0;a<n;a++){var s=S(e[a]);0!==s&&(e[a].area=Math.abs(s),void 0===i&&(i=s<0),i===s<0?(r&&o.push(r),r=[e[a]]):r.push(e[a]))}if(r&&o.push(r),t>1)for(var l=0;l<o.length;l++)o[l].length<=t||(_o(o[l],t,1,o[l].length-1,ko),o[l]=o[l].slice(0,t));return o}function ko(e,t){return t.area-e.area}function zo(e,t,n){for(var r=n.patternDependencies,i=!1,o=0,a=t;o<a.length;o+=1){var s=a[o].paint.get(e+"-pattern");s.isConstant()||(i=!0);var l=s.constantOr(null);l&&(i=!0,r[l.to]=!0,r[l.from]=!0)}return i}function Io(e,t,n,r,i){for(var o=i.patternDependencies,a=0,s=t;a<s.length;a+=1){var l=s[a],u=l.paint.get(e+"-pattern").value;if("constant"!==u.kind){var c=u.evaluate({zoom:r-1},n,{}),p=u.evaluate({zoom:r},n,{}),h=u.evaluate({zoom:r+1},n,{});o[c]=!0,o[p]=!0,o[h]=!0,n.patterns[l.id]={min:c,mid:p,max:h}}}return n}$a.deviation=function(e,t,n,r){var i=t&&t.length,o=i?t[0]*n:e.length,a=Math.abs(bo(e,0,o,n));if(i)for(var s=0,l=t.length;s<l;s++){var u=t[s]*n,c=s<l-1?t[s+1]*n:e.length;a-=Math.abs(bo(e,u,c,n))}var p=0;for(s=0;s<r.length;s+=3){var h=r[s]*n,f=r[s+1]*n,d=r[s+2]*n;p+=Math.abs((e[h]-e[d])*(e[f+1]-e[h+1])-(e[h]-e[f])*(e[d+1]-e[h+1]))}return 0===a&&0===p?0:Math.abs((p-a)/a)},$a.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var a=0;a<t;a++)n.vertices.push(e[i][o][a]);i>0&&(r+=e[i-1].length,n.holes.push(r))}return n},da.default=ma;var va=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(e){return e.id}),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Wr,this.indexArray=new pi,this.indexArray2=new hi,this.programConfigurations=new Eo(ta,e.layers,e.zoom),this.segments=new Ri,this.segments2=new Ri,this.stateDependentLayerIds=this.layers.filter(function(e){return e.isStateDependent()}).map(function(e){return e.id})};va.prototype.populate=function(e,t){this.features=[],this.hasPattern=zo("fill",this.layers,t);for(var n=0,r=e;n<r.length;n+=1){var i=r[n],o=i.feature,a=i.index,s=i.sourceLayerIndex;if(this.layers[0]._featureFilter(new Bn(this.zoom),o)){var l=Wi(o),u={sourceLayerIndex:s,index:a,geometry:l,properties:o.properties,type:o.type,patterns:{}};void 0!==o.id&&(u.id=o.id),this.hasPattern?this.features.push(Io("fill",this.layers,u,this.zoom,t)):this.addFeature(u,l,a,{}),t.featureIndex.insert(o,l,a,s,this.index)}}},va.prototype.update=function(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)},va.prototype.addFeatures=function(e,t){for(var n=0,r=this.features;n<r.length;n+=1){var i=r[n],o=i.geometry;this.addFeature(i,o,i.index,t)}},va.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},va.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},va.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,ta),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0},va.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},va.prototype.addFeature=function(e,t,n,r){for(var i=0,o=So(t,500);i<o.length;i+=1){for(var a=o[i],s=0,l=0,u=a;l<u.length;l+=1)s+=u[l].length;for(var c=this.segments.prepareSegment(s,this.layoutVertexArray,this.indexArray),p=c.vertexLength,h=[],f=[],d=0,g=a;d<g.length;d+=1){var m=g[d];if(0!==m.length){m!==a[0]&&f.push(h.length/2);var y=this.segments2.prepareSegment(m.length,this.layoutVertexArray,this.indexArray2),v=y.vertexLength;this.layoutVertexArray.emplaceBack(m[0].x,m[0].y),this.indexArray2.emplaceBack(v+m.length-1,v),h.push(m[0].x),h.push(m[0].y);for(var _=1;_<m.length;_++)this.layoutVertexArray.emplaceBack(m[_].x,m[_].y),this.indexArray2.emplaceBack(v+_-1,v+_),h.push(m[_].x),h.push(m[_].y);y.vertexLength+=m.length,y.primitiveLength+=m.length}}for(var b=da(h,f),x=0;x<b.length;x+=3)this.indexArray.emplaceBack(p+b[x],p+b[x+1],p+b[x+2]);c.vertexLength+=s,c.primitiveLength+=b.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,r)},sn("FillBucket",va,{omit:["layers","features"]});var _a={paint:new fr({"fill-antialias":new Zn(Ce.paint_fill["fill-antialias"]),"fill-opacity":new Yn(Ce.paint_fill["fill-opacity"]),"fill-color":new Yn(Ce.paint_fill["fill-color"]),"fill-outline-color":new Yn(Ce.paint_fill["fill-outline-color"]),"fill-translate":new Zn(Ce.paint_fill["fill-translate"]),"fill-translate-anchor":new Zn(Ce.paint_fill["fill-translate-anchor"]),"fill-pattern":new Jn(Ce.paint_fill["fill-pattern"])})},wa=function(t){function e(e){t.call(this,e,_a)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.recalculate=function(e){t.prototype.recalculate.call(this,e);var n=this.paint._values["fill-outline-color"];"constant"===n.value.kind&&void 0===n.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},e.prototype.createBucket=function(e){return new va(e)},e.prototype.queryRadius=function(){return fa(this.paint.get("fill-translate"))},e.prototype.queryIntersectsFeature=function(e,t,n,r,i,o,a){return na(ya(e,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),o.angle,a),r)},e}(mr),Ea=Nn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Pa=Ea.members,Ca=(Ea.size,Ea.alignment,Math.pow(2,13));function To(e,t,n,r,i,o,a,s){e.emplaceBack(t,n,2*Math.floor(r*Ca)+a,i*Ca*2,o*Ca*2,Math.round(s))}var Ta=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(e){return e.id}),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Jr,this.indexArray=new pi,this.programConfigurations=new Eo(Pa,e.layers,e.zoom),this.segments=new Ri,this.stateDependentLayerIds=this.layers.filter(function(e){return e.isStateDependent()}).map(function(e){return e.id})};function Lo(e,t){return e.x===t.x&&(e.x<0||e.x>Po)||e.y===t.y&&(e.y<0||e.y>Po)}function Oo(e){return e.every(function(e){return e.x<0})||e.every(function(e){return e.x>Po})||e.every(function(e){return e.y<0})||e.every(function(e){return e.y>Po})}Ta.prototype.populate=function(e,t){this.features=[],this.hasPattern=zo("fill-extrusion",this.layers,t);for(var n=0,r=e;n<r.length;n+=1){var i=r[n],o=i.feature,a=i.index,s=i.sourceLayerIndex;if(this.layers[0]._featureFilter(new Bn(this.zoom),o)){var l=Wi(o),u={sourceLayerIndex:s,index:a,geometry:l,properties:o.properties,type:o.type,patterns:{}};void 0!==o.id&&(u.id=o.id),this.hasPattern?this.features.push(Io("fill-extrusion",this.layers,u,this.zoom,t)):this.addFeature(u,l,a,{}),t.featureIndex.insert(o,l,a,s,this.index,!0)}}},Ta.prototype.addFeatures=function(e,t){for(var n=0,r=this.features;n<r.length;n+=1){var i=r[n],o=i.geometry;this.addFeature(i,o,i.index,t)}},Ta.prototype.update=function(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)},Ta.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Ta.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ta.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Pa),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},Ta.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Ta.prototype.addFeature=function(e,t,n,r){for(var i=0,o=So(t,500);i<o.length;i+=1){for(var a=o[i],s=0,l=0,u=a;l<u.length;l+=1)s+=u[l].length;for(var c=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),p=0,h=a;p<h.length;p+=1){var f=h[p];if(0!==f.length&&!Oo(f))for(var d=0,g=0;g<f.length;g++){var m=f[g];if(g>=1){var y=f[g-1];if(!Lo(m,y)){c.vertexLength+4>Ri.MAX_VERTEX_ARRAY_LENGTH&&(c=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var v=m.sub(y)._perp()._unit(),_=y.dist(m);d+_>32768&&(d=0),To(this.layoutVertexArray,m.x,m.y,v.x,v.y,0,0,d),To(this.layoutVertexArray,m.x,m.y,v.x,v.y,0,1,d),d+=_,To(this.layoutVertexArray,y.x,y.y,v.x,v.y,0,0,d),To(this.layoutVertexArray,y.x,y.y,v.x,v.y,0,1,d);var b=c.vertexLength;this.indexArray.emplaceBack(b,b+2,b+1),this.indexArray.emplaceBack(b+1,b+2,b+3),c.vertexLength+=4,c.primitiveLength+=2}}}}c.vertexLength+s>Ri.MAX_VERTEX_ARRAY_LENGTH&&(c=this.segments.prepareSegment(s,this.layoutVertexArray,this.indexArray));for(var x=[],w=[],S=c.vertexLength,E=0,P=a;E<P.length;E+=1){var C=P[E];if(0!==C.length){C!==a[0]&&w.push(x.length/2);for(var k=0;k<C.length;k++){var T=C[k];To(this.layoutVertexArray,T.x,T.y,0,0,1,1,0),x.push(T.x),x.push(T.y)}}}for(var A=da(x,w),O=0;O<A.length;O+=3)this.indexArray.emplaceBack(S+A[O],S+A[O+2],S+A[O+1]);c.primitiveLength+=A.length/3,c.vertexLength+=s}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,r)},sn("FillExtrusionBucket",Ta,{omit:["layers","features"]});var Aa={paint:new fr({"fill-extrusion-opacity":new Zn(Ce["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Yn(Ce["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Zn(Ce["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Zn(Ce["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Jn(Ce["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Yn(Ce["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Yn(Ce["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Zn(Ce["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},Ia=function(t){function e(e){t.call(this,e,Aa)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createBucket=function(e){return new Ta(e)},e.prototype.queryRadius=function(){return fa(this.paint.get("fill-extrusion-translate"))},e.prototype.queryIntersectsFeature=function(e,t,n,r,i,o,a,s){var l=ya(e,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),o.angle,a),u=this.paint.get("fill-extrusion-height").evaluate(t,n),c=this.paint.get("fill-extrusion-base").evaluate(t,n),p=function(e,t,n,r){for(var i=[],o=0,a=e;o<a.length;o+=1){var s=a[o],l=[s.x,s.y,0,1];Sa(l,l,t),i.push(new E(l[0]/l[3],l[1]/l[3]))}return i}(l,s),h=function(e,t,n,r){for(var i=[],o=[],a=r[8]*t,s=r[9]*t,l=r[10]*t,u=r[11]*t,c=r[8]*n,p=r[9]*n,h=r[10]*n,f=r[11]*n,d=0,g=e;d<g.length;d+=1){for(var m=[],y=[],v=0,_=g[d];v<_.length;v+=1){var b=_[v],x=b.x,w=b.y,S=r[0]*x+r[4]*w+r[12],P=r[1]*x+r[5]*w+r[13],C=r[2]*x+r[6]*w+r[14],k=r[3]*x+r[7]*w+r[15],T=C+l,A=k+u,O=S+c,I=P+p,R=C+h,L=k+f,M=new E((S+a)/A,(P+s)/A);M.z=T/A,m.push(M);var j=new E(O/L,I/L);j.z=R/L,y.push(j)}i.push(m),o.push(y)}return[i,o]}(r,c,u,s);return function(e,t,n){var r=1/0;na(n,t)&&(r=Ro(n,t[0]));for(var i=0;i<t.length;i++)for(var o=t[i],a=e[i],s=0;s<o.length-1;s++){var l=o[s],u=o[s+1],c=a[s],p=[l,u,a[s+1],c,l];ea(n,p)&&(r=Math.min(r,Ro(n,p)))}return r!==1/0&&r}(h[0],h[1],p)},e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("fill-extrusion-opacity")&&"none"!==this.visibility},e.prototype.resize=function(){this.viewportFrame&&(this.viewportFrame.destroy(),this.viewportFrame=null)},e}(mr);function jo(e,t){return e.x*t.x+e.y*t.y}function Ro(e,t){if(1===e.length){var n=t[0],r=t[1],i=t[3],o=e[0],a=r.sub(n),s=i.sub(n),l=o.sub(n),u=jo(a,a),c=jo(a,s),p=jo(s,s),h=jo(l,a),f=jo(l,s),d=u*p-c*c,g=(p*h-c*f)/d,m=(u*f-c*h)/d,y=1-g-m;return n.z*y+r.z*g+i.z*m}for(var v=1/0,_=0,b=t;_<b.length;_+=1){var x=b[_];v=Math.min(v,x.z)}return v}var Ra=Nn([{name:"a_pos_normal",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),La=Ra.members,Ma=(Ra.size,Ra.alignment,Go);function Go(e,t,n,r,i){this.properties={},this.extent=n,this.type=0,this._pbf=e,this._geometry=-1,this._keys=r,this._values=i,e.readFields(Xo,this,t)}function Xo(e,t,n){1==e?t.id=n.readVarint():2==e?function(e,t){for(var n=e.readVarint()+e.pos;e.pos<n;){var r=t._keys[e.readVarint()],i=t._values[e.readVarint()];t.properties[r]=i}}(n,t):3==e?t.type=n.readVarint():4==e&&(t._geometry=n.pos)}function Zo(e){for(var t,n,r=0,i=0,o=e.length,a=o-1;i<o;a=i++)t=e[i],r+=((n=e[a]).x-t.x)*(t.y+n.y);return r}Go.types=["Unknown","Point","LineString","Polygon"],Go.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,n=e.readVarint()+e.pos,r=1,i=0,o=0,a=0,s=[];e.pos<n;){if(i<=0){var l=e.readVarint();r=7&l,i=l>>3}if(i--,1===r||2===r)o+=e.readSVarint(),a+=e.readSVarint(),1===r&&(t&&s.push(t),t=[]),t.push(new E(o,a));else{if(7!==r)throw new Error("unknown command "+r);t&&t.push(t[0].clone())}}return t&&s.push(t),s},Go.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,n=1,r=0,i=0,o=0,a=1/0,s=-1/0,l=1/0,u=-1/0;e.pos<t;){if(r<=0){var c=e.readVarint();n=7&c,r=c>>3}if(r--,1===n||2===n)(i+=e.readSVarint())<a&&(a=i),i>s&&(s=i),(o+=e.readSVarint())<l&&(l=o),o>u&&(u=o);else if(7!==n)throw new Error("unknown command "+n)}return[a,l,s,u]},Go.prototype.toGeoJSON=function(e,t,n){var r,i,o=this.extent*Math.pow(2,n),a=this.extent*e,s=this.extent*t,l=this.loadGeometry(),u=Go.types[this.type];function p(e){for(var t=0;t<e.length;t++){var n=e[t],r=180-360*(n.y+s)/o;e[t]=[360*(n.x+a)/o-180,360/Math.PI*Math.atan(Math.exp(r*Math.PI/180))-90]}}switch(this.type){case 1:var c=[];for(r=0;r<l.length;r++)c[r]=l[r][0];p(l=c);break;case 2:for(r=0;r<l.length;r++)p(l[r]);break;case 3:for(l=function(e){var t=e.length;if(t<=1)return[e];for(var n,r,i=[],o=0;o<t;o++){var a=Zo(e[o]);0!==a&&(void 0===r&&(r=a<0),r===a<0?(n&&i.push(n),n=[e[o]]):n.push(e[o]))}return n&&i.push(n),i}(l),r=0;r<l.length;r++)for(i=0;i<l[r].length;i++)p(l[r][i])}1===l.length?l=l[0]:u="Multi"+u;var h={type:"Feature",geometry:{type:u,coordinates:l},properties:this.properties};return"id"in this&&(h.id=this.id),h};var ja=Yo;function Yo(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(Jo,this,t),this.length=this._features.length}function Jo(e,t,n){15===e?t.version=n.readVarint():1===e?t.name=n.readString():5===e?t.extent=n.readVarint():2===e?t._features.push(n.pos):3===e?t._keys.push(n.readString()):4===e&&t._values.push(function(e){for(var t=null,n=e.readVarint()+e.pos;e.pos<n;){var r=e.readVarint()>>3;t=1===r?e.readString():2===r?e.readFloat():3===r?e.readDouble():4===r?e.readVarint64():5===r?e.readVarint():6===r?e.readSVarint():7===r?e.readBoolean():null}return t}(n))}function $o(e,t,n){if(3===e){var r=new ja(n,n.readVarint()+n.pos);r.length&&(t[r.name]=r)}}Yo.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new Ma(this._pbf,t,this.extent,this._keys,this._values)};var Ba={VectorTile:function(e,t){this.layers=e.readFields($o,{},t)},VectorTileFeature:Ma,VectorTileLayer:ja},za=Ba.VectorTileFeature.types,Va=63,Ga=Math.cos(Math.PI/180*37.5),qa=.5,Ha=Math.pow(2,14)/qa;function is(e,t,n,r,i,o,a){e.emplaceBack(t.x,t.y,r?1:0,i?1:-1,Math.round(Va*n.x)+128,Math.round(Va*n.y)+128,1+(0===o?0:o<0?-1:1)|(a*qa&63)<<2,a*qa>>6)}var Xa=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(e){return e.id}),this.index=e.index,this.features=[],this.hasPattern=!1,this.layoutVertexArray=new Qr,this.indexArray=new pi,this.programConfigurations=new Eo(La,e.layers,e.zoom),this.segments=new Ri,this.stateDependentLayerIds=this.layers.filter(function(e){return e.isStateDependent()}).map(function(e){return e.id})};function os(e,t){return(e/t.tileTotal*(t.end-t.start)+t.start)*(Ha-1)}Xa.prototype.populate=function(e,t){this.features=[],this.hasPattern=zo("line",this.layers,t);for(var n=0,r=e;n<r.length;n+=1){var i=r[n],o=i.feature,a=i.index,s=i.sourceLayerIndex;if(this.layers[0]._featureFilter(new Bn(this.zoom),o)){var l=Wi(o),u={sourceLayerIndex:s,index:a,geometry:l,properties:o.properties,type:o.type,patterns:{}};void 0!==o.id&&(u.id=o.id),this.hasPattern?this.features.push(Io("line",this.layers,u,this.zoom,t)):this.addFeature(u,l,a,{}),t.featureIndex.insert(o,l,a,s,this.index)}}},Xa.prototype.update=function(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)},Xa.prototype.addFeatures=function(e,t){for(var n=0,r=this.features;n<r.length;n+=1){var i=r[n],o=i.geometry;this.addFeature(i,o,i.index,t)}},Xa.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Xa.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Xa.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,La),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},Xa.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Xa.prototype.addFeature=function(e,t,n,r){for(var i=this.layers[0].layout,o=i.get("line-join").evaluate(e,{}),a=i.get("line-cap"),s=i.get("line-miter-limit"),l=i.get("line-round-limit"),u=0,c=t;u<c.length;u+=1){var p=c[u];this.addLine(p,e,o,a,s,l,n,r)}},Xa.prototype.addLine=function(e,t,n,r,i,o,a,s){var l=null;t.properties&&t.properties.hasOwnProperty("mapbox_clip_start")&&t.properties.hasOwnProperty("mapbox_clip_end")&&(l={start:t.properties.mapbox_clip_start,end:t.properties.mapbox_clip_end,tileTotal:void 0});for(var u="Polygon"===za[t.type],c=e.length;c>=2&&e[c-1].equals(e[c-2]);)c--;for(var p=0;p<c-1&&e[p].equals(e[p+1]);)p++;if(!(c<(u?3:2))){l&&(l.tileTotal=function(e,t,n){for(var r,i,o=0,a=p;a<n-1;a++)r=e[a],i=e[a+1],o+=r.dist(i);return o}(e,0,c)),"bevel"===n&&(i=1.05);var h=Po/(512*this.overscaling)*15,f=e[p],d=this.segments.prepareSegment(10*c,this.layoutVertexArray,this.indexArray);this.distance=0;var g,m,y,v=r,_=u?"butt":r,b=!0,x=void 0,w=void 0,S=void 0,E=void 0;this.e1=this.e2=this.e3=-1,u&&(g=e[c-2],E=f.sub(g)._unit()._perp());for(var P=p;P<c;P++)if(!(w=u&&P===c-1?e[p+1]:e[P+1])||!e[P].equals(w)){E&&(S=E),g&&(x=g),g=e[P],E=w?w.sub(g)._unit()._perp():S;var C=(S=S||E).add(E);0===C.x&&0===C.y||C._unit();var k=C.x*E.x+C.y*E.y,T=0!==k?1/k:1/0,A=k<Ga&&x&&w;if(A&&P>p){var O=g.dist(x);if(O>2*h){var I=g.sub(g.sub(x)._mult(h/O)._round());this.distance+=I.dist(x),this.addCurrentVertex(I,this.distance,S.mult(1),0,0,!1,d,l),x=I}}var R=x&&w,L=R?n:w?v:_;if(R&&"round"===L&&(T<o?L="miter":T<=2&&(L="fakeround")),"miter"===L&&T>i&&(L="bevel"),"bevel"===L&&(T>2&&(L="flipbevel"),T<i&&(L="miter")),x&&(this.distance+=g.dist(x)),"miter"===L)C._mult(T),this.addCurrentVertex(g,this.distance,C,0,0,!1,d,l);else if("flipbevel"===L){if(T>100)C=E.clone().mult(-1);else{var M=S.x*E.y-S.y*E.x>0?-1:1,j=T*S.add(E).mag()/S.sub(E).mag();C._perp()._mult(j*M)}this.addCurrentVertex(g,this.distance,C,0,0,!1,d,l),this.addCurrentVertex(g,this.distance,C.mult(-1),0,0,!1,d,l)}else if("bevel"===L||"fakeround"===L){var D=S.x*E.y-S.y*E.x>0,F=-Math.sqrt(T*T-1);if(D?(y=0,m=F):(m=0,y=F),b||this.addCurrentVertex(g,this.distance,S,m,y,!1,d,l),"fakeround"===L){for(var N=Math.floor(8*(.5-(k-.5))),B=void 0,z=0;z<N;z++)B=E.mult((z+1)/(N+1))._add(S)._unit(),this.addPieSliceVertex(g,this.distance,B,D,d,l);this.addPieSliceVertex(g,this.distance,C,D,d,l);for(var U=N-1;U>=0;U--)B=S.mult((U+1)/(N+1))._add(E)._unit(),this.addPieSliceVertex(g,this.distance,B,D,d,l)}w&&this.addCurrentVertex(g,this.distance,E,-m,-y,!1,d,l)}else"butt"===L?(b||this.addCurrentVertex(g,this.distance,S,0,0,!1,d,l),w&&this.addCurrentVertex(g,this.distance,E,0,0,!1,d,l)):"square"===L?(b||(this.addCurrentVertex(g,this.distance,S,1,1,!1,d,l),this.e1=this.e2=-1),w&&this.addCurrentVertex(g,this.distance,E,-1,-1,!1,d,l)):"round"===L&&(b||(this.addCurrentVertex(g,this.distance,S,0,0,!1,d,l),this.addCurrentVertex(g,this.distance,S,1,1,!0,d,l),this.e1=this.e2=-1),w&&(this.addCurrentVertex(g,this.distance,E,-1,-1,!0,d,l),this.addCurrentVertex(g,this.distance,E,0,0,!1,d,l)));if(A&&P<c-1){var V=g.dist(w);if(V>2*h){var G=g.add(w.sub(g)._mult(h/V)._round());this.distance+=G.dist(g),this.addCurrentVertex(G,this.distance,E.mult(1),0,0,!1,d,l),g=G}}b=!1}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,a,s)}},Xa.prototype.addCurrentVertex=function(e,t,n,r,i,o,a,s){var l,u=this.layoutVertexArray,c=this.indexArray;s&&(t=os(t,s)),l=n.clone(),r&&l._sub(n.perp()._mult(r)),is(u,e,l,o,!1,r,t),this.e3=a.vertexLength++,this.e1>=0&&this.e2>=0&&(c.emplaceBack(this.e1,this.e2,this.e3),a.primitiveLength++),this.e1=this.e2,this.e2=this.e3,l=n.mult(-1),i&&l._sub(n.perp()._mult(i)),is(u,e,l,o,!0,-i,t),this.e3=a.vertexLength++,this.e1>=0&&this.e2>=0&&(c.emplaceBack(this.e1,this.e2,this.e3),a.primitiveLength++),this.e1=this.e2,this.e2=this.e3,t>Ha/2&&!s&&(this.distance=0,this.addCurrentVertex(e,this.distance,n,r,i,o,a))},Xa.prototype.addPieSliceVertex=function(e,t,n,r,i,o){n=n.mult(r?-1:1);var a=this.layoutVertexArray,s=this.indexArray;o&&(t=os(t,o)),is(a,e,n,!1,r,0,t),this.e3=i.vertexLength++,this.e1>=0&&this.e2>=0&&(s.emplaceBack(this.e1,this.e2,this.e3),i.primitiveLength++),r?this.e2=this.e3:this.e1=this.e3},sn("LineBucket",Xa,{omit:["layers","features"]});var Ka=new fr({"line-cap":new Zn(Ce.layout_line["line-cap"]),"line-join":new Yn(Ce.layout_line["line-join"]),"line-miter-limit":new Zn(Ce.layout_line["line-miter-limit"]),"line-round-limit":new Zn(Ce.layout_line["line-round-limit"])}),Za={paint:new fr({"line-opacity":new Yn(Ce.paint_line["line-opacity"]),"line-color":new Yn(Ce.paint_line["line-color"]),"line-translate":new Zn(Ce.paint_line["line-translate"]),"line-translate-anchor":new Zn(Ce.paint_line["line-translate-anchor"]),"line-width":new Yn(Ce.paint_line["line-width"]),"line-gap-width":new Yn(Ce.paint_line["line-gap-width"]),"line-offset":new Yn(Ce.paint_line["line-offset"]),"line-blur":new Yn(Ce.paint_line["line-blur"]),"line-dasharray":new Qn(Ce.paint_line["line-dasharray"]),"line-pattern":new Jn(Ce.paint_line["line-pattern"]),"line-gradient":new $n(Ce.paint_line["line-gradient"])}),layout:Ka},Ya=new(function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.possiblyEvaluate=function(e,n){return n=new Bn(Math.floor(n.zoom),{now:n.now,fadeDuration:n.fadeDuration,zoomHistory:n.zoomHistory,transition:n.transition}),t.prototype.possiblyEvaluate.call(this,e,n)},e.prototype.evaluate=function(e,n,r,i){return n=c({},n,{zoom:Math.floor(n.zoom)}),t.prototype.evaluate.call(this,e,n,r,i)},e}(Yn))(Za.paint.properties["line-width"].specification);Ya.useIntegerZoom=!0;var Ja=function(t){function e(e){t.call(this,e,Za)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._handleSpecialPaintPropertyUpdate=function(e){"line-gradient"===e&&this._updateGradient()},e.prototype._updateGradient=function(){var e=this._transitionablePaint._values["line-gradient"].value.expression;this.gradient=Na(e,"lineProgress"),this.gradientTexture=null},e.prototype.recalculate=function(e){t.prototype.recalculate.call(this,e),this.paint._values["line-floorwidth"]=Ya.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)},e.prototype.createBucket=function(e){return new Xa(e)},e.prototype.queryRadius=function(e){var t=e,n=cs(ha("line-width",this,t),ha("line-gap-width",this,t)),r=ha("line-offset",this,t);return n/2+Math.abs(r)+fa(this.paint.get("line-translate"))},e.prototype.queryIntersectsFeature=function(e,t,n,r,i,o,a){var s=ya(e,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),o.angle,a),l=a/2*cs(this.paint.get("line-width").evaluate(t,n),this.paint.get("line-gap-width").evaluate(t,n)),u=this.paint.get("line-offset").evaluate(t,n);return u&&(r=function(e,t){for(var n=[],r=new E(0,0),i=0;i<e.length;i++){for(var o=e[i],a=[],s=0;s<o.length;s++){var l=o[s-1],u=o[s],c=o[s+1],p=0===s?r:u.sub(l)._unit()._perp(),h=s===o.length-1?r:c.sub(u)._unit()._perp(),f=p._add(h)._unit(),d=f.x*h.x+f.y*h.y;f._mult(1/d),a.push(f._mult(t)._add(u))}n.push(a)}return n}(r,u*a)),function(e,t,n){for(var r=0;r<t.length;r++){var i=t[r];if(e.length>=3)for(var o=0;o<i.length;o++)if(pa(e,i[o]))return!0;if(ia(e,i,n))return!0}return!1}(s,r,l)},e}(mr);function cs(e,t){return t>0?t+2*e:e}var es=Nn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"}]),ts=Nn([{name:"a_projected_pos",components:3,type:"Float32"}],4),ns=(Nn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Nn([{name:"a_placed",components:2,type:"Uint8"}],4)),rs=(Nn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"},{type:"Int16",name:"radius"},{type:"Int16",name:"signedDistanceFromAnchor"}]),Nn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),as=Nn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4);function vs(e,t,n){return e.sections.forEach(function(e){e.text=function(e,t,n){var r=t.layout.get("text-transform").evaluate(n,{});return"uppercase"===r?e=e.toLocaleUpperCase():"lowercase"===r&&(e=e.toLocaleLowerCase()),Fn.applyArabicShaping&&(e=Fn.applyArabicShaping(e)),e}(e.text,t,n)}),e}Nn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"hidden"}]),Nn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"horizontalPlacedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint32",name:"crossTileID"}]),Nn([{type:"Float32",name:"offsetX"}]),Nn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var ss={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"},ls=function(t){function e(e,n,r,i){t.call(this,e,n),this.angle=r,void 0!==i&&(this.segment=i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.x,this.y,this.angle,this.segment)},e}(E);function _s(e,t){var n=t.expression;if("constant"===n.kind)return{functionType:"constant",layoutSize:n.evaluate(new Bn(e+1))};if("source"===n.kind)return{functionType:"source"};for(var r=n.zoomStops,i=0;i<r.length&&r[i]<=e;)i++;for(var o=i=Math.max(0,i-1);o<r.length&&r[o]<e+1;)o++;o=Math.min(r.length-1,o);var a={min:r[i],max:r[o]};return"composite"===n.kind?{functionType:"composite",zoomRange:a,propertyValue:t.value}:{functionType:"camera",layoutSize:n.evaluate(new Bn(e+1)),zoomRange:a,sizeRange:{min:n.evaluate(new Bn(a.min)),max:n.evaluate(new Bn(a.max))},propertyValue:t.value}}sn("Anchor",ls);var us=Ba.VectorTileFeature.types,ps=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Ss(e,t,n,r,i,o,a,s){e.emplaceBack(t,n,Math.round(32*r),Math.round(32*i),o,a,s?s[0]:0,s?s[1]:0)}function ks(e,t,n){e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n)}var hs=function(e){this.layoutVertexArray=new ei,this.indexArray=new pi,this.programConfigurations=e,this.segments=new Ri,this.dynamicLayoutVertexArray=new ti,this.opacityVertexArray=new ni,this.placedSymbolArray=new _i};hs.prototype.upload=function(e,t,n,r){n&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,es.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,t),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,ts.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,ps,!0),this.opacityVertexBuffer.itemSize=1),(n||r)&&this.programConfigurations.upload(e)},hs.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},sn("SymbolBuffers",hs);var fs=function(e,t,n){this.layoutVertexArray=new e,this.layoutAttributes=t,this.indexArray=new n,this.segments=new Ri,this.collisionVertexArray=new oi};fs.prototype.upload=function(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,ns.members,!0)},fs.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},sn("CollisionBuffers",fs);var ds=function(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(e){return e.id}),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1;var t=this.layers[0]._unevaluatedLayout._values;this.textSizeData=_s(this.zoom,t["text-size"]),this.iconSizeData=_s(this.zoom,t["icon-size"]);var n=this.layers[0].layout,r=n.get("symbol-sort-key"),i=n.get("symbol-z-order");this.sortFeaturesByKey="viewport-y"!==i&&void 0!==r.constantOr(1);var o="viewport-y"===i||"auto"===i&&!this.sortFeaturesByKey;this.sortFeaturesByY=o&&(n.get("text-allow-overlap")||n.get("icon-allow-overlap")||n.get("text-ignore-placement")||n.get("icon-ignore-placement")),this.stateDependentLayerIds=this.layers.filter(function(e){return e.isStateDependent()}).map(function(e){return e.id}),this.sourceID=e.sourceID};ds.prototype.createArrays=function(){this.text=new hs(new Eo(es.members,this.layers,this.zoom,function(e){return/^text/.test(e)})),this.icon=new hs(new Eo(es.members,this.layers,this.zoom,function(e){return/^icon/.test(e)})),this.collisionBox=new fs(ii,rs.members,hi),this.collisionCircle=new fs(ii,as.members,pi),this.glyphOffsetArray=new Si,this.lineVertexArray=new Ci,this.symbolInstances=new xi},ds.prototype.calculateGlyphDependencies=function(e,t,n,r){for(var i=0;i<e.length;i++)if(t[e.charCodeAt(i)]=!0,n&&r){var o=ss[e.charAt(i)];o&&(t[o.charCodeAt(0)]=!0)}},ds.prototype.populate=function(e,t){var n=this.layers[0],r=n.layout,i=r.get("text-font"),o=r.get("text-field"),a=r.get("icon-image"),s=("constant"!==o.value.kind||o.value.value.toString().length>0)&&("constant"!==i.value.kind||i.value.value.length>0),l="constant"!==a.value.kind||a.value.value&&a.value.value.length>0,u=r.get("symbol-sort-key");if(this.features=[],s||l){for(var c=t.iconDependencies,p=t.glyphDependencies,h=new Bn(this.zoom),f=0,d=e;f<d.length;f+=1){var g=d[f],m=g.feature,y=g.index,v=g.sourceLayerIndex;if(n._featureFilter(h,m)){var _=void 0;if(s){var b=n.getValueAndResolveTokens("text-field",m);_=vs(b instanceof rt?b:rt.fromString(b),n,m)}var x=void 0;if(l&&(x=n.getValueAndResolveTokens("icon-image",m)),_||x){var w=this.sortFeaturesByKey?u.evaluate(m,{}):void 0,S={text:_,icon:x,index:y,sourceLayerIndex:v,geometry:Wi(m),properties:m.properties,type:us[m.type],sortKey:w};if(void 0!==m.id&&(S.id=m.id),this.features.push(S),x&&(c[x]=!0),_)for(var E=i.evaluate(m,{}).join(","),P="map"===r.get("text-rotation-alignment")&&"point"!==r.get("symbol-placement"),C=0,k=_.sections;C<k.length;C+=1){var T=k[C],A=fn(_.toString()),O=T.fontStack||E,I=p[O]=p[O]||{};this.calculateGlyphDependencies(T.text,I,P,A)}}}}"line"===r.get("symbol-placement")&&(this.features=function(e){var t={},n={},r=[],i=0;function a(t){r.push(e[t]),i++}function o(e,t,i){var o=n[e];return delete n[e],n[t]=o,r[o].geometry[0].pop(),r[o].geometry[0]=r[o].geometry[0].concat(i[0]),o}function s(e,n,i){var o=t[n];return delete t[n],t[e]=o,r[o].geometry[0].shift(),r[o].geometry[0]=i[0].concat(r[o].geometry[0]),o}function u(e,t,n){var r=n?t[0][t[0].length-1]:t[0][0];return e+":"+r.x+":"+r.y}for(var l=0;l<e.length;l++){var c=e[l],p=c.geometry,h=c.text?c.text.toString():null;if(h){var f=u(h,p),d=u(h,p,!0);if(f in n&&d in t&&n[f]!==t[d]){var g=s(f,d,p),m=o(f,d,r[g].geometry);delete t[f],delete n[d],n[u(h,r[m].geometry,!0)]=m,r[g].geometry=null}else f in n?o(f,d,p):d in t?s(f,d,p):(a(l),t[f]=i-1,n[d]=i-1)}else a(l)}return r.filter(function(e){return e.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(e,t){return e.sortKey-t.sortKey})}},ds.prototype.update=function(e,t,n){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,t,this.layers,n),this.icon.programConfigurations.updatePaintArrays(e,t,this.layers,n))},ds.prototype.isEmpty=function(){return 0===this.symbolInstances.length},ds.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},ds.prototype.upload=function(e){this.uploaded||(this.collisionBox.upload(e),this.collisionCircle.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},ds.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.collisionBox.destroy(),this.collisionCircle.destroy()},ds.prototype.addToLineVertexArray=function(e,t){var n=this.lineVertexArray.length;if(void 0!==e.segment){for(var r=e.dist(t[e.segment+1]),i=e.dist(t[e.segment]),o={},a=e.segment+1;a<t.length;a++)o[a]={x:t[a].x,y:t[a].y,tileUnitDistanceFromAnchor:r},a<t.length-1&&(r+=t[a+1].dist(t[a]));for(var s=e.segment||0;s>=0;s--)o[s]={x:t[s].x,y:t[s].y,tileUnitDistanceFromAnchor:i},s>0&&(i+=t[s-1].dist(t[s]));for(var l=0;l<t.length;l++){var u=o[l];this.lineVertexArray.emplaceBack(u.x,u.y,u.tileUnitDistanceFromAnchor)}}return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}},ds.prototype.addSymbols=function(e,t,n,r,i,o,a,s,l,u){for(var c=e.indexArray,p=e.layoutVertexArray,h=e.dynamicLayoutVertexArray,f=e.segments.prepareSegment(4*t.length,e.layoutVertexArray,e.indexArray,o.sortKey),d=this.glyphOffsetArray.length,g=f.vertexLength,m=0,y=t;m<y.length;m+=1){var v=y[m],_=v.tl,b=v.tr,x=v.bl,w=v.br,S=v.tex,E=f.vertexLength,P=v.glyphOffset[1];Ss(p,s.x,s.y,_.x,P+_.y,S.x,S.y,n),Ss(p,s.x,s.y,b.x,P+b.y,S.x+S.w,S.y,n),Ss(p,s.x,s.y,x.x,P+x.y,S.x,S.y+S.h,n),Ss(p,s.x,s.y,w.x,P+w.y,S.x+S.w,S.y+S.h,n),ks(h,s,0),c.emplaceBack(E,E+1,E+2),c.emplaceBack(E+1,E+2,E+3),f.vertexLength+=4,f.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(v.glyphOffset[0])}e.placedSymbolArray.emplaceBack(s.x,s.y,d,this.glyphOffsetArray.length-d,g,l,u,s.segment,n?n[0]:0,n?n[1]:0,r[0],r[1],a,!1),e.programConfigurations.populatePaintArrays(e.layoutVertexArray.length,o,o.index,{})},ds.prototype._addCollisionDebugVertex=function(e,t,n,r,i,o){return t.emplaceBack(0,0),e.emplaceBack(n.x,n.y,r,i,Math.round(o.x),Math.round(o.y))},ds.prototype.addCollisionDebugVertices=function(e,t,n,r,i,o,a,s){var l=i.segments.prepareSegment(4,i.layoutVertexArray,i.indexArray),u=l.vertexLength,c=i.layoutVertexArray,p=i.collisionVertexArray,h=a.anchorX,f=a.anchorY;if(this._addCollisionDebugVertex(c,p,o,h,f,new E(e,t)),this._addCollisionDebugVertex(c,p,o,h,f,new E(n,t)),this._addCollisionDebugVertex(c,p,o,h,f,new E(n,r)),this._addCollisionDebugVertex(c,p,o,h,f,new E(e,r)),l.vertexLength+=4,s){var d=i.indexArray;d.emplaceBack(u,u+1,u+2),d.emplaceBack(u,u+2,u+3),l.primitiveLength+=2}else{var g=i.indexArray;g.emplaceBack(u,u+1),g.emplaceBack(u+1,u+2),g.emplaceBack(u+2,u+3),g.emplaceBack(u+3,u),l.primitiveLength+=4}},ds.prototype.addDebugCollisionBoxes=function(e,t,n){for(var r=e;r<t;r++){var i=this.collisionBoxArray.get(r),o=i.x1,a=i.y1,s=i.x2,l=i.y2,u=i.radius>0;this.addCollisionDebugVertices(o,a,s,l,u?this.collisionCircle:this.collisionBox,i.anchorPoint,n,u)}},ds.prototype.generateCollisionDebugBuffers=function(){for(var e=0;e<this.symbolInstances.length;e++){var t=this.symbolInstances.get(e);this.addDebugCollisionBoxes(t.textBoxStartIndex,t.textBoxEndIndex,t),this.addDebugCollisionBoxes(t.iconBoxStartIndex,t.iconBoxEndIndex,t)}},ds.prototype._deserializeCollisionBoxesForSymbol=function(e,t,n,r,i){for(var o={},a=t;a<n;a++){var s=e.get(a);if(0===s.radius){o.textBox={x1:s.x1,y1:s.y1,x2:s.x2,y2:s.y2,anchorPointX:s.anchorPointX,anchorPointY:s.anchorPointY},o.textFeatureIndex=s.featureIndex;break}o.textCircles||(o.textCircles=[],o.textFeatureIndex=s.featureIndex),o.textCircles.push(s.anchorPointX,s.anchorPointY,s.radius,s.signedDistanceFromAnchor,1)}for(var l=r;l<i;l++){var u=e.get(l);if(0===u.radius){o.iconBox={x1:u.x1,y1:u.y1,x2:u.x2,y2:u.y2,anchorPointX:u.anchorPointX,anchorPointY:u.anchorPointY},o.iconFeatureIndex=u.featureIndex;break}}return o},ds.prototype.deserializeCollisionBoxes=function(e){this.collisionArrays=[];for(var t=0;t<this.symbolInstances.length;t++){var n=this.symbolInstances.get(t);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,n.textBoxStartIndex,n.textBoxEndIndex,n.iconBoxStartIndex,n.iconBoxEndIndex))}},ds.prototype.hasTextData=function(){return this.text.segments.get().length>0},ds.prototype.hasIconData=function(){return this.icon.segments.get().length>0},ds.prototype.hasCollisionBoxData=function(){return this.collisionBox.segments.get().length>0},ds.prototype.hasCollisionCircleData=function(){return this.collisionCircle.segments.get().length>0},ds.prototype.addIndicesForPlacedTextSymbol=function(e){for(var t=this.text.placedSymbolArray.get(e),n=t.vertexStartIndex+4*t.numGlyphs,r=t.vertexStartIndex;r<n;r+=4)this.text.indexArray.emplaceBack(r,r+1,r+2),this.text.indexArray.emplaceBack(r+1,r+2,r+3)},ds.prototype.sortFeatures=function(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&(this.sortedAngle=e,!(this.text.segments.get().length>1||this.icon.segments.get().length>1))){for(var t=[],n=0;n<this.symbolInstances.length;n++)t.push(n);for(var r=Math.sin(e),i=Math.cos(e),o=[],a=[],s=0;s<this.symbolInstances.length;s++){var l=this.symbolInstances.get(s);o.push(0|Math.round(r*l.anchorX+i*l.anchorY)),a.push(l.featureIndex)}t.sort(function(e,t){return o[e]-o[t]||a[t]-a[e]}),this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var u=0,c=t;u<c.length;u+=1){var p=c[u],h=this.symbolInstances.get(p);this.featureSortOrder.push(h.featureIndex),h.horizontalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedTextSymbol(h.horizontalPlacedTextSymbolIndex),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedTextSymbol(h.verticalPlacedTextSymbolIndex);var f=this.icon.placedSymbolArray.get(p);if(f.numGlyphs){var d=f.vertexStartIndex;this.icon.indexArray.emplaceBack(d,d+1,d+2),this.icon.indexArray.emplaceBack(d+1,d+2,d+3)}}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},sn("SymbolBucket",ds,{omit:["layers","collisionBoxArray","features","compareText"]}),ds.MAX_GLYPHS=65535,ds.addDynamicAttributes=ks;var gs=new fr({"symbol-placement":new Zn(Ce.layout_symbol["symbol-placement"]),"symbol-spacing":new Zn(Ce.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Zn(Ce.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Yn(Ce.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Zn(Ce.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Zn(Ce.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Zn(Ce.layout_symbol["icon-ignore-placement"]),"icon-optional":new Zn(Ce.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Zn(Ce.layout_symbol["icon-rotation-alignment"]),"icon-size":new Yn(Ce.layout_symbol["icon-size"]),"icon-text-fit":new Zn(Ce.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Zn(Ce.layout_symbol["icon-text-fit-padding"]),"icon-image":new Yn(Ce.layout_symbol["icon-image"]),"icon-rotate":new Yn(Ce.layout_symbol["icon-rotate"]),"icon-padding":new Zn(Ce.layout_symbol["icon-padding"]),"icon-keep-upright":new Zn(Ce.layout_symbol["icon-keep-upright"]),"icon-offset":new Yn(Ce.layout_symbol["icon-offset"]),"icon-anchor":new Yn(Ce.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Zn(Ce.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Zn(Ce.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Zn(Ce.layout_symbol["text-rotation-alignment"]),"text-field":new Yn(Ce.layout_symbol["text-field"]),"text-font":new Yn(Ce.layout_symbol["text-font"]),"text-size":new Yn(Ce.layout_symbol["text-size"]),"text-max-width":new Yn(Ce.layout_symbol["text-max-width"]),"text-line-height":new Zn(Ce.layout_symbol["text-line-height"]),"text-letter-spacing":new Yn(Ce.layout_symbol["text-letter-spacing"]),"text-justify":new Yn(Ce.layout_symbol["text-justify"]),"text-anchor":new Yn(Ce.layout_symbol["text-anchor"]),"text-max-angle":new Zn(Ce.layout_symbol["text-max-angle"]),"text-rotate":new Yn(Ce.layout_symbol["text-rotate"]),"text-padding":new Zn(Ce.layout_symbol["text-padding"]),"text-keep-upright":new Zn(Ce.layout_symbol["text-keep-upright"]),"text-transform":new Yn(Ce.layout_symbol["text-transform"]),"text-offset":new Yn(Ce.layout_symbol["text-offset"]),"text-allow-overlap":new Zn(Ce.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Zn(Ce.layout_symbol["text-ignore-placement"]),"text-optional":new Zn(Ce.layout_symbol["text-optional"])}),ms={paint:new fr({"icon-opacity":new Yn(Ce.paint_symbol["icon-opacity"]),"icon-color":new Yn(Ce.paint_symbol["icon-color"]),"icon-halo-color":new Yn(Ce.paint_symbol["icon-halo-color"]),"icon-halo-width":new Yn(Ce.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Yn(Ce.paint_symbol["icon-halo-blur"]),"icon-translate":new Zn(Ce.paint_symbol["icon-translate"]),"icon-translate-anchor":new Zn(Ce.paint_symbol["icon-translate-anchor"]),"text-opacity":new Yn(Ce.paint_symbol["text-opacity"]),"text-color":new Yn(Ce.paint_symbol["text-color"]),"text-halo-color":new Yn(Ce.paint_symbol["text-halo-color"]),"text-halo-width":new Yn(Ce.paint_symbol["text-halo-width"]),"text-halo-blur":new Yn(Ce.paint_symbol["text-halo-blur"]),"text-translate":new Zn(Ce.paint_symbol["text-translate"]),"text-translate-anchor":new Zn(Ce.paint_symbol["text-translate-anchor"])}),layout:gs},ys=function(t){function e(e){t.call(this,e,ms)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.recalculate=function(e){t.prototype.recalculate.call(this,e),"auto"===this.layout.get("icon-rotation-alignment")&&("point"!==this.layout.get("symbol-placement")?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-rotation-alignment")&&("point"!==this.layout.get("symbol-placement")?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"))},e.prototype.getValueAndResolveTokens=function(e,t){var n,r=this.layout.get(e).evaluate(t,{}),i=this._unevaluatedLayout._values[e];return i.isDataDriven()||yr(i.value)?r:(n=t.properties,r.replace(/{([^{}]+)}/g,function(e,t){return t in n?String(n[t]):""}))},e.prototype.createBucket=function(e){return new ds(e)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e}(mr),bs={paint:new fr({"background-color":new Zn(Ce.paint_background["background-color"]),"background-pattern":new Qn(Ce.paint_background["background-pattern"]),"background-opacity":new Zn(Ce.paint_background["background-opacity"])})},xs=function(t){function e(e){t.call(this,e,bs)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(mr),ws={paint:new fr({"raster-opacity":new Zn(Ce.paint_raster["raster-opacity"]),"raster-hue-rotate":new Zn(Ce.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Zn(Ce.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Zn(Ce.paint_raster["raster-brightness-max"]),"raster-saturation":new Zn(Ce.paint_raster["raster-saturation"]),"raster-contrast":new Zn(Ce.paint_raster["raster-contrast"]),"raster-resampling":new Zn(Ce.paint_raster["raster-resampling"]),"raster-fade-duration":new Zn(Ce.paint_raster["raster-fade-duration"])})},Es=function(t){function e(e){t.call(this,e,ws)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(mr),Ps=function(t){function e(e){t.call(this,e,{}),this.implementation=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender||"3d"===this.implementation.renderingMode},e.prototype.recalculate=function(){},e.prototype.updateTransitions=function(){},e.prototype.hasTransition=function(){},e.prototype.serialize=function(){},e.prototype.resize=function(){this.viewportFrame&&(this.viewportFrame.destroy(),this.viewportFrame=null)},e.prototype.onAdd=function(e){this.implementation.onAdd&&this.implementation.onAdd(e,e.painter.context.gl)},e.prototype.onRemove=function(e){this.implementation.onRemove&&this.implementation.onRemove(e)},e}(mr),Cs={circle:No,heatmap:qo,hillshade:Ko,fill:wa,"fill-extrusion":Ia,line:Ja,symbol:ys,background:xs,raster:Es};function Ds(e){for(var t=0,n=0,r=0,i=e;r<i.length;r+=1){var o=i[r];t+=o.w*o.h,n=Math.max(n,o.w)}e.sort(function(e,t){return t.h-e.h});for(var a=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),n),h:1/0}],s=0,l=0,u=0,c=e;u<c.length;u+=1)for(var p=c[u],h=a.length-1;h>=0;h--){var f=a[h];if(!(p.w>f.w||p.h>f.h)){if(p.x=f.x,p.y=f.y,l=Math.max(l,p.y+p.h),s=Math.max(s,p.x+p.w),p.w===f.w&&p.h===f.h){var d=a.pop();h<a.length&&(a[h]=d)}else p.h===f.h?(f.x+=p.w,f.w-=p.w):p.w===f.w?(f.y+=p.h,f.h-=p.h):(a.push({x:f.x+p.w,y:f.y,w:f.w-p.w,h:p.h}),f.y+=p.h,f.h-=p.h);break}}return{w:s,h:l,fill:t/(s*l)||0}}var Ts=function(e,t){var n=t.pixelRatio;this.paddedRect=e,this.pixelRatio=n},As={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};As.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},As.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},As.tlbr.get=function(){return this.tl.concat(this.br)},As.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(Ts.prototype,As);var Os=function(e,t){var n={},r={},i=[];for(var o in e){var a=e[o],s={x:0,y:0,w:a.data.width+2,h:a.data.height+2};i.push(s),n[o]=new Ts(s,a)}for(var l in t){var u=t[l],c={x:0,y:0,w:u.data.width+2,h:u.data.height+2};i.push(c),r[l]=new Ts(c,u)}var p=Ds(i),h=p.w,f=p.h,d=new Vo({width:h||1,height:f||1});for(var g in e){var m=e[g],y=n[g].paddedRect;Vo.copy(m.data,d,{x:0,y:0},{x:y.x+1,y:y.y+1},m.data)}for(var v in t){var _=t[v],b=r[v].paddedRect,x=b.x+1,w=b.y+1,S=_.data.width,E=_.data.height;Vo.copy(_.data,d,{x:0,y:0},{x:x,y:w},_.data),Vo.copy(_.data,d,{x:0,y:E-1},{x:x,y:w-1},{width:S,height:1}),Vo.copy(_.data,d,{x:0,y:0},{x:x,y:w+E},{width:S,height:1}),Vo.copy(_.data,d,{x:S-1,y:0},{x:x-1,y:w},{width:1,height:E}),Vo.copy(_.data,d,{x:0,y:0},{x:x+S,y:w},{width:1,height:E})}this.image=d,this.iconPositions=n,this.patternPositions=r};sn("ImagePosition",Ts),sn("ImageAtlas",Os);var Is=self.HTMLImageElement,Rs=self.HTMLCanvasElement,Ls=self.HTMLVideoElement,Ms=self.ImageData,js=function(e,t,n,r){this.context=e,this.format=n,this.texture=e.gl.createTexture(),this.update(t,r)};js.prototype.update=function(e,t){var n=e.width,r=e.height,i=!this.size||this.size[0]!==n||this.size[1]!==r,o=this.context,a=o.gl;this.useMipmap=Boolean(t&&t.useMipmap),a.bindTexture(a.TEXTURE_2D,this.texture),o.pixelStoreUnpackFlipY.set(!1),o.pixelStoreUnpack.set(1),o.pixelStoreUnpackPremultiplyAlpha.set(this.format===a.RGBA&&(!t||!1!==t.premultiply)),i?(this.size=[n,r],e instanceof Is||e instanceof Rs||e instanceof Ls||e instanceof Ms?a.texImage2D(a.TEXTURE_2D,0,this.format,this.format,a.UNSIGNED_BYTE,e):a.texImage2D(a.TEXTURE_2D,0,this.format,n,r,0,this.format,a.UNSIGNED_BYTE,e.data)):e instanceof Is||e instanceof Rs||e instanceof Ls||e instanceof Ms?a.texSubImage2D(a.TEXTURE_2D,0,0,0,a.RGBA,a.UNSIGNED_BYTE,e):a.texSubImage2D(a.TEXTURE_2D,0,0,0,n,r,a.RGBA,a.UNSIGNED_BYTE,e.data),this.useMipmap&&this.isSizePowerOfTwo()&&a.generateMipmap(a.TEXTURE_2D)},js.prototype.bind=function(e,t,n){var r=this.context.gl;r.bindTexture(r.TEXTURE_2D,this.texture),n!==r.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(n=r.LINEAR),e!==this.filter&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,e),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,n||e),this.filter=e),t!==this.wrap&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,t),this.wrap=t)},js.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},js.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Fs=function(e,t,n,r,i){var o,a,s=8*i-r-1,l=(1<<s)-1,u=l>>1,c=-7,p=n?i-1:0,h=n?-1:1,f=e[t+p];for(p+=h,o=f&(1<<-c)-1,f>>=-c,c+=s;c>0;o=256*o+e[t+p],p+=h,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+e[t+p],p+=h,c-=8);if(0===o)o=1-u;else{if(o===l)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,r),o-=u}return(f?-1:1)*a*Math.pow(2,o-r)},Ns=function(e,t,n,r,i,o){var a,s,l,u=8*o-i-1,c=(1<<u)-1,p=c>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,d=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),(t+=a+p>=1?h/l:h*Math.pow(2,1-p))*l>=2&&(a++,l/=2),a+p>=c?(s=0,a=c):a+p>=1?(s=(t*l-1)*Math.pow(2,i),a+=p):(s=t*Math.pow(2,p-1)*Math.pow(2,i),a=0));i>=8;e[n+f]=255&s,f+=d,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;e[n+f]=255&a,f+=d,a/=256,u-=8);e[n+f-d]|=128*g},Bs=Js;function Js(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}function $s(e){return e.type===Js.Bytes?e.readVarint()+e.pos:e.pos+1}function Ws(e,t,n){return n?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function Qs(e,t,n){var r=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.ceil(Math.log(t)/(7*Math.LN2));n.realloc(r);for(var i=n.pos-1;i>=e;i--)n.buf[i+r]=n.buf[i]}function tu(e,t){for(var n=0;n<e.length;n++)t.writeVarint(e[n])}function eu(e,t){for(var n=0;n<e.length;n++)t.writeSVarint(e[n])}function ru(e,t){for(var n=0;n<e.length;n++)t.writeFloat(e[n])}function nu(e,t){for(var n=0;n<e.length;n++)t.writeDouble(e[n])}function iu(e,t){for(var n=0;n<e.length;n++)t.writeBoolean(e[n])}function au(e,t){for(var n=0;n<e.length;n++)t.writeFixed32(e[n])}function ou(e,t){for(var n=0;n<e.length;n++)t.writeSFixed32(e[n])}function su(e,t){for(var n=0;n<e.length;n++)t.writeFixed64(e[n])}function uu(e,t){for(var n=0;n<e.length;n++)t.writeSFixed64(e[n])}function lu(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function pu(e,t,n){e[n]=t,e[n+1]=t>>>8,e[n+2]=t>>>16,e[n+3]=t>>>24}function cu(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}Js.Varint=0,Js.Fixed64=1,Js.Bytes=2,Js.Fixed32=5,Js.prototype={destroy:function(){this.buf=null},readFields:function(e,t,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),i=r>>3,o=this.pos;this.type=7&r,e(i,t,this),this.pos===o&&this.skip(r)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=lu(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=cu(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=lu(this.buf,this.pos)+4294967296*lu(this.buf,this.pos+4);return this.pos+=8,e},readSFixed64:function(){var e=lu(this.buf,this.pos)+4294967296*cu(this.buf,this.pos+4);return this.pos+=8,e},readFloat:function(){var e=Fs(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=Fs(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,n,r=this.buf;return t=127&(n=r[this.pos++]),n<128?t:(t|=(127&(n=r[this.pos++]))<<7,n<128?t:(t|=(127&(n=r[this.pos++]))<<14,n<128?t:(t|=(127&(n=r[this.pos++]))<<21,n<128?t:function(e,t,n){var r,i,o=n.buf;if(r=(112&(i=o[n.pos++]))>>4,i<128)return Ws(e,r,t);if(r|=(127&(i=o[n.pos++]))<<3,i<128)return Ws(e,r,t);if(r|=(127&(i=o[n.pos++]))<<10,i<128)return Ws(e,r,t);if(r|=(127&(i=o[n.pos++]))<<17,i<128)return Ws(e,r,t);if(r|=(127&(i=o[n.pos++]))<<24,i<128)return Ws(e,r,t);if(r|=(1&(i=o[n.pos++]))<<31,i<128)return Ws(e,r,t);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(n=r[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=function(e,t,n){for(var r="",i=t;i<n;){var o,a,s,l=e[i],u=null,c=l>239?4:l>223?3:l>191?2:1;if(i+c>n)break;1===c?l<128&&(u=l):2===c?128==(192&(o=e[i+1]))&&(u=(31&l)<<6|63&o)<=127&&(u=null):3===c?(o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&((u=(15&l)<<12|(63&o)<<6|63&a)<=2047||u>=55296&&u<=57343)&&(u=null)):4===c&&(o=e[i+1],a=e[i+2],s=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&((u=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||u>=1114112)&&(u=null)),null===u?(u=65533,c=1):u>65535&&(u-=65536,r+=String.fromCharCode(u>>>10&1023|55296),u=56320|1023&u),r+=String.fromCharCode(u),i+=c}return r}(this.buf,this.pos,e);return this.pos=e,t},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){var n=$s(this);for(e=e||[];this.pos<n;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){var t=$s(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){var t=$s(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){var t=$s(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){var t=$s(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){var t=$s(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){var t=$s(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){var t=$s(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){var t=$s(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===Js.Varint)for(;this.buf[this.pos++]>127;);else if(t===Js.Bytes)this.pos=this.readVarint()+this.pos;else if(t===Js.Fixed32)this.pos+=4;else{if(t!==Js.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var n=new Uint8Array(t);n.set(this.buf),this.buf=n,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),pu(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),pu(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),pu(this.buf,-1&e,this.pos),pu(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),pu(this.buf,-1&e,this.pos),pu(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(e,t){var n,r;if(e>=0?(n=e%4294967296|0,r=e/4294967296|0):(r=~(-e/4294967296),4294967295^(n=~(-e%4294967296))?n=n+1|0:(n=0,r=r+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),function(e,t,n){n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos]=127&e}(n,0,t),function(e,t){var n=(7&e)<<4;t.buf[t.pos++]|=n|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e)))))}(r,t)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(e,t,n){for(var r,i,o=0;o<t.length;o++){if((r=t.charCodeAt(o))>55295&&r<57344){if(!i){r>56319||o+1===t.length?(e[n++]=239,e[n++]=191,e[n++]=189):i=r;continue}if(r<56320){e[n++]=239,e[n++]=191,e[n++]=189,i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&(e[n++]=239,e[n++]=191,e[n++]=189,i=null);r<128?e[n++]=r:(r<2048?e[n++]=r>>6|192:(r<65536?e[n++]=r>>12|224:(e[n++]=r>>18|240,e[n++]=r>>12&63|128),e[n++]=r>>6&63|128),e[n++]=63&r|128)}return n}(this.buf,e,this.pos);var n=this.pos-t;n>=128&&Qs(t,n,this),this.pos=t-1,this.writeVarint(n),this.pos+=n},writeFloat:function(e){this.realloc(4),Ns(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),Ns(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var n=0;n<t;n++)this.buf[this.pos++]=e[n]},writeRawMessage:function(e,t){this.pos++;var n=this.pos;e(t,this);var r=this.pos-n;r>=128&&Qs(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(e,t,n){this.writeTag(e,Js.Bytes),this.writeRawMessage(t,n)},writePackedVarint:function(e,t){this.writeMessage(e,tu,t)},writePackedSVarint:function(e,t){this.writeMessage(e,eu,t)},writePackedBoolean:function(e,t){this.writeMessage(e,iu,t)},writePackedFloat:function(e,t){this.writeMessage(e,ru,t)},writePackedDouble:function(e,t){this.writeMessage(e,nu,t)},writePackedFixed32:function(e,t){this.writeMessage(e,au,t)},writePackedSFixed32:function(e,t){this.writeMessage(e,ou,t)},writePackedFixed64:function(e,t){this.writeMessage(e,su,t)},writePackedSFixed64:function(e,t){this.writeMessage(e,uu,t)},writeBytesField:function(e,t){this.writeTag(e,Js.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,Js.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,Js.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,Js.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,Js.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,Js.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,Js.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,Js.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,Js.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,Js.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}};var zs=3;function fu(e,t,n){1===e&&n.readMessage(yu,t)}function yu(e,t,n){if(3===e){var r=n.readMessage(du,{}),i=r.id,o=r.bitmap,a=r.width,s=r.height,l=r.left,u=r.top,c=r.advance;t.push({id:i,bitmap:new Uo({width:a+2*zs,height:s+2*zs},o),metrics:{width:a,height:s,left:l,top:u,advance:c}})}}function du(e,t,n){1===e?t.id=n.readVarint():2===e?t.bitmap=n.readBytes():3===e?t.width=n.readVarint():4===e?t.height=n.readVarint():5===e?t.left=n.readSVarint():6===e?t.top=n.readSVarint():7===e&&(t.advance=n.readVarint())}var Us=zs,Vs=function(e,t,n){this.target=e,this.parent=t,this.mapId=n,this.callbacks={},this.callbackID=0,m(["receive"],this),this.target.addEventListener("message",this.receive,!1)};function gu(e,t,n){var r=2*Math.PI*6378137/256/Math.pow(2,n);return[e*r-2*Math.PI*6378137/2,t*r-2*Math.PI*6378137/2]}Vs.prototype.send=function(e,t,n,r){var i=this,o=n?this.mapId+":"+this.callbackID++:null;n&&(this.callbacks[o]=n);var a=[];if(this.target.postMessage({targetMapId:r,sourceMapId:this.mapId,type:e,id:String(o),data:ln(t,a)},a),n)return{cancel:function(){return i.target.postMessage({targetMapId:r,sourceMapId:i.mapId,type:"<cancel>",id:String(o)})}}},Vs.prototype.receive=function(e){var t,n=this,r=e.data,i=r.id;if(!r.targetMapId||this.mapId===r.targetMapId){var o=function(e,t){delete n.callbacks[i];var r=[];n.target.postMessage({sourceMapId:n.mapId,type:"<response>",id:String(i),error:e?ln(e):null,data:ln(t,r)},r)};if("<response>"===r.type||"<cancel>"===r.type)t=this.callbacks[r.id],delete this.callbacks[r.id],t&&r.error?t(pn(r.error)):t&&t(null,pn(r.data));else if(void 0!==r.id&&this.parent[r.type]){this.callbacks[r.id]=null;var a=this.parent[r.type](r.sourceMapId,pn(r.data),o);a&&null===this.callbacks[r.id]&&(this.callbacks[r.id]=a)}else if(void 0!==r.id&&this.parent.getWorkerSource){var s=r.type.split("."),l=pn(r.data);this.parent.getWorkerSource(r.sourceMapId,s[0],l.source)[s[1]](l,o)}else this.parent[r.type](pn(r.data))}},Vs.prototype.remove=function(){this.target.removeEventListener("message",this.receive,!1)};var Gs=function(e,t){e&&(t?this.setSouthWest(e).setNorthEast(t):4===e.length?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))};Gs.prototype.setNorthEast=function(e){return this._ne=e instanceof qs?new qs(e.lng,e.lat):qs.convert(e),this},Gs.prototype.setSouthWest=function(e){return this._sw=e instanceof qs?new qs(e.lng,e.lat):qs.convert(e),this},Gs.prototype.extend=function(e){var t,n,r=this._sw,i=this._ne;if(e instanceof qs)t=e,n=e;else{if(!(e instanceof Gs))return Array.isArray(e)?e.every(Array.isArray)?this.extend(Gs.convert(e)):this.extend(qs.convert(e)):this;if(t=e._sw,n=e._ne,!t||!n)return this}return r||i?(r.lng=Math.min(t.lng,r.lng),r.lat=Math.min(t.lat,r.lat),i.lng=Math.max(n.lng,i.lng),i.lat=Math.max(n.lat,i.lat)):(this._sw=new qs(t.lng,t.lat),this._ne=new qs(n.lng,n.lat)),this},Gs.prototype.getCenter=function(){return new qs((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Gs.prototype.getSouthWest=function(){return this._sw},Gs.prototype.getNorthEast=function(){return this._ne},Gs.prototype.getNorthWest=function(){return new qs(this.getWest(),this.getNorth())},Gs.prototype.getSouthEast=function(){return new qs(this.getEast(),this.getSouth())},Gs.prototype.getWest=function(){return this._sw.lng},Gs.prototype.getSouth=function(){return this._sw.lat},Gs.prototype.getEast=function(){return this._ne.lng},Gs.prototype.getNorth=function(){return this._ne.lat},Gs.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Gs.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Gs.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Gs.convert=function(e){return!e||e instanceof Gs?e:new Gs(e)};var qs=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid LngLat object: ("+e+", "+t+")");if(this.lng=+e,this.lat=+t,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};function _u(e){return 2*Math.PI*6378137*Math.cos(e*Math.PI/180)}function wu(e){return(180+e)/360}function Au(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function Su(e,t){return e/_u(t)}function ku(e){var t=180-360*e;return 360/Math.PI*Math.atan(Math.exp(t*Math.PI/180))-90}qs.prototype.wrap=function(){return new qs(p(this.lng,-180,180),this.lat)},qs.prototype.toArray=function(){return[this.lng,this.lat]},qs.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},qs.prototype.toBounds=function(e){void 0===e&&(e=0);var t=360*e/40075017,n=t/Math.cos(Math.PI/180*this.lat);return new Gs(new qs(this.lng-n,this.lat-t),new qs(this.lng+n,this.lat+t))},qs.convert=function(e){if(e instanceof qs)return e;if(Array.isArray(e)&&(2===e.length||3===e.length))return new qs(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&"object"==typeof e&&null!==e)return new qs(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Hs=function(e,t,n){void 0===n&&(n=0),this.x=+e,this.y=+t,this.z=+n};Hs.fromLngLat=function(e,t){void 0===t&&(t=0);var n=qs.convert(e);return new Hs(wu(n.lng),Au(n.lat),Su(t,n.lat))},Hs.prototype.toLngLat=function(){return new qs(360*this.x-180,ku(this.y))},Hs.prototype.toAltitude=function(){return this.z*_u(ku(this.y))};var Xs=function(e,t,n){this.z=e,this.x=t,this.y=n,this.key=Pu(0,e,t,n)};Xs.prototype.equals=function(e){return this.z===e.z&&this.x===e.x&&this.y===e.y},Xs.prototype.url=function(e,t){var n,r,i,o,a,s=(n=this.x,r=this.y,i=this.z,o=gu(256*n,256*(r=Math.pow(2,i)-r-1),i),a=gu(256*(n+1),256*(r+1),i),o[0]+","+o[1]+","+a[0]+","+a[1]),l=function(e,t,n){for(var r,i="",o=e;o>0;o--)i+=(t&(r=1<<o-1)?1:0)+(n&r?2:0);return i}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===t?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",l).replace("{bbox-epsg-3857}",s)},Xs.prototype.getTilePoint=function(e){var t=Math.pow(2,this.z);return new E((e.x*t-this.x)*Po,(e.y*t-this.y)*Po)};var Ks=function(e,t){this.wrap=e,this.canonical=t,this.key=Pu(e,t.z,t.x,t.y)},Zs=function(e,t,n,r,i){this.overscaledZ=e,this.wrap=t,this.canonical=new Xs(n,+r,+i),this.key=Pu(t,e,r,i)};function Pu(e,t,n,r){(e*=2)<0&&(e=-1*e-1);var i=1<<t;return 32*(i*i*e+i*r+n)+t}Zs.prototype.equals=function(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)},Zs.prototype.scaledTo=function(e){var t=this.canonical.z-e;return e>this.canonical.z?new Zs(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Zs(e,this.wrap,e,this.canonical.x>>t,this.canonical.y>>t)},Zs.prototype.isChildOf=function(e){if(e.wrap!==this.wrap)return!1;var t=this.canonical.z-e.canonical.z;return 0===e.overscaledZ||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>t&&e.canonical.y===this.canonical.y>>t},Zs.prototype.children=function(e){if(this.overscaledZ>=e)return[new Zs(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var t=this.canonical.z+1,n=2*this.canonical.x,r=2*this.canonical.y;return[new Zs(t,this.wrap,t,n,r),new Zs(t,this.wrap,t,n+1,r),new Zs(t,this.wrap,t,n,r+1),new Zs(t,this.wrap,t,n+1,r+1)]},Zs.prototype.isLessThan=function(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))},Zs.prototype.wrapped=function(){return new Zs(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Zs.prototype.unwrapTo=function(e){return new Zs(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)},Zs.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Zs.prototype.toUnwrapped=function(){return new Ks(this.wrap,this.canonical)},Zs.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Zs.prototype.getTilePoint=function(e){return this.canonical.getTilePoint(new Hs(e.x-this.wrap,e.y))},sn("CanonicalTileID",Xs),sn("OverscaledTileID",Zs,{omit:["posMatrix"]});var Ys=function(e,t,n){if(this.uid=e,t.height!==t.width)throw new RangeError("DEM tiles must be square");if(n&&"mapbox"!==n&&"terrarium"!==n)return w('"'+n+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');var r=this.dim=t.height;this.stride=this.dim+2,this.data=new Int32Array(this.stride*this.stride);for(var i=t.data,o="terrarium"===n?this._unpackTerrarium:this._unpackMapbox,a=0;a<r;a++)for(var s=0;s<r;s++){var l=4*(a*r+s);this.set(s,a,o(i[l],i[l+1],i[l+2]))}for(var u=0;u<r;u++)this.set(-1,u,this.get(0,u)),this.set(r,u,this.get(r-1,u)),this.set(u,-1,this.get(u,0)),this.set(u,r,this.get(u,r-1));this.set(-1,-1,this.get(0,0)),this.set(r,-1,this.get(r-1,0)),this.set(-1,r,this.get(0,r-1)),this.set(r,r,this.get(r-1,r-1))};Ys.prototype.set=function(e,t,n){this.data[this._idx(e,t)]=n+65536},Ys.prototype.get=function(e,t){return this.data[this._idx(e,t)]-65536},Ys.prototype._idx=function(e,t){if(e<-1||e>=this.dim+1||t<-1||t>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(t+1)*this.stride+(e+1)},Ys.prototype._unpackMapbox=function(e,t,n){return(256*e*256+256*t+n)/10-1e4},Ys.prototype._unpackTerrarium=function(e,t,n){return 256*e+t+n/256-32768},Ys.prototype.getPixels=function(){return new Vo({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Ys.prototype.backfillBorder=function(e,t,n){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");var r=t*this.dim,i=t*this.dim+this.dim,o=n*this.dim,a=n*this.dim+this.dim;switch(t){case-1:r=i-1;break;case 1:i=r+1}switch(n){case-1:o=a-1;break;case 1:a=o+1}for(var s=-t*this.dim,l=-n*this.dim,u=o;u<a;u++)for(var c=r;c<i;c++)this.set(c,u,e.get(c+s,u+l))},sn("DEMData",Ys);var el=Nn([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),tl=function(e){this._stringToNumber={},this._numberToString=[];for(var t=0;t<e.length;t++){var n=e[t];this._stringToNumber[n]=t,this._numberToString[t]=n}};tl.prototype.encode=function(e){return this._stringToNumber[e]},tl.prototype.decode=function(e){return this._numberToString[e]};var nl=function(e,t,n,r){this.type="Feature",this._vectorTileFeature=e,e._z=t,e._x=n,e._y=r,this.properties=e.properties,null!=e.id&&(this.id=e.id)},rl={geometry:{configurable:!0}};rl.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},rl.geometry.set=function(e){this._geometry=e},nl.prototype.toJSON=function(){var e={geometry:this.geometry};for(var t in this)"_geometry"!==t&&"_vectorTileFeature"!==t&&(e[t]=this[t]);return e},Object.defineProperties(nl.prototype,rl);var il=function(){this.state={},this.stateChanges={},this.deletedStates={}};il.prototype.updateState=function(e,t,n){var r=String(t);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][r]=this.stateChanges[e][r]||{},c(this.stateChanges[e][r],n),null===this.deletedStates[e])for(var i in this.deletedStates[e]={},this.state[e])i!==r&&(this.deletedStates[e][i]=null);else if(this.deletedStates[e]&&null===this.deletedStates[e][r])for(var o in this.deletedStates[e][r]={},this.state[e][r])n[o]||(this.deletedStates[e][r][o]=null);else for(var a in n)this.deletedStates[e]&&this.deletedStates[e][r]&&null===this.deletedStates[e][r][a]&&delete this.deletedStates[e][r][a]},il.prototype.removeFeatureState=function(e,t,n){if(null!==this.deletedStates[e]){var r=String(t);if(this.deletedStates[e]=this.deletedStates[e]||{},n&&t)null!==this.deletedStates[e][r]&&(this.deletedStates[e][r]=this.deletedStates[e][r]||{},this.deletedStates[e][r][n]=null);else if(t)if(this.stateChanges[e]&&this.stateChanges[e][r])for(n in this.deletedStates[e][r]={},this.stateChanges[e][r])this.deletedStates[e][r][n]=null;else this.deletedStates[e][r]=null;else this.deletedStates[e]=null}},il.prototype.getState=function(e,t){var n=String(t),r=this.state[e]||{},i=this.stateChanges[e]||{},o=c({},r[n],i[n]);if(null===this.deletedStates[e])return{};if(this.deletedStates[e]){var a=this.deletedStates[e][t];if(null===a)return{};for(var s in a)delete o[s]}return o},il.prototype.initializeTileState=function(e,t){e.setFeatureState(this.state,t)},il.prototype.coalesceChanges=function(e,t){var n={};for(var r in this.stateChanges){this.state[r]=this.state[r]||{};var i={};for(var o in this.stateChanges[r])this.state[r][o]||(this.state[r][o]={}),c(this.state[r][o],this.stateChanges[r][o]),i[o]=this.state[r][o];n[r]=i}for(var a in this.deletedStates){this.state[a]=this.state[a]||{};var s={};if(null===this.deletedStates[a]){for(var l in this.state[a])s[l]={};this.state[a]={}}else for(var u in this.deletedStates[a]){if(null===this.deletedStates[a][u])this.state[a][u]={};else for(var p=0,h=Object.keys(this.deletedStates[a][u]);p<h.length;p+=1){var f=h[p];delete this.state[a][u][f]}s[u]=this.state[a][u]}n[a]=n[a]||{},c(n[a],s)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(n).length)for(var d in e)e[d].setFeatureState(n,t)};var ol=function(e,t,n){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=t||new Pn(Po,16,0),this.grid3D=new Pn(Po,16,0),this.featureIndexArray=n||new Ti};function Du(e){for(var t=1/0,n=1/0,r=-1/0,i=-1/0,o=0,a=e;o<a.length;o+=1){var s=a[o];t=Math.min(t,s.x),n=Math.min(n,s.y),r=Math.max(r,s.x),i=Math.max(i,s.y)}return{minX:t,minY:n,maxX:r,maxY:i}}function Uu(e,t){return t-e}ol.prototype.insert=function(e,t,n,r,i,o){var a=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,r,i);for(var s=o?this.grid3D:this.grid,l=0;l<t.length;l++){for(var u=t[l],c=[1/0,1/0,-1/0,-1/0],p=0;p<u.length;p++){var h=u[p];c[0]=Math.min(c[0],h.x),c[1]=Math.min(c[1],h.y),c[2]=Math.max(c[2],h.x),c[3]=Math.max(c[3],h.y)}c[0]<Po&&c[1]<Po&&c[2]>=0&&c[3]>=0&&s.insert(a,c[0],c[1],c[2],c[3])}},ol.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Ba.VectorTile(new Bs(this.rawTileData)).layers,this.sourceLayerCoder=new tl(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},ol.prototype.query=function(e,t,n){var r=this;this.loadVTLayers();for(var i=e.params||{},o=Po/e.tileSize/e.scale,a=Er(i.filter),s=e.queryGeometry,l=e.queryPadding*o,u=Du(s),c=this.grid.query(u.minX-l,u.minY-l,u.maxX+l,u.maxY+l),p=Du(e.cameraQueryGeometry),h=0,f=this.grid3D.query(p.minX-l,p.minY-l,p.maxX+l,p.maxY+l,function(t,n,r,i){return function(e,t,n,r,i){for(var o=0,a=e;o<a.length;o+=1){var s=a[o];if(t<=s.x&&n<=s.y&&r>=s.x&&i>=s.y)return!0}var l=[new E(t,n),new E(t,i),new E(r,i),new E(r,n)];if(e.length>2)for(var u=0,c=l;u<c.length;u+=1)if(pa(e,c[u]))return!0;for(var p=0;p<e.length-1;p++)if(ca(e[p],e[p+1],l))return!0;return!1}(e.cameraQueryGeometry,t-l,n-l,r+l,i+l)});h<f.length;h+=1){var d=f[h];c.push(d)}c.sort(Uu);for(var g,m={},y=function(l){var u=c[l];if(u!==g){g=u;var p=r.featureIndexArray.get(u),h=null;r.loadMatchingFeature(m,p.bucketIndex,p.sourceLayerIndex,p.featureIndex,a,i.layers,t,function(t,i){h||(h=Wi(t));var a={};return t.id&&(a=n.getState(i.sourceLayer||"_geojsonTileLayer",t.id)),i.queryIntersectsFeature(s,t,a,h,r.z,e.transform,o,e.pixelPosMatrix)})}},v=0;v<c.length;v++)y(v);return m},ol.prototype.loadMatchingFeature=function(e,t,n,r,i,o,a,s){var l=this.bucketLayerIDs[t];if(!o||function(e,t){for(var n=0;n<e.length;n++)if(t.indexOf(e[n])>=0)return!0;return!1}(o,l)){var u=this.sourceLayerCoder.decode(n),c=this.vtLayers[u].feature(r);if(i(new Bn(this.tileID.overscaledZ),c))for(var p=0;p<l.length;p++){var h=l[p];if(!(o&&o.indexOf(h)<0)){var f=a[h];if(f){var d=!s||s(c,f);if(d){var g=new nl(c,this.z,this.x,this.y);g.layer=f.serialize();var m=e[h];void 0===m&&(m=e[h]=[]),m.push({featureIndex:r,feature:g,intersectionZ:d})}}}}}},ol.prototype.lookupSymbolFeatures=function(e,t,n,r,i,o){var a={};this.loadVTLayers();for(var s=Er(r),l=0,u=e;l<u.length;l+=1){var c=u[l];this.loadMatchingFeature(a,t,n,c,s,i,o)}return a},ol.prototype.hasLayer=function(e){for(var t=0,n=this.bucketLayerIDs;t<n.length;t+=1)for(var r=0,i=n[t];r<i.length;r+=1)if(e===i[r])return!0;return!1},sn("FeatureIndex",ol,{omit:["rawTileData","sourceLayerCoder"]});var al=function(e,t){this.tileID=e,this.uid=f(),this.uses=0,this.tileSize=t,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.expiredRequestCount=0,this.state="loading"};al.prototype.registerFadeDuration=function(e){var t=e+this.timeAdded;t<N.now()||this.fadeEndTime&&t<this.fadeEndTime||(this.fadeEndTime=t)},al.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},al.prototype.loadVectorData=function(e,t,n){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){for(var r in e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(e,t){var n={};if(!t)return n;for(var r=function(){var e=o[i],r=e.layerIds.map(function(e){return t.getLayer(e)}).filter(Boolean);if(0!==r.length){e.layers=r,e.stateDependentLayerIds&&(e.stateDependentLayers=e.stateDependentLayerIds.map(function(e){return r.filter(function(t){return t.id===e})[0]}));for(var a=0,s=r;a<s.length;a+=1){var l=s[a];n[l.id]=e}}},i=0,o=e;i<o.length;i+=1)r();return n}(e.buckets,t.style),this.hasSymbolBuckets=!1,this.buckets){var i=this.buckets[r];if(i instanceof ds){if(this.hasSymbolBuckets=!0,!n)break;i.justReloaded=!0}}for(var o in this.queryPadding=0,this.buckets){var a=this.buckets[o];this.queryPadding=Math.max(this.queryPadding,t.style.getLayer(o).queryRadius(a))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new yi},al.prototype.unloadVectorData=function(){for(var e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},al.prototype.unloadDEMData=function(){this.dem=null,this.neighboringTiles=null,this.state="unloaded"},al.prototype.getBucket=function(e){return this.buckets[e.id]},al.prototype.upload=function(e){for(var t in this.buckets){var n=this.buckets[t];n.uploadPending()&&n.upload(e)}var r=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new js(e,this.imageAtlas.image,r.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new js(e,this.glyphAtlasImage,r.ALPHA),this.glyphAtlasImage=null)},al.prototype.queryRenderedFeatures=function(e,t,n,r,i,o,a,s,l){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:n,cameraQueryGeometry:r,scale:i,tileSize:this.tileSize,pixelPosMatrix:l,transform:a,params:o,queryPadding:this.queryPadding*s},e,t):{}},al.prototype.querySourceFeatures=function(e,t){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData){var n=this.latestFeatureIndex.loadVTLayers(),r=t?t.sourceLayer:"",i=n._geojsonTileLayer||n[r];if(i)for(var o=Er(t&&t.filter),a=this.tileID.canonical,s=a.z,l=a.x,u=a.y,c={z:s,x:l,y:u},p=0;p<i.length;p++){var h=i.feature(p);if(o(new Bn(this.tileID.overscaledZ),h)){var f=new nl(h,s,l,u);f.tile=c,e.push(f)}}}},al.prototype.clearMask=function(){this.segments&&(this.segments.destroy(),delete this.segments),this.maskedBoundsBuffer&&(this.maskedBoundsBuffer.destroy(),delete this.maskedBoundsBuffer),this.maskedIndexBuffer&&(this.maskedIndexBuffer.destroy(),delete this.maskedIndexBuffer)},al.prototype.setMask=function(e,t){if(!o(this.mask,e)&&(this.mask=e,this.clearMask(),!o(e,{0:!0}))){var n=new Kr,r=new pi;this.segments=new Ri,this.segments.prepareSegment(0,n,r);for(var i=Object.keys(e),a=0;a<i.length;a++){var s=e[i[a]],l=Po>>s.z,u=new E(s.x*l,s.y*l),c=new E(u.x+l,u.y+l),p=this.segments.prepareSegment(4,n,r);n.emplaceBack(u.x,u.y,u.x,u.y),n.emplaceBack(c.x,u.y,c.x,u.y),n.emplaceBack(u.x,c.y,u.x,c.y),n.emplaceBack(c.x,c.y,c.x,c.y);var h=p.vertexLength;r.emplaceBack(h,h+1,h+2),r.emplaceBack(h+1,h+2,h+3),p.vertexLength+=4,p.primitiveLength+=2}this.maskedBoundsBuffer=t.createVertexBuffer(n,el.members),this.maskedIndexBuffer=t.createIndexBuffer(r)}},al.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},al.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},al.prototype.setExpiryData=function(e){var t=this.expirationTime;if(e.cacheControl){var n=function(e){var t={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(e,n,r,i){var o=r||i;return t[n]=!o||o.toLowerCase(),""}),t["max-age"]){var n=parseInt(t["max-age"],10);isNaN(n)?delete t["max-age"]:t["max-age"]=n}return t}(e.cacheControl);n["max-age"]&&(this.expirationTime=Date.now()+1e3*n["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){var r=Date.now(),i=!1;if(this.expirationTime>r)i=!1;else if(t)if(this.expirationTime<t)i=!0;else{var o=this.expirationTime-t;o?this.expirationTime=r+Math.max(o,3e4):i=!0}else i=!0;i?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},al.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},al.prototype.setFeatureState=function(e,t){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(e).length){var n=this.latestFeatureIndex.loadVTLayers();for(var r in this.buckets){var i=this.buckets[r],o=i.layers[0].sourceLayer||"_geojsonTileLayer",a=n[o],s=e[o];a&&s&&0!==Object.keys(s).length&&(i.update(s,a,this.imageAtlas&&this.imageAtlas.patternPositions||{}),t&&t.style&&(this.queryPadding=Math.max(this.queryPadding,t.style.getLayer(r).queryRadius(i))))}}},al.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},al.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<N.now()},al.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},al.prototype.setHoldDuration=function(e){this.symbolFadeHoldUntil=N.now()+e};var sl={horizontal:1,vertical:2,horizontalOnly:3},ll=function(){this.text="",this.sectionIndex=[],this.sections=[]};ll.fromFeature=function(e,t){for(var n=new ll,r=0;r<e.sections.length;r++){var i=e.sections[r];n.sections.push({scale:i.scale||1,fontStack:i.fontStack||t}),n.text+=i.text;for(var o=0;o<i.text.length;o++)n.sectionIndex.push(r)}return n},ll.prototype.length=function(){return this.text.length},ll.prototype.getSection=function(e){return this.sections[this.sectionIndex[e]]},ll.prototype.getCharCode=function(e){return this.text.charCodeAt(e)},ll.prototype.verticalizePunctuation=function(){this.text=function(e){for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n+1)||null,i=e.charCodeAt(n-1)||null;r&&mn(r)&&!ss[e[n+1]]||i&&mn(i)&&!ss[e[n-1]]||!ss[e[n]]?t+=e[n]:t+=ss[e[n]]}return t}(this.text)},ll.prototype.trim=function(){for(var e=0,t=0;t<this.text.length&&ul[this.text.charCodeAt(t)];t++)e++;for(var n=this.text.length,r=this.text.length-1;r>=0&&r>=e&&ul[this.text.charCodeAt(r)];r--)n--;this.text=this.text.substring(e,n),this.sectionIndex=this.sectionIndex.slice(e,n)},ll.prototype.substring=function(e,t){var n=new ll;return n.text=this.text.substring(e,t),n.sectionIndex=this.sectionIndex.slice(e,t),n.sections=this.sections,n},ll.prototype.toString=function(){return this.text},ll.prototype.getMaxScale=function(){var e=this;return this.sectionIndex.reduce(function(t,n){return Math.max(t,e.sections[n].scale)},0)};var ul={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},cl={};function Gu(e,t,n,r){var i=Math.pow(e-t,2);return r?e<t?i/2:2*i:i+Math.abs(n)*n}function Xu(e,t){var n=0;return 10===e&&(n-=1e4),40!==e&&65288!==e||(n+=50),41!==t&&65289!==t||(n+=50),n}function Zu(e,t,n,r,i,o){for(var a=null,s=Gu(t,n,i,o),l=0,u=r;l<u.length;l+=1){var c=u[l],p=Gu(t-c.x,n,i,o)+c.badness;p<=s&&(a=c,s=p)}return{index:e,x:t,priorBreak:a,badness:s}}function Hu(e,t,n,r){if(!n)return[];if(!e)return[];for(var i,o=[],a=function(e,t,n,r){for(var i=0,o=0;o<e.length();o++){var a=e.getSection(o),s=r[a.fontStack],l=s&&s[e.getCharCode(o)];l&&(i+=l.metrics.advance*a.scale+t)}return i/Math.max(1,Math.ceil(i/n))}(e,t,n,r),s=0,l=0;l<e.length();l++){var u=e.getSection(l),c=e.getCharCode(l),p=r[u.fontStack],h=p&&p[c];h&&!ul[c]&&(s+=h.metrics.advance*u.scale+t),l<e.length()-1&&(cl[c]||!((i=c)<11904)&&(In["Bopomofo Extended"](i)||In.Bopomofo(i)||In["CJK Compatibility Forms"](i)||In["CJK Compatibility Ideographs"](i)||In["CJK Compatibility"](i)||In["CJK Radicals Supplement"](i)||In["CJK Strokes"](i)||In["CJK Symbols and Punctuation"](i)||In["CJK Unified Ideographs Extension A"](i)||In["CJK Unified Ideographs"](i)||In["Enclosed CJK Letters and Months"](i)||In["Halfwidth and Fullwidth Forms"](i)||In.Hiragana(i)||In["Ideographic Description Characters"](i)||In["Kangxi Radicals"](i)||In["Katakana Phonetic Extensions"](i)||In.Katakana(i)||In["Vertical Forms"](i)||In["Yi Radicals"](i)||In["Yi Syllables"](i)))&&o.push(Zu(l+1,s,a,o,Xu(c,e.getCharCode(l+1)),!1))}return function t(e){return e?t(e.priorBreak).concat(e.index):[]}(Zu(e.length(),s,a,o,0,!0))}function Yu(e){var t=.5,n=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:t,verticalAlign:n}}function Ju(e,t,n,r,i){if(i){var o=e[r],a=t[o.fontStack],s=a&&a[o.glyph];if(s)for(var l=s.metrics.advance*o.scale,u=(e[r].x+l)*i,c=n;c<=r;c++)e[c].x-=u}}cl[10]=!0,cl[32]=!0,cl[38]=!0,cl[40]=!0,cl[41]=!0,cl[43]=!0,cl[45]=!0,cl[47]=!0,cl[173]=!0,cl[183]=!0,cl[8203]=!0,cl[8208]=!0,cl[8211]=!0,cl[8231]=!0,u.createCommonjsModule=e,u.window=self,u.Point=E,u.browser=N,u.getJSON=function(e,t){return ge(c(e,{type:"json"}),t)},u.normalizeSpriteURL=function(e,t,n,r){var i=X(e);return U(e)?(i.path="/styles/v1"+i.path+"/sprite"+t+n,D(i,r)):(i.path+=""+t+n,Z(i))},u.ResourceType=ce,u.getImage=ve,u.RGBAImage=Vo,u.ImagePosition=Ts,u.Texture=js,u.potpack=Ds,u.normalizeGlyphsURL=function(e,t){if(!U(e))return e;var n=X(e);return n.path="/fonts/v1"+n.path,D(n,t)},u.getArrayBuffer=me,u.parseGlyphPBF=function(e){return new Bs(e).readFields(fu,[])},u.asyncAll=function(e,t,n){if(!e.length)return n(null,[]);var r=e.length,i=new Array(e.length),o=null;e.forEach(function(e,a){t(e,function(e,t){e&&(o=e),i[a]=t,0==--r&&n(o,i)})})},u.isChar=In,u.AlphaImage=Uo,u.Properties=fr,u.DataConstantProperty=Zn,u.styleSpec=Ce,u.validateLight=wn,u.endsWith=v,u.emitValidationErrors=tn,u.validateStyle=xn,u.extend=c,u.Evented=Pe,u.sphericalToCartesian=function(e){var t=e[0],n=e[1],r=e[2];return n+=90,n*=Math.PI/180,r*=Math.PI/180,{x:t*Math.cos(n)*Math.sin(r),y:t*Math.sin(n)*Math.sin(r),z:t*Math.cos(r)}},u.number=le,u.Transitionable=Vn,u.warnOnce=w,u.uniqueId=f,u.Actor=Vs,u.normalizeSourceURL=function(e,t){if(!U(e))return e;var n=X(e);return n.path="/v4/"+n.authority+".json",n.params.push("secure"),D(n,t)},u.pick=function(e,t){for(var n={},r=0;r<t.length;r++){var i=t[r];i in e&&(n[i]=e[i])}return n},u.canonicalizeTileset=function(e,t){if(!U(t))return e.tiles||[];for(var n=[],r=0,i=e.tiles;r<i.length;r+=1){var o=i[r],a=J(o);n.push(a)}return n},u.LngLatBounds=Gs,u.mercatorXfromLng=wu,u.mercatorYfromLat=Au,u.Event=xe,u.ErrorEvent=Ee,u.postTurnstileEvent=oe,u.postMapLoadEvent=ue,u.normalizeTileURL=function(e,t,n){if(!t||!U(t))return e;var r=X(e),i=N.devicePixelRatio>=2||512===n?"@2x":"",o=z.supported?".webp":"$1";return r.path=r.path.replace(K,""+i+o),r.path="/v4"+r.path,D(r)},u.OverscaledTileID=Zs,u.EXTENT=Po,u.MercatorCoordinate=Hs,u.CanonicalTileID=Xs,u.StructArrayLayout4i8=Kr,u.rasterBoundsAttributes=el,u.SegmentVector=Ri,u.getVideo=function(e,t){var n,r,i=self.document.createElement("video");i.muted=!0,i.onloadstart=function(){t(null,i)};for(var o=0;o<e.length;o++){var a=self.document.createElement("source");n=e[o],r=void 0,(r=self.document.createElement("a")).href=n,(r.protocol!==self.document.location.protocol||r.host!==self.document.location.host)&&(i.crossOrigin="Anonymous"),a.src=e[o],i.appendChild(a)}return{cancel:function(){}}},u.ValidationError=Te,u.bindAll=m,u.multiply=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],p=t[8],h=t[9],f=t[10],d=t[11],g=t[12],m=t[13],y=t[14],v=t[15],_=n[0],b=n[1],x=n[2],w=n[3];return e[0]=_*r+b*s+x*p+w*g,e[1]=_*i+b*l+x*h+w*m,e[2]=_*o+b*u+x*f+w*y,e[3]=_*a+b*c+x*d+w*v,_=n[4],b=n[5],x=n[6],w=n[7],e[4]=_*r+b*s+x*p+w*g,e[5]=_*i+b*l+x*h+w*m,e[6]=_*o+b*u+x*f+w*y,e[7]=_*a+b*c+x*d+w*v,_=n[8],b=n[9],x=n[10],w=n[11],e[8]=_*r+b*s+x*p+w*g,e[9]=_*i+b*l+x*h+w*m,e[10]=_*o+b*u+x*f+w*y,e[11]=_*a+b*c+x*d+w*v,_=n[12],b=n[13],x=n[14],w=n[15],e[12]=_*r+b*s+x*p+w*g,e[13]=_*i+b*l+x*h+w*m,e[14]=_*o+b*u+x*f+w*y,e[15]=_*a+b*c+x*d+w*v,e},u.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},u.translate=function(e,t,n){var r,i,o,a,s,l,u,c,p,h,f,d,g=n[0],m=n[1],y=n[2];return t===e?(e[12]=t[0]*g+t[4]*m+t[8]*y+t[12],e[13]=t[1]*g+t[5]*m+t[9]*y+t[13],e[14]=t[2]*g+t[6]*m+t[10]*y+t[14],e[15]=t[3]*g+t[7]*m+t[11]*y+t[15]):(r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],p=t[8],h=t[9],f=t[10],d=t[11],e[0]=r,e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=l,e[6]=u,e[7]=c,e[8]=p,e[9]=h,e[10]=f,e[11]=d,e[12]=r*g+s*m+p*y+t[12],e[13]=i*g+l*m+h*y+t[13],e[14]=o*g+u*m+f*y+t[14],e[15]=a*g+c*m+d*y+t[15]),e},u.scale=function(e,t,n){var r=n[0],i=n[1],o=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},u.Color=Ze,u.isEqual=o,u.keysDifference=function(e,t){var n=[];for(var r in e)r in t||n.push(r);return n},u.Tile=al,u.SourceFeatureState=il,u.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],u.rotateZ=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[0],a=t[1],s=t[2],l=t[3],u=t[4],c=t[5],p=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i+u*r,e[1]=a*i+c*r,e[2]=s*i+p*r,e[3]=l*i+h*r,e[4]=u*i-o*r,e[5]=c*i-a*r,e[6]=p*i-s*r,e[7]=h*i-l*r,e},u.evaluateSizeForZoom=function(e,t,n){if("constant"===e.functionType)return{uSizeT:0,uSize:e.layoutSize};if("source"===e.functionType)return{uSizeT:0,uSize:0};if("camera"===e.functionType){var r=e.propertyValue,i=e.zoomRange,o=e.sizeRange,a=l(br(r,n.specification).interpolationFactor(t,i.min,i.max),0,1);return{uSizeT:0,uSize:o.min+a*(o.max-o.min)}}var s=e.propertyValue,u=e.zoomRange;return{uSizeT:l(br(s,n.specification).interpolationFactor(t,u.min,u.max),0,1),uSize:0}},u.WritingMode=sl,u.transformMat4=Sa,u.evaluateSizeForFeature=function(e,t,n){var r=t;return"source"===e.functionType?n.lowerSize/256:"composite"===e.functionType?le(n.lowerSize/256,n.upperSize/256,r.uSizeT):r.uSize},u.addDynamicAttributes=ks,u.properties=ms,u.polygonIntersectsPolygon=ea,u.isMapboxURL=U,u.normalizeStyleURL=function(e,t){if(!U(e))return e;var n=X(e);return n.path="/styles/v1"+n.path,D(n,t)},u.createStyleLayer=function(e){return"custom"===e.type?new Ps(e):new Cs[e.type](e)},u.clone=b,u.validateCustomStyleLayer=function(e){var t=[],n=e.id;return void 0===n&&t.push({message:"layers."+n+': missing required property "id"'}),void 0===e.render&&t.push({message:"layers."+n+': missing required method "render"'}),e.renderingMode&&"2d"!==e.renderingMode&&"3d"!==e.renderingMode&&t.push({message:"layers."+n+': property "renderingMode" must be either "2d" or "3d"'}),t},u.filterObject=x,u.mapObject=g,u.evented=Dn,u.makeRequest=ge,u.registerForPluginAvailability=function(e){return Mn?e({pluginURL:Mn,completionCallback:Rn}):Dn.once("pluginAvailable",e),e},u.ZoomHistory=On,u.getReferrer=de,u.createLayout=Nn,u.UniformMatrix4f=Gi,u.Uniform3f=Ni,u.Uniform1f=Di,u.Uniform1i=ji,u.Uniform2f=Fi,u.Uniform4f=Bi,u.create=ga,u.fromRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},u.transformMat3=function(e,t,n){var r=t[0],i=t[1],o=t[2];return e[0]=r*n[0]+i*n[3]+o*n[6],e[1]=r*n[1]+i*n[4]+o*n[7],e[2]=r*n[2]+i*n[5]+o*n[8],e},u.create$1=function(){var e=new Fo(16);return Fo!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},u.ortho=function(e,t,n,r,i,o,a){var s=1/(t-n),l=1/(r-i),u=1/(o-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+n)*s,e[13]=(i+r)*l,e[14]=(a+o)*u,e[15]=1,e},u.UniformColor=zi,u.clamp=l,u.StructArrayLayout2i4=Wr,u.StructArrayLayout2ui4=hi,u.ProgramConfiguration=$i,u.StructArrayLayout1ui2=fi,u.StructArrayLayout3ui6=pi,u.wrap=p,u.create$2=function(){var e=new Fo(4);return Fo!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e},u.rotate=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=r*l+o*s,e[1]=i*l+a*s,e[2]=r*-s+o*l,e[3]=i*-s+a*l,e},u.LngLat=qs,u.UnwrappedTileID=Ks,u.perspective=function(e,t,n,r,i){var o,a=1/Math.tan(t/2);return e[0]=a/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=i&&i!==1/0?(o=1/(r-i),e[10]=(i+r)*o,e[14]=2*i*r*o):(e[10]=-1,e[14]=-2*r),e},u.rotateX=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[4],a=t[5],s=t[6],l=t[7],u=t[8],c=t[9],p=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*i+u*r,e[5]=a*i+c*r,e[6]=s*i+p*r,e[7]=l*i+h*r,e[8]=u*i-o*r,e[9]=c*i-a*r,e[10]=p*i-s*r,e[11]=h*i-l*r,e},u.mercatorZfromAltitude=Su,u.invert=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8],p=t[9],h=t[10],f=t[11],d=t[12],g=t[13],m=t[14],y=t[15],v=n*s-r*a,_=n*l-i*a,b=n*u-o*a,x=r*l-i*s,w=r*u-o*s,S=i*u-o*l,E=c*g-p*d,P=c*m-h*d,C=c*y-f*d,k=p*m-h*g,T=p*y-f*g,A=h*y-f*m,O=v*A-_*T+b*k+x*C-w*P+S*E;return O?(O=1/O,e[0]=(s*A-l*T+u*k)*O,e[1]=(i*T-r*A-o*k)*O,e[2]=(g*S-m*w+y*x)*O,e[3]=(h*w-p*S-f*x)*O,e[4]=(l*C-a*A-u*P)*O,e[5]=(n*A-i*C+o*P)*O,e[6]=(m*b-d*S-y*_)*O,e[7]=(c*S-h*b+f*_)*O,e[8]=(a*T-s*C+u*E)*O,e[9]=(r*C-n*T-o*E)*O,e[10]=(d*w-g*b+y*v)*O,e[11]=(p*b-c*w-f*v)*O,e[12]=(s*P-a*k-l*E)*O,e[13]=(n*k-r*P+i*E)*O,e[14]=(g*_-d*x-m*v)*O,e[15]=(c*x-p*_+h*v)*O,e):null},u.ease=P,u.bezier=s,u.config=B,u.webpSupported=z,u.EvaluationParameters=Bn,u.version="0.53.1",u.setRTLTextPlugin=function(e,t){if(Ln)throw new Error("setRTLTextPlugin cannot be called multiple times.");Ln=!0,Mn=N.resolveURL(e),Rn=function(e){e?(Ln=!1,Mn=null,t&&t(e)):jn=!0},Dn.fire(new xe("pluginAvailable",{pluginURL:Mn,completionCallback:Rn}))},u.featureFilter=Er,u.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},u.Anchor=ls,u.GLYPH_PBF_BORDER=Us,u.distToSegmentSquared=ua,u.allowsLetterSpacing=function(e){for(var t=0,n=e;t<n.length;t+=1)if(!yn(n[t].charCodeAt(0)))return!1;return!0},u.shapeText=function(e,t,n,r,i,o,a,s,l,u,c){var p=ll.fromFeature(e,n);c===sl.vertical&&p.verticalizePunctuation();var h,f=[],d={positionedGlyphs:f,text:p,top:l[1],bottom:l[1],left:l[0],right:l[0],writingMode:c},g=Fn.processBidirectionalText,m=Fn.processStyledBidirectionalText;if(g&&1===p.sections.length){h=[];for(var y=0,v=g(p.toString(),Hu(p,s,r,t));y<v.length;y+=1){var _=v[y],b=new ll;b.text=_,b.sections=p.sections;for(var x=0;x<_.length;x++)b.sectionIndex.push(0);h.push(b)}}else if(m){h=[];for(var w=0,S=m(p.text,p.sectionIndex,Hu(p,s,r,t));w<S.length;w+=1){var E=S[w],P=new ll;P.text=E[0],P.sectionIndex=E[1],P.sections=p.sections,h.push(P)}}else h=function(e,t){for(var n=[],r=e.text,i=0,o=0,a=t;o<a.length;o+=1){var s=a[o];n.push(e.substring(i,s)),i=s}return i<r.length&&n.push(e.substring(i,r.length)),n}(p,Hu(p,s,r,t));return function(e,t,n,r,i,o,a,s,l){for(var u=0,c=-17,p=0,h=e.positionedGlyphs,f="right"===o?1:"left"===o?0:.5,d=0,g=n;d<g.length;d+=1){var m=g[d];m.trim();var y=m.getMaxScale();if(m.length()){for(var v=h.length,_=0;_<m.length();_++){var b=m.getSection(_),x=m.getCharCode(_),w=24*(y-b.scale),S=t[b.fontStack],E=S&&S[x];E&&(dn(x)&&a!==sl.horizontal?(h.push({glyph:x,x:u,y:w,vertical:!0,scale:b.scale,fontStack:b.fontStack}),u+=l*b.scale+s):(h.push({glyph:x,x:u,y:c+w,vertical:!1,scale:b.scale,fontStack:b.fontStack}),u+=E.metrics.advance*b.scale+s))}if(h.length!==v){var P=u-s;p=Math.max(P,p),Ju(h,t,v,h.length-1,f)}u=0,c+=r*y}else c+=r}var C=Yu(i),k=C.horizontalAlign,T=C.verticalAlign;!function(e,t,n,r,i,o,a){for(var s=(t-n)*i,l=(-r*a+.5)*o,u=0;u<e.length;u++)e[u].x+=s,e[u].y+=l}(h,f,k,T,p,r,n.length);var A=c- -17;e.top+=-T*A,e.bottom=e.top+A,e.left+=-k*p,e.right=e.left+p}(d,t,h,i,o,a,c,s,u),!!f.length&&(d.text=d.text.toString(),d)},u.allowsVerticalWritingMode=fn,u.shapeIcon=function(e,t,n){var r=Yu(n),i=r.horizontalAlign,o=r.verticalAlign,a=t[0],s=t[1],l=a-e.displaySize[0]*i,u=l+e.displaySize[0],c=s-e.displaySize[1]*o;return{image:e,top:c,bottom:c+e.displaySize[1],left:l,right:u}},u.classifyRings=So,u.SIZE_PACK_FACTOR=256,u.SymbolBucket=ds,u.register=sn,u.CollisionBoxArray=yi,u.DictionaryCoder=tl,u.FeatureIndex=ol,u.ImageAtlas=Os,u.LineBucket=Xa,u.FillBucket=va,u.FillExtrusionBucket=Ta,u.mvt=Ba,u.Protobuf=Bs,u.DEMData=Ys,u.vectorTile=Ba,u.Point$1=E,u.pbf=Bs,u.createExpression=dr,u.plugin=Fn}),define(0,function(n){function t(e){var n=typeof e;if("number"===n||"boolean"===n||"string"===n||null==e)return JSON.stringify(e);if(Array.isArray(e)){for(var r="[",i=0,o=e;i<o.length;i+=1)r+=t(o[i])+",";return r+"]"}for(var a=Object.keys(e).sort(),s="{",l=0;l<a.length;l++)s+=JSON.stringify(a[l])+":"+t(e[a[l]])+",";return s+"}"}function r(e){for(var r="",i=0,o=n.refProperties;i<o.length;i+=1)r+="/"+t(e[o[i]]);return r}var c=function(e){e&&this.replace(e)};function o(e,t,n,r,i){if(void 0===t.segment)return!0;for(var o=t,a=t.segment+1,s=0;s>-n/2;){if(--a<0)return!1;s-=e[a].dist(o),o=e[a]}s+=e[a].dist(e[a+1]),a++;for(var l=[],u=0;s<n/2;){var c=e[a-1],p=e[a],h=e[a+1];if(!h)return!1;var f=c.angleTo(p)-p.angleTo(h);for(f=Math.abs((f+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:s,angleDelta:f}),u+=f;s-l[0].distance>r;)u-=l.shift().angleDelta;if(u>i)return!1;a++,s+=p.dist(h)}return!0}function i(e){for(var t=0,n=0;n<e.length-1;n++)t+=e[n].dist(e[n+1]);return t}function a(e,t,n){return e?.6*t*n:0}function s(e,t){return Math.max(e?e.right-e.left:0,t?t.right-t.left:0)}function l(e,t,r,l,u,c){for(var p=a(r,u,c),h=s(r,l)*c,f=0,d=i(e)/2,g=0;g<e.length-1;g++){var m=e[g],y=e[g+1],v=m.dist(y);if(f+v>d){var _=(d-f)/v,b=n.number(m.x,y.x,_),x=n.number(m.y,y.y,_),w=new n.Anchor(b,x,y.angleTo(m),g);return w._round(),!p||o(e,w,h,p,t)?w:void 0}f+=v}}function u(e,t,r,l,u,c,p,h,f){var d=a(l,c,p),g=s(l,u),m=g*p,y=0===e[0].x||e[0].x===f||0===e[0].y||e[0].y===f;return t-m<t/4&&(t=m+t/4),function t(e,r,a,s,l,u,c,p,h){for(var f=u/2,d=i(e),g=0,m=r-a,y=[],v=0;v<e.length-1;v++){for(var _=e[v],b=e[v+1],x=_.dist(b),w=b.angleTo(_);m+a<g+x;){var S=((m+=a)-g)/x,E=n.number(_.x,b.x,S),P=n.number(_.y,b.y,S);if(E>=0&&E<h&&P>=0&&P<h&&m-f>=0&&m+f<=d){var C=new n.Anchor(E,P,w,v);C._round(),s&&!o(e,C,u,s,l)||y.push(C)}}g+=x}return p||y.length||c||(y=t(e,g/2,a,s,l,u,c,!0,h)),y}(e,y?t/2*h%t:(g/2+2*c)*p*h%t,t,d,r,m,y,!1,f)}c.prototype.replace=function(e){this._layerConfigs={},this._layers={},this.update(e,[])},c.prototype.update=function(e,t){for(var i=this,o=0,a=e;o<a.length;o+=1){var s=a[o];this._layerConfigs[s.id]=s;var l=this._layers[s.id]=n.createStyleLayer(s);l._featureFilter=n.featureFilter(l.filter)}for(var u=0,c=t;u<c.length;u+=1){var p=c[u];delete this._layerConfigs[p],delete this._layers[p]}this.familiesBySource={};for(var h=0,f=function(e){for(var t={},n=0;n<e.length;n++){var i=r(e[n]),o=t[i];o||(o=t[i]=[]),o.push(e[n])}var a=[];for(var s in t)a.push(t[s]);return a}(n.values(this._layerConfigs));h<f.length;h+=1){var d=f[h].map(function(e){return i._layers[e.id]}),g=d[0];if("none"!==g.visibility){var m=g.source||"",y=this.familiesBySource[m];y||(y=this.familiesBySource[m]={});var v=g.sourceLayer||"_geojsonTileLayer",_=y[v];_||(_=y[v]=[]),_.push(d)}}};var h=function(e,t,r,i,o,a,s,l,u,c,p,h){var f=s.top*l-u,d=s.bottom*l+u,g=s.left*l-u,m=s.right*l+u;if(this.boxStartIndex=e.length,c){var y=d-f,v=m-g;y>0&&(y=Math.max(10*l,y),this._addLineCollisionCircles(e,t,r,r.segment,v,y,i,o,a,p))}else{if(h){var _=new n.Point(g,f),b=new n.Point(m,f),x=new n.Point(g,d),w=new n.Point(m,d),S=h*Math.PI/180;_._rotate(S),b._rotate(S),x._rotate(S),w._rotate(S),g=Math.min(_.x,b.x,x.x,w.x),m=Math.max(_.x,b.x,x.x,w.x),f=Math.min(_.y,b.y,x.y,w.y),d=Math.max(_.y,b.y,x.y,w.y)}e.emplaceBack(r.x,r.y,g,f,m,d,i,o,a,0,0)}this.boxEndIndex=e.length};h.prototype._addLineCollisionCircles=function(e,t,n,r,i,o,a,s,l,u){var c=o/2,p=Math.floor(i/c)||1,h=1+.4*Math.log(u)/Math.LN2,f=Math.floor(p*h/2),d=-o/2,g=n,m=r+1,y=d,v=-i/2,_=v-i/4;do{if(--m<0){if(y>v)return;m=0;break}y-=t[m].dist(g),g=t[m]}while(y>_);for(var b=t[m].dist(t[m+1]),x=-f;x<p+f;x++){var w=x*c,S=v+w;if(w<0&&(S+=w),w>i&&(S+=w-i),!(S<y)){for(;y+b<S;){if(y+=b,++m+1>=t.length)return;b=t[m].dist(t[m+1])}var E=S-y,P=t[m],C=t[m+1].sub(P)._unit()._mult(E)._add(P)._round(),k=Math.abs(S-d)<c?0:.8*(S-d);e.emplaceBack(C.x,C.y,-o/2,-o/2,o/2,o/2,a,s,l,o/2,k)}}};var m=function(e,t){if(void 0===e&&(e=[]),void 0===t&&(t=p),this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(var n=(this.length>>1)-1;n>=0;n--)this._down(n)};function p(e,t){return e<t?-1:e>t?1:0}function f(e,t,r){void 0===t&&(t=1),void 0===r&&(r=!1);for(var i=1/0,o=1/0,a=-1/0,s=-1/0,l=e[0],u=0;u<l.length;u++){var c=l[u];(!u||c.x<i)&&(i=c.x),(!u||c.y<o)&&(o=c.y),(!u||c.x>a)&&(a=c.x),(!u||c.y>s)&&(s=c.y)}var p=a-i,h=s-o,f=Math.min(p,h),y=f/2,v=new m([],d);if(0===f)return new n.Point(i,o);for(var _=i;_<a;_+=f)for(var b=o;b<s;b+=f)v.push(new g(_+y,b+y,y,e));for(var x=function(e){for(var t=0,n=0,r=0,i=e[0],o=0,a=i.length,s=a-1;o<a;s=o++){var l=i[o],u=i[s],c=l.x*u.y-u.x*l.y;n+=(l.x+u.x)*c,r+=(l.y+u.y)*c,t+=3*c}return new g(n/t,r/t,0,e)}(e),w=v.length;v.length;){var S=v.pop();(S.d>x.d||!x.d)&&(x=S,r&&console.log("found best %d after %d probes",Math.round(1e4*S.d)/1e4,w)),S.max-x.d<=t||(y=S.h/2,v.push(new g(S.p.x-y,S.p.y-y,y,e)),v.push(new g(S.p.x+y,S.p.y-y,y,e)),v.push(new g(S.p.x-y,S.p.y+y,y,e)),v.push(new g(S.p.x+y,S.p.y+y,y,e)),w+=4)}return r&&(console.log("num probes: "+w),console.log("best distance: "+x.d)),x.p}function d(e,t){return t.max-e.max}function g(e,t,r,i){this.p=new n.Point(e,t),this.h=r,this.d=function(e,t){for(var r=!1,i=1/0,o=0;o<t.length;o++)for(var a=t[o],s=0,l=a.length,u=l-1;s<l;u=s++){var c=a[s],p=a[u];c.y>e.y!=p.y>e.y&&e.x<(p.x-c.x)*(e.y-c.y)/(p.y-c.y)+c.x&&(r=!r),i=Math.min(i,n.distToSegmentSquared(e,c,p))}return(r?1:-1)*Math.sqrt(i)}(this.p,i),this.max=this.d+this.h*Math.SQRT2}m.prototype.push=function(e){this.data.push(e),this.length++,this._up(this.length-1)},m.prototype.pop=function(){if(0!==this.length){var e=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),e}},m.prototype.peek=function(){return this.data[0]},m.prototype._up=function(e){for(var t=this.data,n=this.compare,r=t[e];e>0;){var i=e-1>>1,o=t[i];if(n(r,o)>=0)break;t[e]=o,e=i}t[e]=r},m.prototype._down=function(e){for(var t=this.data,n=this.compare,r=this.length>>1,i=t[e];e<r;){var o=1+(e<<1),a=t[o],s=o+1;if(s<this.length&&n(t[s],a)<0&&(o=s,a=t[s]),n(a,i)>=0)break;t[e]=a,e=o}t[e]=i};var y=n.createCommonjsModule(function(e){e.exports=function(e,t){var n,r,i,o,a,s,l,u;for(n=3&e.length,r=e.length-n,i=t,a=3432918353,s=461845907,u=0;u<r;)l=255&e.charCodeAt(u)|(255&e.charCodeAt(++u))<<8|(255&e.charCodeAt(++u))<<16|(255&e.charCodeAt(++u))<<24,++u,i=27492+(65535&(o=5*(65535&(i=(i^=l=(65535&(l=(l=(65535&l)*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295)<<13|i>>>19))+((5*(i>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(l=0,n){case 3:l^=(255&e.charCodeAt(u+2))<<16;case 2:l^=(255&e.charCodeAt(u+1))<<8;case 1:i^=l=(65535&(l=(l=(65535&(l^=255&e.charCodeAt(u)))*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295}return i^=e.length,i=2246822507*(65535&(i^=i>>>16))+((2246822507*(i>>>16)&65535)<<16)&4294967295,i=3266489909*(65535&(i^=i>>>13))+((3266489909*(i>>>16)&65535)<<16)&4294967295,(i^=i>>>16)>>>0}}),v=n.createCommonjsModule(function(e){e.exports=function(e,t){for(var n,r=e.length,i=t^r,o=0;r>=4;)n=1540483477*(65535&(n=255&e.charCodeAt(o)|(255&e.charCodeAt(++o))<<8|(255&e.charCodeAt(++o))<<16|(255&e.charCodeAt(++o))<<24))+((1540483477*(n>>>16)&65535)<<16),i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16)^(n=1540483477*(65535&(n^=n>>>24))+((1540483477*(n>>>16)&65535)<<16)),r-=4,++o;switch(r){case 3:i^=(255&e.charCodeAt(o+2))<<16;case 2:i^=(255&e.charCodeAt(o+1))<<8;case 1:i=1540483477*(65535&(i^=255&e.charCodeAt(o)))+((1540483477*(i>>>16)&65535)<<16)}return i=1540483477*(65535&(i^=i>>>13))+((1540483477*(i>>>16)&65535)<<16),(i^=i>>>15)>>>0}}),_=y,x=y,w=v;function M(e,t,r,i,o,a){e.createArrays();var s=512*e.overscaling;e.tilePixelRatio=n.EXTENT/s,e.compareText={},e.iconsNeedLinear=!1;var l=e.layers[0].layout,u=e.layers[0]._unevaluatedLayout._values,c={};if("composite"===e.textSizeData.functionType){var p=e.textSizeData.zoomRange,h=p.min,f=p.max;c.compositeTextSizes=[u["text-size"].possiblyEvaluate(new n.EvaluationParameters(h)),u["text-size"].possiblyEvaluate(new n.EvaluationParameters(f))]}if("composite"===e.iconSizeData.functionType){var d=e.iconSizeData.zoomRange,g=d.min,m=d.max;c.compositeIconSizes=[u["icon-size"].possiblyEvaluate(new n.EvaluationParameters(g)),u["icon-size"].possiblyEvaluate(new n.EvaluationParameters(m))]}c.layoutTextSize=u["text-size"].possiblyEvaluate(new n.EvaluationParameters(e.zoom+1)),c.layoutIconSize=u["icon-size"].possiblyEvaluate(new n.EvaluationParameters(e.zoom+1)),c.textMaxSize=u["text-size"].possiblyEvaluate(new n.EvaluationParameters(18));for(var y=24*l.get("text-line-height"),v="map"===l.get("text-rotation-alignment")&&"point"!==l.get("symbol-placement"),_=l.get("text-keep-upright"),b=0,x=e.features;b<x.length;b+=1){var w=x[b],E=l.get("text-font").evaluate(w,{}).join(","),P=r,C={},k=w.text;if(k){var T=k.toString(),A=l.get("text-offset").evaluate(w,{}).map(function(e){return 24*e}),O=24*l.get("text-letter-spacing").evaluate(w,{}),I=n.allowsLetterSpacing(T)?O:0,R=l.get("text-anchor").evaluate(w,{}),L=l.get("text-justify").evaluate(w,{}),M="point"===l.get("symbol-placement")?24*l.get("text-max-width").evaluate(w,{}):0;C.horizontal=n.shapeText(k,t,E,M,y,R,L,I,A,24,n.WritingMode.horizontal),n.allowsVerticalWritingMode(T)&&v&&_&&(C.vertical=n.shapeText(k,t,E,M,y,R,L,I,A,24,n.WritingMode.vertical))}var j=void 0;if(w.icon){var D=i[w.icon];D&&(j=n.shapeIcon(o[w.icon],l.get("icon-offset").evaluate(w,{}),l.get("icon-anchor").evaluate(w,{})),void 0===e.sdfIcons?e.sdfIcons=D.sdf:e.sdfIcons!==D.sdf&&n.warnOnce("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),D.pixelRatio!==e.pixelRatio?e.iconsNeedLinear=!0:0!==l.get("icon-rotate").constantOr(1)&&(e.iconsNeedLinear=!0))}(C.horizontal||j)&&S(e,w,C,j,P,c)}a&&e.generateCollisionDebugBuffers()}function S(e,t,r,i,o,a){var s=a.layoutTextSize.evaluate(t,{}),c=a.layoutIconSize.evaluate(t,{}),p=a.textMaxSize.evaluate(t,{});void 0===p&&(p=s);var d=e.layers[0].layout,g=d.get("text-offset").evaluate(t,{}),m=d.get("icon-offset").evaluate(t,{}),y=s/24,v=e.tilePixelRatio*y,x=e.tilePixelRatio*p/24,w=e.tilePixelRatio*c,S=e.tilePixelRatio*d.get("symbol-spacing"),E=d.get("text-padding")*e.tilePixelRatio,k=d.get("icon-padding")*e.tilePixelRatio,T=d.get("text-max-angle")/180*Math.PI,A="map"===d.get("text-rotation-alignment")&&"point"!==d.get("symbol-placement"),O="map"===d.get("icon-rotation-alignment")&&"point"!==d.get("symbol-placement"),I=d.get("symbol-placement"),R=S/2,L=function(s,l){l.x<0||l.x>=n.EXTENT||l.y<0||l.y>=n.EXTENT||function(e,t,r,i,o,a,s,l,u,c,p,f,d,g,m,y,v,b,x,w,S){var E,k,T=e.addToLineVertexArray(t,r),A=0,O=0,I=0,R=_(i.horizontal?i.horizontal.text:""),L=[];if(i.horizontal){var M=a.layout.get("text-rotate").evaluate(x,{});E=new h(s,r,t,l,u,c,i.horizontal,p,f,d,e.overscaling,M),O+=P(e,t,i.horizontal,a,d,x,g,T,i.vertical?n.WritingMode.horizontal:n.WritingMode.horizontalOnly,L,w,S),i.vertical&&(I+=P(e,t,i.vertical,a,d,x,g,T,n.WritingMode.vertical,L,w,S))}var j=E?E.boxStartIndex:e.collisionBoxArray.length,D=E?E.boxEndIndex:e.collisionBoxArray.length;if(o){var F=function(e,t,r,i,o,a){var s,l,u,c,p=t.image,h=r.layout,f=t.top-1/p.pixelRatio,d=t.left-1/p.pixelRatio,g=t.bottom+1/p.pixelRatio,m=t.right+1/p.pixelRatio;if("none"!==h.get("icon-text-fit")&&o){var y=m-d,v=g-f,_=h.get("text-size").evaluate(a,{})/24,b=o.left*_,x=o.right*_,w=o.top*_,S=x-b,E=o.bottom*_-w,P=h.get("icon-text-fit-padding")[0],C=h.get("icon-text-fit-padding")[1],k=h.get("icon-text-fit-padding")[2],T=h.get("icon-text-fit-padding")[3],A="width"===h.get("icon-text-fit")?.5*(E-v):0,O="height"===h.get("icon-text-fit")?.5*(S-y):0,I="width"===h.get("icon-text-fit")||"both"===h.get("icon-text-fit")?S:y,R="height"===h.get("icon-text-fit")||"both"===h.get("icon-text-fit")?E:v;s=new n.Point(b+O-T,w+A-P),l=new n.Point(b+O+C+I,w+A-P),u=new n.Point(b+O+C+I,w+A+k+R),c=new n.Point(b+O-T,w+A+k+R)}else s=new n.Point(d,f),l=new n.Point(m,f),u=new n.Point(m,g),c=new n.Point(d,g);var L=r.layout.get("icon-rotate").evaluate(a,{})*Math.PI/180;if(L){var M=Math.sin(L),j=Math.cos(L),D=[j,-M,M,j];s._matMult(D),l._matMult(D),c._matMult(D),u._matMult(D)}return[{tl:s,tr:l,bl:c,br:u,tex:p.paddedRect,writingMode:void 0,glyphOffset:[0,0]}]}(0,o,a,0,i.horizontal,x),N=a.layout.get("icon-rotate").evaluate(x,{});k=new h(s,r,t,l,u,c,o,m,y,!1,e.overscaling,N),A=4*F.length;var B=e.iconSizeData,z=null;"source"===B.functionType?(z=[n.SIZE_PACK_FACTOR*a.layout.get("icon-size").evaluate(x,{})])[0]>C&&n.warnOnce(e.layerIds[0]+': Value for "icon-size" is >= 256. Reduce your "icon-size".'):"composite"===B.functionType&&((z=[n.SIZE_PACK_FACTOR*S.compositeIconSizes[0].evaluate(x,{}),n.SIZE_PACK_FACTOR*S.compositeIconSizes[1].evaluate(x,{})])[0]>C||z[1]>C)&&n.warnOnce(e.layerIds[0]+': Value for "icon-size" is >= 256. Reduce your "icon-size".'),e.addSymbols(e.icon,F,z,b,v,x,!1,t,T.lineStartIndex,T.lineLength)}var U=k?k.boxStartIndex:e.collisionBoxArray.length,V=k?k.boxEndIndex:e.collisionBoxArray.length;e.glyphOffsetArray.length>=n.SymbolBucket.MAX_GLYPHS&&n.warnOnce("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),e.symbolInstances.emplaceBack(t.x,t.y,L.length>0?L[0]:-1,L.length>1?L[1]:-1,R,j,D,U,V,l,O,I,A,0)}(e,l,s,r,i,e.layers[0],e.collisionBoxArray,t.index,t.sourceLayerIndex,e.index,v,E,A,g,w,k,O,m,t,o,a)};if("line"===I)for(var M=0,j=function(e,t,r,i,o){for(var a=[],s=0;s<e.length;s++)for(var l=e[s],u=void 0,c=0;c<l.length-1;c++){var p=l[c],h=l[c+1];p.x<0&&h.x<0||(p.x<0?p=new n.Point(0,p.y+(h.y-p.y)*((0-p.x)/(h.x-p.x)))._round():h.x<0&&(h=new n.Point(0,p.y+(h.y-p.y)*((0-p.x)/(h.x-p.x)))._round()),p.y<0&&h.y<0||(p.y<0?p=new n.Point(p.x+(h.x-p.x)*((0-p.y)/(h.y-p.y)),0)._round():h.y<0&&(h=new n.Point(p.x+(h.x-p.x)*((0-p.y)/(h.y-p.y)),0)._round()),p.x>=i&&h.x>=i||(p.x>=i?p=new n.Point(i,p.y+(h.y-p.y)*((i-p.x)/(h.x-p.x)))._round():h.x>=i&&(h=new n.Point(i,p.y+(h.y-p.y)*((i-p.x)/(h.x-p.x)))._round()),p.y>=o&&h.y>=o||(p.y>=o?p=new n.Point(p.x+(h.x-p.x)*((o-p.y)/(h.y-p.y)),o)._round():h.y>=o&&(h=new n.Point(p.x+(h.x-p.x)*((o-p.y)/(h.y-p.y)),o)._round()),u&&p.equals(u[u.length-1])||(u=[p],a.push(u)),u.push(h)))))}return a}(t.geometry,0,0,n.EXTENT,n.EXTENT);M<j.length;M+=1)for(var D=j[M],F=0,N=u(D,S,T,r.vertical||r.horizontal,i,24,x,e.overscaling,n.EXTENT);F<N.length;F+=1){var B=N[F],z=r.horizontal;z&&b(e,z.text,R,B)||L(D,B)}else if("line-center"===I)for(var U=0,V=t.geometry;U<V.length;U+=1){var G=V[U];if(G.length>1){var W=l(G,T,r.vertical||r.horizontal,i,24,x);W&&L(G,W)}}else if("Polygon"===t.type)for(var q=0,H=n.classifyRings(t.geometry,0);q<H.length;q+=1){var X=H[q],K=f(X,16);L(X[0],new n.Anchor(K.x,K.y,0))}else if("LineString"===t.type)for(var Z=0,Y=t.geometry;Z<Y.length;Z+=1){var J=Y[Z];L(J,new n.Anchor(J[0].x,J[0].y,0))}else if("Point"===t.type)for(var Q=0,$=t.geometry;Q<$.length;Q+=1)for(var ee=0,te=$[Q];ee<te.length;ee+=1){var ne=te[ee];L([ne],new n.Anchor(ne.x,ne.y,0))}}_.murmur3=x,_.murmur2=w;var C=65535;function P(e,t,r,i,o,a,s,l,u,c,p,h){var f=function(e,t,r,i,o,a){for(var s=r.layout.get("text-rotate").evaluate(o,{})*Math.PI/180,l=r.layout.get("text-offset").evaluate(o,{}).map(function(e){return 24*e}),u=t.positionedGlyphs,c=[],p=0;p<u.length;p++){var h=u[p],f=a[h.fontStack],d=f&&f[h.glyph];if(d){var g=d.rect;if(g){var m=n.GLYPH_PBF_BORDER+1,y=d.metrics.advance*h.scale/2,v=i?[h.x+y,h.y]:[0,0],_=i?[0,0]:[h.x+y+l[0],h.y+l[1]],b=(d.metrics.left-m)*h.scale-y+_[0],x=(-d.metrics.top-m)*h.scale+_[1],w=b+g.w*h.scale,S=x+g.h*h.scale,E=new n.Point(b,x),P=new n.Point(w,x),C=new n.Point(b,S),k=new n.Point(w,S);if(i&&h.vertical){var T=new n.Point(-y,y),A=-Math.PI/2,O=new n.Point(5,0);E._rotateAround(A,T)._add(O),P._rotateAround(A,T)._add(O),C._rotateAround(A,T)._add(O),k._rotateAround(A,T)._add(O)}if(s){var I=Math.sin(s),R=Math.cos(s),L=[R,-I,I,R];E._matMult(L),P._matMult(L),C._matMult(L),k._matMult(L)}c.push({tl:E,tr:P,bl:C,br:k,tex:g,writingMode:t.writingMode,glyphOffset:v})}}}return c}(0,r,i,o,a,p),d=e.textSizeData,g=null;return"source"===d.functionType?(g=[n.SIZE_PACK_FACTOR*i.layout.get("text-size").evaluate(a,{})])[0]>C&&n.warnOnce(e.layerIds[0]+': Value for "text-size" is >= 256. Reduce your "text-size".'):"composite"===d.functionType&&((g=[n.SIZE_PACK_FACTOR*h.compositeTextSizes[0].evaluate(a,{}),n.SIZE_PACK_FACTOR*h.compositeTextSizes[1].evaluate(a,{})])[0]>C||g[1]>C)&&n.warnOnce(e.layerIds[0]+': Value for "text-size" is >= 256. Reduce your "text-size".'),e.addSymbols(e.text,f,g,s,o,a,u,t,l.lineStartIndex,l.lineLength),c.push(e.text.placedSymbolArray.length-1),4*f.length}function b(e,t,n,r){var i=e.compareText;if(t in i){for(var o=i[t],a=o.length-1;a>=0;a--)if(r.dist(o[a])<n)return!0}else i[t]=[];return i[t].push(r),!1}var T=function(e){var t={},r=[];for(var i in e){var o=e[i],a=t[i]={};for(var s in o){var l=o[+s];if(l&&0!==l.bitmap.width&&0!==l.bitmap.height){var u={x:0,y:0,w:l.bitmap.width+2,h:l.bitmap.height+2};r.push(u),a[s]={rect:u,metrics:l.metrics}}}}var c=n.potpack(r),p=c.w,h=c.h,f=new n.AlphaImage({width:p||1,height:h||1});for(var d in e){var g=e[d];for(var m in g){var y=g[+m];if(y&&0!==y.bitmap.width&&0!==y.bitmap.height){var v=t[d][m].rect;n.AlphaImage.copy(y.bitmap,f,{x:0,y:0},{x:v.x+1,y:v.y+1},y.bitmap)}}}this.image=f,this.positions=t};n.register("GlyphAtlas",T);var O=function(e){this.tileID=new n.OverscaledTileID(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.uid=e.uid,this.zoom=e.zoom,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming,this.returnDependencies=!!e.returnDependencies};function k(e,t){for(var r=new n.EvaluationParameters(t),i=0,o=e;i<o.length;i+=1)o[i].recalculate(r)}O.prototype.parse=function(e,t,r,i){var o=this;this.status="parsing",this.data=e,this.collisionBoxArray=new n.CollisionBoxArray;var a=new n.DictionaryCoder(Object.keys(e.layers).sort()),s=new n.FeatureIndex(this.tileID);s.bucketLayerIDs=[];var l,u,c,p,h={},f={featureIndex:s,iconDependencies:{},patternDependencies:{},glyphDependencies:{}},d=t.familiesBySource[this.source];for(var g in d){var m=e.layers[g];if(m){1===m.version&&n.warnOnce('Vector tile source "'+this.source+'" layer "'+g+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var y=a.encode(g),v=[],_=0;_<m.length;_++){var b=m.feature(_);v.push({feature:b,index:_,sourceLayerIndex:y})}for(var x=0,w=d[g];x<w.length;x+=1){var S=w[x],P=S[0];P.minzoom&&this.zoom<Math.floor(P.minzoom)||P.maxzoom&&this.zoom>=P.maxzoom||"none"!==P.visibility&&(k(S,this.zoom),(h[P.id]=P.createBucket({index:s.bucketLayerIDs.length,layers:S,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:y,sourceID:this.source})).populate(v,f),s.bucketLayerIDs.push(S.map(function(e){return e.id})))}}}var C=n.mapObject(f.glyphDependencies,function(e){return Object.keys(e).map(Number)});Object.keys(C).length?r.send("getGlyphs",{uid:this.uid,stacks:C},function(e,t){l||(l=e,u=t,E.call(o))}):u={};var A=Object.keys(f.iconDependencies);A.length?r.send("getImages",{icons:A},function(e,t){l||(l=e,c=t,E.call(o))}):c={};var O=Object.keys(f.patternDependencies);function E(){if(l)return i(l);if(u&&c&&p){var e=new T(u),t=new n.ImageAtlas(c,p);for(var r in h){var o=h[r];o instanceof n.SymbolBucket?(k(o.layers,this.zoom),M(o,u,e.positions,c,t.iconPositions,this.showCollisionBoxes)):o.hasPattern&&(o instanceof n.LineBucket||o instanceof n.FillBucket||o instanceof n.FillExtrusionBucket)&&(k(o.layers,this.zoom),o.addFeatures(f,t.patternPositions))}this.status="done",i(null,{buckets:n.values(h).filter(function(e){return!e.isEmpty()}),featureIndex:s,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:e.image,imageAtlas:t,glyphMap:this.returnDependencies?u:null,iconMap:this.returnDependencies?c:null,glyphPositions:this.returnDependencies?e.positions:null})}}O.length?r.send("getImages",{icons:O},function(e,t){l||(l=e,p=t,E.call(o))}):p={},E.call(this)};var I="undefined"!=typeof performance,L={getEntriesByName:function(e){return!!(I&&performance&&performance.getEntriesByName)&&performance.getEntriesByName(e)},mark:function(e){return!!(I&&performance&&performance.mark)&&performance.mark(e)},measure:function(e,t,n){return!!(I&&performance&&performance.measure)&&performance.measure(e,t,n)},clearMarks:function(e){return!!(I&&performance&&performance.clearMarks)&&performance.clearMarks(e)},clearMeasures:function(e){return!!(I&&performance&&performance.clearMeasures)&&performance.clearMeasures(e)}},D=function(e){this._marks={start:[e.url,"start"].join("#"),end:[e.url,"end"].join("#"),measure:e.url.toString()},L.mark(this._marks.start)};function A(e,t){var r=n.getArrayBuffer(e.request,function(e,r,i,o){e?t(e):r&&t(null,{vectorTile:new n.mvt.VectorTile(new n.Protobuf(r)),rawData:r,cacheControl:i,expires:o})});return function(){r.cancel(),t()}}D.prototype.finish=function(){L.mark(this._marks.end);var e=L.getEntriesByName(this._marks.measure);return 0===e.length&&(L.measure(this._marks.measure,this._marks.start,this._marks.end),e=L.getEntriesByName(this._marks.measure),L.clearMarks(this._marks.start),L.clearMarks(this._marks.end),L.clearMeasures(this._marks.measure)),e},L.Performance=D;var B=function(e,t,n){this.actor=e,this.layerIndex=t,this.loadVectorData=n||A,this.loading={},this.loaded={}};B.prototype.loadTile=function(e,t){var r=this,i=e.uid;this.loading||(this.loading={});var o=!!(e&&e.request&&e.request.collectResourceTiming)&&new L.Performance(e.request),a=this.loading[i]=new O(e);a.abort=this.loadVectorData(e,function(e,s){if(delete r.loading[i],e||!s)return a.status="done",r.loaded[i]=a,t(e);var l=s.rawData,u={};s.expires&&(u.expires=s.expires),s.cacheControl&&(u.cacheControl=s.cacheControl);var c={};if(o){var p=o.finish();p&&(c.resourceTiming=JSON.parse(JSON.stringify(p)))}a.vectorTile=s.vectorTile,a.parse(s.vectorTile,r.layerIndex,r.actor,function(e,r){if(e||!r)return t(e);t(null,n.extend({rawTileData:l.slice(0)},r,u,c))}),r.loaded=r.loaded||{},r.loaded[i]=a})},B.prototype.reloadTile=function(e,t){var n=this.loaded,r=e.uid,i=this;if(n&&n[r]){var o=n[r];o.showCollisionBoxes=e.showCollisionBoxes;var a=function(e,n){var r=o.reloadCallback;r&&(delete o.reloadCallback,o.parse(o.vectorTile,i.layerIndex,i.actor,r)),t(e,n)};"parsing"===o.status?o.reloadCallback=a:"done"===o.status&&(o.vectorTile?o.parse(o.vectorTile,this.layerIndex,this.actor,a):a())}},B.prototype.abortTile=function(e,t){var n=this.loading,r=e.uid;n&&n[r]&&n[r].abort&&(n[r].abort(),delete n[r]),t()},B.prototype.removeTile=function(e,t){var n=this.loaded,r=e.uid;n&&n[r]&&delete n[r],t()};var z=function(){this.loaded={}};z.prototype.loadTile=function(e,t){var r=e.uid,i=e.encoding,o=e.rawImageData,a=new n.DEMData(r,o,i);this.loaded=this.loaded||{},this.loaded[r]=a,t(null,a)},z.prototype.removeTile=function(e){var t=this.loaded,n=e.uid;t&&t[n]&&delete t[n]};var V={RADIUS:6378137,FLATTENING:1/298.257223563,POLAR_RADIUS:6356752.3142};function N(e){var t=0;if(e&&e.length>0){t+=Math.abs(R(e[0]));for(var n=1;n<e.length;n++)t-=Math.abs(R(e[n]))}return t}function R(e){var t,n,r,i,o,a,s=0,l=e.length;if(l>2){for(a=0;a<l;a++)a===l-2?(r=l-2,i=l-1,o=0):a===l-1?(r=l-1,i=0,o=1):(r=a,i=a+1,o=a+2),t=e[r],n=e[i],s+=(F(e[o][0])-F(t[0]))*Math.sin(F(n[1]));s=s*V.RADIUS*V.RADIUS/2}return s}function F(e){return e*Math.PI/180}var W={geometry:function e(t){var n,r=0;switch(t.type){case"Polygon":return N(t.coordinates);case"MultiPolygon":for(n=0;n<t.coordinates.length;n++)r+=N(t.coordinates[n]);return r;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(n=0;n<t.geometries.length;n++)r+=e(t.geometries[n]);return r}},ring:R},q=function e(t,n){switch(t&&t.type||null){case"FeatureCollection":return t.features=t.features.map(j(e,n)),t;case"GeometryCollection":return t.geometries=t.geometries.map(j(e,n)),t;case"Feature":return t.geometry=e(t.geometry,n),t;case"Polygon":case"MultiPolygon":return function(e,t){return"Polygon"===e.type?e.coordinates=G(e.coordinates,t):"MultiPolygon"===e.type&&(e.coordinates=e.coordinates.map(j(G,t))),e}(t,n);default:return t}};function j(e,t){return function(n){return e(n,t)}}function G(e,t){t=!!t,e[0]=J(e[0],t);for(var n=1;n<e.length;n++)e[n]=J(e[n],!t);return e}function J(e,t){return function(e){return W.ring(e)>=0}(e)===t?e:e.reverse()}var H=n.mvt.VectorTileFeature.prototype.toGeoJSON,X=function(e){this._feature=e,this.extent=n.EXTENT,this.type=e.type,this.properties=e.tags,"id"in e&&!isNaN(e.id)&&(this.id=parseInt(e.id,10))};X.prototype.loadGeometry=function(){if(1===this._feature.type){for(var e=[],t=0,r=this._feature.geometry;t<r.length;t+=1){var i=r[t];e.push([new n.Point(i[0],i[1])])}return e}for(var o=[],a=0,s=this._feature.geometry;a<s.length;a+=1){for(var l=[],u=0,c=s[a];u<c.length;u+=1){var p=c[u];l.push(new n.Point(p[0],p[1]))}o.push(l)}return o},X.prototype.toGeoJSON=function(e,t,n){return H.call(this,e,t,n)};var Z=function(e){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=n.EXTENT,this.length=e.length,this._features=e};Z.prototype.feature=function(e){return new X(this._features[e])};var Y=n.vectorTile.VectorTileFeature,Q=U;function U(e,t){this.options=t||{},this.features=e,this.length=e.length}function K(e,t){this.id="number"==typeof e.id?e.id:void 0,this.type=e.type,this.rawGeometry=1===e.type?[e.geometry]:e.geometry,this.properties=e.tags,this.extent=t||4096}U.prototype.feature=function(e){return new K(this.features[e],this.options.extent)},K.prototype.loadGeometry=function(){var e=this.rawGeometry;this.geometry=[];for(var t=0;t<e.length;t++){for(var r=e[t],i=[],o=0;o<r.length;o++)i.push(new n.Point$1(r[o][0],r[o][1]));this.geometry.push(i)}return this.geometry},K.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var e=this.geometry,t=1/0,n=-1/0,r=1/0,i=-1/0,o=0;o<e.length;o++)for(var a=e[o],s=0;s<a.length;s++){var l=a[s];t=Math.min(t,l.x),n=Math.max(n,l.x),r=Math.min(r,l.y),i=Math.max(i,l.y)}return[t,r,n,i]},K.prototype.toGeoJSON=Y.prototype.toGeoJSON;var $=te,ee=te,fe=Q;function te(e){var t=new n.pbf;return function(e,t){for(var n in e.layers)t.writeMessage(3,re,e.layers[n])}(e,t),t.finish()}function re(e,t){var n;t.writeVarintField(15,e.version||1),t.writeStringField(1,e.name||""),t.writeVarintField(5,e.extent||4096);var r={keys:[],values:[],keycache:{},valuecache:{}};for(n=0;n<e.length;n++)r.feature=e.feature(n),t.writeMessage(2,ne,r);var i=r.keys;for(n=0;n<i.length;n++)t.writeStringField(3,i[n]);var o=r.values;for(n=0;n<o.length;n++)t.writeMessage(4,le,o[n])}function ne(e,t){var n=e.feature;void 0!==n.id&&t.writeVarintField(1,n.id),t.writeMessage(2,oe,e),t.writeVarintField(3,n.type),t.writeMessage(4,se,n)}function oe(e,t){var n=e.feature,r=e.keys,i=e.values,o=e.keycache,a=e.valuecache;for(var s in n.properties){var l=o[s];void 0===l&&(r.push(s),l=r.length-1,o[s]=l),t.writeVarint(l);var u=n.properties[s],c=typeof u;"string"!==c&&"boolean"!==c&&"number"!==c&&(u=JSON.stringify(u));var p=c+":"+u,h=a[p];void 0===h&&(i.push(u),h=i.length-1,a[p]=h),t.writeVarint(h)}}function ie(e,t){return(t<<3)+(7&e)}function ae(e){return e<<1^e>>31}function se(e,t){for(var n=e.loadGeometry(),r=e.type,i=0,o=0,a=n.length,s=0;s<a;s++){var l=n[s],u=1;1===r&&(u=l.length),t.writeVarint(ie(1,u));for(var c=3===r?l.length-1:l.length,p=0;p<c;p++){1===p&&1!==r&&t.writeVarint(ie(2,c-1));var h=l[p].x-i,f=l[p].y-o;t.writeVarint(ae(h)),t.writeVarint(ae(f)),i+=h,o+=f}3===r&&t.writeVarint(ie(7,1))}}function le(e,t){var n=typeof e;"string"===n?t.writeStringField(1,e):"boolean"===n?t.writeBooleanField(7,e):"number"===n&&(e%1!=0?t.writeDoubleField(3,e):e<0?t.writeSVarintField(6,e):t.writeVarintField(5,e))}function ue(e,t,n,r,i,o){if(!(i-r<=n)){var a=r+i>>1;!function e(t,n,r,i,o,a){for(;o>i;){if(o-i>600){var s=o-i+1,l=r-i+1,u=Math.log(s),c=.5*Math.exp(2*u/3),p=.5*Math.sqrt(u*c*(s-c)/s)*(l-s/2<0?-1:1);e(t,n,r,Math.max(i,Math.floor(r-l*c/s+p)),Math.min(o,Math.floor(r+(s-l)*c/s+p)),a)}var h=n[2*r+a],f=i,d=o;for(he(t,n,i,r),n[2*o+a]>h&&he(t,n,i,o);f<d;){for(he(t,n,f,d),f++,d--;n[2*f+a]<h;)f++;for(;n[2*d+a]>h;)d--}n[2*i+a]===h?he(t,n,i,d):he(t,n,++d,o),d<=r&&(i=d+1),r<=d&&(o=d-1)}}(e,t,a,r,i,o%2),ue(e,t,n,r,a-1,o+1),ue(e,t,n,a+1,i,o+1)}}function he(e,t,n,r){ce(e,n,r),ce(t,2*n,2*r),ce(t,2*n+1,2*r+1)}function ce(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function pe(e,t,n,r){var i=e-n,o=t-r;return i*i+o*o}$.fromVectorTileJs=ee,$.fromGeojsonVt=function(e,t){t=t||{};var n={};for(var r in e)n[r]=new Q(e[r].features,t),n[r].name=r,n[r].version=t.version,n[r].extent=t.extent;return te({layers:n})},$.GeoJSONWrapper=fe;var de=function(e){return e[0]},ge=function(e){return e[1]},me=function(e,t,n,r,i){void 0===t&&(t=de),void 0===n&&(n=ge),void 0===r&&(r=64),void 0===i&&(i=Float64Array),this.nodeSize=r,this.points=e;for(var o=e.length<65536?Uint16Array:Uint32Array,a=this.ids=new o(e.length),s=this.coords=new i(2*e.length),l=0;l<e.length;l++)a[l]=l,s[2*l]=t(e[l]),s[2*l+1]=n(e[l]);ue(a,s,r,0,a.length-1,0)};me.prototype.range=function(e,t,n,r){return function(e,t,n,r,i,o,a){for(var s,l,u=[0,e.length-1,0],c=[];u.length;){var p=u.pop(),h=u.pop(),f=u.pop();if(h-f<=a)for(var d=f;d<=h;d++)s=t[2*d],l=t[2*d+1],s>=n&&s<=i&&l>=r&&l<=o&&c.push(e[d]);else{var g=Math.floor((f+h)/2);s=t[2*g],l=t[2*g+1],s>=n&&s<=i&&l>=r&&l<=o&&c.push(e[g]);var m=(p+1)%2;(0===p?n<=s:r<=l)&&(u.push(f),u.push(g-1),u.push(m)),(0===p?i>=s:o>=l)&&(u.push(g+1),u.push(h),u.push(m))}}return c}(this.ids,this.coords,e,t,n,r,this.nodeSize)},me.prototype.within=function(e,t,n){return function(e,t,n,r,i,o){for(var a=[0,e.length-1,0],s=[],l=i*i;a.length;){var u=a.pop(),c=a.pop(),p=a.pop();if(c-p<=o)for(var h=p;h<=c;h++)pe(t[2*h],t[2*h+1],n,r)<=l&&s.push(e[h]);else{var f=Math.floor((p+c)/2),d=t[2*f],g=t[2*f+1];pe(d,g,n,r)<=l&&s.push(e[f]);var m=(u+1)%2;(0===u?n-i<=d:r-i<=g)&&(a.push(p),a.push(f-1),a.push(m)),(0===u?n+i>=d:r+i>=g)&&(a.push(f+1),a.push(c),a.push(m))}}return s}(this.ids,this.coords,e,t,n,this.nodeSize)};var ve={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,reduce:null,map:function(e){return e}},et=function(e){this.options=Pe(Object.create(ve),e),this.trees=new Array(this.options.maxZoom+1)};function ye(e,t,n,r,i){return{x:e,y:t,zoom:1/0,id:n,parentId:-1,numPoints:r,properties:i}}function xe(e,t){var n=e.geometry.coordinates,r=n[0],i=n[1];return{x:Se(r),y:_e(i),zoom:1/0,index:t,parentId:-1}}function we(e){return{type:"Feature",id:e.id,properties:Me(e),geometry:{type:"Point",coordinates:[(r=e.x,360*(r-.5)),(t=e.y,n=(180-360*t)*Math.PI/180,360*Math.atan(Math.exp(n))/Math.PI-90)]}};var t,n,r}function Me(e){var t=e.numPoints,n=t>=1e4?Math.round(t/1e3)+"k":t>=1e3?Math.round(t/100)/10+"k":t;return Pe(Pe({},e.properties),{cluster:!0,cluster_id:e.id,point_count:t,point_count_abbreviated:n})}function Se(e){return e/360+.5}function _e(e){var t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function Pe(e,t){for(var n in t)e[n]=t[n];return e}function be(e){return e.x}function Te(e){return e.y}function Ie(e,t,n,r,i,o){var a=i-n,s=o-r;if(0!==a||0!==s){var l=((e-n)*a+(t-r)*s)/(a*a+s*s);l>1?(n=i,r=o):l>0&&(n+=a*l,r+=s*l)}return(a=e-n)*a+(s=t-r)*s}function ke(e,t,n,r){var i={id:void 0===e?null:e,type:t,geometry:n,tags:r,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(e){var t=e.geometry,n=e.type;if("Point"===n||"MultiPoint"===n||"LineString"===n)ze(e,t);else if("Polygon"===n||"MultiLineString"===n)for(var r=0;r<t.length;r++)ze(e,t[r]);else if("MultiPolygon"===n)for(r=0;r<t.length;r++)for(var i=0;i<t[r].length;i++)ze(e,t[r][i])}(i),i}function ze(e,t){for(var n=0;n<t.length;n+=3)e.minX=Math.min(e.minX,t[n]),e.minY=Math.min(e.minY,t[n+1]),e.maxX=Math.max(e.maxX,t[n]),e.maxY=Math.max(e.maxY,t[n+1])}function Ce(e,t,n,r){if(t.geometry){var i=t.geometry.coordinates,o=t.geometry.type,a=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2),s=[],l=t.id;if(n.promoteId?l=t.properties[n.promoteId]:n.generateId&&(l=r||0),"Point"===o)Ee(i,s);else if("MultiPoint"===o)for(var u=0;u<i.length;u++)Ee(i[u],s);else if("LineString"===o)Ae(i,s,a,!1);else if("MultiLineString"===o){if(n.lineMetrics){for(u=0;u<i.length;u++)s=[],Ae(i[u],s,a,!1),e.push(ke(l,"LineString",s,t.properties));return}Le(i,s,a,!1)}else if("Polygon"===o)Le(i,s,a,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"===o){for(u=0;u<t.geometry.geometries.length;u++)Ce(e,{id:l,geometry:t.geometry.geometries[u],properties:t.properties},n,r);return}throw new Error("Input data is not a valid GeoJSON object.")}for(u=0;u<i.length;u++){var c=[];Le(i[u],c,a,!0),s.push(c)}}e.push(ke(l,o,s,t.properties))}}function Ee(e,t){t.push(De(e[0])),t.push(Oe(e[1])),t.push(0)}function Ae(e,t,n,r){for(var i,o,a=0,s=0;s<e.length;s++){var l=De(e[s][0]),u=Oe(e[s][1]);t.push(l),t.push(u),t.push(0),s>0&&(a+=r?(i*u-l*o)/2:Math.sqrt(Math.pow(l-i,2)+Math.pow(u-o,2))),i=l,o=u}var c=t.length-3;t[2]=1,function e(t,n,r,i){for(var o,a=i,s=r-n>>1,l=r-n,u=t[n],c=t[n+1],p=t[r],h=t[r+1],f=n+3;f<r;f+=3){var d=Ie(t[f],t[f+1],u,c,p,h);if(d>a)o=f,a=d;else if(d===a){var g=Math.abs(f-s);g<l&&(o=f,l=g)}}a>i&&(o-n>3&&e(t,n,o,i),t[o+2]=a,r-o>3&&e(t,o,r,i))}(t,0,c,n),t[c+2]=1,t.size=Math.abs(a),t.start=0,t.end=t.size}function Le(e,t,n,r){for(var i=0;i<e.length;i++){var o=[];Ae(e[i],o,n,r),t.push(o)}}function De(e){return e/360+.5}function Oe(e){var t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function Ne(e,t,n,r,i,o,a,s){if(r/=t,o>=(n/=t)&&a<r)return e;if(a<n||o>=r)return null;for(var l=[],u=0;u<e.length;u++){var c=e[u],p=c.geometry,h=c.type,f=0===i?c.minX:c.minY,d=0===i?c.maxX:c.maxY;if(f>=n&&d<r)l.push(c);else if(!(d<n||f>=r)){var g=[];if("Point"===h||"MultiPoint"===h)Re(p,g,n,r,i);else if("LineString"===h)Fe(p,g,n,r,i,!1,s.lineMetrics);else if("MultiLineString"===h)Ze(p,g,n,r,i,!1);else if("Polygon"===h)Ze(p,g,n,r,i,!0);else if("MultiPolygon"===h)for(var m=0;m<p.length;m++){var y=[];Ze(p[m],y,n,r,i,!0),y.length&&g.push(y)}if(g.length){if(s.lineMetrics&&"LineString"===h){for(m=0;m<g.length;m++)l.push(ke(c.id,h,g[m],c.tags));continue}"LineString"!==h&&"MultiLineString"!==h||(1===g.length?(h="LineString",g=g[0]):h="MultiLineString"),"Point"!==h&&"MultiPoint"!==h||(h=3===g.length?"Point":"MultiPoint"),l.push(ke(c.id,h,g,c.tags))}}}return l.length?l:null}function Re(e,t,n,r,i){for(var o=0;o<e.length;o+=3){var a=e[o+i];a>=n&&a<=r&&(t.push(e[o]),t.push(e[o+1]),t.push(e[o+2]))}}function Fe(e,t,n,r,i,o,a){for(var s,l,u=Be(e),c=0===i?Ge:Je,p=e.start,h=0;h<e.length-3;h+=3){var f=e[h],d=e[h+1],g=e[h+2],m=e[h+3],y=e[h+4],v=0===i?f:d,_=0===i?m:y,b=!1;a&&(s=Math.sqrt(Math.pow(f-m,2)+Math.pow(d-y,2))),v<n?_>n&&(l=c(u,f,d,m,y,n),a&&(u.start=p+s*l)):v>r?_<r&&(l=c(u,f,d,m,y,r),a&&(u.start=p+s*l)):je(u,f,d,g),_<n&&v>=n&&(l=c(u,f,d,m,y,n),b=!0),_>r&&v<=r&&(l=c(u,f,d,m,y,r),b=!0),!o&&b&&(a&&(u.end=p+s*l),t.push(u),u=Be(e)),a&&(p+=s)}var x=e.length-3;f=e[x],d=e[x+1],g=e[x+2],(v=0===i?f:d)>=n&&v<=r&&je(u,f,d,g),x=u.length-3,o&&x>=3&&(u[x]!==u[0]||u[x+1]!==u[1])&&je(u,u[0],u[1],u[2]),u.length&&t.push(u)}function Be(e){var t=[];return t.size=e.size,t.start=e.start,t.end=e.end,t}function Ze(e,t,n,r,i,o){for(var a=0;a<e.length;a++)Fe(e[a],t,n,r,i,o,!1)}function je(e,t,n,r){e.push(t),e.push(n),e.push(r)}function Ge(e,t,n,r,i,o){var a=(o-t)/(r-t);return e.push(o),e.push(n+(i-n)*a),e.push(1),a}function Je(e,t,n,r,i,o){var a=(o-n)/(i-n);return e.push(t+(r-t)*a),e.push(o),e.push(1),a}function Xe(e,t){for(var n=[],r=0;r<e.length;r++){var i,o=e[r],a=o.type;if("Point"===a||"MultiPoint"===a||"LineString"===a)i=Ve(o.geometry,t);else if("MultiLineString"===a||"Polygon"===a){i=[];for(var s=0;s<o.geometry.length;s++)i.push(Ve(o.geometry[s],t))}else if("MultiPolygon"===a)for(i=[],s=0;s<o.geometry.length;s++){for(var l=[],u=0;u<o.geometry[s].length;u++)l.push(Ve(o.geometry[s][u],t));i.push(l)}n.push(ke(o.id,a,i,o.tags))}return n}function Ve(e,t){var n=[];n.size=e.size,void 0!==e.start&&(n.start=e.start,n.end=e.end);for(var r=0;r<e.length;r+=3)n.push(e[r]+t,e[r+1],e[r+2]);return n}function We(e,t){if(e.transformed)return e;var n,r,i,o=1<<e.z,a=e.x,s=e.y;for(n=0;n<e.features.length;n++){var l=e.features[n],u=l.geometry,c=l.type;if(l.geometry=[],1===c)for(r=0;r<u.length;r+=2)l.geometry.push(Ye(u[r],u[r+1],t,o,a,s));else for(r=0;r<u.length;r++){var p=[];for(i=0;i<u[r].length;i+=2)p.push(Ye(u[r][i],u[r][i+1],t,o,a,s));l.geometry.push(p)}}return e.transformed=!0,e}function Ye(e,t,n,r,i,o){return[Math.round(n*(e*r-i)),Math.round(n*(t*r-o))]}function qe(e,t,n,r,i){for(var o=t===i.maxZoom?0:i.tolerance/((1<<t)*i.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:r,z:t,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<e.length;s++){a.numFeatures++,Ue(a,e[s],o,i);var l=e[s].minX,u=e[s].minY,c=e[s].maxX,p=e[s].maxY;l<a.minX&&(a.minX=l),u<a.minY&&(a.minY=u),c>a.maxX&&(a.maxX=c),p>a.maxY&&(a.maxY=p)}return a}function Ue(e,t,n,r){var i=t.geometry,o=t.type,a=[];if("Point"===o||"MultiPoint"===o)for(var s=0;s<i.length;s+=3)a.push(i[s]),a.push(i[s+1]),e.numPoints++,e.numSimplified++;else if("LineString"===o)Ke(a,i,e,n,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(s=0;s<i.length;s++)Ke(a,i[s],e,n,"Polygon"===o,0===s);else if("MultiPolygon"===o)for(var l=0;l<i.length;l++){var u=i[l];for(s=0;s<u.length;s++)Ke(a,u[s],e,n,!0,0===s)}if(a.length){var c=t.tags||null;if("LineString"===o&&r.lineMetrics){for(var p in c={},t.tags)c[p]=t.tags[p];c.mapbox_clip_start=i.start/i.size,c.mapbox_clip_end=i.end/i.size}var h={geometry:a,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:c};null!==t.id&&(h.id=t.id),e.features.push(h)}}function Ke(e,t,n,r,i,o){var a=r*r;if(r>0&&t.size<(i?a:r))n.numPoints+=t.length/3;else{for(var s=[],l=0;l<t.length;l+=3)(0===r||t[l+2]>a)&&(n.numSimplified++,s.push(t[l]),s.push(t[l+1])),n.numPoints++;i&&function(e,t){for(var n=0,r=0,i=e.length,o=i-2;r<i;o=r,r+=2)n+=(e[r]-e[o])*(e[r+1]+e[o+1]);if(n>0===t)for(r=0,i=e.length;r<i/2;r+=2){var a=e[r],s=e[r+1];e[r]=e[i-2-r],e[r+1]=e[i-1-r],e[i-2-r]=a,e[i-1-r]=s}}(s,o),e.push(s)}}function He(e,t){var n=(t=this.options=function(e,t){for(var n in t)e[n]=t[n];return e}(Object.create(this.options),t)).debug;if(n&&console.time("preprocess data"),t.maxZoom<0||t.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(t.promoteId&&t.generateId)throw new Error("promoteId and generateId cannot be used together.");var r=function(e,t){var n=[];if("FeatureCollection"===e.type)for(var r=0;r<e.features.length;r++)Ce(n,e.features[r],t,r);else"Feature"===e.type?Ce(n,e,t):Ce(n,{geometry:e},t);return n}(e,t);this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",t.indexMaxZoom,t.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(r=function(e,t){var n=t.buffer/t.extent,r=e,i=Ne(e,1,-1-n,n,0,-1,2,t),o=Ne(e,1,1-n,2+n,0,-1,2,t);return(i||o)&&(r=Ne(e,1,-n,1+n,0,-1,2,t)||[],i&&(r=Xe(i,1).concat(r)),o&&(r=r.concat(Xe(o,-1)))),r}(r,t)).length&&this.splitTile(r,0,0,0),n&&(r.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Qe(e,t,n){return 32*((1<<e)*n+t)+e}function $e(e,t){var n=e.tileID.canonical;if(!this._geoJSONIndex)return t(null,null);var r=this._geoJSONIndex.getTile(n.z,n.x,n.y);if(!r)return t(null,null);var i=new Z(r.features),o=$(i);0===o.byteOffset&&o.byteLength===o.buffer.byteLength||(o=new Uint8Array(o)),t(null,{vectorTile:i,rawData:o.buffer})}et.prototype.load=function(e){var t=this.options,n=t.log,r=t.minZoom,i=t.maxZoom,o=t.nodeSize;n&&console.time("total time");var a="prepare "+e.length+" points";n&&console.time(a),this.points=e;for(var s=[],l=0;l<e.length;l++)e[l].geometry&&s.push(xe(e[l],l));this.trees[i+1]=new me(s,be,Te,o,Float32Array),n&&console.timeEnd(a);for(var u=i;u>=r;u--){var c=+Date.now();s=this._cluster(s,u),this.trees[u]=new me(s,be,Te,o,Float32Array),n&&console.log("z%d: %d clusters in %dms",u,s.length,+Date.now()-c)}return n&&console.timeEnd("total time"),this},et.prototype.getClusters=function(e,t){var n=((e[0]+180)%360+360)%360-180,r=Math.max(-90,Math.min(90,e[1])),i=180===e[2]?180:((e[2]+180)%360+360)%360-180,o=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)n=-180,i=180;else if(n>i){var a=this.getClusters([n,r,180,o],t),s=this.getClusters([-180,r,i,o],t);return a.concat(s)}for(var l=this.trees[this._limitZoom(t)],u=[],c=0,p=l.range(Se(n),_e(o),Se(i),_e(r));c<p.length;c+=1){var h=p[c],f=l.points[h];u.push(f.numPoints?we(f):this.points[f.index])}return u},et.prototype.getChildren=function(e){var t=e>>5,n=e%32,r="No cluster with the specified id.",i=this.trees[n];if(!i)throw new Error(r);var o=i.points[t];if(!o)throw new Error(r);for(var a=this.options.radius/(this.options.extent*Math.pow(2,n-1)),s=[],l=0,u=i.within(o.x,o.y,a);l<u.length;l+=1){var c=u[l],p=i.points[c];p.parentId===e&&s.push(p.numPoints?we(p):this.points[p.index])}if(0===s.length)throw new Error(r);return s},et.prototype.getLeaves=function(e,t,n){t=t||10,n=n||0;var r=[];return this._appendLeaves(r,e,t,n,0),r},et.prototype.getTile=function(e,t,n){var r=this.trees[this._limitZoom(e)],i=Math.pow(2,e),o=this.options,a=o.extent,s=o.radius/a,l=(n-s)/i,u=(n+1+s)/i,c={features:[]};return this._addTileFeatures(r.range((t-s)/i,l,(t+1+s)/i,u),r.points,t,n,i,c),0===t&&this._addTileFeatures(r.range(1-s/i,l,1,u),r.points,i,n,i,c),t===i-1&&this._addTileFeatures(r.range(0,l,s/i,u),r.points,-1,n,i,c),c.features.length?c:null},et.prototype.getClusterExpansionZoom=function(e){for(var t=e%32-1;t<=this.options.maxZoom;){var n=this.getChildren(e);if(t++,1!==n.length)break;e=n[0].properties.cluster_id}return t},et.prototype._appendLeaves=function(e,t,n,r,i){for(var o=0,a=this.getChildren(t);o<a.length;o+=1){var s=a[o],l=s.properties;if(l&&l.cluster?i+l.point_count<=r?i+=l.point_count:i=this._appendLeaves(e,l.cluster_id,n,r,i):i<r?i++:e.push(s),e.length===n)break}return i},et.prototype._addTileFeatures=function(e,t,n,r,i,o){for(var a=0,s=e;a<s.length;a+=1){var l=t[s[a]],u={type:1,geometry:[[Math.round(this.options.extent*(l.x*i-n)),Math.round(this.options.extent*(l.y*i-r))]],tags:l.numPoints?Me(l):this.points[l.index].properties},c=l.numPoints?l.id:this.points[l.index].id;void 0!==c&&(u.id=c),o.features.push(u)}},et.prototype._limitZoom=function(e){return Math.max(this.options.minZoom,Math.min(e,this.options.maxZoom+1))},et.prototype._cluster=function(e,t){for(var n=[],r=this.options,i=r.radius,o=r.extent,a=r.reduce,s=i/(o*Math.pow(2,t)),l=0;l<e.length;l++){var u=e[l];if(!(u.zoom<=t)){u.zoom=t;for(var c=this.trees[t+1],p=c.within(u.x,u.y,s),h=u.numPoints||1,f=u.x*h,d=u.y*h,g=a?this._map(u,!0):null,m=(l<<5)+(t+1),y=0,v=p;y<v.length;y+=1){var _=v[y],b=c.points[_];if(!(b.zoom<=t)){b.zoom=t;var x=b.numPoints||1;f+=b.x*x,d+=b.y*x,h+=x,b.parentId=m,a&&a(g,this._map(b))}}1===h?n.push(u):(u.parentId=m,n.push(ye(f/h,d/h,m,h,g)))}}return n},et.prototype._map=function(e,t){if(e.numPoints)return t?Pe({},e.properties):e.properties;var n=this.points[e.index].properties,r=this.options.map(n);return t&&r===n?Pe({},r):r},He.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},He.prototype.splitTile=function(e,t,n,r,i,o,a){for(var s=[e,t,n,r],l=this.options,u=l.debug;s.length;){r=s.pop(),n=s.pop(),t=s.pop(),e=s.pop();var c=1<<t,p=Qe(t,n,r),h=this.tiles[p];if(!h&&(u>1&&console.time("creation"),h=this.tiles[p]=qe(e,t,n,r,l),this.tileCoords.push({z:t,x:n,y:r}),u)){u>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",t,n,r,h.numFeatures,h.numPoints,h.numSimplified),console.timeEnd("creation"));var f="z"+t;this.stats[f]=(this.stats[f]||0)+1,this.total++}if(h.source=e,i){if(t===l.maxZoom||t===i)continue;var d=1<<i-t;if(n!==Math.floor(o/d)||r!==Math.floor(a/d))continue}else if(t===l.indexMaxZoom||h.numPoints<=l.indexMaxPoints)continue;if(h.source=null,0!==e.length){u>1&&console.time("clipping");var g,m,y,v,_,b,x=.5*l.buffer/l.extent,w=.5-x,S=.5+x,E=1+x;g=m=y=v=null,_=Ne(e,c,n-x,n+S,0,h.minX,h.maxX,l),b=Ne(e,c,n+w,n+E,0,h.minX,h.maxX,l),e=null,_&&(g=Ne(_,c,r-x,r+S,1,h.minY,h.maxY,l),m=Ne(_,c,r+w,r+E,1,h.minY,h.maxY,l),_=null),b&&(y=Ne(b,c,r-x,r+S,1,h.minY,h.maxY,l),v=Ne(b,c,r+w,r+E,1,h.minY,h.maxY,l),b=null),u>1&&console.timeEnd("clipping"),s.push(g||[],t+1,2*n,2*r),s.push(m||[],t+1,2*n,2*r+1),s.push(y||[],t+1,2*n+1,2*r),s.push(v||[],t+1,2*n+1,2*r+1)}}},He.prototype.getTile=function(e,t,n){var r=this.options,i=r.extent,o=r.debug;if(e<0||e>24)return null;var a=1<<e,s=Qe(e,t=(t%a+a)%a,n);if(this.tiles[s])return We(this.tiles[s],i);o>1&&console.log("drilling down to z%d-%d-%d",e,t,n);for(var l,u=e,c=t,p=n;!l&&u>0;)u--,c=Math.floor(c/2),p=Math.floor(p/2),l=this.tiles[Qe(u,c,p)];return l&&l.source?(o>1&&console.log("found parent tile z%d-%d-%d",u,c,p),o>1&&console.time("drilling down"),this.splitTile(l.source,u,c,p,e,t,n),o>1&&console.timeEnd("drilling down"),this.tiles[s]?We(this.tiles[s],i):null):null};var tt=function(e){function r(t,n,r){e.call(this,t,n,$e),r&&(this.loadGeoJSON=r)}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.loadData=function(e,t){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=t,this._pendingLoadDataParams=e,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},r.prototype._loadData=function(){var e=this;if(this._pendingCallback&&this._pendingLoadDataParams){var t=this._pendingCallback,r=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var i=!!(r&&r.request&&r.request.collectResourceTiming)&&new L.Performance(r.request);this.loadGeoJSON(r,function(o,a){if(o||!a)return t(o);if("object"!=typeof a)return t(new Error("Input data is not a valid GeoJSON object."));q(a,!0);try{e._geoJSONIndex=r.cluster?new et(function(e){var t=e.superclusterOptions,r=e.clusterProperties;if(!r||!t)return t;for(var i={},o={},a={accumulated:null,zoom:0},s={properties:null},l=Object.keys(r),u=0,c=l;u<c.length;u+=1){var p=c[u],h=r[p],f=h[0],d=h[1],g=n.createExpression(d),m=n.createExpression("string"==typeof f?[f,["accumulated"],["get",p]]:f);i[p]=g.value,o[p]=m.value}return t.map=function(e){s.properties=e;for(var t={},n=0,r=l;n<r.length;n+=1){var o=r[n];t[o]=i[o].evaluate(a,s)}return t},t.reduce=function(e,t){s.properties=t;for(var n=0,r=l;n<r.length;n+=1){var i=r[n];a.accumulated=e[i],e[i]=o[i].evaluate(a,s)}},t}(r)).load(a.features):new He(a,r.geojsonVtOptions)}catch(o){return t(o)}e.loaded={};var s={};if(i){var l=i.finish();l&&(s.resourceTiming={},s.resourceTiming[r.source]=JSON.parse(JSON.stringify(l)))}t(null,s)})}},r.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},r.prototype.reloadTile=function(t,n){var r=this.loaded,i=t.uid;return r&&r[i]?e.prototype.reloadTile.call(this,t,n):this.loadTile(t,n)},r.prototype.loadGeoJSON=function(e,t){if(e.request)n.getJSON(e.request,t);else{if("string"!=typeof e.data)return t(new Error("Input data is not a valid GeoJSON object."));try{return t(null,JSON.parse(e.data))}catch(e){return t(new Error("Input data is not a valid GeoJSON object."))}}},r.prototype.removeSource=function(e,t){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),t()},r.prototype.getClusterExpansionZoom=function(e,t){t(null,this._geoJSONIndex.getClusterExpansionZoom(e.clusterId))},r.prototype.getClusterChildren=function(e,t){t(null,this._geoJSONIndex.getChildren(e.clusterId))},r.prototype.getClusterLeaves=function(e,t){t(null,this._geoJSONIndex.getLeaves(e.clusterId,e.limit,e.offset))},r}(B),nt=function(e){var t=this;this.self=e,this.actor=new n.Actor(e,this),this.layerIndexes={},this.workerSourceTypes={vector:B,geojson:tt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(e,n){if(t.workerSourceTypes[e])throw new Error('Worker source with name "'+e+'" already registered.');t.workerSourceTypes[e]=n},this.self.registerRTLTextPlugin=function(e){if(n.plugin.isLoaded())throw new Error("RTL text plugin already registered.");n.plugin.applyArabicShaping=e.applyArabicShaping,n.plugin.processBidirectionalText=e.processBidirectionalText,n.plugin.processStyledBidirectionalText=e.processStyledBidirectionalText}};return nt.prototype.setReferrer=function(e,t){this.referrer=t},nt.prototype.setLayers=function(e,t,n){this.getLayerIndex(e).replace(t),n()},nt.prototype.updateLayers=function(e,t,n){this.getLayerIndex(e).update(t.layers,t.removedIds),n()},nt.prototype.loadTile=function(e,t,n){this.getWorkerSource(e,t.type,t.source).loadTile(t,n)},nt.prototype.loadDEMTile=function(e,t,n){this.getDEMWorkerSource(e,t.source).loadTile(t,n)},nt.prototype.reloadTile=function(e,t,n){this.getWorkerSource(e,t.type,t.source).reloadTile(t,n)},nt.prototype.abortTile=function(e,t,n){this.getWorkerSource(e,t.type,t.source).abortTile(t,n)},nt.prototype.removeTile=function(e,t,n){this.getWorkerSource(e,t.type,t.source).removeTile(t,n)},nt.prototype.removeDEMTile=function(e,t){this.getDEMWorkerSource(e,t.source).removeTile(t)},nt.prototype.removeSource=function(e,t,n){if(this.workerSources[e]&&this.workerSources[e][t.type]&&this.workerSources[e][t.type][t.source]){var r=this.workerSources[e][t.type][t.source];delete this.workerSources[e][t.type][t.source],void 0!==r.removeSource?r.removeSource(t,n):n()}},nt.prototype.loadWorkerSource=function(e,t,n){try{this.self.importScripts(t.url),n()}catch(e){n(e.toString())}},nt.prototype.loadRTLTextPlugin=function(e,t,r){try{n.plugin.isLoaded()||(this.self.importScripts(t),r(n.plugin.isLoaded()?null:new Error("RTL Text Plugin failed to import scripts from "+t)))}catch(e){r(e.toString())}},nt.prototype.getLayerIndex=function(e){var t=this.layerIndexes[e];return t||(t=this.layerIndexes[e]=new c),t},nt.prototype.getWorkerSource=function(e,t,n){var r=this;if(this.workerSources[e]||(this.workerSources[e]={}),this.workerSources[e][t]||(this.workerSources[e][t]={}),!this.workerSources[e][t][n]){var i={send:function(t,n,i){r.actor.send(t,n,i,e)}};this.workerSources[e][t][n]=new this.workerSourceTypes[t](i,this.getLayerIndex(e))}return this.workerSources[e][t][n]},nt.prototype.getDEMWorkerSource=function(e,t){return this.demWorkerSources[e]||(this.demWorkerSources[e]={}),this.demWorkerSources[e][t]||(this.demWorkerSources[e][t]=new z),this.demWorkerSources[e][t]},"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new nt(self)),nt}),define(0,function(t){var n=t.createCommonjsModule(function(t){function e(t){return!!("undefined"!=typeof window&&"undefined"!=typeof document&&Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray&&Function.prototype&&Function.prototype.bind&&Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions&&"JSON"in window&&"parse"in JSON&&"stringify"in JSON&&function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var e,t,n=new Blob([""],{type:"text/javascript"}),r=URL.createObjectURL(n);try{t=new Worker(r),e=!0}catch(t){e=!1}return t&&t.terminate(),URL.revokeObjectURL(r),e}()&&"Uint8ClampedArray"in window&&ArrayBuffer.isView&&function(t){return void 0===n[t]&&(n[t]=function(t){var n=document.createElement("canvas"),r=Object.create(e.webGLContextAttributes);return r.failIfMajorPerformanceCaveat=t,n.probablySupportsContext?n.probablySupportsContext("webgl",r)||n.probablySupportsContext("experimental-webgl",r):n.supportsContext?n.supportsContext("webgl",r)||n.supportsContext("experimental-webgl",r):n.getContext("webgl",r)||n.getContext("experimental-webgl",r)}(t)),n[t]}(t&&t.failIfMajorPerformanceCaveat))}t.exports?t.exports=e:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=e);var n={};e.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),l={create:function(e,n,r){var i=t.window.document.createElement(e);return n&&(i.className=n),r&&r.appendChild(i),i},createNS:function(e,n){return t.window.document.createElementNS(e,n)}},c=t.window.document?t.window.document.documentElement.style:null;function r(e){if(!c)return null;for(var t=0;t<e.length;t++)if(e[t]in c)return e[t];return e[0]}var p,h=r(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);l.disableDrag=function(){c&&h&&(p=c[h],c[h]="none")},l.enableDrag=function(){c&&h&&(c[h]=p)};var d=r(["transform","WebkitTransform"]);l.setTransform=function(e,t){e.style[d]=t};var g=!1;try{var y=Object.defineProperty({},"passive",{get:function(){g=!0}});t.window.addEventListener("test",y,y),t.window.removeEventListener("test",y,y)}catch(t){g=!1}l.addEventListener=function(e,t,n,r){void 0===r&&(r={}),"passive"in r&&g?e.addEventListener(t,n,r):e.addEventListener(t,n,r.capture)},l.removeEventListener=function(e,t,n,r){void 0===r&&(r={}),"passive"in r&&g?e.removeEventListener(t,n,r):e.removeEventListener(t,n,r.capture)};var v=function(e){e.preventDefault(),e.stopPropagation(),t.window.removeEventListener("click",v,!0)};l.suppressClick=function(){t.window.addEventListener("click",v,!0),t.window.setTimeout(function(){t.window.removeEventListener("click",v,!0)},0)},l.mousePos=function(e,n){var r=e.getBoundingClientRect();return n=n.touches?n.touches[0]:n,new t.Point(n.clientX-r.left-e.clientLeft,n.clientY-r.top-e.clientTop)},l.touchPos=function(e,n){for(var r=e.getBoundingClientRect(),i=[],o="touchend"===n.type?n.changedTouches:n.touches,a=0;a<o.length;a++)i.push(new t.Point(o[a].clientX-r.left-e.clientLeft,o[a].clientY-r.top-e.clientTop));return i},l.mouseButton=function(e){return void 0!==t.window.InstallTrigger&&2===e.button&&e.ctrlKey&&t.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:e.button},l.remove=function(e){e.parentNode&&e.parentNode.removeChild(e)};var b=function(){this.images={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new t.RGBAImage({width:1,height:1}),this.dirty=!0};b.prototype.isLoaded=function(){return this.loaded},b.prototype.setLoaded=function(e){if(this.loaded!==e&&(this.loaded=e,e)){for(var t=0,n=this.requestors;t<n.length;t+=1){var r=n[t],i=r.ids,o=r.callback;this._notify(i,o)}this.requestors=[]}},b.prototype.getImage=function(e){return this.images[e]},b.prototype.addImage=function(e,t){this.images[e]=t},b.prototype.removeImage=function(e){delete this.images[e],delete this.patterns[e]},b.prototype.listImages=function(){return Object.keys(this.images)},b.prototype.getImages=function(e,t){var n=!0;if(!this.isLoaded())for(var r=0,i=e;r<i.length;r+=1){var o=i[r];this.images[o]||(n=!1)}this.isLoaded()||n?this._notify(e,t):this.requestors.push({ids:e,callback:t})},b.prototype._notify=function(e,t){for(var n={},r=0,i=e;r<i.length;r+=1){var o=i[r],a=this.images[o];a&&(n[o]={data:a.data.clone(),pixelRatio:a.pixelRatio,sdf:a.sdf})}t(null,n)},b.prototype.getPixelSize=function(){var e=this.atlasImage;return{width:e.width,height:e.height}},b.prototype.getPattern=function(e){var n=this.patterns[e];if(n)return n.position;var r=this.getImage(e);if(!r)return null;var i={w:r.data.width+2,h:r.data.height+2,x:0,y:0},o=new t.ImagePosition(i,r);return this.patterns[e]={bin:i,position:o},this._updatePatternAtlas(),o},b.prototype.bind=function(e){var n=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new t.Texture(e,this.atlasImage,n.RGBA),this.atlasTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE)},b.prototype._updatePatternAtlas=function(){var e=[];for(var n in this.patterns)e.push(this.patterns[n].bin);var r=t.potpack(e),i=r.w,o=r.h,a=this.atlasImage;for(var s in a.resize({width:i||1,height:o||1}),this.patterns){var l=this.patterns[s].bin,u=l.x+1,c=l.y+1,p=this.images[s].data,h=p.width,f=p.height;t.RGBAImage.copy(p,a,{x:0,y:0},{x:u,y:c},{width:h,height:f}),t.RGBAImage.copy(p,a,{x:0,y:f-1},{x:u,y:c-1},{width:h,height:1}),t.RGBAImage.copy(p,a,{x:0,y:0},{x:u,y:c+f},{width:h,height:1}),t.RGBAImage.copy(p,a,{x:h-1,y:0},{x:u-1,y:c},{width:1,height:f}),t.RGBAImage.copy(p,a,{x:0,y:0},{x:u+h,y:c},{width:1,height:f})}this.dirty=!0};var x=_,w=1e20;function _(e,t,n,r,i,o){this.fontSize=e||24,this.buffer=void 0===t?3:t,this.cutoff=r||.25,this.fontFamily=i||"sans-serif",this.fontWeight=o||"normal",this.radius=n||8;var a=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=a,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.d=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Int16Array(a),this.middle=Math.round(a/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function f(e,t,n,r,i,o,a){for(var s=0;s<t;s++){for(var l=0;l<n;l++)r[l]=e[l*t+s];for(m(r,i,o,a,n),l=0;l<n;l++)e[l*t+s]=i[l]}for(l=0;l<n;l++){for(s=0;s<t;s++)r[s]=e[l*t+s];for(m(r,i,o,a,t),s=0;s<t;s++)e[l*t+s]=Math.sqrt(i[s])}}function m(e,t,n,r,i){n[0]=0,r[0]=-w,r[1]=+w;for(var o=1,a=0;o<i;o++){for(var s=(e[o]+o*o-(e[n[a]]+n[a]*n[a]))/(2*o-2*n[a]);s<=r[a];)a--,s=(e[o]+o*o-(e[n[a]]+n[a]*n[a]))/(2*o-2*n[a]);n[++a]=o,r[a]=s,r[a+1]=+w}for(o=0,a=0;o<i;o++){for(;r[a+1]<o;)a++;t[o]=(o-n[a])*(o-n[a])+e[n[a]]}}_.prototype.draw=function(e){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(e,this.buffer,this.middle);for(var t=this.ctx.getImageData(0,0,this.size,this.size),n=new Uint8ClampedArray(this.size*this.size),r=0;r<this.size*this.size;r++){var i=t.data[4*r+3]/255;this.gridOuter[r]=1===i?0:0===i?w:Math.pow(Math.max(0,.5-i),2),this.gridInner[r]=1===i?w:0===i?0:Math.pow(Math.max(0,i-.5),2)}for(f(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),f(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),r=0;r<this.size*this.size;r++){var o=this.gridOuter[r]-this.gridInner[r];n[r]=Math.max(0,Math.min(255,Math.round(255-255*(o/this.radius+this.cutoff))))}return n};var S=function(e,t){this.requestTransform=e,this.localIdeographFontFamily=t,this.entries={}};S.prototype.setURL=function(e){this.url=e},S.prototype.getGlyphs=function(e,n){var r=this,i=[];for(var o in e)for(var a=0,s=e[o];a<s.length;a+=1){var l=s[a];i.push({stack:o,id:l})}t.asyncAll(i,function(e,t){var n=e.stack,i=e.id,o=r.entries[n];o||(o=r.entries[n]={glyphs:{},requests:{}});var a=o.glyphs[i];if(void 0===a)if(a=r._tinySDF(o,n,i))t(null,{stack:n,id:i,glyph:a});else{var s=Math.floor(i/256);if(256*s>65535)t(new Error("glyphs > 65535 not supported"));else{var l=o.requests[s];l||(l=o.requests[s]=[],S.loadGlyphRange(n,s,r.url,r.requestTransform,function(e,t){if(t)for(var n in t)o.glyphs[+n]=t[+n];for(var r=0,i=l;r<i.length;r+=1)(0,i[r])(e,t);delete o.requests[s]})),l.push(function(e,r){e?t(e):r&&t(null,{stack:n,id:i,glyph:r[i]||null})})}}else t(null,{stack:n,id:i,glyph:a})},function(e,t){if(e)n(e);else if(t){for(var r={},i=0,o=t;i<o.length;i+=1){var a=o[i],s=a.stack,l=a.id,u=a.glyph;(r[s]||(r[s]={}))[l]=u&&{id:u.id,bitmap:u.bitmap.clone(),metrics:u.metrics}}n(null,r)}})},S.prototype._tinySDF=function(e,n,r){var i=this.localIdeographFontFamily;if(i&&(t.isChar["CJK Unified Ideographs"](r)||t.isChar["Hangul Syllables"](r))){var o=e.tinySDF;if(!o){var a="400";/bold/i.test(n)?a="900":/medium/i.test(n)?a="500":/light/i.test(n)&&(a="200"),o=e.tinySDF=new S.TinySDF(24,3,8,.25,i,a)}return{id:r,bitmap:new t.AlphaImage({width:30,height:30},o.draw(String.fromCharCode(r))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},S.loadGlyphRange=function(e,n,r,i,o){var a=256*n,s=a+255,l=i(t.normalizeGlyphsURL(r).replace("{fontstack}",e).replace("{range}",a+"-"+s),t.ResourceType.Glyphs);t.getArrayBuffer(l,function(e,n){if(e)o(e);else if(n){for(var r={},i=0,a=t.parseGlyphPBF(n);i<a.length;i+=1){var s=a[i];r[s.id]=s}o(null,r)}})},S.TinySDF=x;var P=function(){this.specification=t.styleSpec.light.position};P.prototype.possiblyEvaluate=function(e,n){return t.sphericalToCartesian(e.expression.evaluate(n))},P.prototype.interpolate=function(e,n,r){return{x:t.number(e.x,n.x,r),y:t.number(e.y,n.y,r),z:t.number(e.z,n.z,r)}};var k=new t.Properties({anchor:new t.DataConstantProperty(t.styleSpec.light.anchor),position:new P,color:new t.DataConstantProperty(t.styleSpec.light.color),intensity:new t.DataConstantProperty(t.styleSpec.light.intensity)}),O=function(e){function i(n){e.call(this),this._transitionable=new t.Transitionable(k),this.setLight(n),this._transitioning=this._transitionable.untransitioned()}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.getLight=function(){return this._transitionable.serialize()},i.prototype.setLight=function(e,n){if(void 0===n&&(n={}),!this._validate(t.validateLight,e,n))for(var r in e){var i=e[r];t.endsWith(r,"-transition")?this._transitionable.setTransition(r.slice(0,-"-transition".length),i):this._transitionable.setValue(r,i)}},i.prototype.updateTransitions=function(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)},i.prototype.hasTransition=function(){return this._transitioning.hasTransition()},i.prototype.recalculate=function(e){this.properties=this._transitioning.possiblyEvaluate(e)},i.prototype._validate=function(e,n,r){return(!r||!1!==r.validate)&&t.emitValidationErrors(this,e.call(t.validateStyle,t.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:t.styleSpec})))},i}(t.Evented),L=function(e,t){this.width=e,this.height=t,this.nextRow=0,this.bytes=4,this.data=new Uint8Array(this.width*this.height*this.bytes),this.positions={}};L.prototype.getDash=function(e,t){var n=e.join(",")+String(t);return this.positions[n]||(this.positions[n]=this.addDash(e,t)),this.positions[n]},L.prototype.addDash=function(e,n){var r=n?7:0,i=2*r+1;if(this.nextRow+i>this.height)return t.warnOnce("LineAtlas out of space"),null;for(var o=0,a=0;a<e.length;a++)o+=e[a];for(var s=this.width/o,l=s/2,u=e.length%2==1,c=-r;c<=r;c++)for(var p=this.nextRow+r+c,h=this.width*p,f=u?-e[e.length-1]:0,d=e[0],g=1,m=0;m<this.width;m++){for(;d<m/s;)f=d,d+=e[g],u&&g===e.length-1&&(d+=e[0]),g++;var y=Math.abs(m-f*s),v=Math.abs(m-d*s),_=Math.min(y,v),b=g%2==1,x=void 0;if(n){var w=r?c/r*(l+1):0;if(b){var S=l-Math.abs(w);x=Math.sqrt(_*_+S*S)}else x=l-Math.sqrt(_*_+w*w)}else x=(b?1:-1)*_;this.data[3+4*(h+m)]=Math.max(0,Math.min(255,x+128))}var E={y:(this.nextRow+r+.5)/this.height,height:2*r/this.height,width:o};return this.nextRow+=i,this.dirty=!0,E},L.prototype.bind=function(e){var t=e.gl;this.texture?(t.bindTexture(t.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,t.texSubImage2D(t.TEXTURE_2D,0,0,0,this.width,this.height,t.RGBA,t.UNSIGNED_BYTE,this.data))):(this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.width,this.height,0,t.RGBA,t.UNSIGNED_BYTE,this.data))};var j=function e(n,r){this.workerPool=n,this.actors=[],this.currentActor=0,this.id=t.uniqueId();for(var i=this.workerPool.acquire(this.id),o=0;o<i.length;o++){var a=i[o],s=new e.Actor(a,r,this.id);s.name="Worker "+o,this.actors.push(s)}};function E(e,n,r){var i=function(n,i){if(n)return r(n);if(i){var o=t.pick(i,["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds"]);i.vector_layers&&(o.vectorLayers=i.vector_layers,o.vectorLayerIds=o.vectorLayers.map(function(e){return e.id})),e.url&&(o.tiles=t.canonicalizeTileset(o,e.url)),r(null,o)}};return e.url?t.getJSON(n(t.normalizeSourceURL(e.url),t.ResourceType.Source),i):t.browser.frame(function(){return i(null,e)})}j.prototype.broadcast=function(e,n,r){r=r||function(){},t.asyncAll(this.actors,function(t,r){t.send(e,n,r)},r)},j.prototype.send=function(e,t,n,r){return("number"!=typeof r||isNaN(r))&&(r=this.currentActor=(this.currentActor+1)%this.actors.length),this.actors[r].send(e,t,n),r},j.prototype.remove=function(){this.actors.forEach(function(e){e.remove()}),this.actors=[],this.workerPool.release(this.id)},j.Actor=t.Actor;var D=function(e,n,r){this.bounds=t.LngLatBounds.convert(this.validateBounds(e)),this.minzoom=n||0,this.maxzoom=r||24};D.prototype.validateBounds=function(e){return Array.isArray(e)&&4===e.length?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]},D.prototype.contains=function(e){var n=Math.pow(2,e.z),r=Math.floor(t.mercatorXfromLng(this.bounds.getWest())*n),i=Math.floor(t.mercatorYfromLat(this.bounds.getNorth())*n),o=Math.ceil(t.mercatorXfromLng(this.bounds.getEast())*n),a=Math.ceil(t.mercatorYfromLat(this.bounds.getSouth())*n);return e.x>=r&&e.x<o&&e.y>=i&&e.y<a};var F=function(e){function i(n,r,i,o){if(e.call(this),this.id=n,this.dispatcher=i,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,t.extend(this,t.pick(r,["url","scheme","tileSize"])),this._options=t.extend({type:"vector"},r),this._collectResourceTiming=r.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(o)}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.load=function(){var e=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=E(this._options,this.map._transformRequest,function(n,r){e._tileJSONRequest=null,n?e.fire(new t.ErrorEvent(n)):r&&(t.extend(e,r),r.bounds&&(e.tileBounds=new D(r.bounds,e.minzoom,e.maxzoom)),t.postTurnstileEvent(r.tiles),t.postMapLoadEvent(r.tiles,e.map._getMapId()),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))})},i.prototype.hasTile=function(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)},i.prototype.onAdd=function(e){this.map=e,this.load()},i.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},i.prototype.serialize=function(){return t.extend({},this._options)},i.prototype.loadTile=function(e,n){var r=t.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),this.url),i={request:this.map._transformRequest(r,t.ResourceType.Tile),uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes};function a(t,r){return e.aborted?n(null):t&&404!==t.status?n(t):(r&&r.resourceTiming&&(e.resourceTiming=r.resourceTiming),this.map._refreshExpiredTiles&&r&&e.setExpiryData(r),e.loadVectorData(r,this.map.painter),n(null),void(e.reloadCallback&&(this.loadTile(e,e.reloadCallback),e.reloadCallback=null)))}i.request.collectResourceTiming=this._collectResourceTiming,void 0===e.workerID||"expired"===e.state?e.workerID=this.dispatcher.send("loadTile",i,a.bind(this)):"loading"===e.state?e.reloadCallback=n:this.dispatcher.send("reloadTile",i,a.bind(this),e.workerID)},i.prototype.abortTile=function(e){this.dispatcher.send("abortTile",{uid:e.uid,type:this.type,source:this.id},void 0,e.workerID)},i.prototype.unloadTile=function(e){e.unloadVectorData(),this.dispatcher.send("removeTile",{uid:e.uid,type:this.type,source:this.id},void 0,e.workerID)},i.prototype.hasTransition=function(){return!1},i}(t.Evented),N=function(e){function i(n,r,i,o){e.call(this),this.id=n,this.dispatcher=i,this.setEventedParent(o),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.extend({},r),t.extend(this,t.pick(r,["url","scheme","tileSize"]))}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.load=function(){var e=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=E(this._options,this.map._transformRequest,function(n,r){e._tileJSONRequest=null,n?e.fire(new t.ErrorEvent(n)):r&&(t.extend(e,r),r.bounds&&(e.tileBounds=new D(r.bounds,e.minzoom,e.maxzoom)),t.postTurnstileEvent(r.tiles),t.postMapLoadEvent(r.tiles,e.map._getMapId()),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))})},i.prototype.onAdd=function(e){this.map=e,this.load()},i.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},i.prototype.serialize=function(){return t.extend({},this._options)},i.prototype.hasTile=function(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)},i.prototype.loadTile=function(e,n){var r=this,i=t.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);e.request=t.getImage(this.map._transformRequest(i,t.ResourceType.Tile),function(i,o){if(delete e.request,e.aborted)e.state="unloaded",n(null);else if(i)e.state="errored",n(i);else if(o){r.map._refreshExpiredTiles&&e.setExpiryData(o),delete o.cacheControl,delete o.expires;var a=r.map.painter.context,s=a.gl;e.texture=r.map.painter.getTileTexture(o.width),e.texture?e.texture.update(o,{useMipmap:!0}):(e.texture=new t.Texture(a,o,s.RGBA,{useMipmap:!0}),e.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST),a.extTextureFilterAnisotropic&&s.texParameterf(s.TEXTURE_2D,a.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,a.extTextureFilterAnisotropicMax)),e.state="loaded",n(null)}})},i.prototype.abortTile=function(e,t){e.request&&(e.request.cancel(),delete e.request),t()},i.prototype.unloadTile=function(e,t){e.texture&&this.map.painter.saveTileTexture(e.texture),t()},i.prototype.hasTransition=function(){return!1},i}(t.Evented),B=function(e){function i(n,r,i,o){e.call(this,n,r,i,o),this.type="raster-dem",this.maxzoom=22,this._options=t.extend({},r),this.encoding=r.encoding||"mapbox"}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},i.prototype.loadTile=function(e,n){var r=t.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);e.request=t.getImage(this.map._transformRequest(r,t.ResourceType.Tile),function(r,i){if(delete e.request,e.aborted)e.state="unloaded",n(null);else if(r)e.state="errored",n(r);else if(i){this.map._refreshExpiredTiles&&e.setExpiryData(i),delete i.cacheControl,delete i.expires;var o=t.browser.getImageData(i),a={uid:e.uid,coord:e.tileID,source:this.id,rawImageData:o,encoding:this.encoding};e.workerID&&"expired"!==e.state||(e.workerID=this.dispatcher.send("loadDEMTile",a,function(t,r){t&&(e.state="errored",n(t)),r&&(e.dem=r,e.needsHillshadePrepare=!0,e.state="loaded",n(null))}.bind(this)))}}.bind(this)),e.neighboringTiles=this._getNeighboringTiles(e.tileID)},i.prototype._getNeighboringTiles=function(e){var n=e.canonical,r=Math.pow(2,n.z),i=(n.x-1+r)%r,o=0===n.x?e.wrap-1:e.wrap,a=(n.x+1+r)%r,s=n.x+1===r?e.wrap+1:e.wrap,l={};return l[new t.OverscaledTileID(e.overscaledZ,o,n.z,i,n.y).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,n.z,a,n.y).key]={backfilled:!1},n.y>0&&(l[new t.OverscaledTileID(e.overscaledZ,o,n.z,i,n.y-1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,e.wrap,n.z,n.x,n.y-1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,n.z,a,n.y-1).key]={backfilled:!1}),n.y+1<r&&(l[new t.OverscaledTileID(e.overscaledZ,o,n.z,i,n.y+1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,e.wrap,n.z,n.x,n.y+1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,n.z,a,n.y+1).key]={backfilled:!1}),l},i.prototype.unloadTile=function(e){e.demTexture&&this.map.painter.saveTileTexture(e.demTexture),e.fbo&&(e.fbo.destroy(),delete e.fbo),e.dem&&delete e.dem,delete e.neighboringTiles,e.state="unloaded",this.dispatcher.send("removeDEMTile",{uid:e.uid,source:this.id},void 0,e.workerID)},i}(N),z=function(e){function i(n,r,i,o){e.call(this),this.id=n,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this.dispatcher=i,this.setEventedParent(o),this._data=r.data,this._options=t.extend({},r),this._collectResourceTiming=r.collectResourceTiming,this._resourceTiming=[],void 0!==r.maxzoom&&(this.maxzoom=r.maxzoom),r.type&&(this.type=r.type),r.attribution&&(this.attribution=r.attribution);var a=t.EXTENT/this.tileSize;this.workerOptions=t.extend({source:this.id,cluster:r.cluster||!1,geojsonVtOptions:{buffer:(void 0!==r.buffer?r.buffer:128)*a,tolerance:(void 0!==r.tolerance?r.tolerance:.375)*a,extent:t.EXTENT,maxZoom:this.maxzoom,lineMetrics:r.lineMetrics||!1,generateId:r.generateId||!1},superclusterOptions:{maxZoom:void 0!==r.clusterMaxZoom?Math.min(r.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:t.EXTENT,radius:(r.clusterRadius||50)*a,log:!1},clusterProperties:r.clusterProperties},r.workerOptions)}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.load=function(){var e=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(n){if(n)e.fire(new t.ErrorEvent(n));else{var r={dataType:"source",sourceDataType:"metadata"};e._collectResourceTiming&&e._resourceTiming&&e._resourceTiming.length>0&&(r.resourceTiming=e._resourceTiming,e._resourceTiming=[]),e.fire(new t.Event("data",r))}})},i.prototype.onAdd=function(e){this.map=e,this.load()},i.prototype.setData=function(e){var n=this;return this._data=e,this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(e){if(e)n.fire(new t.ErrorEvent(e));else{var r={dataType:"source",sourceDataType:"content"};n._collectResourceTiming&&n._resourceTiming&&n._resourceTiming.length>0&&(r.resourceTiming=n._resourceTiming,n._resourceTiming=[]),n.fire(new t.Event("data",r))}}),this},i.prototype.getClusterExpansionZoom=function(e,t){return this.dispatcher.send("geojson.getClusterExpansionZoom",{clusterId:e,source:this.id},t,this.workerID),this},i.prototype.getClusterChildren=function(e,t){return this.dispatcher.send("geojson.getClusterChildren",{clusterId:e,source:this.id},t,this.workerID),this},i.prototype.getClusterLeaves=function(e,t,n,r){return this.dispatcher.send("geojson.getClusterLeaves",{source:this.id,clusterId:e,limit:t,offset:n},r,this.workerID),this},i.prototype._updateWorkerData=function(e){var n=this,r=t.extend({},this.workerOptions),i=this._data;"string"==typeof i?(r.request=this.map._transformRequest(t.browser.resolveURL(i),t.ResourceType.Source),r.request.collectResourceTiming=this._collectResourceTiming):r.data=JSON.stringify(i),this.workerID=this.dispatcher.send(this.type+".loadData",r,function(t,i){n._removed||i&&i.abandoned||(n._loaded=!0,i&&i.resourceTiming&&i.resourceTiming[n.id]&&(n._resourceTiming=i.resourceTiming[n.id].slice(0)),n.dispatcher.send(n.type+".coalesce",{source:r.source},null,n.workerID),e(t))},this.workerID)},i.prototype.loadTile=function(e,n){var r=this,i=void 0===e.workerID?"loadTile":"reloadTile",o={type:this.type,uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes};e.workerID=this.dispatcher.send(i,o,function(t,o){return e.unloadVectorData(),e.aborted?n(null):t?n(t):(e.loadVectorData(o,r.map.painter,"reloadTile"===i),n(null))},this.workerID)},i.prototype.abortTile=function(e){e.aborted=!0},i.prototype.unloadTile=function(e){e.unloadVectorData(),this.dispatcher.send("removeTile",{uid:e.uid,type:this.type,source:this.id},null,e.workerID)},i.prototype.onRemove=function(){this._removed=!0,this.dispatcher.send("removeSource",{type:this.type,source:this.id},null,this.workerID)},i.prototype.serialize=function(){return t.extend({},this._options,{type:this.type,data:this._data})},i.prototype.hasTransition=function(){return!1},i}(t.Evented),U=function(e){function i(t,n,r,i){e.call(this),this.id=t,this.dispatcher=r,this.coordinates=n.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this.setEventedParent(i),this.options=n}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.load=function(e,n){var r=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this.url=this.options.url,t.getImage(this.map._transformRequest(this.url,t.ResourceType.Image),function(i,o){i?r.fire(new t.ErrorEvent(i)):o&&(r.image=o,e&&(r.coordinates=e),n&&n(),r._finishLoading())})},i.prototype.updateImage=function(e){var t=this;return this.image&&e.url?(this.options.url=e.url,this.load(e.coordinates,function(){t.texture=null}),this):this},i.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})))},i.prototype.onAdd=function(e){this.map=e,this.load()},i.prototype.setCoordinates=function(e){var n=this;this.coordinates=e;var r=e.map(t.MercatorCoordinate.fromLngLat);this.tileID=function(e){for(var n=1/0,r=1/0,i=-1/0,o=-1/0,a=0,s=e;a<s.length;a+=1){var l=s[a];n=Math.min(n,l.x),r=Math.min(r,l.y),i=Math.max(i,l.x),o=Math.max(o,l.y)}var u=i-n,c=o-r,p=Math.max(u,c),h=Math.max(0,Math.floor(-Math.log(p)/Math.LN2)),f=Math.pow(2,h);return new t.CanonicalTileID(h,Math.floor((n+i)/2*f),Math.floor((r+o)/2*f))}(r),this.minzoom=this.maxzoom=this.tileID.z;var i=r.map(function(e){return n.tileID.getTilePoint(e)._round()});return this._boundsArray=new t.StructArrayLayout4i8,this._boundsArray.emplaceBack(i[0].x,i[0].y,0,0),this._boundsArray.emplaceBack(i[1].x,i[1].y,t.EXTENT,0),this._boundsArray.emplaceBack(i[3].x,i[3].y,0,t.EXTENT),this._boundsArray.emplaceBack(i[2].x,i[2].y,t.EXTENT,t.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})),this},i.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var e=this.map.painter.context,n=e.gl;for(var r in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,t.rasterBoundsAttributes.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new t.Texture(e,this.image,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)),this.tiles){var i=this.tiles[r];"loaded"!==i.state&&(i.state="loaded",i.texture=this.texture)}}},i.prototype.loadTile=function(e,t){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={},t(null)):(e.state="errored",t(null))},i.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},i.prototype.hasTransition=function(){return!1},i}(t.Evented),V={vector:F,raster:N,"raster-dem":B,geojson:z,video:function(e){function i(t,n,r,i){e.call(this,t,n,r,i),this.roundZoom=!0,this.type="video",this.options=n}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.load=function(){var e=this,n=this.options;this.urls=[];for(var r=0,i=n.urls;r<i.length;r+=1){var o=i[r];this.urls.push(this.map._transformRequest(o,t.ResourceType.Source).url)}t.getVideo(this.urls,function(n,r){n?e.fire(new t.ErrorEvent(n)):r&&(e.video=r,e.video.loop=!0,e.video.addEventListener("playing",function(){e.map.triggerRepaint()}),e.map&&e.video.play(),e._finishLoading())})},i.prototype.getVideo=function(){return this.video},i.prototype.onAdd=function(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},i.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var e=this.map.painter.context,n=e.gl;for(var r in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,t.rasterBoundsAttributes.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.video)):(this.texture=new t.Texture(e,this.video,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)),this.tiles){var i=this.tiles[r];"loaded"!==i.state&&(i.state="loaded",i.texture=this.texture)}}},i.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},i.prototype.hasTransition=function(){return this.video&&!this.video.paused},i}(U),image:U,canvas:function(e){function i(n,r,i,o){e.call(this,n,r,i,o),r.coordinates?Array.isArray(r.coordinates)&&4===r.coordinates.length&&!r.coordinates.some(function(e){return!Array.isArray(e)||2!==e.length||e.some(function(e){return"number"!=typeof e})})||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'missing required property "coordinates"'))),r.animate&&"boolean"!=typeof r.animate&&this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'optional "animate" property must be a boolean value'))),r.canvas?"string"==typeof r.canvas||r.canvas instanceof t.window.HTMLCanvasElement||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'missing required property "canvas"'))),this.options=r,this.animate=void 0===r.animate||r.animate}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.load=function(){this.canvas||(this.canvas=this.options.canvas instanceof t.window.HTMLCanvasElement?this.options.canvas:t.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new t.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing=!1},this._finishLoading())},i.prototype.getCanvas=function(){return this.canvas},i.prototype.onAdd=function(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()},i.prototype.onRemove=function(){this.pause()},i.prototype.prepare=function(){var e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var n=this.map.painter.context,r=n.gl;for(var i in this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,t.rasterBoundsAttributes.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new t.Texture(n,this.canvas,r.RGBA,{premultiply:!0}),this.tiles){var o=this.tiles[i];"loaded"!==o.state&&(o.state="loaded",o.texture=this.texture)}}},i.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},i.prototype.hasTransition=function(){return this._playing},i.prototype._hasInvalidDimensions=function(){for(var e=0,t=[this.canvas.width,this.canvas.height];e<t.length;e+=1){var n=t[e];if(isNaN(n)||n<=0)return!0}return!1},i}(U)},G=function(e,n,r,i){var o=new V[n.type](e,n,r,i);if(o.id!==e)throw new Error("Expected Source id to be "+e+" instead of "+o.id);return t.bindAll(["load","abort","unload","serialize","prepare"],o),o};function R(e,n){var r=t.identity([]);return t.translate(r,r,[1,1,0]),t.scale(r,r,[.5*e.width,.5*e.height,1]),t.multiply(r,r,e.calculatePosMatrix(n.toUnwrapped()))}function M(e,t,n,r,i){var o=function(e,t,n){if(e)for(var r=0,i=e;r<i.length;r+=1){var o=t[i[r]];if(o&&o.source===n&&"fill-extrusion"===o.type)return!0}else for(var a in t){var s=t[a];if(s.source===n&&"fill-extrusion"===s.type)return!0}return!1}(r&&r.layers,t,e.id),a=i.maxPitchScaleFactor(),s=e.tilesIn(n,a,o);s.sort(A);for(var l=[],u=0,c=s;u<c.length;u+=1){var p=c[u];l.push({wrappedTileID:p.tileID.wrapped().key,queryResults:p.tile.queryRenderedFeatures(t,e._state,p.queryGeometry,p.cameraQueryGeometry,p.scale,r,i,a,R(e.transform,p.tileID))})}var h=function(e){for(var t={},n={},r=0,i=e;r<i.length;r+=1){var o=i[r],a=o.queryResults,s=o.wrappedTileID,l=n[s]=n[s]||{};for(var u in a)for(var c=a[u],p=l[u]=l[u]||{},h=t[u]=t[u]||[],f=0,d=c;f<d.length;f+=1){var g=d[f];p[g.featureIndex]||(p[g.featureIndex]=!0,h.push(g))}}return t}(l);for(var f in h)h[f].forEach(function(t){var n=t.feature,r=e.getFeatureState(n.layer["source-layer"],n.id);n.source=n.layer.source,n.layer["source-layer"]&&(n.sourceLayer=n.layer["source-layer"]),n.state=r});return h}function A(e,t){var n=e.tileID,r=t.tileID;return n.overscaledZ-r.overscaledZ||n.canonical.y-r.canonical.y||n.wrap-r.wrap||n.canonical.x-r.canonical.x}var W=function(e,t){this.max=e,this.onRemove=t,this.reset()};W.prototype.reset=function(){for(var e in this.data)for(var t=0,n=this.data[e];t<n.length;t+=1){var r=n[t];r.timeout&&clearTimeout(r.timeout),this.onRemove(r.value)}return this.data={},this.order=[],this},W.prototype.add=function(e,t,n){var r=this,i=e.wrapped().key;void 0===this.data[i]&&(this.data[i]=[]);var o={value:t,timeout:void 0};if(void 0!==n&&(o.timeout=setTimeout(function(){r.remove(e,o)},n)),this.data[i].push(o),this.order.push(i),this.order.length>this.max){var a=this._getAndRemoveByKey(this.order[0]);a&&this.onRemove(a)}return this},W.prototype.has=function(e){return e.wrapped().key in this.data},W.prototype.getAndRemove=function(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null},W.prototype._getAndRemoveByKey=function(e){var t=this.data[e].shift();return t.timeout&&clearTimeout(t.timeout),0===this.data[e].length&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),t.value},W.prototype.get=function(e){return this.has(e)?this.data[e.wrapped().key][0].value:null},W.prototype.remove=function(e,t){if(!this.has(e))return this;var n=e.wrapped().key,r=void 0===t?0:this.data[n].indexOf(t),i=this.data[n][r];return this.data[n].splice(r,1),i.timeout&&clearTimeout(i.timeout),0===this.data[n].length&&delete this.data[n],this.onRemove(i.value),this.order.splice(this.order.indexOf(n),1),this},W.prototype.setMaxSize=function(e){for(this.max=e;this.order.length>this.max;){var t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t)}return this};var q=function(e,t,n){this.context=e;var r=e.gl;this.buffer=r.createBuffer(),this.dynamicDraw=Boolean(n),this.context.unbindVAO(),e.bindElementBuffer.set(this.buffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||delete t.arrayBuffer};q.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},q.prototype.updateData=function(e){var t=this.context.gl;this.context.unbindVAO(),this.bind(),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)},q.prototype.destroy=function(){var e=this.context.gl;this.buffer&&(e.deleteBuffer(this.buffer),delete this.buffer)};var H={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},X=function(e,t,n,r){this.length=t.length,this.attributes=n,this.itemSize=t.bytesPerElement,this.dynamicDraw=r,this.context=e;var i=e.gl;this.buffer=i.createBuffer(),e.bindVertexBuffer.set(this.buffer),i.bufferData(i.ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||delete t.arrayBuffer};X.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},X.prototype.updateData=function(e){var t=this.context.gl;this.bind(),t.bufferSubData(t.ARRAY_BUFFER,0,e.arrayBuffer)},X.prototype.enableAttributes=function(e,t){for(var n=0;n<this.attributes.length;n++){var r=this.attributes[n],i=t.attributes[r.name];void 0!==i&&e.enableVertexAttribArray(i)}},X.prototype.setVertexAttribPointers=function(e,t,n){for(var r=0;r<this.attributes.length;r++){var i=this.attributes[r],o=t.attributes[i.name];void 0!==o&&e.vertexAttribPointer(o,i.components,e[H[i.type]],!1,this.itemSize,i.offset+this.itemSize*(n||0))}},X.prototype.destroy=function(){var e=this.context.gl;this.buffer&&(e.deleteBuffer(this.buffer),delete this.buffer)};var K=function(e){this.gl=e.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};K.prototype.get=function(){return this.current},K.prototype.set=function(e){},K.prototype.getDefault=function(){return this.default},K.prototype.setDefault=function(){this.set(this.default)};var Z=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.getDefault=function(){return t.Color.transparent},i.prototype.set=function(e){var t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)},i}(K),Y=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return 1},e.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.clearDepth(e),this.current=e,this.dirty=!1)},e}(K),J=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return 0},e.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.clearStencil(e),this.current=e,this.dirty=!1)},e}(K),Q=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return[!0,!0,!0,!0]},e.prototype.set=function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)},e}(K),$=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return!0},e.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.depthMask(e),this.current=e,this.dirty=!1)},e}(K),ie=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return 255},e.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.stencilMask(e),this.current=e,this.dirty=!1)},e}(K),ae=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},e.prototype.set=function(e){var t=this.current;(e.func!==t.func||e.ref!==t.ref||e.mask!==t.mask||this.dirty)&&(this.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e,this.dirty=!1)},e}(K),le=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){var e=this.gl;return[e.KEEP,e.KEEP,e.KEEP]},e.prototype.set=function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||this.dirty)&&(this.gl.stencilOp(e[0],e[1],e[2]),this.current=e,this.dirty=!1)},e}(K),ue=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.STENCIL_TEST):t.disable(t.STENCIL_TEST),this.current=e,this.dirty=!1}},e}(K),ce=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return[0,1]},e.prototype.set=function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.depthRange(e[0],e[1]),this.current=e,this.dirty=!1)},e}(K),pe=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST),this.current=e,this.dirty=!1}},e}(K),he=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return this.gl.LESS},e.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.depthFunc(e),this.current=e,this.dirty=!1)},e}(K),fe=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.BLEND):t.disable(t.BLEND),this.current=e,this.dirty=!1}},e}(K),de=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){var e=this.gl;return[e.ONE,e.ZERO]},e.prototype.set=function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.blendFunc(e[0],e[1]),this.current=e,this.dirty=!1)},e}(K),ge=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.getDefault=function(){return t.Color.transparent},i.prototype.set=function(e){var t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)},i}(K),me=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return this.gl.FUNC_ADD},e.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.blendEquation(e),this.current=e,this.dirty=!1)},e}(K),ye=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.CULL_FACE):t.disable(t.CULL_FACE),this.current=e,this.dirty=!1}},e}(K),ve=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return this.gl.BACK},e.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.cullFace(e),this.current=e,this.dirty=!1)},e}(K),be=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return this.gl.CCW},e.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.frontFace(e),this.current=e,this.dirty=!1)},e}(K),xe=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.useProgram(e),this.current=e,this.dirty=!1)},e}(K),Se=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return this.gl.TEXTURE0},e.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.activeTexture(e),this.current=e,this.dirty=!1)},e}(K),Ee=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){var e=this.gl;return[0,0,e.drawingBufferWidth,e.drawingBufferHeight]},e.prototype.set=function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)},e}(K),Pe=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,e),this.current=e,this.dirty=!1}},e}(K),Ce=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindRenderbuffer(t.RENDERBUFFER,e),this.current=e,this.dirty=!1}},e}(K),ke=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindTexture(t.TEXTURE_2D,e),this.current=e,this.dirty=!1}},e}(K),Te=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindBuffer(t.ARRAY_BUFFER,e),this.current=e,this.dirty=!1}},e}(K),Ae=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(e){var t=this.gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e),this.current=e,this.dirty=!1},e}(K),Oe=function(t){function e(e){t.call(this,e),this.vao=e.extVertexArrayObject}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(e){this.vao&&(e!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(e),this.current=e,this.dirty=!1)},e}(K),Ie=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return 4},e.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;t.pixelStorei(t.UNPACK_ALIGNMENT,e),this.current=e,this.dirty=!1}},e}(K),Re=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e,this.dirty=!1}},e}(K),Le=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e),this.current=e,this.dirty=!1}},e}(K),Me=function(t){function e(e,n){t.call(this,e),this.context=e,this.parent=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e}(K),je=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setDirty=function(){this.dirty=!0},e.prototype.set=function(e){if(e!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var t=this.gl;t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),this.current=e,this.dirty=!1}},e}(Me),De=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(e){if(e!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var t=this.gl;t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e),this.current=e,this.dirty=!1}},e}(Me),Fe=function(e,t,n){this.context=e,this.width=t,this.height=n;var r=e.gl,i=this.framebuffer=r.createFramebuffer();this.colorAttachment=new je(e,i),this.depthAttachment=new De(e,i)};Fe.prototype.destroy=function(){var e=this.context.gl,t=this.colorAttachment.get();t&&e.deleteTexture(t);var n=this.depthAttachment.get();n&&e.deleteRenderbuffer(n),e.deleteFramebuffer(this.framebuffer)};var Ne=function(e,t,n){this.func=e,this.mask=t,this.range=n};Ne.ReadOnly=!1,Ne.ReadWrite=!0,Ne.disabled=new Ne(519,Ne.ReadOnly,[0,1]);var Be=function(e,t,n,r,i,o){this.test=e,this.ref=t,this.mask=n,this.fail=r,this.depthFail=i,this.pass=o};Be.disabled=new Be({func:519,mask:0},0,0,7680,7680,7680);var ze=function(e,t,n){this.blendFunction=e,this.blendColor=t,this.mask=n};ze.disabled=new ze(ze.Replace=[1,0],t.Color.transparent,[!1,!1,!1,!1]),ze.unblended=new ze(ze.Replace,t.Color.transparent,[!0,!0,!0,!0]),ze.alphaBlended=new ze([1,771],t.Color.transparent,[!0,!0,!0,!0]);var Ue=function(e,t,n){this.enable=e,this.mode=t,this.frontFace=n};Ue.disabled=new Ue(!1,1029,2305),Ue.backCCW=new Ue(!0,1029,2305);var Ve=function(e){this.gl=e,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Z(this),this.clearDepth=new Y(this),this.clearStencil=new J(this),this.colorMask=new Q(this),this.depthMask=new $(this),this.stencilMask=new ie(this),this.stencilFunc=new ae(this),this.stencilOp=new le(this),this.stencilTest=new ue(this),this.depthRange=new ce(this),this.depthTest=new pe(this),this.depthFunc=new he(this),this.blend=new fe(this),this.blendFunc=new de(this),this.blendColor=new ge(this),this.blendEquation=new me(this),this.cullFace=new ye(this),this.cullFaceSide=new ve(this),this.frontFace=new be(this),this.program=new xe(this),this.activeTexture=new Se(this),this.viewport=new Ee(this),this.bindFramebuffer=new Pe(this),this.bindRenderbuffer=new Ce(this),this.bindTexture=new ke(this),this.bindVertexBuffer=new Te(this),this.bindElementBuffer=new Ae(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Oe(this),this.pixelStoreUnpack=new Ie(this),this.pixelStoreUnpackPremultiplyAlpha=new Re(this),this.pixelStoreUnpackFlipY=new Le(this),this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=e.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&e.getExtension("OES_texture_half_float_linear")};Ve.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Ve.prototype.createIndexBuffer=function(e,t){return new q(this,e,t)},Ve.prototype.createVertexBuffer=function(e,t,n){return new X(this,e,t,n)},Ve.prototype.createRenderbuffer=function(e,t,n){var r=this.gl,i=r.createRenderbuffer();return this.bindRenderbuffer.set(i),r.renderbufferStorage(r.RENDERBUFFER,e,t,n),this.bindRenderbuffer.set(null),i},Ve.prototype.createFramebuffer=function(e,t){return new Fe(this,e,t)},Ve.prototype.clear=function(e){var t=e.color,n=e.depth,r=this.gl,i=0;t&&(i|=r.COLOR_BUFFER_BIT,this.clearColor.set(t),this.colorMask.set([!0,!0,!0,!0])),void 0!==n&&(i|=r.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(n),this.depthMask.set(!0)),r.clear(i)},Ve.prototype.setCullFace=function(e){!1===e.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(e.mode),this.frontFace.set(e.frontFace))},Ve.prototype.setDepthMode=function(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1)},Ve.prototype.setStencilMode=function(e){e.test.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1)},Ve.prototype.setColorMode=function(e){t.isEqual(e.blendFunction,ze.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)},Ve.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Ge=function(e){function i(n,r,i){var o=this;e.call(this),this.id=n,this.dispatcher=i,this.on("data",function(e){"source"===e.dataType&&"metadata"===e.sourceDataType&&(o._sourceLoaded=!0),o._sourceLoaded&&!o._paused&&"source"===e.dataType&&"content"===e.sourceDataType&&(o.reload(),o.transform&&o.update(o.transform))}),this.on("error",function(){o._sourceErrored=!0}),this._source=G(n,r,i,this),this._tiles={},this._cache=new W(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._coveredTiles={},this._state=new t.SourceFeatureState}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.onAdd=function(e){this.map=e,this._maxTileCacheSize=e?e._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(e)},i.prototype.onRemove=function(e){this._source&&this._source.onRemove&&this._source.onRemove(e)},i.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;for(var e in this._tiles){var t=this._tiles[e];if("loaded"!==t.state&&"errored"!==t.state)return!1}return!0},i.prototype.getSource=function(){return this._source},i.prototype.pause=function(){this._paused=!0},i.prototype.resume=function(){if(this._paused){var e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform)}},i.prototype._loadTile=function(e,t){return this._source.loadTile(e,t)},i.prototype._unloadTile=function(e){if(this._source.unloadTile)return this._source.unloadTile(e,function(){})},i.prototype._abortTile=function(e){if(this._source.abortTile)return this._source.abortTile(e,function(){})},i.prototype.serialize=function(){return this._source.serialize()},i.prototype.prepare=function(e){for(var t in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles)this._tiles[t].upload(e)},i.prototype.getIds=function(){return Object.keys(this._tiles).map(Number).sort(St)},i.prototype.getRenderableIds=function(e){var n=this,r=[];for(var i in this._tiles)this._isIdRenderable(+i,e)&&r.push(+i);return e?r.sort(function(e,r){var i=n._tiles[e].tileID,o=n._tiles[r].tileID,a=new t.Point(i.canonical.x,i.canonical.y)._rotate(n.transform.angle),s=new t.Point(o.canonical.x,o.canonical.y)._rotate(n.transform.angle);return i.overscaledZ-o.overscaledZ||s.y-a.y||s.x-a.x}):r.sort(St)},i.prototype.hasRenderableParent=function(e){var t=this.findLoadedParent(e,0);return!!t&&this._isIdRenderable(t.tileID.key)},i.prototype._isIdRenderable=function(e,t){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(t||!this._tiles[e].holdingForFade())},i.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var e in this._cache.reset(),this._tiles)"errored"!==this._tiles[e].state&&this._reloadTile(e,"reloading")},i.prototype._reloadTile=function(e,t){var n=this._tiles[e];n&&("loading"!==n.state&&(n.state=t),this._loadTile(n,this._tileLoaded.bind(this,n,e,t)))},i.prototype._tileLoaded=function(e,n,r,i){if(i)return e.state="errored",void(404!==i.status?this._source.fire(new t.ErrorEvent(i,{tile:e})):this.update(this.transform));e.timeAdded=t.browser.now(),"expired"===r&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(n,e),"raster-dem"===this.getSource().type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new t.Event("data",{dataType:"source",tile:e,coord:e.tileID}))},i.prototype._backfillDEM=function(e){for(var t=this.getRenderableIds(),n=0;n<t.length;n++){var r=t[n];if(e.neighboringTiles&&e.neighboringTiles[r]){var i=this.getTileByID(r);a(e,i),a(i,e)}}function a(e,t){e.needsHillshadePrepare=!0;var n=t.tileID.canonical.x-e.tileID.canonical.x,r=t.tileID.canonical.y-e.tileID.canonical.y,i=Math.pow(2,e.tileID.canonical.z),o=t.tileID.key;0===n&&0===r||Math.abs(r)>1||(Math.abs(n)>1&&(1===Math.abs(n+i)?n+=i:1===Math.abs(n-i)&&(n-=i)),t.dem&&e.dem&&(e.dem.backfillBorder(t.dem,n,r),e.neighboringTiles&&e.neighboringTiles[o]&&(e.neighboringTiles[o].backfilled=!0)))}},i.prototype.getTile=function(e){return this.getTileByID(e.key)},i.prototype.getTileByID=function(e){return this._tiles[e]},i.prototype.getZoom=function(e){return e.zoom+e.scaleZoom(e.tileSize/this._source.tileSize)},i.prototype._retainLoadedChildren=function(e,t,n,r){for(var i in this._tiles){var o=this._tiles[i];if(!(r[i]||!o.hasData()||o.tileID.overscaledZ<=t||o.tileID.overscaledZ>n)){for(var a=o.tileID;o&&o.tileID.overscaledZ>t+1;){var s=o.tileID.scaledTo(o.tileID.overscaledZ-1);(o=this._tiles[s.key])&&o.hasData()&&(a=s)}for(var l=a;l.overscaledZ>t;)if(e[(l=l.scaledTo(l.overscaledZ-1)).key]){r[a.key]=a;break}}}},i.prototype.findLoadedParent=function(e,t){for(var n=e.overscaledZ-1;n>=t;n--){var r=e.scaledTo(n);if(!r)return;var i=String(r.key),o=this._tiles[i];if(o&&o.hasData())return o;if(this._cache.has(r))return this._cache.get(r)}},i.prototype.updateCacheSize=function(e){var t=(Math.ceil(e.width/this._source.tileSize)+1)*(Math.ceil(e.height/this._source.tileSize)+1),n=Math.floor(5*t),r="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,n):n;this._cache.setMaxSize(r)},i.prototype.handleWrapJump=function(e){var t=(e-(void 0===this._prevLng?e:this._prevLng))/360,n=Math.round(t);if(this._prevLng=e,n){var r={};for(var i in this._tiles){var o=this._tiles[i];o.tileID=o.tileID.unwrapTo(o.tileID.wrap+n),r[o.tileID.key]=o}for(var a in this._tiles=r,this._timers)clearTimeout(this._timers[a]),delete this._timers[a];for(var s in this._tiles){var l=this._tiles[s];this._setTileReloadTimer(s,l)}}},i.prototype.update=function(e){var n=this;if(this.transform=e,this._sourceLoaded&&!this._paused){var r;this.updateCacheSize(e),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?r=e.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(e){return new t.OverscaledTileID(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y)}):(r=e.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(r=r.filter(function(e){return n._source.hasTile(e)}))):r=[];var o=(this._source.roundZoom?Math.round:Math.floor)(this.getZoom(e)),a=Math.max(o-i.maxOverzooming,this._source.minzoom),s=Math.max(o+i.maxUnderzooming,this._source.minzoom),l=this._updateRetainedTiles(r,o);if(zt(this._source.type)){for(var u={},c={},p=0,h=Object.keys(l);p<h.length;p+=1){var f=h[p],d=l[f],g=this._tiles[f];if(g&&!(g.fadeEndTime&&g.fadeEndTime<=t.browser.now())){var m=this.findLoadedParent(d,a);m&&(this._addTile(m.tileID),u[m.tileID.key]=m.tileID),c[f]=d}}for(var y in this._retainLoadedChildren(c,o,s,l),u)l[y]||(this._coveredTiles[y]=!0,l[y]=u[y])}for(var v in l)this._tiles[v].clearFadeHold();for(var _=0,b=t.keysDifference(this._tiles,l);_<b.length;_+=1){var x=b[_],w=this._tiles[x];w.hasSymbolBuckets&&!w.holdingForFade()?w.setHoldDuration(this.map._fadeDuration):w.hasSymbolBuckets&&!w.symbolFadeFinished()||this._removeTile(x)}}},i.prototype.releaseSymbolFadeTiles=function(){for(var e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(e)},i.prototype._updateRetainedTiles=function(e,t){for(var n={},r={},o=Math.max(t-i.maxOverzooming,this._source.minzoom),a=Math.max(t+i.maxUnderzooming,this._source.minzoom),s={},l=0,u=e;l<u.length;l+=1){var c=u[l],p=this._addTile(c);n[c.key]=c,p.hasData()||t<this._source.maxzoom&&(s[c.key]=c)}this._retainLoadedChildren(s,t,a,n);for(var h=0,f=e;h<f.length;h+=1){var d=f[h],g=this._tiles[d.key];if(!g.hasData()){if(t+1>this._source.maxzoom){var m=d.children(this._source.maxzoom)[0],y=this.getTile(m);if(y&&y.hasData()){n[m.key]=m;continue}}else{var v=d.children(this._source.maxzoom);if(n[v[0].key]&&n[v[1].key]&&n[v[2].key]&&n[v[3].key])continue}for(var _=g.wasRequested(),b=d.overscaledZ-1;b>=o;--b){var x=d.scaledTo(b);if(r[x.key])break;if(r[x.key]=!0,!(g=this.getTile(x))&&_&&(g=this._addTile(x)),g&&(n[x.key]=x,_=g.wasRequested(),g.hasData()))break}}}return n},i.prototype._addTile=function(e){var n=this._tiles[e.key];if(n)return n;(n=this._cache.getAndRemove(e))&&(this._setTileReloadTimer(e.key,n),n.tileID=e,this._state.initializeTileState(n,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,n)));var r=Boolean(n);return r||(n=new t.Tile(e,this._source.tileSize*e.overscaleFactor()),this._loadTile(n,this._tileLoaded.bind(this,n,e.key,n.state))),n?(n.uses++,this._tiles[e.key]=n,r||this._source.fire(new t.Event("dataloading",{tile:n,coord:n.tileID,dataType:"source"})),n):null},i.prototype._setTileReloadTimer=function(e,t){var n=this;e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);var r=t.getExpiryTimeout();r&&(this._timers[e]=setTimeout(function(){n._reloadTile(e,"expired"),delete n._timers[e]},r))},i.prototype._removeTile=function(e){var t=this._tiles[e];t&&(t.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),t.uses>0||(t.hasData()?this._cache.add(t.tileID,t,t.getExpiryTimeout()):(t.aborted=!0,this._abortTile(t),this._unloadTile(t))))},i.prototype.clearTiles=function(){for(var e in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(e);this._cache.reset()},i.prototype.tilesIn=function(e,n,r){var i=this,o=[],a=this.transform;if(!a)return o;for(var s=r?a.getCameraQueryGeometry(e):e,l=e.map(function(e){return a.pointCoordinate(e)}),u=s.map(function(e){return a.pointCoordinate(e)}),c=this.getIds(),p=1/0,h=1/0,f=-1/0,d=-1/0,g=0,m=u;g<m.length;g+=1){var y=m[g];p=Math.min(p,y.x),h=Math.min(h,y.y),f=Math.max(f,y.x),d=Math.max(d,y.y)}for(var v=function(e){var r=i._tiles[c[e]];if(!r.holdingForFade()){var s=r.tileID,g=Math.pow(2,a.zoom-r.tileID.overscaledZ),m=n*r.queryPadding*t.EXTENT/r.tileSize/g,y=[s.getTilePoint(new t.MercatorCoordinate(p,h)),s.getTilePoint(new t.MercatorCoordinate(f,d))];if(y[0].x-m<t.EXTENT&&y[0].y-m<t.EXTENT&&y[1].x+m>=0&&y[1].y+m>=0){var v=l.map(function(e){return s.getTilePoint(e)}),_=u.map(function(e){return s.getTilePoint(e)});o.push({tile:r,tileID:s,queryGeometry:v,cameraQueryGeometry:_,scale:g})}}},_=0;_<c.length;_++)v(_);return o},i.prototype.getVisibleCoordinates=function(e){for(var t=this,n=this.getRenderableIds(e).map(function(e){return t._tiles[e].tileID}),r=0,i=n;r<i.length;r+=1){var o=i[r];o.posMatrix=this.transform.calculatePosMatrix(o.toUnwrapped())}return n},i.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(zt(this._source.type))for(var e in this._tiles){var n=this._tiles[e];if(void 0!==n.fadeEndTime&&n.fadeEndTime>=t.browser.now())return!0}return!1},i.prototype.setFeatureState=function(e,t,n){e=e||"_geojsonTileLayer",this._state.updateState(e,t,n)},i.prototype.removeFeatureState=function(e,t,n){e=e||"_geojsonTileLayer",this._state.removeFeatureState(e,t,n)},i.prototype.getFeatureState=function(e,t){return e=e||"_geojsonTileLayer",this._state.getState(e,t)},i}(t.Evented);function St(e,t){return e%32-t%32||t-e}function zt(e){return"raster"===e||"image"===e||"video"===e}function Lt(){return new t.window.Worker(Mr.workerUrl)}Ge.maxOverzooming=10,Ge.maxUnderzooming=3;var We=function(){this.active={}};We.prototype.acquire=function(e){if(!this.workers)for(this.workers=[];this.workers.length<We.workerCount;)this.workers.push(new Lt);return this.active[e]=!0,this.workers.slice()},We.prototype.release=function(e){delete this.active[e],0===Object.keys(this.active).length&&(this.workers.forEach(function(e){e.terminate()}),this.workers=null)};var qe,He=Math.floor(t.browser.hardwareConcurrency/2);function Mt(e,n){var r={};for(var i in e)"ref"!==i&&(r[i]=e[i]);return t.refProperties.forEach(function(e){e in n&&(r[e]=n[e])}),r}function At(e){e=e.slice();for(var t=Object.create(null),n=0;n<e.length;n++)t[e[n].id]=e[n];for(var r=0;r<e.length;r++)"ref"in e[r]&&(e[r]=Mt(e[r],t[e[r].ref]));return e}We.workerCount=Math.max(Math.min(He,6),1);var Xe={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Bt(e,t,n){n.push({command:Xe.addSource,args:[e,t[e]]})}function Ot(e,t,n){t.push({command:Xe.removeSource,args:[e]}),n[e]=!0}function Ft(e,t,n,r){Ot(e,n,r),Bt(e,t,n)}function Ut(e,n,r){var i;for(i in e[r])if(e[r].hasOwnProperty(i)&&"data"!==i&&!t.isEqual(e[r][i],n[r][i]))return!1;for(i in n[r])if(n[r].hasOwnProperty(i)&&"data"!==i&&!t.isEqual(e[r][i],n[r][i]))return!1;return!0}function Nt(e,n,r,i,o,a){var s;for(s in n=n||{},e=e||{})e.hasOwnProperty(s)&&(t.isEqual(e[s],n[s])||r.push({command:a,args:[i,s,n[s],o]}));for(s in n)n.hasOwnProperty(s)&&!e.hasOwnProperty(s)&&(t.isEqual(e[s],n[s])||r.push({command:a,args:[i,s,n[s],o]}))}function Zt(e){return e.id}function jt(e,t){return e[t.id]=t,e}function Vt(e,n){if(!e)return[{command:Xe.setStyle,args:[n]}];var r=[];try{if(!t.isEqual(e.version,n.version))return[{command:Xe.setStyle,args:[n]}];t.isEqual(e.center,n.center)||r.push({command:Xe.setCenter,args:[n.center]}),t.isEqual(e.zoom,n.zoom)||r.push({command:Xe.setZoom,args:[n.zoom]}),t.isEqual(e.bearing,n.bearing)||r.push({command:Xe.setBearing,args:[n.bearing]}),t.isEqual(e.pitch,n.pitch)||r.push({command:Xe.setPitch,args:[n.pitch]}),t.isEqual(e.sprite,n.sprite)||r.push({command:Xe.setSprite,args:[n.sprite]}),t.isEqual(e.glyphs,n.glyphs)||r.push({command:Xe.setGlyphs,args:[n.glyphs]}),t.isEqual(e.transition,n.transition)||r.push({command:Xe.setTransition,args:[n.transition]}),t.isEqual(e.light,n.light)||r.push({command:Xe.setLight,args:[n.light]});var i={},o=[];!function(e,n,r,i){var o;for(o in n=n||{},e=e||{})e.hasOwnProperty(o)&&(n.hasOwnProperty(o)||Ot(o,r,i));for(o in n)n.hasOwnProperty(o)&&(e.hasOwnProperty(o)?t.isEqual(e[o],n[o])||("geojson"===e[o].type&&"geojson"===n[o].type&&Ut(e,n,o)?r.push({command:Xe.setGeoJSONSourceData,args:[o,n[o].data]}):Ft(o,n,r,i)):Bt(o,n,r))}(e.sources,n.sources,o,i);var a=[];e.layers&&e.layers.forEach(function(e){i[e.source]?r.push({command:Xe.removeLayer,args:[e.id]}):a.push(e)}),r=r.concat(o),function(e,n,r){n=n||[];var i,o,a,s,l,u,c,p=(e=e||[]).map(Zt),h=n.map(Zt),f=e.reduce(jt,{}),d=n.reduce(jt,{}),g=p.slice(),m=Object.create(null);for(i=0,o=0;i<p.length;i++)a=p[i],d.hasOwnProperty(a)?o++:(r.push({command:Xe.removeLayer,args:[a]}),g.splice(g.indexOf(a,o),1));for(i=0,o=0;i<h.length;i++)a=h[h.length-1-i],g[g.length-1-i]!==a&&(f.hasOwnProperty(a)?(r.push({command:Xe.removeLayer,args:[a]}),g.splice(g.lastIndexOf(a,g.length-o),1)):o++,u=g[g.length-i],r.push({command:Xe.addLayer,args:[d[a],u]}),g.splice(g.length-i,0,a),m[a]=!0);for(i=0;i<h.length;i++)if(s=f[a=h[i]],l=d[a],!m[a]&&!t.isEqual(s,l))if(t.isEqual(s.source,l.source)&&t.isEqual(s["source-layer"],l["source-layer"])&&t.isEqual(s.type,l.type)){for(c in Nt(s.layout,l.layout,r,a,null,Xe.setLayoutProperty),Nt(s.paint,l.paint,r,a,null,Xe.setPaintProperty),t.isEqual(s.filter,l.filter)||r.push({command:Xe.setFilter,args:[a,l.filter]}),t.isEqual(s.minzoom,l.minzoom)&&t.isEqual(s.maxzoom,l.maxzoom)||r.push({command:Xe.setLayerZoomRange,args:[a,l.minzoom,l.maxzoom]}),s)s.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?Nt(s[c],l[c],r,a,c.slice(6),Xe.setPaintProperty):t.isEqual(s[c],l[c])||r.push({command:Xe.setLayerProperty,args:[a,c,l[c]]}));for(c in l)l.hasOwnProperty(c)&&!s.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?Nt(s[c],l[c],r,a,c.slice(6),Xe.setPaintProperty):t.isEqual(s[c],l[c])||r.push({command:Xe.setLayerProperty,args:[a,c,l[c]]}))}else r.push({command:Xe.removeLayer,args:[a]}),u=g[g.lastIndexOf(a)+1],r.push({command:Xe.addLayer,args:[l,u]})}(a,n.layers,r)}catch(e){console.warn("Unable to compute style diff:",e),r=[{command:Xe.setStyle,args:[n]}]}return r}var Ke=function(e,t,n){var r=this.boxCells=[],i=this.circleCells=[];this.xCellCount=Math.ceil(e/n),this.yCellCount=Math.ceil(t/n);for(var o=0;o<this.xCellCount*this.yCellCount;o++)r.push([]),i.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=e,this.height=t,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/t,this.boxUid=0,this.circleUid=0};Ke.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Ke.prototype.insert=function(e,t,n,r,i){this._forEachCell(t,n,r,i,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)},Ke.prototype.insertCircle=function(e,t,n,r){this._forEachCell(t-r,n-r,t+r,n+r,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(t),this.circles.push(n),this.circles.push(r)},Ke.prototype._insertBoxCell=function(e,t,n,r,i,o){this.boxCells[i].push(o)},Ke.prototype._insertCircleCell=function(e,t,n,r,i,o){this.circleCells[i].push(o)},Ke.prototype._query=function(e,t,n,r,i,o){if(n<0||e>this.width||r<0||t>this.height)return!i&&[];var a=[];if(e<=0&&t<=0&&this.width<=n&&this.height<=r){if(i)return!0;for(var s=0;s<this.boxKeys.length;s++)a.push({key:this.boxKeys[s],x1:this.bboxes[4*s],y1:this.bboxes[4*s+1],x2:this.bboxes[4*s+2],y2:this.bboxes[4*s+3]});for(var l=0;l<this.circleKeys.length;l++){var u=this.circles[3*l],c=this.circles[3*l+1],p=this.circles[3*l+2];a.push({key:this.circleKeys[l],x1:u-p,y1:c-p,x2:u+p,y2:c+p})}return o?a.filter(o):a}var h={hitTest:i,seenUids:{box:{},circle:{}}};return this._forEachCell(e,t,n,r,this._queryCell,a,h,o),i?a.length>0:a},Ke.prototype._queryCircle=function(e,t,n,r,i){var o=e-n,a=e+n,s=t-n,l=t+n;if(a<0||o>this.width||l<0||s>this.height)return!r&&[];var u=[],c={hitTest:r,circle:{x:e,y:t,radius:n},seenUids:{box:{},circle:{}}};return this._forEachCell(o,s,a,l,this._queryCellCircle,u,c,i),r?u.length>0:u},Ke.prototype.query=function(e,t,n,r,i){return this._query(e,t,n,r,!1,i)},Ke.prototype.hitTest=function(e,t,n,r,i){return this._query(e,t,n,r,!0,i)},Ke.prototype.hitTestCircle=function(e,t,n,r){return this._queryCircle(e,t,n,!0,r)},Ke.prototype._queryCell=function(e,t,n,r,i,o,a,s){var l=a.seenUids,u=this.boxCells[i];if(null!==u)for(var c=this.bboxes,p=0,h=u;p<h.length;p+=1){var f=h[p];if(!l.box[f]){l.box[f]=!0;var d=4*f;if(e<=c[d+2]&&t<=c[d+3]&&n>=c[d+0]&&r>=c[d+1]&&(!s||s(this.boxKeys[f]))){if(a.hitTest)return o.push(!0),!0;o.push({key:this.boxKeys[f],x1:c[d],y1:c[d+1],x2:c[d+2],y2:c[d+3]})}}}var g=this.circleCells[i];if(null!==g)for(var m=this.circles,y=0,v=g;y<v.length;y+=1){var _=v[y];if(!l.circle[_]){l.circle[_]=!0;var b=3*_;if(this._circleAndRectCollide(m[b],m[b+1],m[b+2],e,t,n,r)&&(!s||s(this.circleKeys[_]))){if(a.hitTest)return o.push(!0),!0;var x=m[b],w=m[b+1],S=m[b+2];o.push({key:this.circleKeys[_],x1:x-S,y1:w-S,x2:x+S,y2:w+S})}}}},Ke.prototype._queryCellCircle=function(e,t,n,r,i,o,a,s){var l=a.circle,u=a.seenUids,c=this.boxCells[i];if(null!==c)for(var p=this.bboxes,h=0,f=c;h<f.length;h+=1){var d=f[h];if(!u.box[d]){u.box[d]=!0;var g=4*d;if(this._circleAndRectCollide(l.x,l.y,l.radius,p[g+0],p[g+1],p[g+2],p[g+3])&&(!s||s(this.boxKeys[d])))return o.push(!0),!0}}var m=this.circleCells[i];if(null!==m)for(var y=this.circles,v=0,_=m;v<_.length;v+=1){var b=_[v];if(!u.circle[b]){u.circle[b]=!0;var x=3*b;if(this._circlesCollide(y[x],y[x+1],y[x+2],l.x,l.y,l.radius)&&(!s||s(this.circleKeys[b])))return o.push(!0),!0}}},Ke.prototype._forEachCell=function(e,t,n,r,i,o,a,s){for(var l=this._convertToXCellCoord(e),u=this._convertToYCellCoord(t),c=this._convertToXCellCoord(n),p=this._convertToYCellCoord(r),h=l;h<=c;h++)for(var f=u;f<=p;f++){var d=this.xCellCount*f+h;if(i.call(this,e,t,n,r,d,o,a,s))return}},Ke.prototype._convertToXCellCoord=function(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))},Ke.prototype._convertToYCellCoord=function(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))},Ke.prototype._circlesCollide=function(e,t,n,r,i,o){var a=r-e,s=i-t,l=n+o;return l*l>a*a+s*s},Ke.prototype._circleAndRectCollide=function(e,t,n,r,i,o,a){var s=(o-r)/2,l=Math.abs(e-(r+s));if(l>s+n)return!1;var u=(a-i)/2,c=Math.abs(t-(i+u));if(c>u+n)return!1;if(l<=s||c<=u)return!0;var p=l-s,h=c-u;return p*p+h*h<=n*n};var Ze=t.properties.layout;function Wt(e,n,r,i,o){var a=t.identity(new Float32Array(16));return n?(t.identity(a),t.scale(a,a,[1/o,1/o,1]),r||t.rotateZ(a,a,i.angle)):(t.scale(a,a,[i.width/2,-i.height/2,1]),t.translate(a,a,[1,-1,0]),t.multiply(a,a,e)),a}function Xt(e,n,r,i,o){var a=t.identity(new Float32Array(16));return n?(t.multiply(a,a,e),t.scale(a,a,[o,o,1]),r||t.rotateZ(a,a,-i.angle)):(t.scale(a,a,[1,-1,1]),t.translate(a,a,[-1,-1,0]),t.scale(a,a,[2/i.width,2/i.height,1])),a}function Ht(e,n){var r=[e.x,e.y,0,1];re(r,r,n);var i=r[3];return{point:new t.Point(r[0]/i,r[1]/i),signedDistanceFromCamera:i}}function Kt(e,t){var n=e[0]/e[3],r=e[1]/e[3];return n>=-t[0]&&n<=t[0]&&r>=-t[1]&&r<=t[1]}function Yt(e,n,r,i,o,a,s,l){var u=i?e.textSizeData:e.iconSizeData,c=t.evaluateSizeForZoom(u,r.transform.zoom,Ze.properties[i?"text-size":"icon-size"]),p=[256/r.width*2+1,256/r.height*2+1],h=i?e.text.dynamicLayoutVertexArray:e.icon.dynamicLayoutVertexArray;h.clear();for(var f=e.lineVertexArray,d=i?e.text.placedSymbolArray:e.icon.placedSymbolArray,g=r.transform.width/r.transform.height,m=!1,y=0;y<d.length;y++){var v=d.get(y);if(v.hidden||v.writingMode===t.WritingMode.vertical&&!m)oe(v.numGlyphs,h);else{m=!1;var _=[v.anchorX,v.anchorY,0,1];if(t.transformMat4(_,_,n),Kt(_,p)){var b=.5+_[3]/r.transform.cameraToCenterDistance*.5,x=t.evaluateSizeForFeature(u,c,v),w=s?x*b:x/b,S=new t.Point(v.anchorX,v.anchorY),E=Ht(S,o).point,P={},C=$t(v,w,!1,l,n,o,a,e.glyphOffsetArray,f,h,E,S,P,g);m=C.useVertical,(C.notEnoughRoom||m||C.needsFlipping&&$t(v,w,!0,l,n,o,a,e.glyphOffsetArray,f,h,E,S,P,g).notEnoughRoom)&&oe(v.numGlyphs,h)}else oe(v.numGlyphs,h)}}i?e.text.dynamicLayoutVertexBuffer.updateData(h):e.icon.dynamicLayoutVertexBuffer.updateData(h)}function Jt(e,t,n,r,i,o,a,s,l,u,c,p){var h=s.glyphStartIndex+s.numGlyphs,f=s.lineStartIndex,d=s.lineStartIndex+s.lineLength,g=t.getoffsetX(s.glyphStartIndex),m=t.getoffsetX(h-1),y=ee(e*g,n,r,i,o,a,s.segment,f,d,l,u,c,p);if(!y)return null;var v=ee(e*m,n,r,i,o,a,s.segment,f,d,l,u,c,p);return v?{first:y,last:v}:null}function Qt(e,n,r,i){return e===t.WritingMode.horizontal&&Math.abs(r.y-n.y)>Math.abs(r.x-n.x)*i?{useVertical:!0}:(e===t.WritingMode.vertical?n.y<r.y:n.x>r.x)?{needsFlipping:!0}:null}function $t(e,n,r,i,o,a,s,l,u,c,p,h,f,d){var g,m=n/24,y=e.lineOffsetX*n,v=e.lineOffsetY*n;if(e.numGlyphs>1){var _=e.glyphStartIndex+e.numGlyphs,b=e.lineStartIndex,x=e.lineStartIndex+e.lineLength,w=Jt(m,l,y,v,r,p,h,e,u,a,f,!1);if(!w)return{notEnoughRoom:!0};var S=Ht(w.first.point,s).point,E=Ht(w.last.point,s).point;if(i&&!r){var P=Qt(e.writingMode,S,E,d);if(P)return P}g=[w.first];for(var C=e.glyphStartIndex+1;C<_-1;C++)g.push(ee(m*l.getoffsetX(C),y,v,r,p,h,e.segment,b,x,u,a,f,!1));g.push(w.last)}else{if(i&&!r){var k=Ht(h,o).point,T=e.lineStartIndex+e.segment+1,A=new t.Point(u.getx(T),u.gety(T)),O=Ht(A,o),I=O.signedDistanceFromCamera>0?O.point:te(h,A,k,1,o),R=Qt(e.writingMode,k,I,d);if(R)return R}var L=ee(m*l.getoffsetX(e.glyphStartIndex),y,v,r,p,h,e.segment,e.lineStartIndex,e.lineStartIndex+e.lineLength,u,a,f,!1);if(!L)return{notEnoughRoom:!0};g=[L]}for(var M=0,j=g;M<j.length;M+=1){var D=j[M];t.addDynamicAttributes(c,D.point,D.angle)}return{}}function te(e,t,n,r,i){var o=Ht(e.add(e.sub(t)._unit()),i).point,a=n.sub(o);return n.add(a._mult(r/a.mag()))}function ee(e,n,r,i,o,a,s,l,u,c,p,h,f){var d=i?e-n:e+n,g=d>0?1:-1,m=0;i&&(g*=-1,m=Math.PI),g<0&&(m+=Math.PI);for(var y=g>0?l+s:l+s+1,v=y,_=o,b=o,x=0,w=0,S=Math.abs(d);x+w<=S;){if((y+=g)<l||y>=u)return null;if(b=_,void 0===(_=h[y])){var E=new t.Point(c.getx(y),c.gety(y)),P=Ht(E,p);if(P.signedDistanceFromCamera>0)_=h[y]=P.point;else{var C=y-g;_=te(0===x?a:new t.Point(c.getx(C),c.gety(C)),E,b,S-x+1,p)}}x+=w,w=b.dist(_)}var k=(S-x)/w,T=_.sub(b),A=T.mult(k)._add(b);return A._add(T._unit()._perp()._mult(r*g)),{point:A,angle:m+Math.atan2(_.y-b.y,_.x-b.x),tileDistance:f?{prevTileDistance:y-g===v?0:c.gettileUnitDistanceFromAnchor(y-g),lastSegmentViewportDistance:S-x}:null}}var Ye=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function oe(e,t){for(var n=0;n<e;n++){var r=t.length;t.resize(r+4),t.float32.set(Ye,3*r)}}function re(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[4]*i+n[12],e[1]=n[1]*r+n[5]*i+n[13],e[3]=n[3]*r+n[7]*i+n[15],e}var Je=function(e,t,n){void 0===t&&(t=new Ke(e.width+200,e.height+200,25)),void 0===n&&(n=new Ke(e.width+200,e.height+200,25)),this.transform=e,this.grid=t,this.ignoredGrid=n,this.pitchfactor=Math.cos(e._pitch)*e.cameraToCenterDistance,this.screenRightBoundary=e.width+100,this.screenBottomBoundary=e.height+100,this.gridRightBoundary=e.width+200,this.gridBottomBoundary=e.height+200};function ne(e,t,n){e[t+4]=n?1:0}function se(e,n,r){return n*(t.EXTENT/(e.tileSize*Math.pow(2,r-e.tileID.overscaledZ)))}Je.prototype.placeCollisionBox=function(e,t,n,r,i){var o=this.projectAndGetPerspectiveRatio(r,e.anchorPointX,e.anchorPointY),a=n*o.perspectiveRatio,s=e.x1*a+o.point.x,l=e.y1*a+o.point.y,u=e.x2*a+o.point.x,c=e.y2*a+o.point.y;return!this.isInsideGrid(s,l,u,c)||!t&&this.grid.hitTest(s,l,u,c,i)?{box:[],offscreen:!1}:{box:[s,l,u,c],offscreen:this.isOffscreen(s,l,u,c)}},Je.prototype.approximateTileDistance=function(e,t,n,r,i){var o=i?1:r/this.pitchfactor,a=e.lastSegmentViewportDistance*n;return e.prevTileDistance+a+(o-1)*a*Math.abs(Math.sin(t))},Je.prototype.placeCollisionCircles=function(e,n,r,i,o,a,s,l,u,c,p,h,f){var d=[],g=this.projectAnchor(u,o.anchorX,o.anchorY),m=l/24,y=o.lineOffsetX*l,v=o.lineOffsetY*l,_=new t.Point(o.anchorX,o.anchorY),b=Jt(m,s,y,v,!1,Ht(_,c).point,_,o,a,c,{},!0),x=!1,w=!1,S=!0,E=g.perspectiveRatio*i,P=1/(i*r),C=0,k=0;b&&(C=this.approximateTileDistance(b.first.tileDistance,b.first.angle,P,g.cameraDistance,h),k=this.approximateTileDistance(b.last.tileDistance,b.last.angle,P,g.cameraDistance,h));for(var T=0;T<e.length;T+=5){var A=e[T],O=e[T+1],I=e[T+2],R=e[T+3];if(!b||R<-C||R>k)ne(e,T,!1);else{var L=this.projectPoint(u,A,O),M=I*E;if(d.length>0){var j=L.x-d[d.length-4],D=L.y-d[d.length-3];if(M*M*2>j*j+D*D&&T+8<e.length){var F=e[T+8];if(F>-C&&F<k){ne(e,T,!1);continue}}}var N=T/5;d.push(L.x,L.y,M,N),ne(e,T,!0);var B=L.x-M,z=L.y-M,U=L.x+M,V=L.y+M;if(S=S&&this.isOffscreen(B,z,U,V),w=w||this.isInsideGrid(B,z,U,V),!n&&this.grid.hitTestCircle(L.x,L.y,M,f)){if(!p)return{circles:[],offscreen:!1};x=!0}}}return{circles:x||!w?[]:d,offscreen:S}},Je.prototype.queryRenderedSymbols=function(e){if(0===e.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var n=[],r=1/0,i=1/0,o=-1/0,a=-1/0,s=0,l=e;s<l.length;s+=1){var u=l[s],c=new t.Point(u.x+100,u.y+100);r=Math.min(r,c.x),i=Math.min(i,c.y),o=Math.max(o,c.x),a=Math.max(a,c.y),n.push(c)}for(var p={},h={},f=0,d=this.grid.query(r,i,o,a).concat(this.ignoredGrid.query(r,i,o,a));f<d.length;f+=1){var g=d[f],m=g.key;if(void 0===p[m.bucketInstanceId]&&(p[m.bucketInstanceId]={}),!p[m.bucketInstanceId][m.featureIndex]){var y=[new t.Point(g.x1,g.y1),new t.Point(g.x2,g.y1),new t.Point(g.x2,g.y2),new t.Point(g.x1,g.y2)];t.polygonIntersectsPolygon(n,y)&&(p[m.bucketInstanceId][m.featureIndex]=!0,void 0===h[m.bucketInstanceId]&&(h[m.bucketInstanceId]=[]),h[m.bucketInstanceId].push(m.featureIndex))}}return h},Je.prototype.insertCollisionBox=function(e,t,n,r,i){var o={bucketInstanceId:n,featureIndex:r,collisionGroupID:i};(t?this.ignoredGrid:this.grid).insert(o,e[0],e[1],e[2],e[3])},Je.prototype.insertCollisionCircles=function(e,t,n,r,i){for(var o=t?this.ignoredGrid:this.grid,a={bucketInstanceId:n,featureIndex:r,collisionGroupID:i},s=0;s<e.length;s+=4)o.insertCircle(a,e[s],e[s+1],e[s+2])},Je.prototype.projectAnchor=function(e,t,n){var r=[t,n,0,1];return re(r,r,e),{perspectiveRatio:.5+this.transform.cameraToCenterDistance/r[3]*.5,cameraDistance:r[3]}},Je.prototype.projectPoint=function(e,n,r){var i=[n,r,0,1];return re(i,i,e),new t.Point((i[0]/i[3]+1)/2*this.transform.width+100,(-i[1]/i[3]+1)/2*this.transform.height+100)},Je.prototype.projectAndGetPerspectiveRatio=function(e,n,r){var i=[n,r,0,1];return re(i,i,e),{point:new t.Point((i[0]/i[3]+1)/2*this.transform.width+100,(-i[1]/i[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/i[3]*.5}},Je.prototype.isOffscreen=function(e,t,n,r){return n<100||e>=this.screenRightBoundary||r<100||t>this.screenBottomBoundary},Je.prototype.isInsideGrid=function(e,t,n,r){return n>=0&&e<this.gridRightBoundary&&r>=0&&t<this.gridBottomBoundary};var Qe=function(e,t,n,r){this.opacity=e?Math.max(0,Math.min(1,e.opacity+(e.placed?t:-t))):r&&n?1:0,this.placed=n};Qe.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var $e=function(e,t,n,r,i){this.text=new Qe(e?e.text:null,t,n,i),this.icon=new Qe(e?e.icon:null,t,r,i)};$e.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var et=function(e,t,n){this.text=e,this.icon=t,this.skipFade=n},tt=function(e,t,n,r,i){this.bucketInstanceId=e,this.featureIndex=t,this.sourceLayerIndex=n,this.bucketIndex=r,this.tileID=i},nt=function(e){this.crossSourceCollisions=e,this.maxGroupID=0,this.collisionGroups={}};nt.prototype.get=function(e){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[e]){var t=++this.maxGroupID;this.collisionGroups[e]={ID:t,predicate:function(e){return e.collisionGroupID===t}}}return this.collisionGroups[e]};var rt=function(e,t,n){this.transform=e.clone(),this.collisionIndex=new Je(this.transform),this.placements={},this.opacities={},this.stale=!1,this.commitTime=0,this.fadeDuration=t,this.retainedQueryData={},this.collisionGroups=new nt(n)};function _e(e,t,n){e.emplaceBack(t?1:0,n?1:0),e.emplaceBack(t?1:0,n?1:0),e.emplaceBack(t?1:0,n?1:0),e.emplaceBack(t?1:0,n?1:0)}rt.prototype.placeLayerTile=function(e,n,r,i){var o=n.getBucket(e),a=n.latestFeatureIndex;if(o&&a&&e.id===o.layerIds[0]){var s=n.collisionBoxArray,l=o.layers[0].layout,u=Math.pow(2,this.transform.zoom-n.tileID.overscaledZ),c=n.tileSize/t.EXTENT,p=this.transform.calculatePosMatrix(n.tileID.toUnwrapped()),h=Wt(p,"map"===l.get("text-pitch-alignment"),"map"===l.get("text-rotation-alignment"),this.transform,se(n,1,this.transform.zoom)),f=Wt(p,"map"===l.get("icon-pitch-alignment"),"map"===l.get("icon-rotation-alignment"),this.transform,se(n,1,this.transform.zoom));this.retainedQueryData[o.bucketInstanceId]=new tt(o.bucketInstanceId,a,o.sourceLayerIndex,o.index,n.tileID),this.placeLayerBucket(o,p,h,f,u,c,r,n.holdingForFade(),i,s)}},rt.prototype.placeLayerBucket=function(e,n,r,i,o,a,s,l,u,c){var p=e.layers[0].layout,h=t.evaluateSizeForZoom(e.textSizeData,this.transform.zoom,t.properties.layout.properties["text-size"]),f=p.get("text-optional"),d=p.get("icon-optional"),g=p.get("text-allow-overlap"),m=p.get("icon-allow-overlap"),y=g&&(m||!e.hasIconData()||d),v=m&&(g||!e.hasTextData()||f),_=this.collisionGroups.get(e.sourceID);!e.collisionArrays&&c&&e.deserializeCollisionBoxes(c);for(var b=0;b<e.symbolInstances.length;b++){var x=e.symbolInstances.get(b);if(!u[x.crossTileID]){if(l){this.placements[x.crossTileID]=new et(!1,!1,!1);continue}var w=!1,S=!1,E=!0,P=null,C=null,k=null,T=0,A=0,O=e.collisionArrays[b];O.textFeatureIndex&&(T=O.textFeatureIndex),O.textBox&&(w=(P=this.collisionIndex.placeCollisionBox(O.textBox,p.get("text-allow-overlap"),a,n,_.predicate)).box.length>0,E=E&&P.offscreen);var I=O.textCircles;if(I){var R=e.text.placedSymbolArray.get(x.horizontalPlacedTextSymbolIndex),L=t.evaluateSizeForFeature(e.textSizeData,h,R);C=this.collisionIndex.placeCollisionCircles(I,p.get("text-allow-overlap"),o,a,R,e.lineVertexArray,e.glyphOffsetArray,L,n,r,s,"map"===p.get("text-pitch-alignment"),_.predicate),w=p.get("text-allow-overlap")||C.circles.length>0,E=E&&C.offscreen}O.iconFeatureIndex&&(A=O.iconFeatureIndex),O.iconBox&&(S=(k=this.collisionIndex.placeCollisionBox(O.iconBox,p.get("icon-allow-overlap"),a,n,_.predicate)).box.length>0,E=E&&k.offscreen);var M=f||0===x.numGlyphVertices&&0===x.numVerticalGlyphVertices,j=d||0===x.numIconVertices;M||j?j?M||(S=S&&w):w=S&&w:S=w=S&&w,w&&P&&this.collisionIndex.insertCollisionBox(P.box,p.get("text-ignore-placement"),e.bucketInstanceId,T,_.ID),S&&k&&this.collisionIndex.insertCollisionBox(k.box,p.get("icon-ignore-placement"),e.bucketInstanceId,A,_.ID),w&&C&&this.collisionIndex.insertCollisionCircles(C.circles,p.get("text-ignore-placement"),e.bucketInstanceId,T,_.ID),this.placements[x.crossTileID]=new et(w||y,S||v,E||e.justReloaded),u[x.crossTileID]=!0}}e.justReloaded=!1},rt.prototype.commit=function(e,t){this.commitTime=t;var n=!1,r=e&&0!==this.fadeDuration?(this.commitTime-e.commitTime)/this.fadeDuration:1,i=e?e.opacities:{};for(var o in this.placements){var a=this.placements[o],s=i[o];s?(this.opacities[o]=new $e(s,r,a.text,a.icon),n=n||a.text!==s.text.placed||a.icon!==s.icon.placed):(this.opacities[o]=new $e(null,r,a.text,a.icon,a.skipFade),n=n||a.text||a.icon)}for(var l in i){var u=i[l];if(!this.opacities[l]){var c=new $e(u,r,!1,!1);c.isHidden()||(this.opacities[l]=c,n=n||u.text.placed||u.icon.placed)}}n?this.lastPlacementChangeTime=t:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=e?e.lastPlacementChangeTime:t)},rt.prototype.updateLayerOpacities=function(e,t){for(var n={},r=0,i=t;r<i.length;r+=1){var o=i[r],a=o.getBucket(e);a&&o.latestFeatureIndex&&e.id===a.layerIds[0]&&this.updateBucketOpacities(a,n,o.collisionBoxArray)}},rt.prototype.updateBucketOpacities=function(e,t,n){e.hasTextData()&&e.text.opacityVertexArray.clear(),e.hasIconData()&&e.icon.opacityVertexArray.clear(),e.hasCollisionBoxData()&&e.collisionBox.collisionVertexArray.clear(),e.hasCollisionCircleData()&&e.collisionCircle.collisionVertexArray.clear();var r=e.layers[0].layout,i=new $e(null,0,!1,!1,!0),o=r.get("text-allow-overlap"),a=r.get("icon-allow-overlap"),s=new $e(null,0,o&&(a||!e.hasIconData()||r.get("icon-optional")),a&&(o||!e.hasTextData()||r.get("text-optional")),!0);!e.collisionArrays&&n&&(e.hasCollisionBoxData()||e.hasCollisionCircleData())&&e.deserializeCollisionBoxes(n);for(var l=0;l<e.symbolInstances.length;l++){var u=e.symbolInstances.get(l),c=t[u.crossTileID],p=this.opacities[u.crossTileID];c?p=i:p||(p=s,this.opacities[u.crossTileID]=p),t[u.crossTileID]=!0;var h=u.numGlyphVertices>0||u.numVerticalGlyphVertices>0,f=u.numIconVertices>0;if(h){for(var d=we(p.text),g=(u.numGlyphVertices+u.numVerticalGlyphVertices)/4,m=0;m<g;m++)e.text.opacityVertexArray.emplaceBack(d);e.text.placedSymbolArray.get(u.horizontalPlacedTextSymbolIndex).hidden=p.text.isHidden(),u.verticalPlacedTextSymbolIndex>=0&&(e.text.placedSymbolArray.get(u.verticalPlacedTextSymbolIndex).hidden=p.text.isHidden())}if(f){for(var y=we(p.icon),v=0;v<u.numIconVertices/4;v++)e.icon.opacityVertexArray.emplaceBack(y);e.icon.placedSymbolArray.get(l).hidden=p.icon.isHidden()}if(e.hasCollisionBoxData()||e.hasCollisionCircleData()){var _=e.collisionArrays[l];if(_){_.textBox&&_e(e.collisionBox.collisionVertexArray,p.text.placed,!1),_.iconBox&&_e(e.collisionBox.collisionVertexArray,p.icon.placed,!1);var b=_.textCircles;if(b&&e.hasCollisionCircleData())for(var x=0;x<b.length;x+=5){var w=c||0===b[x+4];_e(e.collisionCircle.collisionVertexArray,p.text.placed,w)}}}}e.sortFeatures(this.transform.angle),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasCollisionBoxData()&&e.collisionBox.collisionVertexBuffer&&e.collisionBox.collisionVertexBuffer.updateData(e.collisionBox.collisionVertexArray),e.hasCollisionCircleData()&&e.collisionCircle.collisionVertexBuffer&&e.collisionCircle.collisionVertexBuffer.updateData(e.collisionCircle.collisionVertexArray)},rt.prototype.symbolFadeChange=function(e){return 0===this.fadeDuration?1:(e-this.commitTime)/this.fadeDuration},rt.prototype.hasTransitions=function(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration},rt.prototype.stillRecent=function(e){return this.commitTime+this.fadeDuration>e},rt.prototype.setStale=function(){this.stale=!0};var it=Math.pow(2,25),ot=Math.pow(2,24),at=Math.pow(2,17),st=Math.pow(2,16),lt=Math.pow(2,9),ut=Math.pow(2,8),ct=Math.pow(2,1);function we(e){if(0===e.opacity&&!e.placed)return 0;if(1===e.opacity&&e.placed)return 4294967295;var t=e.placed?1:0,n=Math.floor(127*e.opacity);return n*it+t*ot+n*at+t*st+n*lt+t*ut+n*ct+t}var pt=function(){this._currentTileIndex=0,this._seenCrossTileIDs={}};pt.prototype.continuePlacement=function(e,t,n,r,i){for(;this._currentTileIndex<e.length;){var o=e[this._currentTileIndex];if(t.placeLayerTile(r,o,n,this._seenCrossTileIDs),this._currentTileIndex++,i())return!0}};var ht=function(e,t,n,r,i,o){this.placement=new rt(e,i,o),this._currentPlacementIndex=t.length-1,this._forceFullPlacement=n,this._showCollisionBoxes=r,this._done=!1};ht.prototype.isDone=function(){return this._done},ht.prototype.continuePlacement=function(e,n,r){for(var i=this,o=t.browser.now(),a=function(){var e=t.browser.now()-o;return!i._forceFullPlacement&&e>2};this._currentPlacementIndex>=0;){var s=n[e[this._currentPlacementIndex]],l=this.placement.collisionIndex.transform.zoom;if("symbol"===s.type&&(!s.minzoom||s.minzoom<=l)&&(!s.maxzoom||s.maxzoom>l)){if(this._inProgressLayer||(this._inProgressLayer=new pt),this._inProgressLayer.continuePlacement(r[s.source],this.placement,this._showCollisionBoxes,s,a))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},ht.prototype.commit=function(e,t){return this.placement.commit(e,t),this.placement};var ft=512/t.EXTENT/2,dt=function(e,t,n){this.tileID=e,this.indexedSymbolInstances={},this.bucketInstanceId=n;for(var r=0;r<t.length;r++){var i=t.get(r),o=i.key;this.indexedSymbolInstances[o]||(this.indexedSymbolInstances[o]=[]),this.indexedSymbolInstances[o].push({crossTileID:i.crossTileID,coord:this.getScaledCoordinates(i,e)})}};dt.prototype.getScaledCoordinates=function(e,n){var r=n.canonical.z-this.tileID.canonical.z,i=ft/Math.pow(2,r);return{x:Math.floor((n.canonical.x*t.EXTENT+e.anchorX)*i),y:Math.floor((n.canonical.y*t.EXTENT+e.anchorY)*i)}},dt.prototype.findMatches=function(e,t,n){for(var r=this.tileID.canonical.z<t.canonical.z?1:Math.pow(2,this.tileID.canonical.z-t.canonical.z),i=0;i<e.length;i++){var o=e.get(i);if(!o.crossTileID){var a=this.indexedSymbolInstances[o.key];if(a)for(var s=this.getScaledCoordinates(o,t),l=0,u=a;l<u.length;l+=1){var c=u[l];if(Math.abs(c.coord.x-s.x)<=r&&Math.abs(c.coord.y-s.y)<=r&&!n[c.crossTileID]){n[c.crossTileID]=!0,o.crossTileID=c.crossTileID;break}}}}};var gt=function(){this.maxCrossTileID=0};gt.prototype.generate=function(){return++this.maxCrossTileID};var mt=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};mt.prototype.handleWrapJump=function(e){var t=Math.round((e-this.lng)/360);if(0!==t)for(var n in this.indexes){var r=this.indexes[n],i={};for(var o in r){var a=r[o];a.tileID=a.tileID.unwrapTo(a.tileID.wrap+t),i[a.tileID.key]=a}this.indexes[n]=i}this.lng=e},mt.prototype.addBucket=function(e,t,n){if(this.indexes[e.overscaledZ]&&this.indexes[e.overscaledZ][e.key]){if(this.indexes[e.overscaledZ][e.key].bucketInstanceId===t.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(e.overscaledZ,this.indexes[e.overscaledZ][e.key])}for(var r=0;r<t.symbolInstances.length;r++)t.symbolInstances.get(r).crossTileID=0;this.usedCrossTileIDs[e.overscaledZ]||(this.usedCrossTileIDs[e.overscaledZ]={});var i=this.usedCrossTileIDs[e.overscaledZ];for(var o in this.indexes){var a=this.indexes[o];if(Number(o)>e.overscaledZ)for(var s in a){var l=a[s];l.tileID.isChildOf(e)&&l.findMatches(t.symbolInstances,e,i)}else{var u=a[e.scaledTo(Number(o)).key];u&&u.findMatches(t.symbolInstances,e,i)}}for(var c=0;c<t.symbolInstances.length;c++){var p=t.symbolInstances.get(c);p.crossTileID||(p.crossTileID=n.generate(),i[p.crossTileID]=!0)}return void 0===this.indexes[e.overscaledZ]&&(this.indexes[e.overscaledZ]={}),this.indexes[e.overscaledZ][e.key]=new dt(e,t.symbolInstances,t.bucketInstanceId),!0},mt.prototype.removeBucketCrossTileIDs=function(e,t){for(var n in t.indexedSymbolInstances)for(var r=0,i=t.indexedSymbolInstances[n];r<i.length;r+=1){var o=i[r];delete this.usedCrossTileIDs[e][o.crossTileID]}},mt.prototype.removeStaleBuckets=function(e){var t=!1;for(var n in this.indexes){var r=this.indexes[n];for(var i in r)e[r[i].bucketInstanceId]||(this.removeBucketCrossTileIDs(n,r[i]),delete r[i],t=!0)}return t};var yt=function(){this.layerIndexes={},this.crossTileIDs=new gt,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};yt.prototype.addLayer=function(e,t,n){var r=this.layerIndexes[e.id];void 0===r&&(r=this.layerIndexes[e.id]=new mt);var i=!1,o={};r.handleWrapJump(n);for(var a=0,s=t;a<s.length;a+=1){var l=s[a],u=l.getBucket(e);u&&e.id===u.layerIds[0]&&(u.bucketInstanceId||(u.bucketInstanceId=++this.maxBucketInstanceId),r.addBucket(l.tileID,u,this.crossTileIDs)&&(i=!0),o[u.bucketInstanceId]=!0)}return r.removeStaleBuckets(o)&&(i=!0),i},yt.prototype.pruneUnusedLayers=function(e){var t={};for(var n in e.forEach(function(e){t[e]=!0}),this.layerIndexes)t[n]||delete this.layerIndexes[n]};var vt=function(e,n){return t.emitValidationErrors(e,n&&n.filter(function(e){return"source.canvas"!==e.identifier}))},_t=t.pick(Xe,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),bt=t.pick(Xe,["setCenter","setZoom","setBearing","setPitch"]),xt=function(e){function i(n,r){var o=this;void 0===r&&(r={}),e.call(this),this.map=n,this.dispatcher=new j((qe||(qe=new We),qe),this),this.imageManager=new b,this.glyphManager=new S(n._transformRequest,r.localIdeographFontFamily),this.lineAtlas=new L(256,512),this.crossTileSymbolIndex=new yt,this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new t.ZoomHistory,this._loaded=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",t.getReferrer());var a=this;this._rtlTextPluginCallback=i.registerForPluginAvailability(function(e){for(var t in a.dispatcher.broadcast("loadRTLTextPlugin",e.pluginURL,e.completionCallback),a.sourceCaches)a.sourceCaches[t].reload()}),this.on("data",function(e){if("source"===e.dataType&&"metadata"===e.sourceDataType){var t=o.sourceCaches[e.sourceId];if(t){var n=t.getSource();if(n&&n.vectorLayerIds)for(var r in o._layers){var i=o._layers[r];i.source===n.id&&o._validateLayer(i)}}}})}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.loadURL=function(e,n){var r=this;void 0===n&&(n={}),this.fire(new t.Event("dataloading",{dataType:"style"}));var i="boolean"==typeof n.validate?n.validate:!t.isMapboxURL(e);e=t.normalizeStyleURL(e,n.accessToken);var o=this.map._transformRequest(e,t.ResourceType.Style);this._request=t.getJSON(o,function(e,n){r._request=null,e?r.fire(new t.ErrorEvent(e)):n&&r._load(n,i)})},i.prototype.loadJSON=function(e,n){var r=this;void 0===n&&(n={}),this.fire(new t.Event("dataloading",{dataType:"style"})),this._request=t.browser.frame(function(){r._request=null,r._load(e,!1!==n.validate)})},i.prototype._load=function(e,n){var r=this;if(!n||!vt(this,t.validateStyle(e))){for(var i in this._loaded=!0,this.stylesheet=e,e.sources)this.addSource(i,e.sources[i],{validate:!1});e.sprite?this._spriteRequest=function(e,n,r){var i,o,a,s=t.browser.devicePixelRatio>1?"@2x":"",l=t.getJSON(n(t.normalizeSpriteURL(e,s,".json"),t.ResourceType.SpriteJSON),function(e,t){l=null,a||(a=e,i=t,u())}),c=t.getImage(n(t.normalizeSpriteURL(e,s,".png"),t.ResourceType.SpriteImage),function(e,t){c=null,a||(a=e,o=t,u())});function u(){if(a)r(a);else if(i&&o){var e=t.browser.getImageData(o),n={};for(var s in i){var l=i[s],u=l.width,c=l.height,p=l.x,h=l.y,f=l.sdf,d=l.pixelRatio,g=new t.RGBAImage({width:u,height:c});t.RGBAImage.copy(e,g,{x:p,y:h},{x:0,y:0},{width:u,height:c}),n[s]={data:g,pixelRatio:d,sdf:f}}r(null,n)}}return{cancel:function(){l&&(l.cancel(),l=null),c&&(c.cancel(),c=null)}}}(e.sprite,this.map._transformRequest,function(e,n){if(r._spriteRequest=null,e)r.fire(new t.ErrorEvent(e));else if(n)for(var i in n)r.imageManager.addImage(i,n[i]);r.imageManager.setLoaded(!0),r.fire(new t.Event("data",{dataType:"style"}))}):this.imageManager.setLoaded(!0),this.glyphManager.setURL(e.glyphs);var o=At(this.stylesheet.layers);this._order=o.map(function(e){return e.id}),this._layers={};for(var a=0,s=o;a<s.length;a+=1){var l=s[a];(l=t.createStyleLayer(l)).setEventedParent(this,{layer:{id:l.id}}),this._layers[l.id]=l}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new O(this.stylesheet.light),this.fire(new t.Event("data",{dataType:"style"})),this.fire(new t.Event("style.load"))}},i.prototype._validateLayer=function(e){var n=this.sourceCaches[e.source];if(n){var r=e.sourceLayer;if(r){var i=n.getSource();("geojson"===i.type||i.vectorLayerIds&&-1===i.vectorLayerIds.indexOf(r))&&this.fire(new t.ErrorEvent(new Error('Source layer "'+r+'" does not exist on source "'+i.id+'" as specified by style layer "'+e.id+'"')))}}},i.prototype.loaded=function(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var e in this.sourceCaches)if(!this.sourceCaches[e].loaded())return!1;return!!this.imageManager.isLoaded()},i.prototype._serializeLayers=function(e){for(var t=[],n=0,r=e;n<r.length;n+=1){var i=r[n],o=this._layers[i];"custom"!==o.type&&t.push(o.serialize())}return t},i.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var e in this.sourceCaches)if(this.sourceCaches[e].hasTransition())return!0;for(var t in this._layers)if(this._layers[t].hasTransition())return!0;return!1},i.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},i.prototype.update=function(e){if(this._loaded){var n=this._changed;if(this._changed){var r=Object.keys(this._updatedLayers),i=Object.keys(this._removedLayers);for(var o in(r.length||i.length)&&this._updateWorkerLayers(r,i),this._updatedSources){var a=this._updatedSources[o];"reload"===a?this._reloadSource(o):"clear"===a&&this._clearSource(o)}for(var s in this._updatedPaintProps)this._layers[s].updateTransitions(e);this.light.updateTransitions(e),this._resetUpdates()}for(var l in this.sourceCaches)this.sourceCaches[l].used=!1;for(var u=0,c=this._order;u<c.length;u+=1){var p=c[u],h=this._layers[p];h.recalculate(e),!h.isHidden(e.zoom)&&h.source&&(this.sourceCaches[h.source].used=!0)}this.light.recalculate(e),this.z=e.zoom,n&&this.fire(new t.Event("data",{dataType:"style"}))}},i.prototype._updateWorkerLayers=function(e,t){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(e),removedIds:t})},i.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={}},i.prototype.setState=function(e){var n=this;if(this._checkLoaded(),vt(this,t.validateStyle(e)))return!1;(e=t.clone(e)).layers=At(e.layers);var r=Vt(this.serialize(),e).filter(function(e){return!(e.command in bt)});if(0===r.length)return!1;var i=r.filter(function(e){return!(e.command in _t)});if(i.length>0)throw new Error("Unimplemented: "+i.map(function(e){return e.command}).join(", ")+".");return r.forEach(function(e){"setTransition"!==e.command&&n[e.command].apply(n,e.args)}),this.stylesheet=e,!0},i.prototype.addImage=function(e,n){if(this.getImage(e))return this.fire(new t.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(e,n),this.fire(new t.Event("data",{dataType:"style"}))},i.prototype.getImage=function(e){return this.imageManager.getImage(e)},i.prototype.removeImage=function(e){if(!this.getImage(e))return this.fire(new t.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(e),this.fire(new t.Event("data",{dataType:"style"}))},i.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},i.prototype.addSource=function(e,n,r){var i=this;if(void 0===r&&(r={}),this._checkLoaded(),void 0!==this.sourceCaches[e])throw new Error("There is already a source with this ID");if(!n.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(n).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(n.type)>=0&&this._validate(t.validateStyle.source,"sources."+e,n,null,r))){this.map&&this.map._collectResourceTiming&&(n.collectResourceTiming=!0);var o=this.sourceCaches[e]=new Ge(e,n,this.dispatcher);o.style=this,o.setEventedParent(this,function(){return{isSourceLoaded:i.loaded(),source:o.serialize(),sourceId:e}}),o.onAdd(this.map),this._changed=!0}},i.prototype.removeSource=function(e){if(this._checkLoaded(),void 0===this.sourceCaches[e])throw new Error("There is no source with this ID");for(var n in this._layers)if(this._layers[n].source===e)return this.fire(new t.ErrorEvent(new Error('Source "'+e+'" cannot be removed while layer "'+n+'" is using it.')));var r=this.sourceCaches[e];delete this.sourceCaches[e],delete this._updatedSources[e],r.fire(new t.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:e})),r.setEventedParent(null),r.clearTiles(),r.onRemove&&r.onRemove(this.map),this._changed=!0},i.prototype.setGeoJSONSourceData=function(e,t){this._checkLoaded(),this.sourceCaches[e].getSource().setData(t),this._changed=!0},i.prototype.getSource=function(e){return this.sourceCaches[e]&&this.sourceCaches[e].getSource()},i.prototype.addLayer=function(e,n,r){void 0===r&&(r={}),this._checkLoaded();var i=e.id;if(this.getLayer(i))this.fire(new t.ErrorEvent(new Error('Layer with id "'+i+'" already exists on this map')));else{var o;if("custom"===e.type){if(vt(this,t.validateCustomStyleLayer(e)))return;o=t.createStyleLayer(e)}else{if("object"==typeof e.source&&(this.addSource(i,e.source),e=t.clone(e),e=t.extend(e,{source:i})),this._validate(t.validateStyle.layer,"layers."+i,e,{arrayIndex:-1},r))return;o=t.createStyleLayer(e),this._validateLayer(o),o.setEventedParent(this,{layer:{id:i}})}var a=n?this._order.indexOf(n):this._order.length;if(n&&-1===a)this.fire(new t.ErrorEvent(new Error('Layer with id "'+n+'" does not exist on this map.')));else{if(this._order.splice(a,0,i),this._layerOrderChanged=!0,this._layers[i]=o,this._removedLayers[i]&&o.source&&"custom"!==o.type){var s=this._removedLayers[i];delete this._removedLayers[i],s.type!==o.type?this._updatedSources[o.source]="clear":(this._updatedSources[o.source]="reload",this.sourceCaches[o.source].pause())}this._updateLayer(o),o.onAdd&&o.onAdd(this.map)}}},i.prototype.moveLayer=function(e,n){if(this._checkLoaded(),this._changed=!0,this._layers[e]){if(e!==n){var r=this._order.indexOf(e);this._order.splice(r,1);var i=n?this._order.indexOf(n):this._order.length;n&&-1===i?this.fire(new t.ErrorEvent(new Error('Layer with id "'+n+'" does not exist on this map.'))):(this._order.splice(i,0,e),this._layerOrderChanged=!0)}}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be moved.")))},i.prototype.removeLayer=function(e){this._checkLoaded();var n=this._layers[e];if(n){n.setEventedParent(null);var r=this._order.indexOf(e);this._order.splice(r,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=n,delete this._layers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],n.onRemove&&n.onRemove(this.map)}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be removed.")))},i.prototype.getLayer=function(e){return this._layers[e]},i.prototype.setLayerZoomRange=function(e,n,r){this._checkLoaded();var i=this.getLayer(e);i?i.minzoom===n&&i.maxzoom===r||(null!=n&&(i.minzoom=n),null!=r&&(i.maxzoom=r),this._updateLayer(i)):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot have zoom extent.")))},i.prototype.setFilter=function(e,n,r){void 0===r&&(r={}),this._checkLoaded();var i=this.getLayer(e);if(i){if(!t.isEqual(i.filter,n))return null==n?(i.filter=void 0,void this._updateLayer(i)):void(this._validate(t.validateStyle.filter,"layers."+i.id+".filter",n,null,r)||(i.filter=t.clone(n),this._updateLayer(i)))}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be filtered.")))},i.prototype.getFilter=function(e){return t.clone(this.getLayer(e).filter)},i.prototype.setLayoutProperty=function(e,n,r,i){void 0===i&&(i={}),this._checkLoaded();var o=this.getLayer(e);o?t.isEqual(o.getLayoutProperty(n),r)||(o.setLayoutProperty(n,r,i),this._updateLayer(o)):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")))},i.prototype.getLayoutProperty=function(e,n){var r=this.getLayer(e);if(r)return r.getLayoutProperty(n);this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style.")))},i.prototype.setPaintProperty=function(e,n,r,i){void 0===i&&(i={}),this._checkLoaded();var o=this.getLayer(e);o?t.isEqual(o.getPaintProperty(n),r)||(o.setPaintProperty(n,r,i)&&this._updateLayer(o),this._changed=!0,this._updatedPaintProps[e]=!0):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")))},i.prototype.getPaintProperty=function(e,t){return this.getLayer(e).getPaintProperty(t)},i.prototype.setFeatureState=function(e,n){this._checkLoaded();var r=e.source,i=e.sourceLayer,o=this.sourceCaches[r],a=parseInt(e.id,10);if(void 0!==o){var s=o.getSource().type;"geojson"===s&&i?this.fire(new t.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==s||i?isNaN(a)||a<0?this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided and non-negative."))):o.setFeatureState(i,a,n):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+r+"' does not exist in the map's style.")))},i.prototype.removeFeatureState=function(e,n){this._checkLoaded();var r=e.source,i=this.sourceCaches[r];if(void 0!==i){var o=i.getSource().type,a="vector"===o?e.sourceLayer:void 0,s=parseInt(e.id,10);"vector"!==o||a?e.id&&isNaN(s)||s<0?this.fire(new t.ErrorEvent(new Error("The feature id parameter must be non-negative."))):!n||e.id?i.removeFeatureState(a,s,n):this.fire(new t.ErrorEvent(new Error("A feature id is requred to remove its specific state property."))):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+r+"' does not exist in the map's style.")))},i.prototype.getFeatureState=function(e){this._checkLoaded();var n=e.source,r=e.sourceLayer,i=this.sourceCaches[n],o=parseInt(e.id,10);if(void 0!==i)if("vector"!==i.getSource().type||r){if(!(isNaN(o)||o<0))return i.getFeatureState(r,o);this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided and non-negative.")))}else this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));else this.fire(new t.ErrorEvent(new Error("The source '"+n+"' does not exist in the map's style.")))},i.prototype.getTransition=function(){return t.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},i.prototype.serialize=function(){return t.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:t.mapObject(this.sourceCaches,function(e){return e.serialize()}),layers:this._serializeLayers(this._order)},function(e){return void 0!==e})},i.prototype._updateLayer=function(e){this._updatedLayers[e.id]=!0,e.source&&!this._updatedSources[e.source]&&(this._updatedSources[e.source]="reload",this.sourceCaches[e.source].pause()),this._changed=!0},i.prototype._flattenAndSortRenderedFeatures=function(e){for(var t=this,n=function(e){return"fill-extrusion"===t._layers[e].type},r={},i=[],o=this._order.length-1;o>=0;o--){var a=this._order[o];if(n(a)){r[a]=o;for(var s=0,l=e;s<l.length;s+=1){var u=l[s][a];if(u)for(var c=0,p=u;c<p.length;c+=1){var h=p[c];i.push(h)}}}}i.sort(function(e,t){return t.intersectionZ-e.intersectionZ});for(var f=[],d=this._order.length-1;d>=0;d--){var g=this._order[d];if(n(g))for(var m=i.length-1;m>=0;m--){var y=i[m].feature;if(r[y.layer.id]<d)break;f.push(y),i.pop()}else for(var v=0,_=e;v<_.length;v+=1){var b=_[v][g];if(b)for(var x=0,w=b;x<w.length;x+=1){var S=w[x];f.push(S.feature)}}}return f},i.prototype.queryRenderedFeatures=function(e,n,r){n&&n.filter&&this._validate(t.validateStyle.filter,"queryRenderedFeatures.filter",n.filter);var i={};if(n&&n.layers){if(!Array.isArray(n.layers))return this.fire(new t.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var o=0,a=n.layers;o<a.length;o+=1){var s=a[o],l=this._layers[s];if(!l)return this.fire(new t.ErrorEvent(new Error("The layer '"+s+"' does not exist in the map's style and cannot be queried for features."))),[];i[l.source]=!0}}var u=[];for(var c in this.sourceCaches)n.layers&&!i[c]||u.push(M(this.sourceCaches[c],this._layers,e,n,r));return this.placement&&u.push(function(e,t,n,r,i,o){for(var a={},s=i.queryRenderedSymbols(n),l=[],u=0,c=Object.keys(s).map(Number);u<c.length;u+=1){var p=c[u];l.push(o[p])}l.sort(A);for(var h=function(){var t=d[f],n=t.featureIndex.lookupSymbolFeatures(s[t.bucketInstanceId],t.bucketIndex,t.sourceLayerIndex,r.filter,r.layers,e);for(var i in n){var o=a[i]=a[i]||[],l=n[i];l.sort(function(e,n){var r=t.featureSortOrder;if(r){var i=r.indexOf(e.featureIndex);return r.indexOf(n.featureIndex)-i}return n.featureIndex-e.featureIndex});for(var u=0,c=l;u<c.length;u+=1){var p=c[u];o.push(p)}}},f=0,d=l;f<d.length;f+=1)h();var g=function(n){a[n].forEach(function(r){var i=r.feature,o=e[n],a=t[o.source].getFeatureState(i.layer["source-layer"],i.id);i.source=i.layer.source,i.layer["source-layer"]&&(i.sourceLayer=i.layer["source-layer"]),i.state=a})};for(var m in a)g(m);return a}(this._layers,this.sourceCaches,e,n,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(u)},i.prototype.querySourceFeatures=function(e,n){n&&n.filter&&this._validate(t.validateStyle.filter,"querySourceFeatures.filter",n.filter);var r=this.sourceCaches[e];return r?function(e,t){for(var n=e.getRenderableIds().map(function(t){return e.getTileByID(t)}),r=[],i={},o=0;o<n.length;o++){var a=n[o],s=a.tileID.canonical.key;i[s]||(i[s]=!0,a.querySourceFeatures(r,t))}return r}(r,n):[]},i.prototype.addSourceType=function(e,t,n){return i.getSourceType(e)?n(new Error('A source type called "'+e+'" already exists.')):(i.setSourceType(e,t),t.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:e,url:t.workerSourceURL},n):n(null,null))},i.prototype.getLight=function(){return this.light.getLight()},i.prototype.setLight=function(e,n){void 0===n&&(n={}),this._checkLoaded();var r=this.light.getLight(),i=!1;for(var o in e)if(!t.isEqual(e[o],r[o])){i=!0;break}if(i){var a={now:t.browser.now(),transition:t.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e,n),this.light.updateTransitions(a)}},i.prototype._validate=function(e,n,r,i,o){return void 0===o&&(o={}),(!o||!1!==o.validate)&&vt(this,e.call(t.validateStyle,t.extend({key:n,style:this.serialize(),value:r,styleSpec:t.styleSpec},i)))},i.prototype._remove=function(){for(var e in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),t.evented.off("pluginAvailable",this._rtlTextPluginCallback),this.sourceCaches)this.sourceCaches[e].clearTiles();this.dispatcher.remove()},i.prototype._clearSource=function(e){this.sourceCaches[e].clearTiles()},i.prototype._reloadSource=function(e){this.sourceCaches[e].resume(),this.sourceCaches[e].reload()},i.prototype._updateSources=function(e){for(var t in this.sourceCaches)this.sourceCaches[t].update(e)},i.prototype._generateCollisionBoxes=function(){for(var e in this.sourceCaches)this._reloadSource(e)},i.prototype._updatePlacement=function(e,n,r,i){for(var o=!1,a=!1,s={},l=0,u=this._order;l<u.length;l+=1){var c=u[l],p=this._layers[c];if("symbol"===p.type){if(!s[p.source]){var h=this.sourceCaches[p.source];s[p.source]=h.getRenderableIds(!0).map(function(e){return h.getTileByID(e)}).sort(function(e,t){return t.tileID.overscaledZ-e.tileID.overscaledZ||(e.tileID.isLessThan(t.tileID)?-1:1)})}var f=this.crossTileSymbolIndex.addLayer(p,s[p.source],e.center.lng);o=o||f}}this.crossTileSymbolIndex.pruneUnusedLayers(this._order);var d=this._layerOrderChanged||0===r;if((d||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(t.browser.now()))&&(this.pauseablePlacement=new ht(e,this._order,d,n,r,i),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,s),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(this.placement,t.browser.now()),a=!0),o&&this.pauseablePlacement.placement.setStale()),a||o)for(var g=0,m=this._order;g<m.length;g+=1){var y=m[g],v=this._layers[y];"symbol"===v.type&&this.placement.updateLayerOpacities(v,s[v.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(t.browser.now())},i.prototype._releaseSymbolFadeTiles=function(){for(var e in this.sourceCaches)this.sourceCaches[e].releaseSymbolFadeTiles()},i.prototype.getImages=function(e,t,n){this.imageManager.getImages(t.icons,n)},i.prototype.getGlyphs=function(e,t,n){this.glyphManager.getGlyphs(t.stacks,n)},i.prototype.getResource=function(e,n,r){return t.makeRequest(n,r)},i}(t.Evented);xt.getSourceType=function(e){return V[e]},xt.setSourceType=function(e,t){V[e]=t},xt.registerForPluginAvailability=t.registerForPluginAvailability;var wt=t.createLayout([{name:"a_pos",type:"Int16",components:2}]),Et=si("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),Pt=si("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Ct=si("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),kt=si("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvarying vec3 v_data;void main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvarying vec3 v_data;void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/DEVICE_PIXEL_RATIO/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),Tt=si("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),It=si("#pragma mapbox: define highp float weight\nuniform highp float u_intensity;varying vec2 v_extrude;\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nuniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;const highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),Rt=si("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Dt=si("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=a_extrude*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),Gt=si("uniform float u_overscale_factor;varying float v_placed;varying float v_notUsed;varying float v_radius;varying vec2 v_extrude;varying vec2 v_extrude_scale;void main() {float alpha=0.5;vec4 color=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {color=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {color*=.2;}float extrude_scale_length=length(v_extrude_scale);float extrude_length=length(v_extrude)*extrude_scale_length;float stroke_width=15.0*extrude_scale_length/u_overscale_factor;float radius=v_radius*extrude_scale_length;float distance_to_edge=abs(extrude_length-radius);float opacity_t=smoothstep(-stroke_width,0.0,-distance_to_edge);gl_FragColor=opacity_t*color;}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;varying float v_radius;varying vec2 v_extrude;varying vec2 v_extrude_scale;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);highp float padding_factor=1.2;gl_Position.xy+=a_extrude*u_extrude_scale*padding_factor*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;v_radius=abs(a_extrude.y);v_extrude=a_extrude*padding_factor;v_extrude_scale=u_extrude_scale*u_camera_to_center_distance*collision_perspective_ratio;}"),qt=si("uniform highp vec4 u_color;void main() {gl_FragColor=u_color;}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),en=si("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),tn=si("#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvarying vec2 v_pos;void main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),nn=si("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec4 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),rn=si("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec4 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileZoomRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),on=si("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);}"),an=si("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec4 u_scale;uniform float u_vertical_gradient;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));}"),sn=si("uniform sampler2D u_image;uniform float u_opacity;varying vec2 v_pos;void main() {gl_FragColor=texture2D(u_image,v_pos)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),ln=si("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;return (data.r+data.g*256.0+data.b*256.0*256.0)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),un=si("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),cn=si("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvarying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;void main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/DEVICE_PIXEL_RATIO)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define ANTIALIASING 1.0/DEVICE_PIXEL_RATIO/2.0\n#define scale 0.015873016\nattribute vec4 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_gl_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nvec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=a_pos_normal.xy;mediump vec2 normal=a_pos_normal.zw;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_gl_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),pn=si("#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nuniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;void main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/DEVICE_PIXEL_RATIO)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define MAX_LINE_DISTANCE 32767.0\n#define ANTIALIASING 1.0/DEVICE_PIXEL_RATIO/2.0\n#define scale 0.015873016\nattribute vec4 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_gl_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nvec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=a_pos_normal.xy;mediump vec2 normal=a_pos_normal.zw;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_gl_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),hn=si("uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec4 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileZoomRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/DEVICE_PIXEL_RATIO)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x,1.0);float x_b=mod(v_linesofar/pattern_size_b.x,1.0);float y_a=0.5+(v_normal.y*clamp(v_width2.s,0.0,(pattern_size_a.y+2.0)/2.0)/pattern_size_a.y);float y_b=0.5+(v_normal.y*clamp(v_width2.s,0.0,(pattern_size_b.y+2.0)/2.0)/pattern_size_b.y);vec2 pos_a=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,vec2(x_a,y_a));vec2 pos_b=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,vec2(x_b,y_b));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\n#define ANTIALIASING 1.0/DEVICE_PIXEL_RATIO/2.0\nattribute vec4 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_gl_units_to_pixels;uniform mediump float u_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=a_pos_normal.xy;mediump vec2 normal=a_pos_normal.zw;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_gl_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);}"),fn=si("uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/DEVICE_PIXEL_RATIO)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\n#define ANTIALIASING 1.0/DEVICE_PIXEL_RATIO/2.0\nattribute vec4 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_gl_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nvec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=a_pos_normal.xy;mediump vec2 normal=a_pos_normal.zw;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_gl_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),dn=si("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),gn=si("uniform sampler2D u_texture;\n#pragma mapbox: define lowp float opacity\nvarying vec2 v_tex;varying float v_fade_opacity;void main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;\n#pragma mapbox: define lowp float opacity\nuniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_gl_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;void main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size[0],a_size[1],u_size_t)/256.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size[0]/256.0;} else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {size=u_size;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_gl_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),mn=si("#define SDF_PX 8.0\n#define EDGE_GAMMA 0.105/DEVICE_PIXEL_RATIO\nuniform bool u_is_halo;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nuniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;void main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nuniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_gl_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;void main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size[0],a_size[1],u_size_t)/256.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size[0]/256.0;} else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {size=u_size;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_gl_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=vec2(tex.x,tex.y);v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}");function si(e,t){var n=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,r={};return{fragmentSource:e=e.replace(n,function(e,t,n,i,o){return r[o]=!0,"define"===t?"\n#ifndef HAS_UNIFORM_u_"+o+"\nvarying "+n+" "+i+" "+o+";\n#else\nuniform "+n+" "+i+" u_"+o+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+o+"\n    "+n+" "+i+" "+o+" = u_"+o+";\n#endif\n"}),vertexSource:t=t.replace(n,function(e,t,n,i,o){var a="float"===i?"vec2":"vec4",s=o.match(/color/)?"color":a;return r[o]?"define"===t?"\n#ifndef HAS_UNIFORM_u_"+o+"\nuniform lowp float a_"+o+"_t;\nattribute "+n+" "+a+" a_"+o+";\nvarying "+n+" "+i+" "+o+";\n#else\nuniform "+n+" "+i+" u_"+o+";\n#endif\n":"vec4"===s?"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+o+" = a_"+o+";\n#else\n    "+n+" "+i+" "+o+" = u_"+o+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+o+" = unpack_mix_"+s+"(a_"+o+", a_"+o+"_t);\n#else\n    "+n+" "+i+" "+o+" = u_"+o+";\n#endif\n":"define"===t?"\n#ifndef HAS_UNIFORM_u_"+o+"\nuniform lowp float a_"+o+"_t;\nattribute "+n+" "+a+" a_"+o+";\n#else\nuniform "+n+" "+i+" u_"+o+";\n#endif\n":"vec4"===s?"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+n+" "+i+" "+o+" = a_"+o+";\n#else\n    "+n+" "+i+" "+o+" = u_"+o+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+n+" "+i+" "+o+" = unpack_mix_"+s+"(a_"+o+", a_"+o+"_t);\n#else\n    "+n+" "+i+" "+o+" = u_"+o+";\n#endif\n"})}}var yn=Object.freeze({prelude:Et,background:Pt,backgroundPattern:Ct,circle:kt,clippingMask:Tt,heatmap:It,heatmapTexture:Rt,collisionBox:Dt,collisionCircle:Gt,debug:qt,fill:en,fillOutline:tn,fillOutlinePattern:nn,fillPattern:rn,fillExtrusion:on,fillExtrusionPattern:an,extrusionTexture:sn,hillshadePrepare:ln,hillshade:un,line:cn,lineGradient:pn,linePattern:hn,lineSDF:fn,raster:dn,symbolIcon:gn,symbolSDF:mn}),vn=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};vn.prototype.bind=function(e,t,n,r,i,o,a,s){this.context=e;for(var l=this.boundPaintVertexBuffers.length!==r.length,u=0;!l&&u<r.length;u++)this.boundPaintVertexBuffers[u]!==r[u]&&(l=!0);var c=!this.vao||this.boundProgram!==t||this.boundLayoutVertexBuffer!==n||l||this.boundIndexBuffer!==i||this.boundVertexOffset!==o||this.boundDynamicVertexBuffer!==a||this.boundDynamicVertexBuffer2!==s;!e.extVertexArrayObject||c?this.freshBind(t,n,r,i,o,a,s):(e.bindVertexArrayOES.set(this.vao),a&&a.bind(),i&&i.dynamicDraw&&i.bind(),s&&s.bind())},vn.prototype.freshBind=function(e,t,n,r,i,o,a){var s,l=e.numAttributes,u=this.context,c=u.gl;if(u.extVertexArrayObject)this.vao&&this.destroy(),this.vao=u.extVertexArrayObject.createVertexArrayOES(),u.bindVertexArrayOES.set(this.vao),s=0,this.boundProgram=e,this.boundLayoutVertexBuffer=t,this.boundPaintVertexBuffers=n,this.boundIndexBuffer=r,this.boundVertexOffset=i,this.boundDynamicVertexBuffer=o,this.boundDynamicVertexBuffer2=a;else{s=u.currentNumAttributes||0;for(var p=l;p<s;p++)c.disableVertexAttribArray(p)}t.enableAttributes(c,e);for(var h=0,f=n;h<f.length;h+=1)f[h].enableAttributes(c,e);o&&o.enableAttributes(c,e),a&&a.enableAttributes(c,e),t.bind(),t.setVertexAttribPointers(c,e,i);for(var d=0,g=n;d<g.length;d+=1){var m=g[d];m.bind(),m.setVertexAttribPointers(c,e,i)}o&&(o.bind(),o.setVertexAttribPointers(c,e,i)),r&&r.bind(),a&&(a.bind(),a.setVertexAttribPointers(c,e,i)),u.currentNumAttributes=l},vn.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var _n=function(e,n,r,i,o){var a=e.gl;this.program=a.createProgram();var s=r.defines().concat("#define DEVICE_PIXEL_RATIO "+t.browser.devicePixelRatio.toFixed(1));o&&s.push("#define OVERDRAW_INSPECTOR;");var l=s.concat(Et.fragmentSource,n.fragmentSource).join("\n"),u=s.concat(Et.vertexSource,n.vertexSource).join("\n"),c=a.createShader(a.FRAGMENT_SHADER);a.shaderSource(c,l),a.compileShader(c),a.attachShader(this.program,c);var p=a.createShader(a.VERTEX_SHADER);a.shaderSource(p,u),a.compileShader(p),a.attachShader(this.program,p);for(var h=r.layoutAttributes||[],f=0;f<h.length;f++)a.bindAttribLocation(this.program,f,h[f].name);a.linkProgram(this.program),this.numAttributes=a.getProgramParameter(this.program,a.ACTIVE_ATTRIBUTES),this.attributes={};for(var d={},g=0;g<this.numAttributes;g++){var m=a.getActiveAttrib(this.program,g);m&&(this.attributes[m.name]=a.getAttribLocation(this.program,m.name))}for(var y=a.getProgramParameter(this.program,a.ACTIVE_UNIFORMS),v=0;v<y;v++){var _=a.getActiveUniform(this.program,v);_&&(d[_.name]=a.getUniformLocation(this.program,_.name))}this.fixedUniforms=i(e,d),this.binderUniforms=r.getUniforms(e,d)};function hi(e,n,r){var i=1/se(r,1,n.transform.tileZoom),o=Math.pow(2,r.tileID.overscaledZ),a=r.tileSize*Math.pow(2,n.transform.tileZoom)/o,s=a*(r.tileID.canonical.x+r.tileID.wrap*o),l=a*r.tileID.canonical.y;return{u_image:0,u_texsize:r.imageAtlasTexture.size,u_scale:[t.browser.devicePixelRatio,i,e.fromScale,e.toScale],u_fade:e.t,u_pixel_coord_upper:[s>>16,l>>16],u_pixel_coord_lower:[65535&s,65535&l]}}_n.prototype.draw=function(e,t,n,r,i,o,a,s,l,u,c,p,h,f,d,g){var m,y=e.gl;for(var v in e.program.set(this.program),e.setDepthMode(n),e.setStencilMode(r),e.setColorMode(i),e.setCullFace(o),this.fixedUniforms)this.fixedUniforms[v].set(a[v]);f&&f.setUniforms(e,this.binderUniforms,p,{zoom:h});for(var _=(m={},m[y.LINES]=2,m[y.TRIANGLES]=3,m[y.LINE_STRIP]=1,m)[t],b=0,x=c.get();b<x.length;b+=1){var w=x[b],S=w.vaos||(w.vaos={});(S[s]||(S[s]=new vn)).bind(e,this,l,f?f.getPaintVertexBuffers():[],u,w.vertexOffset,d,g),y.drawElements(t,w.primitiveLength*_,y.UNSIGNED_SHORT,w.primitiveOffset*_*2)}};var bn=function(e,n,r){var i=n.style.light,o=i.properties.get("position"),a=[o.x,o.y,o.z],s=t.create();"viewport"===i.properties.get("anchor")&&t.fromRotation(s,-n.transform.angle),t.transformMat3(a,a,s);var l=i.properties.get("color");return{u_matrix:e,u_lightpos:a,u_lightintensity:i.properties.get("intensity"),u_lightcolor:[l.r,l.g,l.b],u_vertical_gradient:+r}},xn=function(e,n,r,i,o,a){return t.extend(bn(e,n,r),hi(o,n,a),{u_height_factor:-Math.pow(2,i.overscaledZ)/a.tileSize/8})},wn=function(e,n,r){var i=t.create$1();t.ortho(i,0,e.width,e.height,0,0,1);var o=e.context.gl;return{u_matrix:i,u_world:[o.drawingBufferWidth,o.drawingBufferHeight],u_image:r,u_opacity:n}},Sn=function(e){return{u_matrix:e}},En=function(e,n,r,i){return t.extend(Sn(e),hi(r,n,i))},Pn=function(e,t){return{u_matrix:e,u_world:t}},Cn=function(e,n,r,i,o){return t.extend(En(e,n,r,i),{u_world:o})},kn=function(e,t,n,r){var i,o,a=e.transform;if("map"===r.paint.get("circle-pitch-alignment")){var s=se(n,1,a.zoom);i=!0,o=[s,s]}else i=!1,o=a.pixelsToGLUnits;return{u_camera_to_center_distance:a.cameraToCenterDistance,u_scale_with_map:+("map"===r.paint.get("circle-pitch-scale")),u_matrix:e.translatePosMatrix(t.posMatrix,n,r.paint.get("circle-translate"),r.paint.get("circle-translate-anchor")),u_pitch_with_map:+i,u_extrude_scale:o}},Tn=function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pixels_to_tile_units:new t.Uniform1f(e,n.u_pixels_to_tile_units),u_extrude_scale:new t.Uniform2f(e,n.u_extrude_scale),u_overscale_factor:new t.Uniform1f(e,n.u_overscale_factor)}},An=function(e,t,n){var r=se(n,1,t.zoom),i=Math.pow(2,t.zoom-n.tileID.overscaledZ),o=n.tileID.overscaleFactor();return{u_matrix:e,u_camera_to_center_distance:t.cameraToCenterDistance,u_pixels_to_tile_units:r,u_extrude_scale:[t.pixelsToGLUnits[0]/(r*i),t.pixelsToGLUnits[1]/(r*i)],u_overscale_factor:o}},On=function(e,t){return{u_matrix:e,u_color:t}},In=function(e){return{u_matrix:e}},Rn=function(e,t,n,r){return{u_matrix:e,u_extrude_scale:se(t,1,n),u_intensity:r}},Ln=function(e,n,r,i){var o=t.create$1();t.ortho(o,0,e.width,e.height,0,0,1);var a=e.context.gl;return{u_matrix:o,u_world:[a.drawingBufferWidth,a.drawingBufferHeight],u_image:r,u_color_ramp:i,u_opacity:n.paint.get("heatmap-opacity")}},Mn=function(e,t,n){var r=n.paint.get("hillshade-shadow-color"),i=n.paint.get("hillshade-highlight-color"),o=n.paint.get("hillshade-accent-color"),a=n.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===n.paint.get("hillshade-illumination-anchor")&&(a-=e.transform.angle);var s=!e.options.moving;return{u_matrix:e.transform.calculatePosMatrix(t.tileID.toUnwrapped(),s),u_image:0,u_latrange:zi(0,t.tileID),u_light:[n.paint.get("hillshade-exaggeration"),a],u_shadow:r,u_highlight:i,u_accent:o}},jn=function(e,n){var r=e.dem.stride,i=t.create$1();return t.ortho(i,0,t.EXTENT,-t.EXTENT,0,0,1),t.translate(i,i,[0,-t.EXTENT,0]),{u_matrix:i,u_image:1,u_dimension:[r,r],u_zoom:e.tileID.overscaledZ,u_maxzoom:n}};function zi(e,n){var r=Math.pow(2,n.canonical.z),i=n.canonical.y;return[new t.MercatorCoordinate(0,i/r).toLngLat().lat,new t.MercatorCoordinate(0,(i+1)/r).toLngLat().lat]}var Dn=function(e,t,n){var r=e.transform;return{u_matrix:Ai(e,t,n),u_ratio:1/se(t,1,r.zoom),u_gl_units_to_pixels:[1/r.pixelsToGLUnits[0],1/r.pixelsToGLUnits[1]]}},Fn=function(e,n,r){return t.extend(Dn(e,n,r),{u_image:0})},Nn=function(e,n,r,i){var o=e.transform,a=Mi(n,o);return{u_matrix:Ai(e,n,r),u_texsize:n.imageAtlasTexture.size,u_ratio:1/se(n,1,o.zoom),u_image:0,u_scale:[t.browser.devicePixelRatio,a,i.fromScale,i.toScale],u_fade:i.t,u_gl_units_to_pixels:[1/o.pixelsToGLUnits[0],1/o.pixelsToGLUnits[1]]}},Bn=function(e,n,r,i,o){var a=e.transform,s=e.lineAtlas,l=Mi(n,a),u="round"===r.layout.get("line-cap"),c=s.getDash(i.from,u),p=s.getDash(i.to,u),h=c.width*o.fromScale,f=p.width*o.toScale;return t.extend(Dn(e,n,r),{u_patternscale_a:[l/h,-c.height/2],u_patternscale_b:[l/f,-p.height/2],u_sdfgamma:s.width/(256*Math.min(h,f)*t.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:c.y,u_tex_y_b:p.y,u_mix:o.t})};function Mi(e,t){return 1/se(e,1,t.tileZoom)}function Ai(e,t,n){return e.translatePosMatrix(t.tileID.posMatrix,t,n.paint.get("line-translate"),n.paint.get("line-translate-anchor"))}var zn=function(e,t,n,r,i){return{u_matrix:e,u_tl_parent:t,u_scale_parent:n,u_buffer_scale:1,u_fade_t:r.mix,u_opacity:r.opacity*i.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:i.paint.get("raster-brightness-min"),u_brightness_high:i.paint.get("raster-brightness-max"),u_saturation_factor:(a=i.paint.get("raster-saturation"),a>0?1-1/(1.001-a):-a),u_contrast_factor:(o=i.paint.get("raster-contrast"),o>0?1/(1-o):1+o),u_spin_weights:Bi(i.paint.get("raster-hue-rotate"))};var o,a};function Bi(e){e*=Math.PI/180;var t=Math.sin(e),n=Math.cos(e);return[(2*n+1)/3,(-Math.sqrt(3)*t-n+1)/3,(Math.sqrt(3)*t-n+1)/3]}var Un=function(e,t,n,r,i,o,a,s,l,u){var c=i.transform;return{u_is_size_zoom_constant:+("constant"===e||"source"===e),u_is_size_feature_constant:+("constant"===e||"camera"===e),u_size_t:t?t.uSizeT:0,u_size:t?t.uSize:0,u_camera_to_center_distance:c.cameraToCenterDistance,u_pitch:c.pitch/360*2*Math.PI,u_rotate_symbol:+n,u_aspect_ratio:c.width/c.height,u_fade_change:i.options.fadeDuration?i.symbolFadeChange:1,u_matrix:o,u_label_plane_matrix:a,u_gl_coord_matrix:s,u_is_text:+l,u_pitch_with_map:+r,u_texsize:u,u_texture:0}},Vn=function(e,n,r,i,o,a,s,l,u,c,p){var h=o.transform;return t.extend(Un(e,n,r,i,o,a,s,l,u,c),{u_gamma_scale:i?Math.cos(h._pitch)*h.cameraToCenterDistance:1,u_is_halo:+p})},Gn=function(e,t,n){return{u_matrix:e,u_opacity:t,u_color:n}},Wn=function(e,n,r,i,o,a){return t.extend(function(e,t,n,r){var i=n.imageManager.getPattern(e.from),o=n.imageManager.getPattern(e.to),a=n.imageManager.getPixelSize(),s=a.width,l=a.height,u=Math.pow(2,r.tileID.overscaledZ),c=r.tileSize*Math.pow(2,n.transform.tileZoom)/u,p=c*(r.tileID.canonical.x+r.tileID.wrap*u),h=c*r.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:i.tl,u_pattern_br_a:i.br,u_pattern_tl_b:o.tl,u_pattern_br_b:o.br,u_texsize:[s,l],u_mix:t.t,u_pattern_size_a:i.displaySize,u_pattern_size_b:o.displaySize,u_scale_a:t.fromScale,u_scale_b:t.toScale,u_tile_units_to_pixels:1/se(r,1,n.transform.tileZoom),u_pixel_coord_upper:[p>>16,h>>16],u_pixel_coord_lower:[65535&p,65535&h]}}(i,a,r,o),{u_matrix:e,u_opacity:n})},qn={fillExtrusion:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_lightpos:new t.Uniform3f(e,n.u_lightpos),u_lightintensity:new t.Uniform1f(e,n.u_lightintensity),u_lightcolor:new t.Uniform3f(e,n.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,n.u_vertical_gradient)}},fillExtrusionPattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_lightpos:new t.Uniform3f(e,n.u_lightpos),u_lightintensity:new t.Uniform1f(e,n.u_lightintensity),u_lightcolor:new t.Uniform3f(e,n.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,n.u_vertical_gradient),u_height_factor:new t.Uniform1f(e,n.u_height_factor),u_image:new t.Uniform1i(e,n.u_image),u_texsize:new t.Uniform2f(e,n.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_scale:new t.Uniform4f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}},extrusionTexture:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_world:new t.Uniform2f(e,n.u_world),u_image:new t.Uniform1i(e,n.u_image),u_opacity:new t.Uniform1f(e,n.u_opacity)}},fill:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},fillPattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_image:new t.Uniform1i(e,n.u_image),u_texsize:new t.Uniform2f(e,n.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_scale:new t.Uniform4f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}},fillOutline:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_world:new t.Uniform2f(e,n.u_world)}},fillOutlinePattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_world:new t.Uniform2f(e,n.u_world),u_image:new t.Uniform1i(e,n.u_image),u_texsize:new t.Uniform2f(e,n.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_scale:new t.Uniform4f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}},circle:function(e,n){return{u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_scale_with_map:new t.Uniform1i(e,n.u_scale_with_map),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_extrude_scale:new t.Uniform2f(e,n.u_extrude_scale),u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},collisionBox:Tn,collisionCircle:Tn,debug:function(e,n){return{u_color:new t.UniformColor(e,n.u_color),u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},clippingMask:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},heatmap:function(e,n){return{u_extrude_scale:new t.Uniform1f(e,n.u_extrude_scale),u_intensity:new t.Uniform1f(e,n.u_intensity),u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},heatmapTexture:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_world:new t.Uniform2f(e,n.u_world),u_image:new t.Uniform1i(e,n.u_image),u_color_ramp:new t.Uniform1i(e,n.u_color_ramp),u_opacity:new t.Uniform1f(e,n.u_opacity)}},hillshade:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_image:new t.Uniform1i(e,n.u_image),u_latrange:new t.Uniform2f(e,n.u_latrange),u_light:new t.Uniform2f(e,n.u_light),u_shadow:new t.UniformColor(e,n.u_shadow),u_highlight:new t.UniformColor(e,n.u_highlight),u_accent:new t.UniformColor(e,n.u_accent)}},hillshadePrepare:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_image:new t.Uniform1i(e,n.u_image),u_dimension:new t.Uniform2f(e,n.u_dimension),u_zoom:new t.Uniform1f(e,n.u_zoom),u_maxzoom:new t.Uniform1f(e,n.u_maxzoom)}},line:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_ratio:new t.Uniform1f(e,n.u_ratio),u_gl_units_to_pixels:new t.Uniform2f(e,n.u_gl_units_to_pixels)}},lineGradient:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_ratio:new t.Uniform1f(e,n.u_ratio),u_gl_units_to_pixels:new t.Uniform2f(e,n.u_gl_units_to_pixels),u_image:new t.Uniform1i(e,n.u_image)}},linePattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_texsize:new t.Uniform2f(e,n.u_texsize),u_ratio:new t.Uniform1f(e,n.u_ratio),u_image:new t.Uniform1i(e,n.u_image),u_gl_units_to_pixels:new t.Uniform2f(e,n.u_gl_units_to_pixels),u_scale:new t.Uniform4f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}},lineSDF:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_ratio:new t.Uniform1f(e,n.u_ratio),u_gl_units_to_pixels:new t.Uniform2f(e,n.u_gl_units_to_pixels),u_patternscale_a:new t.Uniform2f(e,n.u_patternscale_a),u_patternscale_b:new t.Uniform2f(e,n.u_patternscale_b),u_sdfgamma:new t.Uniform1f(e,n.u_sdfgamma),u_image:new t.Uniform1i(e,n.u_image),u_tex_y_a:new t.Uniform1f(e,n.u_tex_y_a),u_tex_y_b:new t.Uniform1f(e,n.u_tex_y_b),u_mix:new t.Uniform1f(e,n.u_mix)}},raster:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_tl_parent:new t.Uniform2f(e,n.u_tl_parent),u_scale_parent:new t.Uniform1f(e,n.u_scale_parent),u_buffer_scale:new t.Uniform1f(e,n.u_buffer_scale),u_fade_t:new t.Uniform1f(e,n.u_fade_t),u_opacity:new t.Uniform1f(e,n.u_opacity),u_image0:new t.Uniform1i(e,n.u_image0),u_image1:new t.Uniform1i(e,n.u_image1),u_brightness_low:new t.Uniform1f(e,n.u_brightness_low),u_brightness_high:new t.Uniform1f(e,n.u_brightness_high),u_saturation_factor:new t.Uniform1f(e,n.u_saturation_factor),u_contrast_factor:new t.Uniform1f(e,n.u_contrast_factor),u_spin_weights:new t.Uniform3f(e,n.u_spin_weights)}},symbolIcon:function(e,n){return{u_is_size_zoom_constant:new t.Uniform1i(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,n.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,n.u_size_t),u_size:new t.Uniform1f(e,n.u_size),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,n.u_pitch),u_rotate_symbol:new t.Uniform1i(e,n.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,n.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,n.u_fade_change),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,n.u_label_plane_matrix),u_gl_coord_matrix:new t.UniformMatrix4f(e,n.u_gl_coord_matrix),u_is_text:new t.Uniform1f(e,n.u_is_text),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_texsize:new t.Uniform2f(e,n.u_texsize),u_texture:new t.Uniform1i(e,n.u_texture)}},symbolSDF:function(e,n){return{u_is_size_zoom_constant:new t.Uniform1i(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,n.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,n.u_size_t),u_size:new t.Uniform1f(e,n.u_size),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,n.u_pitch),u_rotate_symbol:new t.Uniform1i(e,n.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,n.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,n.u_fade_change),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,n.u_label_plane_matrix),u_gl_coord_matrix:new t.UniformMatrix4f(e,n.u_gl_coord_matrix),u_is_text:new t.Uniform1f(e,n.u_is_text),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_texsize:new t.Uniform2f(e,n.u_texsize),u_texture:new t.Uniform1i(e,n.u_texture),u_gamma_scale:new t.Uniform1f(e,n.u_gamma_scale),u_is_halo:new t.Uniform1f(e,n.u_is_halo)}},background:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_opacity:new t.Uniform1f(e,n.u_opacity),u_color:new t.UniformColor(e,n.u_color)}},backgroundPattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_opacity:new t.Uniform1f(e,n.u_opacity),u_image:new t.Uniform1i(e,n.u_image),u_pattern_tl_a:new t.Uniform2f(e,n.u_pattern_tl_a),u_pattern_br_a:new t.Uniform2f(e,n.u_pattern_br_a),u_pattern_tl_b:new t.Uniform2f(e,n.u_pattern_tl_b),u_pattern_br_b:new t.Uniform2f(e,n.u_pattern_br_b),u_texsize:new t.Uniform2f(e,n.u_texsize),u_mix:new t.Uniform1f(e,n.u_mix),u_pattern_size_a:new t.Uniform2f(e,n.u_pattern_size_a),u_pattern_size_b:new t.Uniform2f(e,n.u_pattern_size_b),u_scale_a:new t.Uniform1f(e,n.u_scale_a),u_scale_b:new t.Uniform1f(e,n.u_scale_b),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_tile_units_to_pixels:new t.Uniform1f(e,n.u_tile_units_to_pixels)}}};function ji(e,n){for(var r=e.sort(function(e,t){return e.tileID.isLessThan(t.tileID)?-1:t.tileID.isLessThan(e.tileID)?1:0}),i=0;i<r.length;i++){var o={},a=r[i],s=r.slice(i+1);Vi(a.tileID.wrapped(),a.tileID,s,new t.OverscaledTileID(0,a.tileID.wrap+1,0,0,0),o),a.setMask(o,n)}}function Vi(e,n,r,i,o){for(var a=0;a<r.length;a++){var s=r[a];if(i.isLessThan(s.tileID))break;if(n.key===s.tileID.key)return;if(s.tileID.isChildOf(n)){for(var l=n.children(1/0),u=0;u<l.length;u++)Vi(e,l[u],r.slice(a),i,o);return}}var c=n.overscaledZ-e.overscaledZ,p=new t.CanonicalTileID(c,n.canonical.x-(e.canonical.x<<c),n.canonical.y-(e.canonical.y<<c));o[p.key]=o[p.key]||p}function qi(e,t,n,r,i){for(var o=e.context,a=o.gl,s=i?e.useProgram("collisionCircle"):e.useProgram("collisionBox"),l=0;l<r.length;l++){var u=r[l],c=t.getTile(u),p=c.getBucket(n);if(p){var h=i?p.collisionCircle:p.collisionBox;h&&s.draw(o,i?a.TRIANGLES:a.LINES,Ne.disabled,Be.disabled,e.colorModeForRenderPass(),Ue.disabled,An(u.posMatrix,e.transform,c),n.id,h.layoutVertexBuffer,h.indexBuffer,h.segments,null,e.transform.zoom,null,null,h.collisionVertexBuffer)}}}var Hn=t.identity(new Float32Array(16)),Xn=t.properties.layout;function Xi(e,n,r,i,o,a,s,l,u,c,p,h){for(var f,d,g=e.context,m=g.gl,y=e.transform,v="map"===l,_="map"===u,b=v&&"point"!==r.layout.get("symbol-placement"),x=v&&!_&&!b,w=void 0!==r.layout.get("symbol-sort-key").constantOr(1),S=e.depthModeForSublayer(0,Ne.ReadOnly),E=[],P=0,C=i;P<C.length;P+=1){var k=C[P],T=n.getTile(k),A=T.getBucket(r);if(A){var O=o?A.text:A.icon;if(O&&O.segments.get().length){var I=O.programConfigurations.get(r.id),R=o||A.sdfIcons,L=o?A.textSizeData:A.iconSizeData;f||(f=e.useProgram(R?"symbolSDF":"symbolIcon",I),d=t.evaluateSizeForZoom(L,y.zoom,Xn.properties[o?"text-size":"icon-size"])),g.activeTexture.set(m.TEXTURE0);var M=void 0,j=void 0,D=void 0;if(o)j=T.glyphAtlasTexture,D=m.LINEAR,M=T.glyphAtlasTexture.size;else{var F=1!==r.layout.get("icon-size").constantOr(0)||A.iconsNeedLinear,N=_||0!==y.pitch;j=T.imageAtlasTexture,D=R||e.options.rotating||e.options.zooming||F||N?m.LINEAR:m.NEAREST,M=T.imageAtlasTexture.size}var B=se(T,1,e.transform.zoom),z=Wt(k.posMatrix,_,v,e.transform,B),U=Xt(k.posMatrix,_,v,e.transform,B);b&&Yt(A,k.posMatrix,e,o,z,U,_,c);var V=e.translatePosMatrix(k.posMatrix,T,a,s),G=b?Hn:z,W=e.translatePosMatrix(U,T,a,s,!0),q=R&&0!==r.paint.get(o?"text-halo-width":"icon-halo-width").constantOr(1),H={program:f,buffers:O,uniformValues:R?Vn(L.functionType,d,x,_,e,V,G,W,o,M,!0):Un(L.functionType,d,x,_,e,V,G,W,o,M),atlasTexture:j,atlasInterpolation:D,isSDF:R,hasHalo:q};if(w)for(var X=0,K=O.segments.get();X<K.length;X+=1){var Z=K[X];E.push({segments:new t.SegmentVector([Z]),sortKey:Z.sortKey,state:H})}else E.push({segments:O.segments,sortKey:0,state:H})}}}w&&E.sort(function(e,t){return e.sortKey-t.sortKey});for(var Y=0,J=E;Y<J.length;Y+=1){var Q=J[Y],$=Q.state;if($.atlasTexture.bind($.atlasInterpolation,m.CLAMP_TO_EDGE),$.isSDF){var ee=$.uniformValues;$.hasHalo&&(ee.u_is_halo=1,Hi($.buffers,Q.segments,r,e,$.program,S,p,h,ee)),ee.u_is_halo=0}Hi($.buffers,Q.segments,r,e,$.program,S,p,h,$.uniformValues)}}function Hi(e,t,n,r,i,o,a,s,l){var u=r.context,c=u.gl;i.draw(u,c.TRIANGLES,o,a,s,Ue.disabled,l,n.id,e.layoutVertexBuffer,e.indexBuffer,t,n.paint,r.transform.zoom,e.programConfigurations.get(n.id),e.dynamicLayoutVertexBuffer,e.opacityVertexBuffer)}function Ki(e,t,n,r,i,o,a){var s,l,u,c,p,h=e.context.gl,f=n.paint.get("fill-pattern"),d=f&&f.constantOr(1),g=n.getCrossfadeParameters();a?(l=d&&!n.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",s=h.LINES):(l=d?"fillPattern":"fill",s=h.TRIANGLES);for(var m=0,y=r;m<y.length;m+=1){var v=y[m],_=t.getTile(v);if(!d||_.patternsLoaded()){var b=_.getBucket(n);if(b){var x=b.programConfigurations.get(n.id),w=e.useProgram(l,x);d&&(e.context.activeTexture.set(h.TEXTURE0),_.imageAtlasTexture.bind(h.LINEAR,h.CLAMP_TO_EDGE),x.updatePatternPaintBuffers(g));var S=f.constantOr(null);if(S&&_.imageAtlas){var E=_.imageAtlas.patternPositions[S.to],P=_.imageAtlas.patternPositions[S.from];E&&P&&x.setConstantPatternPositions(E,P)}var C=e.translatePosMatrix(v.posMatrix,_,n.paint.get("fill-translate"),n.paint.get("fill-translate-anchor"));if(a){c=b.indexBuffer2,p=b.segments2;var k=[h.drawingBufferWidth,h.drawingBufferHeight];u="fillOutlinePattern"===l&&d?Cn(C,e,g,_,k):Pn(C,k)}else c=b.indexBuffer,p=b.segments,u=d?En(C,e,g,_):Sn(C);w.draw(e.context,s,i,e.stencilModeForClipping(v),o,Ue.disabled,u,n.id,b.layoutVertexBuffer,c,p,n.paint,e.transform.zoom,x)}}}}function Yi(e,n){var r=e.context,i=r.gl,o=n.viewportFrame;if(e.depthRboNeedsClear&&e.setupOffscreenDepthRenderbuffer(),!o){var a=new t.Texture(r,{width:e.width,height:e.height,data:null},i.RGBA);a.bind(i.LINEAR,i.CLAMP_TO_EDGE),(o=n.viewportFrame=r.createFramebuffer(e.width,e.height)).colorAttachment.set(a.texture)}r.bindFramebuffer.set(o.framebuffer),o.depthAttachment.set(e.depthRbo),e.depthRboNeedsClear&&(r.clear({depth:1}),e.depthRboNeedsClear=!1),r.clear({color:t.Color.transparent}),r.setStencilMode(Be.disabled),r.setDepthMode(new Ne(i.LEQUAL,Ne.ReadWrite,[0,1])),r.setColorMode(e.colorModeForRenderPass())}function Ji(e,t,n){var r=t.viewportFrame;if(r){var i=e.context,o=i.gl;i.activeTexture.set(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,r.colorAttachment.get()),e.useProgram("extrusionTexture").draw(i,o.TRIANGLES,Ne.disabled,Be.disabled,e.colorModeForRenderPass(),Ue.disabled,wn(e,n,0),t.id,e.viewportBuffer,e.quadTriangleIndexBuffer,e.viewportSegments,t.paint,e.transform.zoom)}}function Qi(e,t,n,r,i,o){var a=e.context,s=a.gl,l=t.fbo;if(l){var u=e.useProgram("hillshade");a.activeTexture.set(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,l.colorAttachment.get());var c=Mn(e,t,n);t.maskedBoundsBuffer&&t.maskedIndexBuffer&&t.segments?u.draw(a,s.TRIANGLES,r,i,o,Ue.disabled,c,n.id,t.maskedBoundsBuffer,t.maskedIndexBuffer,t.segments):u.draw(a,s.TRIANGLES,r,i,o,Ue.disabled,c,n.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments)}}function $i(e,n,r,i,o,a,s){var l=e.context,u=l.gl;if(n.dem&&n.dem.data){var c=n.dem.dim,p=n.dem.stride,h=n.dem.getPixels();if(l.activeTexture.set(u.TEXTURE1),l.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||e.getTileTexture(p),n.demTexture){var f=n.demTexture;f.update(h,{premultiply:!1}),f.bind(u.NEAREST,u.CLAMP_TO_EDGE)}else n.demTexture=new t.Texture(l,h,u.RGBA,{premultiply:!1}),n.demTexture.bind(u.NEAREST,u.CLAMP_TO_EDGE);l.activeTexture.set(u.TEXTURE0);var d=n.fbo;if(!d){var g=new t.Texture(l,{width:c,height:c,data:null},u.RGBA);g.bind(u.LINEAR,u.CLAMP_TO_EDGE),(d=n.fbo=l.createFramebuffer(c,c)).colorAttachment.set(g.texture)}l.bindFramebuffer.set(d.framebuffer),l.viewport.set([0,0,c,c]),e.useProgram("hillshadePrepare").draw(l,u.TRIANGLES,o,a,s,Ue.disabled,jn(n,i),r.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments),n.needsHillshadePrepare=!1}}function to(e,n,r,i,o){var a=i.paint.get("raster-fade-duration");if(a>0){var s=t.browser.now(),l=(s-e.timeAdded)/a,u=n?(s-n.timeAdded)/a:-1,c=r.getSource(),p=o.coveringZoomLevel({tileSize:c.tileSize,roundZoom:c.roundZoom}),h=!n||Math.abs(n.tileID.overscaledZ-p)>Math.abs(e.tileID.overscaledZ-p),f=h&&e.refreshedUponExpiration?1:t.clamp(h?l:1-u,0,1);return e.refreshedUponExpiration&&l>=1&&(e.refreshedUponExpiration=!1),n?{opacity:1,mix:1-f}:{opacity:f,mix:0}}return{opacity:1,mix:0}}function eo(e,n,r){var i=e.context,o=i.gl,a=r.posMatrix,s=e.useProgram("debug"),l=Ne.disabled,u=Be.disabled,c=e.colorModeForRenderPass(),p="$debug";s.draw(i,o.LINE_STRIP,l,u,c,Ue.disabled,On(a,t.Color.red),p,e.debugBuffer,e.tileBorderIndexBuffer,e.debugSegments);for(var h=function(e,t,n,r){r=r||1;var i,o,a,s,l,u,c,p,h=[];for(i=0,o=e.length;i<o;i++)if(l=Kn[e[i]]){for(p=null,a=0,s=l[1].length;a<s;a+=2)-1===l[1][a]&&-1===l[1][a+1]?p=null:(u=t+l[1][a]*r,c=200-l[1][a+1]*r,p&&h.push(p.x,p.y,u,c),p={x:u,y:c});t+=l[0]*r}return h}(r.toString(),50,0,5),f=new t.StructArrayLayout2i4,d=new t.StructArrayLayout2ui4,g=0;g<h.length;g+=2)f.emplaceBack(h[g],h[g+1]),d.emplaceBack(g,g+1);for(var m=i.createVertexBuffer(f,wt.members),y=i.createIndexBuffer(d),v=t.SegmentVector.simpleSegment(0,0,f.length/2,f.length/2),_=n.getTile(r).tileSize,b=t.EXTENT/(Math.pow(2,e.transform.zoom-r.overscaledZ)*_),x=[[-1,-1],[-1,1],[1,-1],[1,1]],w=0;w<x.length;w++){var S=x[w];s.draw(i,o.LINES,l,u,c,Ue.disabled,On(t.translate([],a,[b*S[0],b*S[1],0]),t.Color.white),p,m,y,v)}s.draw(i,o.LINES,l,u,c,Ue.disabled,On(a,t.Color.black),p,m,y,v)}var Kn={" ":[16,[]],"!":[10,[5,21,5,7,-1,-1,5,2,4,1,5,0,6,1,5,2]],'"':[16,[4,21,4,14,-1,-1,12,21,12,14]],"#":[21,[11,25,4,-7,-1,-1,17,25,10,-7,-1,-1,4,12,18,12,-1,-1,3,6,17,6]],$:[20,[8,25,8,-4,-1,-1,12,25,12,-4,-1,-1,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],"%":[24,[21,21,3,0,-1,-1,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,-1,-1,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7]],"&":[26,[23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2]],"'":[10,[5,19,4,20,5,21,6,20,6,18,5,16,4,15]],"(":[14,[11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7]],")":[14,[3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7]],"*":[16,[8,21,8,9,-1,-1,3,18,13,12,-1,-1,13,18,3,12]],"+":[26,[13,18,13,0,-1,-1,4,9,22,9]],",":[10,[6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"-":[26,[4,9,22,9]],".":[10,[5,2,4,1,5,0,6,1,5,2]],"/":[22,[20,25,2,-7]],0:[20,[9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21]],1:[20,[6,17,8,18,11,21,11,0]],2:[20,[4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0]],3:[20,[5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],4:[20,[13,21,3,7,18,7,-1,-1,13,21,13,0]],5:[20,[15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],6:[20,[16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7]],7:[20,[17,21,7,0,-1,-1,3,21,17,21]],8:[20,[8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21]],9:[20,[16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3]],":":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,5,2,4,1,5,0,6,1,5,2]],";":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"<":[24,[20,18,4,9,20,0]],"=":[26,[4,12,22,12,-1,-1,4,6,22,6]],">":[24,[4,18,20,9,4,0]],"?":[18,[3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,-1,-1,9,2,8,1,9,0,10,1,9,2]],"@":[27,[18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,-1,-1,12,16,10,14,9,11,9,8,10,6,11,5,-1,-1,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,-1,-1,19,16,18,8,18,6,19,5]],A:[18,[9,21,1,0,-1,-1,9,21,17,0,-1,-1,4,7,14,7]],B:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,-1,-1,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0]],C:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5]],D:[21,[4,21,4,0,-1,-1,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0]],E:[19,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11,-1,-1,4,0,17,0]],F:[18,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11]],G:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,-1,-1,13,8,18,8]],H:[22,[4,21,4,0,-1,-1,18,21,18,0,-1,-1,4,11,18,11]],I:[8,[4,21,4,0]],J:[16,[12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7]],K:[21,[4,21,4,0,-1,-1,18,21,4,7,-1,-1,9,12,18,0]],L:[17,[4,21,4,0,-1,-1,4,0,16,0]],M:[24,[4,21,4,0,-1,-1,4,21,12,0,-1,-1,20,21,12,0,-1,-1,20,21,20,0]],N:[22,[4,21,4,0,-1,-1,4,21,18,0,-1,-1,18,21,18,0]],O:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21]],P:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10]],Q:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,-1,-1,12,4,18,-2]],R:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,-1,-1,11,11,18,0]],S:[20,[17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],T:[16,[8,21,8,0,-1,-1,1,21,15,21]],U:[22,[4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21]],V:[18,[1,21,9,0,-1,-1,17,21,9,0]],W:[24,[2,21,7,0,-1,-1,12,21,7,0,-1,-1,12,21,17,0,-1,-1,22,21,17,0]],X:[20,[3,21,17,0,-1,-1,17,21,3,0]],Y:[18,[1,21,9,11,9,0,-1,-1,17,21,9,11]],Z:[20,[17,21,3,0,-1,-1,3,21,17,21,-1,-1,3,0,17,0]],"[":[14,[4,25,4,-7,-1,-1,5,25,5,-7,-1,-1,4,25,11,25,-1,-1,4,-7,11,-7]],"\\":[14,[0,21,14,-3]],"]":[14,[9,25,9,-7,-1,-1,10,25,10,-7,-1,-1,3,25,10,25,-1,-1,3,-7,10,-7]],"^":[16,[6,15,8,18,10,15,-1,-1,3,12,8,17,13,12,-1,-1,8,17,8,0]],_:[16,[0,-2,16,-2]],"`":[10,[6,21,5,20,4,18,4,16,5,15,6,16,5,17]],a:[19,[15,14,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],b:[19,[4,21,4,0,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],c:[18,[15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],d:[19,[15,21,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],e:[18,[3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],f:[12,[10,21,8,21,6,20,5,17,5,0,-1,-1,2,14,9,14]],g:[19,[15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],h:[19,[4,21,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],i:[8,[3,21,4,20,5,21,4,22,3,21,-1,-1,4,14,4,0]],j:[10,[5,21,6,20,7,21,6,22,5,21,-1,-1,6,14,6,-3,5,-6,3,-7,1,-7]],k:[17,[4,21,4,0,-1,-1,14,14,4,4,-1,-1,8,8,15,0]],l:[8,[4,21,4,0]],m:[30,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0,-1,-1,15,10,18,13,20,14,23,14,25,13,26,10,26,0]],n:[19,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],o:[19,[8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14]],p:[19,[4,14,4,-7,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],q:[19,[15,14,15,-7,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],r:[13,[4,14,4,0,-1,-1,4,8,5,11,7,13,9,14,12,14]],s:[17,[14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3]],t:[12,[5,21,5,4,6,1,8,0,10,0,-1,-1,2,14,9,14]],u:[19,[4,14,4,4,5,1,7,0,10,0,12,1,15,4,-1,-1,15,14,15,0]],v:[16,[2,14,8,0,-1,-1,14,14,8,0]],w:[22,[3,14,7,0,-1,-1,11,14,7,0,-1,-1,11,14,15,0,-1,-1,19,14,15,0]],x:[17,[3,14,14,0,-1,-1,14,14,3,0]],y:[16,[2,14,8,0,-1,-1,14,14,8,0,6,-4,4,-6,2,-7,1,-7]],z:[17,[14,14,3,0,-1,-1,3,14,14,14,-1,-1,3,0,14,0]],"{":[14,[9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,-1,-1,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,-1,-1,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7]],"|":[8,[4,25,4,-7]],"}":[14,[5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,-1,-1,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,-1,-1,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7]],"~":[24,[3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,-1,-1,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12]]},Zn={symbol:function(e,t,n,r){if("translucent"===e.renderPass){var i=Be.disabled,o=e.colorModeForRenderPass();0!==n.paint.get("icon-opacity").constantOr(1)&&Xi(e,t,n,r,!1,n.paint.get("icon-translate"),n.paint.get("icon-translate-anchor"),n.layout.get("icon-rotation-alignment"),n.layout.get("icon-pitch-alignment"),n.layout.get("icon-keep-upright"),i,o),0!==n.paint.get("text-opacity").constantOr(1)&&Xi(e,t,n,r,!0,n.paint.get("text-translate"),n.paint.get("text-translate-anchor"),n.layout.get("text-rotation-alignment"),n.layout.get("text-pitch-alignment"),n.layout.get("text-keep-upright"),i,o),t.map.showCollisionBoxes&&function(e,t,n,r){qi(e,t,n,r,!1),qi(e,t,n,r,!0)}(e,t,n,r)}},circle:function(e,t,n,r){if("translucent"===e.renderPass){var i=n.paint.get("circle-opacity"),o=n.paint.get("circle-stroke-width"),a=n.paint.get("circle-stroke-opacity");if(0!==i.constantOr(1)||0!==o.constantOr(1)&&0!==a.constantOr(1))for(var s=e.context,l=s.gl,u=e.depthModeForSublayer(0,Ne.ReadOnly),c=Be.disabled,p=e.colorModeForRenderPass(),h=0;h<r.length;h++){var f=r[h],d=t.getTile(f),g=d.getBucket(n);if(g){var m=g.programConfigurations.get(n.id);e.useProgram("circle",m).draw(s,l.TRIANGLES,u,c,p,Ue.disabled,kn(e,f,d,n),n.id,g.layoutVertexBuffer,g.indexBuffer,g.segments,n.paint,e.transform.zoom,m)}}}},heatmap:function(e,n,r,i){if(0!==r.paint.get("heatmap-opacity"))if("offscreen"===e.renderPass){var o=e.context,a=o.gl,s=e.depthModeForSublayer(0,Ne.ReadOnly),l=Be.disabled,u=new ze([a.ONE,a.ONE],t.Color.transparent,[!0,!0,!0,!0]);!function(e,t,n){var r=e.gl;e.activeTexture.set(r.TEXTURE1),e.viewport.set([0,0,t.width/4,t.height/4]);var i=n.heatmapFbo;if(i)r.bindTexture(r.TEXTURE_2D,i.colorAttachment.get()),e.bindFramebuffer.set(i.framebuffer);else{var o=r.createTexture();r.bindTexture(r.TEXTURE_2D,o),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),i=n.heatmapFbo=e.createFramebuffer(t.width/4,t.height/4),function t(e,n,r,i){var o=e.gl;o.texImage2D(o.TEXTURE_2D,0,o.RGBA,n.width/4,n.height/4,0,o.RGBA,e.extTextureHalfFloat?e.extTextureHalfFloat.HALF_FLOAT_OES:o.UNSIGNED_BYTE,null),i.colorAttachment.set(r),e.extTextureHalfFloat&&o.checkFramebufferStatus(o.FRAMEBUFFER)!==o.FRAMEBUFFER_COMPLETE&&(e.extTextureHalfFloat=null,i.colorAttachment.setDirty(),t(e,n,r,i))}(e,t,o,i)}}(o,e,r),o.clear({color:t.Color.transparent});for(var c=0;c<i.length;c++){var p=i[c];if(!n.hasRenderableParent(p)){var h=n.getTile(p),f=h.getBucket(r);if(f){var d=f.programConfigurations.get(r.id),g=e.useProgram("heatmap",d),m=e.transform.zoom;g.draw(o,a.TRIANGLES,s,l,u,Ue.disabled,Rn(p.posMatrix,h,m,r.paint.get("heatmap-intensity")),r.id,f.layoutVertexBuffer,f.indexBuffer,f.segments,r.paint,e.transform.zoom,d)}}}o.viewport.set([0,0,e.width,e.height])}else"translucent"===e.renderPass&&(e.context.setColorMode(e.colorModeForRenderPass()),function(e,n){var r=e.context,i=r.gl,o=n.heatmapFbo;if(o){r.activeTexture.set(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,o.colorAttachment.get()),r.activeTexture.set(i.TEXTURE1);var a=n.colorRampTexture;a||(a=n.colorRampTexture=new t.Texture(r,n.colorRamp,i.RGBA)),a.bind(i.LINEAR,i.CLAMP_TO_EDGE),e.useProgram("heatmapTexture").draw(r,i.TRIANGLES,Ne.disabled,Be.disabled,e.colorModeForRenderPass(),Ue.disabled,Ln(e,n,0,1),n.id,e.viewportBuffer,e.quadTriangleIndexBuffer,e.viewportSegments,n.paint,e.transform.zoom)}}(e,r))},line:function(e,n,r,i){if("translucent"===e.renderPass){var o=r.paint.get("line-opacity"),a=r.paint.get("line-width");if(0!==o.constantOr(1)&&0!==a.constantOr(1)){var s=e.depthModeForSublayer(0,Ne.ReadOnly),l=e.colorModeForRenderPass(),u=r.paint.get("line-dasharray"),c=r.paint.get("line-pattern"),p=c.constantOr(1),h=r.paint.get("line-gradient"),f=r.getCrossfadeParameters(),d=u?"lineSDF":p?"linePattern":h?"lineGradient":"line",g=e.context,m=g.gl,y=!0;if(h){g.activeTexture.set(m.TEXTURE0);var v=r.gradientTexture;if(!r.gradient)return;v||(v=r.gradientTexture=new t.Texture(g,r.gradient,m.RGBA)),v.bind(m.LINEAR,m.CLAMP_TO_EDGE)}for(var _=0,b=i;_<b.length;_+=1){var x=b[_],w=n.getTile(x);if(!p||w.patternsLoaded()){var S=w.getBucket(r);if(S){var E=S.programConfigurations.get(r.id),P=e.context.program.get(),C=e.useProgram(d,E),k=y||C.program!==P,T=c.constantOr(null);if(T&&w.imageAtlas){var A=w.imageAtlas.patternPositions[T.to],O=w.imageAtlas.patternPositions[T.from];A&&O&&E.setConstantPatternPositions(A,O)}var I=u?Bn(e,w,r,u,f):p?Nn(e,w,r,f):h?Fn(e,w,r):Dn(e,w,r);u&&(k||e.lineAtlas.dirty)?(g.activeTexture.set(m.TEXTURE0),e.lineAtlas.bind(g)):p&&(g.activeTexture.set(m.TEXTURE0),w.imageAtlasTexture.bind(m.LINEAR,m.CLAMP_TO_EDGE),E.updatePatternPaintBuffers(f)),C.draw(g,m.TRIANGLES,s,e.stencilModeForClipping(x),l,Ue.disabled,I,r.id,S.layoutVertexBuffer,S.indexBuffer,S.segments,r.paint,e.transform.zoom,E),y=!1}}}}}},fill:function(e,n,r,i){var o=r.paint.get("fill-color"),a=r.paint.get("fill-opacity");if(0!==a.constantOr(1)){var s=e.colorModeForRenderPass(),l=r.paint.get("fill-pattern").constantOr(1)||1!==o.constantOr(t.Color.transparent).a||1!==a.constantOr(0)?"translucent":"opaque";if(e.renderPass===l){var u=e.depthModeForSublayer(1,"opaque"===e.renderPass?Ne.ReadWrite:Ne.ReadOnly);Ki(e,n,r,i,u,s,!1)}if("translucent"===e.renderPass&&r.paint.get("fill-antialias")){var c=e.depthModeForSublayer(r.getPaintProperty("fill-outline-color")?2:0,Ne.ReadOnly);Ki(e,n,r,i,c,s,!0)}}},"fill-extrusion":function(e,t,n,r){if(0!==n.paint.get("fill-extrusion-opacity"))if("offscreen"===e.renderPass){Yi(e,n);var i=new Ne(e.context.gl.LEQUAL,Ne.ReadWrite,[0,1]),o=Be.disabled,a=e.colorModeForRenderPass();!function(e,t,n,r,i,o,a){for(var s=e.context,l=s.gl,u=n.paint.get("fill-extrusion-pattern"),c=u.constantOr(1),p=n.getCrossfadeParameters(),h=0,f=r;h<f.length;h+=1){var d=f[h],g=t.getTile(d),m=g.getBucket(n);if(m){var y=m.programConfigurations.get(n.id),v=e.useProgram(c?"fillExtrusionPattern":"fillExtrusion",y);c&&(e.context.activeTexture.set(l.TEXTURE0),g.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),y.updatePatternPaintBuffers(p));var _=u.constantOr(null);if(_&&g.imageAtlas){var b=g.imageAtlas.patternPositions[_.to],x=g.imageAtlas.patternPositions[_.from];b&&x&&y.setConstantPatternPositions(b,x)}var w=e.translatePosMatrix(d.posMatrix,g,n.paint.get("fill-extrusion-translate"),n.paint.get("fill-extrusion-translate-anchor")),S=n.paint.get("fill-extrusion-vertical-gradient"),E=c?xn(w,e,S,d,p,g):bn(w,e,S);v.draw(s,s.gl.TRIANGLES,i,o,a,Ue.backCCW,E,n.id,m.layoutVertexBuffer,m.indexBuffer,m.segments,n.paint,e.transform.zoom,y)}}}(e,t,n,r,i,o,a)}else"translucent"===e.renderPass&&Ji(e,n,n.paint.get("fill-extrusion-opacity"))},hillshade:function(e,t,n,r){if("offscreen"===e.renderPass||"translucent"===e.renderPass){for(var i=e.context,o=t.getSource().maxzoom,a=e.depthModeForSublayer(0,Ne.ReadOnly),s=Be.disabled,l=e.colorModeForRenderPass(),u=0,c=r;u<c.length;u+=1){var p=c[u],h=t.getTile(p);h.needsHillshadePrepare&&"offscreen"===e.renderPass?$i(e,h,n,o,a,s,l):"translucent"===e.renderPass&&Qi(e,h,n,a,s,l)}i.viewport.set([0,0,e.width,e.height])}},raster:function(e,t,n,r){if("translucent"===e.renderPass&&0!==n.paint.get("raster-opacity"))for(var i=e.context,o=i.gl,a=t.getSource(),s=e.useProgram("raster"),l=Be.disabled,u=e.colorModeForRenderPass(),c=r.length&&r[0].overscaledZ,p=!e.options.moving,h=0,f=r;h<f.length;h+=1){var d=f[h],g=e.depthModeForSublayer(d.overscaledZ-c,1===n.paint.get("raster-opacity")?Ne.ReadWrite:Ne.ReadOnly,o.LESS),m=t.getTile(d),y=e.transform.calculatePosMatrix(d.toUnwrapped(),p);m.registerFadeDuration(n.paint.get("raster-fade-duration"));var v=t.findLoadedParent(d,0),_=to(m,v,t,n,e.transform),b=void 0,x=void 0,w="nearest"===n.paint.get("raster-resampling")?o.NEAREST:o.LINEAR;i.activeTexture.set(o.TEXTURE0),m.texture.bind(w,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),i.activeTexture.set(o.TEXTURE1),v?(v.texture.bind(w,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),b=Math.pow(2,v.tileID.overscaledZ-m.tileID.overscaledZ),x=[m.tileID.canonical.x*b%1,m.tileID.canonical.y*b%1]):m.texture.bind(w,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST);var S=zn(y,x||[0,0],b||1,_,n);a instanceof U?s.draw(i,o.TRIANGLES,g,l,u,Ue.disabled,S,n.id,a.boundsBuffer,e.quadTriangleIndexBuffer,a.boundsSegments):m.maskedBoundsBuffer&&m.maskedIndexBuffer&&m.segments?s.draw(i,o.TRIANGLES,g,l,u,Ue.disabled,S,n.id,m.maskedBoundsBuffer,m.maskedIndexBuffer,m.segments,n.paint,e.transform.zoom):s.draw(i,o.TRIANGLES,g,l,u,Ue.disabled,S,n.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments)}},background:function(e,t,n){var r=n.paint.get("background-color"),i=n.paint.get("background-opacity");if(0!==i){var o=e.context,a=o.gl,s=e.transform,l=s.tileSize,u=n.paint.get("background-pattern");if(!e.isPatternMissing(u)){var c=u||1!==r.a||1!==i?"translucent":"opaque";if(e.renderPass===c){var p=Be.disabled,h=e.depthModeForSublayer(0,"opaque"===c?Ne.ReadWrite:Ne.ReadOnly),f=e.colorModeForRenderPass(),d=e.useProgram(u?"backgroundPattern":"background"),g=s.coveringTiles({tileSize:l});u&&(o.activeTexture.set(a.TEXTURE0),e.imageManager.bind(e.context));for(var m=n.getCrossfadeParameters(),y=0,v=g;y<v.length;y+=1){var _=v[y],b=e.transform.calculatePosMatrix(_.toUnwrapped()),x=u?Wn(b,i,e,u,{tileID:_,tileSize:l},m):Gn(b,i,r);d.draw(o,a.TRIANGLES,h,p,f,Ue.disabled,x,n.id,e.tileExtentBuffer,e.quadTriangleIndexBuffer,e.tileExtentSegments)}}}}},debug:function(e,t,n){for(var r=0;r<n.length;r++)eo(e,t,n[r])},custom:function(e,t,n){var r=e.context,i=n.implementation;if("offscreen"===e.renderPass){var o=i.prerender;o&&(e.setCustomLayerDefaults(),o.call(i,r.gl,e.transform.customLayerMatrix()),r.setDirty(),e.setBaseState()),"3d"===i.renderingMode&&(e.setCustomLayerDefaults(),Yi(e,n),i.render(r.gl,e.transform.customLayerMatrix()),r.setDirty(),e.setBaseState())}else if("translucent"===e.renderPass)if("3d"===i.renderingMode)Ji(e,n,1);else{e.setCustomLayerDefaults(),r.setColorMode(e.colorModeForRenderPass()),r.setStencilMode(Be.disabled);var a=e.depthModeForSublayer(0,Ne.ReadOnly);r.setDepthMode(a),i.render(r.gl,e.transform.customLayerMatrix()),r.setDirty(),e.setBaseState(),r.bindFramebuffer.set(null)}}},Yn=function(e,n){this.context=new Ve(e),this.transform=n,this._tileTextures={},this.setup(),this.numSublayers=Ge.maxUnderzooming+Ge.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.depthRboNeedsClear=!0,this.emptyProgramConfiguration=new t.ProgramConfiguration,this.crossTileSymbolIndex=new yt};function ao(e,t){if(e.y>t.y){var n=e;e=t,t=n}return{x0:e.x,y0:e.y,x1:t.x,y1:t.y,dx:t.x-e.x,dy:t.y-e.y}}function no(e,t,n,r,i){var o=Math.max(n,Math.floor(t.y0)),a=Math.min(r,Math.ceil(t.y1));if(e.x0===t.x0&&e.y0===t.y0?e.x0+t.dy/e.dy*e.dx<t.x1:e.x1-t.dy/e.dy*e.dx<t.x0){var s=e;e=t,t=s}for(var l=e.dx/e.dy,u=t.dx/t.dy,c=e.dx>0,p=t.dx<0,h=o;h<a;h++){var f=l*Math.max(0,Math.min(e.dy,h+c-e.y0))+e.x0,d=u*Math.max(0,Math.min(t.dy,h+p-t.y0))+t.x0;i(Math.floor(d),Math.ceil(f),h)}}function so(e,t,n,r,i,o){var a,s=ao(e,t),l=ao(t,n),u=ao(n,e);s.dy>l.dy&&(a=s,s=l,l=a),s.dy>u.dy&&(a=s,s=u,u=a),l.dy>u.dy&&(a=l,l=u,u=a),s.dy&&no(u,s,r,i,o),l.dy&&no(u,l,r,i,o)}Yn.prototype.resize=function(e,n){var r=this.context.gl;if(this.width=e*t.browser.devicePixelRatio,this.height=n*t.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var i=0,o=this.style._order;i<o.length;i+=1){var a=o[i];this.style._layers[a].resize()}this.depthRbo&&(r.deleteRenderbuffer(this.depthRbo),this.depthRbo=null)},Yn.prototype.setup=function(){var e=this.context,n=new t.StructArrayLayout2i4;n.emplaceBack(0,0),n.emplaceBack(t.EXTENT,0),n.emplaceBack(0,t.EXTENT),n.emplaceBack(t.EXTENT,t.EXTENT),this.tileExtentBuffer=e.createVertexBuffer(n,wt.members),this.tileExtentSegments=t.SegmentVector.simpleSegment(0,0,4,2);var r=new t.StructArrayLayout2i4;r.emplaceBack(0,0),r.emplaceBack(t.EXTENT,0),r.emplaceBack(0,t.EXTENT),r.emplaceBack(t.EXTENT,t.EXTENT),this.debugBuffer=e.createVertexBuffer(r,wt.members),this.debugSegments=t.SegmentVector.simpleSegment(0,0,4,5);var i=new t.StructArrayLayout4i8;i.emplaceBack(0,0,0,0),i.emplaceBack(t.EXTENT,0,t.EXTENT,0),i.emplaceBack(0,t.EXTENT,0,t.EXTENT),i.emplaceBack(t.EXTENT,t.EXTENT,t.EXTENT,t.EXTENT),this.rasterBoundsBuffer=e.createVertexBuffer(i,t.rasterBoundsAttributes.members),this.rasterBoundsSegments=t.SegmentVector.simpleSegment(0,0,4,2);var o=new t.StructArrayLayout2i4;o.emplaceBack(0,0),o.emplaceBack(1,0),o.emplaceBack(0,1),o.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(o,wt.members),this.viewportSegments=t.SegmentVector.simpleSegment(0,0,4,2);var a=new t.StructArrayLayout1ui2;a.emplaceBack(0),a.emplaceBack(1),a.emplaceBack(3),a.emplaceBack(2),a.emplaceBack(0),this.tileBorderIndexBuffer=e.createIndexBuffer(a);var s=new t.StructArrayLayout3ui6;s.emplaceBack(0,1,2),s.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(s);var l=this.context.gl;this.stencilClearMode=new Be({func:l.ALWAYS,mask:0},0,255,l.ZERO,l.ZERO,l.ZERO)},Yn.prototype.clearStencil=function(){var e=this.context,n=e.gl,r=t.create$1();t.ortho(r,0,this.width,this.height,0,0,1),t.scale(r,r,[n.drawingBufferWidth,n.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(e,n.TRIANGLES,Ne.disabled,this.stencilClearMode,ze.disabled,Ue.disabled,In(r),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},Yn.prototype._renderTileClippingMasks=function(e){var t=this.context,n=t.gl;t.setColorMode(ze.disabled),t.setDepthMode(Ne.disabled);var r=this.useProgram("clippingMask"),i=1;this._tileClippingMaskIDs={};for(var o=0,a=e;o<a.length;o+=1){var s=a[o],l=this._tileClippingMaskIDs[s.key]=i++;r.draw(t,n.TRIANGLES,Ne.disabled,new Be({func:n.ALWAYS,mask:0},l,255,n.KEEP,n.KEEP,n.REPLACE),ze.disabled,Ue.disabled,In(s.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}},Yn.prototype.stencilModeForClipping=function(e){var t=this.context.gl;return new Be({func:t.EQUAL,mask:255},this._tileClippingMaskIDs[e.key],0,t.KEEP,t.KEEP,t.REPLACE)},Yn.prototype.colorModeForRenderPass=function(){var e=this.context.gl;return this._showOverdrawInspector?new ze([e.CONSTANT_COLOR,e.ONE],new t.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?ze.unblended:ze.alphaBlended},Yn.prototype.depthModeForSublayer=function(e,t,n){var r=1-((1+this.currentLayer)*this.numSublayers+e)*this.depthEpsilon;return new Ne(n||this.context.gl.LEQUAL,t,[r,r])},Yn.prototype.render=function(e,n){this.style=e,this.options=n,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(t.browser.now());var r=this.style._order,i=this.style.sourceCaches;for(var o in i){var a=i[o];a.used&&a.prepare(this.context)}var s,l={},u={},c={};for(var p in i){var h=i[p];l[p]=h.getVisibleCoordinates(),u[p]=l[p].slice().reverse(),c[p]=h.getVisibleCoordinates(!0).reverse()}for(var f in i){var d=i[f],g=d.getSource();if("raster"===g.type||"raster-dem"===g.type){for(var m=[],y=0,v=l[f];y<v.length;y+=1){var _=v[y];m.push(d.getTile(_))}ji(m,this.context)}}this.renderPass="offscreen",this.depthRboNeedsClear=!0;for(var b=0,x=r;b<x.length;b+=1){var w=x[b],S=this.style._layers[w];if(S.hasOffscreenPass()&&!S.isHidden(this.transform.zoom)){var E=u[S.source];("custom"===S.type||E.length)&&this.renderLayer(this,i[S.source],S,E)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:n.showOverdrawInspector?t.Color.black:t.Color.transparent,depth:1}),this._showOverdrawInspector=n.showOverdrawInspector,this.depthRange=(e._order.length+2)*this.numSublayers*this.depthEpsilon,this.renderPass="opaque",this.currentLayer=r.length-1;this.currentLayer>=0;this.currentLayer--){var P=this.style._layers[r[this.currentLayer]],C=i[P.source],k=l[P.source];P.source!==s&&C&&(this.clearStencil(),C.getSource().isTileClipped&&this._renderTileClippingMasks(k)),this.renderLayer(this,C,P,k),s=P.source}for(this.renderPass="translucent",this.currentLayer=0,s=null;this.currentLayer<r.length;this.currentLayer++){var T=this.style._layers[r[this.currentLayer]],A=i[T.source],O=("symbol"===T.type?c:u)[T.source];T.source!==s&&A&&(this.clearStencil(),A.getSource().isTileClipped&&this._renderTileClippingMasks(l[T.source])),this.renderLayer(this,A,T,O),s=T.source}if(this.options.showTileBoundaries)for(var I in i){Zn.debug(this,i[I],l[I]);break}this.setCustomLayerDefaults()},Yn.prototype.setupOffscreenDepthRenderbuffer=function(){var e=this.context;this.depthRbo||(this.depthRbo=e.createRenderbuffer(e.gl.DEPTH_COMPONENT16,this.width,this.height))},Yn.prototype.renderLayer=function(e,t,n,r){n.isHidden(this.transform.zoom)||("background"===n.type||"custom"===n.type||r.length)&&(this.id=n.id,Zn[n.type](e,t,n,r))},Yn.prototype.translatePosMatrix=function(e,n,r,i,o){if(!r[0]&&!r[1])return e;var a=o?"map"===i?this.transform.angle:0:"viewport"===i?-this.transform.angle:0;if(a){var s=Math.sin(a),l=Math.cos(a);r=[r[0]*l-r[1]*s,r[0]*s+r[1]*l]}var u=[o?r[0]:se(n,r[0],this.transform.zoom),o?r[1]:se(n,r[1],this.transform.zoom),0],c=new Float32Array(16);return t.translate(c,e,u),c},Yn.prototype.saveTileTexture=function(e){var t=this._tileTextures[e.size[0]];t?t.push(e):this._tileTextures[e.size[0]]=[e]},Yn.prototype.getTileTexture=function(e){var t=this._tileTextures[e];return t&&t.length>0?t.pop():null},Yn.prototype.isPatternMissing=function(e){if(!e)return!1;var t=this.imageManager.getPattern(e.from),n=this.imageManager.getPattern(e.to);return!t||!n},Yn.prototype.useProgram=function(e,t){void 0===t&&(t=this.emptyProgramConfiguration),this.cache=this.cache||{};var n=""+e+(t.cacheKey||"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[n]||(this.cache[n]=new _n(this.context,yn[e],t,qn[e],this._showOverdrawInspector)),this.cache[n]},Yn.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},Yn.prototype.setBaseState=function(){var e=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(e.FUNC_ADD)};var Jn=function(e,n,r){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===r||r,this._minZoom=e||0,this._maxZoom=n||22,this.setMaxBounds(),this.width=0,this.height=0,this._center=new t.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._posMatrixCache={},this._alignedPosMatrixCache={}},Qn={minZoom:{configurable:!0},maxZoom:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerPoint:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Jn.prototype.clone=function(){var e=new Jn(this._minZoom,this._maxZoom,this._renderWorldCopies);return e.tileSize=this.tileSize,e.latRange=this.latRange,e.width=this.width,e.height=this.height,e._center=this._center,e.zoom=this.zoom,e.angle=this.angle,e._fov=this._fov,e._pitch=this._pitch,e._unmodified=this._unmodified,e._calcMatrices(),e},Qn.minZoom.get=function(){return this._minZoom},Qn.minZoom.set=function(e){this._minZoom!==e&&(this._minZoom=e,this.zoom=Math.max(this.zoom,e))},Qn.maxZoom.get=function(){return this._maxZoom},Qn.maxZoom.set=function(e){this._maxZoom!==e&&(this._maxZoom=e,this.zoom=Math.min(this.zoom,e))},Qn.renderWorldCopies.get=function(){return this._renderWorldCopies},Qn.renderWorldCopies.set=function(e){void 0===e?e=!0:null===e&&(e=!1),this._renderWorldCopies=e},Qn.worldSize.get=function(){return this.tileSize*this.scale},Qn.centerPoint.get=function(){return this.size._div(2)},Qn.size.get=function(){return new t.Point(this.width,this.height)},Qn.bearing.get=function(){return-this.angle/Math.PI*180},Qn.bearing.set=function(e){var n=-t.wrap(e,-180,180)*Math.PI/180;this.angle!==n&&(this._unmodified=!1,this.angle=n,this._calcMatrices(),this.rotationMatrix=t.create$2(),t.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Qn.pitch.get=function(){return this._pitch/Math.PI*180},Qn.pitch.set=function(e){var n=t.clamp(e,0,60)/180*Math.PI;this._pitch!==n&&(this._unmodified=!1,this._pitch=n,this._calcMatrices())},Qn.fov.get=function(){return this._fov/Math.PI*180},Qn.fov.set=function(e){e=Math.max(.01,Math.min(60,e)),this._fov!==e&&(this._unmodified=!1,this._fov=e/180*Math.PI,this._calcMatrices())},Qn.zoom.get=function(){return this._zoom},Qn.zoom.set=function(e){var t=Math.min(Math.max(e,this.minZoom),this.maxZoom);this._zoom!==t&&(this._unmodified=!1,this._zoom=t,this.scale=this.zoomScale(t),this.tileZoom=Math.floor(t),this.zoomFraction=t-this.tileZoom,this._constrain(),this._calcMatrices())},Qn.center.get=function(){return this._center},Qn.center.set=function(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._constrain(),this._calcMatrices())},Jn.prototype.coveringZoomLevel=function(e){return(e.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/e.tileSize))},Jn.prototype.getVisibleUnwrappedCoordinates=function(e){var n=[new t.UnwrappedTileID(0,e)];if(this._renderWorldCopies)for(var r=this.pointCoordinate(new t.Point(0,0)),i=this.pointCoordinate(new t.Point(this.width,0)),o=this.pointCoordinate(new t.Point(this.width,this.height)),a=this.pointCoordinate(new t.Point(0,this.height)),s=Math.floor(Math.min(r.x,i.x,o.x,a.x)),l=Math.floor(Math.max(r.x,i.x,o.x,a.x)),u=s-1;u<=l+1;u++)0!==u&&n.push(new t.UnwrappedTileID(u,e));return n},Jn.prototype.coveringTiles=function(e){var n=this.coveringZoomLevel(e),r=n;if(void 0!==e.minzoom&&n<e.minzoom)return[];void 0!==e.maxzoom&&n>e.maxzoom&&(n=e.maxzoom);var i=t.MercatorCoordinate.fromLngLat(this.center),o=Math.pow(2,n),a=new t.Point(o*i.x-.5,o*i.y-.5);return function(e,n,r,i){void 0===i&&(i=!0);var o=1<<e,a={};function s(n,s,l){var u,c,p,h;if(l>=0&&l<=o)for(u=n;u<s;u++)c=Math.floor(u/o),p=(u%o+o)%o,0!==c&&!0!==i||(h=new t.OverscaledTileID(r,c,e,p,l),a[h.key]=h)}var l=n.map(function(e){return new t.Point(e.x,e.y)._mult(o)});return so(l[0],l[1],l[2],0,o,s),so(l[2],l[3],l[0],0,o,s),Object.keys(a).map(function(e){return a[e]})}(n,[this.pointCoordinate(new t.Point(0,0)),this.pointCoordinate(new t.Point(this.width,0)),this.pointCoordinate(new t.Point(this.width,this.height)),this.pointCoordinate(new t.Point(0,this.height))],e.reparseOverscaled?r:n,this._renderWorldCopies).sort(function(e,t){return a.dist(e.canonical)-a.dist(t.canonical)})},Jn.prototype.resize=function(e,t){this.width=e,this.height=t,this.pixelsToGLUnits=[2/e,-2/t],this._constrain(),this._calcMatrices()},Qn.unmodified.get=function(){return this._unmodified},Jn.prototype.zoomScale=function(e){return Math.pow(2,e)},Jn.prototype.scaleZoom=function(e){return Math.log(e)/Math.LN2},Jn.prototype.project=function(e){var n=t.clamp(e.lat,-this.maxValidLatitude,this.maxValidLatitude);return new t.Point(t.mercatorXfromLng(e.lng)*this.worldSize,t.mercatorYfromLat(n)*this.worldSize)},Jn.prototype.unproject=function(e){return new t.MercatorCoordinate(e.x/this.worldSize,e.y/this.worldSize).toLngLat()},Qn.point.get=function(){return this.project(this.center)},Jn.prototype.setLocationAtPoint=function(e,n){var r=this.pointCoordinate(n),i=this.pointCoordinate(this.centerPoint),o=this.locationCoordinate(e),a=new t.MercatorCoordinate(o.x-(r.x-i.x),o.y-(r.y-i.y));this.center=this.coordinateLocation(a),this._renderWorldCopies&&(this.center=this.center.wrap())},Jn.prototype.locationPoint=function(e){return this.coordinatePoint(this.locationCoordinate(e))},Jn.prototype.pointLocation=function(e){return this.coordinateLocation(this.pointCoordinate(e))},Jn.prototype.locationCoordinate=function(e){return t.MercatorCoordinate.fromLngLat(e)},Jn.prototype.coordinateLocation=function(e){return e.toLngLat()},Jn.prototype.pointCoordinate=function(e){var n=[e.x,e.y,0,1],r=[e.x,e.y,1,1];t.transformMat4(n,n,this.pixelMatrixInverse),t.transformMat4(r,r,this.pixelMatrixInverse);var i=n[3],o=r[3],a=n[0]/i,s=r[0]/o,l=n[1]/i,u=r[1]/o,c=n[2]/i,p=r[2]/o,h=c===p?0:(0-c)/(p-c);return new t.MercatorCoordinate(t.number(a,s,h)/this.worldSize,t.number(l,u,h)/this.worldSize)},Jn.prototype.coordinatePoint=function(e){var n=[e.x*this.worldSize,e.y*this.worldSize,0,1];return t.transformMat4(n,n,this.pixelMatrix),new t.Point(n[0]/n[3],n[1]/n[3])},Jn.prototype.getBounds=function(){return(new t.LngLatBounds).extend(this.pointLocation(new t.Point(0,0))).extend(this.pointLocation(new t.Point(this.width,0))).extend(this.pointLocation(new t.Point(this.width,this.height))).extend(this.pointLocation(new t.Point(0,this.height)))},Jn.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new t.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},Jn.prototype.setMaxBounds=function(e){e?(this.lngRange=[e.getWest(),e.getEast()],this.latRange=[e.getSouth(),e.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Jn.prototype.calculatePosMatrix=function(e,n){void 0===n&&(n=!1);var r=e.key,i=n?this._alignedPosMatrixCache:this._posMatrixCache;if(i[r])return i[r];var o=e.canonical,a=this.worldSize/this.zoomScale(o.z),s=o.x+Math.pow(2,o.z)*e.wrap,l=t.identity(new Float64Array(16));return t.translate(l,l,[s*a,o.y*a,0]),t.scale(l,l,[a/t.EXTENT,a/t.EXTENT,1]),t.multiply(l,n?this.alignedProjMatrix:this.projMatrix,l),i[r]=new Float32Array(l),i[r]},Jn.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Jn.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var e,n,r,i,o=-90,a=90,s=-180,l=180,u=this.size,c=this._unmodified;if(this.latRange){var p=this.latRange;o=t.mercatorYfromLat(p[1])*this.worldSize,e=(a=t.mercatorYfromLat(p[0])*this.worldSize)-o<u.y?u.y/(a-o):0}if(this.lngRange){var h=this.lngRange;s=t.mercatorXfromLng(h[0])*this.worldSize,n=(l=t.mercatorXfromLng(h[1])*this.worldSize)-s<u.x?u.x/(l-s):0}var f=this.point,d=Math.max(n||0,e||0);if(d)return this.center=this.unproject(new t.Point(n?(l+s)/2:f.x,e?(a+o)/2:f.y)),this.zoom+=this.scaleZoom(d),this._unmodified=c,void(this._constraining=!1);if(this.latRange){var g=f.y,m=u.y/2;g-m<o&&(i=o+m),g+m>a&&(i=a-m)}if(this.lngRange){var y=f.x,v=u.x/2;y-v<s&&(r=s+v),y+v>l&&(r=l-v)}void 0===r&&void 0===i||(this.center=this.unproject(new t.Point(void 0!==r?r:f.x,void 0!==i?i:f.y))),this._unmodified=c,this._constraining=!1}},Jn.prototype._calcMatrices=function(){if(this.height){this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var e=this._fov/2,n=Math.PI/2+this._pitch,r=Math.sin(e)*this.cameraToCenterDistance/Math.sin(Math.PI-n-e),i=this.point,o=i.x,a=i.y,s=1.01*(Math.cos(Math.PI/2-this._pitch)*r+this.cameraToCenterDistance),l=new Float64Array(16);t.perspective(l,this._fov,this.width/this.height,1,s),t.scale(l,l,[1,-1,1]),t.translate(l,l,[0,0,-this.cameraToCenterDistance]),t.rotateX(l,l,this._pitch),t.rotateZ(l,l,this.angle),t.translate(l,l,[-o,-a,0]),this.mercatorMatrix=t.scale([],l,[this.worldSize,this.worldSize,this.worldSize]),t.scale(l,l,[1,1,t.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=l;var u=this.width%2/2,c=this.height%2/2,p=Math.cos(this.angle),h=Math.sin(this.angle),f=o-Math.round(o)+p*u+h*c,d=a-Math.round(a)+p*c+h*u,g=new Float64Array(l);if(t.translate(g,g,[f>.5?f-1:f,d>.5?d-1:d,0]),this.alignedProjMatrix=g,l=t.create$1(),t.scale(l,l,[this.width/2,-this.height/2,1]),t.translate(l,l,[1,-1,0]),this.pixelMatrix=t.multiply(new Float64Array(16),l,this.projMatrix),!(l=t.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=l,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Jn.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var e=this.pointCoordinate(new t.Point(0,0)),n=[e.x*this.worldSize,e.y*this.worldSize,0,1];return t.transformMat4(n,n,this.pixelMatrix)[3]/this.cameraToCenterDistance},Jn.prototype.getCameraPoint=function(){var e=this._pitch,n=Math.tan(e)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new t.Point(0,n))},Jn.prototype.getCameraQueryGeometry=function(e){var n=this.getCameraPoint();if(1===e.length)return[e[0],n];for(var r=n.x,i=n.y,o=n.x,a=n.y,s=0,l=e;s<l.length;s+=1){var u=l[s];r=Math.min(r,u.x),i=Math.min(i,u.y),o=Math.max(o,u.x),a=Math.max(a,u.y)}return[new t.Point(r,i),new t.Point(o,i),new t.Point(o,a),new t.Point(r,a),new t.Point(r,i)]},Object.defineProperties(Jn.prototype,Qn);var $n=function(){var e,n,r,i;t.bindAll(["_onHashChange","_updateHash"],this),this._updateHash=(e=this._updateHashUnthrottled.bind(this),n=!1,r=0,i=function(){r=0,n&&(e(),r=setTimeout(i,300),n=!1)},function(){return n=!0,r||i(),r})};$n.prototype.addTo=function(e){return this._map=e,t.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},$n.prototype.remove=function(){return t.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},$n.prototype.getHashString=function(e){var t=this._map.getCenter(),n=Math.round(100*this._map.getZoom())/100,r=Math.ceil((n*Math.LN2+Math.log(512/360/.5))/Math.LN10),i=Math.pow(10,r),o=Math.round(t.lng*i)/i,a=Math.round(t.lat*i)/i,s=this._map.getBearing(),l=this._map.getPitch(),u="";return u+=e?"#/"+o+"/"+a+"/"+n:"#"+n+"/"+a+"/"+o,(s||l)&&(u+="/"+Math.round(10*s)/10),l&&(u+="/"+Math.round(l)),u},$n.prototype._onHashChange=function(){var e=t.window.location.hash.replace("#","").split("/");return e.length>=3&&(this._map.jumpTo({center:[+e[2],+e[1]],zoom:+e[0],bearing:+(e[3]||0),pitch:+(e[4]||0)}),!0)},$n.prototype._updateHashUnthrottled=function(){var e=this.getHashString();try{t.window.history.replaceState(t.window.history.state,"",e)}catch(e){}};var er=function(e){function o(n,r,i,o){void 0===o&&(o={});var a=l.mousePos(r.getCanvasContainer(),i),s=r.unproject(a);e.call(this,n,t.extend({point:a,lngLat:s,originalEvent:i},o)),this._defaultPrevented=!1,this.target=r}e&&(o.__proto__=e),o.prototype=Object.create(e&&e.prototype),o.prototype.constructor=o;var n={defaultPrevented:{configurable:!0}};return o.prototype.preventDefault=function(){this._defaultPrevented=!0},n.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(o.prototype,n),o}(t.Event),tr=function(e){function o(n,r,i){var o=l.touchPos(r.getCanvasContainer(),i),a=o.map(function(e){return r.unproject(e)}),s=o.reduce(function(e,t,n,r){return e.add(t.div(r.length))},new t.Point(0,0)),u=r.unproject(s);e.call(this,n,{points:o,point:s,lngLats:a,lngLat:u,originalEvent:i}),this._defaultPrevented=!1}e&&(o.__proto__=e),o.prototype=Object.create(e&&e.prototype),o.prototype.constructor=o;var n={defaultPrevented:{configurable:!0}};return o.prototype.preventDefault=function(){this._defaultPrevented=!0},n.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(o.prototype,n),o}(t.Event),nr=function(t){function e(e,n,r){t.call(this,e,{originalEvent:r}),this._defaultPrevented=!1}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={defaultPrevented:{configurable:!0}};return e.prototype.preventDefault=function(){this._defaultPrevented=!0},n.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(e.prototype,n),e}(t.Event),rr=function(e){this._map=e,this._el=e.getCanvasContainer(),this._delta=0,t.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};rr.prototype.isEnabled=function(){return!!this._enabled},rr.prototype.isActive=function(){return!!this._active},rr.prototype.isZooming=function(){return!!this._zooming},rr.prototype.enable=function(e){this.isEnabled()||(this._enabled=!0,this._aroundCenter=e&&"center"===e.around)},rr.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},rr.prototype.onWheel=function(e){if(this.isEnabled()){var n=e.deltaMode===t.window.WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY,r=t.browser.now(),i=r-(this._lastWheelEventTime||0);this._lastWheelEventTime=r,0!==n&&n%4.000244140625==0?this._type="wheel":0!==n&&Math.abs(n)<4?this._type="trackpad":i>400?(this._type=null,this._lastValue=n,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(i*n)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,n+=this._lastValue)),e.shiftKey&&n&&(n/=4),this._type&&(this._lastWheelEvent=e,this._delta-=n,this.isActive()||this._start(e)),e.preventDefault()}},rr.prototype._onTimeout=function(e){this._type="wheel",this._delta-=this._lastValue,this.isActive()||this._start(e)},rr.prototype._start=function(e){if(this._delta){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),this._active=!0,this._zooming=!0,this._map.fire(new t.Event("movestart",{originalEvent:e})),this._map.fire(new t.Event("zoomstart",{originalEvent:e})),this._finishTimeout&&clearTimeout(this._finishTimeout);var n=l.mousePos(this._el,e);this._around=t.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(n)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onScrollFrame))}},rr.prototype._onScrollFrame=function(){var e=this;if(this._frameId=null,this.isActive()){var n=this._map.transform;if(0!==this._delta){var r="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?1/450:.01,i=2/(1+Math.exp(-Math.abs(this._delta*r)));this._delta<0&&0!==i&&(i=1/i);var o="number"==typeof this._targetZoom?n.zoomScale(this._targetZoom):n.scale;this._targetZoom=Math.min(n.maxZoom,Math.max(n.minZoom,n.scaleZoom(o*i))),"wheel"===this._type&&(this._startZoom=n.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var a="number"==typeof this._targetZoom?this._targetZoom:n.zoom,s=this._startZoom,l=this._easing,u=!1;if("wheel"===this._type&&s&&l){var c=Math.min((t.browser.now()-this._lastWheelEventTime)/200,1),p=l(c);n.zoom=t.number(s,a,p),c<1?this._frameId||(this._frameId=this._map._requestRenderFrame(this._onScrollFrame)):u=!0}else n.zoom=a,u=!0;n.setLocationAtPoint(this._around,this._aroundPoint),this._map.fire(new t.Event("move",{originalEvent:this._lastWheelEvent})),this._map.fire(new t.Event("zoom",{originalEvent:this._lastWheelEvent})),u&&(this._active=!1,this._finishTimeout=setTimeout(function(){e._zooming=!1,e._map.fire(new t.Event("zoomend",{originalEvent:e._lastWheelEvent})),e._map.fire(new t.Event("moveend",{originalEvent:e._lastWheelEvent})),delete e._targetZoom},200))}},rr.prototype._smoothOutEasing=function(e){var n=t.ease;if(this._prevEase){var r=this._prevEase,i=(t.browser.now()-r.start)/r.duration,o=r.easing(i+.01)-r.easing(i),a=.27/Math.sqrt(o*o+1e-4)*.01,s=Math.sqrt(.0729-a*a);n=t.bezier(a,s,.25,1)}return this._prevEase={start:t.browser.now(),duration:e,easing:n},n};var ir=function(e,n){this._map=e,this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=n.clickTolerance||1,t.bindAll(["_onMouseMove","_onMouseUp","_onKeyDown"],this)};ir.prototype.isEnabled=function(){return!!this._enabled},ir.prototype.isActive=function(){return!!this._active},ir.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},ir.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},ir.prototype.onMouseDown=function(e){this.isEnabled()&&e.shiftKey&&0===e.button&&(t.window.document.addEventListener("mousemove",this._onMouseMove,!1),t.window.document.addEventListener("keydown",this._onKeyDown,!1),t.window.document.addEventListener("mouseup",this._onMouseUp,!1),l.disableDrag(),this._startPos=this._lastPos=l.mousePos(this._el,e),this._active=!0)},ir.prototype._onMouseMove=function(e){var t=l.mousePos(this._el,e);if(!(this._lastPos.equals(t)||!this._box&&t.dist(this._startPos)<this._clickTolerance)){var n=this._startPos;this._lastPos=t,this._box||(this._box=l.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",e));var r=Math.min(n.x,t.x),i=Math.max(n.x,t.x),o=Math.min(n.y,t.y),a=Math.max(n.y,t.y);l.setTransform(this._box,"translate("+r+"px,"+o+"px)"),this._box.style.width=i-r+"px",this._box.style.height=a-o+"px"}},ir.prototype._onMouseUp=function(e){if(0===e.button){var n=this._startPos,r=l.mousePos(this._el,e);this._finish(),l.suppressClick(),n.x===r.x&&n.y===r.y?this._fireEvent("boxzoomcancel",e):this._map.fitScreenCoordinates(n,r,this._map.getBearing(),{linear:!0}).fire(new t.Event("boxzoomend",{originalEvent:e}))}},ir.prototype._onKeyDown=function(e){27===e.keyCode&&(this._finish(),this._fireEvent("boxzoomcancel",e))},ir.prototype._finish=function(){this._active=!1,t.window.document.removeEventListener("mousemove",this._onMouseMove,!1),t.window.document.removeEventListener("keydown",this._onKeyDown,!1),t.window.document.removeEventListener("mouseup",this._onMouseUp,!1),this._container.classList.remove("mapboxgl-crosshair"),this._box&&(l.remove(this._box),this._box=null),l.enableDrag(),delete this._startPos,delete this._lastPos},ir.prototype._fireEvent=function(e,n){return this._map.fire(new t.Event(e,{originalEvent:n}))};var or=t.bezier(0,0,.25,1),ar=function(e,n){this._map=e,this._el=n.element||e.getCanvasContainer(),this._state="disabled",this._button=n.button||"right",this._bearingSnap=n.bearingSnap||0,this._pitchWithRotate=!1!==n.pitchWithRotate,t.bindAll(["onMouseDown","_onMouseMove","_onMouseUp","_onBlur","_onDragFrame"],this)};ar.prototype.isEnabled=function(){return"disabled"!==this._state},ar.prototype.isActive=function(){return"active"===this._state},ar.prototype.enable=function(){this.isEnabled()||(this._state="enabled")},ar.prototype.disable=function(){if(this.isEnabled())switch(this._state){case"active":this._state="disabled",this._unbind(),this._deactivate(),this._fireEvent("rotateend"),this._pitchWithRotate&&this._fireEvent("pitchend"),this._fireEvent("moveend");break;case"pending":this._state="disabled",this._unbind();break;default:this._state="disabled"}},ar.prototype.onMouseDown=function(e){if("enabled"===this._state){if("right"===this._button){if(this._eventButton=l.mouseButton(e),this._eventButton!==(e.ctrlKey?0:2))return}else{if(e.ctrlKey||0!==l.mouseButton(e))return;this._eventButton=0}l.disableDrag(),t.window.document.addEventListener("mousemove",this._onMouseMove,{capture:!0}),t.window.document.addEventListener("mouseup",this._onMouseUp),t.window.addEventListener("blur",this._onBlur),this._state="pending",this._inertia=[[t.browser.now(),this._map.getBearing()]],this._startPos=this._lastPos=l.mousePos(this._el,e),this._center=this._map.transform.centerPoint,e.preventDefault()}},ar.prototype._onMouseMove=function(e){var t=l.mousePos(this._el,e);this._lastPos.equals(t)||(this._lastMoveEvent=e,this._lastPos=t,"pending"===this._state&&(this._state="active",this._fireEvent("rotatestart",e),this._fireEvent("movestart",e),this._pitchWithRotate&&this._fireEvent("pitchstart",e)),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onDragFrame)))},ar.prototype._onDragFrame=function(){this._frameId=null;var e=this._lastMoveEvent;if(e){var n=this._map.transform,r=this._startPos,i=this._lastPos,o=.8*(r.x-i.x),a=-.5*(r.y-i.y),s=n.bearing-o,l=n.pitch-a,u=this._inertia,c=u[u.length-1];this._drainInertiaBuffer(),u.push([t.browser.now(),this._map._normalizeBearing(s,c[1])]),n.bearing=s,this._pitchWithRotate&&(this._fireEvent("pitch",e),n.pitch=l),this._fireEvent("rotate",e),this._fireEvent("move",e),delete this._lastMoveEvent,this._startPos=this._lastPos}},ar.prototype._onMouseUp=function(e){if(l.mouseButton(e)===this._eventButton)switch(this._state){case"active":this._state="enabled",l.suppressClick(),this._unbind(),this._deactivate(),this._inertialRotate(e);break;case"pending":this._state="enabled",this._unbind()}},ar.prototype._onBlur=function(e){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._fireEvent("rotateend",e),this._pitchWithRotate&&this._fireEvent("pitchend",e),this._fireEvent("moveend",e);break;case"pending":this._state="enabled",this._unbind()}},ar.prototype._unbind=function(){t.window.document.removeEventListener("mousemove",this._onMouseMove,{capture:!0}),t.window.document.removeEventListener("mouseup",this._onMouseUp),t.window.removeEventListener("blur",this._onBlur),l.enableDrag()},ar.prototype._deactivate=function(){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._lastMoveEvent,delete this._startPos,delete this._lastPos},ar.prototype._inertialRotate=function(e){var t=this;this._fireEvent("rotateend",e),this._drainInertiaBuffer();var n=this._map,r=n.getBearing(),i=this._inertia,o=function(){Math.abs(r)<t._bearingSnap?n.resetNorth({noMoveStart:!0},{originalEvent:e}):t._fireEvent("moveend",e),t._pitchWithRotate&&t._fireEvent("pitchend",e)};if(i.length<2)o();else{var a=i[0],s=i[i.length-1],l=i[i.length-2],u=n._normalizeBearing(r,l[1]),c=s[1]-a[1],p=c<0?-1:1,h=(s[0]-a[0])/1e3;if(0!==c&&0!==h){var f=Math.abs(c*(.25/h));f>180&&(f=180);var d=f/180;u+=p*f*(d/2),Math.abs(n._normalizeBearing(u,0))<this._bearingSnap&&(u=n._normalizeBearing(0,u)),n.rotateTo(u,{duration:1e3*d,easing:or,noMoveStart:!0},{originalEvent:e})}else o()}},ar.prototype._fireEvent=function(e,n){return this._map.fire(new t.Event(e,n?{originalEvent:n}:{}))},ar.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,n=t.browser.now();e.length>0&&n-e[0][0]>160;)e.shift()};var sr=t.bezier(0,0,.3,1),lr=function(e,n){this._map=e,this._el=e.getCanvasContainer(),this._state="disabled",this._clickTolerance=n.clickTolerance||1,t.bindAll(["_onMove","_onMouseUp","_onTouchEnd","_onBlur","_onDragFrame"],this)};lr.prototype.isEnabled=function(){return"disabled"!==this._state},lr.prototype.isActive=function(){return"active"===this._state},lr.prototype.enable=function(){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-drag-pan"),this._state="enabled")},lr.prototype.disable=function(){if(this.isEnabled())switch(this._el.classList.remove("mapboxgl-touch-drag-pan"),this._state){case"active":this._state="disabled",this._unbind(),this._deactivate(),this._fireEvent("dragend"),this._fireEvent("moveend");break;case"pending":this._state="disabled",this._unbind();break;default:this._state="disabled"}},lr.prototype.onMouseDown=function(e){"enabled"===this._state&&(e.ctrlKey||0!==l.mouseButton(e)||(l.addEventListener(t.window.document,"mousemove",this._onMove,{capture:!0}),l.addEventListener(t.window.document,"mouseup",this._onMouseUp),this._start(e)))},lr.prototype.onTouchStart=function(e){"enabled"===this._state&&(e.touches.length>1||(l.addEventListener(t.window.document,"touchmove",this._onMove,{capture:!0,passive:!1}),l.addEventListener(t.window.document,"touchend",this._onTouchEnd),this._start(e)))},lr.prototype._start=function(e){t.window.addEventListener("blur",this._onBlur),this._state="pending",this._startPos=this._mouseDownPos=this._lastPos=l.mousePos(this._el,e),this._inertia=[[t.browser.now(),this._startPos]]},lr.prototype._onMove=function(e){e.preventDefault();var n=l.mousePos(this._el,e);this._lastPos.equals(n)||"pending"===this._state&&n.dist(this._mouseDownPos)<this._clickTolerance||(this._lastMoveEvent=e,this._lastPos=n,this._drainInertiaBuffer(),this._inertia.push([t.browser.now(),this._lastPos]),"pending"===this._state&&(this._state="active",this._fireEvent("dragstart",e),this._fireEvent("movestart",e)),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onDragFrame)))},lr.prototype._onDragFrame=function(){this._frameId=null;var e=this._lastMoveEvent;if(e){var t=this._map.transform;t.setLocationAtPoint(t.pointLocation(this._startPos),this._lastPos),this._fireEvent("drag",e),this._fireEvent("move",e),this._startPos=this._lastPos,delete this._lastMoveEvent}},lr.prototype._onMouseUp=function(e){if(0===l.mouseButton(e))switch(this._state){case"active":this._state="enabled",l.suppressClick(),this._unbind(),this._deactivate(),this._inertialPan(e);break;case"pending":this._state="enabled",this._unbind()}},lr.prototype._onTouchEnd=function(e){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._inertialPan(e);break;case"pending":this._state="enabled",this._unbind()}},lr.prototype._onBlur=function(e){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._fireEvent("dragend",e),this._fireEvent("moveend",e);break;case"pending":this._state="enabled",this._unbind()}},lr.prototype._unbind=function(){l.removeEventListener(t.window.document,"touchmove",this._onMove,{capture:!0,passive:!1}),l.removeEventListener(t.window.document,"touchend",this._onTouchEnd),l.removeEventListener(t.window.document,"mousemove",this._onMove,{capture:!0}),l.removeEventListener(t.window.document,"mouseup",this._onMouseUp),l.removeEventListener(t.window,"blur",this._onBlur)},lr.prototype._deactivate=function(){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._lastMoveEvent,delete this._startPos,delete this._mouseDownPos,delete this._lastPos},lr.prototype._inertialPan=function(e){this._fireEvent("dragend",e),this._drainInertiaBuffer();var t=this._inertia;if(t.length<2)this._fireEvent("moveend",e);else{var n=t[t.length-1],r=t[0],i=n[1].sub(r[1]),o=(n[0]-r[0])/1e3;if(0===o||n[1].equals(r[1]))this._fireEvent("moveend",e);else{var a=i.mult(.3/o),s=a.mag();s>1400&&(s=1400,a._unit()._mult(s));var l=s/750,u=a.mult(-l/2);this._map.panBy(u,{duration:1e3*l,easing:sr,noMoveStart:!0},{originalEvent:e})}}},lr.prototype._fireEvent=function(e,n){return this._map.fire(new t.Event(e,n?{originalEvent:n}:{}))},lr.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,n=t.browser.now();e.length>0&&n-e[0][0]>160;)e.shift()};var ur=function(e){this._map=e,this._el=e.getCanvasContainer(),t.bindAll(["_onKeyDown"],this)};function wo(e){return e*(2-e)}ur.prototype.isEnabled=function(){return!!this._enabled},ur.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("keydown",this._onKeyDown,!1),this._enabled=!0)},ur.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("keydown",this._onKeyDown),this._enabled=!1)},ur.prototype._onKeyDown=function(e){if(!(e.altKey||e.ctrlKey||e.metaKey)){var t=0,n=0,r=0,i=0,o=0;switch(e.keyCode){case 61:case 107:case 171:case 187:t=1;break;case 189:case 109:case 173:t=-1;break;case 37:e.shiftKey?n=-1:(e.preventDefault(),i=-1);break;case 39:e.shiftKey?n=1:(e.preventDefault(),i=1);break;case 38:e.shiftKey?r=1:(e.preventDefault(),o=-1);break;case 40:e.shiftKey?r=-1:(o=1,e.preventDefault());break;default:return}var a=this._map,s=a.getZoom(),l={duration:300,delayEndEvents:500,easing:wo,zoom:t?Math.round(s)+t*(e.shiftKey?2:1):s,bearing:a.getBearing()+15*n,pitch:a.getPitch()+10*r,offset:[100*-i,100*-o],center:a.getCenter()};a.easeTo(l,{originalEvent:e})}};var cr=function(e){this._map=e,t.bindAll(["_onDblClick","_onZoomEnd"],this)};cr.prototype.isEnabled=function(){return!!this._enabled},cr.prototype.isActive=function(){return!!this._active},cr.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},cr.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},cr.prototype.onTouchStart=function(e){var t=this;this.isEnabled()&&(e.points.length>1||(this._tapped?(clearTimeout(this._tapped),this._tapped=null,this._zoom(e)):this._tapped=setTimeout(function(){t._tapped=null},300)))},cr.prototype.onDblClick=function(e){this.isEnabled()&&(e.originalEvent.preventDefault(),this._zoom(e))},cr.prototype._zoom=function(e){this._active=!0,this._map.on("zoomend",this._onZoomEnd),this._map.zoomTo(this._map.getZoom()+(e.originalEvent.shiftKey?-1:1),{around:e.lngLat},e)},cr.prototype._onZoomEnd=function(){this._active=!1,this._map.off("zoomend",this._onZoomEnd)};var pr=t.bezier(0,0,.15,1),hr=function(e){this._map=e,this._el=e.getCanvasContainer(),t.bindAll(["_onMove","_onEnd","_onTouchFrame"],this)};hr.prototype.isEnabled=function(){return!!this._enabled},hr.prototype.enable=function(e){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-zoom-rotate"),this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around)},hr.prototype.disable=function(){this.isEnabled()&&(this._el.classList.remove("mapboxgl-touch-zoom-rotate"),this._enabled=!1)},hr.prototype.disableRotation=function(){this._rotationDisabled=!0},hr.prototype.enableRotation=function(){this._rotationDisabled=!1},hr.prototype.onStart=function(e){if(this.isEnabled()&&2===e.touches.length){var n=l.mousePos(this._el,e.touches[0]),r=l.mousePos(this._el,e.touches[1]),i=n.add(r).div(2);this._startVec=n.sub(r),this._startAround=this._map.transform.pointLocation(i),this._gestureIntent=void 0,this._inertia=[],l.addEventListener(t.window.document,"touchmove",this._onMove,{passive:!1}),l.addEventListener(t.window.document,"touchend",this._onEnd)}},hr.prototype._getTouchEventData=function(e){var t=l.mousePos(this._el,e.touches[0]),n=l.mousePos(this._el,e.touches[1]),r=t.sub(n);return{vec:r,center:t.add(n).div(2),scale:r.mag()/this._startVec.mag(),bearing:this._rotationDisabled?0:180*r.angleWith(this._startVec)/Math.PI}},hr.prototype._onMove=function(e){if(2===e.touches.length){var n=this._getTouchEventData(e),r=n.vec,i=n.scale,o=n.bearing;if(!this._gestureIntent){var a=this._rotationDisabled&&1!==i||Math.abs(1-i)>.15;Math.abs(o)>10?this._gestureIntent="rotate":a&&(this._gestureIntent="zoom"),this._gestureIntent&&(this._map.fire(new t.Event(this._gestureIntent+"start",{originalEvent:e})),this._map.fire(new t.Event("movestart",{originalEvent:e})),this._startVec=r)}this._lastTouchEvent=e,this._frameId||(this._frameId=this._map._requestRenderFrame(this._onTouchFrame)),e.preventDefault()}},hr.prototype._onTouchFrame=function(){this._frameId=null;var e=this._gestureIntent;if(e){var n=this._map.transform;this._startScale||(this._startScale=n.scale,this._startBearing=n.bearing);var r=this._getTouchEventData(this._lastTouchEvent),i=r.center,o=r.bearing,a=r.scale,s=n.pointLocation(i),l=n.locationPoint(s);"rotate"===e&&(n.bearing=this._startBearing+o),n.zoom=n.scaleZoom(this._startScale*a),n.setLocationAtPoint(this._startAround,l),this._map.fire(new t.Event(e,{originalEvent:this._lastTouchEvent})),this._map.fire(new t.Event("move",{originalEvent:this._lastTouchEvent})),this._drainInertiaBuffer(),this._inertia.push([t.browser.now(),a,i])}},hr.prototype._onEnd=function(e){l.removeEventListener(t.window.document,"touchmove",this._onMove,{passive:!1}),l.removeEventListener(t.window.document,"touchend",this._onEnd);var n=this._gestureIntent,r=this._startScale;if(this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._gestureIntent,delete this._startScale,delete this._startBearing,delete this._lastTouchEvent,n){this._map.fire(new t.Event(n+"end",{originalEvent:e})),this._drainInertiaBuffer();var i=this._inertia,o=this._map;if(i.length<2)o.snapToNorth({},{originalEvent:e});else{var a=i[i.length-1],s=i[0],u=o.transform.scaleZoom(r*a[1]),c=o.transform.scaleZoom(r*s[1]),p=u-c,h=(a[0]-s[0])/1e3,f=a[2];if(0!==h&&u!==c){var d=.15*p/h;Math.abs(d)>2.5&&(d=d>0?2.5:-2.5);var g=1e3*Math.abs(d/(12*.15)),m=u+d*g/2e3;m<0&&(m=0),o.easeTo({zoom:m,duration:g,easing:pr,around:this._aroundCenter?o.getCenter():o.unproject(f),noMoveStart:!0},{originalEvent:e})}else o.snapToNorth({},{originalEvent:e})}}},hr.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,n=t.browser.now();e.length>2&&n-e[0][0]>160;)e.shift()};var fr={scrollZoom:rr,boxZoom:ir,dragRotate:ar,dragPan:lr,keyboard:ur,doubleClickZoom:cr,touchZoomRotate:hr},dr=function(e){function i(n,r){e.call(this),this._moving=!1,this._zooming=!1,this.transform=n,this._bearingSnap=r.bearingSnap,t.bindAll(["_renderFrameCallback"],this)}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.getCenter=function(){return this.transform.center},i.prototype.setCenter=function(e,t){return this.jumpTo({center:e},t)},i.prototype.panBy=function(e,n,r){return e=t.Point.convert(e).mult(-1),this.panTo(this.transform.center,t.extend({offset:e},n),r)},i.prototype.panTo=function(e,n,r){return this.easeTo(t.extend({center:e},n),r)},i.prototype.getZoom=function(){return this.transform.zoom},i.prototype.setZoom=function(e,t){return this.jumpTo({zoom:e},t),this},i.prototype.zoomTo=function(e,n,r){return this.easeTo(t.extend({zoom:e},n),r)},i.prototype.zoomIn=function(e,t){return this.zoomTo(this.getZoom()+1,e,t),this},i.prototype.zoomOut=function(e,t){return this.zoomTo(this.getZoom()-1,e,t),this},i.prototype.getBearing=function(){return this.transform.bearing},i.prototype.setBearing=function(e,t){return this.jumpTo({bearing:e},t),this},i.prototype.rotateTo=function(e,n,r){return this.easeTo(t.extend({bearing:e},n),r)},i.prototype.resetNorth=function(e,n){return this.rotateTo(0,t.extend({duration:1e3},e),n),this},i.prototype.snapToNorth=function(e,t){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,t):this},i.prototype.getPitch=function(){return this.transform.pitch},i.prototype.setPitch=function(e,t){return this.jumpTo({pitch:e},t),this},i.prototype.cameraForBounds=function(e,n){return e=t.LngLatBounds.convert(e),this._cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),0,n)},i.prototype._cameraForBoxAndBearing=function(e,n,r,i){if("number"==typeof(i=t.extend({padding:{top:0,bottom:0,right:0,left:0},offset:[0,0],maxZoom:this.transform.maxZoom},i)).padding){var o=i.padding;i.padding={top:o,bottom:o,right:o,left:o}}if(t.isEqual(Object.keys(i.padding).sort(function(e,t){return e<t?-1:e>t?1:0}),["bottom","left","right","top"])){var a=this.transform,s=a.project(t.LngLat.convert(e)),l=a.project(t.LngLat.convert(n)),u=s.rotate(-r*Math.PI/180),c=l.rotate(-r*Math.PI/180),p=new t.Point(Math.max(u.x,c.x),Math.max(u.y,c.y)),h=new t.Point(Math.min(u.x,c.x),Math.min(u.y,c.y)),f=p.sub(h),d=(a.width-i.padding.left-i.padding.right)/f.x,g=(a.height-i.padding.top-i.padding.bottom)/f.y;if(!(g<0||d<0)){var m=Math.min(a.scaleZoom(a.scale*Math.min(d,g)),i.maxZoom),y=t.Point.convert(i.offset),v=(i.padding.left-i.padding.right)/2,_=(i.padding.top-i.padding.bottom)/2,b=new t.Point(y.x+v,y.y+_).mult(a.scale/a.zoomScale(m));return{center:a.unproject(s.add(l).div(2).sub(b)),zoom:m,bearing:r}}t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}else t.warnOnce("options.padding must be a positive number, or an Object with keys 'bottom', 'left', 'right', 'top'")},i.prototype.fitBounds=function(e,t,n){return this._fitInternal(this.cameraForBounds(e,t),t,n)},i.prototype.fitScreenCoordinates=function(e,n,r,i,o){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(t.Point.convert(e)),this.transform.pointLocation(t.Point.convert(n)),r,i),i,o)},i.prototype._fitInternal=function(e,n,r){return e?(n=t.extend(e,n)).linear?this.easeTo(n,r):this.flyTo(n,r):this},i.prototype.jumpTo=function(e,n){this.stop();var r=this.transform,i=!1,o=!1,a=!1;return"zoom"in e&&r.zoom!==+e.zoom&&(i=!0,r.zoom=+e.zoom),void 0!==e.center&&(r.center=t.LngLat.convert(e.center)),"bearing"in e&&r.bearing!==+e.bearing&&(o=!0,r.bearing=+e.bearing),"pitch"in e&&r.pitch!==+e.pitch&&(a=!0,r.pitch=+e.pitch),this.fire(new t.Event("movestart",n)).fire(new t.Event("move",n)),i&&this.fire(new t.Event("zoomstart",n)).fire(new t.Event("zoom",n)).fire(new t.Event("zoomend",n)),o&&this.fire(new t.Event("rotatestart",n)).fire(new t.Event("rotate",n)).fire(new t.Event("rotateend",n)),a&&this.fire(new t.Event("pitchstart",n)).fire(new t.Event("pitch",n)).fire(new t.Event("pitchend",n)),this.fire(new t.Event("moveend",n))},i.prototype.easeTo=function(e,n){var r=this;this.stop(),!1===(e=t.extend({offset:[0,0],duration:500,easing:t.ease},e)).animate&&(e.duration=0);var i=this.transform,o=this.getZoom(),a=this.getBearing(),s=this.getPitch(),l="zoom"in e?+e.zoom:o,u="bearing"in e?this._normalizeBearing(e.bearing,a):a,c="pitch"in e?+e.pitch:s,p=i.centerPoint.add(t.Point.convert(e.offset)),h=i.pointLocation(p),f=t.LngLat.convert(e.center||h);this._normalizeCenter(f);var d,g,m=i.project(h),y=i.project(f).sub(m),v=i.zoomScale(l-o);return e.around&&(d=t.LngLat.convert(e.around),g=i.locationPoint(d)),this._zooming=l!==o,this._rotating=a!==u,this._pitching=c!==s,this._prepareEase(n,e.noMoveStart),clearTimeout(this._easeEndTimeoutID),this._ease(function(e){if(r._zooming&&(i.zoom=t.number(o,l,e)),r._rotating&&(i.bearing=t.number(a,u,e)),r._pitching&&(i.pitch=t.number(s,c,e)),d)i.setLocationAtPoint(d,g);else{var h=i.zoomScale(i.zoom-o),f=l>o?Math.min(2,v):Math.max(.5,v),_=Math.pow(f,1-e),b=i.unproject(m.add(y.mult(e*_)).mult(h));i.setLocationAtPoint(i.renderWorldCopies?b.wrap():b,p)}r._fireMoveEvents(n)},function(){e.delayEndEvents?r._easeEndTimeoutID=setTimeout(function(){return r._afterEase(n)},e.delayEndEvents):r._afterEase(n)},e),this},i.prototype._prepareEase=function(e,n){this._moving=!0,n||this.fire(new t.Event("movestart",e)),this._zooming&&this.fire(new t.Event("zoomstart",e)),this._rotating&&this.fire(new t.Event("rotatestart",e)),this._pitching&&this.fire(new t.Event("pitchstart",e))},i.prototype._fireMoveEvents=function(e){this.fire(new t.Event("move",e)),this._zooming&&this.fire(new t.Event("zoom",e)),this._rotating&&this.fire(new t.Event("rotate",e)),this._pitching&&this.fire(new t.Event("pitch",e))},i.prototype._afterEase=function(e){var n=this._zooming,r=this._rotating,i=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,n&&this.fire(new t.Event("zoomend",e)),r&&this.fire(new t.Event("rotateend",e)),i&&this.fire(new t.Event("pitchend",e)),this.fire(new t.Event("moveend",e))},i.prototype.flyTo=function(e,n){var r=this;this.stop(),e=t.extend({offset:[0,0],speed:1.2,curve:1.42,easing:t.ease},e);var i=this.transform,o=this.getZoom(),a=this.getBearing(),s=this.getPitch(),l="zoom"in e?t.clamp(+e.zoom,i.minZoom,i.maxZoom):o,u="bearing"in e?this._normalizeBearing(e.bearing,a):a,c="pitch"in e?+e.pitch:s,p=i.zoomScale(l-o),h=i.centerPoint.add(t.Point.convert(e.offset)),f=i.pointLocation(h),d=t.LngLat.convert(e.center||f);this._normalizeCenter(d);var g=i.project(f),m=i.project(d).sub(g),y=e.curve,v=Math.max(i.width,i.height),_=v/p,b=m.mag();if("minZoom"in e){var x=t.clamp(Math.min(e.minZoom,o,l),i.minZoom,i.maxZoom),w=v/i.zoomScale(x-o);y=Math.sqrt(w/b*2)}var S=y*y;function T(e){var t=(_*_-v*v+(e?-1:1)*S*S*b*b)/(2*(e?_:v)*S*b);return Math.log(Math.sqrt(t*t+1)-t)}function I(e){return(Math.exp(e)-Math.exp(-e))/2}function C(e){return(Math.exp(e)+Math.exp(-e))/2}var E=T(0),P=function(e){return C(E)/C(E+y*e)},k=function(e){return v*((C(E)*(I(t=E+y*e)/C(t))-I(E))/S)/b;var t},A=(T(1)-E)/y;if(Math.abs(b)<1e-6||!isFinite(A)){if(Math.abs(v-_)<1e-6)return this.easeTo(e,n);var O=_<v?-1:1;A=Math.abs(Math.log(_/v))/y,k=function(){return 0},P=function(e){return Math.exp(O*y*e)}}if("duration"in e)e.duration=+e.duration;else{var R="screenSpeed"in e?+e.screenSpeed/y:+e.speed;e.duration=1e3*A/R}return e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=a!==u,this._pitching=c!==s,this._prepareEase(n,!1),this._ease(function(e){var p=e*A,f=1/P(p);i.zoom=1===e?l:o+i.scaleZoom(f),r._rotating&&(i.bearing=t.number(a,u,e)),r._pitching&&(i.pitch=t.number(s,c,e));var y=1===e?d:i.unproject(g.add(m.mult(k(p))).mult(f));i.setLocationAtPoint(i.renderWorldCopies?y.wrap():y,h),r._fireMoveEvents(n)},function(){return r._afterEase(n)},e),this},i.prototype.isEasing=function(){return!!this._easeFrameId},i.prototype.stop=function(){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var e=this._onEaseEnd;delete this._onEaseEnd,e.call(this)}return this},i.prototype._ease=function(e,n,r){!1===r.animate||0===r.duration?(e(1),n()):(this._easeStart=t.browser.now(),this._easeOptions=r,this._onEaseFrame=e,this._onEaseEnd=n,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},i.prototype._renderFrameCallback=function(){var e=Math.min((t.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(e)),e<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},i.prototype._normalizeBearing=function(e,n){e=t.wrap(e,-180,180);var r=Math.abs(e-n);return Math.abs(e-360-n)<r&&(e-=360),Math.abs(e+360-n)<r&&(e+=360),e},i.prototype._normalizeCenter=function(e){var t=this.transform;if(t.renderWorldCopies&&!t.lngRange){var n=e.lng-t.center.lng;e.lng+=n>180?-360:n<-180?360:0}},i}(t.Evented),gr=function(e){void 0===e&&(e={}),this.options=e,t.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};gr.prototype.getDefaultPosition=function(){return"bottom-right"},gr.prototype.onAdd=function(e){var t=this.options&&this.options.compact;return this._map=e,this._container=l.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=l.create("div","mapboxgl-ctrl-attrib-inner",this._container),t&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===t&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},gr.prototype.onRemove=function(){l.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0},gr.prototype._updateEditLink=function(){var e=this._editLink;e||(e=this._editLink=this._container.querySelector(".mapbox-improve-map"));var n=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:t.config.ACCESS_TOKEN}];if(e){var r=n.reduce(function(e,t,r){return t.value&&(e+=t.key+"="+t.value+(r<n.length-1?"&":"")),e},"?");e.href=t.config.FEEDBACK_URL+"/"+r+(this._map._hash?this._map._hash.getHashString(!0):"")}},gr.prototype._updateData=function(e){!e||"metadata"!==e.sourceDataType&&"style"!==e.dataType||(this._updateAttributions(),this._updateEditLink())},gr.prototype._updateAttributions=function(){if(this._map.style){var e=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?e=e.concat(this.options.customAttribution.map(function(e){return"string"!=typeof e?"":e})):"string"==typeof this.options.customAttribution&&e.push(this.options.customAttribution)),this._map.style.stylesheet){var t=this._map.style.stylesheet;this.styleOwner=t.owner,this.styleId=t.id}var n=this._map.style.sourceCaches;for(var r in n){var i=n[r];if(i.used){var o=i.getSource();o.attribution&&e.indexOf(o.attribution)<0&&e.push(o.attribution)}}e.sort(function(e,t){return e.length-t.length}),(e=e.filter(function(t,n){for(var r=n+1;r<e.length;r++)if(e[r].indexOf(t)>=0)return!1;return!0})).length?(this._innerContainer.innerHTML=e.join(" | "),this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null}},gr.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var mr=function(){t.bindAll(["_updateLogo"],this),t.bindAll(["_updateCompact"],this)};mr.prototype.onAdd=function(e){this._map=e,this._container=l.create("div","mapboxgl-ctrl");var t=l.create("a","mapboxgl-ctrl-logo");return t.target="_blank",t.href="https://www.mapbox.com/",t.setAttribute("aria-label","Mapbox logo"),t.setAttribute("rel","noopener"),this._container.appendChild(t),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},mr.prototype.onRemove=function(){l.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},mr.prototype.getDefaultPosition=function(){return"bottom-left"},mr.prototype._updateLogo=function(e){e&&"metadata"!==e.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},mr.prototype._logoRequired=function(){if(this._map.style){var e=this._map.style.sourceCaches;for(var t in e)if(e[t].getSource().mapbox_logo)return!0;return!1}},mr.prototype._updateCompact=function(){var e=this._container.children;if(e.length){var t=e[0];this._map.getCanvasContainer().offsetWidth<250?t.classList.add("mapboxgl-compact"):t.classList.remove("mapboxgl-compact")}};var yr=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};yr.prototype.add=function(e){var t=++this._id;return this._queue.push({callback:e,id:t,cancelled:!1}),t},yr.prototype.remove=function(e){for(var t=this._currentlyRunning,n=0,r=t?this._queue.concat(t):this._queue;n<r.length;n+=1){var i=r[n];if(i.id===e)return void(i.cancelled=!0)}},yr.prototype.run=function(){var e=this._currentlyRunning=this._queue;this._queue=[];for(var t=0,n=e;t<n.length;t+=1){var r=n[t];if(!r.cancelled&&(r.callback(),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},yr.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var vr=t.window.HTMLImageElement,_r=t.window.HTMLElement,br={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:0,maxZoom:22,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,bearingSnap:7,clickTolerance:3,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},xr=function(e){function r(n){var r=this;if(null!=(n=t.extend({},br,n)).minZoom&&null!=n.maxZoom&&n.minZoom>n.maxZoom)throw new Error("maxZoom must be greater than minZoom");var i=new Jn(n.minZoom,n.maxZoom,n.renderWorldCopies);e.call(this,i,n),this._interactive=n.interactive,this._maxTileCacheSize=n.maxTileCacheSize,this._failIfMajorPerformanceCaveat=n.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=n.preserveDrawingBuffer,this._trackResize=n.trackResize,this._bearingSnap=n.bearingSnap,this._refreshExpiredTiles=n.refreshExpiredTiles,this._fadeDuration=n.fadeDuration,this._crossSourceCollisions=n.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=n.collectResourceTiming,this._renderTaskQueue=new yr,this._controls=[],this._mapId=t.uniqueId();var o=n.transformRequest;if(this._transformRequest=o?function(e,t){return o(e,t)||{url:e}}:function(e){return{url:e}},"string"==typeof n.container){if(this._container=t.window.document.getElementById(n.container),!this._container)throw new Error("Container '"+n.container+"' not found.")}else{if(!(n.container instanceof _r))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=n.container}if(n.maxBounds&&this.setMaxBounds(n.maxBounds),t.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return r._update(!1)}),this.on("moveend",function(){return r._update(!1)}),this.on("zoom",function(){return r._update(!0)}),void 0!==t.window&&(t.window.addEventListener("online",this._onWindowOnline,!1),t.window.addEventListener("resize",this._onWindowResize,!1)),function(e,t){var n=e.getCanvasContainer(),r=null,i=!1,o=null;for(var a in fr)e[a]=new fr[a](e,t),t.interactive&&t[a]&&e[a].enable(t[a]);l.addEventListener(n,"mouseout",function(t){e.fire(new er("mouseout",e,t))}),l.addEventListener(n,"mousedown",function(r){i=!0,o=l.mousePos(n,r);var a=new er("mousedown",e,r);e.fire(a),a.defaultPrevented||(t.interactive&&!e.doubleClickZoom.isActive()&&e.stop(),e.boxZoom.onMouseDown(r),e.boxZoom.isActive()||e.dragPan.isActive()||e.dragRotate.onMouseDown(r),e.boxZoom.isActive()||e.dragRotate.isActive()||e.dragPan.onMouseDown(r))}),l.addEventListener(n,"mouseup",function(t){var n=e.dragRotate.isActive();r&&!n&&e.fire(new er("contextmenu",e,r)),r=null,i=!1,e.fire(new er("mouseup",e,t))}),l.addEventListener(n,"mousemove",function(t){if(!e.dragPan.isActive()&&!e.dragRotate.isActive()){for(var r=t.target;r&&r!==n;)r=r.parentNode;r===n&&e.fire(new er("mousemove",e,t))}}),l.addEventListener(n,"mouseover",function(t){for(var r=t.target;r&&r!==n;)r=r.parentNode;r===n&&e.fire(new er("mouseover",e,t))}),l.addEventListener(n,"touchstart",function(n){var r=new tr("touchstart",e,n);e.fire(r),r.defaultPrevented||(t.interactive&&e.stop(),e.boxZoom.isActive()||e.dragRotate.isActive()||e.dragPan.onTouchStart(n),e.touchZoomRotate.onStart(n),e.doubleClickZoom.onTouchStart(r))},{passive:!1}),l.addEventListener(n,"touchmove",function(t){e.fire(new tr("touchmove",e,t))},{passive:!1}),l.addEventListener(n,"touchend",function(t){e.fire(new tr("touchend",e,t))}),l.addEventListener(n,"touchcancel",function(t){e.fire(new tr("touchcancel",e,t))}),l.addEventListener(n,"click",function(r){var i=l.mousePos(n,r);(i.equals(o)||i.dist(o)<t.clickTolerance)&&e.fire(new er("click",e,r))}),l.addEventListener(n,"dblclick",function(t){var n=new er("dblclick",e,t);e.fire(n),n.defaultPrevented||e.doubleClickZoom.onDblClick(n)}),l.addEventListener(n,"contextmenu",function(t){var n=e.dragRotate.isActive();i||n?i&&(r=t):e.fire(new er("contextmenu",e,t)),(e.dragRotate.isEnabled()||e.listens("contextmenu"))&&t.preventDefault()}),l.addEventListener(n,"wheel",function(n){t.interactive&&e.stop();var r=new nr("wheel",e,n);e.fire(r),r.defaultPrevented||e.scrollZoom.onWheel(n)},{passive:!1})}(this,n),this._hash=n.hash&&(new $n).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:n.center,zoom:n.zoom,bearing:n.bearing,pitch:n.pitch}),n.bounds&&(this.resize(),this.fitBounds(n.bounds,t.extend({},n.fitBoundsOptions,{duration:0})))),this.resize(),n.style&&this.setStyle(n.style,{localIdeographFontFamily:n.localIdeographFontFamily}),n.attributionControl&&this.addControl(new gr({customAttribution:n.customAttribution})),this.addControl(new mr,n.logoPosition),this.on("style.load",function(){r.transform.unmodified&&r.jumpTo(r.style.stylesheet)}),this.on("data",function(e){r._update("style"===e.dataType),r.fire(new t.Event(e.dataType+"data",e))}),this.on("dataloading",function(e){r.fire(new t.Event(e.dataType+"dataloading",e))})}e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r;var i={showTileBoundaries:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0}};return r.prototype._getMapId=function(){return this._mapId},r.prototype.addControl=function(e,n){if(void 0===n&&e.getDefaultPosition&&(n=e.getDefaultPosition()),void 0===n&&(n="top-right"),!e||!e.onAdd)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var r=e.onAdd(this);this._controls.push(e);var i=this._controlPositions[n];return-1!==n.indexOf("bottom")?i.insertBefore(r,i.firstChild):i.appendChild(r),this},r.prototype.removeControl=function(e){if(!e||!e.onRemove)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var n=this._controls.indexOf(e);return n>-1&&this._controls.splice(n,1),e.onRemove(this),this},r.prototype.resize=function(e){var n=this._containerDimensions(),r=n[0],i=n[1];return this._resizeCanvas(r,i),this.transform.resize(r,i),this.painter.resize(r,i),this.fire(new t.Event("movestart",e)).fire(new t.Event("move",e)).fire(new t.Event("resize",e)).fire(new t.Event("moveend",e)),this},r.prototype.getBounds=function(){return this.transform.getBounds()},r.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},r.prototype.setMaxBounds=function(e){return this.transform.setMaxBounds(t.LngLatBounds.convert(e)),this._update()},r.prototype.setMinZoom=function(e){if((e=null==e?0:e)>=0&&e<=this.transform.maxZoom)return this.transform.minZoom=e,this._update(),this.getZoom()<e&&this.setZoom(e),this;throw new Error("minZoom must be between 0 and the current maxZoom, inclusive")},r.prototype.getMinZoom=function(){return this.transform.minZoom},r.prototype.setMaxZoom=function(e){if((e=null==e?22:e)>=this.transform.minZoom)return this.transform.maxZoom=e,this._update(),this.getZoom()>e&&this.setZoom(e),this;throw new Error("maxZoom must be greater than the current minZoom")},r.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},r.prototype.setRenderWorldCopies=function(e){return this.transform.renderWorldCopies=e,this._update()},r.prototype.getMaxZoom=function(){return this.transform.maxZoom},r.prototype.project=function(e){return this.transform.locationPoint(t.LngLat.convert(e))},r.prototype.unproject=function(e){return this.transform.pointLocation(t.Point.convert(e))},r.prototype.isMoving=function(){return this._moving||this.dragPan.isActive()||this.dragRotate.isActive()||this.scrollZoom.isActive()},r.prototype.isZooming=function(){return this._zooming||this.scrollZoom.isZooming()},r.prototype.isRotating=function(){return this._rotating||this.dragRotate.isActive()},r.prototype.on=function(t,n,r){var i=this;if(void 0===r)return e.prototype.on.call(this,t,n);var o=function(){var e;if("mouseenter"===t||"mouseover"===t){var o=!1;return{layer:n,listener:r,delegates:{mousemove:function(e){var a=i.getLayer(n)?i.queryRenderedFeatures(e.point,{layers:[n]}):[];a.length?o||(o=!0,r.call(i,new er(t,i,e.originalEvent,{features:a}))):o=!1},mouseout:function(){o=!1}}}}if("mouseleave"===t||"mouseout"===t){var a=!1;return{layer:n,listener:r,delegates:{mousemove:function(e){(i.getLayer(n)?i.queryRenderedFeatures(e.point,{layers:[n]}):[]).length?a=!0:a&&(a=!1,r.call(i,new er(t,i,e.originalEvent)))},mouseout:function(e){a&&(a=!1,r.call(i,new er(t,i,e.originalEvent)))}}}}return{layer:n,listener:r,delegates:(e={},e[t]=function(e){var t=i.getLayer(n)?i.queryRenderedFeatures(e.point,{layers:[n]}):[];t.length&&(e.features=t,r.call(i,e),delete e.features)},e)}}();for(var a in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[t]=this._delegatedListeners[t]||[],this._delegatedListeners[t].push(o),o.delegates)this.on(a,o.delegates[a]);return this},r.prototype.off=function(t,n,r){if(void 0===r)return e.prototype.off.call(this,t,n);if(this._delegatedListeners&&this._delegatedListeners[t])for(var i=this._delegatedListeners[t],o=0;o<i.length;o++){var a=i[o];if(a.layer===n&&a.listener===r){for(var s in a.delegates)this.off(s,a.delegates[s]);return i.splice(o,1),this}}return this},r.prototype.queryRenderedFeatures=function(e,n){if(!this.style)return[];var r;if(void 0!==n||void 0===e||e instanceof t.Point||Array.isArray(e)||(n=e,e=void 0),n=n||{},(e=e||[[0,0],[this.transform.width,this.transform.height]])instanceof t.Point||"number"==typeof e[0])r=[t.Point.convert(e)];else{var i=t.Point.convert(e[0]),o=t.Point.convert(e[1]);r=[i,new t.Point(o.x,i.y),o,new t.Point(i.x,o.y),i]}return this.style.queryRenderedFeatures(r,n,this.transform)},r.prototype.querySourceFeatures=function(e,t){return this.style.querySourceFeatures(e,t)},r.prototype.setStyle=function(e,t){return(!t||!1!==t.diff&&!t.localIdeographFontFamily)&&this.style&&e?(this._diffStyle(e,t),this):this._updateStyle(e,t)},r.prototype._updateStyle=function(e,t){return this.style&&(this.style.setEventedParent(null),this.style._remove()),e?(this.style=new xt(this,t||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof e?this.style.loadURL(e):this.style.loadJSON(e),this):(delete this.style,this)},r.prototype._diffStyle=function(e,n){var r=this;if("string"==typeof e){var i=t.normalizeStyleURL(e),o=this._transformRequest(i,t.ResourceType.Style);t.getJSON(o,function(e,i){e?r.fire(new t.ErrorEvent(e)):i&&r._updateDiff(i,n)})}else"object"==typeof e&&this._updateDiff(e,n)},r.prototype._updateDiff=function(e,n){try{this.style.setState(e)&&this._update(!0)}catch(r){t.warnOnce("Unable to perform style diff: "+(r.message||r.error||r)+".  Rebuilding the style from scratch."),this._updateStyle(e,n)}},r.prototype.getStyle=function(){if(this.style)return this.style.serialize()},r.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():t.warnOnce("There is no style added to the map.")},r.prototype.addSource=function(e,t){return this.style.addSource(e,t),this._update(!0)},r.prototype.isSourceLoaded=function(e){var n=this.style&&this.style.sourceCaches[e];if(void 0!==n)return n.loaded();this.fire(new t.ErrorEvent(new Error("There is no source with ID '"+e+"'")))},r.prototype.areTilesLoaded=function(){var e=this.style&&this.style.sourceCaches;for(var t in e){var n=e[t]._tiles;for(var r in n){var i=n[r];if("loaded"!==i.state&&"errored"!==i.state)return!1}}return!0},r.prototype.addSourceType=function(e,t,n){return this.style.addSourceType(e,t,n)},r.prototype.removeSource=function(e){return this.style.removeSource(e),this._update(!0)},r.prototype.getSource=function(e){return this.style.getSource(e)},r.prototype.addImage=function(e,n,r){void 0===r&&(r={});var i=r.pixelRatio;void 0===i&&(i=1);var o=r.sdf;if(void 0===o&&(o=!1),n instanceof vr){var a=t.browser.getImageData(n),s=a.width,l=a.height,u=a.data;this.style.addImage(e,{data:new t.RGBAImage({width:s,height:l},u),pixelRatio:i,sdf:o})}else{if(void 0===n.width||void 0===n.height)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var c=n.width,p=n.height,h=n.data;this.style.addImage(e,{data:new t.RGBAImage({width:c,height:p},new Uint8Array(h)),pixelRatio:i,sdf:o})}},r.prototype.hasImage=function(e){return e?!!this.style.getImage(e):(this.fire(new t.ErrorEvent(new Error("Missing required image id"))),!1)},r.prototype.removeImage=function(e){this.style.removeImage(e)},r.prototype.loadImage=function(e,n){t.getImage(this._transformRequest(e,t.ResourceType.Image),n)},r.prototype.listImages=function(){return this.style.listImages()},r.prototype.addLayer=function(e,t){return this.style.addLayer(e,t),this._update(!0)},r.prototype.moveLayer=function(e,t){return this.style.moveLayer(e,t),this._update(!0)},r.prototype.removeLayer=function(e){return this.style.removeLayer(e),this._update(!0)},r.prototype.getLayer=function(e){return this.style.getLayer(e)},r.prototype.setFilter=function(e,t,n){return void 0===n&&(n={}),this.style.setFilter(e,t,n),this._update(!0)},r.prototype.setLayerZoomRange=function(e,t,n){return this.style.setLayerZoomRange(e,t,n),this._update(!0)},r.prototype.getFilter=function(e){return this.style.getFilter(e)},r.prototype.setPaintProperty=function(e,t,n,r){return void 0===r&&(r={}),this.style.setPaintProperty(e,t,n,r),this._update(!0)},r.prototype.getPaintProperty=function(e,t){return this.style.getPaintProperty(e,t)},r.prototype.setLayoutProperty=function(e,t,n,r){return void 0===r&&(r={}),this.style.setLayoutProperty(e,t,n,r),this._update(!0)},r.prototype.getLayoutProperty=function(e,t){return this.style.getLayoutProperty(e,t)},r.prototype.setLight=function(e,t){return void 0===t&&(t={}),this.style.setLight(e,t),this._update(!0)},r.prototype.getLight=function(){return this.style.getLight()},r.prototype.setFeatureState=function(e,t){return this.style.setFeatureState(e,t),this._update()},r.prototype.removeFeatureState=function(e,t){return this.style.removeFeatureState(e,t),this._update()},r.prototype.getFeatureState=function(e){return this.style.getFeatureState(e)},r.prototype.getContainer=function(){return this._container},r.prototype.getCanvasContainer=function(){return this._canvasContainer},r.prototype.getCanvas=function(){return this._canvas},r.prototype._containerDimensions=function(){var e=0,t=0;return this._container&&(e=this._container.clientWidth||400,t=this._container.clientHeight||300),[e,t]},r.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==t.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&t.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},r.prototype._setupContainer=function(){var e=this._container;e.classList.add("mapboxgl-map"),(this._missingCSSCanary=l.create("div","mapboxgl-canary",e)).style.visibility="hidden",this._detectMissingCSS();var t=this._canvasContainer=l.create("div","mapboxgl-canvas-container",e);this._interactive&&t.classList.add("mapboxgl-interactive"),this._canvas=l.create("canvas","mapboxgl-canvas",t),this._canvas.style.position="absolute",this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var n=this._containerDimensions();this._resizeCanvas(n[0],n[1]);var r=this._controlContainer=l.create("div","mapboxgl-control-container",e),i=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(e){i[e]=l.create("div","mapboxgl-ctrl-"+e,r)})},r.prototype._resizeCanvas=function(e,n){var r=t.window.devicePixelRatio||1;this._canvas.width=r*e,this._canvas.height=r*n,this._canvas.style.width=e+"px",this._canvas.style.height=n+"px"},r.prototype._setupPainter=function(){var e=t.extend({failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer},n.webGLContextAttributes),r=this._canvas.getContext("webgl",e)||this._canvas.getContext("experimental-webgl",e);r?(this.painter=new Yn(r,this.transform),t.webpSupported.testSupport(r)):this.fire(new t.ErrorEvent(new Error("Failed to initialize WebGL")))},r.prototype._contextLost=function(e){e.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new t.Event("webglcontextlost",{originalEvent:e}))},r.prototype._contextRestored=function(e){this._setupPainter(),this.resize(),this._update(),this.fire(new t.Event("webglcontextrestored",{originalEvent:e}))},r.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},r.prototype._update=function(e){return this.style?(this._styleDirty=this._styleDirty||e,this._sourcesDirty=!0,this.triggerRepaint(),this):this},r.prototype._requestRenderFrame=function(e){return this._update(),this._renderTaskQueue.add(e)},r.prototype._cancelRenderFrame=function(e){this._renderTaskQueue.remove(e)},r.prototype._render=function(){this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run();var e=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var n=this.transform.zoom,r=t.browser.now();this.style.zoomHistory.update(n,r);var i=new t.EvaluationParameters(n,{now:r,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),o=i.crossFadingFactor();1===o&&o===this._crossFadingFactor||(e=!0,this._crossFadingFactor=o),this.style.update(i)}return this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration}),this.fire(new t.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new t.Event("load"))),this.style&&(this.style.hasTransitions()||e)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this._sourcesDirty||this._repaint||this._styleDirty||this._placementDirty?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new t.Event("idle")),this},r.prototype.remove=function(){this._hash&&this._hash.remove();for(var e=0,n=this._controls;e<n.length;e+=1)n[e].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.setStyle(null),void 0!==t.window&&(t.window.removeEventListener("resize",this._onWindowResize,!1),t.window.removeEventListener("online",this._onWindowOnline,!1));var r=this.painter.context.gl.getExtension("WEBGL_lose_context");r&&r.loseContext(),ko(this._canvasContainer),ko(this._controlContainer),ko(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this.fire(new t.Event("remove"))},r.prototype.triggerRepaint=function(){var e=this;this.style&&!this._frame&&(this._frame=t.browser.frame(function(){e._frame=null,e._render()}))},r.prototype._onWindowOnline=function(){this._update()},r.prototype._onWindowResize=function(){this._trackResize&&this.resize()._update()},i.showTileBoundaries.get=function(){return!!this._showTileBoundaries},i.showTileBoundaries.set=function(e){this._showTileBoundaries!==e&&(this._showTileBoundaries=e,this._update())},i.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},i.showCollisionBoxes.set=function(e){this._showCollisionBoxes!==e&&(this._showCollisionBoxes=e,e?this.style._generateCollisionBoxes():this._update())},i.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},i.showOverdrawInspector.set=function(e){this._showOverdrawInspector!==e&&(this._showOverdrawInspector=e,this._update())},i.repaint.get=function(){return!!this._repaint},i.repaint.set=function(e){this._repaint!==e&&(this._repaint=e,this.triggerRepaint())},i.vertices.get=function(){return!!this._vertices},i.vertices.set=function(e){this._vertices=e,this._update()},Object.defineProperties(r.prototype,i),r}(dr);function ko(e){e.parentNode&&e.parentNode.removeChild(e)}var wr={showCompass:!0,showZoom:!0},Sr=function(e){var n=this;this.options=t.extend({},wr,e),this._container=l.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(e){return e.preventDefault()}),this.options.showZoom&&(this._zoomInButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-in","Zoom in",function(){return n._map.zoomIn()}),this._zoomOutButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-out","Zoom out",function(){return n._map.zoomOut()})),this.options.showCompass&&(t.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-compass","Reset bearing to north",function(){return n._map.resetNorth()}),this._compassArrow=l.create("span","mapboxgl-ctrl-compass-arrow",this._compass))};function Fo(e,n,r){if(e=new t.LngLat(e.lng,e.lat),n){var i=new t.LngLat(e.lng-360,e.lat),o=new t.LngLat(e.lng+360,e.lat),a=r.locationPoint(e).distSqr(n);r.locationPoint(i).distSqr(n)<a?e=i:r.locationPoint(o).distSqr(n)<a&&(e=o)}for(;Math.abs(e.lng-r.center.lng)>180;){var s=r.locationPoint(e);if(s.x>=0&&s.y>=0&&s.x<=r.width&&s.y<=r.height)break;e.lng>r.center.lng?e.lng-=360:e.lng+=360}return e}Sr.prototype._rotateCompassArrow=function(){var e="rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassArrow.style.transform=e},Sr.prototype.onAdd=function(e){return this._map=e,this.options.showCompass&&(this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ar(e,{button:"left",element:this._compass}),l.addEventListener(this._compass,"mousedown",this._handler.onMouseDown),this._handler.enable()),this._container},Sr.prototype.onRemove=function(){l.remove(this._container),this.options.showCompass&&(this._map.off("rotate",this._rotateCompassArrow),l.removeEventListener(this._compass,"mousedown",this._handler.onMouseDown),this._handler.disable(),delete this._handler),delete this._map},Sr.prototype._createButton=function(e,t,n){var r=l.create("button",e,this._container);return r.type="button",r.title=t,r.setAttribute("aria-label",t),r.addEventListener("click",n),r};var Er={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function No(e,t,n){var r=e.classList;for(var i in Er)r.remove("mapboxgl-"+n+"-anchor-"+i);r.add("mapboxgl-"+n+"-anchor-"+t)}var Pr,Cr=function(e){function o(n,r){if(e.call(this),(n instanceof t.window.HTMLElement||r)&&(n=t.extend({element:n},r)),t.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick"],this),this._anchor=n&&n.anchor||"center",this._color=n&&n.color||"#3FB1CE",this._draggable=n&&n.draggable||!1,this._state="inactive",n&&n.element)this._element=n.element,this._offset=t.Point.convert(n&&n.offset||[0,0]);else{this._defaultMarker=!0,this._element=l.create("div");var i=l.createNS("http://www.w3.org/2000/svg","svg");i.setAttributeNS(null,"height","41px"),i.setAttributeNS(null,"width","27px"),i.setAttributeNS(null,"viewBox","0 0 27 41");var o=l.createNS("http://www.w3.org/2000/svg","g");o.setAttributeNS(null,"stroke","none"),o.setAttributeNS(null,"stroke-width","1"),o.setAttributeNS(null,"fill","none"),o.setAttributeNS(null,"fill-rule","evenodd");var a=l.createNS("http://www.w3.org/2000/svg","g");a.setAttributeNS(null,"fill-rule","nonzero");var s=l.createNS("http://www.w3.org/2000/svg","g");s.setAttributeNS(null,"transform","translate(3.0, 29.0)"),s.setAttributeNS(null,"fill","#000000");for(var u=0,c=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];u<c.length;u+=1){var p=c[u],h=l.createNS("http://www.w3.org/2000/svg","ellipse");h.setAttributeNS(null,"opacity","0.04"),h.setAttributeNS(null,"cx","10.5"),h.setAttributeNS(null,"cy","5.80029008"),h.setAttributeNS(null,"rx",p.rx),h.setAttributeNS(null,"ry",p.ry),s.appendChild(h)}var f=l.createNS("http://www.w3.org/2000/svg","g");f.setAttributeNS(null,"fill",this._color);var d=l.createNS("http://www.w3.org/2000/svg","path");d.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),f.appendChild(d);var g=l.createNS("http://www.w3.org/2000/svg","g");g.setAttributeNS(null,"opacity","0.25"),g.setAttributeNS(null,"fill","#000000");var m=l.createNS("http://www.w3.org/2000/svg","path");m.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),g.appendChild(m);var y=l.createNS("http://www.w3.org/2000/svg","g");y.setAttributeNS(null,"transform","translate(6.0, 7.0)"),y.setAttributeNS(null,"fill","#FFFFFF");var v=l.createNS("http://www.w3.org/2000/svg","g");v.setAttributeNS(null,"transform","translate(8.0, 8.0)");var _=l.createNS("http://www.w3.org/2000/svg","circle");_.setAttributeNS(null,"fill","#000000"),_.setAttributeNS(null,"opacity","0.25"),_.setAttributeNS(null,"cx","5.5"),_.setAttributeNS(null,"cy","5.5"),_.setAttributeNS(null,"r","5.4999962");var b=l.createNS("http://www.w3.org/2000/svg","circle");b.setAttributeNS(null,"fill","#FFFFFF"),b.setAttributeNS(null,"cx","5.5"),b.setAttributeNS(null,"cy","5.5"),b.setAttributeNS(null,"r","5.4999962"),v.appendChild(_),v.appendChild(b),a.appendChild(s),a.appendChild(f),a.appendChild(g),a.appendChild(y),a.appendChild(v),i.appendChild(a),this._element.appendChild(i),this._offset=t.Point.convert(n&&n.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._popup=null}return e&&(o.__proto__=e),o.prototype=Object.create(e&&e.prototype),o.prototype.constructor=o,o.prototype.addTo=function(e){return this.remove(),this._map=e,e.getCanvasContainer().appendChild(this._element),e.on("move",this._update),e.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},o.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),delete this._map),l.remove(this._element),this._popup&&this._popup.remove(),this},o.prototype.getLngLat=function(){return this._lngLat},o.prototype.setLngLat=function(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},o.prototype.getElement=function(){return this._element},o.prototype.setPopup=function(e){if(this._popup&&(this._popup.remove(),this._popup=null),e){if(!("offset"in e.options)){var t=Math.sqrt(Math.pow(13.5,2)/2);e.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[t,-1*(24.6+t)],"bottom-right":[-t,-1*(24.6+t)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=e,this._lngLat&&this._popup.setLngLat(this._lngLat)}return this},o.prototype._onMapClick=function(e){var t=e.originalEvent.target,n=this._element;this._popup&&(t===n||n.contains(t))&&this.togglePopup()},o.prototype.getPopup=function(){return this._popup},o.prototype.togglePopup=function(){var e=this._popup;return e?(e.isOpen()?e.remove():e.addTo(this._map),this):this},o.prototype._update=function(e){this._map&&(this._map.transform.renderWorldCopies&&(this._lngLat=Fo(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset),e&&"moveend"!==e.type||(this._pos=this._pos.round()),l.setTransform(this._element,Er[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px)"),No(this._element,this._anchor,"marker"))},o.prototype.getOffset=function(){return this._offset},o.prototype.setOffset=function(e){return this._offset=t.Point.convert(e),this._update(),this},o.prototype._onMove=function(e){this._pos=e.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new t.Event("dragstart"))),this.fire(new t.Event("drag"))},o.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new t.Event("dragend")),this._state="inactive"},o.prototype._addDragHandler=function(e){this._element.contains(e.originalEvent.target)&&(e.preventDefault(),this._positionDelta=e.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},o.prototype.setDraggable=function(e){return this._draggable=!!e,this._map&&(e?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},o.prototype.isDraggable=function(){return this._draggable},o}(t.Evented),kr={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showUserLocation:!0},Tr=function(e){function o(n){e.call(this),this.options=t.extend({},kr,n),t.bindAll(["_onSuccess","_onError","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return e&&(o.__proto__=e),o.prototype=Object.create(e&&e.prototype),o.prototype.constructor=o,o.prototype.onAdd=function(e){var n;return this._map=e,this._container=l.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),n=this._setupUI,void 0!==Pr?n(Pr):void 0!==t.window.navigator.permissions?t.window.navigator.permissions.query({name:"geolocation"}).then(function(e){Pr="denied"!==e.state,n(Pr)}):(Pr=!!t.window.navigator.geolocation,n(Pr)),this._container},o.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),l.remove(this._container),this._map=void 0},o.prototype._onSuccess=function(e){if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(e),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("geolocate",e)),this._finish()},o.prototype._updateCamera=function(e){var n=new t.LngLat(e.coords.longitude,e.coords.latitude),r=e.coords.accuracy;this._map.fitBounds(n.toBounds(r),this.options.fitBoundsOptions,{geolocateSource:!0})},o.prototype._updateMarker=function(e){e?this._userLocationDotMarker.setLngLat([e.coords.longitude,e.coords.latitude]).addTo(this._map):this._userLocationDotMarker.remove()},o.prototype._onError=function(e){if(this.options.trackUserLocation)if(1===e.code)this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),void 0!==this._geolocationWatchID&&this._clearWatch();else switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("error",e)),this._finish()},o.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},o.prototype._setupUI=function(e){var n=this;!1!==e?(this._container.addEventListener("contextmenu",function(e){return e.preventDefault()}),this._geolocateButton=l.create("button","mapboxgl-ctrl-icon mapboxgl-ctrl-geolocate",this._container),this._geolocateButton.type="button",this._geolocateButton.setAttribute("aria-label","Geolocate"),this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=l.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Cr(this._dotElement),this.options.trackUserLocation&&(this._watchState="OFF")),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(e){e.geolocateSource||"ACTIVE_LOCK"!==n._watchState||(n._watchState="BACKGROUND",n._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),n._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),n.fire(new t.Event("trackuserlocationend")))})):t.warnOnce("Geolocation support is not available, the GeolocateControl will not be visible.")},o.prototype.trigger=function(){if(!this._setup)return t.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new t.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}"OFF"===this._watchState&&void 0!==this._geolocationWatchID?this._clearWatch():void 0===this._geolocationWatchID&&(this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._geolocationWatchID=t.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,this.options.positionOptions))}else t.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},o.prototype._clearWatch=function(){t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},o}(t.Evented),Ar={maxWidth:100,unit:"metric"},Or=function(e){this.options=t.extend({},Ar,e),t.bindAll(["_onMove","setUnit"],this)};function Xo(e,t,n){var r,i,o,a,s,l,u=n&&n.maxWidth||100,c=e._container.clientHeight/2,p=(r=e.unproject([0,c]),i=e.unproject([u,c]),o=Math.PI/180,a=r.lat*o,s=i.lat*o,l=Math.sin(a)*Math.sin(s)+Math.cos(a)*Math.cos(s)*Math.cos((i.lng-r.lng)*o),6371e3*Math.acos(Math.min(l,1)));if(n&&"imperial"===n.unit){var h=3.2808*p;h>5280?Ho(t,u,h/5280,"mi"):Ho(t,u,h,"ft")}else n&&"nautical"===n.unit?Ho(t,u,p/1852,"nm"):Ho(t,u,p,"m")}function Ho(e,t,n,r){var i,o,a,s=(i=n,(o=Math.pow(10,(""+Math.floor(i)).length-1))*(a=(a=i/o)>=10?10:a>=5?5:a>=3?3:a>=2?2:a>=1?1:function(e){var t=Math.pow(10,Math.ceil(-Math.log(e)/Math.LN10));return Math.round(e*t)/t}(a))),l=s/n;"m"===r&&s>=1e3&&(s/=1e3,r="km"),e.style.width=t*l+"px",e.innerHTML=s+r}Or.prototype.getDefaultPosition=function(){return"bottom-left"},Or.prototype._onMove=function(){Xo(this._map,this._container,this.options)},Or.prototype.onAdd=function(e){return this._map=e,this._container=l.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",e.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Or.prototype.onRemove=function(){l.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Or.prototype.setUnit=function(e){this.options.unit=e,Xo(this._map,this._container,this.options)};var Ir=function(e){this._fullscreen=!1,e&&e.container&&(e.container instanceof t.window.HTMLElement?this._container=e.container:t.warnOnce("Full screen control 'container' must be a DOM element.")),t.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in t.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in t.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in t.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in t.window.document&&(this._fullscreenchange="MSFullscreenChange"),this._className="mapboxgl-ctrl"};Ir.prototype.onAdd=function(e){return this._map=e,this._container||(this._container=this._map.getContainer()),this._controlContainer=l.create("div",this._className+" mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",t.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Ir.prototype.onRemove=function(){l.remove(this._controlContainer),this._map=null,t.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Ir.prototype._checkFullscreenSupport=function(){return!!(t.window.document.fullscreenEnabled||t.window.document.mozFullScreenEnabled||t.window.document.msFullscreenEnabled||t.window.document.webkitFullscreenEnabled)},Ir.prototype._setupUI=function(){var e=this._fullscreenButton=l.create("button",this._className+"-icon "+this._className+"-fullscreen",this._controlContainer);e.setAttribute("aria-label","Toggle fullscreen"),e.type="button",this._fullscreenButton.addEventListener("click",this._onClickFullscreen),t.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Ir.prototype._isFullscreen=function(){return this._fullscreen},Ir.prototype._changeIcon=function(){(t.window.document.fullscreenElement||t.window.document.mozFullScreenElement||t.window.document.webkitFullscreenElement||t.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle(this._className+"-shrink"),this._fullscreenButton.classList.toggle(this._className+"-fullscreen"))},Ir.prototype._onClickFullscreen=function(){this._isFullscreen()?t.window.document.exitFullscreen?t.window.document.exitFullscreen():t.window.document.mozCancelFullScreen?t.window.document.mozCancelFullScreen():t.window.document.msExitFullscreen?t.window.document.msExitFullscreen():t.window.document.webkitCancelFullScreen&&t.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Rr={closeButton:!0,closeOnClick:!0,className:""},Lr=function(e){function o(n){e.call(this),this.options=t.extend(Object.create(Rr),n),t.bindAll(["_update","_onClickClose","remove"],this)}return e&&(o.__proto__=e),o.prototype=Object.create(e&&e.prototype),o.prototype.constructor=o,o.prototype.addTo=function(e){return this._map=e,this._map.on("move",this._update),this.options.closeOnClick&&this._map.on("click",this._onClickClose),this._map.on("remove",this.remove),this._update(),this.fire(new t.Event("open")),this},o.prototype.isOpen=function(){return!!this._map},o.prototype.remove=function(){return this._content&&l.remove(this._content),this._container&&(l.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("click",this._onClickClose),this._map.off("remove",this.remove),delete this._map),this.fire(new t.Event("close")),this},o.prototype.getLngLat=function(){return this._lngLat},o.prototype.setLngLat=function(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._update(),this},o.prototype.setText=function(e){return this.setDOMContent(t.window.document.createTextNode(e))},o.prototype.setHTML=function(e){var n,r=t.window.document.createDocumentFragment(),i=t.window.document.createElement("body");for(i.innerHTML=e;n=i.firstChild;)r.appendChild(n);return this.setDOMContent(r)},o.prototype.setDOMContent=function(e){return this._createContent(),this._content.appendChild(e),this._update(),this},o.prototype._createContent=function(){this._content&&l.remove(this._content),this._content=l.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=l.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClickClose))},o.prototype._update=function(){var e=this;if(this._map&&this._lngLat&&this._content){this._container||(this._container=l.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=l.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(t){return e._container.classList.add(t)})),this._map.transform.renderWorldCopies&&(this._lngLat=Fo(this._lngLat,this._pos,this._map.transform));var n=this._pos=this._map.project(this._lngLat),r=this.options.anchor,i=function e(n){if(n){if("number"==typeof n){var r=Math.round(Math.sqrt(.5*Math.pow(n,2)));return{center:new t.Point(0,0),top:new t.Point(0,n),"top-left":new t.Point(r,r),"top-right":new t.Point(-r,r),bottom:new t.Point(0,-n),"bottom-left":new t.Point(r,-r),"bottom-right":new t.Point(-r,-r),left:new t.Point(n,0),right:new t.Point(-n,0)}}if(n instanceof t.Point||Array.isArray(n)){var i=t.Point.convert(n);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:t.Point.convert(n.center||[0,0]),top:t.Point.convert(n.top||[0,0]),"top-left":t.Point.convert(n["top-left"]||[0,0]),"top-right":t.Point.convert(n["top-right"]||[0,0]),bottom:t.Point.convert(n.bottom||[0,0]),"bottom-left":t.Point.convert(n["bottom-left"]||[0,0]),"bottom-right":t.Point.convert(n["bottom-right"]||[0,0]),left:t.Point.convert(n.left||[0,0]),right:t.Point.convert(n.right||[0,0])}}return e(new t.Point(0,0))}(this.options.offset);if(!r){var o,a=this._container.offsetWidth,s=this._container.offsetHeight;o=n.y+i.bottom.y<s?["top"]:n.y>this._map.transform.height-s?["bottom"]:[],n.x<a/2?o.push("left"):n.x>this._map.transform.width-a/2&&o.push("right"),r=0===o.length?"bottom":o.join("-")}var u=n.add(i[r]).round();l.setTransform(this._container,Er[r]+" translate("+u.x+"px,"+u.y+"px)"),No(this._container,r,"popup")}},o.prototype._onClickClose=function(){this.remove()},o}(t.Evented),Mr={version:t.version,supported:n,setRTLTextPlugin:t.setRTLTextPlugin,Map:xr,NavigationControl:Sr,GeolocateControl:Tr,AttributionControl:gr,ScaleControl:Or,FullscreenControl:Ir,Popup:Lr,Marker:Cr,Style:xt,LngLat:t.LngLat,LngLatBounds:t.LngLatBounds,Point:t.Point,MercatorCoordinate:t.MercatorCoordinate,Evented:t.Evented,config:t.config,get accessToken(){return t.config.ACCESS_TOKEN},set accessToken(e){t.config.ACCESS_TOKEN=e},get baseApiUrl(){return t.config.API_URL},set baseApiUrl(e){t.config.API_URL=e},get workerCount(){return We.workerCount},set workerCount(e){We.workerCount=e},get maxParallelImageRequests(){return t.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(e){t.config.MAX_PARALLEL_IMAGE_REQUESTS=e},workerUrl:""};return Mr}),n}()},function(e,t,n){e.exports={description:"",displayName:"MapGL",methods:[],props:[{required:!0,flowType:{name:"number"},description:"The latitude of the center of the map.",tags:{},name:"latitude"},{required:!0,flowType:{name:"number"},description:"The longitude of the center of the map.",tags:{},name:"longitude"},{required:!0,flowType:{name:"number"},description:"The tile zoom level of the map.",tags:{},name:"zoom"},{required:!1,flowType:{name:"string"},description:"Mapbox API access token for mapbox-gl-js.\nRequired when using Mapbox vector tiles/styles.",defaultValue:{value:"null",computed:!1},tags:{},name:"accessToken"},{required:!1,flowType:{name:"boolean"},description:"If `true`, an AttributionControl will be added to the map.",defaultValue:{value:"true",computed:!1},tags:{},name:"attributionControl"},{required:!1,flowType:{name:"number"},description:"Specify the bearing of the viewport",defaultValue:{value:"0",computed:!1},tags:{},name:"bearing"},{required:!1,flowType:{name:"number"},description:"The threshold, measured in degrees, that determines when\nthe map's bearing (rotation) will snap to north. For\nexample, with a  bearingSnap of 7, if the user rotates the\nmap within 7 degrees of north, the map will automatically\nsnap to exact north.",defaultValue:{value:"7",computed:!1},tags:{},name:"bearingSnap"},{required:!1,flowType:{name:"boolean"},description:'If `true`, the "box zoom" interaction is enabled',defaultValue:{value:"true",computed:!1},tags:{},name:"boxZoom"},{required:!1,flowType:{name:"Node"},description:"Sources and Layers",defaultValue:{value:"null",computed:!1},tags:{},name:"children"},{required:!1,flowType:{name:"string"},description:"container className",defaultValue:{value:"null",computed:!1},tags:{},name:"className"},{required:!1,flowType:{name:"boolean"},description:"If true, Resource Timing API information will be collected for\nrequests made by GeoJSON and Vector Tile web workers (this information\nis normally inaccessible from the main Javascript thread). Information\nwill be returned in a resourceTiming property of relevant data events.",defaultValue:{value:"false",computed:!1},tags:{},name:"collectResourceTiming"},{required:!1,flowType:{name:"string"},description:"Map cursor style as CSS value",defaultValue:{value:"null",computed:!1},tags:{},name:"cursorStyle"},{required:!1,flowType:{name:"boolean"},description:'If `true`, the "double click to zoom" interaction is enabled',defaultValue:{value:"true",computed:!1},tags:{},name:"doubleClickZoom"},{required:!1,flowType:{name:"boolean"},description:'If `true`, the "drag to pan" interaction is enabled',defaultValue:{value:"true",computed:!1},tags:{},name:"dragPan"},{required:!1,flowType:{name:"boolean"},description:'If `true`, the "drag to rotate" interaction is enabled',defaultValue:{value:"true",computed:!1},tags:{},name:"dragRotate"},{required:!1,flowType:{name:"boolean"},description:"If `true`, map creation will fail if the performance of Mapbox\nGL JS would be dramatically worse than expected (i.e. a software\nrenderer would be used).",defaultValue:{value:"false",computed:!1},tags:{},name:"failIfMajorPerformanceCaveat"},{required:!1,flowType:{name:"boolean"},description:"If `true`, the map's position (zoom, center latitude,\ncenter longitude, bearing, and pitch) will be synced\nwith the hash fragment of the page's URL. For example,\nhttp://path/to/my/page.html#2.59/39.26/53.07/-24.1/60.",defaultValue:{value:"false",computed:!1},tags:{},name:"hash"},{required:!1,flowType:{name:"boolean"},description:"If `true`, keyboard shortcuts are enabled",defaultValue:{value:"true",computed:!1},tags:{},name:"keyboard"},{required:!1,flowType:{name:"boolean"},description:"If specified, defines a CSS font-family for locally overriding\ngeneration of glyphs in the 'CJK Unified Ideographs' and\n'Hangul Syllables' ranges. In these ranges, font settings from the\nmap's style will be ignored, except for font-weight keywords\n(light/regular/medium/bold). The purpose of this option is to avoid\nbandwidth-intensive glyph server requests.\n(see https://www.mapbox.com/mapbox-gl-js/example/local-ideographs )",defaultValue:{value:"null",computed:!1},tags:{},name:"localIdeographFontFamily"},{required:!1,flowType:{name:"union",raw:"'top-left' | 'top-right' | 'bottom-left' | 'bottom-right'",elements:[{name:"literal",value:"'top-left'"},{name:"literal",value:"'top-right'"},{name:"literal",value:"'bottom-left'"},{name:"literal",value:"'bottom-right'"}]},description:"",defaultValue:{value:"'bottom-left'",computed:!1},tags:{},name:"logoPosition"},{required:!1,flowType:{name:"union",raw:"string | StyleSpecification",elements:[{name:"string"},{name:"StyleSpecification"}]},description:"The Mapbox style. A string url or a Mapbox GL style object.",defaultValue:{value:"'mapbox://styles/mapbox/light-v8'",computed:!1},tags:{},name:"mapStyle"},{required:!1,flowType:{name:"MapboxLngLatBoundsLike"},description:"If set, the map will be constrained to the given bounds.",defaultValue:{value:"null",computed:!1},tags:{},name:"maxBounds"},{required:!1,flowType:{name:"number"},description:"The maxiumum number of tiles stored in the tile cache for a given\nsource. If omitted, the cache will be dynamically sized based on\nthe current viewport.",defaultValue:{value:"null",computed:!1},tags:{},name:"maxTileCacheSize"},{required:!1,flowType:{name:"number"},description:"The maximum zoom level of the map (0-22).",defaultValue:{value:"22",computed:!1},tags:{},name:"maxZoom"},{required:!1,flowType:{name:"number"},description:"The minimum zoom level of the map (0-22).",defaultValue:{value:"0",computed:!1},tags:{},name:"minZoom"},{required:!1,flowType:{name:"Function"},description:"The onLoad callback for the map",defaultValue:{value:"null",computed:!1},tags:{},name:"onLoad"},{required:!1,flowType:{name:"signature",type:"function",raw:"(viewport: Viewport) => void",signature:{arguments:[{name:"viewport",type:{name:"signature",type:"object",raw:"{|\n  latitude: number,\n  longitude: number,\n  zoom: number,\n  pitch?: number,\n  bearing?: number\n|}",signature:{properties:[{key:"latitude",value:{name:"number",required:!0}},{key:"longitude",value:{name:"number",required:!0}},{key:"zoom",value:{name:"number",required:!0}},{key:"pitch",value:{name:"number",required:!1}},{key:"bearing",value:{name:"number",required:!1}}]}}}],return:{name:"void"}}},description:"`onViewportChange` callback is fired when the user interacted with the\nmap. The object passed to the callback contains viewport properties\nsuch as `longitude`, `latitude`, `zoom` etc.",defaultValue:{value:"null",computed:!1},tags:{},name:"onViewportChange"},{required:!1,flowType:{name:"number"},description:"Specify the pitch of the viewport",defaultValue:{value:"0",computed:!1},tags:{},name:"pitch"},{required:!1,flowType:{name:"boolean"},description:'If `false`, the map\'s pitch (tilt) control with "drag to\nrotate" interaction will be disabled.',defaultValue:{value:"true",computed:!1},tags:{},name:"pitchWithRotate"},{required:!1,flowType:{name:"boolean"},description:"Mapbox WebGL context creation option.\nUseful when you want to export the canvas as a PNG.",defaultValue:{value:"false",computed:!1},tags:{},name:"preserveDrawingBuffer"},{required:!1,flowType:{name:"boolean"},description:"If `false`, the map won't attempt to re-request tiles once they\nexpire per their HTTP `cacheControl`/`expires` headers.",defaultValue:{value:"true",computed:!1},tags:{},name:"refreshExpiredTiles"},{required:!1,flowType:{name:"boolean"},description:"If `true`, multiple copies of the world\nwill be rendered, when zoomed out",defaultValue:{value:"true",computed:!1},tags:{},name:"renderWorldCopies"},{required:!1,flowType:{name:"union",raw:"boolean | Object",elements:[{name:"boolean"},{name:"Object"}]},description:'If `true`, the "scroll to zoom" interaction is enabled.',defaultValue:{value:"true",computed:!1},tags:{},name:"scrollZoom"},{required:!1,flowType:{name:"Object"},description:"container style",defaultValue:{value:"null",computed:!1},tags:{},name:"style"},{required:!1,flowType:{name:"boolean"},description:"If `true`, the map will automatically resize\nwhen the browser window resizes.",defaultValue:{value:"true",computed:!1},tags:{},name:"trackResize"},{required:!1,flowType:{name:"signature",type:"function",raw:"(\n  url: string,\n  resourceType: string\n) => { url: string, headers?: Object, credentials?: string }",signature:{arguments:[{name:"url",type:{name:"string"}},{name:"resourceType",type:{name:"string"}}],return:{name:"signature",type:"object",raw:"{ url: string, headers?: Object, credentials?: string }",signature:{properties:[{key:"url",value:{name:"string",required:!0}},{key:"headers",value:{name:"Object",required:!1}},{key:"credentials",value:{name:"string",required:!1}}]}}}},description:"A callback run before the Map makes a request for an external URL.\nThe callback can be used to modify the url, set headers, or set the\ncredentials property for cross-origin requests. Expected to return\nan object with a  url property and optionally  headers and\ncredentials properties.",defaultValue:{value:"null",computed:!1},tags:{},name:"transformRequest"},{required:!1,flowType:{name:"union",raw:"'jumpTo' | 'easeTo' | 'flyTo'",elements:[{name:"literal",value:"'jumpTo'"},{name:"literal",value:"'easeTo'"},{name:"literal",value:"'flyTo'"}]},description:"Map method that will be called after new viewport props are received.",defaultValue:{value:"'jumpTo'",computed:!1},tags:{},name:"viewportChangeMethod"},{required:!1,flowType:{name:"AnimationOptions"},description:"Options common to map movement methods that involve animation,\ncontrolling the duration and easing function of the animation.\nThis options will be passed to the `viewportChangeMethod` call.\n(see https://docs.mapbox.com/mapbox-gl-js/api/#animationoptions)",defaultValue:{value:"null",computed:!1},tags:{},name:"viewportChangeOptions"}],doclets:{},examples:n(451)}},function(e,t,n){var r={react:n(1),"@urbica/react-map-gl":n(52),"mapbox-gl/dist/mapbox-gl.css":n(49),"./index.js":n(133)},i=n(44).default.bind(null,r),o=n(45).default.bind(null,"const React$0 = require('react');\nconst React = React$0.default || React$0;\nconst MapGL$0 = require('./index.js');\nconst MapGL = MapGL$0.default || MapGL$0;",i);e.exports=[{type:"markdown",content:"### Static map"},{type:"code",content:"import React from 'react';\nimport MapGL from '@urbica/react-map-gl';\nimport 'mapbox-gl/dist/mapbox-gl.css';\n\n<MapGL\n  style={{ width: '100%', height: '400px' }}\n  mapStyle='mapbox://styles/mapbox/light-v9'\n  accessToken={MAPBOX_ACCESS_TOKEN}\n  latitude={37.78}\n  longitude={-122.41}\n  zoom={11}\n/>;",settings:{},evalInContext:o},{type:"markdown",content:"### Interactive map"},{type:"code",content:"import React from 'react';\nimport MapGL from '@urbica/react-map-gl';\nimport 'mapbox-gl/dist/mapbox-gl.css';\n\ninitialState = {\n  viewport: {\n    latitude: 37.78,\n    longitude: -122.41,\n    zoom: 11\n  }\n};\n\n<MapGL\n  style={{ width: '100%', height: '400px' }}\n  mapStyle='mapbox://styles/mapbox/light-v9'\n  accessToken={MAPBOX_ACCESS_TOKEN}\n  onViewportChange={viewport => setState({ viewport })}\n  {...state.viewport}\n/>;",settings:{},evalInContext:o},{type:"markdown",content:"### Using JSON Map Style"},{type:"code",content:"import React from 'react';\nimport MapGL from '@urbica/react-map-gl';\nimport 'mapbox-gl/dist/mapbox-gl.css';\n\ninitialState = {\n  mapStyle: null,\n  viewport: {\n    latitude: 37.78,\n    longitude: -122.41,\n    zoom: 11\n  }\n};\n\nconst mapStyleUrl = `https://api.mapbox.com/styles/v1/mapbox/light-v9?access_token=${MAPBOX_ACCESS_TOKEN}`;\n\nif (!state.mapStyle && setState) {\n  fetch(mapStyleUrl)\n    .then(response => response.json())\n    .then(mapStyle => setState({ mapStyle }));\n}\n\n<MapGL\n  style={{ width: '100%', height: '400px' }}\n  mapStyle={state.mapStyle}\n  accessToken={MAPBOX_ACCESS_TOKEN}\n  onViewportChange={viewport => setState({ viewport })}\n  {...state.viewport}\n/>;",settings:{},evalInContext:o},{type:"markdown",content:"### Vewport Change Methods\n\nThere are two props `viewportChangeMethod` and `viewportChangeOptions` that controls how `MapGL` component reacts to the new viewport props.\n\nYou can find list of available `viewportChangeOptions` [here](https://docs.mapbox.com/mapbox-gl-js/api/#animationoptions)."},{type:"code",content:"import React from 'react';\nimport MapGL from '@urbica/react-map-gl';\nimport 'mapbox-gl/dist/mapbox-gl.css';\n\ninitialState = {\n  viewportChangeMethod: 'flyTo',\n  viewport: {\n    latitude: 37.78,\n    longitude: -122.41,\n    zoom: 11\n  }\n};\n\nconst onChange = () => {\n  setState({ viewportChangeMethod: event.target.value });\n};\n\nconst onClick = event => {\n  const { lngLat } = event;\n\n  const newVewport = {\n    ...state.viewport,\n    latitude: lngLat.lat,\n    longitude: lngLat.lng\n  };\n\n  setState({ viewport: newVewport });\n};\n\n<React.Fragment>\n  Select viewportChangeMethod and click on the map\n  <select value={state.viewportChangeMethod} onChange={onChange}>\n    <option value='flyTo'>flyTo</option>\n    <option value='jumpTo'>jumpTo</option>\n    <option value='easeTo'>easeTo</option>\n  </select>\n  <MapGL\n    style={{ width: '100%', height: '400px' }}\n    mapStyle='mapbox://styles/mapbox/light-v9'\n    accessToken={MAPBOX_ACCESS_TOKEN}\n    onClick={onClick}\n    onViewportChange={viewport => setState({ viewport })}\n    viewportChangeMethod={state.viewportChangeMethod}\n    {...state.viewport}\n  />\n</React.Fragment>;",settings:{},evalInContext:o},{type:"markdown",content:"### Events\n\n`mapbox-gl` emit [events](https://www.mapbox.com/mapbox-gl-js/api/#events) in response to user interactions or changes in state.\n\nYou can find full list of supported props in [eventProps](https://github.com/urbica/react-map-gl/blob/master/src/components/MapGL/eventProps.js).\n\nHere is an example for `onClick` prop."},{type:"code",content:"import React from 'react';\nimport MapGL from '@urbica/react-map-gl';\nimport 'mapbox-gl/dist/mapbox-gl.css';\n\ninitialState = {\n  viewport: {\n    latitude: 37.78,\n    longitude: -122.41,\n    zoom: 11\n  }\n};\n\nconst onClick = event => {\n  const { lngLat } = event;\n\n  const newVewport = {\n    ...state.viewport,\n    latitude: lngLat.lat,\n    longitude: lngLat.lng\n  };\n\n  setState({ viewport: newVewport });\n};\n\n<MapGL\n  style={{ width: '100%', height: '400px' }}\n  mapStyle='mapbox://styles/mapbox/light-v9'\n  accessToken={MAPBOX_ACCESS_TOKEN}\n  onClick={onClick}\n  onViewportChange={viewport => setState({ viewport })}\n  {...state.viewport}\n/>;",settings:{},evalInContext:o},{type:"markdown",content:"### Getting Mapbox GL JS Map Instance\n\n#### Using `MapContext`\n\nTo access Mapbox GL JS Map instance you can use `MapContext.Consumer` component."},{type:"code",content:"import React from 'react';\nimport MapGL, { MapContext } from '@urbica/react-map-gl';\nimport 'mapbox-gl/dist/mapbox-gl.css';\n\n<MapGL\n  style={{ width: '100%', height: '400px' }}\n  mapStyle='mapbox://styles/mapbox/light-v9'\n  accessToken={MAPBOX_ACCESS_TOKEN}\n  latitude={37.78}\n  longitude={-122.41}\n  zoom={11}\n>\n  <MapContext.Consumer>\n    {map => {\n      map.setPaintProperty('water', 'fill-color', '#fdbdba');\n      return;\n    }}\n  </MapContext.Consumer>\n</MapGL>;",settings:{},evalInContext:o},{type:"markdown",content:"#### Using Ref\n\nYou can also call `getMap()` method on the `MapGL` [ref](https://reactjs.org/docs/refs-and-the-dom.html)."},{type:"code",content:"import React from 'react';\nimport MapGL from '@urbica/react-map-gl';\nimport 'mapbox-gl/dist/mapbox-gl.css';\n\nclass MyMapGL extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this._map = React.createRef();\n  }\n\n  componentDidMount() {\n    const map = this._map.current.getMap();\n    map.once('load', () => {\n      map.setPaintProperty('water', 'fill-color', '#db7093');\n    });\n  }\n\n  render() {\n    return <MapGL {...this.props} ref={this._map} />;\n  }\n}\n\n<MyMapGL\n  style={{ width: '100%', height: '400px' }}\n  mapStyle='mapbox://styles/mapbox/light-v9'\n  accessToken={MAPBOX_ACCESS_TOKEN}\n  latitude={37.78}\n  longitude={-122.41}\n  zoom={11}\n/>;",settings:{},evalInContext:o}]},function(e,t,n){e.exports={description:"",displayName:"Source",methods:[],props:[{required:!0,flowType:{name:"string"},description:"Mapbox GL Source id",tags:{},name:"id"}],composes:["SourceSpecification"],doclets:{},examples:n(453)}},function(e,t,n){var r={react:n(1),"@urbica/react-map-gl":n(52),"mapbox-gl/dist/mapbox-gl.css":n(49),"@turf/random":n(454),"./index.js":n(146)},i=n(44).default.bind(null,r),o=n(45).default.bind(null,"const React$0 = require('react');\nconst React = React$0.default || React$0;\nconst Source$0 = require('./index.js');\nconst Source = Source$0.default || Source$0;",i);e.exports=[{type:"markdown",content:"[Sources](https://docs.mapbox.com/mapbox-gl-js/api/#sources) specify the geographic features to be rendered on the map.\n\n## GeoJSON Source\n\nA [GeoJSON source](https://docs.mapbox.com/mapbox-gl-js/style-spec/#sources-geojson). Data must be provided via a `data` property, whose value can be a URL or inline GeoJSON."},{type:"code",content:"import React from 'react';\nimport MapGL, { Source, Layer } from '@urbica/react-map-gl';\nimport 'mapbox-gl/dist/mapbox-gl.css';\n\ninitialState = {\n  viewport: {\n    latitude: 45.137451890638886,\n    longitude: -68.13734351262877,\n    zoom: 5\n  }\n};\n\nconst data = {\n  type: 'Feature',\n  geometry: {\n    type: 'Polygon',\n    coordinates: [\n      [\n        [-67.13734351262877, 45.137451890638886],\n        [-66.96466, 44.8097],\n        [-68.03252, 44.3252],\n        [-69.06, 43.98],\n        [-70.11617, 43.68405],\n        [-70.64573401557249, 43.090083319667144],\n        [-70.75102474636725, 43.08003225358635],\n        [-70.79761105007827, 43.21973948828747],\n        [-70.98176001655037, 43.36789581966826],\n        [-70.94416541205806, 43.46633942318431],\n        [-71.08482, 45.3052400000002],\n        [-70.6600225491012, 45.46022288673396],\n        [-70.30495378282376, 45.914794623389355],\n        [-70.00014034695016, 46.69317088478567],\n        [-69.23708614772835, 47.44777598732787],\n        [-68.90478084987546, 47.184794623394396],\n        [-68.23430497910454, 47.35462921812177],\n        [-67.79035274928509, 47.066248887716995],\n        [-67.79141211614706, 45.702585354182816],\n        [-67.13734351262877, 45.137451890638886]\n      ]\n    ]\n  }\n};\n\n<MapGL\n  style={{ width: '100%', height: '400px' }}\n  mapStyle='mapbox://styles/mapbox/light-v9'\n  accessToken={MAPBOX_ACCESS_TOKEN}\n  onViewportChange={viewport => setState({ viewport })}\n  {...state.viewport}\n>\n  <Source id='maine' type='geojson' data={data} />\n  <Layer\n    id='maine'\n    type='fill'\n    source='maine'\n    paint={{\n      'fill-color': '#088',\n      'fill-opacity': 0.8\n    }}\n  />\n</MapGL>;",settings:{},evalInContext:o},{type:"markdown",content:"### Updating GeoJSON Source Data"},{type:"code",content:"import React from 'react';\nimport { randomPoint } from '@turf/random';\nimport MapGL, { Source, Layer } from '@urbica/react-map-gl';\nimport 'mapbox-gl/dist/mapbox-gl.css';\n\ninitialState = {\n  points: randomPoint(100),\n  viewport: {\n    latitude: 0,\n    longitude: 0,\n    zoom: 0\n  }\n};\n\nconst addPoints = () => {\n  const randomPoints = randomPoint(100);\n  const newFeatures = state.points.features.concat(randomPoints.features);\n  const newPoints = { ...state.points, features: newFeatures };\n  setState({ points: newPoints });\n};\n\n<React.Fragment>\n  <button onClick={addPoints}>+100 points</button>\n  <MapGL\n    style={{ width: '100%', height: '400px' }}\n    mapStyle='mapbox://styles/mapbox/light-v9'\n    accessToken={MAPBOX_ACCESS_TOKEN}\n    onViewportChange={viewport => setState({ viewport })}\n    {...state.viewport}\n  >\n    <Source id='points' type='geojson' data={state.points} />\n    <Layer\n      id='points'\n      type='circle'\n      source='points'\n      paint={{\n        'circle-radius': 6,\n        'circle-color': '#1978c8'\n      }}\n    />\n  </MapGL>\n</React.Fragment>;",settings:{},evalInContext:o},{type:"markdown",content:"## Vector Source\n\nAdd a [vector source](https://docs.mapbox.com/mapbox-gl-js/style-spec/#sources-vector) to a map."},{type:"code",content:"import React from 'react';\nimport MapGL, { Source, Layer } from '@urbica/react-map-gl';\nimport 'mapbox-gl/dist/mapbox-gl.css';\n\ninitialState = {\n  viewport: {\n    latitude: 37.753574,\n    longitude: -122.447303,\n    zoom: 13\n  }\n};\n\n<MapGL\n  style={{ width: '100%', height: '400px' }}\n  mapStyle='mapbox://styles/mapbox/light-v9'\n  accessToken={MAPBOX_ACCESS_TOKEN}\n  onViewportChange={viewport => setState({ viewport })}\n  {...state.viewport}\n>\n  <Source id='contour' type='vector' url='mapbox://mapbox.mapbox-terrain-v2' />\n  <Layer\n    id='contour'\n    type='line'\n    source='contour'\n    source-layer='contour'\n    paint={{\n      'line-color': '#877b59',\n      'line-width': 1\n    }}\n  />\n</MapGL>;",settings:{},evalInContext:o},{type:"markdown",content:"## Raster Source"},{type:"code",content:"import React from 'react';\nimport MapGL, { Source, Layer } from '@urbica/react-map-gl';\nimport 'mapbox-gl/dist/mapbox-gl.css';\n\ninitialState = {\n  viewport: {\n    latitude: 40.6892,\n    longitude: -74.5447,\n    zoom: 8\n  }\n};\n\n<MapGL\n  style={{ width: '100%', height: '400px' }}\n  mapStyle='mapbox://styles/mapbox/light-v9'\n  accessToken={MAPBOX_ACCESS_TOKEN}\n  onViewportChange={viewport => setState({ viewport })}\n  {...state.viewport}\n>\n  <Source\n    id='wms-test-layer'\n    type='raster'\n    tileSize={256}\n    tiles={[\n      'https://geodata.state.nj.us/imagerywms/Natural2015?bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&srs=EPSG:3857&transparent=true&width=256&height=256&layers=Natural2015'\n    ]}\n  />\n  <Layer\n    id='wms-test-layer'\n    type='raster'\n    source='wms-test-layer'\n    before='aeroway-taxiway'\n  />\n</MapGL>;",settings:{},evalInContext:o}]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(455);function randomPosition(e){return Array.isArray(e)?coordInBBox(e):e&&e.bbox?coordInBBox(e.bbox):[360*rnd(),180*rnd()]}function rnd(){return Math.random()-.5}function coordInBBox(e){return[Math.random()*(e[2]-e[0])+e[0],Math.random()*(e[3]-e[1])+e[1]]}t.randomPosition=randomPosition,t.randomPoint=function randomPoint(e,t){void 0===t&&(t={}),null==e&&(e=1);for(var n=[],i=0;i<e;i++)n.push(r.point(randomPosition(t.bbox)));return r.featureCollection(n)},t.randomPolygon=function randomPolygon(e,t){void 0===t&&(t={}),null==e&&(e=1),r.isNumber(t.num_vertices)&&void 0!==t.num_vertices||(t.num_vertices=10),r.isNumber(t.max_radial_length)&&void 0!==t.max_radial_length||(t.max_radial_length=10);for(var n=[],i=function(e){var i,o=[],a=Array.apply(null,new Array(t.num_vertices+1)).map(Math.random);a.forEach(function(e,t,n){n[t]=t>0?e+n[t-1]:e}),a.forEach(function(e){e=2*e*Math.PI/a[a.length-1];var n=Math.random();o.push([n*(t.max_radial_length||10)*Math.sin(e),n*(t.max_radial_length||10)*Math.cos(e)])}),o[o.length-1]=o[0],o=o.map((i=randomPosition(t.bbox),function(e){return[e[0]+i[0],e[1]+i[1]]})),n.push(r.polygon([o]))},o=0;o<e;o++)i();return r.featureCollection(n)},t.randomLineString=function randomLineString(e,t){if(void 0===t&&(t={}),t=t||{},!r.isObject(t))throw new Error("options is invalid");var n=t.bbox,i=t.num_vertices,o=t.max_length,a=t.max_rotation;null==e&&(e=1),(!r.isNumber(i)||void 0===i||i<2)&&(i=10),r.isNumber(o)&&void 0!==o||(o=1e-4),r.isNumber(a)&&void 0!==a||(a=Math.PI/8);for(var s=[],l=0;l<e;l++){for(var u=[randomPosition(n)],c=0;c<i-1;c++){var p=(0===c?2*Math.random()*Math.PI:Math.tan((u[c][1]-u[c-1][1])/(u[c][0]-u[c-1][0])))+(Math.random()-.5)*a*2,h=Math.random()*o;u.push([u[c][0]+h*Math.cos(p),u[c][1]+h*Math.sin(p)])}s.push(r.lineString(u))}return r.featureCollection(s)}},function(e,t,n){"use strict";function feature(e,t,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=t||{},r.geometry=e,r}function point(e,t,n){return void 0===n&&(n={}),feature({type:"Point",coordinates:e},t,n)}function polygon(e,t,n){void 0===n&&(n={});for(var r=0,i=e;r<i.length;r++){var o=i[r];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<o[o.length-1].length;a++)if(o[o.length-1][a]!==o[0][a])throw new Error("First and last Position are not equivalent.")}return feature({type:"Polygon",coordinates:e},t,n)}function lineString(e,t,n){if(void 0===n&&(n={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");return feature({type:"LineString",coordinates:e},t,n)}function featureCollection(e,t){void 0===t&&(t={});var n={type:"FeatureCollection"};return t.id&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.features=e,n}function multiLineString(e,t,n){return void 0===n&&(n={}),feature({type:"MultiLineString",coordinates:e},t,n)}function multiPoint(e,t,n){return void 0===n&&(n={}),feature({type:"MultiPoint",coordinates:e},t,n)}function multiPolygon(e,t,n){return void 0===n&&(n={}),feature({type:"MultiPolygon",coordinates:e},t,n)}function radiansToLength(e,n){void 0===n&&(n="kilometers");var r=t.factors[n];if(!r)throw new Error(n+" units is invalid");return e*r}function lengthToRadians(e,n){void 0===n&&(n="kilometers");var r=t.factors[n];if(!r)throw new Error(n+" units is invalid");return e/r}function radiansToDegrees(e){return 180*(e%(2*Math.PI))/Math.PI}function isNumber(e){return!isNaN(e)&&null!==e&&!Array.isArray(e)&&!/^\s*$/.test(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.earthRadius=6371008.8,t.factors={centimeters:100*t.earthRadius,centimetres:100*t.earthRadius,degrees:t.earthRadius/111325,feet:3.28084*t.earthRadius,inches:39.37*t.earthRadius,kilometers:t.earthRadius/1e3,kilometres:t.earthRadius/1e3,meters:t.earthRadius,metres:t.earthRadius,miles:t.earthRadius/1609.344,millimeters:1e3*t.earthRadius,millimetres:1e3*t.earthRadius,nauticalmiles:t.earthRadius/1852,radians:1,yards:t.earthRadius/1.0936},t.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/t.earthRadius,yards:1/1.0936},t.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:3.86e-7,millimeters:1e6,millimetres:1e6,yards:1.195990046},t.feature=feature,t.geometry=function geometry(e,t,n){switch(void 0===n&&(n={}),e){case"Point":return point(t).geometry;case"LineString":return lineString(t).geometry;case"Polygon":return polygon(t).geometry;case"MultiPoint":return multiPoint(t).geometry;case"MultiLineString":return multiLineString(t).geometry;case"MultiPolygon":return multiPolygon(t).geometry;default:throw new Error(e+" is invalid")}},t.point=point,t.points=function points(e,t,n){return void 0===n&&(n={}),featureCollection(e.map(function(e){return point(e,t)}),n)},t.polygon=polygon,t.polygons=function polygons(e,t,n){return void 0===n&&(n={}),featureCollection(e.map(function(e){return polygon(e,t)}),n)},t.lineString=lineString,t.lineStrings=function lineStrings(e,t,n){return void 0===n&&(n={}),featureCollection(e.map(function(e){return lineString(e,t)}),n)},t.featureCollection=featureCollection,t.multiLineString=multiLineString,t.multiPoint=multiPoint,t.multiPolygon=multiPolygon,t.geometryCollection=function geometryCollection(e,t,n){return void 0===n&&(n={}),feature({type:"GeometryCollection",geometries:e},t,n)},t.round=function round(e,t){if(void 0===t&&(t=0),t&&!(t>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,t||0);return Math.round(e*n)/n},t.radiansToLength=radiansToLength,t.lengthToRadians=lengthToRadians,t.lengthToDegrees=function lengthToDegrees(e,t){return radiansToDegrees(lengthToRadians(e,t))},t.bearingToAzimuth=function bearingToAzimuth(e){var t=e%360;return t<0&&(t+=360),t},t.radiansToDegrees=radiansToDegrees,t.degreesToRadians=function degreesToRadians(e){return e%360*Math.PI/180},t.convertLength=function convertLength(e,t,n){if(void 0===t&&(t="kilometers"),void 0===n&&(n="kilometers"),!(e>=0))throw new Error("length must be a positive number");return radiansToLength(lengthToRadians(e,t),n)},t.convertArea=function convertArea(e,n,r){if(void 0===n&&(n="meters"),void 0===r&&(r="kilometers"),!(e>=0))throw new Error("area must be a positive number");var i=t.areaFactors[n];if(!i)throw new Error("invalid original units");var o=t.areaFactors[r];if(!o)throw new Error("invalid final units");return e/i*o},t.isNumber=isNumber,t.isObject=function isObject(e){return!!e&&e.constructor===Object},t.validateBBox=function validateBBox(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(4!==e.length&&6!==e.length)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach(function(e){if(!isNumber(e))throw new Error("bbox must only contain numbers")})},t.validateId=function validateId(e){if(!e)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof e))throw new Error("id must be a number or a string")},t.radians2degrees=function radians2degrees(){throw new Error("method has been renamed to `radiansToDegrees`")},t.degrees2radians=function degrees2radians(){throw new Error("method has been renamed to `degreesToRadians`")},t.distanceToDegrees=function distanceToDegrees(){throw new Error("method has been renamed to `lengthToDegrees`")},t.distanceToRadians=function distanceToRadians(){throw new Error("method has been renamed to `lengthToRadians`")},t.radiansToDistance=function radiansToDistance(){throw new Error("method has been renamed to `radiansToLength`")},t.bearingToAngle=function bearingToAngle(){throw new Error("method has been renamed to `bearingToAzimuth`")},t.convertDistance=function convertDistance(){throw new Error("method has been renamed to `convertLength`")}},function(e,t,n){e.exports={description:"",displayName:"Layer",methods:[],props:[{required:!0,flowType:{name:"string"},description:"Mapbox GL Layer id",tags:{},name:"id"},{required:!1,flowType:{name:"string"},description:"The id of an existing layer to insert the new layer before.",tags:{},name:"before"},{required:!1,flowType:{name:"signature",type:"function",raw:"(event: { features?: [], ...MapMouseEvent }) => any",signature:{arguments:[{name:"event",type:{name:"signature",type:"object",raw:"{ features?: [], ...MapMouseEvent }",signature:{properties:[{key:"features",value:{name:"tuple",raw:"[]",elements:[],required:!1}},{key:"MapMouseEvent",value:{name:"unknown",required:!0}}]}}}],return:{name:"any"}}},description:"Called when the layer is clicked.",tags:{callback:[{title:"callback",description:null}],param:[{title:"param",description:"The mouse event.",type:{type:"NameExpression",name:"Object"},name:"event"},{title:"param",description:"The coordinates of the pointer",type:{type:"ArrayType",elements:[{type:"NameExpression",name:"Number"},{type:"NameExpression",name:"Number"}]},name:"event.lngLat"},{title:"param",description:"The features under the pointer,\nusing Mapbox's queryRenderedFeatures API:\nhttps://www.mapbox.com/mapbox-gl-js/api/#Map#queryRenderedFeatures",type:{type:"NameExpression",name:"Array"},name:"event.features"}]},name:"onClick"},{required:!1,flowType:{name:"signature",type:"function",raw:"(event: { features?: [], ...MapMouseEvent }) => any",signature:{arguments:[{name:"event",type:{name:"signature",type:"object",raw:"{ features?: [], ...MapMouseEvent }",signature:{properties:[{key:"features",value:{name:"tuple",raw:"[]",elements:[],required:!1}},{key:"MapMouseEvent",value:{name:"unknown",required:!0}}]}}}],return:{name:"any"}}},description:"Called when the layer feature is entered.",tags:{callback:[{title:"callback",description:null}],param:[{title:"param",description:"The mouse event.",type:{type:"NameExpression",name:"Object"},name:"event"},{title:"param",description:"The coordinates of the pointer",type:{type:"ArrayType",elements:[{type:"NameExpression",name:"Number"},{type:"NameExpression",name:"Number"}]},name:"event.lngLat"},{title:"param",description:"The features under the pointer,\nusing Mapbox's queryRenderedFeatures API:\nhttps://www.mapbox.com/mapbox-gl-js/api/#Map#queryRenderedFeatures",type:{type:"NameExpression",name:"Array"},name:"event.features"}]},name:"onEnter"},{required:!1,flowType:{name:"signature",type:"function",raw:"(event: { features?: [], ...MapMouseEvent }) => any",signature:{arguments:[{name:"event",type:{name:"signature",type:"object",raw:"{ features?: [], ...MapMouseEvent }",signature:{properties:[{key:"features",value:{name:"tuple",raw:"[]",elements:[],required:!1}},{key:"MapMouseEvent",value:{name:"unknown",required:!0}}]}}}],return:{name:"any"}}},description:"Called when the layer is hovered over.",tags:{callback:[{title:"callback",description:null}],param:[{title:"param",description:"The mouse event.",type:{type:"NameExpression",name:"Object"},name:"event"},{title:"param",description:"The coordinates of the pointer",type:{type:"ArrayType",elements:[{type:"NameExpression",name:"Number"},{type:"NameExpression",name:"Number"}]},name:"event.lngLat"},{title:"param",description:"The features under the pointer,\nusing Mapbox's queryRenderedFeatures API:\nhttps://www.mapbox.com/mapbox-gl-js/api/#Map#queryRenderedFeatures",type:{type:"NameExpression",name:"Array"},name:"event.features"}]},name:"onHover"},{required:!1,flowType:{name:"signature",type:"function",raw:"(event: { features?: [], ...MapMouseEvent }) => any",signature:{arguments:[{name:"event",type:{name:"signature",type:"object",raw:"{ features?: [], ...MapMouseEvent }",signature:{properties:[{key:"features",value:{name:"tuple",raw:"[]",elements:[],required:!1}},{key:"MapMouseEvent",value:{name:"unknown",required:!0}}]}}}],return:{name:"any"}}},description:"Called when the layer feature is leaved.",tags:{callback:[{title:"callback",description:null}],param:[{title:"param",description:"The mouse event.",type:{type:"NameExpression",name:"Object"},name:"event"},{title:"param",description:"The coordinates of the pointer",type:{type:"ArrayType",elements:[{type:"NameExpression",name:"Number"},{type:"NameExpression",name:"Number"}]},name:"event.lngLat"},{title:"param",description:"The features under the pointer,\nusing Mapbox's queryRenderedFeatures API:\nhttps://www.mapbox.com/mapbox-gl-js/api/#Map#queryRenderedFeatures",type:{type:"NameExpression",name:"Array"},name:"event.features"}]},name:"onLeave"},{required:!1,flowType:{name:"number"},description:"Radius to detect features around a clicked/hovered point",defaultValue:{value:"0",computed:!1},tags:{},name:"radius"}],composes:["LayerSpecification"],doclets:{},examples:n(457)}},function(e,t,n){var r={react:n(1),"@urbica/react-map-gl":n(52),"mapbox-gl/dist/mapbox-gl.css":n(49),"./index.js":n(92)},i=n(44).default.bind(null,r),o=n(45).default.bind(null,"const React$0 = require('react');\nconst React = React$0.default || React$0;\nconst Layer$0 = require('./index.js');\nconst Layer = Layer$0.default || Layer$0;",i);e.exports=[{type:"markdown",content:'[Layers](https://docs.mapbox.com/mapbox-gl-js/style-spec/#layers) specify the Sources styles. The type of layer is specified by the `"type"` property, and must be one of `background`, `fill`, `line`, `symbol`, `raster`, `circle`, `fill-extrusion`, `heatmap`, `hillshade`.\n\nExcept for layers of the `background` type, each layer needs to refer to a source. Layers take the data that they get from a source, optionally filter features, and then define how those features are styled.'},{type:"code",content:"import React from 'react';\nimport MapGL, { Source, Layer } from '@urbica/react-map-gl';\nimport 'mapbox-gl/dist/mapbox-gl.css';\n\ninitialState = {\n  viewport: {\n    latitude: 37.753574,\n    longitude: -122.447303,\n    zoom: 13\n  }\n};\n\n<MapGL\n  style={{ width: '100%', height: '400px' }}\n  mapStyle='mapbox://styles/mapbox/light-v9'\n  accessToken={MAPBOX_ACCESS_TOKEN}\n  onViewportChange={viewport => setState({ viewport })}\n  {...state.viewport}\n>\n  <Source id='contours' type='vector' url='mapbox://mapbox.mapbox-terrain-v2' />\n  <Layer\n    id='contours'\n    type='line'\n    source='contours'\n    source-layer='contour'\n    paint={{\n      'line-color': '#877b59',\n      'line-width': 1\n    }}\n  />\n</MapGL>;",settings:{},evalInContext:o},{type:"markdown",content:"## Layer ordering\n\nYou can add the `before` prop with the id of an existing layer to insert the new layer before. If this prop is omitted, the layer will be appended to the end of the layers array."},{type:"code",content:"import React from 'react';\nimport MapGL, { Source, Layer } from '@urbica/react-map-gl';\nimport 'mapbox-gl/dist/mapbox-gl.css';\n\ninitialState = {\n  viewport: {\n    latitude: 40.6892,\n    longitude: -74.5447,\n    zoom: 8\n  }\n};\n\n<MapGL\n  style={{ width: '100%', height: '400px' }}\n  mapStyle='mapbox://styles/mapbox/light-v9'\n  accessToken={MAPBOX_ACCESS_TOKEN}\n  onViewportChange={viewport => setState({ viewport })}\n  {...state.viewport}\n>\n  <Source\n    id='wms-test-layer'\n    type='raster'\n    tileSize={256}\n    tiles={[\n      'https://geodata.state.nj.us/imagerywms/Natural2015?bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&srs=EPSG:3857&transparent=true&width=256&height=256&layers=Natural2015'\n    ]}\n  />\n  <Layer\n    id='wms-test-layer'\n    type='raster'\n    source='wms-test-layer'\n    before='aeroway-taxiway'\n  />\n</MapGL>;",settings:{},evalInContext:o}]},function(e,t,n){e.exports={description:"Custom layers allow a user to render directly into the map's GL context\nusing the map's camera.\n",displayName:"CustomLayer",methods:[],props:[{required:!0,flowType:{name:"CustomLayerInterface"},description:"Mapbox GL Custom Layer instance",tags:{},name:"layer"},{required:!1,flowType:{name:"string"},description:"The id of an existing layer to insert the new layer before.",tags:{},name:"before"}],doclets:{},tags:{},examples:n(459)}},function(e,t,n){var r={"@deck.gl/mapbox":n(492),"@deck.gl/layers":n(491),"@urbica/react-map-gl":n(52),"mapbox-gl/dist/mapbox-gl.css":n(49),react:n(1),"./index.js":n(134)},i=n(44).default.bind(null,r),o=n(45).default.bind(null,"const React$0 = require('react');\nconst React = React$0.default || React$0;\nconst CustomLayer$0 = require('./index.js');\nconst CustomLayer = CustomLayer$0.default || CustomLayer$0;",i);e.exports=[{type:"markdown",content:"[Custom layers](https://docs.mapbox.com/mapbox-gl-js/api/#customlayerinterface) allow a user to render directly into the map's GL context using the map's camera.\n\nHere is an Uber [deck.gl](https://github.com/uber/deck.gl) usage example."},{type:"code",content:"import { MapboxLayer } from '@deck.gl/mapbox';\nimport { ScatterplotLayer } from '@deck.gl/layers';\nimport MapGL, { CustomLayer } from '@urbica/react-map-gl';\nimport 'mapbox-gl/dist/mapbox-gl.css';\n\nconst myDeckLayer = new MapboxLayer({\n  id: 'my-scatterplot',\n  type: ScatterplotLayer,\n  data: [{ position: [-74.5, 40], size: 1000 }],\n  getPosition: d => d.position,\n  getRadius: d => d.size,\n  getColor: [255, 0, 0]\n});\n\n<MapGL\n  style={{ width: '100%', height: '400px' }}\n  mapStyle='mapbox://styles/mapbox/light-v9'\n  accessToken={MAPBOX_ACCESS_TOKEN}\n  latitude={40}\n  longitude={-74.5}\n  zoom={9}\n>\n  <CustomLayer layer={myDeckLayer} />\n</MapGL>;",settings:{},evalInContext:o}]},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){(function(e){var r=Object.getOwnPropertyDescriptors||function getOwnPropertyDescriptors(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++)n[t[r]]=Object.getOwnPropertyDescriptor(e,t[r]);return n},i=/%[sdj%]/g;t.format=function(e){if(!isString(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(inspect(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,o=r.length,a=String(e).replace(i,function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}}),s=r[n];n<o;s=r[++n])isNull(s)||!isObject(s)?a+=" "+s:a+=" "+inspect(s);return a},t.deprecate=function(n,r){if(void 0!==e&&!0===e.noDeprecation)return n;if(void 0===e)return function(){return t.deprecate(n,r).apply(this,arguments)};var i=!1;return function deprecated(){if(!i){if(e.throwDeprecation)throw new Error(r);e.traceDeprecation?console.trace(r):console.error(r),i=!0}return n.apply(this,arguments)}};var o,a={};function inspect(e,n){var r={seen:[],stylize:stylizeNoColor};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),isBoolean(n)?r.showHidden=n:n&&t._extend(r,n),isUndefined(r.showHidden)&&(r.showHidden=!1),isUndefined(r.depth)&&(r.depth=2),isUndefined(r.colors)&&(r.colors=!1),isUndefined(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=stylizeWithColor),formatValue(r,e,r.depth)}function stylizeWithColor(e,t){var n=inspect.styles[t];return n?"["+inspect.colors[n][0]+"m"+e+"["+inspect.colors[n][1]+"m":e}function stylizeNoColor(e,t){return e}function arrayToHash(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}function formatValue(e,n,r){if(e.customInspect&&n&&isFunction(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,e);return isString(i)||(i=formatValue(e,i,r)),i}var o=formatPrimitive(e,n);if(o)return o;var a=Object.keys(n),s=arrayToHash(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(n)),isError(n)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return formatError(n);if(0===a.length){if(isFunction(n)){var l=n.name?": "+n.name:"";return e.stylize("[Function"+l+"]","special")}if(isRegExp(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(isDate(n))return e.stylize(Date.prototype.toString.call(n),"date");if(isError(n))return formatError(n)}var u,c="",p=!1,h=["{","}"];(isArray(n)&&(p=!0,h=["[","]"]),isFunction(n))&&(c=" [Function"+(n.name?": "+n.name:"")+"]");return isRegExp(n)&&(c=" "+RegExp.prototype.toString.call(n)),isDate(n)&&(c=" "+Date.prototype.toUTCString.call(n)),isError(n)&&(c=" "+formatError(n)),0!==a.length||p&&0!=n.length?r<0?isRegExp(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),u=p?formatArray(e,n,r,s,a):a.map(function(t){return formatProperty(e,n,r,s,t,p)}),e.seen.pop(),reduceToSingleString(u,c,h)):h[0]+c+h[1]}function formatPrimitive(e,t){if(isUndefined(t))return e.stylize("undefined","undefined");if(isString(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return isNumber(t)?e.stylize(""+t,"number"):isBoolean(t)?e.stylize(""+t,"boolean"):isNull(t)?e.stylize("null","null"):void 0}function formatError(e){return"["+Error.prototype.toString.call(e)+"]"}function formatArray(e,t,n,r,i){for(var o=[],a=0,s=t.length;a<s;++a)hasOwnProperty(t,String(a))?o.push(formatProperty(e,t,n,r,String(a),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(formatProperty(e,t,n,r,i,!0))}),o}function formatProperty(e,t,n,r,i,o){var a,s,l;if((l=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?s=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(s=e.stylize("[Setter]","special")),hasOwnProperty(r,i)||(a="["+i+"]"),s||(e.seen.indexOf(l.value)<0?(s=isNull(n)?formatValue(e,l.value,null):formatValue(e,l.value,n-1)).indexOf("\n")>-1&&(s=o?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n")):s=e.stylize("[Circular]","special")),isUndefined(a)){if(o&&i.match(/^\d+$/))return s;(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function reduceToSingleString(e,t,n){return e.reduce(function(e,t){return 0,t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function isArray(e){return Array.isArray(e)}function isBoolean(e){return"boolean"==typeof e}function isNull(e){return null===e}function isNumber(e){return"number"==typeof e}function isString(e){return"string"==typeof e}function isUndefined(e){return void 0===e}function isRegExp(e){return isObject(e)&&"[object RegExp]"===objectToString(e)}function isObject(e){return"object"==typeof e&&null!==e}function isDate(e){return isObject(e)&&"[object Date]"===objectToString(e)}function isError(e){return isObject(e)&&("[object Error]"===objectToString(e)||e instanceof Error)}function isFunction(e){return"function"==typeof e}function objectToString(e){return Object.prototype.toString.call(e)}function pad(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(n){if(isUndefined(o)&&(o=e.env.NODE_DEBUG||""),n=n.toUpperCase(),!a[n])if(new RegExp("\\b"+n+"\\b","i").test(o)){var r=e.pid;a[n]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",n,r,e)}}else a[n]=function(){};return a[n]},t.inspect=inspect,inspect.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},inspect.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=isArray,t.isBoolean=isBoolean,t.isNull=isNull,t.isNullOrUndefined=function isNullOrUndefined(e){return null==e},t.isNumber=isNumber,t.isString=isString,t.isSymbol=function isSymbol(e){return"symbol"==typeof e},t.isUndefined=isUndefined,t.isRegExp=isRegExp,t.isObject=isObject,t.isDate=isDate,t.isError=isError,t.isFunction=isFunction,t.isPrimitive=function isPrimitive(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=n(464);var s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function hasOwnProperty(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){var e,n;console.log("%s - %s",(e=new Date,n=[pad(e.getHours()),pad(e.getMinutes()),pad(e.getSeconds())].join(":"),[e.getDate(),s[e.getMonth()],n].join(" ")),t.format.apply(t,arguments))},t.inherits=n(465),t._extend=function(e,t){if(!t||!isObject(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e};var l="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function callbackifyOnRejected(e,t){if(!e){var n=new Error("Promise was rejected with a falsy value");n.reason=e,e=n}return t(e)}t.promisify=function promisify(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(l&&e[l]){var t;if("function"!=typeof(t=e[l]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,l,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,n,r=new Promise(function(e,r){t=e,n=r}),i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);i.push(function(e,r){e?n(e):t(r)});try{e.apply(this,i)}catch(e){n(e)}return r}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),l&&Object.defineProperty(t,l,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,r(e))},t.promisify.custom=l,t.callbackify=function callbackify(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function callbackified(){for(var n=[],r=0;r<arguments.length;r++)n.push(arguments[r]);var i=n.pop();if("function"!=typeof i)throw new TypeError("The last argument must be of type Function");var o=this,a=function(){return i.apply(o,arguments)};t.apply(this,n).then(function(t){e.nextTick(a,null,t)},function(t){e.nextTick(callbackifyOnRejected,t,a)})}return Object.setPrototypeOf(callbackified,Object.getPrototypeOf(t)),Object.defineProperties(callbackified,r(t)),callbackified}}).call(this,n(66))},function(e,t){e.exports=function isBuffer(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t){"function"==typeof Object.create?e.exports=function inherits(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function inherits(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){e.exports=n(467)},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function installDebugger(){(0,r.installParameterDefinitions)(),console.log("luma.gl: WebGL debug support installed")};var r=n(468),i=n(471);(void 0!==e?e:window).WebGLDebug=i,console.log("luma.gl: WebGL debug support imported")}).call(this,n(31))},function(e,t,n){"use strict";var r=n(469);Object.defineProperty(t,"__esModule",{value:!0}),t.installParameterDefinitions=function installParameterDefinitions(){},t.TEXTURE_PARAMETERS=t.SAMPLER_PARAMETERS=t.RENDERBUFFER_PARAMETERS=t.PROGRAM_PARAMETERS=t.FRAMEBUFFER_STATUS=t.FRAMEBUFFER_ATTACHMENT_PARAMETERS=t.FENCE_SYNC_PARAMETERS=t.BUFFER_PARAMETERS=t.GLboolean=t.GLuint=t.GLint=t.GLfloat=t.GLenum=void 0;var i,o,a,s,l,u,c=r(n(470));t.GLenum="GLenum";t.GLfloat="GLfloat";t.GLint="GLint";t.GLuint="GLint";t.GLboolean="GLboolean";var p=(i={},(0,c.default)(i,34660,{webgl1:0}),(0,c.default)(i,34661,{webgl1:0}),i);t.BUFFER_PARAMETERS=p;t.FENCE_SYNC_PARAMETERS=[37138,37140,37139,37141];t.FRAMEBUFFER_ATTACHMENT_PARAMETERS=[36049,36048,36051,36050,33296,36052,33298,33299,33300,33301,33302,33303,33297];var h=(o={},(0,c.default)(o,36053,"Success. Framebuffer is correctly set up"),(0,c.default)(o,36054,"Framebuffer attachment types mismatched or some attachment point not attachment complete"),(0,c.default)(o,36055,"Framebuffer has no attachment"),(0,c.default)(o,36057,"Framebuffer attachments do not have the same size"),(0,c.default)(o,36061,"Framebuffer attachment format not supported or depth and stencil attachments are not same"),(0,c.default)(o,36182,"Framebuffer attachement SAMPLES differs among renderbuffers, or are mixed with textures"),o);t.FRAMEBUFFER_STATUS=h;var f=(a={},(0,c.default)(a,35712,{webgl1:0}),(0,c.default)(a,35714,{webgl1:0}),(0,c.default)(a,35715,{webgl1:0}),(0,c.default)(a,35717,{webgl1:0}),(0,c.default)(a,35721,{webgl1:0}),(0,c.default)(a,35718,{webgl1:0}),(0,c.default)(a,35967,{webgl2:0}),(0,c.default)(a,35971,{webgl2:0}),(0,c.default)(a,35382,{webgl2:0}),a);t.PROGRAM_PARAMETERS=f;var d=(s={},(0,c.default)(s,36162,{webgl1:0}),(0,c.default)(s,36163,{webgl1:0}),(0,c.default)(s,36164,{type:"GLenum",webgl1:32854}),(0,c.default)(s,36177,{webgl1:0}),(0,c.default)(s,36178,{webgl1:0}),(0,c.default)(s,36176,{webgl1:0}),(0,c.default)(s,36179,{webgl1:0}),(0,c.default)(s,36180,{webgl1:0}),(0,c.default)(s,36181,{webgl1:0}),(0,c.default)(s,36011,{webgl2:1}),s);t.RENDERBUFFER_PARAMETERS=d;var g=(l={},(0,c.default)(l,10240,{webgl2:!0}),(0,c.default)(l,10241,{webgl2:!0}),(0,c.default)(l,10242,{webgl2:!0}),(0,c.default)(l,10243,{webgl2:!0}),(0,c.default)(l,32882,{webgl2:!0}),(0,c.default)(l,33084,{webgl2:!0}),(0,c.default)(l,33085,{webgl2:!0}),(0,c.default)(l,34893,{webgl2:!0}),(0,c.default)(l,34892,{webgl2:!0}),(0,c.default)(l,33082,{webgl2:!0}),(0,c.default)(l,33083,{webgl2:!0}),l);t.SAMPLER_PARAMETERS=g;var m=(u={},(0,c.default)(u,10240,{type:"GLenum",webgl1:9729}),(0,c.default)(u,10241,{type:"GLenum",webgl1:9986}),(0,c.default)(u,10242,{type:"GLenum",webgl1:10497}),(0,c.default)(u,10243,{type:"GLenum",webgl1:10497}),(0,c.default)(u,32882,{type:"GLenum",webgl2:10497}),(0,c.default)(u,33084,{webgl2:0}),(0,c.default)(u,33085,{webgl2:1e3}),(0,c.default)(u,34893,{type:"GLenum",webgl2:515}),(0,c.default)(u,34892,{type:"GLenum",webgl2:0}),(0,c.default)(u,33082,{webgl2:-1e3}),(0,c.default)(u,33083,{webgl2:1e3}),(0,c.default)(u,4096,{webgl1:0}),(0,c.default)(u,4097,{webgl1:0}),u);t.TEXTURE_PARAMETERS=m},function(e,t){e.exports=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}},function(e,t){e.exports=function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){(function(t){WebGLDebugUtils=function(){var e;void 0===e&&(e=t);var n=function(t){e.console&&e.console.log&&e.console.log(t)},r=function(t){e.console&&e.console.error?e.console.error(t):n(t)},i={enable:{1:{0:!0}},disable:{1:{0:!0}},getParameter:{1:{0:!0}},drawArrays:{3:{0:!0}},drawElements:{4:{0:!0,2:!0}},createShader:{1:{0:!0}},getShaderParameter:{2:{1:!0}},getProgramParameter:{2:{1:!0}},getShaderPrecisionFormat:{2:{0:!0,1:!0}},getVertexAttrib:{2:{1:!0}},vertexAttribPointer:{6:{2:!0}},bindTexture:{2:{0:!0}},activeTexture:{1:{0:!0}},getTexParameter:{2:{0:!0,1:!0}},texParameterf:{3:{0:!0,1:!0}},texParameteri:{3:{0:!0,1:!0,2:!0}},copyTexImage2D:{8:{0:!0,2:!0}},copyTexSubImage2D:{8:{0:!0}},generateMipmap:{1:{0:!0}},bindBuffer:{2:{0:!0}},getBufferParameter:{2:{0:!0,1:!0}},pixelStorei:{2:{0:!0,1:!0}},bindRenderbuffer:{2:{0:!0}},bindFramebuffer:{2:{0:!0}},checkFramebufferStatus:{1:{0:!0}},framebufferRenderbuffer:{4:{0:!0,1:!0,2:!0}},framebufferTexture2D:{5:{0:!0,1:!0,2:!0}},getFramebufferAttachmentParameter:{3:{0:!0,1:!0,2:!0}},getRenderbufferParameter:{2:{0:!0,1:!0}},renderbufferStorage:{4:{0:!0,1:!0}},clear:{1:{0:{enumBitwiseOr:["COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","STENCIL_BUFFER_BIT"]}}},depthFunc:{1:{0:!0}},blendFunc:{2:{0:!0,1:!0}},blendFuncSeparate:{4:{0:!0,1:!0,2:!0,3:!0}},blendEquation:{1:{0:!0}},blendEquationSeparate:{2:{0:!0,1:!0}},stencilFunc:{3:{0:!0}},stencilFuncSeparate:{4:{0:!0,1:!0}},stencilMaskSeparate:{2:{0:!0}},stencilOp:{3:{0:!0,1:!0,2:!0}},stencilOpSeparate:{4:{0:!0,1:!0,2:!0,3:!0}},cullFace:{1:{0:!0}},frontFace:{1:{0:!0}},drawArraysInstancedANGLE:{4:{0:!0}},drawElementsInstancedANGLE:{5:{0:!0,2:!0}},blendEquationEXT:{1:{0:!0}},bufferData:{3:{0:!0,2:!0},4:{0:!0,2:!0},5:{0:!0,2:!0}},bufferSubData:{3:{0:!0},4:{0:!0},5:{0:!0}},copyBufferSubData:{5:{0:!0,1:!0}},getBufferSubData:{3:{0:!0},4:{0:!0},5:{0:!0}},blitFramebuffer:{10:{8:{enumBitwiseOr:["COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","STENCIL_BUFFER_BIT"]},9:!0}},framebufferTextureLayer:{5:{0:!0,1:!0}},invalidateFramebuffer:{2:{0:!0}},invalidateSubFramebuffer:{6:{0:!0}},readBuffer:{1:{0:!0}},getInternalformatParameter:{3:{0:!0,1:!0,2:!0}},renderbufferStorageMultisample:{5:{0:!0,2:!0}},texStorage2D:{5:{0:!0,2:!0}},texStorage3D:{6:{0:!0,2:!0}},texImage2D:{9:{0:!0,2:!0,6:!0,7:!0},6:{0:!0,2:!0,3:!0,4:!0},10:{0:!0,2:!0,6:!0,7:!0}},texImage3D:{10:{0:!0,2:!0,7:!0,8:!0},11:{0:!0,2:!0,7:!0,8:!0}},texSubImage2D:{9:{0:!0,6:!0,7:!0},7:{0:!0,4:!0,5:!0},10:{0:!0,6:!0,7:!0}},texSubImage3D:{11:{0:!0,8:!0,9:!0},12:{0:!0,8:!0,9:!0}},copyTexSubImage3D:{9:{0:!0}},compressedTexImage2D:{7:{0:!0,2:!0},8:{0:!0,2:!0},9:{0:!0,2:!0}},compressedTexImage3D:{8:{0:!0,2:!0},9:{0:!0,2:!0},10:{0:!0,2:!0}},compressedTexSubImage2D:{8:{0:!0,6:!0},9:{0:!0,6:!0},10:{0:!0,6:!0}},compressedTexSubImage3D:{10:{0:!0,8:!0},11:{0:!0,8:!0},12:{0:!0,8:!0}},vertexAttribIPointer:{5:{2:!0}},drawArraysInstanced:{4:{0:!0}},drawElementsInstanced:{5:{0:!0,2:!0}},drawRangeElements:{6:{0:!0,4:!0}},readPixels:{7:{4:!0,5:!0},8:{4:!0,5:!0}},clearBufferfv:{3:{0:!0},4:{0:!0}},clearBufferiv:{3:{0:!0},4:{0:!0}},clearBufferuiv:{3:{0:!0},4:{0:!0}},clearBufferfi:{4:{0:!0}},beginQuery:{2:{0:!0}},endQuery:{1:{0:!0}},getQuery:{2:{0:!0,1:!0}},getQueryParameter:{2:{1:!0}},samplerParameteri:{3:{1:!0,2:!0}},samplerParameterf:{3:{1:!0}},getSamplerParameter:{2:{1:!0}},fenceSync:{2:{0:!0,1:{enumBitwiseOr:[]}}},clientWaitSync:{3:{1:{enumBitwiseOr:["SYNC_FLUSH_COMMANDS_BIT"]}}},waitSync:{3:{1:{enumBitwiseOr:[]}}},getSyncParameter:{2:{1:!0}},bindTransformFeedback:{2:{0:!0}},beginTransformFeedback:{1:{0:!0}},transformFeedbackVaryings:{3:{2:!0}},bindBufferBase:{3:{0:!0}},bindBufferRange:{5:{0:!0}},getIndexedParameter:{2:{0:!0}},getActiveUniforms:{3:{2:!0}},getActiveUniformBlockParameter:{3:{2:!0}}},o=null,a=null;function init(e){if(null==o)for(var t in o={},a={},e)"number"==typeof e[t]&&(o[e[t]]=t,a[t]=e[t])}function checkInit(){if(null==o)throw"WebGLDebugUtils.init(ctx) not called"}function glEnumToString(e){checkInit();var t=o[e];return void 0!==t?"gl."+t:"/*UNKNOWN WebGL ENUM*/ 0x"+e.toString(16)}function glFunctionArgToString(e,t,n,r){var o;if(void 0!==(o=i[e])&&(void 0!==(o=o[t])&&o[n])){if("object"==typeof o[n]&&void 0!==o[n].enumBitwiseOr){for(var s=o[n].enumBitwiseOr,l=0,u=[],c=0;c<s.length;++c){var p=a[s[c]];0!=(r&p)&&(l|=p,u.push(glEnumToString(p)))}return l===r?u.join(" | "):glEnumToString(r)}return glEnumToString(r)}return null===r?"null":void 0===r?"undefined":r.toString()}function makePropertyWrapper(e,t,n){e.__defineGetter__(n,function(){return t[n]}),e.__defineSetter__(n,function(e){t[n]=e})}function resetToInitialState(e){var t=!!e.createTransformFeedback;t&&e.bindVertexArray(null);var n=e.getParameter(e.MAX_VERTEX_ATTRIBS),r=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,r);for(var i=0;i<n;++i)e.disableVertexAttribArray(i),e.vertexAttribPointer(i,4,e.FLOAT,!1,0,0),e.vertexAttrib1f(i,0),t&&e.vertexAttribDivisor(i,0);e.deleteBuffer(r);var o=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);for(i=0;i<o;++i)e.activeTexture(e.TEXTURE0+i),e.bindTexture(e.TEXTURE_CUBE_MAP,null),e.bindTexture(e.TEXTURE_2D,null),t&&(e.bindTexture(e.TEXTURE_2D_ARRAY,null),e.bindTexture(e.TEXTURE_3D,null),e.bindSampler(i,null));if(e.activeTexture(e.TEXTURE0),e.useProgram(null),e.bindBuffer(e.ARRAY_BUFFER,null),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindRenderbuffer(e.RENDERBUFFER,null),e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.DITHER),e.disable(e.SCISSOR_TEST),e.blendColor(0,0,0,0),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.clearColor(0,0,0,0),e.clearDepth(1),e.clearStencil(-1),e.colorMask(!0,!0,!0,!0),e.cullFace(e.BACK),e.depthFunc(e.LESS),e.depthMask(!0),e.depthRange(0,1),e.frontFace(e.CCW),e.hint(e.GENERATE_MIPMAP_HINT,e.DONT_CARE),e.lineWidth(1),e.pixelStorei(e.PACK_ALIGNMENT,4),e.pixelStorei(e.UNPACK_ALIGNMENT,4),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),e.UNPACK_COLORSPACE_CONVERSION_WEBGL&&e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.BROWSER_DEFAULT_WEBGL),e.polygonOffset(0,0),e.sampleCoverage(1,!1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.stencilFunc(e.ALWAYS,0,4294967295),e.stencilMask(4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.viewport(0,0,e.canvas.width,e.canvas.height),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT|e.STENCIL_BUFFER_BIT),t){e.drawBuffers([e.BACK]),e.readBuffer(e.BACK),e.bindBuffer(e.COPY_READ_BUFFER,null),e.bindBuffer(e.COPY_WRITE_BUFFER,null),e.bindBuffer(e.PIXEL_PACK_BUFFER,null),e.bindBuffer(e.PIXEL_UNPACK_BUFFER,null);var a=e.getParameter(e.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS);for(i=0;i<a;++i)e.bindBufferBase(e.TRANSFORM_FEEDBACK_BUFFER,i,null);var s=e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS);for(i=0;i<s;++i)e.bindBufferBase(e.UNIFORM_BUFFER,i,null);e.disable(e.RASTERIZER_DISCARD),e.pixelStorei(e.UNPACK_IMAGE_HEIGHT,0),e.pixelStorei(e.UNPACK_SKIP_IMAGES,0),e.pixelStorei(e.UNPACK_ROW_LENGTH,0),e.pixelStorei(e.UNPACK_SKIP_ROWS,0),e.pixelStorei(e.UNPACK_SKIP_PIXELS,0),e.pixelStorei(e.PACK_ROW_LENGTH,0),e.pixelStorei(e.PACK_SKIP_ROWS,0),e.pixelStorei(e.PACK_SKIP_PIXELS,0),e.hint(e.FRAGMENT_SHADER_DERIVATIVE_HINT,e.DONT_CARE)}for(;e.getError(););}return{init:init,mightBeEnum:function mightBeEnum(e){return checkInit(),void 0!==o[e]},glEnumToString:glEnumToString,glFunctionArgToString:glFunctionArgToString,glFunctionArgsToString:function glFunctionArgsToString(e,t){for(var n="",r=t.length,i=0;i<r;++i)n+=(0==i?"":", ")+glFunctionArgToString(e,r,i,t[i]);return n},makeDebugContext:function makeDebugContext(e,t,n,i){i=i||e,init(e),t=t||function(e,t,n){for(var i="",o=n.length,a=0;a<o;++a)i+=(0==a?"":", ")+glFunctionArgToString(t,o,a,n[a]);r("WebGL error "+glEnumToString(e)+" in "+t+"("+i+")")};var o={};function makeErrorWrapper(e,r){return function(){n&&n(r,arguments);var a=e[r].apply(e,arguments),s=i.getError();return 0!=s&&(o[s]=!0,t(s,r,arguments)),a}}var a={};for(var s in e)if("function"==typeof e[s])if("getExtension"!=s)a[s]=makeErrorWrapper(e,s);else{var l=makeErrorWrapper(e,s);a[s]=function(){var r=l.apply(e,arguments);return r?makeDebugContext(r,t,n,i):null}}else makePropertyWrapper(a,e,s);return a.getError=function(){for(var t in o)if(o.hasOwnProperty(t)&&o[t])return o[t]=!1,t;return e.NO_ERROR},a},makeLostContextSimulatingCanvas:function makeLostContextSimulatingCanvas(t){var n,r,i,o=[],a=[],s={},l=1,u=!1,c=[],p=0,h=0,f=!1,d=0,g={};function wrapEvent(e){return"function"==typeof e?e:function(t){e.handleEvent(t)}}t.getContext=(i=t.getContext,function(){var o=i.apply(t,arguments);if(o instanceof WebGLRenderingContext||e.WebGL2RenderingContext&&o instanceof WebGL2RenderingContext){if(o!=n){if(n)throw"got different context";r=e.WebGL2RenderingContext&&o instanceof WebGL2RenderingContext,s=makeLostContextSimulatingContext(n=o)}return s}return o});var m=function(e){o.push(wrapEvent(e))},y=function(e){a.push(wrapEvent(e))};function clearErrors(){for(var e=Object.keys(g),t=0;t<e.length;++t)delete g[e[t]]}function loseContextIfTime(){++h,u||p==h&&t.loseContext()}function makeLostContextFunctionWrapper(e,t){var n=e[t];return function(){if(loseContextIfTime(),!u)return n.apply(e,arguments)}}function freeResources(){for(var e=0;e<c.length;++e){var t=c[e];t instanceof WebGLBuffer?n.deleteBuffer(t):t instanceof WebGLFramebuffer?n.deleteFramebuffer(t):t instanceof WebGLProgram?n.deleteProgram(t):t instanceof WebGLRenderbuffer?n.deleteRenderbuffer(t):t instanceof WebGLShader?n.deleteShader(t):t instanceof WebGLTexture?n.deleteTexture(t):r&&(t instanceof WebGLQuery?n.deleteQuery(t):t instanceof WebGLSampler?n.deleteSampler(t):t instanceof WebGLSync?n.deleteSync(t):t instanceof WebGLTransformFeedback?n.deleteTransformFeedback(t):t instanceof WebGLVertexArrayObject&&n.deleteVertexArray(t))}}function makeWebGLContextEvent(e){return{statusMessage:e,preventDefault:function(){f=!0}}}return function wrapAddEventListener(e){var t=e.addEventListener;e.addEventListener=function(n,r,i){switch(n){case"webglcontextlost":m(r);break;case"webglcontextrestored":y(r);break;default:t.apply(e,arguments)}}}(t),t.loseContext=function(){if(!u){for(u=!0,p=0,++l;n.getError(););clearErrors(),g[n.CONTEXT_LOST_WEBGL]=!0;var e=makeWebGLContextEvent("context lost"),r=o.slice();setTimeout(function(){for(var n=0;n<r.length;++n)r[n](e);d>=0&&setTimeout(function(){t.restoreContext()},d)},0)}},t.restoreContext=function(){u&&a.length&&setTimeout(function(){if(!f)throw"can not restore. webglcontestlost listener did not call event.preventDefault";freeResources(),resetToInitialState(n),u=!1,h=0,f=!1;for(var e=a.slice(),t=makeWebGLContextEvent("context restored"),r=0;r<e.length;++r)e[r](t)},0)},t.loseContextInNCalls=function(e){if(u)throw"You can not ask a lost contet to be lost";p=h+e},t.getNumCalls=function(){return h},t.setRestoreTimeout=function(e){d=e},t;function makeLostContextSimulatingContext(e){for(var t in e)"function"==typeof e[t]?s[t]=makeLostContextFunctionWrapper(e,t):makePropertyWrapper(s,e,t);s.getError=function(){if(loseContextIfTime(),!u)for(;e=n.getError();)g[e]=!0;for(var e in g)if(g[e])return delete g[e],e;return s.NO_ERROR};var i=["createBuffer","createFramebuffer","createProgram","createRenderbuffer","createShader","createTexture"];r&&i.push("createQuery","createSampler","fenceSync","createTransformFeedback","createVertexArray");for(var o=0;o<i.length;++o){var a=i[o];s[a]=function(t){return function(){if(loseContextIfTime(),u)return null;var n=t.apply(e,arguments);return n.__webglDebugContextLostId__=l,c.push(n),n}}(e[a])}var p=["getActiveAttrib","getActiveUniform","getBufferParameter","getContextAttributes","getAttachedShaders","getFramebufferAttachmentParameter","getParameter","getProgramParameter","getProgramInfoLog","getRenderbufferParameter","getShaderParameter","getShaderInfoLog","getShaderSource","getTexParameter","getUniform","getUniformLocation","getVertexAttrib"];for(r&&p.push("getInternalformatParameter","getQuery","getQueryParameter","getSamplerParameter","getSyncParameter","getTransformFeedbackVarying","getIndexedParameter","getUniformIndices","getActiveUniforms","getActiveUniformBlockParameter","getActiveUniformBlockName"),o=0;o<p.length;++o)a=p[o],s[a]=function(t){return function(){return loseContextIfTime(),u?null:t.apply(e,arguments)}}(s[a]);var h,f=["isBuffer","isEnabled","isFramebuffer","isProgram","isRenderbuffer","isShader","isTexture"];for(r&&f.push("isQuery","isSampler","isSync","isTransformFeedback","isVertexArray"),o=0;o<f.length;++o)a=f[o],s[a]=function(t){return function(){return loseContextIfTime(),!u&&t.apply(e,arguments)}}(s[a]);return s.checkFramebufferStatus=(h=s.checkFramebufferStatus,function(){return loseContextIfTime(),u?s.FRAMEBUFFER_UNSUPPORTED:h.apply(e,arguments)}),s.getAttribLocation=function(t){return function(){return loseContextIfTime(),u?-1:t.apply(e,arguments)}}(s.getAttribLocation),s.getVertexAttribOffset=function(t){return function(){return loseContextIfTime(),u?0:t.apply(e,arguments)}}(s.getVertexAttribOffset),s.isContextLost=function(){return u},r&&(s.getFragDataLocation=function(t){return function(){return loseContextIfTime(),u?-1:t.apply(e,arguments)}}(s.getFragDataLocation),s.clientWaitSync=function(t){return function(){return loseContextIfTime(),u?s.WAIT_FAILED:t.apply(e,arguments)}}(s.clientWaitSync),s.getUniformBlockIndex=function(t){return function(){return loseContextIfTime(),u?s.INVALID_INDEX:t.apply(e,arguments)}}(s.getUniformBlockIndex)),s}},resetToInitialState:resetToInitialState}}(),e.exports=WebGLDebugUtils}).call(this,n(31))},function(e,t,n){"use strict";e.exports={DEPTH_BUFFER_BIT:256,STENCIL_BUFFER_BIT:1024,COLOR_BUFFER_BIT:16384,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,ZERO:0,ONE:1,SRC_COLOR:768,ONE_MINUS_SRC_COLOR:769,SRC_ALPHA:770,ONE_MINUS_SRC_ALPHA:771,DST_ALPHA:772,ONE_MINUS_DST_ALPHA:773,DST_COLOR:774,ONE_MINUS_DST_COLOR:775,SRC_ALPHA_SATURATE:776,CONSTANT_COLOR:32769,ONE_MINUS_CONSTANT_COLOR:32770,CONSTANT_ALPHA:32771,ONE_MINUS_CONSTANT_ALPHA:32772,FUNC_ADD:32774,FUNC_SUBTRACT:32778,FUNC_REVERSE_SUBTRACT:32779,BLEND_EQUATION:32777,BLEND_EQUATION_RGB:32777,BLEND_EQUATION_ALPHA:34877,BLEND_DST_RGB:32968,BLEND_SRC_RGB:32969,BLEND_DST_ALPHA:32970,BLEND_SRC_ALPHA:32971,BLEND_COLOR:32773,ARRAY_BUFFER_BINDING:34964,ELEMENT_ARRAY_BUFFER_BINDING:34965,LINE_WIDTH:2849,ALIASED_POINT_SIZE_RANGE:33901,ALIASED_LINE_WIDTH_RANGE:33902,CULL_FACE_MODE:2885,FRONT_FACE:2886,DEPTH_RANGE:2928,DEPTH_WRITEMASK:2930,DEPTH_CLEAR_VALUE:2931,DEPTH_FUNC:2932,STENCIL_CLEAR_VALUE:2961,STENCIL_FUNC:2962,STENCIL_FAIL:2964,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STENCIL_BACK_FUNC:34816,STENCIL_BACK_FAIL:34817,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,VIEWPORT:2978,SCISSOR_BOX:3088,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,UNPACK_ALIGNMENT:3317,PACK_ALIGNMENT:3333,MAX_TEXTURE_SIZE:3379,MAX_VIEWPORT_DIMS:3386,SUBPIXEL_BITS:3408,RED_BITS:3410,GREEN_BITS:3411,BLUE_BITS:3412,ALPHA_BITS:3413,DEPTH_BITS:3414,STENCIL_BITS:3415,POLYGON_OFFSET_UNITS:10752,POLYGON_OFFSET_FACTOR:32824,TEXTURE_BINDING_2D:32873,SAMPLE_BUFFERS:32936,SAMPLES:32937,SAMPLE_COVERAGE_VALUE:32938,SAMPLE_COVERAGE_INVERT:32939,COMPRESSED_TEXTURE_FORMATS:34467,VENDOR:7936,RENDERER:7937,VERSION:7938,IMPLEMENTATION_COLOR_READ_TYPE:35738,IMPLEMENTATION_COLOR_READ_FORMAT:35739,BROWSER_DEFAULT_WEBGL:37444,STATIC_DRAW:35044,STREAM_DRAW:35040,DYNAMIC_DRAW:35048,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,BUFFER_SIZE:34660,BUFFER_USAGE:34661,CURRENT_VERTEX_ATTRIB:34342,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,CULL_FACE:2884,FRONT:1028,BACK:1029,FRONT_AND_BACK:1032,BLEND:3042,DEPTH_TEST:2929,DITHER:3024,POLYGON_OFFSET_FILL:32823,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_COVERAGE:32928,SCISSOR_TEST:3089,STENCIL_TEST:2960,NO_ERROR:0,INVALID_ENUM:1280,INVALID_VALUE:1281,INVALID_OPERATION:1282,OUT_OF_MEMORY:1285,CONTEXT_LOST_WEBGL:37442,CW:2304,CCW:2305,DONT_CARE:4352,FASTEST:4353,NICEST:4354,GENERATE_MIPMAP_HINT:33170,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,DEPTH_COMPONENT:6402,ALPHA:6406,RGB:6407,RGBA:6408,LUMINANCE:6409,LUMINANCE_ALPHA:6410,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,FRAGMENT_SHADER:35632,VERTEX_SHADER:35633,COMPILE_STATUS:35713,DELETE_STATUS:35712,LINK_STATUS:35714,VALIDATE_STATUS:35715,ATTACHED_SHADERS:35717,ACTIVE_ATTRIBUTES:35721,ACTIVE_UNIFORMS:35718,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VARYING_VECTORS:36348,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_FRAGMENT_UNIFORM_VECTORS:36349,SHADER_TYPE:35663,SHADING_LANGUAGE_VERSION:35724,CURRENT_PROGRAM:35725,NEVER:512,ALWAYS:519,LESS:513,EQUAL:514,LEQUAL:515,GREATER:516,GEQUAL:518,NOTEQUAL:517,KEEP:7680,REPLACE:7681,INCR:7682,DECR:7683,INVERT:5386,INCR_WRAP:34055,DECR_WRAP:34056,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TEXTURE_2D:3553,TEXTURE:5890,TEXTURE_CUBE_MAP:34067,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,MAX_CUBE_MAP_TEXTURE_SIZE:34076,TEXTURE0:33984,ACTIVE_TEXTURE:34016,REPEAT:10497,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,TEXTURE_WIDTH:4096,TEXTURE_HEIGHT:4097,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,SAMPLER_2D:35678,SAMPLER_CUBE:35680,LOW_FLOAT:36336,MEDIUM_FLOAT:36337,HIGH_FLOAT:36338,LOW_INT:36339,MEDIUM_INT:36340,HIGH_INT:36341,FRAMEBUFFER:36160,RENDERBUFFER:36161,RGBA4:32854,RGB5_A1:32855,RGB565:36194,DEPTH_COMPONENT16:33189,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,DEPTH_STENCIL:34041,RENDERBUFFER_WIDTH:36162,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_STENCIL_SIZE:36181,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,COLOR_ATTACHMENT0:36064,DEPTH_ATTACHMENT:36096,STENCIL_ATTACHMENT:36128,DEPTH_STENCIL_ATTACHMENT:33306,NONE:0,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_UNSUPPORTED:36061,FRAMEBUFFER_BINDING:36006,RENDERBUFFER_BINDING:36007,READ_FRAMEBUFFER:36008,DRAW_FRAMEBUFFER:36009,MAX_RENDERBUFFER_SIZE:34024,INVALID_FRAMEBUFFER_OPERATION:1286,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,READ_BUFFER:3074,UNPACK_ROW_LENGTH:3314,UNPACK_SKIP_ROWS:3315,UNPACK_SKIP_PIXELS:3316,PACK_ROW_LENGTH:3330,PACK_SKIP_ROWS:3331,PACK_SKIP_PIXELS:3332,TEXTURE_BINDING_3D:32874,UNPACK_SKIP_IMAGES:32877,UNPACK_IMAGE_HEIGHT:32878,MAX_3D_TEXTURE_SIZE:32883,MAX_ELEMENTS_VERTICES:33e3,MAX_ELEMENTS_INDICES:33001,MAX_TEXTURE_LOD_BIAS:34045,MAX_FRAGMENT_UNIFORM_COMPONENTS:35657,MAX_VERTEX_UNIFORM_COMPONENTS:35658,MAX_ARRAY_TEXTURE_LAYERS:35071,MIN_PROGRAM_TEXEL_OFFSET:35076,MAX_PROGRAM_TEXEL_OFFSET:35077,MAX_VARYING_COMPONENTS:35659,FRAGMENT_SHADER_DERIVATIVE_HINT:35723,RASTERIZER_DISCARD:35977,VERTEX_ARRAY_BINDING:34229,MAX_VERTEX_OUTPUT_COMPONENTS:37154,MAX_FRAGMENT_INPUT_COMPONENTS:37157,MAX_SERVER_WAIT_TIMEOUT:37137,MAX_ELEMENT_INDEX:36203,RED:6403,RGB8:32849,RGBA8:32856,RGB10_A2:32857,TEXTURE_3D:32879,TEXTURE_WRAP_R:32882,TEXTURE_MIN_LOD:33082,TEXTURE_MAX_LOD:33083,TEXTURE_BASE_LEVEL:33084,TEXTURE_MAX_LEVEL:33085,TEXTURE_COMPARE_MODE:34892,TEXTURE_COMPARE_FUNC:34893,SRGB:35904,SRGB8:35905,SRGB8_ALPHA8:35907,COMPARE_REF_TO_TEXTURE:34894,RGBA32F:34836,RGB32F:34837,RGBA16F:34842,RGB16F:34843,TEXTURE_2D_ARRAY:35866,TEXTURE_BINDING_2D_ARRAY:35869,R11F_G11F_B10F:35898,RGB9_E5:35901,RGBA32UI:36208,RGB32UI:36209,RGBA16UI:36214,RGB16UI:36215,RGBA8UI:36220,RGB8UI:36221,RGBA32I:36226,RGB32I:36227,RGBA16I:36232,RGB16I:36233,RGBA8I:36238,RGB8I:36239,RED_INTEGER:36244,RGB_INTEGER:36248,RGBA_INTEGER:36249,R8:33321,RG8:33323,R16F:33325,R32F:33326,RG16F:33327,RG32F:33328,R8I:33329,R8UI:33330,R16I:33331,R16UI:33332,R32I:33333,R32UI:33334,RG8I:33335,RG8UI:33336,RG16I:33337,RG16UI:33338,RG32I:33339,RG32UI:33340,R8_SNORM:36756,RG8_SNORM:36757,RGB8_SNORM:36758,RGBA8_SNORM:36759,RGB10_A2UI:36975,TEXTURE_IMMUTABLE_FORMAT:37167,TEXTURE_IMMUTABLE_LEVELS:33503,UNSIGNED_INT_2_10_10_10_REV:33640,UNSIGNED_INT_10F_11F_11F_REV:35899,UNSIGNED_INT_5_9_9_9_REV:35902,FLOAT_32_UNSIGNED_INT_24_8_REV:36269,UNSIGNED_INT_24_8:34042,HALF_FLOAT:5131,RG:33319,RG_INTEGER:33320,INT_2_10_10_10_REV:36255,CURRENT_QUERY:34917,QUERY_RESULT:34918,QUERY_RESULT_AVAILABLE:34919,ANY_SAMPLES_PASSED:35887,ANY_SAMPLES_PASSED_CONSERVATIVE:36202,MAX_DRAW_BUFFERS:34852,DRAW_BUFFER0:34853,DRAW_BUFFER1:34854,DRAW_BUFFER2:34855,DRAW_BUFFER3:34856,DRAW_BUFFER4:34857,DRAW_BUFFER5:34858,DRAW_BUFFER6:34859,DRAW_BUFFER7:34860,DRAW_BUFFER8:34861,DRAW_BUFFER9:34862,DRAW_BUFFER10:34863,DRAW_BUFFER11:34864,DRAW_BUFFER12:34865,DRAW_BUFFER13:34866,DRAW_BUFFER14:34867,DRAW_BUFFER15:34868,MAX_COLOR_ATTACHMENTS:36063,COLOR_ATTACHMENT1:36065,COLOR_ATTACHMENT2:36066,COLOR_ATTACHMENT3:36067,COLOR_ATTACHMENT4:36068,COLOR_ATTACHMENT5:36069,COLOR_ATTACHMENT6:36070,COLOR_ATTACHMENT7:36071,COLOR_ATTACHMENT8:36072,COLOR_ATTACHMENT9:36073,COLOR_ATTACHMENT10:36074,COLOR_ATTACHMENT11:36075,COLOR_ATTACHMENT12:36076,COLOR_ATTACHMENT13:36077,COLOR_ATTACHMENT14:36078,COLOR_ATTACHMENT15:36079,SAMPLER_3D:35679,SAMPLER_2D_SHADOW:35682,SAMPLER_2D_ARRAY:36289,SAMPLER_2D_ARRAY_SHADOW:36292,SAMPLER_CUBE_SHADOW:36293,INT_SAMPLER_2D:36298,INT_SAMPLER_3D:36299,INT_SAMPLER_CUBE:36300,INT_SAMPLER_2D_ARRAY:36303,UNSIGNED_INT_SAMPLER_2D:36306,UNSIGNED_INT_SAMPLER_3D:36307,UNSIGNED_INT_SAMPLER_CUBE:36308,UNSIGNED_INT_SAMPLER_2D_ARRAY:36311,MAX_SAMPLES:36183,SAMPLER_BINDING:35097,PIXEL_PACK_BUFFER:35051,PIXEL_UNPACK_BUFFER:35052,PIXEL_PACK_BUFFER_BINDING:35053,PIXEL_UNPACK_BUFFER_BINDING:35055,COPY_READ_BUFFER:36662,COPY_WRITE_BUFFER:36663,COPY_READ_BUFFER_BINDING:36662,COPY_WRITE_BUFFER_BINDING:36663,FLOAT_MAT2x3:35685,FLOAT_MAT2x4:35686,FLOAT_MAT3x2:35687,FLOAT_MAT3x4:35688,FLOAT_MAT4x2:35689,FLOAT_MAT4x3:35690,UNSIGNED_INT_VEC2:36294,UNSIGNED_INT_VEC3:36295,UNSIGNED_INT_VEC4:36296,UNSIGNED_NORMALIZED:35863,SIGNED_NORMALIZED:36764,VERTEX_ATTRIB_ARRAY_INTEGER:35069,VERTEX_ATTRIB_ARRAY_DIVISOR:35070,TRANSFORM_FEEDBACK_BUFFER_MODE:35967,MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS:35968,TRANSFORM_FEEDBACK_VARYINGS:35971,TRANSFORM_FEEDBACK_BUFFER_START:35972,TRANSFORM_FEEDBACK_BUFFER_SIZE:35973,TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN:35976,MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS:35978,MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS:35979,INTERLEAVED_ATTRIBS:35980,SEPARATE_ATTRIBS:35981,TRANSFORM_FEEDBACK_BUFFER:35982,TRANSFORM_FEEDBACK_BUFFER_BINDING:35983,TRANSFORM_FEEDBACK:36386,TRANSFORM_FEEDBACK_PAUSED:36387,TRANSFORM_FEEDBACK_ACTIVE:36388,TRANSFORM_FEEDBACK_BINDING:36389,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING:33296,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE:33297,FRAMEBUFFER_ATTACHMENT_RED_SIZE:33298,FRAMEBUFFER_ATTACHMENT_GREEN_SIZE:33299,FRAMEBUFFER_ATTACHMENT_BLUE_SIZE:33300,FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE:33301,FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE:33302,FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE:33303,FRAMEBUFFER_DEFAULT:33304,DEPTH24_STENCIL8:35056,DRAW_FRAMEBUFFER_BINDING:36006,READ_FRAMEBUFFER_BINDING:36010,RENDERBUFFER_SAMPLES:36011,FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER:36052,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE:36182,UNIFORM_BUFFER:35345,UNIFORM_BUFFER_BINDING:35368,UNIFORM_BUFFER_START:35369,UNIFORM_BUFFER_SIZE:35370,MAX_VERTEX_UNIFORM_BLOCKS:35371,MAX_FRAGMENT_UNIFORM_BLOCKS:35373,MAX_COMBINED_UNIFORM_BLOCKS:35374,MAX_UNIFORM_BUFFER_BINDINGS:35375,MAX_UNIFORM_BLOCK_SIZE:35376,MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS:35377,MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS:35379,UNIFORM_BUFFER_OFFSET_ALIGNMENT:35380,ACTIVE_UNIFORM_BLOCKS:35382,UNIFORM_TYPE:35383,UNIFORM_SIZE:35384,UNIFORM_BLOCK_INDEX:35386,UNIFORM_OFFSET:35387,UNIFORM_ARRAY_STRIDE:35388,UNIFORM_MATRIX_STRIDE:35389,UNIFORM_IS_ROW_MAJOR:35390,UNIFORM_BLOCK_BINDING:35391,UNIFORM_BLOCK_DATA_SIZE:35392,UNIFORM_BLOCK_ACTIVE_UNIFORMS:35394,UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES:35395,UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER:35396,UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER:35398,OBJECT_TYPE:37138,SYNC_CONDITION:37139,SYNC_STATUS:37140,SYNC_FLAGS:37141,SYNC_FENCE:37142,SYNC_GPU_COMMANDS_COMPLETE:37143,UNSIGNALED:37144,SIGNALED:37145,ALREADY_SIGNALED:37146,TIMEOUT_EXPIRED:37147,CONDITION_SATISFIED:37148,WAIT_FAILED:37149,SYNC_FLUSH_COMMANDS_BIT:1,COLOR:6144,DEPTH:6145,STENCIL:6146,MIN:32775,MAX:32776,DEPTH_COMPONENT24:33190,STREAM_READ:35041,STREAM_COPY:35042,STATIC_READ:35045,STATIC_COPY:35046,DYNAMIC_READ:35049,DYNAMIC_COPY:35050,DEPTH_COMPONENT32F:36012,DEPTH32F_STENCIL8:36013,INVALID_INDEX:4294967295,TIMEOUT_IGNORED:-1,MAX_CLIENT_WAIT_TIMEOUT_WEBGL:37447,VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE:35070,UNMASKED_VENDOR_WEBGL:37445,UNMASKED_RENDERER_WEBGL:37446,MAX_TEXTURE_MAX_ANISOTROPY_EXT:34047,TEXTURE_MAX_ANISOTROPY_EXT:34046,COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_RGBA8_ETC2_EAC:37493,COMPRESSED_SRGB8_ETC2:37494,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37495,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37496,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37497,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGB_ETC1_WEBGL:36196,COMPRESSED_RGB_ATC_WEBGL:35986,COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL:35986,COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL:34798,UNSIGNED_INT_24_8_WEBGL:34042,HALF_FLOAT_OES:36193,RGBA32F_EXT:34836,RGB32F_EXT:34837,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT:33297,UNSIGNED_NORMALIZED_EXT:35863,MIN_EXT:32775,MAX_EXT:32776,SRGB_EXT:35904,SRGB_ALPHA_EXT:35906,SRGB8_ALPHA8_EXT:35907,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT:33296,FRAGMENT_SHADER_DERIVATIVE_HINT_OES:35723,COLOR_ATTACHMENT0_WEBGL:36064,COLOR_ATTACHMENT1_WEBGL:36065,COLOR_ATTACHMENT2_WEBGL:36066,COLOR_ATTACHMENT3_WEBGL:36067,COLOR_ATTACHMENT4_WEBGL:36068,COLOR_ATTACHMENT5_WEBGL:36069,COLOR_ATTACHMENT6_WEBGL:36070,COLOR_ATTACHMENT7_WEBGL:36071,COLOR_ATTACHMENT8_WEBGL:36072,COLOR_ATTACHMENT9_WEBGL:36073,COLOR_ATTACHMENT10_WEBGL:36074,COLOR_ATTACHMENT11_WEBGL:36075,COLOR_ATTACHMENT12_WEBGL:36076,COLOR_ATTACHMENT13_WEBGL:36077,COLOR_ATTACHMENT14_WEBGL:36078,COLOR_ATTACHMENT15_WEBGL:36079,DRAW_BUFFER0_WEBGL:34853,DRAW_BUFFER1_WEBGL:34854,DRAW_BUFFER2_WEBGL:34855,DRAW_BUFFER3_WEBGL:34856,DRAW_BUFFER4_WEBGL:34857,DRAW_BUFFER5_WEBGL:34858,DRAW_BUFFER6_WEBGL:34859,DRAW_BUFFER7_WEBGL:34860,DRAW_BUFFER8_WEBGL:34861,DRAW_BUFFER9_WEBGL:34862,DRAW_BUFFER10_WEBGL:34863,DRAW_BUFFER11_WEBGL:34864,DRAW_BUFFER12_WEBGL:34865,DRAW_BUFFER13_WEBGL:34866,DRAW_BUFFER14_WEBGL:34867,DRAW_BUFFER15_WEBGL:34868,MAX_COLOR_ATTACHMENTS_WEBGL:36063,MAX_DRAW_BUFFERS_WEBGL:34852,VERTEX_ARRAY_BINDING_OES:34229,QUERY_COUNTER_BITS_EXT:34916,CURRENT_QUERY_EXT:34917,QUERY_RESULT_EXT:34918,QUERY_RESULT_AVAILABLE_EXT:34919,TIME_ELAPSED_EXT:35007,TIMESTAMP_EXT:36392,GPU_DISJOINT_EXT:36795}},function(e,t,n){var r;
/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */
/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */
!function(i,o,a,s){"use strict";var l,u=["","webkit","Moz","MS","ms","o"],c=o.createElement("div"),p="function",h=Math.round,f=Math.abs,d=Date.now;function setTimeoutContext(e,t,n){return setTimeout(bindFn(e,n),t)}function invokeArrayArg(e,t,n){return!!Array.isArray(e)&&(each(e,n[t],n),!0)}function each(e,t,n){var r;if(e)if(e.forEach)e.forEach(t,n);else if(e.length!==s)for(r=0;r<e.length;)t.call(n,e[r],r,e),r++;else for(r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r,e)}function deprecate(e,t,n){var r="DEPRECATED METHOD: "+t+"\n"+n+" AT \n";return function(){var t=new Error("get-stack-trace"),n=t&&t.stack?t.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=i.console&&(i.console.warn||i.console.log);return o&&o.call(i.console,r,n),e.apply(this,arguments)}}l="function"!=typeof Object.assign?function assign(e){if(e===s||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(r!==s&&null!==r)for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])}return t}:Object.assign;var g=deprecate(function extend(e,t,n){for(var r=Object.keys(t),i=0;i<r.length;)(!n||n&&e[r[i]]===s)&&(e[r[i]]=t[r[i]]),i++;return e},"extend","Use `assign`."),m=deprecate(function merge(e,t){return g(e,t,!0)},"merge","Use `assign`.");function inherit(e,t,n){var r,i=t.prototype;(r=e.prototype=Object.create(i)).constructor=e,r._super=i,n&&l(r,n)}function bindFn(e,t){return function boundFn(){return e.apply(t,arguments)}}function boolOrFn(e,t){return typeof e==p?e.apply(t&&t[0]||s,t):e}function ifUndefined(e,t){return e===s?t:e}function addEventListeners(e,t,n){each(splitStr(t),function(t){e.addEventListener(t,n,!1)})}function removeEventListeners(e,t,n){each(splitStr(t),function(t){e.removeEventListener(t,n,!1)})}function hasParent(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function inStr(e,t){return e.indexOf(t)>-1}function splitStr(e){return e.trim().split(/\s+/g)}function inArray(e,t,n){if(e.indexOf&&!n)return e.indexOf(t);for(var r=0;r<e.length;){if(n&&e[r][n]==t||!n&&e[r]===t)return r;r++}return-1}function toArray(e){return Array.prototype.slice.call(e,0)}function uniqueArray(e,t,n){for(var r=[],i=[],o=0;o<e.length;){var a=t?e[o][t]:e[o];inArray(i,a)<0&&r.push(e[o]),i[o]=a,o++}return n&&(r=t?r.sort(function sortUniqueArray(e,n){return e[t]>n[t]}):r.sort()),r}function prefixed(e,t){for(var n,r,i=t[0].toUpperCase()+t.slice(1),o=0;o<u.length;){if((r=(n=u[o])?n+i:t)in e)return r;o++}return s}var y=1;function getWindowForElement(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||i}var v="ontouchstart"in i,_=prefixed(i,"PointerEvent")!==s,b=v&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),x=25,w=1,S=2,E=4,P=8,C=1,k=2,T=4,A=8,O=16,I=k|T,R=A|O,L=I|R,M=["x","y"],j=["clientX","clientY"];function Input(e,t){var n=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){boolOrFn(e.options.enable,[e])&&n.handler(t)},this.init()}function inputHandler(e,t,n){var r=n.pointers.length,i=n.changedPointers.length,o=t&w&&r-i==0,a=t&(E|P)&&r-i==0;n.isFirst=!!o,n.isFinal=!!a,o&&(e.session={}),n.eventType=t,computeInputData(e,n),e.emit("hammer.input",n),e.recognize(n),e.session.prevInput=n}function computeInputData(e,t){var n=e.session,r=t.pointers,i=r.length;n.firstInput||(n.firstInput=simpleCloneInputData(t)),i>1&&!n.firstMultiple?n.firstMultiple=simpleCloneInputData(t):1===i&&(n.firstMultiple=!1);var o=n.firstInput,a=n.firstMultiple,s=a?a.center:o.center,l=t.center=getCenter(r);t.timeStamp=d(),t.deltaTime=t.timeStamp-o.timeStamp,t.angle=getAngle(s,l),t.distance=getDistance(s,l),computeDeltaXY(n,t),t.offsetDirection=getDirection(t.deltaX,t.deltaY);var u,c,p=getVelocity(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=p.x,t.overallVelocityY=p.y,t.overallVelocity=f(p.x)>f(p.y)?p.x:p.y,t.scale=a?(u=a.pointers,getDistance((c=r)[0],c[1],j)/getDistance(u[0],u[1],j)):1,t.rotation=a?getRotation(a.pointers,r):0,t.maxPointers=n.prevInput?t.pointers.length>n.prevInput.maxPointers?t.pointers.length:n.prevInput.maxPointers:t.pointers.length,computeIntervalInputData(n,t);var h=e.element;hasParent(t.srcEvent.target,h)&&(h=t.srcEvent.target),t.target=h}function computeDeltaXY(e,t){var n=t.center,r=e.offsetDelta||{},i=e.prevDelta||{},o=e.prevInput||{};t.eventType!==w&&o.eventType!==E||(i=e.prevDelta={x:o.deltaX||0,y:o.deltaY||0},r=e.offsetDelta={x:n.x,y:n.y}),t.deltaX=i.x+(n.x-r.x),t.deltaY=i.y+(n.y-r.y)}function computeIntervalInputData(e,t){var n,r,i,o,a=e.lastInterval||t,l=t.timeStamp-a.timeStamp;if(t.eventType!=P&&(l>x||a.velocity===s)){var u=t.deltaX-a.deltaX,c=t.deltaY-a.deltaY,p=getVelocity(l,u,c);r=p.x,i=p.y,n=f(p.x)>f(p.y)?p.x:p.y,o=getDirection(u,c),e.lastInterval=t}else n=a.velocity,r=a.velocityX,i=a.velocityY,o=a.direction;t.velocity=n,t.velocityX=r,t.velocityY=i,t.direction=o}function simpleCloneInputData(e){for(var t=[],n=0;n<e.pointers.length;)t[n]={clientX:h(e.pointers[n].clientX),clientY:h(e.pointers[n].clientY)},n++;return{timeStamp:d(),pointers:t,center:getCenter(t),deltaX:e.deltaX,deltaY:e.deltaY}}function getCenter(e){var t=e.length;if(1===t)return{x:h(e[0].clientX),y:h(e[0].clientY)};for(var n=0,r=0,i=0;i<t;)n+=e[i].clientX,r+=e[i].clientY,i++;return{x:h(n/t),y:h(r/t)}}function getVelocity(e,t,n){return{x:t/e||0,y:n/e||0}}function getDirection(e,t){return e===t?C:f(e)>=f(t)?e<0?k:T:t<0?A:O}function getDistance(e,t,n){n||(n=M);var r=t[n[0]]-e[n[0]],i=t[n[1]]-e[n[1]];return Math.sqrt(r*r+i*i)}function getAngle(e,t,n){n||(n=M);var r=t[n[0]]-e[n[0]],i=t[n[1]]-e[n[1]];return 180*Math.atan2(i,r)/Math.PI}function getRotation(e,t){return getAngle(t[1],t[0],j)+getAngle(e[1],e[0],j)}Input.prototype={handler:function(){},init:function(){this.evEl&&addEventListeners(this.element,this.evEl,this.domHandler),this.evTarget&&addEventListeners(this.target,this.evTarget,this.domHandler),this.evWin&&addEventListeners(getWindowForElement(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&removeEventListeners(this.element,this.evEl,this.domHandler),this.evTarget&&removeEventListeners(this.target,this.evTarget,this.domHandler),this.evWin&&removeEventListeners(getWindowForElement(this.element),this.evWin,this.domHandler)}};var D={mousedown:w,mousemove:S,mouseup:E},F="mousedown",N="mousemove mouseup";function MouseInput(){this.evEl=F,this.evWin=N,this.pressed=!1,Input.apply(this,arguments)}inherit(MouseInput,Input,{handler:function MEhandler(e){var t=D[e.type];t&w&&0===e.button&&(this.pressed=!0),t&S&&1!==e.which&&(t=E),this.pressed&&(t&E&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:"mouse",srcEvent:e}))}});var B={pointerdown:w,pointermove:S,pointerup:E,pointercancel:P,pointerout:P},z={2:"touch",3:"pen",4:"mouse",5:"kinect"},U="pointerdown",V="pointermove pointerup pointercancel";function PointerEventInput(){this.evEl=U,this.evWin=V,Input.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}i.MSPointerEvent&&!i.PointerEvent&&(U="MSPointerDown",V="MSPointerMove MSPointerUp MSPointerCancel"),inherit(PointerEventInput,Input,{handler:function PEhandler(e){var t=this.store,n=!1,r=e.type.toLowerCase().replace("ms",""),i=B[r],o=z[e.pointerType]||e.pointerType,a="touch"==o,s=inArray(t,e.pointerId,"pointerId");i&w&&(0===e.button||a)?s<0&&(t.push(e),s=t.length-1):i&(E|P)&&(n=!0),s<0||(t[s]=e,this.callback(this.manager,i,{pointers:t,changedPointers:[e],pointerType:o,srcEvent:e}),n&&t.splice(s,1))}});var G={touchstart:w,touchmove:S,touchend:E,touchcancel:P},W="touchstart",q="touchstart touchmove touchend touchcancel";function SingleTouchInput(){this.evTarget=W,this.evWin=q,this.started=!1,Input.apply(this,arguments)}function normalizeSingleTouches(e,t){var n=toArray(e.touches),r=toArray(e.changedTouches);return t&(E|P)&&(n=uniqueArray(n.concat(r),"identifier",!0)),[n,r]}inherit(SingleTouchInput,Input,{handler:function TEhandler(e){var t=G[e.type];if(t===w&&(this.started=!0),this.started){var n=normalizeSingleTouches.call(this,e,t);t&(E|P)&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:e})}}});var H={touchstart:w,touchmove:S,touchend:E,touchcancel:P},X="touchstart touchmove touchend touchcancel";function TouchInput(){this.evTarget=X,this.targetIds={},Input.apply(this,arguments)}function getTouches(e,t){var n=toArray(e.touches),r=this.targetIds;if(t&(w|S)&&1===n.length)return r[n[0].identifier]=!0,[n,n];var i,o,a=toArray(e.changedTouches),s=[],l=this.target;if(o=n.filter(function(e){return hasParent(e.target,l)}),t===w)for(i=0;i<o.length;)r[o[i].identifier]=!0,i++;for(i=0;i<a.length;)r[a[i].identifier]&&s.push(a[i]),t&(E|P)&&delete r[a[i].identifier],i++;return s.length?[uniqueArray(o.concat(s),"identifier",!0),s]:void 0}inherit(TouchInput,Input,{handler:function MTEhandler(e){var t=H[e.type],n=getTouches.call(this,e,t);n&&this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:e})}});var K=2500,Z=25;function TouchMouseInput(){Input.apply(this,arguments);var e=bindFn(this.handler,this);this.touch=new TouchInput(this.manager,e),this.mouse=new MouseInput(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function recordTouches(e,t){e&w?(this.primaryTouch=t.changedPointers[0].identifier,setLastTouch.call(this,t)):e&(E|P)&&setLastTouch.call(this,t)}function setLastTouch(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY};this.lastTouches.push(n);var r=this.lastTouches;setTimeout(function(){var e=r.indexOf(n);e>-1&&r.splice(e,1)},K)}}function isSyntheticEvent(e){for(var t=e.srcEvent.clientX,n=e.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var i=this.lastTouches[r],o=Math.abs(t-i.x),a=Math.abs(n-i.y);if(o<=Z&&a<=Z)return!0}return!1}inherit(TouchMouseInput,Input,{handler:function TMEhandler(e,t,n){var r="touch"==n.pointerType,i="mouse"==n.pointerType;if(!(i&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(r)recordTouches.call(this,t,n);else if(i&&isSyntheticEvent.call(this,n))return;this.callback(e,t,n)}},destroy:function destroy(){this.touch.destroy(),this.mouse.destroy()}});var Y=prefixed(c.style,"touchAction"),J=Y!==s,Q="auto",$="manipulation",ee="none",te="pan-x",ne="pan-y",re=function getTouchActionProps(){if(!J)return!1;var e={},t=i.CSS&&i.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(n){e[n]=!t||i.CSS.supports("touch-action",n)}),e}();function TouchAction(e,t){this.manager=e,this.set(t)}function cleanTouchActions(e){if(inStr(e,ee))return ee;var t=inStr(e,te),n=inStr(e,ne);return t&&n?ee:t||n?t?te:ne:inStr(e,$)?$:Q}TouchAction.prototype={set:function(e){"compute"==e&&(e=this.compute()),J&&this.manager.element.style&&re[e]&&(this.manager.element.style[Y]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return each(this.manager.recognizers,function(t){boolOrFn(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))}),cleanTouchActions(e.join(" "))},preventDefaults:function(e){var t=e.srcEvent,n=e.offsetDirection;if(this.manager.session.prevented)t.preventDefault();else{var r=this.actions,i=inStr(r,ee)&&!re[ee],o=inStr(r,ne)&&!re[ne],a=inStr(r,te)&&!re[te];if(i){var s=1===e.pointers.length,l=e.distance<2,u=e.deltaTime<250;if(s&&l&&u)return}if(!a||!o)return i||o&&n&I||a&&n&R?this.preventSrc(t):void 0}},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var ie=1,oe=2,ae=4,se=8,le=se,ue=16;function Recognizer(e){this.options=l({},this.defaults,e||{}),this.id=y++,this.manager=null,this.options.enable=ifUndefined(this.options.enable,!0),this.state=ie,this.simultaneous={},this.requireFail=[]}function stateStr(e){return e&ue?"cancel":e&se?"end":e&ae?"move":e&oe?"start":""}function directionStr(e){return e==O?"down":e==A?"up":e==k?"left":e==T?"right":""}function getRecognizerByNameIfManager(e,t){var n=t.manager;return n?n.get(e):e}function AttrRecognizer(){Recognizer.apply(this,arguments)}function PanRecognizer(){AttrRecognizer.apply(this,arguments),this.pX=null,this.pY=null}function PinchRecognizer(){AttrRecognizer.apply(this,arguments)}function PressRecognizer(){Recognizer.apply(this,arguments),this._timer=null,this._input=null}function RotateRecognizer(){AttrRecognizer.apply(this,arguments)}function SwipeRecognizer(){AttrRecognizer.apply(this,arguments)}function TapRecognizer(){Recognizer.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Hammer(e,t){return(t=t||{}).recognizers=ifUndefined(t.recognizers,Hammer.defaults.preset),new Manager(e,t)}Recognizer.prototype={defaults:{},set:function(e){return l(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(invokeArrayArg(e,"recognizeWith",this))return this;var t=this.simultaneous;return t[(e=getRecognizerByNameIfManager(e,this)).id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return invokeArrayArg(e,"dropRecognizeWith",this)?this:(e=getRecognizerByNameIfManager(e,this),delete this.simultaneous[e.id],this)},requireFailure:function(e){if(invokeArrayArg(e,"requireFailure",this))return this;var t=this.requireFail;return-1===inArray(t,e=getRecognizerByNameIfManager(e,this))&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(invokeArrayArg(e,"dropRequireFailure",this))return this;e=getRecognizerByNameIfManager(e,this);var t=inArray(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){var t=this,n=this.state;function emit(n){t.manager.emit(n,e)}n<se&&emit(t.options.event+stateStr(n)),emit(t.options.event),e.additionalEvent&&emit(e.additionalEvent),n>=se&&emit(t.options.event+stateStr(n))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=32},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(32|ie)))return!1;e++}return!0},recognize:function(e){var t=l({},e);if(!boolOrFn(this.options.enable,[this,t]))return this.reset(),void(this.state=32);this.state&(le|ue|32)&&(this.state=ie),this.state=this.process(t),this.state&(oe|ae|se|ue)&&this.tryEmit(t)},process:function(e){},getTouchAction:function(){},reset:function(){}},inherit(AttrRecognizer,Recognizer,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,n=e.eventType,r=t&(oe|ae),i=this.attrTest(e);return r&&(n&P||!i)?t|ue:r||i?n&E?t|se:t&oe?t|ae:oe:32}}),inherit(PanRecognizer,AttrRecognizer,{defaults:{event:"pan",threshold:10,pointers:1,direction:L},getTouchAction:function(){var e=this.options.direction,t=[];return e&I&&t.push(ne),e&R&&t.push(te),t},directionTest:function(e){var t=this.options,n=!0,r=e.distance,i=e.direction,o=e.deltaX,a=e.deltaY;return i&t.direction||(t.direction&I?(i=0===o?C:o<0?k:T,n=o!=this.pX,r=Math.abs(e.deltaX)):(i=0===a?C:a<0?A:O,n=a!=this.pY,r=Math.abs(e.deltaY))),e.direction=i,n&&r>t.threshold&&i&t.direction},attrTest:function(e){return AttrRecognizer.prototype.attrTest.call(this,e)&&(this.state&oe||!(this.state&oe)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=directionStr(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),inherit(PinchRecognizer,AttrRecognizer,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[ee]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||this.state&oe)},emit:function(e){if(1!==e.scale){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),inherit(PressRecognizer,Recognizer,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Q]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,i=e.deltaTime>t.time;if(this._input=e,!r||!n||e.eventType&(E|P)&&!i)this.reset();else if(e.eventType&w)this.reset(),this._timer=setTimeoutContext(function(){this.state=le,this.tryEmit()},t.time,this);else if(e.eventType&E)return le;return 32},reset:function(){clearTimeout(this._timer)},emit:function(e){this.state===le&&(e&&e.eventType&E?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=d(),this.manager.emit(this.options.event,this._input)))}}),inherit(RotateRecognizer,AttrRecognizer,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[ee]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||this.state&oe)}}),inherit(SwipeRecognizer,AttrRecognizer,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:I|R,pointers:1},getTouchAction:function(){return PanRecognizer.prototype.getTouchAction.call(this)},attrTest:function(e){var t,n=this.options.direction;return n&(I|R)?t=e.overallVelocity:n&I?t=e.overallVelocityX:n&R&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&n&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&f(t)>this.options.velocity&&e.eventType&E},emit:function(e){var t=directionStr(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),inherit(TapRecognizer,Recognizer,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[$]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,i=e.deltaTime<t.time;if(this.reset(),e.eventType&w&&0===this.count)return this.failTimeout();if(r&&i&&n){if(e.eventType!=E)return this.failTimeout();var o=!this.pTime||e.timeStamp-this.pTime<t.interval,a=!this.pCenter||getDistance(this.pCenter,e.center)<t.posThreshold;if(this.pTime=e.timeStamp,this.pCenter=e.center,a&&o?this.count+=1:this.count=1,this._input=e,0===this.count%t.taps)return this.hasRequireFailures()?(this._timer=setTimeoutContext(function(){this.state=le,this.tryEmit()},t.interval,this),oe):le}return 32},failTimeout:function(){return this._timer=setTimeoutContext(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==le&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Hammer.VERSION="2.0.7",Hammer.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[RotateRecognizer,{enable:!1}],[PinchRecognizer,{enable:!1},["rotate"]],[SwipeRecognizer,{direction:I}],[PanRecognizer,{direction:I},["swipe"]],[TapRecognizer],[TapRecognizer,{event:"doubletap",taps:2},["tap"]],[PressRecognizer]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function Manager(e,t){var n;this.options=l({},Hammer.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=new((n=this).options.inputClass||(_?PointerEventInput:b?TouchInput:v?TouchMouseInput:MouseInput))(n,inputHandler),this.touchAction=new TouchAction(this,this.options.touchAction),toggleCssProps(this,!0),each(this.options.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])},this)}function toggleCssProps(e,t){var n,r=e.element;r.style&&(each(e.options.cssProps,function(i,o){n=prefixed(r.style,o),t?(e.oldCssProps[n]=r.style[n],r.style[n]=i):r.style[n]=e.oldCssProps[n]||""}),t||(e.oldCssProps={}))}function triggerDomEvent(e,t){var n=o.createEvent("Event");n.initEvent(e,!0,!0),n.gesture=t,t.target.dispatchEvent(n)}Manager.prototype={set:function(e){return l(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?2:1},recognize:function(e){var t=this.session;if(!t.stopped){var n;this.touchAction.preventDefaults(e);var r=this.recognizers,i=t.curRecognizer;(!i||i&&i.state&le)&&(i=t.curRecognizer=null);for(var o=0;o<r.length;)n=r[o],2===t.stopped||i&&n!=i&&!n.canRecognizeWith(i)?n.reset():n.recognize(e),!i&&n.state&(oe|ae|se)&&(i=t.curRecognizer=n),o++}},get:function(e){if(e instanceof Recognizer)return e;for(var t=this.recognizers,n=0;n<t.length;n++)if(t[n].options.event==e)return t[n];return null},add:function(e){if(invokeArrayArg(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(invokeArrayArg(e,"remove",this))return this;if(e=this.get(e)){var t=this.recognizers,n=inArray(t,e);-1!==n&&(t.splice(n,1),this.touchAction.update())}return this},on:function(e,t){if(e!==s&&t!==s){var n=this.handlers;return each(splitStr(e),function(e){n[e]=n[e]||[],n[e].push(t)}),this}},off:function(e,t){if(e!==s){var n=this.handlers;return each(splitStr(e),function(e){t?n[e]&&n[e].splice(inArray(n[e],t),1):delete n[e]}),this}},emit:function(e,t){this.options.domEvents&&triggerDomEvent(e,t);var n=this.handlers[e]&&this.handlers[e].slice();if(n&&n.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var r=0;r<n.length;)n[r](t),r++}},destroy:function(){this.element&&toggleCssProps(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},l(Hammer,{INPUT_START:w,INPUT_MOVE:S,INPUT_END:E,INPUT_CANCEL:P,STATE_POSSIBLE:ie,STATE_BEGAN:oe,STATE_CHANGED:ae,STATE_ENDED:se,STATE_RECOGNIZED:le,STATE_CANCELLED:ue,STATE_FAILED:32,DIRECTION_NONE:C,DIRECTION_LEFT:k,DIRECTION_RIGHT:T,DIRECTION_UP:A,DIRECTION_DOWN:O,DIRECTION_HORIZONTAL:I,DIRECTION_VERTICAL:R,DIRECTION_ALL:L,Manager:Manager,Input:Input,TouchAction:TouchAction,TouchInput:TouchInput,MouseInput:MouseInput,PointerEventInput:PointerEventInput,TouchMouseInput:TouchMouseInput,SingleTouchInput:SingleTouchInput,Recognizer:Recognizer,AttrRecognizer:AttrRecognizer,Tap:TapRecognizer,Pan:PanRecognizer,Swipe:SwipeRecognizer,Pinch:PinchRecognizer,Rotate:RotateRecognizer,Press:PressRecognizer,on:addEventListeners,off:removeEventListeners,each:each,merge:m,extend:g,assign:l,inherit:inherit,bindFn:bindFn,prefixed:prefixed}),(void 0!==i?i:"undefined"!=typeof self?self:{}).Hammer=Hammer,(r=function(){return Hammer}.call(t,n,t,e))===s||(e.exports=r)}(window,document)},function(e,t,n){e.exports={description:"",displayName:"Popup",methods:[],props:[{required:!0,flowType:{name:"React$Node"},description:"Popup content.",tags:{},name:"children"},{required:!0,flowType:{name:"number"},description:"The latitude of the center of the popup.",tags:{},name:"latitude"},{required:!0,flowType:{name:"number"},description:"The longitude of the center of the popup.",tags:{},name:"longitude"},{required:!1,flowType:{name:"union",raw:"| 'top'\n| 'bottom'\n| 'left'\n| 'right'\n| 'top-left'\n| 'top-right'\n| 'bottom-left'\n| 'bottom-right'",elements:[{name:"literal",value:"'top'"},{name:"literal",value:"'bottom'"},{name:"literal",value:"'left'"},{name:"literal",value:"'right'"},{name:"literal",value:"'top-left'"},{name:"literal",value:"'top-right'"},{name:"literal",value:"'bottom-left'"},{name:"literal",value:"'bottom-right'"}]},description:"",defaultValue:{value:"null",computed:!1},tags:{},name:"anchor"},{required:!1,flowType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1},tags:{},name:"closeButton"},{required:!1,flowType:{name:"boolean"},description:"If true, the popup will closed when the map is clicked.",defaultValue:{value:"true",computed:!1},tags:{},name:"closeOnClick"},{required:!1,flowType:{name:"MapboxLngLatBoundsLike"},description:"The offset in pixels as a `PointLike` object to apply\nrelative to the element's center. Negatives indicate left and up.",defaultValue:{value:"null",computed:!1},tags:{},name:"offset"},{required:!1,flowType:{name:"Function"},description:"The onClose callback is fired when the popup closed.",defaultValue:{value:"null",computed:!1},tags:{},name:"onClose"}],doclets:{},examples:n(475)}},function(e,t,n){var r={react:n(1),"@urbica/react-map-gl":n(52),"mapbox-gl/dist/mapbox-gl.css":n(49),"./index.js":n(135)},i=n(44).default.bind(null,r),o=n(45).default.bind(null,"const React$0 = require('react');\nconst React = React$0.default || React$0;\nconst Popup$0 = require('./index.js');\nconst Popup = Popup$0.default || Popup$0;",i);e.exports=[{type:"markdown",content:"React Component for [Mapbox GL JS Popup](https://docs.mapbox.com/mapbox-gl-js/api/#popup)."},{type:"code",content:"import React from 'react';\nimport MapGL, { Popup } from '@urbica/react-map-gl';\nimport 'mapbox-gl/dist/mapbox-gl.css';\n\n<MapGL\n  style={{ width: '100%', height: '400px' }}\n  mapStyle='mapbox://styles/mapbox/light-v9'\n  accessToken={MAPBOX_ACCESS_TOKEN}\n  latitude={0}\n  longitude={0}\n  zoom={0}\n>\n  <Popup longitude={0} latitude={0} closeButton={false} closeOnClick={false}>\n    Hi there! 👋\n  </Popup>\n</MapGL>;",settings:{},evalInContext:o}]},function(e,t,n){e.exports={description:"",displayName:"Marker",methods:[],props:[{required:!0,flowType:{name:"React$Node"},description:"Marker content",tags:{},name:"children"},{required:!0,flowType:{name:"number"},description:"The latitude of the center of the marker.",tags:{},name:"latitude"},{required:!0,flowType:{name:"number"},description:"The longitude of the center of the marker.",tags:{},name:"longitude"},{required:!1,flowType:{name:"boolean"},description:"Boolean indicating whether or not a marker is able to be dragged\nto a new position on the map.",defaultValue:{value:"false",computed:!1},tags:{},name:"draggable"},{required:!1,flowType:{name:"PointLike"},description:"The offset in pixels as a `PointLike` object to apply\nrelative to the element's center. Negatives indicate left and up.",defaultValue:{value:"null",computed:!1},tags:{},name:"offset"},{required:!1,flowType:{name:"signature",type:"function",raw:"(lngLat: LngLat) => any",signature:{arguments:[{name:"lngLat",type:{name:"LngLat"}}],return:{name:"any"}}},description:"Fired when the marker is finished being dragged",tags:{},name:"onDragEnd"}],doclets:{},examples:n(477)}},function(e,t,n){var r={react:n(1),"@urbica/react-map-gl":n(52),"mapbox-gl/dist/mapbox-gl.css":n(49),"./index.js":n(136)},i=n(44).default.bind(null,r),o=n(45).default.bind(null,"const React$0 = require('react');\nconst React = React$0.default || React$0;\nconst Marker$0 = require('./index.js');\nconst Marker = Marker$0.default || Marker$0;",i);e.exports=[{type:"markdown",content:"React Component for [Mapbox GL JS Marker](https://docs.mapbox.com/mapbox-gl-js/api/#marker)."},{type:"code",content:"import React from 'react';\nimport MapGL, { Marker } from '@urbica/react-map-gl';\nimport 'mapbox-gl/dist/mapbox-gl.css';\n\ninitialState = {\n  longitude: 0,\n  latitude: 0\n};\n\nconst style = {\n  padding: '10px',\n  color: '#fff',\n  cursor: 'pointer',\n  background: '#1978c8',\n  borderRadius: '6px'\n};\n\nconst onDragEnd = lngLat => {\n  setState({ longitude: lngLat.lng, latitude: lngLat.lat });\n};\n\n<MapGL\n  style={{ width: '100%', height: '400px' }}\n  mapStyle='mapbox://styles/mapbox/light-v9'\n  accessToken={MAPBOX_ACCESS_TOKEN}\n  latitude={0}\n  longitude={0}\n  zoom={0}\n>\n  <Marker\n    longitude={state.longitude}\n    latitude={state.latitude}\n    onDragEnd={onDragEnd}\n    draggable\n  >\n    <div style={style}>Hi there! 👋</div>\n  </Marker>\n</MapGL>;",settings:{},evalInContext:o}]},function(e,t,n){e.exports={description:"A `FeatureState` component sets the state of a feature.\n",displayName:"FeatureState",methods:[],props:[{required:!0,flowType:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},description:"Unique id of the feature.",tags:{},name:"id"},{required:!0,flowType:{name:"string"},description:"The Id of the vector source or GeoJSON source for the feature.",tags:{},name:"source"},{required:!0,flowType:{name:"string"},description:"For vector tile sources, the sourceLayer is required.",tags:{},name:"sourceLayer"},{required:!0,flowType:{name:"Object"},description:"A set of key-value pairs. The values should be valid JSON types.",tags:{},name:"state"}],doclets:{},tags:{},examples:n(479)}},function(e,t,n){var r={react:n(1),"@urbica/react-map-gl":n(52),"mapbox-gl/dist/mapbox-gl.css":n(49),"./index.js":n(137)},i=n(44).default.bind(null,r),o=n(45).default.bind(null,"const React$0 = require('react');\nconst React = React$0.default || React$0;\nconst FeatureState$0 = require('./index.js');\nconst FeatureState = FeatureState$0.default || FeatureState$0;",i);e.exports=[{type:"markdown",content:"A `FeatureState` component sets the state of a feature. For example, you can use events and feature states to create a per feature hover effect."},{type:"code",content:"import React from 'react';\nimport MapGL, { Source, Layer, FeatureState } from '@urbica/react-map-gl';\nimport 'mapbox-gl/dist/mapbox-gl.css';\n\ninitialState = {\n  hoveredStateId: null,\n  viewport: {\n    latitude: 37.830348,\n    longitude: -100.486052,\n    zoom: 2\n  }\n};\n\nconst onHover = event => {\n  if (event.features.length > 0) {\n    const hoveredStateId = event.features[0].id;\n    if (hoveredStateId !== state.hoveredStateId) {\n      setState({ hoveredStateId });\n    }\n  }\n};\n\nconst onLeave = () => {\n  if (state.hoveredStateId) {\n    setState({ hoveredStateId: null });\n  }\n};\n\n<MapGL\n  style={{ width: '100%', height: '400px' }}\n  mapStyle='mapbox://styles/mapbox/light-v9'\n  accessToken={MAPBOX_ACCESS_TOKEN}\n  onViewportChange={viewport => setState({ viewport })}\n  {...state.viewport}\n>\n  <Source\n    id='states'\n    type='geojson'\n    data='https://docs.mapbox.com/mapbox-gl-js/assets/us_states.geojson'\n  />\n  <Layer\n    id='state-fills'\n    type='fill'\n    source='states'\n    paint={{\n      'fill-color': '#627BC1',\n      'fill-opacity': [\n        'case',\n        ['boolean', ['feature-state', 'hover'], false],\n        1,\n        0.5\n      ]\n    }}\n    onHover={onHover}\n    onLeave={onLeave}\n  />\n  {state.hoveredStateId && (\n    <FeatureState\n      id={state.hoveredStateId}\n      source='states'\n      state={{ hover: true }}\n    />\n  )}\n</MapGL>;",settings:{},evalInContext:o}]},function(e,t,n){e.exports={description:"An `AttributionControl` control presents the map's attribution information.\n",displayName:"AttributionControl",methods:[],props:[{required:!0,flowType:{name:"boolean"},description:"If `true` force a compact attribution that shows the full\nattribution on mouse hover, or if  false force the full attribution\ncontrol. The default is a responsive attribution that collapses when\nthe map is less than 640 pixels wide.",tags:{},name:"compact"},{required:!0,flowType:{name:"union",raw:"string | Array<string>",elements:[{name:"string"},{name:"Array",elements:[{name:"string"}],raw:"Array<string>"}]},description:"",tags:{},name:"customAttribution"},{required:!1,flowType:{name:"union",raw:"'top-left' | 'top-right' | 'bottom-left' | 'bottom-right'",elements:[{name:"literal",value:"'top-left'"},{name:"literal",value:"'top-right'"},{name:"literal",value:"'bottom-left'"},{name:"literal",value:"'bottom-right'"}]},description:"",defaultValue:{value:"'bottom-right'",computed:!1},tags:{},name:"position"}],doclets:{},tags:{},examples:n(481)}},function(e,t,n){var r={react:n(1),"@urbica/react-map-gl":n(52),"mapbox-gl/dist/mapbox-gl.css":n(49),"./index.js":n(138)},i=n(44).default.bind(null,r),o=n(45).default.bind(null,"const React$0 = require('react');\nconst React = React$0.default || React$0;\nconst AttributionControl$0 = require('./index.js');\nconst AttributionControl = AttributionControl$0.default || AttributionControl$0;",i);e.exports=[{type:"markdown",content:"An `AttributionControl` control presents the map's attribution information."},{type:"code",content:"import React from 'react';\nimport MapGL, { AttributionControl } from '@urbica/react-map-gl';\nimport 'mapbox-gl/dist/mapbox-gl.css';\n\n<MapGL\n  style={{ width: '100%', height: '400px' }}\n  mapStyle='mapbox://styles/mapbox/light-v9'\n  accessToken={MAPBOX_ACCESS_TOKEN}\n  latitude={37.78}\n  longitude={-122.41}\n  zoom={11}\n  attributionControl={false}\n>\n  <AttributionControl\n    compact={false}\n    position='bottom-right'\n    customAttribution='Custom attribution'\n  />\n</MapGL>;",settings:{},evalInContext:o}]},function(e,t,n){e.exports={description:"A `FullscreenControl` control contains a button for toggling the map in\nand out of fullscreen mode.\n",displayName:"FullscreenControl",methods:[],props:[{required:!0,flowType:{name:"string"},description:"container is the compatible DOM element which should be\nmade full screen. By default, the map container element\nwill be made full screen.",tags:{},name:"container"},{required:!1,flowType:{name:"union",raw:"'top-left' | 'top-right' | 'bottom-left' | 'bottom-right'",elements:[{name:"literal",value:"'top-left'"},{name:"literal",value:"'top-right'"},{name:"literal",value:"'bottom-left'"},{name:"literal",value:"'bottom-right'"}]},description:"",defaultValue:{value:"'top-right'",computed:!1},tags:{},name:"position"}],doclets:{},tags:{},examples:n(483)}},function(e,t,n){var r={react:n(1),"@urbica/react-map-gl":n(52),"mapbox-gl/dist/mapbox-gl.css":n(49),"./index.js":n(139)},i=n(44).default.bind(null,r),o=n(45).default.bind(null,"const React$0 = require('react');\nconst React = React$0.default || React$0;\nconst FullscreenControl$0 = require('./index.js');\nconst FullscreenControl = FullscreenControl$0.default || FullscreenControl$0;",i);e.exports=[{type:"markdown",content:"A `FullscreenControl` control contains a button for toggling the map in and out of fullscreen mode."},{type:"code",content:"import React from 'react';\nimport MapGL, { FullscreenControl } from '@urbica/react-map-gl';\nimport 'mapbox-gl/dist/mapbox-gl.css';\n\n<MapGL\n  style={{ width: '100%', height: '400px' }}\n  mapStyle='mapbox://styles/mapbox/light-v9'\n  accessToken={MAPBOX_ACCESS_TOKEN}\n  latitude={37.78}\n  longitude={-122.41}\n  zoom={11}\n>\n  <FullscreenControl position='top-right' />\n</MapGL>;",settings:{},evalInContext:o}]},function(e,t,n){e.exports={description:"A `GeolocateControl` control provides a button that uses the browser's\ngeolocation API to locate the user on the map.\n",displayName:"GeolocateControl",methods:[],props:[{required:!1,flowType:{name:"Object"},description:"A `fitBounds` options object to use when the map is\npanned and zoomed to the user's location.",defaultValue:{value:"{ maxZoom: 15 }",computed:!1},tags:{},name:"fitBoundsOptions"},{required:!1,flowType:{name:"union",raw:"'top-left' | 'top-right' | 'bottom-left' | 'bottom-right'",elements:[{name:"literal",value:"'top-left'"},{name:"literal",value:"'top-right'"},{name:"literal",value:"'bottom-left'"},{name:"literal",value:"'bottom-right'"}]},description:"",tags:{},name:"position"},{required:!1,flowType:{name:"PositionOptions"},description:"",defaultValue:{value:"{ enableHighAccuracy: false, timeout: 6000 }",computed:!1},tags:{},name:"positionOptions"},{required:!1,flowType:{name:"boolean"},description:"By default a dot will be shown on the map at the user's location.\nSet to `false` to disable.",defaultValue:{value:"true",computed:!1},tags:{},name:"showUserLocation"},{required:!1,flowType:{name:"boolean"},description:"If `true` the Geolocate Control becomes a toggle button and when active\nthe map will receive updates to the user's location as it changes.",defaultValue:{value:"false",computed:!1},tags:{},name:"trackUserLocation"}],doclets:{},tags:{},examples:n(485)}},function(e,t,n){var r={react:n(1),"@urbica/react-map-gl":n(52),"mapbox-gl/dist/mapbox-gl.css":n(49),"./index.js":n(140)},i=n(44).default.bind(null,r),o=n(45).default.bind(null,"const React$0 = require('react');\nconst React = React$0.default || React$0;\nconst GeolocateControl$0 = require('./index.js');\nconst GeolocateControl = GeolocateControl$0.default || GeolocateControl$0;",i);e.exports=[{type:"markdown",content:"Geolocate the user and then track their current location on the map using the `GeolocateControl`."},{type:"code",content:"import React from 'react';\nimport MapGL, { GeolocateControl } from '@urbica/react-map-gl';\nimport 'mapbox-gl/dist/mapbox-gl.css';\n\n<MapGL\n  style={{ width: '100%', height: '400px' }}\n  mapStyle='mapbox://styles/mapbox/light-v9'\n  accessToken={MAPBOX_ACCESS_TOKEN}\n  latitude={37.78}\n  longitude={-122.41}\n  zoom={11}\n>\n  <GeolocateControl position='top-right' />\n</MapGL>;",settings:{},evalInContext:o}]},function(e,t,n){e.exports={description:"A `NavigationControl` control contains zoom buttons and a compass.\n",displayName:"NavigationControl",methods:[],props:[{required:!0,flowType:{name:"boolean"},description:"",tags:{},name:"showCompass"},{required:!0,flowType:{name:"boolean"},description:"",tags:{},name:"showZoom"},{required:!1,flowType:{name:"union",raw:"'top-left' | 'top-right' | 'bottom-left' | 'bottom-right'",elements:[{name:"literal",value:"'top-left'"},{name:"literal",value:"'top-right'"},{name:"literal",value:"'bottom-left'"},{name:"literal",value:"'bottom-right'"}]},description:"",defaultValue:{value:"'top-right'",computed:!1},tags:{},name:"position"}],doclets:{},tags:{},examples:n(487)}},function(e,t,n){var r={react:n(1),"@urbica/react-map-gl":n(52),"mapbox-gl/dist/mapbox-gl.css":n(49),"./index.js":n(141)},i=n(44).default.bind(null,r),o=n(45).default.bind(null,"const React$0 = require('react');\nconst React = React$0.default || React$0;\nconst NavigationControl$0 = require('./index.js');\nconst NavigationControl = NavigationControl$0.default || NavigationControl$0;",i);e.exports=[{type:"markdown",content:"A `NavigationControl` control contains zoom buttons and a compass."},{type:"code",content:"import React from 'react';\nimport MapGL, { NavigationControl } from '@urbica/react-map-gl';\nimport 'mapbox-gl/dist/mapbox-gl.css';\n\n<MapGL\n  style={{ width: '100%', height: '400px' }}\n  mapStyle='mapbox://styles/mapbox/light-v9'\n  accessToken={MAPBOX_ACCESS_TOKEN}\n  latitude={37.78}\n  longitude={-122.41}\n  zoom={11}\n>\n  <NavigationControl showCompass showZoom position='top-right' />\n</MapGL>;",settings:{},evalInContext:o}]},function(e,t,n){e.exports={description:"A `ScaleControl` control displays the ratio of a distance on the map\nto the corresponding distance on the ground.\n",displayName:"ScaleControl",methods:[],props:[{required:!0,flowType:{name:"number"},description:"",tags:{},name:"maxWidth"},{required:!1,flowType:{name:"union",raw:"'top-left' | 'top-right' | 'bottom-left' | 'bottom-right'",elements:[{name:"literal",value:"'top-left'"},{name:"literal",value:"'top-right'"},{name:"literal",value:"'bottom-left'"},{name:"literal",value:"'bottom-right'"}]},description:"",defaultValue:{value:"'bottom-right'",computed:!1},tags:{},name:"position"},{required:!1,flowType:{name:"union",raw:"'imperial' | 'metric' | 'nautical'",elements:[{name:"literal",value:"'imperial'"},{name:"literal",value:"'metric'"},{name:"literal",value:"'nautical'"}]},description:"",defaultValue:{value:"'metric'",computed:!1},tags:{},name:"unit"}],doclets:{},tags:{},examples:n(489)}},function(e,t,n){var r={react:n(1),"@urbica/react-map-gl":n(52),"mapbox-gl/dist/mapbox-gl.css":n(49),"./index.js":n(142)},i=n(44).default.bind(null,r),o=n(45).default.bind(null,"const React$0 = require('react');\nconst React = React$0.default || React$0;\nconst ScaleControl$0 = require('./index.js');\nconst ScaleControl = ScaleControl$0.default || ScaleControl$0;",i);e.exports=[{type:"markdown",content:"A `ScaleControl` control displays the ratio of a distance on the map to the corresponding distance on the ground."},{type:"code",content:"import React from 'react';\nimport MapGL, { ScaleControl } from '@urbica/react-map-gl';\nimport 'mapbox-gl/dist/mapbox-gl.css';\n\n<MapGL\n  style={{ width: '100%', height: '400px' }}\n  mapStyle='mapbox://styles/mapbox/light-v9'\n  accessToken={MAPBOX_ACCESS_TOKEN}\n  latitude={37.78}\n  longitude={-122.41}\n  zoom={11}\n>\n  <ScaleControl unit='metric' position='bottom-right' />\n</MapGL>;",settings:{},evalInContext:o}]},function(e,t,n){"use strict";n.r(t);n(273),n(274),n(276);var r=n(104).a.createStyleSheet({body:{isolate:!1,margin:0,padding:0,minWidth:0,maxWidth:"100%",border:0}}).attach().classes.body;document.body.classList.add(r);var i=n(69),o=n.n(i),a=(n(206),n(1)),s=n.n(a),l=(n(120),n(50),n(25),n(2)),u=n.n(l),c=n(13);function componentWillMount(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!=e&&this.setState(e)}function componentWillReceiveProps(e){this.setState(function updater(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!=n?n:null}.bind(this))}function componentWillUpdate(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}function polyfill(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if("function"!=typeof e.getDerivedStateFromProps&&"function"!=typeof t.getSnapshotBeforeUpdate)return e;var n=null,r=null,i=null;if("function"==typeof t.componentWillMount?n="componentWillMount":"function"==typeof t.UNSAFE_componentWillMount&&(n="UNSAFE_componentWillMount"),"function"==typeof t.componentWillReceiveProps?r="componentWillReceiveProps":"function"==typeof t.UNSAFE_componentWillReceiveProps&&(r="UNSAFE_componentWillReceiveProps"),"function"==typeof t.componentWillUpdate?i="componentWillUpdate":"function"==typeof t.UNSAFE_componentWillUpdate&&(i="UNSAFE_componentWillUpdate"),null!==n||null!==r||null!==i){var o=e.displayName||e.name,a="function"==typeof e.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+o+" uses "+a+" but also contains the following legacy lifecycles:"+(null!==n?"\n  "+n:"")+(null!==r?"\n  "+r:"")+(null!==i?"\n  "+i:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"==typeof e.getDerivedStateFromProps&&(t.componentWillMount=componentWillMount,t.componentWillReceiveProps=componentWillReceiveProps),"function"==typeof t.getSnapshotBeforeUpdate){if("function"!=typeof t.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=componentWillUpdate;var s=t.componentDidUpdate;t.componentDidUpdate=function componentDidUpdatePolyfill(e,t,n){var r=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:n;s.call(this,e,t,r)}}return e}componentWillMount.__suppressDeprecationWarning=!0,componentWillReceiveProps.__suppressDeprecationWarning=!0,componentWillUpdate.__suppressDeprecationWarning=!0;var p=n(245),h=n.n(p),f=n(188),d=n.n(f),g=(n(376),n(377),n(378),n(379),n(148)),m=n(149);function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=function highlight(e){return d.a.highlight(e,d.a.languages.jsx,"jsx")},v=function(e){var t,n;function Editor(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return _defineProperty(_assertThisInitialized(t=e.call.apply(e,[this].concat(r))||this),"state",{code:t.props.code,prevCode:t.props.code}),_defineProperty(_assertThisInitialized(t),"handleChange",function(e){t.setState({code:e}),t.props.onChange(e)}),t}n=e,(t=Editor).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,Editor.getDerivedStateFromProps=function getDerivedStateFromProps(e,t){var n=e.code;return t.prevCode!==n?{prevCode:n,code:n}:null};var r=Editor.prototype;return r.shouldComponentUpdate=function shouldComponentUpdate(e,t){return t.code!==this.state.code},r.render=function render(){return s.a.createElement(h.a,{className:this.props.classes.root,value:this.state.code,onValueChange:this.handleChange,highlight:y,padding:g.space[2]})},Editor}(a.Component);_defineProperty(v,"propTypes",{code:u.a.string.isRequired,onChange:u.a.func.isRequired,classes:u.a.object.isRequired});var _=Object(c.a)(function styles(e){var t=e.fontFamily,n=e.fontSize,r=e.color,i=e.borderRadius;return{root:Object.assign({fontFamily:t.monospace,fontSize:n.small,background:r.codeBackground,borderRadius:i,"& textarea":{isolate:!1,transition:"all ease-in-out .1s",border:"1px "+r.border+" solid !important",borderRadius:i},"& textarea:focus":{isolate:!1,outline:0,borderColor:r.link+" !important",boxShadow:[[0,0,0,2,r.focus]]}},Object(m.a)({color:r}))}})(polyfill(v)),b=n(218),x=(n(23),n(32)),w=n(94),S=n(156),E=n(84),P=n(96),C=n(158);function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var k=function getRowKey(e){return e.name},T=[{caption:"Method name",render:function render(e){var t=e.name,n=e.tags,r=void 0===n?{}:n;return s.a.createElement(E.a,{deprecated:!!r.deprecated},t+"()")}},{caption:"Parameters",render:function render(e){var t=e.params,n=void 0===t?[]:t;return s.a.createElement(S.a,{args:n})}},{caption:"Description",render:function render(e){var t=e.description,n=e.returns,r=e.tags,i=void 0===r?{}:r;return s.a.createElement("div",null,t&&s.a.createElement(x.a,{text:t}),n&&s.a.createElement(w.a,_extends({block:!0,returns:!0},n)),s.a.createElement(P.a,i))}}];function MethodsRenderer(e){var t=e.methods;return s.a.createElement(C.a,{columns:T,rows:t,getRowKey:k})}MethodsRenderer.propTypes={methods:u.a.arrayOf(u.a.shape({name:u.a.string.isRequired,description:u.a.string,returns:u.a.object,params:u.a.array,tags:u.a.object})).isRequired};var A=n(98),O=n.n(A);function Usage(e){var t=e.props,n=t.props,r=t.methods,i=!O()(n)&&s.a.createElement(b.a,{props:n}),o=!O()(r)&&s.a.createElement(MethodsRenderer,{methods:r});return i||o?s.a.createElement("div",null,i,o):null}Usage.propTypes={props:u.a.shape({props:u.a.array,methods:u.a.array}).isRequired};var I=n(249),R=n.n(I),L=n(250),M=n.n(L),j=n(24);function ToolbarButtonRenderer(e){var t,n=e.classes,r=e.className,i=e.onClick,o=e.href,a=e.title,l=e.small,u=e.children,c=Object(j.a)(n.button,r,((t={})[n.isSmall]=l,t));return void 0!==o?s.a.createElement("a",{href:o,title:a,className:c,"aria-label":a},u):s.a.createElement("button",{type:"button",onClick:i,title:a,className:c,"aria-label":a},u)}ToolbarButtonRenderer.propTypes={classes:u.a.object.isRequired,className:u.a.string,href:u.a.string,onClick:u.a.func,title:u.a.string,small:u.a.bool,children:u.a.node};var D=Object(c.a)(function styles(e){var t=e.space,n=e.color;return{button:{padding:2,color:n.light,background:"transparent",transition:"color 750ms ease-out",cursor:"pointer","&:hover, &:focus":{isolate:!1,color:n.linkHover,transition:"color 150ms ease-in"},"&:focus":{isolate:!1,outline:[[1,"dotted",n.linkHover]]},"& + &":{isolate:!1,marginLeft:t[1]},"& svg":{width:t[3],height:t[3],color:"currentColor",cursor:"inherit"}},isSmall:{"& svg":{width:14,height:14}}}})(ToolbarButtonRenderer);n(429);function getUrl(e,t){var n=void 0===e?{}:e,r=n.name,i=n.slug,o=n.example,a=n.anchor,s=n.isolated,l=n.nochrome,u=n.absolute,c=n.hashPath,p=n.id,h=n.takeHash,f=void 0===t?window.location:t,d=f.origin,g=f.pathname,m=f.hash,y=g;return h&&(m.indexOf("?")>-1?y+=m.substring(0,m.indexOf("?")):y+=m),l&&(y+="?nochrome"),a?y+="#"+i:(s||l)&&(y+="#!/"+r),c&&(p||(c=[].concat(c,[r])),y+="#/"+c.join("/")),p&&(y+="?id="+i),void 0!==o&&(y+="/"+o),u?d+y:y}var F=function IsolateButton(e){var t=e.name,n=e.example;return e.isolated?s.a.createElement(D,{href:getUrl({anchor:!0,slug:"/"}),title:"Show all components"},s.a.createElement(M.a,null)):s.a.createElement(D,{href:getUrl({name:t,example:n,isolated:!0}),title:"Open isolated"},s.a.createElement(R.a,null))};F.propTypes={name:u.a.string.isRequired,example:u.a.number,isolated:u.a.bool};var N=F;function TabButtonRenderer(e){var t,n=e.classes,r=e.name,i=e.className,o=e.onClick,a=e.active,l=e.children,u=Object(j.a)(n.button,i,((t={})[n.isActive]=a,t));return s.a.createElement("button",{type:"button",name:r,className:u,onClick:o},l)}TabButtonRenderer.propTypes={classes:u.a.object.isRequired,name:u.a.string,className:u.a.string,onClick:u.a.func,active:u.a.bool,children:u.a.node};var B=Object(c.a)(function styles(e){var t=e.space,n=e.color,r=e.fontFamily,i=e.fontSize,o=e.buttonTextTransform;return{button:{padding:[[t[1],0]],fontFamily:r.base,fontSize:i.base,color:n.light,background:"transparent",textTransform:o,transition:"color 750ms ease-out",border:"none",cursor:"pointer","&:hover, &:focus":{isolate:!1,outline:0,color:n.linkHover,transition:"color 150ms ease-in"},"&:focus:not($isActive)":{isolate:!1,outline:[[1,"dotted",n.linkHover]]},"& + &":{isolate:!1,marginLeft:t[1]}},isActive:{borderBottom:[[2,n.linkHover,"solid"]]}}})(TabButtonRenderer),z=function CodeTabButton(e){return s.a.createElement(B,e,"View Code")};z.propTypes={onClick:u.a.func.isRequired,name:u.a.string.isRequired,active:u.a.bool};var U=z,V=function UsageTabButton(e){var t=e.props;return!O()(t.props)||!O()(t.methods)?s.a.createElement(B,e,"Props & methods"):null};V.propTypes={onClick:u.a.func.isRequired,name:u.a.string.isRequired,props:u.a.shape({props:u.a.array,methods:u.a.array}).isRequired,active:u.a.bool};var G=V,W="rsg-code-editor",q="rsg-usage",H=function(){var e=[N];return{sectionToolbar:e,componentToolbar:e,exampleToolbar:e,exampleTabButtons:[{id:W,render:U}],exampleTabs:[{id:W,render:_}],docsTabButtons:[{id:q,render:G}],docsTabs:[{id:q,render:Usage}]}},X=n(157),K=(n(183),n(81),n(233),n(251)),Z=n.n(K),Y="#/",J=/(.*)\?/;function trimHash(e,t){if(!e)return"";var n=new RegExp("^"+Z()(t||Y),"g");return e.replace(n,"")}var Q=function trimParams(e){var t=J.exec(e);return t&&t[1]||e},$=function hasInHash(e,t){return""!==e&&e.indexOf(t)>-1},ee=function getHash(e,t){return decodeURIComponent(Q(trimHash(e,t)))},te=function getHashAsArray(e,t){return ee(e,t).split("/")},ne=function getParameterByName(e,t){t=t.replace(/[[\]]/g,"\\$&");var n=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)").exec(e);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null};function ComponentsListRenderer(e){var t=e.classes,n=e.items;if(!(n=n.filter(function(e){return e.visibleName})).length)return null;var r=window.location.pathname+ee(window.location.hash);return s.a.createElement("ul",{className:t.list},n.map(function(e){var n=e.heading,i=e.visibleName,o=e.href,a=e.content,l=e.external,u=r===o;return s.a.createElement("li",{className:Object(j.a)(t.item,(!a||!a.props.items.length)&&t.isChild,u&&t.isSelected),key:o},s.a.createElement(X.a,{className:Object(j.a)(n&&t.heading),href:o,target:l?"_blank":void 0},i),a)}))}ComponentsListRenderer.propTypes={items:u.a.array.isRequired,classes:u.a.object.isRequired};var re=Object(c.a)(function styles(e){var t,n=e.color,r=e.fontFamily,i=e.fontSize,o=e.space,a=e.mq;return{list:{margin:0,paddingLeft:o[2]},item:{color:n.base,display:"block",margin:[[o[1],0,o[1],0]],fontFamily:r.base,fontSize:i.base,listStyle:"none",overflow:"hidden",textOverflow:"ellipsis"},isChild:(t={},t[a.small]={display:"inline-block",margin:[[0,o[1],0,0]]},t),heading:{color:n.base,marginTop:o[1],fontFamily:r.base,fontWeight:"bold"},isSelected:{fontWeight:"bold"}}})(ComponentsListRenderer);function ComponentsList(e){var t=e.classes,n=e.items,r=e.useRouterLinks,i=void 0!==r&&r,o=e.useHashId,a=e.hashPath,l=n.map(function(e){return Object.assign({},e,{href:e.href?e.href:getUrl({name:e.name,slug:e.slug,anchor:!i,hashPath:!!i&&a,id:!!i&&o})})});return s.a.createElement(re,{classes:t,items:l})}ComponentsList.propTypes={items:u.a.array.isRequired,classes:u.a.object,hashPath:u.a.array,useRouterLinks:u.a.bool,useHashId:u.a.bool};var ie=ComponentsList;function TableOfContentsRenderer(e){var t=e.classes,n=e.children,r=e.searchTerm,i=e.onSearchTermChange;return s.a.createElement("div",null,s.a.createElement("div",{className:t.root},s.a.createElement("div",{className:t.search},s.a.createElement("input",{value:r,className:t.input,placeholder:"Filter by name","aria-label":"Filter by name",onChange:function onChange(e){return i(e.target.value)}})),s.a.createElement("nav",null,n)))}TableOfContentsRenderer.propTypes={classes:u.a.object.isRequired,children:u.a.node,searchTerm:u.a.string.isRequired,onSearchTermChange:u.a.func.isRequired};var oe=Object(c.a)(function styles(e){var t=e.space,n=e.color,r=e.fontFamily,i=e.fontSize,o=e.borderRadius;return{root:{fontFamily:r.base},search:{padding:t[2]},input:{display:"block",width:"100%",padding:t[1],color:n.base,backgroundColor:n.baseBackground,fontFamily:r.base,fontSize:i.base,border:[[1,n.border,"solid"]],borderRadius:o,transition:"all ease-in-out .1s","&:focus":{isolate:!1,borderColor:n.link,boxShadow:[[0,0,0,2,n.focus]],outline:0},"&::placeholder":{isolate:!1,fontFamily:r.base,fontSize:i.base,color:n.light}}}})(TableOfContentsRenderer);function getFilterRegExp(e){return e=e.replace(/[^a-z0-9]/gi,"").split("").join(".*"),new RegExp(e,"i")}function filterComponentsByName(e,t){var n=getFilterRegExp(t);return e.filter(function(e){var t=e.name;return n.test(t)})}function filterSectionsByName(e,t){var n=getFilterRegExp(t);return e.map(function(e){return Object.assign({},e,{sections:e.sections?filterSectionsByName(e.sections,t):[],components:e.components?filterComponentsByName(e.components,t):[]})}).filter(function(e){return e.components.length>0||e.sections.length>0||n.test(e.name)})}function TableOfContents_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function TableOfContents_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ae=function(e){var t,n;function TableOfContents(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return TableOfContents_defineProperty(TableOfContents_assertThisInitialized(t=e.call.apply(e,[this].concat(r))||this),"state",{searchTerm:""}),t}n=e,(t=TableOfContents).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var r=TableOfContents.prototype;return r.renderLevel=function renderLevel(e,t,n,r){var i=this;void 0===t&&(t=!1),void 0===n&&(n=[]),void 0===r&&(r=!1);var o=e.map(function(e){var o=[].concat(e.sections||[],e.components||[]),a=e.sectionDepth||0,s=0===a&&r?n:[].concat(n,[e.name]);return Object.assign({},e,{heading:!!e.name&&o.length>0,content:o.length>0&&i.renderLevel(o,t,s,0===a)})});return s.a.createElement(ie,{items:o,hashPath:n,useHashId:r,useRouterLinks:t})},r.renderSections=function renderSections(){var e=this.state.searchTerm,t=this.props,n=t.sections,r=t.useRouterLinks,i=filterSectionsByName(1===n.length?n[0].components:n,e);return this.renderLevel(i,r)},r.render=function render(){var e=this,t=this.state.searchTerm;return s.a.createElement(oe,{searchTerm:t,onSearchTermChange:function onSearchTermChange(t){return e.setState({searchTerm:t})}},this.renderSections())},TableOfContents}(a.Component);TableOfContents_defineProperty(ae,"propTypes",{sections:u.a.array.isRequired,useRouterLinks:u.a.bool});function LogoRenderer(e){var t=e.classes,n=e.children;return s.a.createElement("h1",{className:t.logo},n)}LogoRenderer.propTypes={classes:u.a.object.isRequired,children:u.a.node};var se=Object(c.a)(function styles(e){var t=e.color,n=e.fontFamily,r=e.fontSize;return{logo:{color:t.base,margin:0,fontFamily:n.base,fontSize:r.h4,fontWeight:"normal"}}})(LogoRenderer);function RibbonRenderer(e){var t=e.classes,n=e.url,r=e.text;return s.a.createElement("div",{className:t.root},s.a.createElement("a",{href:n,className:t.link},r))}RibbonRenderer.defaultProps={text:"Fork me on GitHub"},RibbonRenderer.propTypes={classes:u.a.object.isRequired,url:u.a.string.isRequired,text:u.a.string};var le=Object(c.a)(function styles(e){var t=e.color,n=e.space,r=e.fontSize;return{root:{position:"fixed",top:0,right:0,width:149,height:149,zIndex:999},link:{fontFamily:e.fontFamily.base,position:"relative",right:-37,top:-22,display:"block",width:190,padding:[[n[0],n[2]]],textAlign:"center",color:t.ribbonText,fontSize:r.base,background:t.ribbonBackground,textDecoration:"none",textShadow:[[0,"-1px",0,"rgba(0,0,0,.15)"]],transformOrigin:[[0,0]],transform:"rotate(45deg)",cursor:"pointer"}}})(RibbonRenderer);function Ribbon(e,t){var n=t.config.ribbon;return n?s.a.createElement(le,n):null}Ribbon.contextTypes={config:u.a.object};function VersionRenderer(e){var t=e.classes,n=e.children;return s.a.createElement("p",{"aria-label":"version",className:t.version},n)}VersionRenderer.propTypes={classes:u.a.object.isRequired,children:u.a.node};var ue=Object(c.a)(function styles(e){var t=e.color,n=e.fontFamily,r=e.fontSize;return{version:{color:t.light,margin:[[5,0,0,0]],fontFamily:n.base,fontSize:r.base,fontWeight:"normal"}}})(VersionRenderer);function StyleGuideRenderer(e){var t=e.classes,n=e.title,r=e.version,i=e.homepageUrl,o=e.children,a=e.toc,l=e.hasSidebar;return s.a.createElement("div",{className:Object(j.a)(t.root,l&&t.hasSidebar)},s.a.createElement("main",{className:t.content},o,s.a.createElement("footer",{className:t.footer},s.a.createElement(x.a,{text:"Created with [React Styleguidist]("+i+")"}))),l&&s.a.createElement("div",{className:t.sidebar},s.a.createElement("div",{className:t.logo},s.a.createElement(se,null,n),r&&s.a.createElement(ue,null,r)),a),s.a.createElement(Ribbon,null))}StyleGuideRenderer.propTypes={classes:u.a.object.isRequired,title:u.a.string.isRequired,version:u.a.string,homepageUrl:u.a.string.isRequired,children:u.a.node.isRequired,toc:u.a.node.isRequired,hasSidebar:u.a.bool};var ce=Object(c.a)(function styles(e){var t,n,r,i=e.color,o=e.fontFamily,a=e.fontSize,s=e.sidebarWidth,l=e.mq,u=e.space,c=e.maxWidth;return{root:{minHeight:"100vh",backgroundColor:i.baseBackground},hasSidebar:(t={paddingLeft:s},t[l.small]={paddingLeft:0},t),content:(n={maxWidth:c,padding:[[u[2],u[4]]],margin:[[0,"auto"]]},n[l.small]={padding:u[2]},n.display="block",n),sidebar:(r={backgroundColor:i.sidebarBackground,border:[[i.border,"solid"]],borderWidth:[[0,1,0,0]],position:"fixed",top:0,left:0,bottom:0,width:s,overflow:"auto",WebkitOverflowScrolling:"touch"},r[l.small]={position:"static",width:"auto",borderWidth:[[1,0,0,0]],paddingBottom:u[0]},r),logo:{padding:u[2],borderBottom:[[1,i.border,"solid"]]},footer:{display:"block",color:i.light,fontFamily:o.base,fontSize:a.small}}})(StyleGuideRenderer),pe=n(252),he=n.n(pe);n(235);function PlaygroundErrorRenderer(e){var t=e.classes,n=e.message;return s.a.createElement("pre",{className:t.root},n)}PlaygroundErrorRenderer.propTypes={classes:u.a.object.isRequired,message:u.a.string.isRequired};var fe=Object(c.a)(function styles(e){var t=e.fontFamily,n=e.fontSize,r=e.color;return{root:{margin:0,lineHeight:1.2,fontSize:n.small,fontFamily:t.monospace,color:r.error,whiteSpace:"pre-wrap"}}})(PlaygroundErrorRenderer);var de=function(e){var t,n;function Wrapper(){return e.apply(this,arguments)||this}n=e,(t=Wrapper).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var r=Wrapper.prototype;return r.componentDidCatch=function componentDidCatch(e){this.props.onError(e)},r.render=function render(){return this.props.children},Wrapper}(a.Component);!function Wrapper_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}(de,"propTypes",{children:u.a.node.isRequired,onError:u.a.func.isRequired});n(236);var ge,me=n(253),ye=n(257),ve=n.n(ye),_e=(n(56),/import\s*['"]([^'"]+)['"];?/gi),be=/import\s*(\*\s*as)?\s*(\w*?)\s*,?\s*(?:\{([\s\S]*?)\})?\s*from\s*['"]([^'"]+)['"];?/gi;function alias(e){var t=(e=e.trim()).split(" as ");return t.length>1&&(e=t.shift()),{key:e,name:t[0]}}function generate(e,t,n,r){var i,o=t.split("/").pop().replace(/\W/g,"_")+"$"+ge++,a="const "+alias(o).name+" = "+(t=r+"('"+t+"')")+";";return n&&(a+="\nconst "+n+" = "+o+".default || "+o+";"),e.forEach(function(e){i=alias(e),a+="\nconst "+i.name+" = "+o+"."+i.key+";"}),a}var xe=function(e,t){return void 0===t&&(t="require"),ge=0,e.replace(be,function(e,n,r,i,o){return generate(i?i.split(",").filter(function(e){return e.trim()}):[],o,r,t)}).replace(_e,function(e,n){return t+"('"+n+"');"})},we={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},Se="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",Ee={5:Se,6:Se+" const class extends export import super"},Pe=/^in(stanceof)?$/,Ce="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈא-תׯ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࢠ-ࢴࢶ-ࢽऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡸᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲈᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿯ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞹꟷ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭥꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",ke="‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߽߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛࣓-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯৾ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ૺ-૿ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఄా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ഀ-ഃ഻഼ാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ංඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ູົຼ່-ໍ໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠐-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭ᳲ-᳴᳷-᳹᷀-᷹᷻-᷿‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧꢀꢁꢴ-ꣅ꣐-꣙꣠-꣱ꣿ-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿",Te=new RegExp("["+Ce+"]"),Ae=new RegExp("["+Ce+ke+"]");Ce=ke=null;var Oe=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,477,28,11,0,9,21,190,52,76,44,33,24,27,35,30,0,12,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,54,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,86,26,230,43,117,63,32,0,257,0,11,39,8,0,22,0,12,39,3,3,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,270,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,68,12,0,67,12,65,1,31,6129,15,754,9486,286,82,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,4149,196,60,67,1213,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42710,42,4148,12,221,3,5761,15,7472,3104,541],Ie=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,525,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,4,9,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,280,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1016,45,17,3,19723,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,2214,6,110,6,6,9,792487,239];function isInAstralSet(e,t){for(var n=65536,r=0;r<t.length;r+=2){if((n+=t[r])>e)return!1;if((n+=t[r+1])>=e)return!0}}function isIdentifierStart(e,t){return e<65?36===e:e<91||(e<97?95===e:e<123||(e<=65535?e>=170&&Te.test(String.fromCharCode(e)):!1!==t&&isInAstralSet(e,Oe)))}function isIdentifierChar(e,t){return e<48?36===e:e<58||!(e<65)&&(e<91||(e<97?95===e:e<123||(e<=65535?e>=170&&Ae.test(String.fromCharCode(e)):!1!==t&&(isInAstralSet(e,Oe)||isInAstralSet(e,Ie)))))}var Re=function TokenType(e,t){void 0===t&&(t={}),this.label=e,this.keyword=t.keyword,this.beforeExpr=!!t.beforeExpr,this.startsExpr=!!t.startsExpr,this.isLoop=!!t.isLoop,this.isAssign=!!t.isAssign,this.prefix=!!t.prefix,this.postfix=!!t.postfix,this.binop=t.binop||null,this.updateContext=null};function binop(e,t){return new Re(e,{beforeExpr:!0,binop:t})}var Le={beforeExpr:!0},Me={startsExpr:!0},je={};function kw(e,t){return void 0===t&&(t={}),t.keyword=e,je[e]=new Re(e,t)}var De={num:new Re("num",Me),regexp:new Re("regexp",Me),string:new Re("string",Me),name:new Re("name",Me),eof:new Re("eof"),bracketL:new Re("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new Re("]"),braceL:new Re("{",{beforeExpr:!0,startsExpr:!0}),braceR:new Re("}"),parenL:new Re("(",{beforeExpr:!0,startsExpr:!0}),parenR:new Re(")"),comma:new Re(",",Le),semi:new Re(";",Le),colon:new Re(":",Le),dot:new Re("."),question:new Re("?",Le),arrow:new Re("=>",Le),template:new Re("template"),invalidTemplate:new Re("invalidTemplate"),ellipsis:new Re("...",Le),backQuote:new Re("`",Me),dollarBraceL:new Re("${",{beforeExpr:!0,startsExpr:!0}),eq:new Re("=",{beforeExpr:!0,isAssign:!0}),assign:new Re("_=",{beforeExpr:!0,isAssign:!0}),incDec:new Re("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new Re("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:binop("||",1),logicalAND:binop("&&",2),bitwiseOR:binop("|",3),bitwiseXOR:binop("^",4),bitwiseAND:binop("&",5),equality:binop("==/!=/===/!==",6),relational:binop("</>/<=/>=",7),bitShift:binop("<</>>/>>>",8),plusMin:new Re("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:binop("%",10),star:binop("*",10),slash:binop("/",10),starstar:new Re("**",{beforeExpr:!0}),_break:kw("break"),_case:kw("case",Le),_catch:kw("catch"),_continue:kw("continue"),_debugger:kw("debugger"),_default:kw("default",Le),_do:kw("do",{isLoop:!0,beforeExpr:!0}),_else:kw("else",Le),_finally:kw("finally"),_for:kw("for",{isLoop:!0}),_function:kw("function",Me),_if:kw("if"),_return:kw("return",Le),_switch:kw("switch"),_throw:kw("throw",Le),_try:kw("try"),_var:kw("var"),_const:kw("const"),_while:kw("while",{isLoop:!0}),_with:kw("with"),_new:kw("new",{beforeExpr:!0,startsExpr:!0}),_this:kw("this",Me),_super:kw("super",Me),_class:kw("class",Me),_extends:kw("extends",Le),_export:kw("export"),_import:kw("import"),_null:kw("null",Me),_true:kw("true",Me),_false:kw("false",Me),_in:kw("in",{beforeExpr:!0,binop:7}),_instanceof:kw("instanceof",{beforeExpr:!0,binop:7}),_typeof:kw("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:kw("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:kw("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},Fe=/\r\n?|\n|\u2028|\u2029/,Ne=new RegExp(Fe.source,"g");function isNewLine(e,t){return 10===e||13===e||!t&&(8232===e||8233===e)}var Be=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,ze=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,Ue=Object.prototype,Ve=Ue.hasOwnProperty,Ge=Ue.toString;function has(e,t){return Ve.call(e,t)}var We=Array.isArray||function(e){return"[object Array]"===Ge.call(e)};function wordsRegexp(e){return new RegExp("^(?:"+e.replace(/ /g,"|")+")$")}var qe=function Position(e,t){this.line=e,this.column=t};qe.prototype.offset=function offset(e){return new qe(this.line,this.column+e)};var He=function SourceLocation(e,t,n){this.start=t,this.end=n,null!==e.sourceFile&&(this.source=e.sourceFile)};function getLineInfo(e,t){for(var n=1,r=0;;){Ne.lastIndex=r;var i=Ne.exec(e);if(!(i&&i.index<t))return new qe(n,t-r);++n,r=i.index+i[0].length}}var Xe={ecmaVersion:9,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1};function getOptions(e){var t={};for(var n in Xe)t[n]=e&&has(e,n)?e[n]:Xe[n];if(t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),null==t.allowReserved&&(t.allowReserved=t.ecmaVersion<5),We(t.onToken)){var r=t.onToken;t.onToken=function(e){return r.push(e)}}return We(t.onComment)&&(t.onComment=pushComment(t,t.onComment)),t}function pushComment(e,t){return function(n,r,i,o,a,s){var l={type:n?"Block":"Line",value:r,start:i,end:o};e.locations&&(l.loc=new He(this,a,s)),e.ranges&&(l.range=[i,o]),t.push(l)}}var Ke=2,Ze=1|Ke,Ye=4,Je=8;function functionFlags(e,t){return Ke|(e?Ye:0)|(t?Je:0)}var Qe=function Parser(e,t,n){this.options=e=getOptions(e),this.sourceFile=e.sourceFile,this.keywords=wordsRegexp(Ee[e.ecmaVersion>=6?6:5]);var r="";if(!e.allowReserved){for(var i=e.ecmaVersion;!(r=we[i]);i--);"module"===e.sourceType&&(r+=" await")}this.reservedWords=wordsRegexp(r);var o=(r?r+" ":"")+we.strict;this.reservedWordsStrict=wordsRegexp(o),this.reservedWordsStrictBind=wordsRegexp(o+" "+we.strictBind),this.input=String(t),this.containsEsc=!1,n?(this.pos=n,this.lineStart=this.input.lastIndexOf("\n",n-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(Fe).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=De.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule="module"===e.sourceType,this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports={},0===this.pos&&e.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(1),this.regexpState=null},$e={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0}};Qe.prototype.parse=function parse(){var e=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(e)},$e.inFunction.get=function(){return(this.currentVarScope().flags&Ke)>0},$e.inGenerator.get=function(){return(this.currentVarScope().flags&Je)>0},$e.inAsync.get=function(){return(this.currentVarScope().flags&Ye)>0},$e.allowSuper.get=function(){return(64&this.currentThisScope().flags)>0},$e.allowDirectSuper.get=function(){return(128&this.currentThisScope().flags)>0},$e.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},Qe.prototype.inNonArrowFunction=function inNonArrowFunction(){return(this.currentThisScope().flags&Ke)>0},Qe.extend=function extend(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];for(var n=this,r=0;r<e.length;r++)n=e[r](n);return n},Qe.parse=function parse(e,t){return new this(t,e).parse()},Qe.parseExpressionAt=function parseExpressionAt(e,t,n){var r=new this(n,e,t);return r.nextToken(),r.parseExpression()},Qe.tokenizer=function tokenizer(e,t){return new this(t,e)},Object.defineProperties(Qe.prototype,$e);var et=Qe.prototype,tt=/^(?:'((?:\\.|[^'])*?)'|"((?:\\.|[^"])*?)")/;function DestructuringErrors(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}et.strictDirective=function(e){for(;;){ze.lastIndex=e,e+=ze.exec(this.input)[0].length;var t=tt.exec(this.input.slice(e));if(!t)return!1;if("use strict"===(t[1]||t[2]))return!0;e+=t[0].length,ze.lastIndex=e,e+=ze.exec(this.input)[0].length,";"===this.input[e]&&e++}},et.eat=function(e){return this.type===e&&(this.next(),!0)},et.isContextual=function(e){return this.type===De.name&&this.value===e&&!this.containsEsc},et.eatContextual=function(e){return!!this.isContextual(e)&&(this.next(),!0)},et.expectContextual=function(e){this.eatContextual(e)||this.unexpected()},et.canInsertSemicolon=function(){return this.type===De.eof||this.type===De.braceR||Fe.test(this.input.slice(this.lastTokEnd,this.start))},et.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},et.semicolon=function(){this.eat(De.semi)||this.insertSemicolon()||this.unexpected()},et.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0},et.expect=function(e){this.eat(e)||this.unexpected()},et.unexpected=function(e){this.raise(null!=e?e:this.start,"Unexpected token")},et.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,"Parenthesized pattern")}},et.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,r=e.doubleProto;if(!t)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")},et.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},et.isSimpleAssignTarget=function(e){return"ParenthesizedExpression"===e.type?this.isSimpleAssignTarget(e.expression):"Identifier"===e.type||"MemberExpression"===e.type};var nt=Qe.prototype;nt.parseTopLevel=function(e){var t={};for(e.body||(e.body=[]);this.type!==De.eof;){var n=this.parseStatement(null,!0,t);e.body.push(n)}if(this.inModule)for(var r=0,i=Object.keys(this.undefinedExports);r<i.length;r+=1){var o=i[r];this.raiseRecoverable(this.undefinedExports[o].start,"Export '"+o+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),this.options.ecmaVersion>=6&&(e.sourceType=this.options.sourceType),this.finishNode(e,"Program")};var rt={kind:"loop"},it={kind:"switch"};nt.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;ze.lastIndex=this.pos;var t=ze.exec(this.input),n=this.pos+t[0].length,r=this.input.charCodeAt(n);if(91===r)return!0;if(e)return!1;if(123===r)return!0;if(isIdentifierStart(r,!0)){for(var i=n+1;isIdentifierChar(this.input.charCodeAt(i),!0);)++i;var o=this.input.slice(n,i);if(!Pe.test(o))return!0}return!1},nt.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;ze.lastIndex=this.pos;var e=ze.exec(this.input),t=this.pos+e[0].length;return!(Fe.test(this.input.slice(this.pos,t))||"function"!==this.input.slice(t,t+8)||t+8!==this.input.length&&isIdentifierChar(this.input.charAt(t+8)))},nt.parseStatement=function(e,t,n){var r,i=this.type,o=this.startNode();switch(this.isLet(e)&&(i=De._var,r="let"),i){case De._break:case De._continue:return this.parseBreakContinueStatement(o,i.keyword);case De._debugger:return this.parseDebuggerStatement(o);case De._do:return this.parseDoStatement(o);case De._for:return this.parseForStatement(o);case De._function:return e&&(this.strict||"if"!==e&&"label"!==e)&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(o,!1,!e);case De._class:return e&&this.unexpected(),this.parseClass(o,!0);case De._if:return this.parseIfStatement(o);case De._return:return this.parseReturnStatement(o);case De._switch:return this.parseSwitchStatement(o);case De._throw:return this.parseThrowStatement(o);case De._try:return this.parseTryStatement(o);case De._const:case De._var:return r=r||this.value,e&&"var"!==r&&this.unexpected(),this.parseVarStatement(o,r);case De._while:return this.parseWhileStatement(o);case De._with:return this.parseWithStatement(o);case De.braceL:return this.parseBlock(!0,o);case De.semi:return this.parseEmptyStatement(o);case De._export:case De._import:return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),i===De._import?this.parseImport(o):this.parseExport(o,n);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(o,!0,!e);var a=this.value,s=this.parseExpression();return i===De.name&&"Identifier"===s.type&&this.eat(De.colon)?this.parseLabeledStatement(o,a,s,e):this.parseExpressionStatement(o,s)}},nt.parseBreakContinueStatement=function(e,t){var n="break"===t;this.next(),this.eat(De.semi)||this.insertSemicolon()?e.label=null:this.type!==De.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if(null==e.label||i.name===e.label.name){if(null!=i.kind&&(n||"loop"===i.kind))break;if(e.label&&n)break}}return r===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")},nt.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")},nt.parseDoStatement=function(e){return this.next(),this.labels.push(rt),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(De._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(De.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")},nt.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(rt),this.enterScope(0),this.expect(De.parenL),this.type===De.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===De._var||this.type===De._const||n){var r=this.startNode(),i=n?"let":this.value;return this.next(),this.parseVar(r,!0,i),this.finishNode(r,"VariableDeclaration"),!(this.type===De._in||this.options.ecmaVersion>=6&&this.isContextual("of"))||1!==r.declarations.length||"var"!==i&&r.declarations[0].init?(t>-1&&this.unexpected(t),this.parseFor(e,r)):(this.options.ecmaVersion>=9&&(this.type===De._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,r))}var o=new DestructuringErrors,a=this.parseExpression(!0,o);return this.type===De._in||this.options.ecmaVersion>=6&&this.isContextual("of")?(this.options.ecmaVersion>=9&&(this.type===De._in?t>-1&&this.unexpected(t):e.await=t>-1),this.toAssignable(a,!1,o),this.checkLVal(a),this.parseForIn(e,a)):(this.checkExpressionErrors(o,!0),t>-1&&this.unexpected(t),this.parseFor(e,a))},nt.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,at|(n?0:st),!1,t)},nt.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(De._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")},nt.parseReturnStatement=function(e){return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function"),this.next(),this.eat(De.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")},nt.parseSwitchStatement=function(e){var t;this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(De.braceL),this.labels.push(it),this.enterScope(0);for(var n=!1;this.type!==De.braceR;)if(this.type===De._case||this.type===De._default){var r=this.type===De._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),r?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(De.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")},nt.parseThrowStatement=function(e){return this.next(),Fe.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var ot=[];nt.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===De._catch){var t=this.startNode();if(this.next(),this.eat(De.parenL)){t.param=this.parseBindingAtom();var n="Identifier"===t.param.type;this.enterScope(n?32:0),this.checkLVal(t.param,n?4:2),this.expect(De.parenR)}else this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0);t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(De._finally)?this.parseBlock():null,e.handler||e.finalizer||this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")},nt.parseVarStatement=function(e,t){return this.next(),this.parseVar(e,!1,t),this.semicolon(),this.finishNode(e,"VariableDeclaration")},nt.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(rt),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")},nt.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")},nt.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")},nt.parseLabeledStatement=function(e,t,n,r){for(var i=0,o=this.labels;i<o.length;i+=1){o[i].name===t&&this.raise(n.start,"Label '"+t+"' is already declared")}for(var a=this.type.isLoop?"loop":this.type===De._switch?"switch":null,s=this.labels.length-1;s>=0;s--){var l=this.labels[s];if(l.statementStart!==e.start)break;l.statementStart=this.start,l.kind=a}return this.labels.push({name:t,kind:a,statementStart:this.start}),e.body=this.parseStatement(r?-1===r.indexOf("label")?r+"label":r:"label"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")},nt.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")},nt.parseBlock=function(e,t){for(void 0===e&&(e=!0),void 0===t&&(t=this.startNode()),t.body=[],this.expect(De.braceL),e&&this.enterScope(0);!this.eat(De.braceR);){var n=this.parseStatement(null);t.body.push(n)}return e&&this.exitScope(),this.finishNode(t,"BlockStatement")},nt.parseFor=function(e,t){return e.init=t,this.expect(De.semi),e.test=this.type===De.semi?null:this.parseExpression(),this.expect(De.semi),e.update=this.type===De.parenR?null:this.parseExpression(),this.expect(De.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")},nt.parseForIn=function(e,t){var n=this.type===De._in?"ForInStatement":"ForOfStatement";return this.next(),"ForInStatement"===n&&("AssignmentPattern"===t.type||"VariableDeclaration"===t.type&&null!=t.declarations[0].init&&(this.strict||"Identifier"!==t.declarations[0].id.type))&&this.raise(t.start,"Invalid assignment in for-in loop head"),e.left=t,e.right="ForInStatement"===n?this.parseExpression():this.parseMaybeAssign(),this.expect(De.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,n)},nt.parseVar=function(e,t,n){for(e.declarations=[],e.kind=n;;){var r=this.startNode();if(this.parseVarId(r,n),this.eat(De.eq)?r.init=this.parseMaybeAssign(t):"const"!==n||this.type===De._in||this.options.ecmaVersion>=6&&this.isContextual("of")?"Identifier"===r.id.type||t&&(this.type===De._in||this.isContextual("of"))?r.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected(),e.declarations.push(this.finishNode(r,"VariableDeclarator")),!this.eat(De.comma))break}return e},nt.parseVarId=function(e,t){"const"!==t&&"let"!==t||!this.isContextual("let")||this.raiseRecoverable(this.start,"let is disallowed as a lexically bound name"),e.id=this.parseBindingAtom(),this.checkLVal(e.id,"var"===t?1:2,!1)};var at=1,st=2;nt.parseFunction=function(e,t,n,r){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===De.star&&t&st&&this.unexpected(),e.generator=this.eat(De.star)),this.options.ecmaVersion>=8&&(e.async=!!r),t&at&&(e.id=4&t&&this.type!==De.name?null:this.parseIdent(),!e.id||t&st||this.checkLVal(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?1:2:3));var i=this.yieldPos,o=this.awaitPos,a=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(functionFlags(e.async,e.generator)),t&at||(e.id=this.type===De.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n,!1),this.yieldPos=i,this.awaitPos=o,this.awaitIdentPos=a,this.finishNode(e,t&at?"FunctionDeclaration":"FunctionExpression")},nt.parseFunctionParams=function(e){this.expect(De.parenL),e.params=this.parseBindingList(De.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},nt.parseClass=function(e,t){this.next();var n=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var r=this.startNode(),i=!1;for(r.body=[],this.expect(De.braceL);!this.eat(De.braceR);){var o=this.parseClassElement(null!==e.superClass);o&&(r.body.push(o),"MethodDefinition"===o.type&&"constructor"===o.kind&&(i&&this.raise(o.start,"Duplicate constructor in the same class"),i=!0))}return e.body=this.finishNode(r,"ClassBody"),this.strict=n,this.finishNode(e,t?"ClassDeclaration":"ClassExpression")},nt.parseClassElement=function(e){var t=this;if(this.eat(De.semi))return null;var n=this.startNode(),r=function(e,r){void 0===r&&(r=!1);var i=t.start,o=t.startLoc;return!!t.eatContextual(e)&&(!(t.type===De.parenL||r&&t.canInsertSemicolon())||(n.key&&t.unexpected(),n.computed=!1,n.key=t.startNodeAt(i,o),n.key.name=e,t.finishNode(n.key,"Identifier"),!1))};n.kind="method",n.static=r("static");var i=this.eat(De.star),o=!1;i||(this.options.ecmaVersion>=8&&r("async",!0)?(o=!0,i=this.options.ecmaVersion>=9&&this.eat(De.star)):r("get")?n.kind="get":r("set")&&(n.kind="set")),n.key||this.parsePropertyName(n);var a=n.key,s=!1;return n.computed||n.static||!("Identifier"===a.type&&"constructor"===a.name||"Literal"===a.type&&"constructor"===a.value)?n.static&&"Identifier"===a.type&&"prototype"===a.name&&this.raise(a.start,"Classes may not have a static property named prototype"):("method"!==n.kind&&this.raise(a.start,"Constructor can't have get/set modifier"),i&&this.raise(a.start,"Constructor can't be a generator"),o&&this.raise(a.start,"Constructor can't be an async method"),n.kind="constructor",s=e),this.parseClassMethod(n,i,o,s),"get"===n.kind&&0!==n.value.params.length&&this.raiseRecoverable(n.value.start,"getter should have no params"),"set"===n.kind&&1!==n.value.params.length&&this.raiseRecoverable(n.value.start,"setter should have exactly one param"),"set"===n.kind&&"RestElement"===n.value.params[0].type&&this.raiseRecoverable(n.value.params[0].start,"Setter cannot use rest params"),n},nt.parseClassMethod=function(e,t,n,r){return e.value=this.parseMethod(t,n,r),this.finishNode(e,"MethodDefinition")},nt.parseClassId=function(e,t){this.type===De.name?(e.id=this.parseIdent(),t&&this.checkLVal(e.id,2,!1)):(!0===t&&this.unexpected(),e.id=null)},nt.parseClassSuper=function(e){e.superClass=this.eat(De._extends)?this.parseExprSubscripts():null},nt.parseExport=function(e,t){if(this.next(),this.eat(De.star))return this.expectContextual("from"),this.type!==De.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration");if(this.eat(De._default)){var n;if(this.checkExport(t,"default",this.lastTokStart),this.type===De._function||(n=this.isAsyncFunction())){var r=this.startNode();this.next(),n&&this.next(),e.declaration=this.parseFunction(r,4|at,!1,n)}else if(this.type===De._class){var i=this.startNode();e.declaration=this.parseClass(i,"nullableID")}else e.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(e,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())e.declaration=this.parseStatement(null),"VariableDeclaration"===e.declaration.type?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id.name,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==De.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var o=0,a=e.specifiers;o<a.length;o+=1){var s=a[o];this.checkUnreserved(s.local),this.checkLocalExport(s.local)}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")},nt.checkExport=function(e,t,n){e&&(has(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)},nt.checkPatternExport=function(e,t){var n=t.type;if("Identifier"===n)this.checkExport(e,t.name,t.start);else if("ObjectPattern"===n)for(var r=0,i=t.properties;r<i.length;r+=1){var o=i[r];this.checkPatternExport(e,o)}else if("ArrayPattern"===n)for(var a=0,s=t.elements;a<s.length;a+=1){var l=s[a];l&&this.checkPatternExport(e,l)}else"Property"===n?this.checkPatternExport(e,t.value):"AssignmentPattern"===n?this.checkPatternExport(e,t.left):"RestElement"===n?this.checkPatternExport(e,t.argument):"ParenthesizedExpression"===n&&this.checkPatternExport(e,t.expression)},nt.checkVariableExport=function(e,t){if(e)for(var n=0,r=t;n<r.length;n+=1){var i=r[n];this.checkPatternExport(e,i.id)}},nt.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()},nt.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(De.braceL);!this.eat(De.braceR);){if(n)n=!1;else if(this.expect(De.comma),this.afterTrailingComma(De.braceR))break;var r=this.startNode();r.local=this.parseIdent(!0),r.exported=this.eatContextual("as")?this.parseIdent(!0):r.local,this.checkExport(e,r.exported.name,r.exported.start),t.push(this.finishNode(r,"ExportSpecifier"))}return t},nt.parseImport=function(e){return this.next(),this.type===De.string?(e.specifiers=ot,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===De.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")},nt.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===De.name){var n=this.startNode();if(n.local=this.parseIdent(),this.checkLVal(n.local,2),e.push(this.finishNode(n,"ImportDefaultSpecifier")),!this.eat(De.comma))return e}if(this.type===De.star){var r=this.startNode();return this.next(),this.expectContextual("as"),r.local=this.parseIdent(),this.checkLVal(r.local,2),e.push(this.finishNode(r,"ImportNamespaceSpecifier")),e}for(this.expect(De.braceL);!this.eat(De.braceR);){if(t)t=!1;else if(this.expect(De.comma),this.afterTrailingComma(De.braceR))break;var i=this.startNode();i.imported=this.parseIdent(!0),this.eatContextual("as")?i.local=this.parseIdent():(this.checkUnreserved(i.imported),i.local=i.imported),this.checkLVal(i.local,2),e.push(this.finishNode(i,"ImportSpecifier"))}return e},nt.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)},nt.isDirectiveCandidate=function(e){return"ExpressionStatement"===e.type&&"Literal"===e.expression.type&&"string"==typeof e.expression.value&&('"'===this.input[e.start]||"'"===this.input[e.start])};var lt=Qe.prototype;lt.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&"await"===e.name&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,i=e.properties;r<i.length;r+=1){var o=i[r];this.toAssignable(o,t),"RestElement"!==o.type||"ArrayPattern"!==o.argument.type&&"ObjectPattern"!==o.argument.type||this.raise(o.argument.start,"Unexpected token")}break;case"Property":"init"!==e.kind&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),"AssignmentPattern"===e.argument.type&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":"="!==e.operator&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);case"AssignmentPattern":break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,n);break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e},lt.toAssignableList=function(e,t){for(var n=e.length,r=0;r<n;r++){var i=e[r];i&&this.toAssignable(i,t)}if(n){var o=e[n-1];6===this.options.ecmaVersion&&t&&o&&"RestElement"===o.type&&"Identifier"!==o.argument.type&&this.unexpected(o.argument.start)}return e},lt.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")},lt.parseRestBinding=function(){var e=this.startNode();return this.next(),6===this.options.ecmaVersion&&this.type!==De.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")},lt.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case De.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(De.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case De.braceL:return this.parseObj(!0)}return this.parseIdent()},lt.parseBindingList=function(e,t,n){for(var r=[],i=!0;!this.eat(e);)if(i?i=!1:this.expect(De.comma),t&&this.type===De.comma)r.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===De.ellipsis){var o=this.parseRestBinding();this.parseBindingListItem(o),r.push(o),this.type===De.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}var a=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(a),r.push(a)}return r},lt.parseBindingListItem=function(e){return e},lt.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(De.eq))return n;var r=this.startNodeAt(e,t);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")},lt.checkLVal=function(e,t,n){switch(void 0===t&&(t=0),e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(t?"Binding ":"Assigning to ")+e.name+" in strict mode"),n&&(has(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),0!==t&&5!==t&&this.declareName(e.name,t,e.start);break;case"MemberExpression":t&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ObjectPattern":for(var r=0,i=e.properties;r<i.length;r+=1){var o=i[r];this.checkLVal(o,t,n)}break;case"Property":this.checkLVal(e.value,t,n);break;case"ArrayPattern":for(var a=0,s=e.elements;a<s.length;a+=1){var l=s[a];l&&this.checkLVal(l,t,n)}break;case"AssignmentPattern":this.checkLVal(e.left,t,n);break;case"RestElement":this.checkLVal(e.argument,t,n);break;case"ParenthesizedExpression":this.checkLVal(e.expression,t,n);break;default:this.raise(e.start,(t?"Binding":"Assigning to")+" rvalue")}};var ut=Qe.prototype;ut.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&"SpreadElement"===e.type||this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var r,i=e.key;switch(i.type){case"Identifier":r=i.name;break;case"Literal":r=String(i.value);break;default:return}var o=e.kind;if(this.options.ecmaVersion>=6)"__proto__"===r&&"init"===o&&(t.proto&&(n&&n.doubleProto<0?n.doubleProto=i.start:this.raiseRecoverable(i.start,"Redefinition of __proto__ property")),t.proto=!0);else{var a=t[r="$"+r];if(a)("init"===o?this.strict&&a.init||a.get||a.set:a.init||a[o])&&this.raiseRecoverable(i.start,"Redefinition of property");else a=t[r]={init:!1,get:!1,set:!1};a[o]=!0}}},ut.parseExpression=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(e,t);if(this.type===De.comma){var o=this.startNodeAt(n,r);for(o.expressions=[i];this.eat(De.comma);)o.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(o,"SequenceExpression")}return i},ut.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var r=!1,i=-1,o=-1,a=-1;t?(i=t.parenthesizedAssign,o=t.trailingComma,a=t.shorthandAssign,t.parenthesizedAssign=t.trailingComma=t.shorthandAssign=-1):(t=new DestructuringErrors,r=!0);var s=this.start,l=this.startLoc;this.type!==De.parenL&&this.type!==De.name||(this.potentialArrowAt=this.start);var u=this.parseMaybeConditional(e,t);if(n&&(u=n.call(this,u,s,l)),this.type.isAssign){var c=this.startNodeAt(s,l);return c.operator=this.value,c.left=this.type===De.eq?this.toAssignable(u,!1,t):u,r||DestructuringErrors.call(t),t.shorthandAssign=-1,this.checkLVal(u),this.next(),c.right=this.parseMaybeAssign(e),this.finishNode(c,"AssignmentExpression")}return r&&this.checkExpressionErrors(t,!0),i>-1&&(t.parenthesizedAssign=i),o>-1&&(t.trailingComma=o),a>-1&&(t.shorthandAssign=a),u},ut.parseMaybeConditional=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return i;if(this.eat(De.question)){var o=this.startNodeAt(n,r);return o.test=i,o.consequent=this.parseMaybeAssign(),this.expect(De.colon),o.alternate=this.parseMaybeAssign(e),this.finishNode(o,"ConditionalExpression")}return i},ut.parseExprOps=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(t,!1);return this.checkExpressionErrors(t)?i:i.start===n&&"ArrowFunctionExpression"===i.type?i:this.parseExprOp(i,n,r,-1,e)},ut.parseExprOp=function(e,t,n,r,i){var o=this.type.binop;if(null!=o&&(!i||this.type!==De._in)&&o>r){var a=this.type===De.logicalOR||this.type===De.logicalAND,s=this.value;this.next();var l=this.start,u=this.startLoc,c=this.parseExprOp(this.parseMaybeUnary(null,!1),l,u,o,i),p=this.buildBinary(t,n,e,c,s,a);return this.parseExprOp(p,t,n,r,i)}return e},ut.buildBinary=function(e,t,n,r,i,o){var a=this.startNodeAt(e,t);return a.left=n,a.operator=i,a.right=r,this.finishNode(a,o?"LogicalExpression":"BinaryExpression")},ut.parseMaybeUnary=function(e,t){var n,r=this.start,i=this.startLoc;if(this.isContextual("await")&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction))n=this.parseAwait(),t=!0;else if(this.type.prefix){var o=this.startNode(),a=this.type===De.incDec;o.operator=this.value,o.prefix=!0,this.next(),o.argument=this.parseMaybeUnary(null,!0),this.checkExpressionErrors(e,!0),a?this.checkLVal(o.argument):this.strict&&"delete"===o.operator&&"Identifier"===o.argument.type?this.raiseRecoverable(o.start,"Deleting local variable in strict mode"):t=!0,n=this.finishNode(o,a?"UpdateExpression":"UnaryExpression")}else{if(n=this.parseExprSubscripts(e),this.checkExpressionErrors(e))return n;for(;this.type.postfix&&!this.canInsertSemicolon();){var s=this.startNodeAt(r,i);s.operator=this.value,s.prefix=!1,s.argument=n,this.checkLVal(n),this.next(),n=this.finishNode(s,"UpdateExpression")}}return!t&&this.eat(De.starstar)?this.buildBinary(r,i,n,this.parseMaybeUnary(null,!1),"**",!1):n},ut.parseExprSubscripts=function(e){var t=this.start,n=this.startLoc,r=this.parseExprAtom(e),i="ArrowFunctionExpression"===r.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd);if(this.checkExpressionErrors(e)||i)return r;var o=this.parseSubscripts(r,t,n);return e&&"MemberExpression"===o.type&&(e.parenthesizedAssign>=o.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=o.start&&(e.parenthesizedBind=-1)),o},ut.parseSubscripts=function(e,t,n,r){for(var i=this.options.ecmaVersion>=8&&"Identifier"===e.type&&"async"===e.name&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&"async"===this.input.slice(e.start,e.end);;){var o=this.parseSubscript(e,t,n,r,i);if(o===e||"ArrowFunctionExpression"===o.type)return o;e=o}},ut.parseSubscript=function(e,t,n,r,i){var o=this.eat(De.bracketL);if(o||this.eat(De.dot)){var a=this.startNodeAt(t,n);a.object=e,a.property=o?this.parseExpression():this.parseIdent(!0),a.computed=!!o,o&&this.expect(De.bracketR),e=this.finishNode(a,"MemberExpression")}else if(!r&&this.eat(De.parenL)){var s=new DestructuringErrors,l=this.yieldPos,u=this.awaitPos,c=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var p=this.parseExprList(De.parenR,this.options.ecmaVersion>=8,!1,s);if(i&&!this.canInsertSemicolon()&&this.eat(De.arrow))return this.checkPatternErrors(s,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=l,this.awaitPos=u,this.awaitIdentPos=c,this.parseArrowExpression(this.startNodeAt(t,n),p,!0);this.checkExpressionErrors(s,!0),this.yieldPos=l||this.yieldPos,this.awaitPos=u||this.awaitPos,this.awaitIdentPos=c||this.awaitIdentPos;var h=this.startNodeAt(t,n);h.callee=e,h.arguments=p,e=this.finishNode(h,"CallExpression")}else if(this.type===De.backQuote){var f=this.startNodeAt(t,n);f.tag=e,f.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(f,"TaggedTemplateExpression")}return e},ut.parseExprAtom=function(e){this.type===De.slash&&this.readRegexp();var t,n=this.potentialArrowAt===this.start;switch(this.type){case De._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),t=this.startNode(),this.next(),this.type!==De.parenL||this.allowDirectSuper||this.raise(t.start,"super() call outside constructor of a subclass"),this.type!==De.dot&&this.type!==De.bracketL&&this.type!==De.parenL&&this.unexpected(),this.finishNode(t,"Super");case De._this:return t=this.startNode(),this.next(),this.finishNode(t,"ThisExpression");case De.name:var r=this.start,i=this.startLoc,o=this.containsEsc,a=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!o&&"async"===a.name&&!this.canInsertSemicolon()&&this.eat(De._function))return this.parseFunction(this.startNodeAt(r,i),0,!1,!0);if(n&&!this.canInsertSemicolon()){if(this.eat(De.arrow))return this.parseArrowExpression(this.startNodeAt(r,i),[a],!1);if(this.options.ecmaVersion>=8&&"async"===a.name&&this.type===De.name&&!o)return a=this.parseIdent(!1),!this.canInsertSemicolon()&&this.eat(De.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(r,i),[a],!0)}return a;case De.regexp:var s=this.value;return(t=this.parseLiteral(s.value)).regex={pattern:s.pattern,flags:s.flags},t;case De.num:case De.string:return this.parseLiteral(this.value);case De._null:case De._true:case De._false:return(t=this.startNode()).value=this.type===De._null?null:this.type===De._true,t.raw=this.type.keyword,this.next(),this.finishNode(t,"Literal");case De.parenL:var l=this.start,u=this.parseParenAndDistinguishExpression(n);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(u)&&(e.parenthesizedAssign=l),e.parenthesizedBind<0&&(e.parenthesizedBind=l)),u;case De.bracketL:return t=this.startNode(),this.next(),t.elements=this.parseExprList(De.bracketR,!0,!0,e),this.finishNode(t,"ArrayExpression");case De.braceL:return this.parseObj(!1,e);case De._function:return t=this.startNode(),this.next(),this.parseFunction(t,0);case De._class:return this.parseClass(this.startNode(),!1);case De._new:return this.parseNew();case De.backQuote:return this.parseTemplate();default:this.unexpected()}},ut.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),this.next(),this.finishNode(t,"Literal")},ut.parseParenExpression=function(){this.expect(De.parenL);var e=this.parseExpression();return this.expect(De.parenR),e},ut.parseParenAndDistinguishExpression=function(e){var t,n=this.start,r=this.startLoc,i=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var o,a=this.start,s=this.startLoc,l=[],u=!0,c=!1,p=new DestructuringErrors,h=this.yieldPos,f=this.awaitPos;for(this.yieldPos=0,this.awaitPos=0;this.type!==De.parenR;){if(u?u=!1:this.expect(De.comma),i&&this.afterTrailingComma(De.parenR,!0)){c=!0;break}if(this.type===De.ellipsis){o=this.start,l.push(this.parseParenItem(this.parseRestBinding())),this.type===De.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}l.push(this.parseMaybeAssign(!1,p,this.parseParenItem))}var d=this.start,g=this.startLoc;if(this.expect(De.parenR),e&&!this.canInsertSemicolon()&&this.eat(De.arrow))return this.checkPatternErrors(p,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=h,this.awaitPos=f,this.parseParenArrowList(n,r,l);l.length&&!c||this.unexpected(this.lastTokStart),o&&this.unexpected(o),this.checkExpressionErrors(p,!0),this.yieldPos=h||this.yieldPos,this.awaitPos=f||this.awaitPos,l.length>1?((t=this.startNodeAt(a,s)).expressions=l,this.finishNodeAt(t,"SequenceExpression",d,g)):t=l[0]}else t=this.parseParenExpression();if(this.options.preserveParens){var m=this.startNodeAt(n,r);return m.expression=t,this.finishNode(m,"ParenthesizedExpression")}return t},ut.parseParenItem=function(e){return e},ut.parseParenArrowList=function(e,t,n){return this.parseArrowExpression(this.startNodeAt(e,t),n)};var ct=[];ut.parseNew=function(){var e=this.startNode(),t=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(De.dot)){e.meta=t;var n=this.containsEsc;return e.property=this.parseIdent(!0),("target"!==e.property.name||n)&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is new.target"),this.inNonArrowFunction()||this.raiseRecoverable(e.start,"new.target can only be used in functions"),this.finishNode(e,"MetaProperty")}var r=this.start,i=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(),r,i,!0),this.eat(De.parenL)?e.arguments=this.parseExprList(De.parenR,this.options.ecmaVersion>=8,!1):e.arguments=ct,this.finishNode(e,"NewExpression")},ut.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===De.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value},this.next(),n.tail=this.type===De.backQuote,this.finishNode(n,"TemplateElement")},ut.parseTemplate=function(e){void 0===e&&(e={});var t=e.isTagged;void 0===t&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:t});for(n.quasis=[r];!r.tail;)this.type===De.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(De.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(De.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")},ut.isAsyncProp=function(e){return!e.computed&&"Identifier"===e.key.type&&"async"===e.key.name&&(this.type===De.name||this.type===De.num||this.type===De.string||this.type===De.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===De.star)&&!Fe.test(this.input.slice(this.lastTokEnd,this.start))},ut.parseObj=function(e,t){var n=this.startNode(),r=!0,i={};for(n.properties=[],this.next();!this.eat(De.braceR);){if(r)r=!1;else if(this.expect(De.comma),this.afterTrailingComma(De.braceR))break;var o=this.parseProperty(e,t);e||this.checkPropClash(o,i,t),n.properties.push(o)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")},ut.parseProperty=function(e,t){var n,r,i,o,a=this.startNode();if(this.options.ecmaVersion>=9&&this.eat(De.ellipsis))return e?(a.argument=this.parseIdent(!1),this.type===De.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(a,"RestElement")):(this.type===De.parenL&&t&&(t.parenthesizedAssign<0&&(t.parenthesizedAssign=this.start),t.parenthesizedBind<0&&(t.parenthesizedBind=this.start)),a.argument=this.parseMaybeAssign(!1,t),this.type===De.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(a,"SpreadElement"));this.options.ecmaVersion>=6&&(a.method=!1,a.shorthand=!1,(e||t)&&(i=this.start,o=this.startLoc),e||(n=this.eat(De.star)));var s=this.containsEsc;return this.parsePropertyName(a),!e&&!s&&this.options.ecmaVersion>=8&&!n&&this.isAsyncProp(a)?(r=!0,n=this.options.ecmaVersion>=9&&this.eat(De.star),this.parsePropertyName(a,t)):r=!1,this.parsePropertyValue(a,e,n,r,i,o,t,s),this.finishNode(a,"Property")},ut.parsePropertyValue=function(e,t,n,r,i,o,a,s){if((n||r)&&this.type===De.colon&&this.unexpected(),this.eat(De.colon))e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,a),e.kind="init";else if(this.options.ecmaVersion>=6&&this.type===De.parenL)t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,r);else if(t||s||!(this.options.ecmaVersion>=5)||e.computed||"Identifier"!==e.key.type||"get"!==e.key.name&&"set"!==e.key.name||this.type===De.comma||this.type===De.braceR)this.options.ecmaVersion>=6&&!e.computed&&"Identifier"===e.key.type?((n||r)&&this.unexpected(),this.checkUnreserved(e.key),"await"!==e.key.name||this.awaitIdentPos||(this.awaitIdentPos=i),e.kind="init",t?e.value=this.parseMaybeDefault(i,o,e.key):this.type===De.eq&&a?(a.shorthandAssign<0&&(a.shorthandAssign=this.start),e.value=this.parseMaybeDefault(i,o,e.key)):e.value=e.key,e.shorthand=!0):this.unexpected();else{(n||r)&&this.unexpected(),e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var l="get"===e.kind?0:1;if(e.value.params.length!==l){var u=e.value.start;"get"===e.kind?this.raiseRecoverable(u,"getter should have no params"):this.raiseRecoverable(u,"setter should have exactly one param")}else"set"===e.kind&&"RestElement"===e.value.params[0].type&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")}},ut.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(De.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(De.bracketR),e.key;e.computed=!1}return e.key=this.type===De.num||this.type===De.string?this.parseExprAtom():this.parseIdent(!0)},ut.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)},ut.parseMethod=function(e,t,n){var r=this.startNode(),i=this.yieldPos,o=this.awaitPos,a=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=e),this.options.ecmaVersion>=8&&(r.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(64|functionFlags(t,r.generator)|(n?128:0)),this.expect(De.parenL),r.params=this.parseBindingList(De.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0),this.yieldPos=i,this.awaitPos=o,this.awaitIdentPos=a,this.finishNode(r,"FunctionExpression")},ut.parseArrowExpression=function(e,t,n){var r=this.yieldPos,i=this.awaitPos,o=this.awaitIdentPos;return this.enterScope(16|functionFlags(n,!1)),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1),this.yieldPos=r,this.awaitPos=i,this.awaitIdentPos=o,this.finishNode(e,"ArrowFunctionExpression")},ut.parseFunctionBody=function(e,t,n){var r=t&&this.type!==De.braceL,i=this.strict,o=!1;if(r)e.body=this.parseMaybeAssign(),e.expression=!0,this.checkParams(e,!1);else{var a=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);i&&!a||(o=this.strictDirective(this.end))&&a&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list");var s=this.labels;this.labels=[],o&&(this.strict=!0),this.checkParams(e,!i&&!o&&!t&&!n&&this.isSimpleParamList(e.params)),e.body=this.parseBlock(!1),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=s}this.exitScope(),this.strict&&e.id&&this.checkLVal(e.id,5),this.strict=i},ut.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1){if("Identifier"!==n[t].type)return!1}return!0},ut.checkParams=function(e,t){for(var n={},r=0,i=e.params;r<i.length;r+=1){var o=i[r];this.checkLVal(o,1,t?null:n)}},ut.parseExprList=function(e,t,n,r){for(var i=[],o=!0;!this.eat(e);){if(o)o=!1;else if(this.expect(De.comma),t&&this.afterTrailingComma(e))break;var a=void 0;n&&this.type===De.comma?a=null:this.type===De.ellipsis?(a=this.parseSpread(r),r&&this.type===De.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):a=this.parseMaybeAssign(!1,r),i.push(a)}return i},ut.checkUnreserved=function(e){var t=e.start,n=e.end,r=e.name;(this.inGenerator&&"yield"===r&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&"await"===r&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),this.keywords.test(r)&&this.raise(t,"Unexpected keyword '"+r+"'"),this.options.ecmaVersion<6&&-1!==this.input.slice(t,n).indexOf("\\"))||(this.strict?this.reservedWordsStrict:this.reservedWords).test(r)&&(this.inAsync||"await"!==r||this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+r+"' is reserved"))},ut.parseIdent=function(e,t){var n=this.startNode();return e&&"never"===this.options.allowReserved&&(e=!1),this.type===De.name?n.name=this.value:this.type.keyword?(n.name=this.type.keyword,"class"!==n.name&&"function"!==n.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected(),this.next(),this.finishNode(n,"Identifier"),e||(this.checkUnreserved(n),"await"!==n.name||this.awaitIdentPos||(this.awaitIdentPos=n.start)),n},ut.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===De.semi||this.canInsertSemicolon()||this.type!==De.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(De.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")},ut.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var e=this.startNode();return this.next(),e.argument=this.parseMaybeUnary(null,!0),this.finishNode(e,"AwaitExpression")};var pt=Qe.prototype;pt.raise=function(e,t){var n=getLineInfo(this.input,e);t+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=this.pos,r},pt.raiseRecoverable=pt.raise,pt.curPosition=function(){if(this.options.locations)return new qe(this.curLine,this.pos-this.lineStart)};var ht=Qe.prototype,ft=function Scope(e){this.flags=e,this.var=[],this.lexical=[],this.functions=[]};ht.enterScope=function(e){this.scopeStack.push(new ft(e))},ht.exitScope=function(){this.scopeStack.pop()},ht.treatFunctionsAsVarInScope=function(e){return e.flags&Ke||!this.inModule&&1&e.flags},ht.declareName=function(e,t,n){var r=!1;if(2===t){var i=this.currentScope();r=i.lexical.indexOf(e)>-1||i.functions.indexOf(e)>-1||i.var.indexOf(e)>-1,i.lexical.push(e),this.inModule&&1&i.flags&&delete this.undefinedExports[e]}else if(4===t){this.currentScope().lexical.push(e)}else if(3===t){var o=this.currentScope();r=this.treatFunctionsAsVar?o.lexical.indexOf(e)>-1:o.lexical.indexOf(e)>-1||o.var.indexOf(e)>-1,o.functions.push(e)}else for(var a=this.scopeStack.length-1;a>=0;--a){var s=this.scopeStack[a];if(s.lexical.indexOf(e)>-1&&!(32&s.flags&&s.lexical[0]===e)||!this.treatFunctionsAsVarInScope(s)&&s.functions.indexOf(e)>-1){r=!0;break}if(s.var.push(e),this.inModule&&1&s.flags&&delete this.undefinedExports[e],s.flags&Ze)break}r&&this.raiseRecoverable(n,"Identifier '"+e+"' has already been declared")},ht.checkLocalExport=function(e){-1===this.scopeStack[0].lexical.indexOf(e.name)&&-1===this.scopeStack[0].var.indexOf(e.name)&&(this.undefinedExports[e.name]=e)},ht.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},ht.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&Ze)return t}},ht.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&Ze&&!(16&t.flags))return t}};var dt=function Node(e,t,n){this.type="",this.start=t,this.end=0,e.options.locations&&(this.loc=new He(e,n)),e.options.directSourceFile&&(this.sourceFile=e.options.directSourceFile),e.options.ranges&&(this.range=[t,0])},gt=Qe.prototype;function finishNodeAt(e,t,n,r){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=r),this.options.ranges&&(e.range[1]=n),e}gt.startNode=function(){return new dt(this,this.start,this.startLoc)},gt.startNodeAt=function(e,t){return new dt(this,e,t)},gt.finishNode=function(e,t){return finishNodeAt.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)},gt.finishNodeAt=function(e,t,n,r){return finishNodeAt.call(this,e,t,n,r)};var mt=function TokContext(e,t,n,r,i){this.token=e,this.isExpr=!!t,this.preserveSpace=!!n,this.override=r,this.generator=!!i},yt={b_stat:new mt("{",!1),b_expr:new mt("{",!0),b_tmpl:new mt("${",!1),p_stat:new mt("(",!1),p_expr:new mt("(",!0),q_tmpl:new mt("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new mt("function",!1),f_expr:new mt("function",!0),f_expr_gen:new mt("function",!0,!1,null,!0),f_gen:new mt("function",!1,!1,null,!0)},vt=Qe.prototype;vt.initialContext=function(){return[yt.b_stat]},vt.braceIsBlock=function(e){var t=this.curContext();return t===yt.f_expr||t===yt.f_stat||(e!==De.colon||t!==yt.b_stat&&t!==yt.b_expr?e===De._return||e===De.name&&this.exprAllowed?Fe.test(this.input.slice(this.lastTokEnd,this.start)):e===De._else||e===De.semi||e===De.eof||e===De.parenR||e===De.arrow||(e===De.braceL?t===yt.b_stat:e!==De._var&&e!==De._const&&e!==De.name&&!this.exprAllowed):!t.isExpr)},vt.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if("function"===t.token)return t.generator}return!1},vt.updateContext=function(e){var t,n=this.type;n.keyword&&e===De.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr},De.parenR.updateContext=De.braceR.updateContext=function(){if(1!==this.context.length){var e=this.context.pop();e===yt.b_stat&&"function"===this.curContext().token&&(e=this.context.pop()),this.exprAllowed=!e.isExpr}else this.exprAllowed=!0},De.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?yt.b_stat:yt.b_expr),this.exprAllowed=!0},De.dollarBraceL.updateContext=function(){this.context.push(yt.b_tmpl),this.exprAllowed=!0},De.parenL.updateContext=function(e){var t=e===De._if||e===De._for||e===De._with||e===De._while;this.context.push(t?yt.p_stat:yt.p_expr),this.exprAllowed=!0},De.incDec.updateContext=function(){},De._function.updateContext=De._class.updateContext=function(e){!e.beforeExpr||e===De.semi||e===De._else||e===De._return&&Fe.test(this.input.slice(this.lastTokEnd,this.start))||(e===De.colon||e===De.braceL)&&this.curContext()===yt.b_stat?this.context.push(yt.f_stat):this.context.push(yt.f_expr),this.exprAllowed=!1},De.backQuote.updateContext=function(){this.curContext()===yt.q_tmpl?this.context.pop():this.context.push(yt.q_tmpl),this.exprAllowed=!1},De.star.updateContext=function(e){if(e===De._function){var t=this.context.length-1;this.context[t]===yt.f_expr?this.context[t]=yt.f_expr_gen:this.context[t]=yt.f_gen}this.exprAllowed=!0},De.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==De.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var _t="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",bt={9:_t,10:_t+" Extended_Pictographic"},xt="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",wt="Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",St={9:wt,10:wt+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd"},Et={};function buildUnicodeData(e){var t=Et[e]={binary:wordsRegexp(bt[e]+" "+xt),nonBinary:{General_Category:wordsRegexp(xt),Script:wordsRegexp(St[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}buildUnicodeData(9),buildUnicodeData(10);var Pt=Qe.prototype,Ct=function RegExpValidationState(e){this.parser=e,this.validFlags="gim"+(e.options.ecmaVersion>=6?"uy":"")+(e.options.ecmaVersion>=9?"s":""),this.unicodeProperties=Et[e.options.ecmaVersion>=10?10:e.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};function codePointToString$1(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}function isSyntaxCharacter(e){return 36===e||e>=40&&e<=43||46===e||63===e||e>=91&&e<=94||e>=123&&e<=125}function isRegExpIdentifierStart(e){return isIdentifierStart(e,!0)||36===e||95===e}function isRegExpIdentifierPart(e){return isIdentifierChar(e,!0)||36===e||95===e||8204===e||8205===e}function isControlLetter(e){return e>=65&&e<=90||e>=97&&e<=122}function isCharacterClassEscape(e){return 100===e||68===e||115===e||83===e||119===e||87===e}function isUnicodePropertyNameCharacter(e){return isControlLetter(e)||95===e}function isUnicodePropertyValueCharacter(e){return isUnicodePropertyNameCharacter(e)||isDecimalDigit(e)}function isDecimalDigit(e){return e>=48&&e<=57}function isHexDigit(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function hexToInt(e){return e>=65&&e<=70?e-65+10:e>=97&&e<=102?e-97+10:e-48}function isOctalDigit(e){return e>=48&&e<=55}Ct.prototype.reset=function reset(e,t,n){var r=-1!==n.indexOf("u");this.start=0|e,this.source=t+"",this.flags=n,this.switchU=r&&this.parser.options.ecmaVersion>=6,this.switchN=r&&this.parser.options.ecmaVersion>=9},Ct.prototype.raise=function raise(e){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+e)},Ct.prototype.at=function at(e){var t=this.source,n=t.length;if(e>=n)return-1;var r=t.charCodeAt(e);return!this.switchU||r<=55295||r>=57344||e+1>=n?r:(r<<10)+t.charCodeAt(e+1)-56613888},Ct.prototype.nextIndex=function nextIndex(e){var t=this.source,n=t.length;if(e>=n)return n;var r=t.charCodeAt(e);return!this.switchU||r<=55295||r>=57344||e+1>=n?e+1:e+2},Ct.prototype.current=function current(){return this.at(this.pos)},Ct.prototype.lookahead=function lookahead(){return this.at(this.nextIndex(this.pos))},Ct.prototype.advance=function advance(){this.pos=this.nextIndex(this.pos)},Ct.prototype.eat=function eat(e){return this.current()===e&&(this.advance(),!0)},Pt.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,r=0;r<n.length;r++){var i=n.charAt(r);-1===t.indexOf(i)&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(i,r+1)>-1&&this.raise(e.start,"Duplicate regular expression flag")}},Pt.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&e.groupNames.length>0&&(e.switchN=!0,this.regexp_pattern(e))},Pt.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames.length=0,e.backReferenceNames.length=0,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var r=n[t];-1===e.groupNames.indexOf(r)&&e.raise("Invalid named capture referenced")}},Pt.regexp_disjunction=function(e){for(this.regexp_alternative(e);e.eat(124);)this.regexp_alternative(e);this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")},Pt.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););},Pt.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):!(e.switchU?!this.regexp_eatAtom(e):!this.regexp_eatExtendedAtom(e))&&(this.regexp_eatQuantifier(e),!0)},Pt.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1},Pt.regexp_eatQuantifier=function(e,t){return void 0===t&&(t=!1),!!this.regexp_eatQuantifierPrefix(e,t)&&(e.eat(63),!0)},Pt.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)},Pt.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue),e.eat(125)))return-1!==i&&i<r&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1},Pt.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)},Pt.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1},Pt.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1},Pt.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):63===e.current()&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1},Pt.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)},Pt.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1},Pt.regexp_eatSyntaxCharacter=function(e){var t=e.current();return!!isSyntaxCharacter(t)&&(e.lastIntValue=t,e.advance(),!0)},Pt.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;-1!==(n=e.current())&&!isSyntaxCharacter(n);)e.advance();return e.pos!==t},Pt.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return!(-1===t||36===t||t>=40&&t<=43||46===t||63===t||91===t||94===t||124===t)&&(e.advance(),!0)},Pt.regexp_groupSpecifier=function(e){if(e.eat(63)){if(this.regexp_eatGroupName(e))return-1!==e.groupNames.indexOf(e.lastStringValue)&&e.raise("Duplicate capture group name"),void e.groupNames.push(e.lastStringValue);e.raise("Invalid group")}},Pt.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1},Pt.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=codePointToString$1(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=codePointToString$1(e.lastIntValue);return!0}return!1},Pt.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=e.current();return e.advance(),92===n&&this.regexp_eatRegExpUnicodeEscapeSequence(e)&&(n=e.lastIntValue),isRegExpIdentifierStart(n)?(e.lastIntValue=n,!0):(e.pos=t,!1)},Pt.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=e.current();return e.advance(),92===n&&this.regexp_eatRegExpUnicodeEscapeSequence(e)&&(n=e.lastIntValue),isRegExpIdentifierPart(n)?(e.lastIntValue=n,!0):(e.pos=t,!1)},Pt.regexp_eatAtomEscape=function(e){return!!(this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e))||(e.switchU&&(99===e.current()&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)},Pt.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1},Pt.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1},Pt.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)},Pt.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1},Pt.regexp_eatZero=function(e){return 48===e.current()&&!isDecimalDigit(e.lookahead())&&(e.lastIntValue=0,e.advance(),!0)},Pt.regexp_eatControlEscape=function(e){var t=e.current();return 116===t?(e.lastIntValue=9,e.advance(),!0):110===t?(e.lastIntValue=10,e.advance(),!0):118===t?(e.lastIntValue=11,e.advance(),!0):102===t?(e.lastIntValue=12,e.advance(),!0):114===t&&(e.lastIntValue=13,e.advance(),!0)},Pt.regexp_eatControlLetter=function(e){var t=e.current();return!!isControlLetter(t)&&(e.lastIntValue=t%32,e.advance(),!0)},Pt.regexp_eatRegExpUnicodeEscapeSequence=function(e){var t,n=e.pos;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var r=e.lastIntValue;if(e.switchU&&r>=55296&&r<=56319){var i=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var o=e.lastIntValue;if(o>=56320&&o<=57343)return e.lastIntValue=1024*(r-55296)+(o-56320)+65536,!0}e.pos=i,e.lastIntValue=r}return!0}if(e.switchU&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&((t=e.lastIntValue)>=0&&t<=1114111))return!0;e.switchU&&e.raise("Invalid unicode escape"),e.pos=n}return!1},Pt.regexp_eatIdentityEscape=function(e){if(e.switchU)return!!this.regexp_eatSyntaxCharacter(e)||!!e.eat(47)&&(e.lastIntValue=47,!0);var t=e.current();return!(99===t||e.switchN&&107===t)&&(e.lastIntValue=t,e.advance(),!0)},Pt.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do{e.lastIntValue=10*e.lastIntValue+(t-48),e.advance()}while((t=e.current())>=48&&t<=57);return!0}return!1},Pt.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(isCharacterClassEscape(t))return e.lastIntValue=-1,e.advance(),!0;if(e.switchU&&this.options.ecmaVersion>=9&&(80===t||112===t)){if(e.lastIntValue=-1,e.advance(),e.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(e)&&e.eat(125))return!0;e.raise("Invalid property name")}return!1},Pt.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,r),!0}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,i),!0}return!1},Pt.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){has(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(n)||e.raise("Invalid property value")},Pt.regexp_validateUnicodePropertyNameOrValue=function(e,t){e.unicodeProperties.binary.test(t)||e.raise("Invalid property name")},Pt.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";isUnicodePropertyNameCharacter(t=e.current());)e.lastStringValue+=codePointToString$1(t),e.advance();return""!==e.lastStringValue},Pt.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";isUnicodePropertyValueCharacter(t=e.current());)e.lastStringValue+=codePointToString$1(t),e.advance();return""!==e.lastStringValue},Pt.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)},Pt.regexp_eatCharacterClass=function(e){if(e.eat(91)){if(e.eat(94),this.regexp_classRanges(e),e.eat(93))return!0;e.raise("Unterminated character class")}return!1},Pt.regexp_classRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;!e.switchU||-1!==t&&-1!==n||e.raise("Invalid character class"),-1!==t&&-1!==n&&t>n&&e.raise("Range out of order in character class")}}},Pt.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(99===n||isOctalDigit(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var r=e.current();return 93!==r&&(e.lastIntValue=r,e.advance(),!0)},Pt.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)},Pt.regexp_eatClassControlLetter=function(e){var t=e.current();return!(!isDecimalDigit(t)&&95!==t)&&(e.lastIntValue=t%32,e.advance(),!0)},Pt.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1},Pt.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;isDecimalDigit(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t},Pt.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;isHexDigit(n=e.current());)e.lastIntValue=16*e.lastIntValue+hexToInt(n),e.advance();return e.pos!==t},Pt.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=64*t+8*n+e.lastIntValue:e.lastIntValue=8*t+n}else e.lastIntValue=t;return!0}return!1},Pt.regexp_eatOctalDigit=function(e){var t=e.current();return isOctalDigit(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)},Pt.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var r=0;r<t;++r){var i=e.current();if(!isHexDigit(i))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+hexToInt(i),e.advance()}return!0};var kt=function Token(e){this.type=e.type,this.value=e.value,this.start=e.start,this.end=e.end,e.options.locations&&(this.loc=new He(e,e.startLoc,e.endLoc)),e.options.ranges&&(this.range=[e.start,e.end])},Tt=Qe.prototype;function codePointToString(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}Tt.next=function(){this.options.onToken&&this.options.onToken(new kt(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},Tt.getToken=function(){return this.next(),new kt(this)},"undefined"!=typeof Symbol&&(Tt[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===De.eof,value:t}}}}),Tt.curContext=function(){return this.context[this.context.length-1]},Tt.nextToken=function(){var e=this.curContext();return e&&e.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(De.eof):e.override?e.override(this):void this.readToken(this.fullCharCodeAtPos())},Tt.readToken=function(e){return isIdentifierStart(e,this.options.ecmaVersion>=6)||92===e?this.readWord():this.getTokenFromCode(e)},Tt.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);return e<=55295||e>=57344?e:(e<<10)+this.input.charCodeAt(this.pos+1)-56613888},Tt.skipBlockComment=function(){var e,t=this.options.onComment&&this.curPosition(),n=this.pos,r=this.input.indexOf("*/",this.pos+=2);if(-1===r&&this.raise(this.pos-2,"Unterminated comment"),this.pos=r+2,this.options.locations)for(Ne.lastIndex=n;(e=Ne.exec(this.input))&&e.index<this.pos;)++this.curLine,this.lineStart=e.index+e[0].length;this.options.onComment&&this.options.onComment(!0,this.input.slice(n+2,r),n,this.pos,t,this.curPosition())},Tt.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!isNewLine(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())},Tt.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(!(e>8&&e<14||e>=5760&&Be.test(String.fromCharCode(e))))break e;++this.pos}}},Tt.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)},Tt.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&46===e&&46===t?(this.pos+=3,this.finishToken(De.ellipsis)):(++this.pos,this.finishToken(De.dot))},Tt.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===e?this.finishOp(De.assign,2):this.finishOp(De.slash,1)},Tt.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,r=42===e?De.star:De.modulo;return this.options.ecmaVersion>=7&&42===e&&42===t&&(++n,r=De.starstar,t=this.input.charCodeAt(this.pos+2)),61===t?this.finishOp(De.assign,n+1):this.finishOp(r,n)},Tt.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?this.finishOp(124===e?De.logicalOR:De.logicalAND,2):61===t?this.finishOp(De.assign,2):this.finishOp(124===e?De.bitwiseOR:De.bitwiseAND,1)},Tt.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(De.assign,2):this.finishOp(De.bitwiseXOR,1)},Tt.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?45!==t||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!Fe.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(De.incDec,2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===t?this.finishOp(De.assign,2):this.finishOp(De.plusMin,1)},Tt.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=62===e&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+n)?this.finishOp(De.assign,n+1):this.finishOp(De.bitShift,n)):33!==t||60!==e||this.inModule||45!==this.input.charCodeAt(this.pos+2)||45!==this.input.charCodeAt(this.pos+3)?(61===t&&(n=2),this.finishOp(De.relational,n)):(this.skipLineComment(4),this.skipSpace(),this.nextToken())},Tt.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return 61===t?this.finishOp(De.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===e&&62===t&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(De.arrow)):this.finishOp(61===e?De.eq:De.prefix,1)},Tt.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(De.parenL);case 41:return++this.pos,this.finishToken(De.parenR);case 59:return++this.pos,this.finishToken(De.semi);case 44:return++this.pos,this.finishToken(De.comma);case 91:return++this.pos,this.finishToken(De.bracketL);case 93:return++this.pos,this.finishToken(De.bracketR);case 123:return++this.pos,this.finishToken(De.braceL);case 125:return++this.pos,this.finishToken(De.braceR);case 58:return++this.pos,this.finishToken(De.colon);case 63:return++this.pos,this.finishToken(De.question);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(De.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(120===t||88===t)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(111===t||79===t)return this.readRadixNumber(8);if(98===t||66===t)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 126:return this.finishOp(De.prefix,1)}this.raise(this.pos,"Unexpected character '"+codePointToString(e)+"'")},Tt.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)},Tt.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(Fe.test(r)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if("["===r)t=!0;else if("]"===r&&t)t=!1;else if("/"===r&&!t)break;e="\\"===r}++this.pos}var i=this.input.slice(n,this.pos);++this.pos;var o=this.pos,a=this.readWord1();this.containsEsc&&this.unexpected(o);var s=this.regexpState||(this.regexpState=new Ct(this));s.reset(n,i,a),this.validateRegExpFlags(s),this.validateRegExpPattern(s);var l=null;try{l=new RegExp(i,a)}catch(e){}return this.finishToken(De.regexp,{pattern:i,flags:a,value:l})},Tt.readInt=function(e,t){for(var n=this.pos,r=0,i=0,o=null==t?1/0:t;i<o;++i){var a=this.input.charCodeAt(this.pos),s=void 0;if((s=a>=97?a-97+10:a>=65?a-65+10:a>=48&&a<=57?a-48:1/0)>=e)break;++this.pos,r=r*e+s}return this.pos===n||null!=t&&this.pos-n!==t?null:r},Tt.readRadixNumber=function(e){this.pos+=2;var t=this.readInt(e);return null==t&&this.raise(this.start+2,"Expected number in radix "+e),isIdentifierStart(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(De.num,t)},Tt.readNumber=function(e){var t=this.pos;e||null!==this.readInt(10)||this.raise(t,"Invalid number");var n=this.pos-t>=2&&48===this.input.charCodeAt(t);n&&this.strict&&this.raise(t,"Invalid number"),n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1);var r=this.input.charCodeAt(this.pos);46!==r||n||(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),69!==r&&101!==r||n||(43!==(r=this.input.charCodeAt(++this.pos))&&45!==r||++this.pos,null===this.readInt(10)&&this.raise(t,"Invalid number")),isIdentifierStart(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var i=this.input.slice(t,this.pos),o=n?parseInt(i,8):parseFloat(i);return this.finishToken(De.num,o)},Tt.readCodePoint=function(){var e;if(123===this.input.charCodeAt(this.pos)){this.options.ecmaVersion<6&&this.unexpected();var t=++this.pos;e=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,e>1114111&&this.invalidStringToken(t,"Code point out of bounds")}else e=this.readHexChar(4);return e},Tt.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===e)break;92===r?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):(isNewLine(r,this.options.ecmaVersion>=10)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(De.string,t)};var At={};Tt.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e!==At)throw e;this.readInvalidTemplateToken()}this.inTemplateElement=!1},Tt.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw At;this.raise(e,t)},Tt.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(96===n||36===n&&123===this.input.charCodeAt(this.pos+1))return this.pos!==this.start||this.type!==De.template&&this.type!==De.invalidTemplate?(e+=this.input.slice(t,this.pos),this.finishToken(De.template,e)):36===n?(this.pos+=2,this.finishToken(De.dollarBraceL)):(++this.pos,this.finishToken(De.backQuote));if(92===n)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(isNewLine(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:e+="\n";break;default:e+=String.fromCharCode(n)}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}},Tt.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if("{"!==this.input[this.pos+1])break;case"`":return this.finishToken(De.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},Tt.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return codePointToString(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";default:if(t>=48&&t<=55){var n=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],r=parseInt(n,8);return r>255&&(n=n.slice(0,-1),r=parseInt(n,8)),this.pos+=n.length-1,t=this.input.charCodeAt(this.pos),"0"===n&&56!==t&&57!==t||!this.strict&&!e||this.invalidStringToken(this.pos-1-n.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(r)}return isNewLine(t)?"":String.fromCharCode(t)}},Tt.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return null===n&&this.invalidStringToken(t,"Bad character escape sequence"),n},Tt.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(isIdentifierChar(i,r))this.pos+=i<=65535?1:2;else{if(92!==i)break;this.containsEsc=!0,e+=this.input.slice(n,this.pos);var o=this.pos;117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var a=this.readCodePoint();(t?isIdentifierStart:isIdentifierChar)(a,r)||this.invalidStringToken(o,"Invalid Unicode escape"),e+=codePointToString(a),n=this.pos}t=!1}return e+this.input.slice(n,this.pos)},Tt.readWord=function(){var e=this.readWord1(),t=De.name;return this.keywords.test(e)&&(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+e),t=je[e]),this.finishToken(t,e)};var Ot={ecmaVersion:2019,sourceType:"module"};function getAst(e){try{return Qe.parse(e,Object.assign({},Ot))}catch(e){return}}var It=function hasImports(e){return!!e.match(/import[\S\s]+?['"]([^'"]+)['"];?/m)};function transpileImports(e){if(!It(e))return e;var t=getAst(e);if(!t)return e;var n=0;return ve()(t,{ImportDeclaration:function ImportDeclaration(t){if(t.source){var r=t.start+n,i=t.end+n,o=e.substring(r,i),a=xe(o);e=e.substring(0,r)+a+e.substring(i),n+=a.length-o.length}}}),e}var Rt=function compile(e,t){return Object(me.a)(e,t).code},Lt=function startsWithJsx(e){return!!e.trim().match(/^</)},Mt=function wrapCodeInFragment(e){return"<React.Fragment>"+e+"</React.Fragment>;"};function compileCode(e,t,n){try{var r=Lt(e)?Mt(e):e;return transpileImports(Rt(r,t))}catch(e){n&&n(e)}return""}var jt=n(150),Dt=n.n(jt),Ft=function unsemicolon(e){return e.replace(/;\s*$/,"")};function splitExampleCode(e){var t=getAst(e);if(!t)return{head:"",example:e};var n=Dt()(t.body.reverse(),{type:"ExpressionStatement"});if(!n)return{head:"",example:e};var r=n.start,i=n.end,o=Ft(e.substring(0,r));return{head:o,example:o+";\nreturn ("+Ft(e.substring(r,i))+");"}}function ReactExample_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ReactExample_inheritsLoose(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function ReactExample_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Nt=function(e){function StateHolder(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return ReactExample_defineProperty(ReactExample_assertThisInitialized(t=e.call.apply(e,[this].concat(r))||this),"state",t.props.initialState),ReactExample_defineProperty(ReactExample_assertThisInitialized(t),"setStateBinded",t.setState.bind(ReactExample_assertThisInitialized(t))),t}return ReactExample_inheritsLoose(StateHolder,e),StateHolder.prototype.render=function render(){return this.props.component(this.state,this.setStateBinded)||null},StateHolder}(a.Component);ReactExample_defineProperty(Nt,"propTypes",{component:u.a.func.isRequired,initialState:u.a.object.isRequired});var Bt=function(e){function ReactExample(){return e.apply(this,arguments)||this}ReactExample_inheritsLoose(ReactExample,e);var t=ReactExample.prototype;return t.shouldComponentUpdate=function shouldComponentUpdate(e){return this.props.code!==e.code},t.getExampleInitialState=function getExampleInitialState(e){return-1===e.indexOf("initialState")?{}:this.props.evalInContext("\n\t\t\tvar state = {}, initialState = {};\n\t\t\ttry {\n\t\t\t\t"+e+";\n\t\t\t} catch (err) {}\n\t\t\treturn initialState;\n\t\t")()},t.getExampleComponent=function getExampleComponent(e){return this.props.evalInContext("\n\t\t\tvar initialState = {};\n\t\t\t"+e+"\n\t\t")},t.render=function render(){var e=this.props,t=e.code,n=e.compilerConfig,r=e.onError,i=compileCode(t,n,r);if(!i)return null;var o=splitExampleCode(i),a=o.head,l=o.example,u=this.getExampleInitialState(a),c=this.getExampleComponent(l);return s.a.createElement(de,{onError:r},s.a.createElement(Nt,{component:c,initialState:u}))},ReactExample}(a.Component);function Preview_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Preview_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}ReactExample_defineProperty(Bt,"propTypes",{code:u.a.string.isRequired,evalInContext:u.a.func.isRequired,onError:u.a.func.isRequired,compilerConfig:u.a.object}),ReactExample_defineProperty(Bt,"contextTypes",{});var zt=function improveErrorMessage(e){return e.replace("Check the render method of `StateHolder`.","Check the code of your example in a Markdown file or in the editor below.")},Ut=function(e){var t,n;function Preview(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Preview_defineProperty(Preview_assertThisInitialized(t=e.call.apply(e,[this].concat(r))||this),"state",{error:null}),Preview_defineProperty(Preview_assertThisInitialized(t),"handleError",function(e){t.unmountPreview(),t.setState({error:zt(e.toString())}),console.error(e)}),t}n=e,(t=Preview).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var r=Preview.prototype;return r.componentDidMount=function componentDidMount(){this.context.codeRevision>0&&console.clear(),this.executeCode()},r.shouldComponentUpdate=function shouldComponentUpdate(e,t){return this.state.error!==t.error||this.props.code!==e.code},r.componentDidUpdate=function componentDidUpdate(e){this.props.code!==e.code&&this.executeCode()},r.componentWillUnmount=function componentWillUnmount(){this.unmountPreview()},r.unmountPreview=function unmountPreview(){this.mountNode&&o.a.unmountComponentAtNode(this.mountNode)},r.executeCode=function executeCode(){var e=this;this.setState({error:null});var t=this.props.code;if(t){var n=s.a.createElement(Bt,{code:t,evalInContext:this.props.evalInContext,onError:this.handleError,compilerConfig:this.context.config.compilerConfig});window.requestAnimationFrame(function(){e.unmountPreview();try{o.a.render(n,e.mountNode)}catch(t){e.handleError(t)}})}},r.render=function render(){var e=this,t=this.state.error;return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{ref:function ref(t){return e.mountNode=t}}),t&&s.a.createElement(fe,{message:t}))},Preview}(a.Component);Preview_defineProperty(Ut,"propTypes",{code:u.a.string.isRequired,evalInContext:u.a.func.isRequired}),Preview_defineProperty(Ut,"contextTypes",{config:u.a.object.isRequired,codeRevision:u.a.number.isRequired});var Vt=n(95);n(68),n(75);function Slot_extends(){return(Slot_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Slot(e,t){var n=e.name,r=e.active,i=e.onlyActive,o=e.className,a=e.props,l=void 0===a?{}:a,u=t.slots,c=u[n];if(!c)throw new Error('Slot "'+n+'" not found, available slots: '+Object.keys(u).join(", "));var p=c.map(function(e,t){var n=e,o=n.id,a=n.render,u=l;if(o&&a){if(i&&o!==r)return null;var c=l.onClick;u=Object.assign({},l,{name:o,active:r&&o===r,onClick:c&&function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return c.apply(void 0,[o].concat(t))}}),e=a}return s.a.createElement(e,Slot_extends({key:t},u))}).filter(Boolean);return 0===p.length?null:s.a.createElement("div",{className:o},p)}function PlaygroundRenderer_extends(){return(PlaygroundRenderer_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}Slot.propTypes={name:u.a.string.isRequired,active:u.a.string,onlyActive:u.a.bool,props:u.a.object,className:u.a.string},Slot.contextTypes={slots:u.a.object.isRequired};function PlaygroundRenderer(e){var t=e.classes,n=e.name,r=e.preview,i=e.previewProps,o=e.tabButtons,a=e.tabBody,l=e.toolbar,u=i.className,c=_objectWithoutPropertiesLoose(i,["className"]);return s.a.createElement("div",{className:t.root},s.a.createElement("div",PlaygroundRenderer_extends({className:Object(j.a)(t.preview,u)},c,{"data-preview":n}),r),s.a.createElement("div",{className:t.controls},s.a.createElement("div",{className:t.tabs},o),s.a.createElement("div",{className:t.toolbar},l)),s.a.createElement("div",{className:t.tab},a))}PlaygroundRenderer.propTypes={classes:u.a.object.isRequired,name:u.a.string.isRequired,preview:u.a.node.isRequired,previewProps:u.a.object.isRequired,tabButtons:u.a.node.isRequired,tabBody:u.a.node.isRequired,toolbar:u.a.node.isRequired};var Gt=Object(c.a)(function styles(e){var t=e.space,n=e.color,r=e.borderRadius;return{root:{marginBottom:t[4]},preview:{padding:t[2],border:[[1,n.border,"solid"]],borderRadius:r,width:"100%",display:"inline-block"},controls:{display:"flex",alignItems:"center",marginBottom:t[1]},toolbar:{marginLeft:"auto"},tab:{}}})(PlaygroundRenderer),Wt=(n(443),Object.freeze({all:"all",section:"section",component:"component",example:"example",notFound:"notFound"})),qt=Object.freeze({hide:"hide",collapse:"collapse",expand:"expand"}),Ht=Object.freeze({hide:"hide",collapse:"collapse",expand:"expand"});function Playground_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Playground_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Xt=function(e){var t,n;function Playground(t,n){var r;r=e.call(this,t,n)||this;var i=t.code,o=t.settings,a=t.exampleMode,s=n.config,l=a===qt.expand,u=void 0!==o.showcode?o.showcode:l;return r.state={code:i,prevCode:i,activeTab:u?W:void 0},r.handleTabChange=r.handleTabChange.bind(Playground_assertThisInitialized(r)),r.handleChange=he()(r.handleChange.bind(Playground_assertThisInitialized(r)),s.previewDelay),r}n=e,(t=Playground).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,Playground.getDerivedStateFromProps=function getDerivedStateFromProps(e,t){var n=e.code;return t.prevCode!==n?{prevCode:n,code:n}:null};var r=Playground.prototype;return r.componentWillUnmount=function componentWillUnmount(){this.handleChange.cancel()},r.handleChange=function handleChange(e){this.setState({code:e})},r.handleTabChange=function handleTabChange(e){this.setState(function(t){return{activeTab:t.activeTab!==e?e:void 0}})},r.render=function render(){var e=this.state,t=e.code,n=e.activeTab,r=this.props,i=r.evalInContext,o=r.index,a=r.name,l=r.settings,u=r.exampleMode,c=this.context.displayMode,p=u===qt.hide,h=l.noeditor||p,f=s.a.createElement(Ut,{code:t,evalInContext:i});return h?s.a.createElement(Vt.a,null,f):s.a.createElement(Gt,{name:a,preview:f,previewProps:l.props||{},tabButtons:s.a.createElement(Slot,{name:"exampleTabButtons",active:n,props:{onClick:this.handleTabChange}}),tabBody:s.a.createElement(Slot,{name:"exampleTabs",active:n,onlyActive:!0,props:{code:t,onChange:this.handleChange,evalInContext:i}}),toolbar:s.a.createElement(Slot,{name:"exampleToolbar",props:{name:a,isolated:c===Wt.example,example:o}})})},Playground}(a.Component);Playground_defineProperty(Xt,"propTypes",{code:u.a.string.isRequired,evalInContext:u.a.func.isRequired,index:u.a.number.isRequired,name:u.a.string.isRequired,exampleMode:u.a.string.isRequired,settings:u.a.object}),Playground_defineProperty(Xt,"contextTypes",{config:u.a.object.isRequired,displayMode:u.a.string});var Kt=polyfill(Xt);function ExamplesRenderer(e){var t=e.classes,n=e.children;return s.a.createElement("article",{className:t.root},n)}ExamplesRenderer.propTypes={classes:u.a.object.isRequired,children:u.a.node};var Zt=Object(c.a)(function styles(){return{root:{}}})(ExamplesRenderer);function Examples(e,t){var n=e.examples,r=e.name,i=e.exampleMode,o=t.codeRevision;return s.a.createElement(Zt,null,n.map(function(e,t){switch(e.type){case"code":return s.a.createElement(Kt,{code:e.content,evalInContext:e.evalInContext,key:o+"/"+t,name:r,index:t,settings:e.settings,exampleMode:i});case"markdown":return s.a.createElement(x.a,{text:e.content,key:t});default:return null}}))}Examples.propTypes={examples:u.a.array.isRequired,name:u.a.string.isRequired,exampleMode:u.a.string.isRequired},Examples.contextTypes={codeRevision:u.a.number.isRequired};var Yt=n(97);function SectionHeadingRenderer(e){var t,n=e.classes,r=e.children,i=e.toolbar,o=e.id,a=e.href,l=e.depth,u=e.deprecated,c=Math.min(6,l),p=Object(j.a)(n.sectionName,((t={})[n.isDeprecated]=u,t));return s.a.createElement("div",{className:n.wrapper},s.a.createElement(Yt.a,{level:c,id:o},s.a.createElement("a",{href:a,className:p},r)),s.a.createElement("div",{className:n.toolbar},i))}SectionHeadingRenderer.propTypes={classes:u.a.object.isRequired,children:u.a.node,toolbar:u.a.node,id:u.a.string.isRequired,href:u.a.string.isRequired,depth:u.a.number.isRequired,deprecated:u.a.bool};var Jt=Object(c.a)(function styles(e){var t=e.color;return{wrapper:{display:"flex",flexDirection:"row",alignItems:"center",marginBottom:e.space[1]},toolbar:{marginLeft:"auto"},sectionName:{"&:hover, &:active":{isolate:!1,textDecoration:"underline",cursor:"pointer"}},isDeprecated:{color:t.light,"&, &:hover":{textDecoration:"line-through"}}}})(SectionHeadingRenderer);function SectionHeading_extends(){return(SectionHeading_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function SectionHeading_objectWithoutPropertiesLoose(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function SectionHeading(e){var t=e.slotName,n=e.slotProps,r=e.children,i=e.id,o=e.pagePerSection,a=SectionHeading_objectWithoutPropertiesLoose(e,["slotName","slotProps","children","id","pagePerSection"]),l=getUrl(o?{slug:i,id:1!==a.depth,takeHash:!0}:{slug:i,anchor:!0});return s.a.createElement(Jt,SectionHeading_extends({toolbar:s.a.createElement(Slot,{name:t,props:n}),id:i,href:l},a),r)}SectionHeading.propTypes={children:u.a.node,id:u.a.string.isRequired,slotName:u.a.string.isRequired,slotProps:u.a.object.isRequired,depth:u.a.number.isRequired,deprecated:u.a.bool,pagePerSection:u.a.bool};var Qt=n(258),$t=n.n(Qt),en=n(259),tn=n.n(en);function PathlineRenderer(e){var t=e.classes,n=e.children;return s.a.createElement("div",{className:t.pathline},n,s.a.createElement(D,{small:!0,className:t.copyButton,onClick:function onClick(){return $t()(n)},title:"Copy to clipboard"},s.a.createElement(tn.a,null)))}PathlineRenderer.propTypes={classes:u.a.object.isRequired,children:u.a.string};var nn=Object(c.a)(function styles(e){var t=e.space,n=e.fontFamily,r=e.fontSize,i=e.color;return{pathline:{fontFamily:n.monospace,fontSize:r.small,color:i.light,wordBreak:"break-all"},copyButton:{marginLeft:t[0]}}})(PathlineRenderer);function ReactComponentRenderer(e){var t=e.classes,n=e.name,r=e.heading,i=e.pathLine,o=e.description,a=e.docs,l=e.examples,u=e.tabButtons,c=e.tabBody;return s.a.createElement("div",{className:t.root,id:n+"-container"},s.a.createElement("header",{className:t.header},r,i&&s.a.createElement(nn,null,i)),(o||a)&&s.a.createElement("div",{className:t.docs},o,a),u&&s.a.createElement("div",{className:t.tabs},s.a.createElement("div",{className:t.tabButtons},u),s.a.createElement("div",{className:t.tabBody},c)),l)}ReactComponentRenderer.propTypes={classes:u.a.object.isRequired,name:u.a.string.isRequired,heading:u.a.node.isRequired,filepath:u.a.string,pathLine:u.a.string,tabButtons:u.a.node,tabBody:u.a.node,description:u.a.node,docs:u.a.node,examples:u.a.node,isolated:u.a.bool};var rn=Object(c.a)(function styles(e){var t=e.color,n=e.fontSize,r=e.space;return{root:{marginBottom:r[6]},header:{marginBottom:r[3]},tabs:{marginBottom:r[3]},tabButtons:{marginBottom:r[1]},tabBody:{overflowX:"auto",maxWidth:"100%",WebkitOverflowScrolling:"touch"},docs:{color:t.base,fontSize:n.text}}})(ReactComponentRenderer);function ReactComponent_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ReactComponent_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var on=function(){return s.a.createElement("div",null)},an=function(e){var t,n;function ReactComponent(t,n){var r;r=e.call(this,t,n)||this;var i=t.usageMode;return r.handleTabChange=r.handleTabChange.bind(ReactComponent_assertThisInitialized(r)),r.state={activeTab:i===Ht.expand?q:void 0},r}n=e,(t=ReactComponent).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var r=ReactComponent.prototype;return r.handleTabChange=function handleTabChange(e){this.setState(function(t){return{activeTab:t.activeTab!==e?e:void 0}})},r.render=function render(){var e=this.state.activeTab,t=this.context,n=t.displayMode,r=t.config.pagePerSection,i=this.props,o=i.component,a=i.depth,l=i.usageMode,u=i.exampleMode,c=o.name,p=o.visibleName,h=o.slug,f=o.filepath,d=o.pathLine,g=o.props,m=g.description,y=g.examples,v=void 0===y?[]:y,_=g.tags,b=void 0===_?{}:_;if(!c)return null;var w=l!==Ht.hide;return s.a.createElement(rn,{name:c,slug:h,filepath:f,pathLine:d,docs:s.a.createElement(P.a,b),description:m&&s.a.createElement(x.a,{text:m}),heading:s.a.createElement(SectionHeading,{id:h,pagePerSection:r,deprecated:!!b.deprecated,slotName:"componentToolbar",slotProps:Object.assign({},o,{isolated:n!==Wt.all}),depth:a},p),examples:v.length>0?s.a.createElement(Examples,{examples:v,name:c,exampleMode:u}):s.a.createElement(on,{name:c}),tabButtons:w&&s.a.createElement(Slot,{name:"docsTabButtons",active:e,props:Object.assign({},o,{onClick:this.handleTabChange})}),tabBody:s.a.createElement(Slot,{name:"docsTabs",active:e,onlyActive:!0,props:o})})},ReactComponent}(a.Component);function ComponentsRenderer(e){var t=e.children;return s.a.createElement("div",null,t)}function Components(e){var t=e.components,n=e.depth,r=e.exampleMode,i=e.usageMode;return s.a.createElement(ComponentsRenderer,null,t.map(function(e){return s.a.createElement(an,{key:e.filepath,component:e,exampleMode:r,usageMode:i,depth:n})}))}ReactComponent_defineProperty(an,"propTypes",{component:u.a.object.isRequired,depth:u.a.number.isRequired,exampleMode:u.a.string.isRequired,usageMode:u.a.string.isRequired}),ReactComponent_defineProperty(an,"contextTypes",{config:u.a.object.isRequired,displayMode:u.a.string}),ComponentsRenderer.propTypes={children:u.a.node.isRequired},Components.propTypes={components:u.a.array.isRequired,depth:u.a.number.isRequired,exampleMode:u.a.string.isRequired,usageMode:u.a.string.isRequired};function SectionRenderer(e){var t=e.classes,n=e.name,r=e.slug,i=e.content,o=e.components,a=e.sections,l=e.depth,u=e.description,c=e.pagePerSection;return s.a.createElement("section",{className:t.root},n&&s.a.createElement(SectionHeading,{depth:l,id:r,slotName:"sectionToolbar",pagePerSection:c,slotProps:e},n),u&&s.a.createElement(x.a,{text:u}),i,a,o)}SectionRenderer.propTypes={classes:u.a.object.isRequired,name:u.a.string,description:u.a.string,slug:u.a.string,filepath:u.a.string,content:u.a.node,components:u.a.node,sections:u.a.node,isolated:u.a.bool,depth:u.a.number.isRequired,pagePerSection:u.a.bool};var sn=Object(c.a)(function styles(e){return{root:{marginBottom:e.space[4]}}})(SectionRenderer);function Section(e,t){var n=e.section,r=e.depth,i=t.displayMode,o=t.config.pagePerSection,a=n.name,l=n.slug,u=n.filepath,c=n.content,p=n.components,h=n.sections,f=n.description,d=n.exampleMode,g=n.usageMode,m=c&&s.a.createElement(Examples,{examples:c,name:a,exampleMode:d}),y=p&&s.a.createElement(Components,{usageMode:g,exampleMode:d,components:p,depth:r+1}),v=h&&s.a.createElement(Sections,{sections:h,depth:r+1});return s.a.createElement(sn,{description:f,pagePerSection:o,name:a,slug:l,filepath:u,content:m,components:y,sections:v,isolated:i!==Wt.all,depth:r})}Section.propTypes={section:u.a.object.isRequired,depth:u.a.number.isRequired},Section.contextTypes={displayMode:u.a.string,config:u.a.object.isRequired};function SectionsRenderer(e){var t=e.classes,n=e.children;return s.a.createElement("section",{className:t.root},n)}SectionsRenderer.propTypes={classes:u.a.object.isRequired,children:u.a.node};var ln=Object(c.a)(function styles(){return{root:{}}})(SectionsRenderer);function Sections(e){var t=e.sections,n=e.depth;return s.a.createElement(ln,null,t.filter(function(e){return!e.href}).map(function(e,t){return s.a.createElement(Section,{key:t,section:e,depth:n})}))}Sections.propTypes={sections:u.a.array.isRequired,root:u.a.bool,depth:u.a.number.isRequired};var un=n(151);function WelcomeRenderer(e){var t=e.classes,n=e.patterns;return s.a.createElement("div",{className:t.root},s.a.createElement(x.a,{text:"\n# Welcome to React Styleguidist!\n\n**We couldn’t find any components** using these patterns:\n\n"+n.map(function(e){return"- `"+e+"`"}).join("\n")+"\n\nCreate **styleguide.config.js** file in your project root directory like this:\n\n    module.exports = {\n      components: 'src/components/**/*.js'\n    };\n\nRead more in the [locating components guide]("+un.DOCS_COMPONENTS+").\n\t\t\t\t"}))}WelcomeRenderer.propTypes={classes:u.a.object.isRequired,patterns:u.a.array.isRequired};var cn=Object(c.a)(function styles(e){var t=e.space;return{root:{maxWidth:e.maxWidth,margin:[[0,"auto"]],padding:t[4]}}})(WelcomeRenderer);function ErrorRenderer(e){var t=e.classes,n=e.error,r=e.info;return s.a.createElement("div",{className:t.root},s.a.createElement("pre",{className:t.stack},n.toString(),r.componentStack.toString()),s.a.createElement("div",{className:t.message},s.a.createElement("p",null,"This may be due to an error in a component you are overriding, or a bug in React Styleguidist."),s.a.createElement("p",null,"If you believe this is a bug, ",s.a.createElement("a",{style:{color:"inherit"},href:"https://github.com/styleguidist/react-styleguidist/issues"},"please submit an issue"),".")))}ErrorRenderer.propTypes={classes:u.a.object.isRequired,error:u.a.object.isRequired,info:u.a.shape({componentStack:u.a.any.isRequired}).isRequired};var pn=Object(c.a)(function styles(e){var t=e.fontFamily,n=e.fontSize,r=e.color;return{root:{margin:e.space[2],lineHeight:1.2,fontSize:n.small},stack:{color:r.error,whiteSpace:"pre-wrap",fontFamily:t.monospace},message:{color:r.error,fontFamily:t.base}}})(ErrorRenderer);function NotFoundRenderer(e){var t=e.classes;return s.a.createElement("div",{className:t.root},s.a.createElement(x.a,{text:"\n# Page not found\nThe link you followed may be broken, or the page may have been removed.\n"}))}NotFoundRenderer.propTypes={classes:u.a.object.isRequired};var hn=Object(c.a)(function styles(e){return{root:{maxWidth:e.maxWidth,margin:[[0,"auto"]]}}})(NotFoundRenderer);function StyleGuide_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function StyleGuide_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function StyleGuide_hasSidebar(e,t){return e===Wt.notFound||t&&e===Wt.all}var fn=function(e){var t,n;function StyleGuide(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return StyleGuide_defineProperty(StyleGuide_assertThisInitialized(t=e.call.apply(e,[this].concat(r))||this),"state",{error:!1,info:null}),t}n=e,(t=StyleGuide).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var r=StyleGuide.prototype;return r.getChildContext=function getChildContext(){return{codeRevision:this.props.codeRevision,config:this.props.config,slots:this.props.slots,displayMode:this.props.displayMode}},r.componentDidCatch=function componentDidCatch(e,t){this.setState({error:e,info:t})},r.render=function render(){var e=this.props,t=e.config,n=e.sections,r=e.welcomeScreen,i=e.patterns,o=e.displayMode,a=e.allSections,l=e.pagePerSection;return this.state.error?s.a.createElement(pn,{error:this.state.error,info:this.state.info}):r?s.a.createElement(cn,{patterns:i}):s.a.createElement(ce,{title:t.title,version:t.version,homepageUrl:un.HOMEPAGE,toc:s.a.createElement(ae,{sections:a,useRouterLinks:l}),hasSidebar:StyleGuide_hasSidebar(o,t.showSidebar)},n.length?s.a.createElement(Sections,{sections:n,depth:1}):s.a.createElement(hn,null))},StyleGuide}(a.Component);StyleGuide_defineProperty(fn,"propTypes",{codeRevision:u.a.number.isRequired,config:u.a.object.isRequired,slots:u.a.object.isRequired,sections:u.a.array.isRequired,welcomeScreen:u.a.bool,patterns:u.a.array,displayMode:u.a.string,allSections:u.a.array.isRequired,pagePerSection:u.a.bool}),StyleGuide_defineProperty(fn,"childContextTypes",{codeRevision:u.a.number.isRequired,config:u.a.object.isRequired,slots:u.a.object.isRequired,displayMode:u.a.string}),StyleGuide_defineProperty(fn,"defaultProps",{displayMode:Wt.all});var dn=n(186),gn=n.n(dn);function getPageTitle(e,t,n){if(n===Wt.notFound)return"Page not found";if(e.length){if(n===Wt.component||n===Wt.example&&e[0].components)return gn()(e[0],"components.0.name",e[0].name)+" — "+t;if(n===Wt.section||n===Wt.example)return e[0].name+" — "+t}return t}var mn=n(260),yn=n.n(mn);function filterComponentsByExactName(e,t){return e.filter(function(e){return e.name===t})}function filterComponentsInSectionsByExactName(e,t,n){var r=[];return e.forEach(function(e){if(e.components){var i=filterComponentsByExactName(e.components,t);i.length&&r.push({exampleMode:e.exampleMode,usageMode:e.usageMode,components:i})}e.sections&&n&&r.push.apply(r,filterComponentsInSectionsByExactName(e.sections,t,n))}),r}function filterSectionExamples(e,t){return Object.assign({},e,{content:[e.content[t]]})}function findSection(e,t){var n=Dt()(e,{name:t});if(n)return n;for(var r=0;r<e.length;r++){var i=e[r];if(i.sections&&0!==i.sections.length){var o=findSection(i.sections,t);if(o)return o}}}var vn=n(189),_n=n.n(vn);function filterNumbers(e){return _n()(parseInt(e,10))&&""!==e}function getInfoFromHash(e){var t=$(e,"#!/");if(t||$(e,"#/")){var n=te(e,t?"#!/":"#/"),r=parseInt(n[n.length-1],10);return{isolate:t,hashArray:n.filter(filterNumbers),targetName:n[0],targetIndex:_n()(r)?void 0:r}}return{}}function getRouteData(e,t,n){var r,i,o=getInfoFromHash(t),a=o.targetName,s=o.hashArray,l=o.targetIndex,u=o.isolate,c=u?Wt.example:Wt.all;if(n&&!a&&e[0]&&(a=e[0].name,s=[a]),a){var p;if(n)s.forEach(function(t,n){if((p=filterComponentsInSectionsByExactName(e,t,u)).length)e=p;else{var r=findSection(e,t);if(r){var i=!s[n+1];r.sectionDepth>0&&i&&(r=Object.assign({},r,{sections:[],components:[]})),e=[r]}else e=[]}}),e.length||(c=Wt.notFound),a=s[s.length-1];else if((p=filterComponentsInSectionsByExactName(e,a,!0)).length)e=p,c=Wt.component;else{var h=findSection(e,a);e=h?[h]:[],c=Wt.section}if(yn()(l))if(1===p.length){var f=p[0].components;e=[Object.assign({},p[0],{components:[(r=f[0],i=l,Object.assign({},r,{props:Object.assign({},r.props,{examples:[r.props.examples[i]]})}))]})],c=Wt.example}else 1===e.length&&(e=[filterSectionExamples(e[0],l)],c=Wt.example)}return{sections:e,displayMode:c}}function processSections(e){return e.map(function(e){return Object.assign({},e,{visibleName:e.name,components:(t=e.components||[],t.map(function(e){return Object.assign({},e,{name:e.props.displayName,visibleName:e.props.visibleName||e.props.displayName,props:Object.assign({},e.props,{examples:[].concat(e.props.examples||[],e.props.example||[])})})})),sections:processSections(e.sections||[])});var t})}function renderStyleguide(e,t,n,r,i){void 0===n&&(n=window.location),void 0===r&&(r=document),void 0===i&&(i=window.history);var o=processSections(e.sections),a=e.config,l=a.title,u=a.pagePerSection,c=getRouteData(o,n.hash,u),p=c.sections,h=c.displayMode;if(r.title=getPageTitle(p,l,h),"#/"===n.hash){var f=n.pathname+n.search;i.replaceState("",r.title,f)}return s.a.createElement(fn,{codeRevision:t,config:e.config,slots:H(e.config),welcomeScreen:e.welcomeScreen,patterns:e.patterns,sections:p,allSections:o,displayMode:h,pagePerSection:u})}var bn=function render(){var e=n(446);o.a.render(renderStyleguide(e,0),document.getElementById(e.config.mountPointId))};window.addEventListener("hashchange",bn),window.addEventListener("hashchange",function scrollToOrigin(){var e=window.location.hash;if($(e,"#/")||$(e,"#!/")){var t=ne(e,"id"),n=0;if(t){var r=document.getElementById(t);r&&r.offsetTop&&(n=r.offsetTop)}window.scrollTo(0,n)}}),bn()},function(e,t,n){"use strict";n.r(t);var r=n(15),i=n(9),o=n.n(i),a=n(7),s="#define SHADER_NAME arc-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n\n  // use highlight color if this fragment belongs to the selected object.\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n\n  // use picking color if rendering to picking FBO.\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _get(e,t,n){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var r=_superPropBase(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var l=a.t.fp64LowPart,u=[0,0,0,255],c={fp64:!1,getSourcePosition:{type:"accessor",value:function value(e){return e.sourcePosition}},getTargetPosition:{type:"accessor",value:function value(e){return e.targetPosition}},getSourceColor:{type:"accessor",value:u},getTargetColor:{type:"accessor",value:u},getStrokeWidth:{type:"accessor",value:1},widthScale:{type:"number",value:1,min:0},strokeWidth:{deprecatedFor:"getStrokeWidth"}},p=function(e){function ArcLayer(){return _classCallCheck(this,ArcLayer),e=this,!(t=_getPrototypeOf(ArcLayer).apply(this,arguments))||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t;var e,t}var t,n,i;return _inherits(ArcLayer,r["d"]),t=ArcLayer,(n=[{key:"getShaders",value:function getShaders(){return this.use64bitProjection()?{vs:"#define SHADER_NAME arc-layer-vertex-shader-64\n\nattribute vec3 positions;\nattribute vec4 instanceSourceColors;\nattribute vec4 instanceTargetColors;\n\nattribute vec4 instancePositions;\nattribute vec4 instancePositions64Low;\n\nattribute vec3 instancePickingColors;\nattribute float instanceWidths;\n\nuniform float numSegments;\nuniform float opacity;\nuniform float widthScale;\n\nvarying vec4 vColor;\n\nvec2 paraboloid_fp64(vec2 source[2], vec2 target[2], float ratio) {\n\n  vec2 x[2];\n  vec2_mix_fp64(source, target, ratio, x);\n  vec2 center[2];\n  vec2_mix_fp64(source, target, 0.5, center);\n\n  vec2 dSourceCenter = vec2_distance_fp64(source, center);\n  vec2 dXCenter = vec2_distance_fp64(x, center);\n  return mul_fp64(sum_fp64(dSourceCenter, dXCenter), sub_fp64(dSourceCenter, dXCenter));\n}\n\n// offset vector by strokeWidth pixels\n// offset_direction is -1 (left) or 1 (right)\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);\n  // rotate by 90 degrees\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n\n  vec2 offset_screenspace = dir_screenspace * offset_direction * instanceWidths * widthScale / 2.0;\n  vec2 offset_clipspace = project_pixel_to_clipspace(offset_screenspace).xy;\n\n  return offset_clipspace;\n}\n\nfloat getSegmentRatio(float index) {\n  return smoothstep(0.0, 1.0, index / (numSegments - 1.0));\n}\n\nvoid get_pos_fp64(vec2 source[2], vec2 target[2], float segmentRatio, out vec2 position[4]) {\n\n  vec2 vertex_height = paraboloid_fp64(source, target, segmentRatio);\n\n  vec2 position_temp[2];\n\n  vec2_mix_fp64(source, target, segmentRatio, position_temp);\n\n  position[0] = position_temp[0];\n  position[1] = position_temp[1];\n\n  if (vertex_height.x < 0.0 || (vertex_height.x == 0.0 && vertex_height.y <= 0.0)) {\n    vertex_height = vec2(0.0, 0.0);\n  }\n\n  position[2] = sqrt_fp64(vertex_height);\n  position[3] = vec2(1.0, 0.0);\n}\n\nvoid main(void) {\n  vec2 projected_source_coord[2];\n  vec2 projected_target_coord[2];\n\n  project_position_fp64(instancePositions.xy, instancePositions64Low.xy, projected_source_coord);\n  project_position_fp64(instancePositions.zw, instancePositions64Low.zw, projected_target_coord);\n\n  float segmentIndex = positions.x;\n  float segmentRatio = getSegmentRatio(segmentIndex);\n\n  // if it's the first point, use next - current as direction\n  // otherwise use current - prev\n  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));\n  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);\n\n  vec2 curr_pos_modelspace[4];\n\n  get_pos_fp64(projected_source_coord, projected_target_coord, segmentRatio,\n    curr_pos_modelspace);\n\n  vec2 next_pos_modelspace[4];\n\n  get_pos_fp64(projected_source_coord, projected_target_coord, nextSegmentRatio,\n    next_pos_modelspace);\n\n  vec4 curr_pos_clipspace = project_to_clipspace_fp64(curr_pos_modelspace);\n  vec4 next_pos_clipspace = project_to_clipspace_fp64(next_pos_modelspace);\n\n  vec2 offset = getExtrusionOffset(next_pos_clipspace.xy - curr_pos_clipspace.xy, positions.y);\n\n  gl_Position = curr_pos_clipspace + vec4(offset, 0.0, 0.0);\n\n  vec4 color = mix(instanceSourceColors, instanceTargetColors, segmentRatio) / 255.;\n  vColor = vec4(color.rgb, color.a * opacity);\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n}\n",fs:s,modules:["project64","picking"]}:{vs:"#define SHADER_NAME arc-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec4 instanceSourceColors;\nattribute vec4 instanceTargetColors;\nattribute vec4 instancePositions;\nattribute vec4 instancePositions64Low;\nattribute vec3 instancePickingColors;\nattribute float instanceWidths;\n\nuniform float numSegments;\nuniform float opacity;\nuniform float widthScale;\n\nvarying vec4 vColor;\n\nfloat paraboloid(vec2 source, vec2 target, float ratio) {\n\n  vec2 x = mix(source, target, ratio);\n  vec2 center = mix(source, target, 0.5);\n\n  float dSourceCenter = distance(source, center);\n  float dXCenter = distance(x, center);\n  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);\n}\n\n// offset vector by strokeWidth pixels\n// offset_direction is -1 (left) or 1 (right)\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);\n  // rotate by 90 degrees\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n\n  vec2 offset_screenspace = dir_screenspace * offset_direction * instanceWidths * widthScale / 2.0;\n  vec2 offset_clipspace = project_pixel_to_clipspace(offset_screenspace).xy;\n\n  return offset_clipspace;\n}\n\nfloat getSegmentRatio(float index) {\n  return smoothstep(0.0, 1.0, index / (numSegments - 1.0));\n}\n\nvec3 getPos(vec2 source, vec2 target, float segmentRatio) {\n  float vertex_height = paraboloid(source, target, segmentRatio);\n\n  return vec3(\n    mix(source, target, segmentRatio),\n    sqrt(max(0.0, vertex_height))\n  );\n}\n\nvoid main(void) {\n  vec2 source = project_position(vec3(instancePositions.xy, 0.0), instancePositions64Low.xy).xy;\n  vec2 target = project_position(vec3(instancePositions.zw, 0.0), instancePositions64Low.zw).xy;\n\n  float segmentIndex = positions.x;\n  float segmentRatio = getSegmentRatio(segmentIndex);\n  // if it's the first point, use next - current as direction\n  // otherwise use current - prev\n  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));\n  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);\n\n  vec3 currPos = getPos(source, target, segmentRatio);\n  vec3 nextPos = getPos(source, target, nextSegmentRatio);\n  vec4 curr = project_to_clipspace(vec4(currPos, 1.0));\n  vec4 next = project_to_clipspace(vec4(nextPos, 1.0));\n\n  // extrude\n  vec2 offset = getExtrusionOffset((next.xy - curr.xy) * indexDir, positions.y);\n  gl_Position = curr + vec4(offset, 0.0, 0.0);\n\n  vec4 color = mix(instanceSourceColors, instanceTargetColors, segmentRatio) / 255.;\n  vColor = vec4(color.rgb, color.a * opacity);\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n}\n",fs:s,modules:["picking"]}}},{key:"initializeState",value:function initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:4,transition:!0,accessor:["getSourcePosition","getTargetPosition"],update:this.calculateInstancePositions},instancePositions64Low:{size:4,accessor:["getSourcePosition","getTargetPosition"],update:this.calculateInstancePositions64Low},instanceSourceColors:{size:4,type:o.a.UNSIGNED_BYTE,transition:!0,accessor:"getSourceColor",defaultValue:u},instanceTargetColors:{size:4,type:o.a.UNSIGNED_BYTE,transition:!0,accessor:"getTargetColor",defaultValue:u},instanceWidths:{size:1,transition:!0,accessor:"getStrokeWidth",defaultValue:1}})}},{key:"updateState",value:function updateState(e){var t=e.props,n=e.oldProps,r=e.changeFlags;if(_get(_getPrototypeOf(ArcLayer.prototype),"updateState",this).call(this,{props:t,oldProps:n,changeFlags:r}),t.fp64!==n.fp64){var i=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(i)}),this.getAttributeManager().invalidateAll()}this.state.model.setUniforms({widthScale:t.widthScale})}},{key:"_getModel",value:function _getModel(e){for(var t=[],n=0;n<50;n++)t=t.concat([n,-1,0,n,1,0]);var r=new a.h(e,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new a.g({drawMode:o.a.TRIANGLE_STRIP,attributes:{positions:new Float32Array(t)}}),isInstanced:!0,shaderCache:this.context.shaderCache}));return r.setUniforms({numSegments:50}),r}},{key:"calculateInstancePositions",value:function calculateInstancePositions(e){var t=this.props,n=t.data,r=t.getSourcePosition,i=t.getTargetPosition,o=e.value,a=e.size,s=0,l=!0,u=!1,c=void 0;try{for(var p,h=n[Symbol.iterator]();!(l=(p=h.next()).done);l=!0){var f=p.value,d=r(f),g=i(f);o[s+0]=d[0],o[s+1]=d[1],o[s+2]=g[0],o[s+3]=g[1],s+=a}}catch(e){u=!0,c=e}finally{try{l||null==h.return||h.return()}finally{if(u)throw c}}}},{key:"calculateInstancePositions64Low",value:function calculateInstancePositions64Low(e){var t=this.use64bitPositions();if(e.constant=!t,t){var n=this.props,r=n.data,i=n.getSourcePosition,o=n.getTargetPosition,a=e.value,s=e.size,u=0,c=!0,p=!1,h=void 0;try{for(var f,d=r[Symbol.iterator]();!(c=(f=d.next()).done);c=!0){var g=f.value,m=i(g),y=o(g);a[u+0]=l(m[0]),a[u+1]=l(m[1]),a[u+2]=l(y[0]),a[u+3]=l(y[1]),u+=s}}catch(e){p=!0,h=e}finally{try{c||null==d.return||d.return()}finally{if(p)throw h}}}else e.value=new Float32Array(4)}}])&&_defineProperties(t.prototype,n),i&&_defineProperties(t,i),ArcLayer}();p.layerName="ArcLayer",p.defaultProps=c;function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function icon_manager_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function icon_manager_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var h=o.a.LINEAR_MIPMAP_LINEAR,f=o.a.LINEAR,d=function noop(){};function resizeImage(e,t,n,r){var i=t.naturalWidth,o=t.naturalHeight;return n===i&&r===o?t:(e.canvas.height=r,e.canvas.width=n,e.clearRect(0,0,e.canvas.width,e.canvas.height),e.drawImage(t,0,0,i,o,0,0,n,r),e.canvas)}function buildRowMapping(e,t,n){for(var r=0;r<t.length;r++){var i=t[r],o=i.icon,a=i.xOffset;e[o.url]=Object.assign({},o,{x:a,y:n})}}function buildMapping(e){for(var t=e.icons,n=e.buffer,r=e.maxCanvasWidth,i=0,o=0,a=0,s=[],l={},u=0;u<t.length;u++){var c=t[u];if(!l[c.url]){var p=c.height,h=c.width;i+h+n>r&&(buildRowMapping(l,s,o),i=0,o=a+o+n,a=0,s=[]),s.push({icon:c,xOffset:i}),i=i+h+n,a=Math.max(a,p)}}var f;return s.length>0&&buildRowMapping(l,s,o),{mapping:l,canvasHeight:(f=a+o+n,Math.pow(2,Math.ceil(Math.log2(f))))}}function getIcons(e,t){if(!e||!t)return null;var n={},r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=t(a.value);if(!l)throw new Error("Icon is missing.");if(!l.url)throw new Error("Icon url is missing.");n[l.url]||(n[l.url]=l)}}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}var g=function(){function IconManager(e,t){var n=t.onUpdate,r=void 0===n?d:n;icon_manager_classCallCheck(this,IconManager),this.gl=e,this.onUpdate=r,this._getIcon=null,this._mapping={},this._texture=null,this._autoPacking=!1,this._canvas=null}var e,t,n;return e=IconManager,(t=[{key:"getTexture",value:function getTexture(){return this._texture}},{key:"getIconMapping",value:function getIconMapping(e){var t=this._getIcon(e),n=this._autoPacking?t.url:t;return this._mapping[n]||{}}},{key:"setProps",value:function setProps(e){var t=e.autoPacking,n=e.iconAtlas,r=e.iconMapping,i=e.data,o=e.getIcon;void 0!==t&&(this._autoPacking=t),o&&(this._getIcon=o),r&&(this._mapping=r),n&&this._updateIconAtlas(n),this._autoPacking&&(i||o)&&(this._canvas=this._canvas||document.createElement("canvas"),this._updateAutoPacking({data:i,buffer:4,maxCanvasWidth:1024}))}},{key:"_updateIconAtlas",value:function _updateIconAtlas(e){var t,n=this;if(e instanceof a.i)e.setParameters((_defineProperty(t={},o.a.TEXTURE_MIN_FILTER,h),_defineProperty(t,o.a.TEXTURE_MAG_FILTER,f),t)),this._texture=e,this.onUpdate();else if("string"==typeof e){var r;Object(a.y)(this.gl,{urls:[e],parameters:(r={},_defineProperty(r,o.a.TEXTURE_MIN_FILTER,h),_defineProperty(r,o.a.TEXTURE_MAG_FILTER,f),r)}).then(function(e){var t=_slicedToArray(e,1)[0];n._texture=t,n.onUpdate()})}}},{key:"_updateAutoPacking",value:function _updateAutoPacking(e){var t=e.data,n=e.buffer,r=e.maxCanvasWidth,i=Object.values(getIcons(t,this._getIcon)||{});if(i.length>0){var o=buildMapping({icons:i,buffer:n,maxCanvasWidth:r}),s=o.mapping,l=o.canvasHeight;this._mapping=s,this._texture=new a.i(this.gl,{width:r,height:l}),this.onUpdate(),this._loadImages(i)}}},{key:"_loadImages",value:function _loadImages(e){var t=this,n=this._canvas.getContext("2d"),r=this._texture.height,i=!0,s=!1,l=void 0;try{for(var u,c=function _loop(){var e=u.value;Object(a.x)({urls:[e.url]}).then(function(i){var a,s=_slicedToArray(i,1)[0],l=t._mapping[e.url],u=l.x,c=l.y,p=l.width,d=l.height,g=resizeImage(n,s,p,d);t._texture.setSubImageData({data:g,x:u,y:r-c-d,width:p,height:d,parameters:(a={},_defineProperty(a,o.a.TEXTURE_MIN_FILTER,h),_defineProperty(a,o.a.TEXTURE_MAG_FILTER,f),_defineProperty(a,o.a.UNPACK_FLIP_Y_WEBGL,!0),a)}),t._texture.generateMipmap(),t.onUpdate()})},p=e[Symbol.iterator]();!(i=(u=p.next()).done);i=!0)c()}catch(e){s=!0,l=e}finally{try{i||null==p.return||p.return()}finally{if(s)throw l}}}}])&&icon_manager_defineProperties(e.prototype,t),n&&icon_manager_defineProperties(e,n),IconManager}();function icon_layer_typeof(e){return(icon_layer_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function icon_layer_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function icon_layer_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function icon_layer_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function icon_layer_get(e,t,n){return(icon_layer_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var r=icon_layer_superPropBase(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function icon_layer_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=icon_layer_getPrototypeOf(e)););return e}function icon_layer_getPrototypeOf(e){return(icon_layer_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function icon_layer_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&icon_layer_setPrototypeOf(e,t)}function icon_layer_setPrototypeOf(e,t){return(icon_layer_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var m=a.t.fp64LowPart,y=[0,0,0,255],v={iconAtlas:null,iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},fp64:!1,getPosition:{type:"accessor",value:function value(e){return e.position}},getIcon:{type:"accessor",value:function value(e){return e.icon}},getColor:{type:"accessor",value:y},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0}},_=function(e){function IconLayer(){return icon_layer_classCallCheck(this,IconLayer),e=this,!(t=icon_layer_getPrototypeOf(IconLayer).apply(this,arguments))||"object"!==icon_layer_typeof(t)&&"function"!=typeof t?icon_layer_assertThisInitialized(e):t;var e,t}var t,n,i;return icon_layer_inherits(IconLayer,r["d"]),t=IconLayer,(n=[{key:"getShaders",value:function getShaders(){return{vs:'#define SHADER_NAME icon-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec2 instancePositions64xyLow;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute vec4 instanceIconFrames;\nattribute float instanceColorModes;\nattribute vec2 instanceOffsets;\n\nuniform float sizeScale;\nuniform vec2 iconsTextureDim;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = angle * PI / 180.0;\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  vec2 iconSize = instanceIconFrames.zw;\n  // scale icon height to match instanceSize\n  float instanceScale = iconSize.y == 0.0 ? 0.0 : instanceSizes / iconSize.y;\n\n  // scale and rotate vertex in "pixel" value and convert back to fraction in clipspace\n  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * sizeScale * instanceScale;\n  pixelOffset.y *= -1.0;\n\n  gl_Position = project_position_to_clipspace(instancePositions, instancePositions64xyLow, vec3(0.0));\n  gl_Position += project_pixel_to_clipspace(pixelOffset);\n\n  vTextureCoords = mix(\n    instanceIconFrames.xy,\n    instanceIconFrames.xy + iconSize,\n    (positions.xy + 1.0) / 2.0\n  ) / iconsTextureDim;\n\n  vTextureCoords.y = 1.0 - vTextureCoords.y;\n\n  vColor = instanceColors / 255.;\n\n  vColorMode = instanceColorModes;\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n}\n',fs:"#define SHADER_NAME icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\n\nconst float MIN_ALPHA = 0.05;\n\nvoid main(void) {\n  vec4 texColor = texture2D(iconsTexture, vTextureCoords);\n\n  // if colorMode == 0, use pixel color from the texture\n  // if colorMode == 1 or rendering picking buffer, use texture as transparency mask\n  vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);\n  // Take the global opacity and the alpha from vColor into account for the alpha component\n  float a = texColor.a * opacity * vColor.a;\n\n  if (a < MIN_ALPHA) {\n    discard;\n  }\n\n  gl_FragColor = vec4(color, a);\n\n  // use highlight color if this fragment belongs to the selected object.\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n\n  // use picking color if rendering to picking FBO.\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n",modules:[this.use64bitProjection()?"project64":"project32","picking"]}}},{key:"initializeState",value:function initializeState(){var e=this;this.state={iconManager:new g(this.context.gl,{onUpdate:function onUpdate(){return e._onUpdate()}})},this.getAttributeManager().addInstanced({instancePositions:{size:3,transition:!0,accessor:"getPosition"},instancePositions64xyLow:{size:2,accessor:"getPosition",update:this.calculateInstancePositions64xyLow},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",update:this.calculateInstanceOffsets},instanceIconFrames:{size:4,accessor:"getIcon",update:this.calculateInstanceIconFrames},instanceColorModes:{size:1,type:o.a.UNSIGNED_BYTE,accessor:"getIcon",update:this.calculateInstanceColorMode},instanceColors:{size:4,type:o.a.UNSIGNED_BYTE,transition:!0,accessor:"getColor",defaultValue:y},instanceAngles:{size:1,transition:!0,accessor:"getAngle",defaultValue:0}})}},{key:"updateState",value:function updateState(e){var t=e.oldProps,n=e.props,r=e.changeFlags;icon_layer_get(icon_layer_getPrototypeOf(IconLayer.prototype),"updateState",this).call(this,{props:n,oldProps:t,changeFlags:r});var i=this.getAttributeManager(),o=this.state.iconManager,a=n.iconAtlas,s=n.iconMapping,l=n.data,u=n.getIcon,c=!1;if(a?(t.iconAtlas!==n.iconAtlas&&o.setProps({iconAtlas:a,autoPacking:!1}),t.iconMapping!==n.iconMapping&&(o.setProps({iconMapping:s}),c=!0)):o.setProps({autoPacking:!0}),(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getIcon))&&(o.setProps({data:l,getIcon:u}),c=!0),c&&(i.invalidate("instanceOffsets"),i.invalidate("instanceIconFrames"),i.invalidate("instanceColorModes")),n.fp64!==t.fp64){var p=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(p)}),i.invalidateAll()}}},{key:"draw",value:function draw(e){var t=e.uniforms,n=this.props.sizeScale,r=this.state.iconManager.getTexture();r&&this.state.model.render(Object.assign({},t,{iconsTexture:r,iconsTextureDim:[r.width,r.height],sizeScale:n}))}},{key:"_getModel",value:function _getModel(e){return new a.h(e,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new a.g({drawMode:o.a.TRIANGLE_FAN,attributes:{positions:new Float32Array([-1,-1,0,-1,1,0,1,1,0,1,-1,0])}}),isInstanced:!0,shaderCache:this.context.shaderCache}))}},{key:"_onUpdate",value:function _onUpdate(){this.setNeedsRedraw()}},{key:"calculateInstancePositions64xyLow",value:function calculateInstancePositions64xyLow(e){var t=this.use64bitPositions();if(e.constant=!t,t){var n=this.props,r=n.data,i=n.getPosition,o=e.value,a=0,s=!0,l=!1,u=void 0;try{for(var c,p=r[Symbol.iterator]();!(s=(c=p.next()).done);s=!0){var h=i(c.value);o[a++]=m(h[0]),o[a++]=m(h[1])}}catch(e){l=!0,u=e}finally{try{s||null==p.return||p.return()}finally{if(l)throw u}}}else e.value=new Float32Array(2)}},{key:"calculateInstanceOffsets",value:function calculateInstanceOffsets(e){var t=this.props.data,n=this.state.iconManager,r=e.value,i=0,o=!0,a=!1,s=void 0;try{for(var l,u=t[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value,p=n.getIconMapping(c);r[i++]=p.width/2-p.anchorX||0,r[i++]=p.height/2-p.anchorY||0}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}}},{key:"calculateInstanceColorMode",value:function calculateInstanceColorMode(e){var t=this.props.data,n=this.state.iconManager,r=e.value,i=0,o=!0,a=!1,s=void 0;try{for(var l,u=t[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value,p=n.getIconMapping(c).mask;r[i++]=p?1:0}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}}},{key:"calculateInstanceIconFrames",value:function calculateInstanceIconFrames(e){var t=this.props.data,n=this.state.iconManager,r=e.value,i=0,o=!0,a=!1,s=void 0;try{for(var l,u=t[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value,p=n.getIconMapping(c);r[i++]=p.x||0,r[i++]=p.y||0,r[i++]=p.width||0,r[i++]=p.height||0}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}}}])&&icon_layer_defineProperties(t.prototype,n),i&&icon_layer_defineProperties(t,i),IconLayer}();_.layerName="IconLayer",_.defaultProps=v;function line_layer_typeof(e){return(line_layer_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function line_layer_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function line_layer_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function line_layer_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function line_layer_get(e,t,n){return(line_layer_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var r=line_layer_superPropBase(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function line_layer_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=line_layer_getPrototypeOf(e)););return e}function line_layer_getPrototypeOf(e){return(line_layer_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function line_layer_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&line_layer_setPrototypeOf(e,t)}function line_layer_setPrototypeOf(e,t){return(line_layer_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var b=a.t.fp64LowPart,x={fp64:!1,getSourcePosition:{type:"accessor",value:function value(e){return e.sourcePosition}},getTargetPosition:{type:"accessor",value:function value(e){return e.targetPosition}},getColor:{type:"accessor",value:[0,0,0,255]},getStrokeWidth:{type:"accessor",value:1},strokeWidth:{deprecatedFor:"getStrokeWidth"}},w=function(e){function LineLayer(){return line_layer_classCallCheck(this,LineLayer),e=this,!(t=line_layer_getPrototypeOf(LineLayer).apply(this,arguments))||"object"!==line_layer_typeof(t)&&"function"!=typeof t?line_layer_assertThisInitialized(e):t;var e,t}var t,n,i;return line_layer_inherits(LineLayer,r["d"]),t=LineLayer,(n=[{key:"getShaders",value:function getShaders(){return{vs:"#define SHADER_NAME line-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec3 instanceSourcePositions;\nattribute vec3 instanceTargetPositions;\nattribute vec4 instanceSourceTargetPositions64xyLow;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute float instanceWidths;\n\nuniform float opacity;\n\nvarying vec4 vColor;\n\n// offset vector by strokeWidth pixels\n// offset_direction is -1 (left) or 1 (right)\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);\n  // rotate by 90 degrees\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n\n  vec2 offset_screenspace = dir_screenspace * offset_direction * instanceWidths / 2.0;\n  vec2 offset_clipspace = project_pixel_to_clipspace(offset_screenspace).xy;\n\n  return offset_clipspace;\n}\n\nvoid main(void) {\n  // Position\n  vec4 source = project_position_to_clipspace(instanceSourcePositions, instanceSourceTargetPositions64xyLow.xy, vec3(0.));\n  vec4 target = project_position_to_clipspace(instanceTargetPositions, instanceSourceTargetPositions64xyLow.zw, vec3(0.));\n\n  // linear interpolation of source & target to pick right coord\n  float segmentIndex = positions.x;\n  vec4 p = mix(source, target, segmentIndex);\n\n  // extrude\n  vec2 offset = getExtrusionOffset(target.xy - source.xy, positions.y);\n  gl_Position = p + vec4(offset, 0.0, 0.0);\n\n  // Color\n  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity) / 255.;\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n}\n",fs:"#define SHADER_NAME line-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n\n  // use highlight color if this fragment belongs to the selected object.\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n\n  // use picking color if rendering to picking FBO.\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n",modules:[this.use64bitProjection()?"project64":"project32","picking"]}}},{key:"initializeState",value:function initializeState(){this.getAttributeManager().addInstanced({instanceSourcePositions:{size:3,transition:!0,accessor:"getSourcePosition"},instanceTargetPositions:{size:3,transition:!0,accessor:"getTargetPosition"},instanceSourceTargetPositions64xyLow:{size:4,accessor:["getSourcePosition","getTargetPosition"],update:this.calculateInstanceSourceTargetPositions64xyLow},instanceColors:{size:4,type:o.a.UNSIGNED_BYTE,transition:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceWidths:{size:1,transition:!0,accessor:"getStrokeWidth",defaultValue:1}})}},{key:"updateState",value:function updateState(e){var t=e.props,n=e.oldProps,r=e.changeFlags;if(line_layer_get(line_layer_getPrototypeOf(LineLayer.prototype),"updateState",this).call(this,{props:t,oldProps:n,changeFlags:r}),t.fp64!==n.fp64){var i=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(i)}),this.getAttributeManager().invalidateAll()}}},{key:"_getModel",value:function _getModel(e){return new a.h(e,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new a.g({drawMode:o.a.TRIANGLE_STRIP,attributes:{positions:new Float32Array([0,-1,0,0,1,0,1,-1,0,1,1,0])}}),isInstanced:!0,shaderCache:this.context.shaderCache}))}},{key:"calculateInstanceSourceTargetPositions64xyLow",value:function calculateInstanceSourceTargetPositions64xyLow(e){var t=this.use64bitPositions();if(e.constant=!t,t){var n=this.props,r=n.data,i=n.getSourcePosition,o=n.getTargetPosition,a=e.value,s=e.size,l=0,u=!0,c=!1,p=void 0;try{for(var h,f=r[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){var d=h.value,g=i(d),m=o(d);a[l+0]=b(g[0]),a[l+1]=b(g[1]),a[l+2]=b(m[0]),a[l+3]=b(m[1]),l+=s}}catch(e){c=!0,p=e}finally{try{u||null==f.return||f.return()}finally{if(c)throw p}}}else e.value=new Float32Array(4)}}])&&line_layer_defineProperties(t.prototype,n),i&&line_layer_defineProperties(t,i),LineLayer}();w.layerName="LineLayer",w.defaultProps=x;function point_cloud_layer_typeof(e){return(point_cloud_layer_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function point_cloud_layer_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function point_cloud_layer_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function point_cloud_layer_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function point_cloud_layer_get(e,t,n){return(point_cloud_layer_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var r=point_cloud_layer_superPropBase(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function point_cloud_layer_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=point_cloud_layer_getPrototypeOf(e)););return e}function point_cloud_layer_getPrototypeOf(e){return(point_cloud_layer_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function point_cloud_layer_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&point_cloud_layer_setPrototypeOf(e,t)}function point_cloud_layer_setPrototypeOf(e,t){return(point_cloud_layer_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var S=a.t.fp64LowPart,E=[0,0,0,255],P=[0,0,1],C={radiusPixels:{type:"number",min:0,value:10},fp64:!1,getPosition:{type:"accessor",value:function value(e){return e.position}},getNormal:{type:"accessor",value:P},getColor:{type:"accessor",value:E},lightSettings:{}},k=function(e){function PointCloudLayer(){return point_cloud_layer_classCallCheck(this,PointCloudLayer),e=this,!(t=point_cloud_layer_getPrototypeOf(PointCloudLayer).apply(this,arguments))||"object"!==point_cloud_layer_typeof(t)&&"function"!=typeof t?point_cloud_layer_assertThisInitialized(e):t;var e,t}var t,n,i;return point_cloud_layer_inherits(PointCloudLayer,r["d"]),t=PointCloudLayer,(n=[{key:"getShaders",value:function getShaders(e){return{vs:"#define SHADER_NAME point-cloud-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec3 instanceNormals;\nattribute vec4 instanceColors;\nattribute vec3 instancePositions;\nattribute vec2 instancePositions64xyLow;\nattribute vec3 instancePickingColors;\n\nuniform float opacity;\nuniform float radiusPixels;\n\nvarying vec4 vColor;\nvarying vec2 unitPosition;\n\nvoid main(void) {\n  // position on the containing square in [-1, 1] space\n  unitPosition = positions.xy;\n\n  // Find the center of the point and add the current vertex\n  vec4 position_worldspace;\n  gl_Position = project_position_to_clipspace(instancePositions, instancePositions64xyLow, vec3(0.), position_worldspace);\n  gl_Position += project_pixel_to_clipspace(positions.xy * radiusPixels);\n\n  // Apply lighting\n  float lightWeight = lighting_getLightWeight(position_worldspace.xyz, // the w component is always 1.0\n    project_normal(instanceNormals));\n\n  // Apply opacity to instance color, or return instance picking color\n  vColor = vec4(lightWeight * instanceColors.rgb, instanceColors.a * opacity) / 255.;\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n}\n",fs:"#define SHADER_NAME point-cloud-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\nvarying vec2 unitPosition;\n\nvoid main(void) {\n\n  float distToCenter = length(unitPosition);\n\n  if (distToCenter > 1.0) {\n    discard;\n  }\n\n  gl_FragColor = vColor;\n\n  // use highlight color if this fragment belongs to the selected object.\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n\n  // use picking color if rendering to picking FBO.\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n",modules:[this.use64bitProjection()?"project64":"project32","lighting","picking"]}}},{key:"initializeState",value:function initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,transition:!0,accessor:"getPosition"},instancePositions64xyLow:{size:2,accessor:"getPosition",update:this.calculateInstancePositions64xyLow},instanceNormals:{size:3,transition:!0,accessor:"getNormal",defaultValue:P},instanceColors:{size:4,type:o.a.UNSIGNED_BYTE,transition:!0,accessor:"getColor",defaultValue:E}})}},{key:"updateState",value:function updateState(e){var t=e.props,n=e.oldProps,r=e.changeFlags;if(point_cloud_layer_get(point_cloud_layer_getPrototypeOf(PointCloudLayer.prototype),"updateState",this).call(this,{props:t,oldProps:n,changeFlags:r}),t.fp64!==n.fp64){var i=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(i)}),this.getAttributeManager().invalidateAll()}}},{key:"draw",value:function draw(e){var t=e.uniforms,n=this.props.radiusPixels;this.state.model.render(Object.assign({},t,{radiusPixels:n}))}},{key:"_getModel",value:function _getModel(e){for(var t=[],n=0;n<3;n++){var r=n/3*Math.PI*2;t.push(2*Math.cos(r),2*Math.sin(r),0)}return new a.h(e,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new a.g({drawMode:o.a.TRIANGLES,attributes:{positions:new Float32Array(t)}}),isInstanced:!0,shaderCache:this.context.shaderCache}))}},{key:"calculateInstancePositions64xyLow",value:function calculateInstancePositions64xyLow(e){var t=this.use64bitPositions();if(e.constant=!t,t){var n=this.props,r=n.data,i=n.getPosition,o=e.value,a=0,s=!0,l=!1,u=void 0;try{for(var c,p=r[Symbol.iterator]();!(s=(c=p.next()).done);s=!0){var h=i(c.value);o[a++]=S(h[0]),o[a++]=S(h[1])}}catch(e){l=!0,u=e}finally{try{s||null==p.return||p.return()}finally{if(l)throw u}}}else e.value=new Float32Array(2)}}])&&point_cloud_layer_defineProperties(t.prototype,n),i&&point_cloud_layer_defineProperties(t,i),PointCloudLayer}();k.layerName="PointCloudLayer",k.defaultProps=C;function scatterplot_layer_typeof(e){return(scatterplot_layer_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function scatterplot_layer_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function scatterplot_layer_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function scatterplot_layer_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function scatterplot_layer_get(e,t,n){return(scatterplot_layer_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var r=scatterplot_layer_superPropBase(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function scatterplot_layer_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=scatterplot_layer_getPrototypeOf(e)););return e}function scatterplot_layer_getPrototypeOf(e){return(scatterplot_layer_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function scatterplot_layer_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&scatterplot_layer_setPrototypeOf(e,t)}function scatterplot_layer_setPrototypeOf(e,t){return(scatterplot_layer_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var T=a.t.fp64LowPart,A=[0,0,0,255],O={radiusScale:{type:"number",min:0,value:1},radiusMinPixels:{type:"number",min:0,value:0},radiusMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},lineWidthScale:{type:"number",min:0,value:1},lineWidthMinPixels:{type:"number",min:0,value:0},lineWidthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},stroked:!1,fp64:!1,filled:!0,getPosition:{type:"accessor",value:function value(e){return e.position}},getRadius:{type:"accessor",value:1},getFillColor:{type:"accessor",value:A},getLineColor:{type:"accessor",value:A},getLineWidth:{type:"accessor",value:1},strokeWidth:{deprecatedFor:"getLineWidth"},outline:{deprecatedFor:"stroked"},getColor:{deprecatedFor:["getFillColor","getLineColor"]}},I=function(e){function ScatterplotLayer(){return scatterplot_layer_classCallCheck(this,ScatterplotLayer),e=this,!(t=scatterplot_layer_getPrototypeOf(ScatterplotLayer).apply(this,arguments))||"object"!==scatterplot_layer_typeof(t)&&"function"!=typeof t?scatterplot_layer_assertThisInitialized(e):t;var e,t}var t,n,i;return scatterplot_layer_inherits(ScatterplotLayer,r["d"]),t=ScatterplotLayer,(n=[{key:"getShaders",value:function getShaders(e){return{vs:"#define SHADER_NAME scatterplot-layer-vertex-shader\n\nattribute vec3 positions;\n\nattribute vec3 instancePositions;\nattribute vec2 instancePositions64xyLow;\nattribute float instanceRadius;\nattribute float instanceLineWidths;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\nuniform float opacity;\nuniform float radiusScale;\nuniform float radiusMinPixels;\nuniform float radiusMaxPixels;\nuniform float lineWidthScale;\nuniform float lineWidthMinPixels;\nuniform float lineWidthMaxPixels;\nuniform float stroked;\nuniform bool filled;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying vec2 unitPosition;\nvarying float innerUnitRadius;\n\nvoid main(void) {\n  // Multiply out radius and clamp to limits\n  float outerRadiusPixels = clamp(\n    project_scale(radiusScale * instanceRadius),\n    radiusMinPixels, radiusMaxPixels\n  );\n  \n  // Multiply out line width and clamp to limits\n  float lineWidth = clamp(\n    project_scale(lineWidthScale * instanceLineWidths), \n    lineWidthMinPixels, lineWidthMaxPixels\n  );\n\n  // outer radius needs to offset by half stroke width\n  outerRadiusPixels += stroked * lineWidth / 2.0;\n\n  // position on the containing square in [-1, 1] space\n  unitPosition = positions.xy;\n\n  innerUnitRadius = 1.0 - stroked * lineWidth / outerRadiusPixels;\n  \n  vec3 offset = positions * outerRadiusPixels;\n  gl_Position = project_position_to_clipspace(instancePositions, instancePositions64xyLow, offset);\n\n  // Apply opacity to instance color, or return instance picking color\n  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity) / 255.;\n  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity) / 255.;\n  \n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n}\n",fs:"#define SHADER_NAME scatterplot-layer-fragment-shader\n\nprecision highp float;\n\nuniform bool filled;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying vec2 unitPosition;\nvarying float innerUnitRadius;\n\nvoid main(void) {\n\n  float distToCenter = length(unitPosition);\n\n  if (distToCenter > 1.0) {\n    discard;\n  } \n  if (distToCenter > innerUnitRadius) {\n    gl_FragColor = vLineColor;\n  } else if (filled) {\n    gl_FragColor = vFillColor;\n  } else {\n    discard;\n  }\n\n  // use highlight color if this fragment belongs to the selected object.\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n\n  // use picking color if rendering to picking FBO.\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n",modules:[this.use64bitProjection()?"project64":"project32","picking"]}}},{key:"initializeState",value:function initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,transition:!0,accessor:"getPosition"},instancePositions64xyLow:{size:2,accessor:"getPosition",update:this.calculateInstancePositions64xyLow},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1},instanceFillColors:{size:4,transition:!0,type:o.a.UNSIGNED_BYTE,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:4,transition:!0,type:o.a.UNSIGNED_BYTE,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}},{key:"updateState",value:function updateState(e){var t=e.props,n=e.oldProps,r=e.changeFlags;if(scatterplot_layer_get(scatterplot_layer_getPrototypeOf(ScatterplotLayer.prototype),"updateState",this).call(this,{props:t,oldProps:n,changeFlags:r}),t.fp64!==n.fp64){var i=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(i)}),this.getAttributeManager().invalidateAll()}}},{key:"draw",value:function draw(e){var t=e.uniforms,n=this.props,r=n.radiusScale,i=n.radiusMinPixels,o=n.radiusMaxPixels,a=n.stroked,s=n.filled,l=n.lineWidthScale,u=n.lineWidthMinPixels,c=n.lineWidthMaxPixels;this.state.model.render(Object.assign({},t,{stroked:a?1:0,filled:s,radiusScale:r,radiusMinPixels:i,radiusMaxPixels:o,lineWidthScale:l,lineWidthMinPixels:u,lineWidthMaxPixels:c}))}},{key:"_getModel",value:function _getModel(e){return new a.h(e,Object.assign(this.getShaders(),{id:this.props.id,geometry:new a.g({drawMode:o.a.TRIANGLE_FAN,attributes:{positions:new Float32Array([-1,-1,0,-1,1,0,1,1,0,1,-1,0])}}),isInstanced:!0,shaderCache:this.context.shaderCache}))}},{key:"calculateInstancePositions64xyLow",value:function calculateInstancePositions64xyLow(e){var t=this.use64bitPositions();if(e.constant=!t,t){var n=this.props,r=n.data,i=n.getPosition,o=e.value,a=0,s=!0,l=!1,u=void 0;try{for(var c,p=r[Symbol.iterator]();!(s=(c=p.next()).done);s=!0){var h=i(c.value);o[a++]=T(h[0]),o[a++]=T(h[1])}}catch(e){l=!0,u=e}finally{try{s||null==p.return||p.return()}finally{if(l)throw u}}}else e.value=new Float32Array(2)}}])&&scatterplot_layer_defineProperties(t.prototype,n),i&&scatterplot_layer_defineProperties(t,i),ScatterplotLayer}();I.layerName="ScatterplotLayer",I.defaultProps=O;function screen_grid_layer_typeof(e){return(screen_grid_layer_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function screen_grid_layer_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function screen_grid_layer_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function screen_grid_layer_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function screen_grid_layer_get(e,t,n){return(screen_grid_layer_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var r=screen_grid_layer_superPropBase(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function screen_grid_layer_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=screen_grid_layer_getPrototypeOf(e)););return e}function screen_grid_layer_getPrototypeOf(e){return(screen_grid_layer_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function screen_grid_layer_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&screen_grid_layer_setPrototypeOf(e,t)}function screen_grid_layer_setPrototypeOf(e,t){return(screen_grid_layer_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var R=r.h.defaultColorRange,L=[0,0,0,0],M=[0,255,0,255],j=["minColor","maxColor","colorRange","colorDomain"],D={cellSizePixels:{value:100,min:1},cellMarginPixels:{value:2,min:0,max:5},colorDomain:null,colorRange:R,getPosition:{type:"accessor",value:function value(e){return e.position}},getWeight:{type:"accessor",value:function value(e){return[1,0,0]}},gpuAggregation:!0,aggregation:"SUM"},F=function(e){function ScreenGridLayer(){return screen_grid_layer_classCallCheck(this,ScreenGridLayer),e=this,!(t=screen_grid_layer_getPrototypeOf(ScreenGridLayer).apply(this,arguments))||"object"!==screen_grid_layer_typeof(t)&&"function"!=typeof t?screen_grid_layer_assertThisInitialized(e):t;var e,t}var t,n,i;return screen_grid_layer_inherits(ScreenGridLayer,r["d"]),t=ScreenGridLayer,(n=[{key:"getShaders",value:function getShaders(){var e=Object(a.w)(this.context.gl)?{vs:"#version 300 es\n#define SHADER_NAME screen-grid-layer-vertex-shader\n#define RANGE_COUNT 6\n\nin vec3 vertices;\nin vec3 instancePositions;\nin vec4 instanceCounts;\nin vec3 instancePickingColors;\n\nlayout(std140) uniform;\nuniform float opacity;\nuniform vec3 cellScale;\nuniform vec4 minColor;\nuniform vec4 maxColor;\nuniform AggregationData\n{\n  vec4 maxCount;\n} aggregationData;\n\nuniform vec4 colorRange[RANGE_COUNT];\nuniform vec2 colorDomain;\nuniform bool shouldUseMinMax;\n\nout vec4 vColor;\nout float vSampleCount;\n\nvec4 quantizeScale(vec2 domain, vec4 range[RANGE_COUNT], float value) {\n  vec4 outColor = vec4(0., 0., 0., 0.);\n  if (value >= domain.x && value <= domain.y) {\n    float domainRange = domain.y - domain.x;\n    if (domainRange <= 0.) {\n      outColor = colorRange[0];\n    } else {\n      float rangeCount = float(RANGE_COUNT);\n      float rangeStep = domainRange / rangeCount;\n      float idx = floor((value - domain.x) / rangeStep);\n      idx = clamp(idx, 0., rangeCount - 1.);\n      int intIdx = int(idx);\n      outColor = colorRange[intIdx];\n    }\n  }\n  outColor = outColor / 255.;\n  return outColor;\n}\n\nvoid main(void) {\n  vSampleCount = instanceCounts.a;\n\n  float weight = instanceCounts.r ;\n  float maxWeight = aggregationData.maxCount.r;\n  float step = weight / maxWeight;\n  vec4 minMaxColor = mix(minColor, maxColor, step) / 255.;\n\n  vec2 domain = colorDomain;\n  float domainMaxValid = float(colorDomain.y != 0.);\n  domain.y = mix(maxWeight, colorDomain.y, domainMaxValid);\n  vec4 rangeColor = quantizeScale(domain, colorRange, weight);\n\n  float rangeMinMax = float(shouldUseMinMax);\n  vec4 color = mix(rangeColor, minMaxColor, rangeMinMax);\n  vColor = vec4(color.rgb, color.a * opacity);\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n\n  gl_Position = vec4(instancePositions + vertices * cellScale, 1.);\n}\n",fs:"#version 300 es\n#define SHADER_NAME screen-grid-layer-fragment-shader\n\nprecision highp float;\n\nin vec4 vColor;\nin float vSampleCount;\nout vec4 fragColor;\n\nvoid main(void) {\n  if (vSampleCount <= 0.0) {\n    discard;\n  }\n  fragColor = vColor;\n\n  fragColor = picking_filterColor(fragColor);\n}\n"}:{vs:"#define SHADER_NAME screen-grid-layer-vertex-shader-webgl1\n#define RANGE_COUNT 6\n\nattribute vec3 vertices;\nattribute vec3 instancePositions;\nattribute vec4 instanceCounts;\nattribute vec3 instancePickingColors;\n\nuniform float opacity;\nuniform vec3 cellScale;\nuniform vec4 minColor;\nuniform vec4 maxColor;\nuniform float maxWeight;\nuniform vec4 colorRange[RANGE_COUNT];\nuniform vec2 colorDomain;\nuniform bool shouldUseMinMax;\n\nvarying vec4 vColor;\nvarying float vSampleCount;\n\nvec4 quantizeScale(vec2 domain, vec4 range[RANGE_COUNT], float value) {\n  vec4 outColor = vec4(0., 0., 0., 0.);\n  if (value >= domain.x && value <= domain.y) {\n    float domainRange = domain.y - domain.x;\n    if (domainRange <= 0.) {\n      outColor = colorRange[0];\n    } else {\n      float rangeCount = float(RANGE_COUNT);\n      float rangeStep = domainRange / rangeCount;\n      float idx = floor((value - domain.x) / rangeStep);\n      idx = clamp(idx, 0., rangeCount - 1.);\n      int intIdx = int(idx);\n      outColor = colorRange[intIdx];\n    }\n  }\n  outColor = outColor / 255.;\n  return outColor;\n}\n\nvoid main(void) {\n  vSampleCount = instanceCounts.a;\n\n  float weight = instanceCounts.r;\n  float step = weight / maxWeight;\n  vec4 minMaxColor = mix(minColor, maxColor, step) / 255.;\n\n  vec2 domain = colorDomain;\n  float domainMaxValid = float(colorDomain.y != 0.);\n  domain.y = mix(maxWeight, colorDomain.y, domainMaxValid);\n  vec4 rangeColor = quantizeScale(domain, colorRange, weight);\n\n  float rangeMinMax = float(shouldUseMinMax);\n  vec4 color = mix(rangeColor, minMaxColor, rangeMinMax);\n  vColor = vec4(color.rgb, color.a * opacity);\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n\n  gl_Position = vec4(instancePositions + vertices * cellScale, 1.);\n}\n",fs:"#define SHADER_NAME screen-grid-layer-fragment-shader-webgl1\n\nprecision highp float;\n\nvarying vec4 vColor;\nvarying float vSampleCount;\n\nvoid main(void) {\n  if (vSampleCount <= 0.0) {\n    discard;\n  }\n  gl_FragColor = vColor;\n\n  gl_FragColor = picking_filterColor(gl_FragColor);\n}\n"};return e.modules=["picking"],e}},{key:"initializeState",value:function initializeState(){var e=this.getAttributeManager(),t=this.context.gl;e.addInstanced({instancePositions:{size:3,update:this.calculateInstancePositions},instanceCounts:{size:4,transition:!0,accessor:["getPosition","getWeight"],update:this.calculateInstanceCounts,noAlloc:!0}});var n={id:"".concat(this.id,"-aggregator"),shaderCache:this.context.shaderCache},i=this._getMaxCountBuffer(t),o={color:{size:1,operation:r.a.SUM,needMax:!0,maxBuffer:i}};this.setState({model:this._getModel(t),gpuGridAggregator:new r.f(t,n),maxBuffer:i,weights:o,aggregationResults:null}),this._setupUniformBuffer()}},{key:"shouldUpdateState",value:function shouldUpdateState(e){return e.changeFlags.somethingChanged}},{key:"updateState",value:function updateState(e){screen_grid_layer_get(screen_grid_layer_getPrototypeOf(ScreenGridLayer.prototype),"updateState",this).call(this,e),this._updateUniforms(e),e.changeFlags.dataChanged&&this._processData();var t=this._getAggregationChangeFlags(e);t&&this._updateAggregation(t)}},{key:"draw",value:function draw(e){var t=e.uniforms,n=this.context.gl,r=this.props.parameters,i=void 0===r?{}:r,s=this.props.minColor||L,l=this.props.maxColor||M,u=this.props.colorDomain||[1,0],c=this.state,p=c.model,h=c.maxBuffer,f=c.cellScale,d=c.shouldUseMinMax,g=c.colorRange,m=c.maxWeight,y={minColor:s,maxColor:l,cellScale:f,colorRange:g,colorDomain:u,shouldUseMinMax:d};Object(a.w)(n)?h.bind({target:o.a.UNIFORM_BUFFER}):y.maxWeight=m,t=Object.assign(y,t),p.draw({uniforms:t,parameters:Object.assign({depthTest:!1,depthMask:!1},i)}),Object(a.w)(n)&&h.unbind()}},{key:"calculateInstancePositions",value:function calculateInstancePositions(e,t){for(var n=t.numInstances,r=this.context.viewport,i=r.width,o=r.height,a=this.props.cellSizePixels,s=this.state.numCol,l=e.value,u=e.size,c=0;c<n;c++){var p=c%s,h=Math.floor(c/s);l[c*u+0]=p*a/i*2-1,l[c*u+1]=1-h*a/o*2,l[c*u+2]=0}}},{key:"calculateInstanceCounts",value:function calculateInstanceCounts(e,t){t.numInstances;var n=this.state.aggregationBuffer;e.update({buffer:n})}},{key:"getPickingInfo",value:function getPickingInfo(e){var t=e.info,n=(e.mode,t.index);if(n>=0){var i=this.state.aggregationResults;i.aggregationData=i.aggregationData||this.state.aggregationBuffer.getData(),i.maxData=i.maxData||this.state.maxBuffer.getData();var o=i.aggregationData,a=i.maxData;t.object=r.f.getAggregationData({aggregationData:o,maxData:a,pixelIndex:n})}return t}},{key:"_getAggregationChangeFlags",value:function _getAggregationChangeFlags(e){var t=e.oldProps,n=e.props,r=e.changeFlags,i=n.cellSizePixels!==t.cellSizePixels||n.cellMarginPixels!==t.cellMarginPixels,o=r.dataChanged||n.aggregation!==t.aggregation,a=r.viewportChanged;return i||o||a?{cellSizeChanged:i,dataChanged:o,viewportChanged:a}:null}},{key:"_getModel",value:function _getModel(e){return new a.h(e,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new a.g({drawMode:o.a.TRIANGLE_FAN,attributes:{vertices:new Float32Array([0,0,0,1,0,0,1,1,0,0,1,0])}}),isInstanced:!0,shaderCache:this.context.shaderCache}))}},{key:"_getMaxCountBuffer",value:function _getMaxCountBuffer(e){return new a.b(e,{bytes:16,size:4,index:0})}},{key:"_getWeight",value:function _getWeight(e){var t=(0,this.props.getWeight)(e);return Array.isArray(t)?t:[t,0,0]}},{key:"_processData",value:function _processData(){var e,t=this.props,n=t.data,r=t.getPosition,i=[],o=[],a=this.state.weights,s=!0,l=!1,u=void 0;try{for(var c,p=n[Symbol.iterator]();!(s=(c=p.next()).done);s=!0){var h=c.value,f=r(h);i.push(f[0]),i.push(f[1]),o.push.apply(o,_arrayWithoutHoles(e=this._getWeight(h))||_iterableToArray(e)||_nonIterableSpread())}}catch(e){l=!0,u=e}finally{try{s||null==p.return||p.return()}finally{if(l)throw u}}a.color.values=o,this.setState({positions:i})}},{key:"_setupUniformBuffer",value:function _setupUniformBuffer(){var e=this.context.gl;if(Object(a.w)(e)){var t=this.state.model.program.handle,n=e.getUniformBlockIndex(t,"AggregationData");e.uniformBlockBinding(t,n,0)}}},{key:"_shouldUseMinMax",value:function _shouldUseMinMax(){var e=this.props,t=e.minColor,n=e.maxColor,i=e.colorDomain,o=e.colorRange;return t||n?(r.i.deprecated("ScreenGridLayer props: minColor and maxColor","colorRange, colorDomain")(),!0):!i&&!o}},{key:"_updateAggregation",value:function _updateAggregation(e){var t=this.getAttributeManager();(e.cellSizeChanged||e.viewportChanged)&&(this._updateGridParams(),t.invalidateAll());var n=this.props,i=n.cellSizePixels,o=n.gpuAggregation,a=this.state,s=a.positions,l=a.weights,u=this.context.viewport;l.color.operation=r.a[this.props.aggregation.toUpperCase()]||r.a.SUM;var c=!1,p=null;this.context.viewport instanceof r.e?c=!0:(c=!1,p=u.pixelProjectionMatrix);var h=this.state.gpuGridAggregator.run({positions:s,weights:l,cellSize:[i,i],viewport:u,changeFlags:e,useGPU:o,projectPoints:c,gridTransformMatrix:p}),f=h.color.maxData&&Number.isFinite(h.color.maxData[0])?h.color.maxData[0]:0,d={aggregationData:h.color.aggregationData,maxData:h.color.maxData};this.setState({aggregationResults:d,maxWeight:f}),t.invalidate("instanceCounts")}},{key:"_updateUniforms",value:function _updateUniforms(e){var t=e.oldProps,n=e.props,r=e.changeFlags,i={};if(j.some(function(e){return t[e]!==n[e]})&&(i.shouldUseMinMax=this._shouldUseMinMax()),t.colorRange!==n.colorRange){var o=[];n.colorRange.forEach(function(e){o.push(e[0],e[1],e[2],e[3]||255)}),i.colorRange=o}if(t.cellMarginPixels!==n.cellMarginPixels||t.cellSizePixels!==n.cellSizePixels||r.viewportChanged){var a=this.context.viewport,s=a.width,l=a.height,u=this.props,c=u.cellSizePixels,p=u.cellMarginPixels,h=c>p?p:0;i.cellScale=new Float32Array([(c-h)/s*2,-(c-h)/l*2,1])}this.setState(i)}},{key:"_updateGridParams",value:function _updateGridParams(){var e=this.context.viewport,t=e.width,n=e.height,r=this.props.cellSizePixels,i=this.context.gl,s=Math.ceil(t/r),l=Math.ceil(n/r),u=s*l,c=4*u*4,p=this.state.aggregationBuffer;p&&p.delete(),p=new a.b(i,{size:4,bytes:c,type:o.a.FLOAT,instanced:1}),this.state.weights.color.aggregationBuffer=p,this.setState({numCol:s,numRow:l,numInstances:u,aggregationBuffer:p})}}])&&screen_grid_layer_defineProperties(t.prototype,n),i&&screen_grid_layer_defineProperties(t,i),ScreenGridLayer}();F.layerName="ScreenGridLayer",F.defaultProps=D;function grid_cell_layer_typeof(e){return(grid_cell_layer_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function grid_cell_layer_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function grid_cell_layer_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function grid_cell_layer_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function grid_cell_layer_get(e,t,n){return(grid_cell_layer_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var r=grid_cell_layer_superPropBase(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function grid_cell_layer_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=grid_cell_layer_getPrototypeOf(e)););return e}function grid_cell_layer_getPrototypeOf(e){return(grid_cell_layer_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function grid_cell_layer_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&grid_cell_layer_setPrototypeOf(e,t)}function grid_cell_layer_setPrototypeOf(e,t){return(grid_cell_layer_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var N=a.t.fp64LowPart,B=[255,0,255,255],z={cellSize:{type:"number",min:0,max:1e3,value:1e3},coverage:{type:"number",min:0,max:1,value:1},elevationScale:{type:"number",min:0,value:1},extruded:!0,fp64:!1,getPosition:{type:"accessor",value:function value(e){return e.position}},getElevation:{type:"accessor",value:1e3},getColor:{type:"accessor",value:B},lightSettings:{}},U=function(e){function GridCellLayer(){return grid_cell_layer_classCallCheck(this,GridCellLayer),e=this,!(t=grid_cell_layer_getPrototypeOf(GridCellLayer).apply(this,arguments))||"object"!==grid_cell_layer_typeof(t)&&"function"!=typeof t?grid_cell_layer_assertThisInitialized(e):t;var e,t}var t,n,i;return grid_cell_layer_inherits(GridCellLayer,r["d"]),t=GridCellLayer,(n=[{key:"getShaders",value:function getShaders(){return{vs:"#define SHADER_NAME grid-cell-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec3 normals;\n\nattribute vec3 instancePositions;\nattribute vec2 instancePositions64xyLow;\nattribute float instanceElevations;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\n\n// Custom uniforms\nuniform float extruded;\nuniform float cellSize;\nuniform float coverage;\nuniform float opacity;\nuniform float elevationScale;\n\n// A magic number to scale elevation so that 1 unit approximate to 1 meter\n#define ELEVATION_SCALE 0.8\n\n// Result\nvarying vec4 vColor;\n\nvoid main(void) {\n\n  // if ahpha == 0.0 or z < 0.0, do not render element\n  float noRender = float(instanceColors.a == 0.0 || instanceElevations < 0.0);\n  float finalCellSize = project_scale(cellSize) * mix(1.0, 0.0, noRender);\n\n  float elevation = 0.0;\n\n  if (extruded > 0.5) {\n    elevation = instanceElevations  * (positions.z + 1.0) *\n      ELEVATION_SCALE * elevationScale;\n  }\n\n  // cube geometry vertics are between -1 to 1, scale and transform it to between 0, 1\n  vec3 extrudedPosition = vec3(instancePositions.xy, elevation);\n  vec2 extrudedPosition64xyLow = instancePositions64xyLow;\n  vec3 offset = vec3(\n    (positions.x * coverage + 1.0) / 2.0 * finalCellSize,\n    (positions.y * coverage - 1.0) / 2.0 * finalCellSize,\n    1.0);\n\n  // extrude positions\n  vec4 position_worldspace;\n  gl_Position = project_position_to_clipspace(extrudedPosition, extrudedPosition64xyLow, offset, position_worldspace);\n\n  float lightWeight = 1.0;\n\n  if (extruded > 0.5) {\n    lightWeight = lighting_getLightWeight(\n      position_worldspace.xyz, // the w component is always 1.0\n      normals\n    );\n  }\n\n  vec3 lightWeightedColor = lightWeight * instanceColors.rgb;\n  vec4 color = vec4(lightWeightedColor, instanceColors.a * opacity) / 255.0;\n  vColor = color;\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n}\n",fs:"#define SHADER_NAME grid-cell-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n\n  // use highlight color if this fragment belongs to the selected object.\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n\n  // use picking color if rendering to picking FBO.\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n",modules:[this.use64bitProjection()?"project64":"project32","lighting","picking"]}}},{key:"initializeState",value:function initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,transition:!0,accessor:"getPosition"},instanceElevations:{size:1,transition:!0,accessor:"getElevation"},instancePositions64xyLow:{size:2,accessor:"getPosition",update:this.calculateInstancePositions64xyLow},instanceColors:{size:4,type:o.a.UNSIGNED_BYTE,transition:!0,accessor:"getColor",defaultValue:B}})}},{key:"updateState",value:function updateState(e){var t=e.props,n=e.oldProps,r=e.changeFlags;if(grid_cell_layer_get(grid_cell_layer_getPrototypeOf(GridCellLayer.prototype),"updateState",this).call(this,{props:t,oldProps:n,changeFlags:r}),t.fp64!==n.fp64){var i=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(i)}),this.getAttributeManager().invalidateAll()}}},{key:"_getModel",value:function _getModel(e){return new a.h(e,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new a.c,isInstanced:!0,shaderCache:this.context.shaderCache}))}},{key:"draw",value:function draw(e){var t=e.uniforms,n=this.props,r=n.cellSize,i=n.extruded,o=n.elevationScale,a=n.coverage;this.state.model.render(Object.assign({},t,{cellSize:r,extruded:i,elevationScale:o,coverage:a}))}},{key:"calculateInstancePositions64xyLow",value:function calculateInstancePositions64xyLow(e){var t=this.use64bitPositions();if(e.constant=!t,t){var n=this.props,r=n.data,i=n.getPosition,o=e.value,a=0,s=!0,l=!1,u=void 0;try{for(var c,p=r[Symbol.iterator]();!(s=(c=p.next()).done);s=!0){var h=i(c.value);o[a++]=N(h[0]),o[a++]=N(h[1])}}catch(e){l=!0,u=e}finally{try{s||null==p.return||p.return()}finally{if(l)throw u}}}else e.value=new Float32Array(2)}}])&&grid_cell_layer_defineProperties(t.prototype,n),i&&grid_cell_layer_defineProperties(t,i),GridCellLayer}();U.layerName="GridCellLayer",U.defaultProps=z;var V=6378e3;function pointToDensityGridData(e,t,n){var r=_pointsToGridHashing(e,t,n),i=r.gridHash,o=r.gridOffset;return{gridOffset:o,layerData:_getGridLayerDataFromGridHash(i,o)}}function _pointsToGridHashing(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,i=1/0,o=-1/0,a=!0,s=!1,l=void 0;try{for(var u,c=t[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){e=r(u.value)[1],Number.isFinite(e)&&(i=e<i?e:i,o=e>o?e:o)}}catch(e){s=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(s)throw l}}var p=_calculateGridLatLonOffset(n,(i+o)/2);if(p.xOffset<=0||p.yOffset<=0)return{gridHash:{},gridOffset:p};var h={},f=!0,d=!1,g=void 0;try{for(var m,y=t[Symbol.iterator]();!(f=(m=y.next()).done);f=!0){var v=m.value,_=r(v)[1],b=r(v)[0];if(Number.isFinite(_)&&Number.isFinite(b)){var x=Math.floor((_+90)/p.yOffset),w=Math.floor((b+180)/p.xOffset),S="".concat(x,"-").concat(w);h[S]=h[S]||{count:0,points:[]},h[S].count+=1,h[S].points.push(v)}}}catch(e){d=!0,g=e}finally{try{f||null==y.return||y.return()}finally{if(d)throw g}}return{gridHash:h,gridOffset:p}}function _getGridLayerDataFromGridHash(e,t){return Object.keys(e).reduce(function(n,r,i){var o=r.split("-"),a=parseInt(o[0],10),s=parseInt(o[1],10);return n.push(Object.assign({index:i,position:[t.xOffset*s-180,t.yOffset*a-90]},e[r])),n},[])}function _calculateGridLatLonOffset(e,t){var n;return{yOffset:e/V*(180/Math.PI),xOffset:(n=t,e/V*(180/Math.PI)/Math.cos(n*Math.PI/180))}}function grid_layer_typeof(e){return(grid_layer_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function grid_layer_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function grid_layer_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function grid_layer_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function grid_layer_getPrototypeOf(e){return(grid_layer_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function grid_layer_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&grid_layer_setPrototypeOf(e,t)}function grid_layer_setPrototypeOf(e,t){return(grid_layer_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var G=r.h.BinSorter,W=r.h.defaultColorRange,q=r.h.getQuantizeScale,H=r.h.getLinearScale;function nop(){}var X={colorDomain:null,colorRange:W,getColorValue:{type:"accessor",value:function value(e){return e.length}},lowerPercentile:{type:"number",min:0,max:100,value:0},upperPercentile:{type:"number",min:0,max:100,value:100},onSetColorDomain:nop,elevationDomain:null,elevationRange:[0,1e3],getElevationValue:{type:"accessor",value:function value(e){return e.length}},elevationLowerPercentile:{type:"number",min:0,max:100,value:0},elevationUpperPercentile:{type:"number",min:0,max:100,value:100},elevationScale:1,onSetElevationDomain:nop,cellSize:{type:"number",min:0,max:1e3,value:1e3},coverage:{type:"number",min:0,max:1,value:1},getPosition:{type:"accessor",value:function value(e){return e.position}},extruded:!1,fp64:!1,lightSettings:{}},K=function(e){function GridLayer(){return grid_layer_classCallCheck(this,GridLayer),e=this,!(t=grid_layer_getPrototypeOf(GridLayer).apply(this,arguments))||"object"!==grid_layer_typeof(t)&&"function"!=typeof t?grid_layer_assertThisInitialized(e):t;var e,t}var t,n,i;return grid_layer_inherits(GridLayer,r["b"]),t=GridLayer,(n=[{key:"initializeState",value:function initializeState(){this.state={layerData:[],sortedColorBins:null,sortedElevationBins:null,colorValueDomain:null,elevationValueDomain:null,colorScaleFunc:nop,elevationScaleFunc:nop,dimensionUpdaters:this.getDimensionUpdaters()}}},{key:"updateState",value:function updateState(e){var t=this,n=e.oldProps,r=e.props,i=e.changeFlags,o=this.needsReProjectPoints(n,r,i);i.dataChanged||o?this.getLayerData():(this.getDimensionChanges(n,r)||[]).forEach(function(e){return"function"==typeof e&&e.apply(t)})}},{key:"needsReProjectPoints",value:function needsReProjectPoints(e,t,n){return e.cellSize!==t.cellSize||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getPosition)}},{key:"getDimensionUpdaters",value:function getDimensionUpdaters(){return{getColor:[{id:"value",triggers:["getColorValue"],updater:this.getSortedColorBins},{id:"domain",triggers:["lowerPercentile","upperPercentile"],updater:this.getColorValueDomain},{id:"scaleFunc",triggers:["colorDomain","colorRange"],updater:this.getColorScale}],getElevation:[{id:"value",triggers:["getElevationValue"],updater:this.getSortedElevationBins},{id:"domain",triggers:["elevationLowerPercentile","elevationUpperPercentile"],updater:this.getElevationValueDomain},{id:"scaleFunc",triggers:["elevationDomain","elevationRange"],updater:this.getElevationScale}]}}},{key:"getDimensionChanges",value:function getDimensionChanges(e,t){var n=this.state.dimensionUpdaters,r=[];for(var i in n){var o=n[i].find(function(n){return n.triggers.some(function(n){return e[n]!==t[n]})});o&&r.push(o.updater)}return r.length?r:null}},{key:"getPickingInfo",value:function getPickingInfo(e){var t=e.info,n=this.state,r=n.sortedColorBins,i=n.sortedElevationBins,o=null;if(t.picked&&t.index>-1){var a=this.state.layerData[t.index],s=r.binMap[a.index]&&r.binMap[a.index].value,l=i.binMap[a.index]&&i.binMap[a.index].value;o=Object.assign({colorValue:s,elevationValue:l},a)}return Object.assign(t,{picked:Boolean(o),object:o})}},{key:"getUpdateTriggers",value:function getUpdateTriggers(){var e=this,t=this.state.dimensionUpdaters,n={},r=function _loop(r){n[r]={};var i=!0,o=!1,a=void 0;try{for(var s,l=t[r][Symbol.iterator]();!(i=(s=l.next()).done);i=!0){s.value.triggers.forEach(function(t){n[r][t]=e.props[t]})}}catch(e){o=!0,a=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw a}}};for(var i in t)r(i);return n}},{key:"getLayerData",value:function getLayerData(){var e=this.props,t=pointToDensityGridData(e.data,e.cellSize,e.getPosition).layerData;this.setState({layerData:t}),this.getSortedBins()}},{key:"getValueDomain",value:function getValueDomain(){this.getColorValueDomain(),this.getElevationValueDomain()}},{key:"getSortedBins",value:function getSortedBins(){this.getSortedColorBins(),this.getSortedElevationBins()}},{key:"getSortedColorBins",value:function getSortedColorBins(){var e=this.props.getColorValue,t=new G(this.state.layerData||[],e);this.setState({sortedColorBins:t}),this.getColorValueDomain()}},{key:"getSortedElevationBins",value:function getSortedElevationBins(){var e=this.props.getElevationValue,t=new G(this.state.layerData||[],e);this.setState({sortedElevationBins:t}),this.getElevationValueDomain()}},{key:"getColorValueDomain",value:function getColorValueDomain(){var e=this.props,t=e.lowerPercentile,n=e.upperPercentile,r=e.onSetColorDomain;this.state.colorValueDomain=this.state.sortedColorBins.getValueRange([t,n]),"function"==typeof r&&r(this.state.colorValueDomain),this.getColorScale()}},{key:"getElevationValueDomain",value:function getElevationValueDomain(){var e=this.props,t=e.elevationLowerPercentile,n=e.elevationUpperPercentile,r=e.onSetElevationDomain;this.state.elevationValueDomain=this.state.sortedElevationBins.getValueRange([t,n]),"function"==typeof r&&r(this.state.elevationValueDomain),this.getElevationScale()}},{key:"getColorScale",value:function getColorScale(){var e=this.props.colorRange,t=this.props.colorDomain||this.state.colorValueDomain;this.state.colorScaleFunc=q(t,e)}},{key:"getElevationScale",value:function getElevationScale(){var e=this.props.elevationRange,t=this.props.elevationDomain||this.state.elevationValueDomain;this.state.elevationScaleFunc=H(t,e)}},{key:"_onGetSublayerColor",value:function _onGetSublayerColor(e){var t=this.state,n=t.sortedColorBins,r=t.colorScaleFunc,i=t.colorValueDomain,o=n.binMap[e.index]&&n.binMap[e.index].value,a=this.props.colorDomain||i,s=o>=a[0]&&o<=a[a.length-1]?r(o):[0,0,0,0];return s[3]=Number.isFinite(s[3])?s[3]:255,s}},{key:"_onGetSublayerElevation",value:function _onGetSublayerElevation(e){var t=this.state,n=t.sortedElevationBins,r=t.elevationScaleFunc,i=t.elevationValueDomain,o=n.binMap[e.index]&&n.binMap[e.index].value,a=this.props.elevationDomain||i;return o>=a[0]&&o<=a[a.length-1]?r(o):-1}},{key:"renderLayers",value:function renderLayers(){var e=this.props,t=e.elevationScale,n=e.fp64,r=e.extruded,i=e.cellSize,o=e.coverage,a=e.lightSettings,s=e.transitions;return new(this.getSubLayerClass("grid-cell",U))({fp64:n,cellSize:i,coverage:o,lightSettings:a,elevationScale:t,extruded:r,getColor:this._onGetSublayerColor.bind(this),getElevation:this._onGetSublayerElevation.bind(this),transitions:s&&{getColor:s.getColorValue,getElevation:s.getElevationValue}},this.getSubLayerProps({id:"grid-cell",updateTriggers:this.getUpdateTriggers()}),{data:this.state.layerData})}}])&&grid_layer_defineProperties(t.prototype,n),i&&grid_layer_defineProperties(t,i),GridLayer}();K.layerName="GridLayer",K.defaultProps=X;function hexagon_cell_layer_typeof(e){return(hexagon_cell_layer_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hexagon_cell_layer_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hexagon_cell_layer_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hexagon_cell_layer_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hexagon_cell_layer_get(e,t,n){return(hexagon_cell_layer_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var r=hexagon_cell_layer_superPropBase(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function hexagon_cell_layer_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=hexagon_cell_layer_getPrototypeOf(e)););return e}function hexagon_cell_layer_getPrototypeOf(e){return(hexagon_cell_layer_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hexagon_cell_layer_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hexagon_cell_layer_setPrototypeOf(e,t)}function hexagon_cell_layer_setPrototypeOf(e,t){return(hexagon_cell_layer_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var Z=a.t.fp64LowPart,Y=[255,0,255,255],J={hexagonVertices:null,radius:{type:"number",min:0,value:1e3},angle:{type:"number",value:0},coverage:{type:"number",min:0,max:1,value:1},elevationScale:{type:"number",min:0,value:1},extruded:!0,fp64:!1,getCentroid:{type:"accessor",value:function value(e){return e.centroid}},getColor:{type:"accessor",value:Y},getElevation:{type:"accessor",value:1e3},lightSettings:{}},Q=function(e){function HexagonCellLayer(){return hexagon_cell_layer_classCallCheck(this,HexagonCellLayer),e=this,!(t=hexagon_cell_layer_getPrototypeOf(HexagonCellLayer).apply(this,arguments))||"object"!==hexagon_cell_layer_typeof(t)&&"function"!=typeof t?hexagon_cell_layer_assertThisInitialized(e):t;var e,t}var t,n,i;return hexagon_cell_layer_inherits(HexagonCellLayer,r["d"]),t=HexagonCellLayer,(n=[{key:"getShaders",value:function getShaders(){return{vs:"\n#define SHADER_NAME hexagon-cell-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec3 normals;\n\nattribute vec2 instancePositions;\nattribute float instanceElevations;\nattribute vec2 instancePositions64xyLow;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\n\n// Custom uniforms\nuniform float opacity;\nuniform float radius;\nuniform float angle;\nuniform float extruded;\nuniform float coverage;\nuniform float elevationScale;\n\n// Result\nvarying vec4 vColor;\n\n// A magic number to scale elevation so that 1 unit approximate to 1 meter.\n#define ELEVATION_SCALE 0.8\n\nvoid main(void) {\n\n  // rotate primitive position and normal\n  mat2 rotationMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n\n  // calculate elevation, if 3d not enabled set to 0\n  // cylindar gemoetry height are between -0.5 to 0.5, transform it to between 0, 1\n  float elevation = 0.0;\n\n  if (extruded > 0.5) {\n    elevation = instanceElevations * (positions.z + 0.5) *\n      ELEVATION_SCALE * elevationScale;\n  }\n\n  // if ahpha == 0.0 or z < 0.0, do not render element\n  float noRender = float(instanceColors.a == 0.0 || instanceElevations < 0.0);\n  float dotRadius = project_scale(radius) * mix(coverage, 0.0, noRender);\n\n  // project center of hexagon\n  vec3 centroidPosition = vec3(instancePositions, elevation);\n  vec2 centroidPosition64xyLow = instancePositions64xyLow;\n  vec3 offset = vec3(rotationMatrix * positions.xy * dotRadius, 0.);\n\n  vec4 position_worldspace;\n  gl_Position = project_position_to_clipspace(centroidPosition, centroidPosition64xyLow, offset, position_worldspace);\n\n  // Light calculations\n  // Worldspace is the linear space after Mercator projection\n\n  vec3 normals_worldspace = vec3(rotationMatrix * normals.xy, normals.z);\n\n  float lightWeight = 1.0;\n\n  if (extruded > 0.5) {\n    lightWeight = lighting_getLightWeight(\n      position_worldspace.xyz, // the w component is always 1.0\n      normals_worldspace\n    );\n  }\n\n  vec3 lightWeightedColor = lightWeight * instanceColors.rgb;\n\n  // opacity-multiplied instance color\n  vColor = vec4(lightWeightedColor, opacity * instanceColors.a) / 255.0;\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n}\n",fs:"#define SHADER_NAME hexagon-cell-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n\n  // use highlight color if this fragment belongs to the selected object.\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n\n  // use picking color if rendering to picking FBO.\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n",modules:[this.use64bitProjection()?"project64":"project32","lighting","picking"]}}},{key:"initializeState",value:function initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:2,transition:!0,accessor:"getCentroid"},instanceElevations:{size:1,transition:!0,accessor:"getElevation"},instancePositions64xyLow:{size:2,accessor:"getCentroid",update:this.calculateInstancePositions64xyLow},instanceColors:{size:4,type:o.a.UNSIGNED_BYTE,transition:!0,accessor:"getColor",defaultValue:Y}})}},{key:"updateState",value:function updateState(e){var t=e.props,n=e.oldProps,r=e.changeFlags;if(hexagon_cell_layer_get(hexagon_cell_layer_getPrototypeOf(HexagonCellLayer.prototype),"updateState",this).call(this,{props:t,oldProps:n,changeFlags:r}),t.fp64!==n.fp64){var i=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(i)}),this.getAttributeManager().invalidateAll()}t.hexagonVertices===n.hexagonVertices&&t.radius===n.radius&&t.angle===n.angle||this.updateRadiusAngle()}},{key:"updateRadiusAngle",value:function updateRadiusAngle(){var e=this.props,t=e.angle,n=e.radius,i=this.props.hexagonVertices;if(Array.isArray(i)){i.length<6&&r.i.error("HexagonCellLayer: hexagonVertices needs to be an array of 6 points")();var o=this.props.hexagonVertices,a=o[0],s=o[3],l=this.context.viewport.getDistanceScales().pixelsPerMeter,u=this.projectFlat(a),c=this.projectFlat(s),p=u[0]-c[0],h=u[1]-c[1],f=Math.sqrt(p*p+h*h);t=Math.acos(p/f)*-Math.sign(h)+Math.PI/2,n=f/2/l[0]}this.setState({angle:t,radius:n})}},{key:"getCylinderGeometry",value:function getCylinderGeometry(e){return new a.d({radius:e,topRadius:e,bottomRadius:e,topCap:!0,bottomCap:!0,height:1,verticalAxis:"z",nradial:6,nvertical:1})}},{key:"_getModel",value:function _getModel(e){return new a.h(e,Object.assign({},this.getShaders(),{id:this.props.id,geometry:this.getCylinderGeometry(1),isInstanced:!0,shaderCache:this.context.shaderCache}))}},{key:"draw",value:function draw(e){var t=e.uniforms,n=this.props,r=n.elevationScale,i=n.extruded,o=n.coverage,a=this.state,s=a.radius,l=a.angle;this.state.model.render(Object.assign({},t,{radius:s,angle:l,extruded:i,coverage:o,elevationScale:r}))}},{key:"calculateInstancePositions64xyLow",value:function calculateInstancePositions64xyLow(e){var t=this.use64bitPositions();if(e.constant=!t,t){var n=this.props,r=n.data,i=n.getCentroid,o=e.value,a=0,s=!0,l=!1,u=void 0;try{for(var c,p=r[Symbol.iterator]();!(s=(c=p.next()).done);s=!0){var h=i(c.value);o[a++]=Z(h[0]),o[a++]=Z(h[1])}}catch(e){l=!0,u=e}finally{try{s||null==p.return||p.return()}finally{if(l)throw u}}}else e.value=new Float32Array(2)}}])&&hexagon_cell_layer_defineProperties(t.prototype,n),i&&hexagon_cell_layer_defineProperties(t,i),HexagonCellLayer}();Q.layerName="HexagonCellLayer",Q.defaultProps=J;var $=Math.PI/3,ee=[0,$,2*$,3*$,4*$,5*$];function pointX(e){return e[0]}function pointY(e){return e[1]}var te=function(){var e,t,n,r=0,i=0,o=1,a=1,s=pointX,l=pointY;function hexbin(e){var r,i={},o=[],a=e.length;for(r=0;r<a;++r)if(!isNaN(c=+s.call(null,u=e[r],r,e))&&!isNaN(p=+l.call(null,u,r,e))){var u,c,p,h=Math.round(p/=n),f=Math.round(c=c/t-(1&h)/2),d=p-h;if(3*Math.abs(d)>1){var g=c-f,m=f+(c<f?-1:1)/2,y=h+(p<h?-1:1),v=c-m,_=p-y;g*g+d*d>v*v+_*_&&(f=m+(1&h?1:-1)/2,h=y)}var b=f+"-"+h,x=i[b];x?x.push(u):(o.push(x=i[b]=[u]),x.x=(f+(1&h)/2)*t,x.y=h*n)}return o}function hexagon(e){var t=0,n=0;return ee.map(function(r){var i=Math.sin(r)*e,o=-Math.cos(r)*e,a=i-t,s=o-n;return t=i,n=o,[a,s]})}return hexbin.hexagon=function(t){return"m"+hexagon(null==t?e:+t).join("l")+"z"},hexbin.centers=function(){for(var s=[],l=Math.round(i/n),u=Math.round(r/t),c=l*n;c<a+e;c+=n,++l)for(var p=u*t+(1&l)*t/2;p<o+t/2;p+=t)s.push([p,c]);return s},hexbin.mesh=function(){var t=hexagon(e).slice(0,4).join("l");return hexbin.centers().map(function(e){return"M"+e+"m"+t}).join("")},hexbin.x=function(e){return arguments.length?(s=e,hexbin):s},hexbin.y=function(e){return arguments.length?(l=e,hexbin):l},hexbin.radius=function(r){return arguments.length?(t=2*(e=+r)*Math.sin($),n=1.5*e,hexbin):e},hexbin.size=function(e){return arguments.length?(r=i=0,o=+e[0],a=+e[1],hexbin):[o-r,a-i]},hexbin.extent=function(e){return arguments.length?(r=+e[0][0],i=+e[0][1],o=+e[1][0],a=+e[1][1],hexbin):[[r,i],[o,a]]},hexbin.radius(1)};function getRadiusInPixel(e,t){return e*t.getDistanceScales().pixelsPerMeter[0]}function hexagon_layer_typeof(e){return(hexagon_layer_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hexagon_layer_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hexagon_layer_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hexagon_layer_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hexagon_layer_getPrototypeOf(e){return(hexagon_layer_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hexagon_layer_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hexagon_layer_setPrototypeOf(e,t)}function hexagon_layer_setPrototypeOf(e,t){return(hexagon_layer_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var ne=r.h.BinSorter,re=r.h.getQuantizeScale,ie=r.h.getLinearScale;function hexagon_layer_nop(){}var oe={colorDomain:null,colorRange:r.h.defaultColorRange,getColorValue:{type:"accessor",value:function value(e){return e.length}},lowerPercentile:{type:"number",value:0,min:0,max:100},upperPercentile:{type:"number",value:100,min:0,max:100},onSetColorDomain:hexagon_layer_nop,elevationDomain:null,elevationRange:[0,1e3],getElevationValue:{type:"accessor",value:function value(e){return e.length}},elevationLowerPercentile:{type:"number",value:0,min:0,max:100},elevationUpperPercentile:{type:"number",value:100,min:0,max:100},elevationScale:{type:"number",min:0,value:1},onSetElevationDomain:hexagon_layer_nop,radius:{type:"number",value:1e3,min:1},coverage:{type:"number",min:0,max:1,value:1},extruded:!1,hexagonAggregator:function pointToHexbin(e,t){var n=e.data,r=e.radius,i=e.getPosition,o=getRadiusInPixel(r,t),a=[],s=!0,l=!1,u=void 0;try{for(var c,p=n[Symbol.iterator]();!(s=(c=p.next()).done);s=!0){var h=c.value;a.push(Object.assign({screenCoord:t.projectFlat(i(h))},h))}}catch(e){l=!0,u=e}finally{try{s||null==p.return||p.return()}finally{if(l)throw u}}return{hexagons:te().radius(o).x(function(e){return e.screenCoord[0]}).y(function(e){return e.screenCoord[1]})(a).map(function(e,n){return{centroid:t.unprojectFlat([e.x,e.y]),points:e,index:n}})}},getPosition:{type:"accessor",value:function value(e){return e.position}},fp64:!1,lightSettings:{}},ae=function(e){function HexagonLayer(){return hexagon_layer_classCallCheck(this,HexagonLayer),e=this,!(t=hexagon_layer_getPrototypeOf(HexagonLayer).apply(this,arguments))||"object"!==hexagon_layer_typeof(t)&&"function"!=typeof t?hexagon_layer_assertThisInitialized(e):t;var e,t}var t,n,i;return hexagon_layer_inherits(HexagonLayer,r["b"]),t=HexagonLayer,(n=[{key:"initializeState",value:function initializeState(){this.state={hexagons:[],hexagonVertices:null,sortedColorBins:null,sortedElevationBins:null,colorValueDomain:null,elevationValueDomain:null,colorScaleFunc:hexagon_layer_nop,elevationScaleFunc:hexagon_layer_nop,dimensionUpdaters:this.getDimensionUpdaters()}}},{key:"updateState",value:function updateState(e){var t=this,n=e.oldProps,r=e.props,i=e.changeFlags,o=this.getDimensionChanges(n,r);i.dataChanged||this.needsReProjectPoints(n,r)?this.getHexagons():o&&o.forEach(function(e){return"function"==typeof e&&e.apply(t)})}},{key:"needsReProjectPoints",value:function needsReProjectPoints(e,t){return e.radius!==t.radius||e.hexagonAggregator!==t.hexagonAggregator}},{key:"getDimensionUpdaters",value:function getDimensionUpdaters(){return{getColor:[{id:"value",triggers:["getColorValue"],updater:this.getSortedColorBins},{id:"domain",triggers:["lowerPercentile","upperPercentile"],updater:this.getColorValueDomain},{id:"scaleFunc",triggers:["colorDomain","colorRange"],updater:this.getColorScale}],getElevation:[{id:"value",triggers:["getElevationValue"],updater:this.getSortedElevationBins},{id:"domain",triggers:["elevationLowerPercentile","elevationUpperPercentile"],updater:this.getElevationValueDomain},{id:"scaleFunc",triggers:["elevationDomain","elevationRange"],updater:this.getElevationScale}]}}},{key:"getDimensionChanges",value:function getDimensionChanges(e,t){var n=this.state.dimensionUpdaters,r=[];for(var i in n){var o=n[i].find(function(n){return n.triggers.some(function(n){return e[n]!==t[n]})});o&&r.push(o.updater)}return r.length?r:null}},{key:"getHexagons",value:function getHexagons(){var e=this.props.hexagonAggregator,t=this.context.viewport,n=e(this.props,t),r=n.hexagons,i=n.hexagonVertices;this.setState({hexagons:r,hexagonVertices:i}),this.getSortedBins()}},{key:"getPickingInfo",value:function getPickingInfo(e){var t=e.info,n=this.state,r=n.sortedColorBins,i=n.sortedElevationBins,o=null;if(t.picked&&t.index>-1){var a=this.state.hexagons[t.index],s=r.binMap[a.index]&&r.binMap[a.index].value,l=i.binMap[a.index]&&i.binMap[a.index].value;o=Object.assign({colorValue:s,elevationValue:l},a)}return Object.assign(t,{picked:Boolean(o),object:o})}},{key:"getUpdateTriggers",value:function getUpdateTriggers(){var e=this,t=this.state.dimensionUpdaters,n={},r=function _loop(r){n[r]={};var i=!0,o=!1,a=void 0;try{for(var s,l=t[r][Symbol.iterator]();!(i=(s=l.next()).done);i=!0){s.value.triggers.forEach(function(t){n[r][t]=e.props[t]})}}catch(e){o=!0,a=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw a}}};for(var i in t)r(i);return n}},{key:"getValueDomain",value:function getValueDomain(){this.getColorValueDomain(),this.getElevationValueDomain()}},{key:"getSortedBins",value:function getSortedBins(){this.getSortedColorBins(),this.getSortedElevationBins()}},{key:"getSortedColorBins",value:function getSortedColorBins(){var e=this.props.getColorValue,t=new ne(this.state.hexagons||[],e);this.setState({sortedColorBins:t}),this.getColorValueDomain()}},{key:"getSortedElevationBins",value:function getSortedElevationBins(){var e=this.props.getElevationValue,t=new ne(this.state.hexagons||[],e);this.setState({sortedElevationBins:t}),this.getElevationValueDomain()}},{key:"getColorValueDomain",value:function getColorValueDomain(){var e=this.props,t=e.lowerPercentile,n=e.upperPercentile,i=e.onSetColorDomain;t>n&&r.i.warn("HexagonLayer: lowerPercentile is bigger than upperPercentile")(),this.state.colorValueDomain=this.state.sortedColorBins.getValueRange([t,n]),"function"==typeof i&&i(this.state.colorValueDomain),this.getColorScale()}},{key:"getElevationValueDomain",value:function getElevationValueDomain(){var e=this.props,t=e.elevationLowerPercentile,n=e.elevationUpperPercentile,r=e.onSetElevationDomain;this.state.elevationValueDomain=this.state.sortedElevationBins.getValueRange([t,n]),"function"==typeof r&&r(this.state.elevationValueDomain),this.getElevationScale()}},{key:"getColorScale",value:function getColorScale(){var e=this.props.colorRange,t=this.props.colorDomain||this.state.colorValueDomain;this.state.colorScaleFunc=re(t,e)}},{key:"getElevationScale",value:function getElevationScale(){var e=this.props.elevationRange,t=this.props.elevationDomain||this.state.elevationValueDomain;this.state.elevationScaleFunc=ie(t,e)}},{key:"_onGetSublayerColor",value:function _onGetSublayerColor(e){var t=this.state,n=t.sortedColorBins,r=t.colorScaleFunc,i=t.colorValueDomain,o=n.binMap[e.index]&&n.binMap[e.index].value,a=this.props.colorDomain||i,s=o>=a[0]&&o<=a[a.length-1]?r(o):[0,0,0,0];return s[3]=Number.isFinite(s[3])?s[3]:255,s}},{key:"_onGetSublayerElevation",value:function _onGetSublayerElevation(e){var t=this.state,n=t.sortedElevationBins,r=t.elevationScaleFunc,i=t.elevationValueDomain,o=n.binMap[e.index]&&n.binMap[e.index].value,a=this.props.elevationDomain||i;return o>=a[0]&&o<=a[a.length-1]?r(o):-1}},{key:"renderLayers",value:function renderLayers(){var e=this.props,t=e.radius,n=e.elevationScale,r=e.extruded,i=e.coverage,o=e.lightSettings,a=e.fp64,s=e.transitions;return new(this.getSubLayerClass("hexagon-cell",Q))({fp64:a,radius:t,elevationScale:n,angle:Math.PI/2,extruded:r,coverage:i,lightSettings:o,getColor:this._onGetSublayerColor.bind(this),getElevation:this._onGetSublayerElevation.bind(this),transitions:s&&{getColor:s.getColorValue,getElevation:s.getElevationValue}},this.getSubLayerProps({id:"hexagon-cell",updateTriggers:this.getUpdateTriggers()}),{data:this.state.hexagons,hexagonVertices:this.state.hexagonVertices})}}])&&hexagon_layer_defineProperties(t.prototype,n),i&&hexagon_layer_defineProperties(t,i),HexagonLayer}();function path_tesselator_typeof(e){return(path_tesselator_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function path_tesselator_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function path_tesselator_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function path_tesselator_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function path_tesselator_getPrototypeOf(e){return(path_tesselator_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function path_tesselator_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&path_tesselator_setPrototypeOf(e,t)}function path_tesselator_setPrototypeOf(e,t){return(path_tesselator_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}ae.layerName="HexagonLayer",ae.defaultProps=oe;var se=r.h.Tesselator,le=a.t.fp64LowPart,ue=function(e){function PathTesselator(e){var t,n,r=e.data,i=e.getGeometry,o=e.positionFormat,a=e.fp64;return path_tesselator_classCallCheck(this,PathTesselator),t=this,!(n=path_tesselator_getPrototypeOf(PathTesselator).call(this,{data:r,getGeometry:i,fp64:a,positionFormat:o,attributes:{startPositions:{size:3},endPositions:{size:3},leftDeltas:{size:3},rightDeltas:{size:3},startEndPositions64XyLow:{size:4,fp64Only:!0}}}))||"object"!==path_tesselator_typeof(n)&&"function"!=typeof n?path_tesselator_assertThisInitialized(t):n}var t,n,r;return path_tesselator_inherits(PathTesselator,se),t=PathTesselator,(n=[{key:"get",value:function get(e,t,n){if(this.attributes[e])return this.attributes[e];switch(e){case"strokeWidths":return this._updateAttribute({target:t,size:1,getValue:function getValue(e){return[n(e)]}});case"dashArrays":return this._updateAttribute({target:t,size:2,getValue:n});case"colors":return this._updateAttribute({target:t,size:4,getValue:function getValue(e){var t=n(e);return isNaN(t[3])&&(t[3]=255),t}});case"pickingColors":return this._updateAttribute({target:t,size:3,getValue:function getValue(e,t){return n(t)}});default:return null}}},{key:"getGeometrySize",value:function getGeometrySize(e){return Math.max(0,this.getPathLength(e)-1)}},{key:"updateGeometryAttributes",value:function updateGeometryAttributes(e,t){var n=this.attributes,r=n.startPositions,i=n.endPositions,o=n.leftDeltas,a=n.rightDeltas,s=n.startEndPositions64XyLow,l=this.fp64,u=t.geometrySize+1;if(!(u<2))for(var c,p=this.isClosed(e),h=this.getPointOnPath(e,0),f=this.getPointOnPath(e,1),d=p?this.getPointOnPath(e,u-2):h,g=t.vertexStart,m=1;m<u;g++,m++)c=m+1<u?this.getPointOnPath(e,m+1):p?this.getPointOnPath(e,1):f,r[3*g]=h[0],r[3*g+1]=h[1],r[3*g+2]=h[2]||0,i[3*g]=f[0],i[3*g+1]=f[1],i[3*g+2]=f[2]||0,o[3*g]=h[0]-d[0],o[3*g+1]=h[1]-d[1],o[3*g+2]=h[2]-d[2]||0,a[3*g]=c[0]-f[0],a[3*g+1]=c[1]-f[1],a[3*g+2]=c[2]-f[2]||0,l&&(s[4*g]=le(h[0]),s[4*g+1]=le(h[1]),s[4*g+2]=le(f[0]),s[4*g+3]=le(f[1])),d=h,h=f,f=c}},{key:"getPathLength",value:function getPathLength(e){return Number.isFinite(e[0])?e.length/this.positionSize:e.length}},{key:"getPointOnPath",value:function getPointOnPath(e,t){if(Number.isFinite(e[0])){var n=this.positionSize;return[e[t*n],e[t*n+1],3===n?e[t*n+2]:0]}return e[t]}},{key:"isClosed",value:function isClosed(e){var t=this.getPathLength(e),n=this.getPointOnPath(e,0),r=this.getPointOnPath(e,t-1);return n[0]===r[0]&&n[1]===r[1]&&n[2]===r[2]}}])&&path_tesselator_defineProperties(t.prototype,n),r&&path_tesselator_defineProperties(t,r),PathTesselator}(),ce="#define SHADER_NAME path-layer-fragment-shader\n\nprecision highp float;\n\nuniform float jointType;\nuniform float miterLimit;\nuniform float alignMode;\n\nvarying vec4 vColor;\nvarying vec2 vCornerOffset;\nvarying float vMiterLength;\nvarying vec2 vDashArray;\n/*\n * vPathPosition represents the relative coordinates of the current fragment on the path segment.\n * vPathPosition.x - position along the width of the path, between [-1, 1]. 0 is the center line.\n * vPathPosition.y - position along the length of the path, between [0, L / width].\n */\nvarying vec2 vPathPosition;\nvarying float vPathLength;\n\n// mod doesn't work correctly for negative numbers\nfloat mod2(float a, float b) {\n  return a - floor(a / b) * b;\n}\n\nfloat round(float x) {\n  return floor(x + 0.5);\n}\n\n// if given position is in the gap part of the dashed line\n// dashArray.x: solid stroke length, relative to width\n// dashArray.y: gap length, relative to width\n// alignMode:\n// 0 - no adjustment\n// o----     ----     ----     ---- o----     -o----     ----     o\n// 1 - stretch to fit, draw half dash at each end for nicer joints\n// o--    ----    ----    ----    --o--      --o--     ----     --o\nbool dash_isFragInGap() {\n  float solidLength = vDashArray.x;\n  float gapLength = vDashArray.y;\n\n  float unitLength = solidLength + gapLength;\n\n  if (unitLength == 0.0) {\n    return false;\n  }\n\n  unitLength = mix(\n    unitLength,\n    vPathLength / round(vPathLength / unitLength),\n    alignMode\n  );\n\n  float offset = alignMode * solidLength / 2.0;\n\n  return gapLength > 0.0 &&\n    vPathPosition.y >= 0.0 &&\n    vPathPosition.y <= vPathLength &&\n    mod2(vPathPosition.y + offset, unitLength) > solidLength;\n}\n\nvoid main(void) {\n  // if joint is rounded, test distance from the corner\n  if (jointType > 0.0 && vMiterLength > 0.0 && length(vCornerOffset) > 1.0) {\n    // Enable to debug joints\n    // gl_FragColor = vec4(0., 1., 0., 1.);\n    // return;\n    discard;\n  }\n  if (jointType == 0.0 && vMiterLength > miterLimit) {\n    // Enable to debug joints\n    // gl_FragColor = vec4(0., 0., 1., 1.);\n    // return;\n    discard;\n  }\n  if (vColor.a == 0.0 || dash_isFragInGap()) {\n    // Enable to debug joints\n    // gl_FragColor = vec4(0., 1., 1., 1.);\n    // return;\n    discard;\n  }\n  gl_FragColor = vColor;\n\n  // use highlight color if this fragment belongs to the selected object.\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n\n  // use picking color if rendering to picking FBO.\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n";function path_layer_typeof(e){return(path_layer_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function path_layer_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function path_layer_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function path_layer_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function path_layer_get(e,t,n){return(path_layer_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var r=path_layer_superPropBase(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function path_layer_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=path_layer_getPrototypeOf(e)););return e}function path_layer_getPrototypeOf(e){return(path_layer_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function path_layer_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&path_layer_setPrototypeOf(e,t)}function path_layer_setPrototypeOf(e,t){return(path_layer_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var pe=[0,0,0,255],he={widthScale:{type:"number",min:0,value:1},widthMinPixels:{type:"number",min:0,value:0},widthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},rounded:!1,miterLimit:{type:"number",min:0,value:4},fp64:!1,dashJustified:!1,getPath:{type:"accessor",value:function value(e){return e.path}},getColor:{type:"accessor",value:pe},getWidth:{type:"accessor",value:1},getDashArray:{type:"accessor",value:[0,0]}},fe={enter:function enter(e,t){return t.length?t.subarray(t.length-e.length):e}},de=function(e){function PathLayer(){return path_layer_classCallCheck(this,PathLayer),e=this,!(t=path_layer_getPrototypeOf(PathLayer).apply(this,arguments))||"object"!==path_layer_typeof(t)&&"function"!=typeof t?path_layer_assertThisInitialized(e):t;var e,t}var t,n,i;return path_layer_inherits(PathLayer,r["d"]),t=PathLayer,(n=[{key:"getShaders",value:function getShaders(){return this.use64bitProjection()?{vs:"\n#define SHADER_NAME path-layer-vertex-shader\n\nattribute vec3 positions;\n\nattribute vec3 instanceStartPositions;\nattribute vec3 instanceEndPositions;\nattribute vec4 instanceStartEndPositions64xyLow;\nattribute vec3 instanceLeftDeltas;\nattribute vec3 instanceRightDeltas;\nattribute float instanceStrokeWidths;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute vec2 instanceDashArrays;\n\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\nuniform float jointType;\nuniform float miterLimit;\n\nuniform float opacity;\n\nvarying vec4 vColor;\nvarying vec2 vCornerOffset;\nvarying float vMiterLength;\nvarying vec2 vDashArray;\nvarying vec2 vPathPosition;\nvarying float vPathLength;\n\nconst float EPSILON = 0.001;\n\nfloat flipIfTrue(bool flag) {\n  return -(float(flag) * 2. - 1.);\n}\n\nvec3 lineJoin(vec2 prevPoint64[2], vec2 currPoint64[2], vec2 nextPoint64[2]) {\n\n  float width = clamp(project_scale(instanceStrokeWidths * widthScale),\n    widthMinPixels, widthMaxPixels) / 2.0;\n\n  vec2 deltaA64[2];\n  vec2 deltaB64[2];\n\n  vec2_sub_fp64(currPoint64, prevPoint64, deltaA64);\n  vec2_sub_fp64(nextPoint64, currPoint64, deltaB64);\n\n  vec2 lengthA64 = vec2_length_fp64(deltaA64);\n  vec2 lengthB64 = vec2_length_fp64(deltaB64);\n\n  vec2 deltaA = vec2(deltaA64[0].x, deltaA64[1].x);\n  vec2 deltaB = vec2(deltaB64[0].x, deltaB64[1].x);\n\n  float lenA = lengthA64.x;\n  float lenB = lengthB64.x;\n\n  vec2 offsetVec;\n  float offsetScale;\n  float offsetDirection;\n\n  // when two points are closer than PIXEL_EPSILON in pixels,\n  // assume they are the same point to avoid precision issue\n  lenA = lenA / width > EPSILON ? lenA : 0.0;\n  lenB = lenB / width > EPSILON ? lenB : 0.0;\n  vec2 dirA = lenA > 0. ? deltaA / lenA : vec2(0.0, 0.0);\n  vec2 dirB = lenB > 0. ? deltaB / lenB : vec2(0.0, 0.0);\n\n  vec2 perpA = vec2(-dirA.y, dirA.x);\n  vec2 perpB = vec2(-dirB.y, dirB.x);\n\n  // tangent of the corner\n  vec2 tangent = vec2(dirA + dirB);\n  tangent = length(tangent) > 0. ? normalize(tangent) : perpA;\n  // direction of the corner\n  vec2 miterVec = vec2(-tangent.y, tangent.x);\n  // width offset from current position\n  vec2 perp = mix(perpB, perpA, positions.x);\n  float L = mix(lenB, lenA, positions.x);\n\n  // cap super sharp angles\n  float sinHalfA = abs(dot(miterVec, perp));\n  float cosHalfA = abs(dot(dirA, miterVec));\n  bool turnsRight = dirA.x * dirB.y > dirA.y * dirB.x;\n\n  // relative position to the corner:\n  // -1: inside (smaller side of the angle)\n  // 0: center\n  // 1: outside (bigger side of the angle)\n  float cornerPosition = mix(\n    flipIfTrue(turnsRight == (positions.y > 0.0)),\n    0.0,\n    positions.z\n  );\n\n  offsetScale = 1.0 / max(sinHalfA, EPSILON);\n\n  // do not bevel if line segment is too short\n  cornerPosition *= float(cornerPosition <= 0.0 || sinHalfA < min(lenA, lenB) / width * cosHalfA);\n  // trim if inside corner extends further than the line segment\n  offsetScale = mix(\n    offsetScale,\n    min(offsetScale, L / width / max(cosHalfA, EPSILON)),\n    float(cornerPosition < 0.0)\n  );\n\n  vMiterLength = mix(\n    offsetScale * cornerPosition,\n    mix(offsetScale, 0.0, cornerPosition),\n    step(0.0, cornerPosition)\n  ) - sinHalfA * jointType;\n  offsetDirection = mix(\n    positions.y,\n    mix(\n      flipIfTrue(turnsRight),\n      positions.y * flipIfTrue(turnsRight == (positions.x == 1.)),\n      cornerPosition\n    ),\n    step(0.0, cornerPosition)\n  );\n  offsetVec = mix(miterVec, -tangent, step(0.5, cornerPosition));\n  offsetScale = mix(offsetScale, 1.0 / max(cosHalfA, 0.001), step(0.5, cornerPosition));\n\n  // special treatment for start cap and end cap\n  // using a small number as the limit for determining if the lenA or lenB is 0\n  float isStartCap = step(lenA, 1.0e-5);\n  float isEndCap = step(lenB, 1.0e-5);\n  float isCap = max(isStartCap, isEndCap);\n\n  // 0: center, 1: side\n  cornerPosition = isCap * (1.0 - positions.z);\n\n  // start of path: use next - curr\n  offsetVec = mix(offsetVec, mix(dirB, perpB, cornerPosition), isStartCap);\n  // end of path: use curr - prev\n  offsetVec = mix(offsetVec, mix(dirA, perpA, cornerPosition), isEndCap);\n\n  // extend out a triangle to envelope the round cap\n  offsetScale = mix(\n    offsetScale,\n    mix(4.0 * jointType, 1.0, cornerPosition),\n    isCap\n  );\n  vMiterLength = mix(vMiterLength, 1.0 - cornerPosition, isCap);\n\n  offsetDirection = mix(\n    offsetDirection,\n    mix(flipIfTrue(isStartCap > 0.), positions.y, cornerPosition),\n    isCap\n  );\n\n  vCornerOffset = offsetVec * offsetDirection * offsetScale;\n\n  // Generate variables for dash calculation\n  vDashArray = instanceDashArrays;\n  vPathLength = L / width;\n  float isEnd = positions.x;\n  vec2 offsetFromStartOfPath = mix(vCornerOffset, vCornerOffset + deltaA / width, isEnd);\n  vec2 dir = mix(dirB, dirA, isEnd);\n  vPathPosition = vec2(\n    positions.y + positions.z * offsetDirection,\n    dot(offsetFromStartOfPath, dir)\n  );\n\n  return vec3(vCornerOffset * width, 0.0);\n}\n\nvoid main() {\n  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity) / 255.;\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n\n  float isEnd = positions.x;\n\n  // Calculate current position 64bit\n\n  vec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);\n  vec2 currPosition64xyLow = mix(instanceStartEndPositions64xyLow.xy, instanceStartEndPositions64xyLow.zw, isEnd);\n  vec2 projected_curr_position[2];\n  project_position_fp64(currPosition.xy, currPosition64xyLow, projected_curr_position);\n  float projected_curr_position_z = project_scale(currPosition.z);\n\n  // Calculate previous position\n\n  vec3 prevPosition = mix(-instanceLeftDeltas, vec3(0.0), isEnd) + instanceStartPositions;\n\n  // Calculate prev position 64bit\n\n  vec2 projected_prev_position[2];\n  project_position_fp64(prevPosition.xy, instanceStartEndPositions64xyLow.xy, projected_prev_position);\n\n  // Calculate next positions\n  vec3 nextPosition = mix(vec3(0.0), instanceRightDeltas, isEnd) + instanceEndPositions;\n\n  // Calculate next position 64bit\n\n  vec2 projected_next_position[2];\n  project_position_fp64(nextPosition.xy, instanceStartEndPositions64xyLow.zw, projected_next_position);\n\n  vec3 pos = lineJoin(projected_prev_position, projected_curr_position, projected_next_position);\n  vec2 vertex_pos_modelspace[4];\n\n  vertex_pos_modelspace[0] = sum_fp64(vec2(pos.x, 0.0), projected_curr_position[0]);\n  vertex_pos_modelspace[1] = sum_fp64(vec2(pos.y, 0.0), projected_curr_position[1]);\n  vertex_pos_modelspace[2] = vec2(pos.z + projected_curr_position_z, 0.0);\n  vertex_pos_modelspace[3] = vec2(1.0, 0.0);\n\n  gl_Position = project_to_clipspace_fp64(vertex_pos_modelspace);\n}\n",fs:ce,modules:["project64","picking"]}:{vs:"#define SHADER_NAME path-layer-vertex-shader-64\n\nattribute vec3 positions;\n\nattribute vec3 instanceStartPositions;\nattribute vec3 instanceEndPositions;\nattribute vec4 instanceStartEndPositions64xyLow;\nattribute vec3 instanceLeftDeltas;\nattribute vec3 instanceRightDeltas;\nattribute float instanceStrokeWidths;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute vec2 instanceDashArrays;\n\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\nuniform float jointType;\nuniform float miterLimit;\n\nuniform float opacity;\n\nvarying vec4 vColor;\nvarying vec2 vCornerOffset;\nvarying float vMiterLength;\nvarying vec2 vDashArray;\nvarying vec2 vPathPosition;\nvarying float vPathLength;\n\nconst float EPSILON = 0.001;\n\nfloat flipIfTrue(bool flag) {\n  return -(float(flag) * 2. - 1.);\n}\n\n// calculate line join positions\nvec3 lineJoin(\n  vec3 prevPoint, vec3 currPoint, vec3 nextPoint,\n  float relativePosition, bool isEnd, bool isJoint,\n  float width\n) {\n  vec2 deltaA = currPoint.xy - prevPoint.xy;\n  vec2 deltaB = nextPoint.xy - currPoint.xy;\n\n  float lenA = length(deltaA);\n  float lenB = length(deltaB);\n\n  // when two points are closer than PIXEL_EPSILON in pixels,\n  // assume they are the same point to avoid precision issue\n  lenA = lenA / width > EPSILON ? lenA : 0.0;\n  lenB = lenB / width > EPSILON ? lenB : 0.0;\n\n  vec2 dirA = lenA > 0. ? normalize(deltaA) : vec2(0.0, 0.0);\n  vec2 dirB = lenB > 0. ? normalize(deltaB) : vec2(0.0, 0.0);\n\n  vec2 perpA = vec2(-dirA.y, dirA.x);\n  vec2 perpB = vec2(-dirB.y, dirB.x);\n\n  // tangent of the corner\n  vec2 tangent = vec2(dirA + dirB);\n  tangent = length(tangent) > 0. ? normalize(tangent) : perpA;\n  // direction of the corner\n  vec2 miterVec = vec2(-tangent.y, tangent.x);\n  // width offset from current position\n  vec2 perp = isEnd ? perpA : perpB;\n  float L = isEnd ? lenA : lenB;\n\n  // cap super sharp angles\n  float sinHalfA = abs(dot(miterVec, perp));\n  float cosHalfA = abs(dot(dirA, miterVec));\n\n  bool turnsRight = dirA.x * dirB.y > dirA.y * dirB.x;\n\n  float offsetScale = 1.0 / max(sinHalfA, EPSILON);\n\n  float cornerPosition = isJoint ?\n    0.0 :\n    flipIfTrue(turnsRight == (relativePosition > 0.0));\n\n  // do not bevel if line segment is too short\n  cornerPosition *=\n    float(cornerPosition <= 0.0 || sinHalfA < min(lenA, lenB) / width * cosHalfA);\n\n  // trim if inside corner extends further than the line segment\n  if (cornerPosition < 0.0) {\n    offsetScale = min(offsetScale, L / width / max(cosHalfA, EPSILON));\n  }\n\n  vMiterLength = cornerPosition >= 0.0 ?\n    mix(offsetScale, 0.0, cornerPosition) :\n    offsetScale * cornerPosition;\n  vMiterLength -= sinHalfA * jointType;\n\n  float offsetDirection = mix(\n    positions.y,\n    mix(\n      flipIfTrue(turnsRight),\n      positions.y * flipIfTrue(turnsRight == (positions.x == 1.)),\n      cornerPosition\n    ),\n    step(0.0, cornerPosition)\n  );\n\n  vec2 offsetVec = mix(miterVec, -tangent, step(0.5, cornerPosition));\n  offsetScale = mix(offsetScale, 1.0 / max(cosHalfA, 0.001), step(0.5, cornerPosition));\n\n  // special treatment for start cap and end cap\n  // TODO - This has an issue. len is always positive because it is length.\n  // Step returns zero if -lenA<0, so practically this is a comparison of\n  // lenA with zero, with lots of problems because of the -lenA. Can we use EPSILON?\n  bool isStartCap = step(0.0, -lenA) > 0.5;\n  bool isEndCap = step(0.0, -lenB) > 0.5;\n  bool isCap = isStartCap || isEndCap;\n\n  // 0: center, 1: side\n  cornerPosition = isCap ? (1.0 - positions.z) : 0.;\n\n  // start of path: use next - curr\n  if (isStartCap) {\n    offsetVec = mix(dirB, perpB, cornerPosition);\n  }\n\n  // end of path: use curr - prev\n  if (isEndCap) {\n    offsetVec = mix(dirA, perpA, cornerPosition);\n  }\n\n  // extend out a triangle to envelope the round cap\n  if (isCap) {\n    offsetScale = mix(4.0 * jointType, 1.0, cornerPosition);\n    vMiterLength = 1.0 - cornerPosition;\n    offsetDirection = mix(flipIfTrue(isStartCap), positions.y, cornerPosition);\n  }\n\n  vCornerOffset = offsetVec * offsetDirection * offsetScale;\n\n  // Generate variables for dash calculation\n  vDashArray = instanceDashArrays;\n  vPathLength = L / width;\n  // vec2 offsetFromStartOfPath = isEnd ? vCornerOffset + deltaA / width : vCornerOffset;\n  vec2 offsetFromStartOfPath = vCornerOffset;\n  if (isEnd) {\n    offsetFromStartOfPath += deltaA / width;\n  }\n  vec2 dir = isEnd ? dirA : dirB;\n  vPathPosition = vec2(\n    positions.y + positions.z * offsetDirection,\n    dot(offsetFromStartOfPath, dir)\n  );\n\n  return currPoint + vec3(vCornerOffset * width, 0.0);\n}\n\n// calculate line join positions\n// extract params from attributes and uniforms\nvec3 lineJoin(vec3 prevPoint, vec3 currPoint, vec3 nextPoint) {\n\n  // relative position to the corner:\n  // -1: inside (smaller side of the angle)\n  // 0: center\n  // 1: outside (bigger side of the angle)\n\n  float relativePosition = positions.y;\n  bool isEnd = positions.x > EPSILON;\n  bool isJoint = positions.z > EPSILON;\n\n  float width = clamp(project_scale(instanceStrokeWidths * widthScale),\n    widthMinPixels, widthMaxPixels) / 2.0;\n\n  return lineJoin(\n    prevPoint, currPoint, nextPoint,\n    relativePosition, isEnd, isJoint,\n    width\n  );\n}\n\nvoid main() {\n  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity) / 255.;\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n\n  float isEnd = positions.x;\n\n  vec3 prevPosition = instanceStartPositions;\n  vec2 prevPosition64xyLow = instanceStartEndPositions64xyLow.xy;\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_AUTO_OFFSET) {\n    // In auto offset mode, add delta to low part of the positions for better precision\n    prevPosition64xyLow += mix(-instanceLeftDeltas, vec3(0.0), isEnd).xy;\n  } else {\n    prevPosition += mix(-instanceLeftDeltas, vec3(0.0), isEnd);\n  }\n  prevPosition = project_position(prevPosition, prevPosition64xyLow);\n\n  vec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);\n  vec2 currPosition64xyLow = mix(instanceStartEndPositions64xyLow.xy, instanceStartEndPositions64xyLow.zw, isEnd);\n  currPosition = project_position(currPosition, currPosition64xyLow);\n\n  vec3 nextPosition = instanceEndPositions;\n  vec2 nextPosition64xyLow = instanceStartEndPositions64xyLow.zw;\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_AUTO_OFFSET) {\n    // In auto offset mode, add delta to low part of the positions for better precision\n    nextPosition64xyLow += mix(vec3(0.0), instanceRightDeltas, isEnd).xy;\n  } else {\n    nextPosition += mix(vec3(0.0), instanceRightDeltas, isEnd);\n  }\n  nextPosition = project_position(nextPosition, nextPosition64xyLow);\n\n  vec3 pos = lineJoin(prevPosition, currPosition, nextPosition);\n\n  gl_Position = project_to_clipspace(vec4(pos, 1.0));\n}\n",fs:ce,modules:["picking"]}}},{key:"initializeState",value:function initializeState(){this.getAttributeManager().addInstanced({instanceStartPositions:{size:3,transition:fe,accessor:"getPath",update:this.calculateStartPositions,noAlloc:!0},instanceEndPositions:{size:3,transition:fe,accessor:"getPath",update:this.calculateEndPositions,noAlloc:!0},instanceStartEndPositions64xyLow:{size:4,update:this.calculateInstanceStartEndPositions64xyLow,noAlloc:!0},instanceLeftDeltas:{size:3,update:this.calculateLeftDeltas,noAlloc:!0},instanceRightDeltas:{size:3,update:this.calculateRightDeltas,noAlloc:!0},instanceStrokeWidths:{size:1,accessor:"getWidth",transition:fe,update:this.calculateStrokeWidths,defaultValue:1},instanceDashArrays:{size:2,accessor:"getDashArray",update:this.calculateDashArrays},instanceColors:{size:4,type:o.a.UNSIGNED_BYTE,accessor:"getColor",transition:fe,update:this.calculateColors,defaultValue:pe},instancePickingColors:{size:3,type:o.a.UNSIGNED_BYTE,update:this.calculatePickingColors}}),this.setState({pathTesselator:new ue({})})}},{key:"updateState",value:function updateState(e){var t=e.oldProps,n=e.props,r=e.changeFlags;path_layer_get(path_layer_getPrototypeOf(PathLayer.prototype),"updateState",this).call(this,{props:n,oldProps:t,changeFlags:r});var i=this.getAttributeManager();if((r.dataChanged||n.fp64!==t.fp64||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getPath))&&(this.state.pathTesselator.updateGeometry({data:n.data,getGeometry:n.getPath,positionFormat:n.positionFormat,fp64:this.use64bitPositions()}),this.setState({numInstances:this.state.pathTesselator.instanceCount}),i.invalidateAll()),n.fp64!==t.fp64){var o=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(o)}),i.invalidateAll()}}},{key:"draw",value:function draw(e){var t=e.uniforms,n=this.props,r=n.rounded,i=n.miterLimit,o=n.widthScale,a=n.widthMinPixels,s=n.widthMaxPixels,l=n.dashJustified;this.state.model.render(Object.assign({},t,{jointType:Number(r),alignMode:Number(l),widthScale:o,miterLimit:i,widthMinPixels:a,widthMaxPixels:s}))}},{key:"_getModel",value:function _getModel(e){return new a.h(e,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new a.g({drawMode:o.a.TRIANGLES,attributes:{indices:new Uint16Array([0,2,1,1,2,4,1,4,3,3,4,5]),positions:new Float32Array([0,0,1,0,-1,0,0,1,0,1,-1,0,1,1,0,1,0,1])}}),isInstanced:!0,shaderCache:this.context.shaderCache}))}},{key:"calculateStartPositions",value:function calculateStartPositions(e){var t=this.state.pathTesselator;e.bufferLayout=t.bufferLayout,e.value=t.get("startPositions")}},{key:"calculateEndPositions",value:function calculateEndPositions(e){var t=this.state.pathTesselator;e.bufferLayout=t.bufferLayout,e.value=t.get("endPositions")}},{key:"calculateInstanceStartEndPositions64xyLow",value:function calculateInstanceStartEndPositions64xyLow(e){var t=this.use64bitPositions();e.constant=!t,e.value=t?this.state.pathTesselator.get("startEndPositions64XyLow"):new Float32Array(4)}},{key:"calculateLeftDeltas",value:function calculateLeftDeltas(e){var t=this.state.pathTesselator;e.value=t.get("leftDeltas")}},{key:"calculateRightDeltas",value:function calculateRightDeltas(e){var t=this.state.pathTesselator;e.value=t.get("rightDeltas")}},{key:"calculateStrokeWidths",value:function calculateStrokeWidths(e){var t=this.props.getWidth,n=this.state.pathTesselator;e.bufferLayout=n.bufferLayout,e.value=n.get("strokeWidths",e.value,t)}},{key:"calculateDashArrays",value:function calculateDashArrays(e){var t=this.props.getDashArray,n=this.state.pathTesselator;e.value=n.get("dashArrays",e.value,t)}},{key:"calculateColors",value:function calculateColors(e){var t=this.props.getColor,n=this.state.pathTesselator;e.bufferLayout=n.bufferLayout,e.value=n.get("colors",e.value,t)}},{key:"calculatePickingColors",value:function calculatePickingColors(e){var t=this,n=this.state.pathTesselator,r=[];e.value=n.get("pickingColors",e.value,function(e){return t.encodePickingColor(e,r)})}},{key:"clearPickingColor",value:function clearPickingColor(e){for(var t=this.decodePickingColor(e),n=this.state.pathTesselator.bufferLayout,r=n[t],i=0,o=0;o<t;o++)i+=n[o];var a=this.getAttributeManager().attributes.instancePickingColors,s=a.value,l=i+r;s.fill(0,3*i,3*l),a.update({value:s})}}])&&path_layer_defineProperties(t.prototype,n),i&&path_layer_defineProperties(t,i),PathLayer}();de.layerName="PathLayer",de.defaultProps=he;var ge=n(265),me=n.n(ge);function validate(e){if(e=e&&e.positions||e,!Array.isArray(e)&&!ArrayBuffer.isView(e))throw new Error("invalid polygon")}function isSimple(e){return e.length>=1&&e[0].length>=2&&Number.isFinite(e[0][0])}function isNestedRingClosed(e){var t=e[0],n=e[e.length-1];return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]}function isFlatRingClosed(e,t,n,r){for(var i=0;i<t;i++)if(e[n+i]!==e[r-t+i])return!1;return!0}function copyNestedRing(e,t,n,r){for(var i=t,o=n.length,a=0;a<o;a++)for(var s=0;s<r;s++)e[i++]=n[a][s]||0;if(!isNestedRingClosed(n))for(var l=0;l<r;l++)e[i++]=n[0][l]||0;return i}function copyFlatRing(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5?arguments[5]:void 0,a=(o=o||n.length)-i;if(a<=0)return t;for(var s=t,l=0;l<a;l++)e[s++]=n[i+l];if(!isFlatRingClosed(n,r,i,o))for(var u=0;u<r;u++)e[s++]=n[i+u];return s}function getNestedVertexCount(e){return(isNestedRingClosed(e)?0:1)+e.length}function getFlatVertexCount(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0;return n>=(r=r||e.length)?0:(isFlatRingClosed(e,t,n,r)?0:1)+(r-n)/t}function getVertexCount(e,t){if(validate(e),e.positions){var n=e,r=n.positions,i=n.holeIndices;if(i){for(var o=0,a=0;a<=i.length;a++)o+=getFlatVertexCount(e.positions,t,i[a-1],i[a]);return o}e=r}if(Number.isFinite(e[0]))return getFlatVertexCount(e,t);if(!isSimple(e)){var s=0,l=!0,u=!1,c=void 0;try{for(var p,h=e[Symbol.iterator]();!(l=(p=h.next()).done);l=!0){s+=getNestedVertexCount(p.value)}}catch(e){u=!0,c=e}finally{try{l||null==h.return||h.return()}finally{if(u)throw c}}return s}return getNestedVertexCount(e)}function normalize(e,t,n){validate(e),n=n||getVertexCount(e,t);var r=new Float64Array(n*t),i=[];if(e.positions){var o=e,a=o.positions,s=o.holeIndices;if(s){for(var l=0,u=0;u<=s.length;u++)l=copyFlatRing(r,l,a,t,s[u-1],s[u]),i.push(l);return i.pop(),{positions:r,holeIndices:i}}e=a}if(Number.isFinite(e[0]))return copyFlatRing(r,0,e,t),{positions:r,holeIndices:null};if(!isSimple(e)){var c=0,p=!0,h=!1,f=void 0;try{for(var d,g=e[Symbol.iterator]();!(p=(d=g.next()).done);p=!0){c=copyNestedRing(r,c,d.value,t),i.push(c)}}catch(e){h=!0,f=e}finally{try{p||null==g.return||g.return()}finally{if(h)throw f}}return i.pop(),{positions:r,holeIndices:i}}return copyNestedRing(r,0,e,t),{positions:r,holeIndices:null}}function polygon_tesselator_typeof(e){return(polygon_tesselator_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function polygon_tesselator_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function polygon_tesselator_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function polygon_tesselator_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function polygon_tesselator_getPrototypeOf(e){return(polygon_tesselator_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function polygon_tesselator_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&polygon_tesselator_setPrototypeOf(e,t)}function polygon_tesselator_setPrototypeOf(e,t){return(polygon_tesselator_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var ye=r.h.Tesselator,ve=a.t.fp64LowPart,_e=function(e){function PolygonTesselator(e){var t,n,r=e.data,i=e.getGeometry,o=e.fp64,a=e.positionFormat,s=e.IndexType,l=void 0===s?Uint32Array:s;return polygon_tesselator_classCallCheck(this,PolygonTesselator),t=this,!(n=polygon_tesselator_getPrototypeOf(PolygonTesselator).call(this,{data:r,getGeometry:i,fp64:o,positionFormat:a,attributes:{positions:{size:3},positions64xyLow:{size:2,fp64Only:!0},vertexValid:{type:Uint8ClampedArray,size:1},indices:{type:l,size:1}}}))||"object"!==polygon_tesselator_typeof(n)&&"function"!=typeof n?polygon_tesselator_assertThisInitialized(t):n}var t,n,r;return polygon_tesselator_inherits(PolygonTesselator,ye),t=PolygonTesselator,(n=[{key:"get",value:function get(e,t,n){if("indices"===e)return this.attributes.indices.subarray(0,this.vertexCount);if(this.attributes[e])return this.attributes[e];switch(e){case"elevations":return this._updateAttribute({target:t,size:1,getValue:function getValue(e){return[n(e)]}});case"colors":return this._updateAttribute({target:t,size:4,getValue:function getValue(e){var t=n(e);return isNaN(t[3])&&(t[3]=255),t}});case"pickingColors":return this._updateAttribute({target:t,size:3,getValue:function getValue(e,t){return n(t)}});default:return null}}},{key:"getGeometrySize",value:function getGeometrySize(e){return getVertexCount(e,this.positionSize)}},{key:"updateGeometryAttributes",value:function updateGeometryAttributes(e,t){e=normalize(e,this.positionSize,t.geometrySize),this._updateIndices(e,t),this._updatePositions(e,t)}},{key:"_updateIndices",value:function _updateIndices(e,t){var n,r,i,o=t.geometryIndex,a=t.vertexStart,s=t.indexStart,l=this.attributes,u=this.indexLayout,c=this.typedArrayManager,p=l.indices,h=p.length,f=s,d=(n=e,r=this.positionSize,i=null,n.holeIndices&&(i=n.holeIndices.map(function(e){return e/r})),me()(n.positions,i,r));h<f+d.length&&(h=2*(f+d.length),p=c.allocate(p,h,{type:p.constructor,size:1,copy:!0}));for(var g=0;g<d.length;g++)p[f++]=d[g]+a;u[o]=d.length,l.indices=p}},{key:"_updatePositions",value:function _updatePositions(e,t){for(var n=t.vertexStart,r=t.geometrySize,i=this.attributes,o=i.positions,a=i.positions64xyLow,s=i.vertexValid,l=this.fp64,u=this.positionSize,c=n,p=e.positions,h=e.holeIndices,f=0;f<r;f++){var d=p[f*u],g=p[f*u+1],m=u>2?p[f*u+2]:0;o[3*c]=d,o[3*c+1]=g,o[3*c+2]=m,l&&(a[2*c]=ve(d),a[2*c+1]=ve(g)),s[c]=1,c++}if(h)for(var y=0;y<h.length;y++)s[n+h[y]/u-1]=0;s[n+r-1]=0}}])&&polygon_tesselator_defineProperties(t.prototype,n),r&&polygon_tesselator_defineProperties(t,r),PolygonTesselator}();function solid_polygon_layer_typeof(e){return(solid_polygon_layer_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function solid_polygon_layer_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function solid_polygon_layer_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function solid_polygon_layer_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function solid_polygon_layer_get(e,t,n){return(solid_polygon_layer_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var r=solid_polygon_layer_superPropBase(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function solid_polygon_layer_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=solid_polygon_layer_getPrototypeOf(e)););return e}function solid_polygon_layer_getPrototypeOf(e){return(solid_polygon_layer_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function solid_polygon_layer_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&solid_polygon_layer_setPrototypeOf(e,t)}function solid_polygon_layer_setPrototypeOf(e,t){return(solid_polygon_layer_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var be=[0,0,0,255],xe={filled:!0,extruded:!1,wireframe:!1,fp64:!1,elevationScale:{type:"number",min:0,value:1},getPolygon:{type:"accessor",value:function value(e){return e.polygon}},getElevation:{type:"accessor",value:1e3},getFillColor:{type:"accessor",value:be},getLineColor:{type:"accessor",value:be},lightSettings:{}},we={enter:function enter(e,t){return t.length?t.subarray(t.length-e.length):e}},Se=function(e){function SolidPolygonLayer(){return solid_polygon_layer_classCallCheck(this,SolidPolygonLayer),e=this,!(t=solid_polygon_layer_getPrototypeOf(SolidPolygonLayer).apply(this,arguments))||"object"!==solid_polygon_layer_typeof(t)&&"function"!=typeof t?solid_polygon_layer_assertThisInitialized(e):t;var e,t}var t,n,i;return solid_polygon_layer_inherits(SolidPolygonLayer,r["d"]),t=SolidPolygonLayer,(n=[{key:"getShaders",value:function getShaders(){return{vs:"#define SHADER_NAME solid-polygon-layer-vertex-shader\n\nattribute vec2 vertexPositions;\nattribute float vertexValid;\nattribute vec3 positions;\nattribute vec2 positions64xyLow;\nattribute vec3 nextPositions;\nattribute vec2 nextPositions64xyLow;\nattribute float elevations;\nattribute vec4 fillColors;\nattribute vec4 lineColors;\nattribute vec3 pickingColors;\n\nuniform bool isSideVertex;\nuniform bool extruded;\nuniform bool isWireframe;\nuniform float elevationScale;\nuniform float opacity;\n\nvarying vec4 vColor;\nvarying float isValid;\n\nvoid main(void) {\n  vec3 pos;\n  vec2 pos64xyLow;\n  vec3 normal;\n  vec4 colors = isWireframe ? lineColors : fillColors;\n\n  if (isSideVertex) {\n    pos = mix(positions, nextPositions, vertexPositions.x);\n    pos64xyLow = mix(positions64xyLow, nextPositions64xyLow, vertexPositions.x);\n    isValid = vertexValid;\n  } else {\n    pos = positions;\n    pos64xyLow = positions64xyLow;\n    isValid = 1.0;\n  }\n  if (extruded) {\n    pos.z += elevations * vertexPositions.y;\n  }\n  pos.z *= elevationScale;\n\n  vec4 position_worldspace;\n  gl_Position = project_position_to_clipspace(pos, pos64xyLow, vec3(0.), position_worldspace);\n\n  float lightWeight = 1.0;\n  \n  if (extruded) {\n    if (isSideVertex) {\n      normal = vec3(positions.y - nextPositions.y, nextPositions.x - positions.x, 0.0);\n      normal = project_normal(normal);\n    } else {\n      normal = vec3(0.0, 0.0, 1.0);\n    }\n\n    lightWeight = lighting_getLightWeight(position_worldspace.xyz, normal);\n  }\n\n  vec3 lightWeightedColor = lightWeight * colors.rgb;\n  vColor = vec4(lightWeightedColor, colors.a * opacity) / 255.0;\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(pickingColors);\n}\n",fs:"#define SHADER_NAME solid-polygon-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\nvarying float isValid;\n\nvoid main(void) {\n  if (isValid < 0.5) {\n    discard;\n  }\n\n  gl_FragColor = vColor;\n\n  // use highlight color if this fragment belongs to the selected object.\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n\n  // use picking color if rendering to picking FBO.\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n",modules:[this.use64bitProjection()?"project64":"project32","lighting","picking"]}}},{key:"initializeState",value:function initializeState(){var e=this.context.gl;this.setState({numInstances:0,polygonTesselator:new _e({IndexType:!e||Object(a.u)(e,a.e.ELEMENT_INDEX_UINT32)?Uint32Array:Uint16Array})});var t=this.getAttributeManager();t.remove(["instancePickingColors"]),t.add({indices:{size:1,isIndexed:!0,update:this.calculateIndices,noAlloc:!0},positions:{size:3,transition:we,accessor:"getPolygon",update:this.calculatePositions,noAlloc:!0},positions64xyLow:{size:2,update:this.calculatePositionsLow,noAlloc:!0},vertexValid:{size:1,type:o.a.UNSIGNED_BYTE,update:this.calculateVertexValid,noAlloc:!0},elevations:{size:1,transition:we,accessor:"getElevation",update:this.calculateElevations},fillColors:{alias:"colors",size:4,type:o.a.UNSIGNED_BYTE,transition:we,accessor:"getFillColor",update:this.calculateFillColors,defaultValue:be},lineColors:{alias:"colors",size:4,type:o.a.UNSIGNED_BYTE,transition:we,accessor:"getLineColor",update:this.calculateLineColors,defaultValue:be},pickingColors:{size:3,type:o.a.UNSIGNED_BYTE,update:this.calculatePickingColors}})}},{key:"draw",value:function draw(e){var t=e.uniforms,n=this.props,r=n.extruded,i=n.filled,a=n.wireframe,s=n.elevationScale,l=this.state,u=l.topModel,c=l.sideModel,p=Object.assign({},t,{extruded:Boolean(r),elevationScale:s});c&&(c.setUniforms(p),a&&(c.setDrawMode(o.a.LINE_STRIP),c.render({isWireframe:!0})),i&&(c.setDrawMode(o.a.TRIANGLE_FAN),c.render({isWireframe:!1}))),u&&u.render(p)}},{key:"updateState",value:function updateState(e){solid_polygon_layer_get(solid_polygon_layer_getPrototypeOf(SolidPolygonLayer.prototype),"updateState",this).call(this,e),this.updateGeometry(e);var t=e.props,n=e.oldProps,r=this.getAttributeManager();(t.fp64!==n.fp64||t.filled!==n.filled||t.extruded!==n.extruded)&&(this.state.models&&this.state.models.forEach(function(e){return e.delete()}),this.setState(this._getModels(this.context.gl)),r.invalidateAll())}},{key:"updateGeometry",value:function updateGeometry(e){var t=e.props,n=e.oldProps,r=e.changeFlags;if(r.dataChanged||t.fp64!==n.fp64||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getPolygon)){var i=this.state.polygonTesselator;i.updateGeometry({data:t.data,getGeometry:t.getPolygon,positionFormat:t.positionFormat,fp64:this.use64bitPositions()}),this.setState({numInstances:i.instanceCount}),this.getAttributeManager().invalidateAll()}}},{key:"updateAttributes",value:function updateAttributes(e){solid_polygon_layer_get(solid_polygon_layer_getPrototypeOf(SolidPolygonLayer.prototype),"updateAttributes",this).call(this,e);var t=this.getAttributeManager().getChangedAttributes({clearChangedFlags:!0}),n=this.state,r=n.topModel,i=n.sideModel,o=this.getNumInstances();if(r){if(t.indices){var a=t.indices.value.length;r.setVertexCount(a)}r.setAttributes(t)}if(i){i.setInstanceCount(o-1);var s={};for(var l in t){var u=t[l];"indices"!==l&&(s[l]=Object.assign({},u,{isInstanced:!0,buffer:u.getBuffer()}))}s.positions&&(s.nextPositions=Object.assign({},s.positions,{id:"nextPositions",offset:12})),s.positions64xyLow&&(s.nextPositions64xyLow=Object.assign({},s.positions64xyLow,{id:"nextPositions64xyLow",offset:8})),i.setAttributes(s)}}},{key:"_getModels",value:function _getModels(e){var t,n,r=this.props,i=r.id,s=r.filled,l=r.extruded;return s&&(t=new a.h(e,Object.assign({},this.getShaders(),{id:"".concat(i,"-top"),geometry:new a.g({drawMode:o.a.TRIANGLES,attributes:{vertexPositions:{size:2,constant:!0,value:new Float32Array([0,1])},nextPositions:{size:3,constant:!0,value:new Float32Array(3)},nextPositions64xyLow:{size:2,constant:!0,value:new Float32Array(2)}}}),uniforms:{isWireframe:!1,isSideVertex:!1},vertexCount:0,isIndexed:!0,shaderCache:this.context.shaderCache}))),l&&(n=new a.h(e,Object.assign({},this.getShaders(),{id:"".concat(i,"-side"),geometry:new a.g({drawMode:o.a.LINES,vertexCount:4,attributes:{vertexPositions:{size:2,value:new Float32Array([1,1,0,1,0,0,1,0])}}}),uniforms:{isSideVertex:!0},isInstanced:1,shaderCache:this.context.shaderCache}))),{models:[n,t].filter(Boolean),topModel:t,sideModel:n}}},{key:"calculateIndices",value:function calculateIndices(e){var t=this.state.polygonTesselator;e.bufferLayout=t.indexLayout,e.value=t.get("indices")}},{key:"calculatePositions",value:function calculatePositions(e){var t=this.state.polygonTesselator;e.bufferLayout=t.bufferLayout,e.value=t.get("positions")}},{key:"calculatePositionsLow",value:function calculatePositionsLow(e){var t=this.use64bitPositions();e.constant=!t,e.value=t?this.state.polygonTesselator.get("positions64xyLow"):new Float32Array(2)}},{key:"calculateVertexValid",value:function calculateVertexValid(e){e.value=this.state.polygonTesselator.get("vertexValid")}},{key:"calculateElevations",value:function calculateElevations(e){var t=this.state.polygonTesselator;e.bufferLayout=t.bufferLayout;var n=this.props,r=n.extruded,i=n.getElevation;r?(e.constant=!1,e.value=t.get("elevations",e.value,i)):(e.constant=!0,e.value=new Float32Array(1))}},{key:"calculateFillColors",value:function calculateFillColors(e){var t=this.state.polygonTesselator;e.bufferLayout=t.bufferLayout,e.value=t.get("colors",e.value,this.props.getFillColor)}},{key:"calculateLineColors",value:function calculateLineColors(e){var t=this.state.polygonTesselator;e.bufferLayout=t.bufferLayout,e.value=t.get("colors",e.value,this.props.getLineColor)}},{key:"calculatePickingColors",value:function calculatePickingColors(e){var t=this,n=[];e.value=this.state.polygonTesselator.get("pickingColors",e.value,function(e){return t.encodePickingColor(e,n)})}},{key:"clearPickingColor",value:function clearPickingColor(e){for(var t=this.decodePickingColor(e),n=this.state.polygonTesselator.bufferLayout,r=n[t],i=0,o=0;o<t;o++)i+=n[o];var a=this.getAttributeManager().attributes.pickingColors,s=a.value,l=i+r;s.fill(0,3*i,3*l),a.update({value:s})}}])&&solid_polygon_layer_defineProperties(t.prototype,n),i&&solid_polygon_layer_defineProperties(t,i),SolidPolygonLayer}();function polygon_layer_typeof(e){return(polygon_layer_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function polygon_layer_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function polygon_layer_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function polygon_layer_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function polygon_layer_getPrototypeOf(e){return(polygon_layer_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function polygon_layer_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&polygon_layer_setPrototypeOf(e,t)}function polygon_layer_setPrototypeOf(e,t){return(polygon_layer_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}Se.layerName="SolidPolygonLayer",Se.defaultProps=xe;var Ee={stroked:!0,filled:!0,extruded:!1,elevationScale:1,wireframe:!1,lineWidthScale:1,lineWidthMinPixels:0,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,lineJointRounded:!1,lineMiterLimit:4,lineDashJustified:!1,fp64:!1,getPolygon:{type:"accessor",value:function value(e){return e.polygon}},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:[0,0,0,255]},getLineWidth:{type:"accessor",value:1},getLineDashArray:{type:"accessor",value:[0,0]},getElevation:{type:"accessor",value:1e3},lightSettings:{}},Pe=function(e){function PolygonLayer(){return polygon_layer_classCallCheck(this,PolygonLayer),e=this,!(t=polygon_layer_getPrototypeOf(PolygonLayer).apply(this,arguments))||"object"!==polygon_layer_typeof(t)&&"function"!=typeof t?polygon_layer_assertThisInitialized(e):t;var e,t}var t,n,i;return polygon_layer_inherits(PolygonLayer,r["b"]),t=PolygonLayer,(n=[{key:"initializeState",value:function initializeState(){this.state={paths:[]}}},{key:"updateState",value:function updateState(e){e.oldProps;var t=e.props,n=e.changeFlags;(n.dataChanged||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getPolygon))&&(this.state.paths=this._getPaths(t))}},{key:"getPickingInfo",value:function getPickingInfo(e){var t=e.info;return Object.assign(t,{object:t.object&&t.object.object||t.object})}},{key:"_getPaths",value:function _getPaths(e){var t=e.data,n=e.getPolygon,r=[],i="XY"===e.positionFormat?2:3,o=!0,a=!1,s=void 0;try{for(var l,u=t[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value,p=normalize(n(c),i),h=p.positions,f=p.holeIndices;if(f)for(var d=0;d<=f.length;d++){var g=h.subarray(f[d-1]||0,f[d]||h.length);r.push({path:g,object:c})}else r.push({path:h,object:c})}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}return r}},{key:"_getAccessor",value:function _getAccessor(e){return"function"==typeof e?function(t){return e(t.object)}:e}},{key:"renderLayers",value:function renderLayers(){var e=this.props,t=e.data,n=e.stroked,r=e.filled,i=e.extruded,o=e.wireframe,a=e.elevationScale,s=e.transitions,l=this.props,u=l.lineWidthScale,c=l.lineWidthMinPixels,p=l.lineWidthMaxPixels,h=l.lineJointRounded,f=l.lineMiterLimit,d=l.lineDashJustified,g=l.fp64,m=this.props,y=m.getFillColor,v=m.getLineColor,_=m.getLineWidth,b=m.getLineDashArray,x=m.getElevation,w=m.getPolygon,S=m.updateTriggers,E=m.lightSettings,P=this.state.paths,C=this.getSubLayerClass("fill",Se),k=this.getSubLayerClass("stroke",de),T=this.shouldRenderSubLayer("fill",P)&&new C({extruded:i,elevationScale:a,fp64:g,filled:r,wireframe:o,getElevation:x,getFillColor:y,getLineColor:v,lightSettings:E,transitions:s},this.getSubLayerProps({id:"fill",updateTriggers:{getPolygon:S.getPolygon,getElevation:S.getElevation,getFillColor:S.getFillColor,getLineColor:S.getLineColor}}),{data:t,getPolygon:w});return[!i&&T,!i&&n&&this.shouldRenderSubLayer("stroke",P)&&new k({fp64:g,widthScale:u,widthMinPixels:c,widthMaxPixels:p,rounded:h,miterLimit:f,dashJustified:d,transitions:s&&{getWidth:s.getLineWidth,getColor:s.getLineColor,getPath:s.getPolygon},getColor:this._getAccessor(v),getWidth:this._getAccessor(_),getDashArray:this._getAccessor(b)},this.getSubLayerProps({id:"stroke",updateTriggers:{getWidth:S.getLineWidth,getColor:S.getLineColor,getDashArray:S.getLineDashArray}}),{data:P,getPath:function getPath(e){return e.path}}),i&&T]}}])&&polygon_layer_defineProperties(t.prototype,n),i&&polygon_layer_defineProperties(t,i),PolygonLayer}();function assert(e,t){if(!e)throw new Error("deck.gl: ".concat(t))}function getGeojsonFeatures(e){if(Array.isArray(e))return e;switch(assert(e.type,"GeoJSON does not have type"),e.type){case"Feature":return[e];case"FeatureCollection":return assert(Array.isArray(e.features),"GeoJSON does not have features array"),e.features;default:return[{geometry:e}]}}function separateGeojsonFeatures(e){for(var t={pointFeatures:[],lineFeatures:[],polygonFeatures:[],polygonOutlineFeatures:[]},n=0;n<e.length;n++){var r=e[n];assert(r&&r.geometry,"GeoJSON does not have geometry");var i=r.geometry,o={feature:r,index:n};if("GeometryCollection"===i.type){assert(Array.isArray(i.geometries),"GeoJSON does not have geometries array");for(var a=i.geometries,s=0;s<a.length;s++){separateGeometry(a[s],t,o)}}else separateGeometry(i,t,o)}return t}function separateGeometry(e,t,n){var r=e.type,i=e.coordinates,o=t.pointFeatures,a=t.lineFeatures,s=t.polygonFeatures,l=t.polygonOutlineFeatures;switch(checkCoordinates(r,i),r){case"Point":o.push({geometry:e,sourceFeature:n});break;case"MultiPoint":i.forEach(function(e){o.push({geometry:{type:"Point",coordinates:e},sourceFeature:n})});break;case"LineString":a.push({geometry:e,sourceFeature:n});break;case"MultiLineString":i.forEach(function(e){a.push({geometry:{type:"LineString",coordinates:e},sourceFeature:n})});break;case"Polygon":s.push({geometry:e,sourceFeature:n}),i.forEach(function(e){l.push({geometry:{type:"LineString",coordinates:e},sourceFeature:n})});break;case"MultiPolygon":i.forEach(function(e){s.push({geometry:{type:"Polygon",coordinates:e},sourceFeature:n}),e.forEach(function(e){l.push({geometry:{type:"LineString",coordinates:e},sourceFeature:n})})})}}function unwrapSourceFeature(e){return e.sourceFeature.feature}Pe.layerName="PolygonLayer",Pe.defaultProps=Ee;var Ce={Point:1,MultiPoint:2,LineString:2,MultiLineString:3,Polygon:3,MultiPolygon:4};function checkCoordinates(e,t){var n=Ce[e];for(assert(n,"Unknown GeoJSON type ".concat(e));t&&--n>0;)t=t[0];assert(t&&Number.isFinite(t[0]),"".concat(e," coordinates are malformed"))}function geojson_layer_typeof(e){return(geojson_layer_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function geojson_layer_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function geojson_layer_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function geojson_layer_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function geojson_layer_getPrototypeOf(e){return(geojson_layer_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function geojson_layer_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&geojson_layer_setPrototypeOf(e,t)}function geojson_layer_setPrototypeOf(e,t){return(geojson_layer_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var ke={stroked:!0,filled:!0,extruded:!1,wireframe:!1,lineWidthScale:1,lineWidthMinPixels:0,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,lineJointRounded:!1,lineMiterLimit:4,elevationScale:1,pointRadiusScale:1,pointRadiusMinPixels:0,pointRadiusMaxPixels:Number.MAX_SAFE_INTEGER,lineDashJustified:!1,fp64:!1,getLineColor:{type:"accessor",value:[0,0,0,255]},getFillColor:{type:"accessor",value:[0,0,0,255]},getRadius:{type:"accessor",value:1},getLineWidth:{type:"accessor",value:1},getLineDashArray:{type:"accessor",value:[0,0]},getElevation:{type:"accessor",value:1e3},lightSettings:{}};function getCoordinates(e){return e.geometry.coordinates}function unwrappingAccessor(e){return"function"!=typeof e?e:function(t){return e(unwrapSourceFeature(t))}}var Te=function(e){function GeoJsonLayer(){return geojson_layer_classCallCheck(this,GeoJsonLayer),e=this,!(t=geojson_layer_getPrototypeOf(GeoJsonLayer).apply(this,arguments))||"object"!==geojson_layer_typeof(t)&&"function"!=typeof t?geojson_layer_assertThisInitialized(e):t;var e,t}var t,n,i;return geojson_layer_inherits(GeoJsonLayer,r["b"]),t=GeoJsonLayer,(n=[{key:"initializeState",value:function initializeState(){this.state={features:{}}}},{key:"updateState",value:function updateState(e){e.oldProps;var t=e.props;if(e.changeFlags.dataChanged){var n=getGeojsonFeatures(t.data);this.state.features=separateGeojsonFeatures(n)}}},{key:"getPickingInfo",value:function getPickingInfo(e){var t,n=e.info;e.sourceLayer;return Object.assign(n,{object:n.object?unwrapSourceFeature(n.object):n.object,index:n.object?(t=n.object,t.sourceFeature.index):n.index})}},{key:"renderLayers",value:function renderLayers(){var e=this.state.features,t=e.pointFeatures,n=e.lineFeatures,r=e.polygonFeatures,i=e.polygonOutlineFeatures,o=this.props,a=o.stroked,s=o.filled,l=o.extruded,u=o.wireframe,c=o.lightSettings,p=o.transitions,h=this.props,f=h.lineWidthScale,d=h.lineWidthMinPixels,g=h.lineWidthMaxPixels,m=h.lineJointRounded,y=h.lineMiterLimit,v=h.pointRadiusScale,_=h.pointRadiusMinPixels,b=h.pointRadiusMaxPixels,x=h.elevationScale,w=h.lineDashJustified,S=h.fp64,E=this.props,P=E.getLineColor,C=E.getFillColor,k=E.getRadius,T=E.getLineWidth,A=E.getLineDashArray,O=E.getElevation,R=E.updateTriggers,L=this.getSubLayerClass("polygons-fill",Se),M=this.getSubLayerClass("polygons-stroke",de),j=this.getSubLayerClass("line-strings",de),D=this.getSubLayerClass("points",I),F=this.shouldRenderSubLayer("polygons-fill",r)&&new L({fp64:S,extruded:l,elevationScale:x,filled:s,wireframe:u,lightSettings:c,getElevation:unwrappingAccessor(O),getFillColor:unwrappingAccessor(C),getLineColor:unwrappingAccessor(P),transitions:p&&{getPolygon:p.geometry,getElevation:p.getElevation,getFillColor:p.getFillColor,getLineColor:p.getLineColor}},this.getSubLayerProps({id:"polygons-fill",updateTriggers:{getElevation:R.getElevation,getFillColor:R.getFillColor,getLineColor:R.getLineColor}}),{data:r,getPolygon:getCoordinates});return[!l&&F,!l&&a&&this.shouldRenderSubLayer("polygons-stroke",i)&&new M({fp64:S,widthScale:f,widthMinPixels:d,widthMaxPixels:g,rounded:m,miterLimit:y,dashJustified:w,getColor:unwrappingAccessor(P),getWidth:unwrappingAccessor(T),getDashArray:unwrappingAccessor(A),transitions:p&&{getPath:p.geometry,getColor:p.getLineColor,getWidth:p.getLineWidth}},this.getSubLayerProps({id:"polygons-stroke",updateTriggers:{getColor:R.getLineColor,getWidth:R.getLineWidth,getDashArray:R.getLineDashArray}}),{data:i,getPath:getCoordinates}),this.shouldRenderSubLayer("linestrings",n)&&new j({fp64:S,widthScale:f,widthMinPixels:d,widthMaxPixels:g,rounded:m,miterLimit:y,dashJustified:w,getColor:unwrappingAccessor(P),getWidth:unwrappingAccessor(T),getDashArray:unwrappingAccessor(A),transitions:p&&{getPath:p.geometry,getColor:p.getLineColor,getWidth:p.getLineWidth}},this.getSubLayerProps({id:"line-strings",updateTriggers:{getColor:R.getLineColor,getWidth:R.getLineWidth,getDashArray:R.getLineDashArray}}),{data:n,getPath:getCoordinates}),this.shouldRenderSubLayer("points",t)&&new D({fp64:S,stroked:a,filled:s,radiusScale:v,radiusMinPixels:_,radiusMaxPixels:b,lineWidthScale:f,lineWidthMinPixels:d,lineWidthMaxPixels:g,getFillColor:unwrappingAccessor(C),getLineColor:unwrappingAccessor(P),getRadius:unwrappingAccessor(k),getLineWidth:unwrappingAccessor(T),transitions:p&&{getPosition:p.geometry,getFillColor:p.getFillColor,getLineColor:p.getLineColor,getRadius:p.getRadius,getLineWidth:p.getLineWidth}},this.getSubLayerProps({id:"points",updateTriggers:{getFillColor:R.getFillColor,getLineColor:R.getLineColor,getRadius:R.getRadius,getLineWidth:R.getLineWidth}}),{data:t,getPosition:getCoordinates}),l&&F]}}])&&geojson_layer_defineProperties(t.prototype,n),i&&geojson_layer_defineProperties(t,i),GeoJsonLayer}();Te.layerName="GeoJsonLayer",Te.defaultProps=ke;function multi_icon_layer_typeof(e){return(multi_icon_layer_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function multi_icon_layer_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function multi_icon_layer_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function multi_icon_layer_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function multi_icon_layer_get(e,t,n){return(multi_icon_layer_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var r=multi_icon_layer_superPropBase(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function multi_icon_layer_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=multi_icon_layer_getPrototypeOf(e)););return e}function multi_icon_layer_getPrototypeOf(e){return(multi_icon_layer_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function multi_icon_layer_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&multi_icon_layer_setPrototypeOf(e,t)}function multi_icon_layer_setPrototypeOf(e,t){return(multi_icon_layer_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var Ae=function(e){function MultiIconLayer(){return multi_icon_layer_classCallCheck(this,MultiIconLayer),e=this,!(t=multi_icon_layer_getPrototypeOf(MultiIconLayer).apply(this,arguments))||"object"!==multi_icon_layer_typeof(t)&&"function"!=typeof t?multi_icon_layer_assertThisInitialized(e):t;var e,t}var t,n,r;return multi_icon_layer_inherits(MultiIconLayer,_),t=MultiIconLayer,(n=[{key:"getShaders",value:function getShaders(){return Object.assign({},multi_icon_layer_get(multi_icon_layer_getPrototypeOf(MultiIconLayer.prototype),"getShaders",this).call(this),{vs:'#define SHADER_NAME multi-icon-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec2 instancePositions64xyLow;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute vec4 instanceIconFrames;\nattribute float instanceColorModes;\nattribute vec2 instanceOffsets;\n\n// the following three attributes are for the multi-icon layer\nattribute vec2 instancePixelOffset;\n\nuniform float sizeScale;\nuniform vec2 iconsTextureDim;\nuniform float gamma;\nuniform float opacity;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying float vGamma;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = angle * PI / 180.0;\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  vec2 iconSize = instanceIconFrames.zw;\n  // scale icon height to match instanceSize\n  float instanceScale = iconSize.y == 0.0 ? 0.0 : instanceSizes / iconSize.y;\n\n  // scale and rotate vertex in "pixel" value and convert back to fraction in clipspace\n  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;\n\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * sizeScale * instanceScale;\n  pixelOffset += instancePixelOffset;\n  pixelOffset.y *= -1.0;\n\n  gl_Position = project_position_to_clipspace(instancePositions, instancePositions64xyLow, vec3(0.0));\n  gl_Position += project_pixel_to_clipspace(pixelOffset);\n\n  vTextureCoords = mix(\n    instanceIconFrames.xy,\n    instanceIconFrames.xy + iconSize,\n    (positions.xy + 1.0) / 2.0\n  ) / iconsTextureDim;\n\n  vTextureCoords.y = 1.0 - vTextureCoords.y;\n\n  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity) / 255.;\n  picking_setPickingColor(instancePickingColors);\n\n  vGamma = gamma / (sizeScale * iconSize.y);\n}\n',fs:"#define SHADER_NAME multi-icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform sampler2D iconsTexture;\nuniform float buffer;\nuniform bool sdf;\n\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying float vGamma;\n\nconst float MIN_ALPHA = 0.05;\n\nvoid main(void) {\n  vec4 texColor = texture2D(iconsTexture, vTextureCoords);\n  \n  float alpha = texColor.a;\n  // if enable sdf (signed distance fields)\n  if (sdf) {\n    float distance = texture2D(iconsTexture, vTextureCoords).a;\n    alpha = smoothstep(buffer - vGamma, buffer + vGamma, distance);\n  }\n\n  // Take the global opacity and the alpha from vColor into account for the alpha component\n  float a = alpha * vColor.a;\n\n  if (a < MIN_ALPHA) {\n    discard;\n  }\n\n  gl_FragColor = vec4(vColor.rgb, a);\n\n  // use highlight color if this fragment belongs to the selected object.\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n\n  // use picking color if rendering to picking FBO.\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n"})}},{key:"initializeState",value:function initializeState(){multi_icon_layer_get(multi_icon_layer_getPrototypeOf(MultiIconLayer.prototype),"initializeState",this).call(this),this.getAttributeManager().addInstanced({instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}},{key:"updateState",value:function updateState(e){multi_icon_layer_get(multi_icon_layer_getPrototypeOf(MultiIconLayer.prototype),"updateState",this).call(this,e);var t=e.changeFlags;t.updateTriggersChanged&&(t.updateTriggersChanged.getAnchorX||t.updateTriggersChanged.getAnchorY)&&this.getAttributeManager().invalidate("instanceOffsets")}},{key:"draw",value:function draw(e){var t=e.uniforms,n=this.props.sdf;multi_icon_layer_get(multi_icon_layer_getPrototypeOf(MultiIconLayer.prototype),"draw",this).call(this,{uniforms:Object.assign({},t,{buffer:.75,gamma:.2,sdf:Boolean(n)})})}},{key:"calculateInstanceOffsets",value:function calculateInstanceOffsets(e){var t=this.props,n=t.data,r=t.iconMapping,i=t.getIcon,o=t.getAnchorX,a=t.getAnchorY,s=t.getLengthOfQueue,l=t.getShiftInQueue,u=e.value,c=0,p=!0,h=!1,f=void 0;try{for(var d,g=n[Symbol.iterator]();!(p=(d=g.next()).done);p=!0){var m=d.value,y=r[i(m)]||{},v=s(m),_=l(m);u[c++]=(o(m)-1)*v/2+y.width/2+_||0,u[c++]=y.height/2*a(m)||0}}catch(e){h=!0,f=e}finally{try{p||null==g.return||g.return()}finally{if(h)throw f}}}},{key:"calculateInstancePickingColors",value:function calculateInstancePickingColors(e){var t=this.props,n=t.data,r=t.getPickingIndex,i=e.value,o=0,a=[],s=!0,l=!1,u=void 0;try{for(var c,p=n[Symbol.iterator]();!(s=(c=p.next()).done);s=!0){var h=r(c.value);this.encodePickingColor(h,a),i[o++]=a[0],i[o++]=a[1],i[o++]=a[2]}}catch(e){l=!0,u=e}finally{try{s||null==p.return||p.return()}finally{if(l)throw u}}}}])&&multi_icon_layer_defineProperties(t.prototype,n),r&&multi_icon_layer_defineProperties(t,r),MultiIconLayer}();Ae.layerName="MultiIconLayer",Ae.defaultProps={getShiftInQueue:{type:"accessor",value:function value(e){return e.shift||0}},getLengthOfQueue:{type:"accessor",value:function value(e){return e.len||1}},getAnchorX:{type:"accessor",value:function value(e){return e.anchorX||0}},getAnchorY:{type:"accessor",value:function value(e){return e.anchorY||0}},getPixelOffset:{type:"accessor",value:[0,0]},getPickingIndex:{type:"accessor",value:function value(e){return e.objectIndex}}};var Oe=n(266),Ie=n.n(Oe);function font_atlas_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Re=10242,Le=10243,Me=33071,je=1024,De=.9,Fe=1.2;var Ne=function getDefaultCharacterSet(){for(var e=[],t=32;t<128;t++)e.push(String.fromCharCode(t));return e}(),Be="Monaco, monospace",ze="normal",Ue={fontSize:64,buffer:2,sdf:!1,cutoff:.25,radius:3};function populateAlphaChannel(e,t){for(var n=0;n<e.length;n++)t.data[4*n+3]=e[n]}function setTextStyle(e,t,n,r){e.font="".concat(r," ").concat(n,"px ").concat(t),e.fillStyle="#000",e.textBaseline="baseline",e.textAlign="left"}function font_atlas_buildMapping(e){var t=e.ctx,n=e.fontHeight,r=e.buffer,i=e.characterSet,o=e.maxCanvasWidth,a={},s=0,l=0;return Array.from(i).forEach(function(e){var i=t.measureText(e).width;l+i+2*r>o&&(l=0,s++),a[e]={x:l+r,y:s*(n+2*r)+r,width:i,height:n,mask:!0},l+=i+2*r}),{mapping:a,canvasHeight:(s+1)*(n+2*r)}}function makeFontAtlas(e,t){var n,r=Object.assign({fontFamily:Be,fontWeight:ze,characterSet:Ne},Ue,t),i=r.fontFamily,o=r.fontWeight,s=r.characterSet,l=r.fontSize,u=r.buffer,c=r.sdf,p=r.radius,h=r.cutoff,f=document.createElement("canvas"),d=f.getContext("2d");setTextStyle(d,i,l,o);var g=font_atlas_buildMapping({ctx:d,fontHeight:l*Fe,buffer:u,characterSet:s,maxCanvasWidth:je}),m=g.canvasHeight,y=g.mapping;if(f.width=je,f.height=m,setTextStyle(d,i,l,o),c){var v=new Ie.a(l,u,p,h,i,o),_=d.createImageData(v.size,v.size),b=!0,x=!1,w=void 0;try{for(var S,E=s[Symbol.iterator]();!(b=(S=E.next()).done);b=!0){var P=S.value;populateAlphaChannel(v.draw(P),_),d.putImageData(_,y[P].x-u,y[P].y-u)}}catch(e){x=!0,w=e}finally{try{b||null==E.return||E.return()}finally{if(x)throw w}}}else{var C=!0,k=!1,T=void 0;try{for(var A,O=s[Symbol.iterator]();!(C=(A=O.next()).done);C=!0){var I=A.value;d.fillText(I,y[I].x,y[I].y+l*De)}}catch(e){k=!0,T=e}finally{try{C||null==O.return||O.return()}finally{if(k)throw T}}}return{scale:Fe,mapping:y,texture:new a.i(e,{pixels:f,parameters:(n={},font_atlas_defineProperty(n,Re,Me),font_atlas_defineProperty(n,Le,Me),n)})}}function text_layer_typeof(e){return(text_layer_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function text_layer_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function text_layer_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function text_layer_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function text_layer_getPrototypeOf(e){return(text_layer_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function text_layer_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&text_layer_setPrototypeOf(e,t)}function text_layer_setPrototypeOf(e,t){return(text_layer_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var Ve={start:1,middle:0,end:-1},Ge={top:1,center:0,bottom:-1},We=["fontSize","buffer","sdf","radius","cutoff"],qe={fp64:!1,sizeScale:1,characterSet:Ne,fontFamily:Be,fontWeight:ze,fontSettings:{},getText:{type:"accessor",value:function value(e){return e.text}},getPosition:{type:"accessor",value:function value(e){return e.position}},getColor:{type:"accessor",value:[0,0,0,255]},getSize:{type:"accessor",value:32},getAngle:{type:"accessor",value:0},getTextAnchor:{type:"accessor",value:"middle"},getAlignmentBaseline:{type:"accessor",value:"center"},getPixelOffset:{type:"accessor",value:[0,0]}},He=function(e){function TextLayer(){return text_layer_classCallCheck(this,TextLayer),e=this,!(t=text_layer_getPrototypeOf(TextLayer).apply(this,arguments))||"object"!==text_layer_typeof(t)&&"function"!=typeof t?text_layer_assertThisInitialized(e):t;var e,t}var t,n,i;return text_layer_inherits(TextLayer,r["b"]),t=TextLayer,(n=[{key:"updateState",value:function updateState(e){var t=e.props,n=e.oldProps,r=e.changeFlags,i=this.fontChanged(n,t);i&&this.updateFontAtlas(),(r.dataChanged||i||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getText))&&this.transformStringToLetters()}},{key:"updateFontAtlas",value:function updateFontAtlas(){var e=this.context.gl,t=this.props,n=t.fontSettings,r=t.fontFamily,i=t.fontWeight,o=t.characterSet,a=makeFontAtlas(e,Object.assign({},Ue,n,{fontFamily:r,fontWeight:i,characterSet:o})),s=a.scale,l=a.mapping,u=a.texture;this.setState({scale:s,iconAtlas:u,iconMapping:l})}},{key:"fontChanged",value:function fontChanged(e,t){if(e.fontFamily!==t.fontFamily||e.characterSet!==t.characterSet||e.fontWeight!==t.fontWeight)return!0;if(e.fontSettings===t.fontSettings)return!1;var n=e.fontSettings||{},r=t.fontSettings||{};return We.some(function(e){return n[e]!==r[e]})}},{key:"getPickingInfo",value:function getPickingInfo(e){var t=e.info;return Object.assign(t,{object:t.index>=0?this.props.data[t.index]:null})}},{key:"transformStringToLetters",value:function transformStringToLetters(){var e=this.props,t=e.data,n=e.getText,i=this.state.iconMapping,o=[],a=0,s=!0,l=!1,u=void 0;try{for(var c,p=function _loop(){var e=c.value,t=n(e);if(t){var s=Array.from(t),l=[0],u=0;s.forEach(function(n,s){var c={text:n,index:s,offsets:l,len:t.length,object:e,objectIndex:a},p=i[n];p?u+=p.width:(r.i.warn("Missing character: ".concat(n))(),u+=32),l.push(u),o.push(c)})}a++},h=t[Symbol.iterator]();!(s=(c=h.next()).done);s=!0)p()}catch(e){l=!0,u=e}finally{try{s||null==h.return||h.return()}finally{if(l)throw u}}this.setState({data:o})}},{key:"getLetterOffset",value:function getLetterOffset(e){return e.offsets[e.index]}},{key:"getTextLength",value:function getTextLength(e){return e.offsets[e.offsets.length-1]}},{key:"_getAccessor",value:function _getAccessor(e){return"function"==typeof e?function(t){return e(t.object)}:e}},{key:"getAnchorXFromTextAnchor",value:function getAnchorXFromTextAnchor(e){return function(t){var n="function"==typeof e?e(t.object):e;if(!Ve.hasOwnProperty(n))throw new Error("Invalid text anchor parameter: ".concat(n));return Ve[n]}}},{key:"getAnchorYFromAlignmentBaseline",value:function getAnchorYFromAlignmentBaseline(e){return function(t){var n="function"==typeof e?e(t.object):e;if(!Ge.hasOwnProperty(n))throw new Error("Invalid alignment baseline parameter: ".concat(n));return Ge[n]}}},{key:"renderLayers",value:function renderLayers(){var e=this,t=this.state,n=t.data,r=t.scale,i=t.iconAtlas,o=t.iconMapping,a=this.props,s=a.getPosition,l=a.getColor,u=a.getSize,c=a.getAngle,p=a.getTextAnchor,h=a.getAlignmentBaseline,f=a.getPixelOffset,d=a.fp64,g=a.sdf,m=a.sizeScale,y=a.transitions,v=a.updateTriggers;return new(this.getSubLayerClass("characters",Ae))({sdf:g,iconAtlas:i,iconMapping:o,getPosition:function getPosition(e){return s(e.object)},getColor:this._getAccessor(l),getSize:this._getAccessor(u),getAngle:this._getAccessor(c),getAnchorX:this.getAnchorXFromTextAnchor(p),getAnchorY:this.getAnchorYFromAlignmentBaseline(h),getPixelOffset:this._getAccessor(f),fp64:d,sizeScale:m*r,transitions:y&&{getPosition:y.getPosition,getAngle:y.getAngle,getColor:y.getColor,getSize:y.getSize,getPixelOffset:v.getPixelOffset}},this.getSubLayerProps({id:"characters",updateTriggers:{getPosition:v.getPosition,getAngle:v.getAngle,getColor:v.getColor,getSize:v.getSize,getPixelOffset:v.getPixelOffset,getAnchorX:v.getTextAnchor,getAnchorY:v.getAlignmentBaseline}}),{data:n,getIcon:function getIcon(e){return e.text},getShiftInQueue:function getShiftInQueue(t){return e.getLetterOffset(t)},getLengthOfQueue:function getLengthOfQueue(t){return e.getTextLength(t)}})}}])&&text_layer_defineProperties(t.prototype,n),i&&text_layer_defineProperties(t,i),TextLayer}();He.layerName="TextLayer",He.defaultProps=qe;var Xe,Ke=n(19);function marching_squares_codes_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ze={N:[0,.5],E:[.5,0],S:[0,-.5],W:[-.5,0],NE:[.5,.5],NW:[-.5,.5],SE:[.5,-.5],SW:[-.5,-.5]},Ye=[Ze.W,Ze.SW,Ze.S],Je=[Ze.S,Ze.SE,Ze.E],Qe=[Ze.E,Ze.NE,Ze.N],$e=[Ze.NW,Ze.W,Ze.N],et=[[-.5,1/6],[-.5,-1/6],[-1/6,-.5],[1/6,-.5]],tt=[[-1/6,-.5],[1/6,-.5],[.5,-1/6],[.5,1/6]],nt=[[.5,-1/6],[.5,1/6],[1/6,.5],[-1/6,.5]],rt=[[-.5,1/6],[-.5,-1/6],[1/6,.5],[-1/6,.5]],it=[Ze.W,Ze.SW,Ze.SE,Ze.E],ot=[Ze.S,Ze.SE,Ze.NE,Ze.N],at=[Ze.NW,Ze.W,Ze.E,Ze.NE],st=[Ze.NW,Ze.SW,Ze.S,Ze.N],lt=[[-.5,1/6],[-.5,-1/6],[.5,-1/6],[.5,1/6]],ut=[[-1/6,-.5],[1/6,-.5],[1/6,.5],[-1/6,.5]],ct=[Ze.NW,Ze.SW,Ze.SE,Ze.NE],pt=[Ze.NW,Ze.SW,Ze.SE,Ze.E,Ze.N],ht=[Ze.W,Ze.SW,Ze.SE,Ze.NE,Ze.N],ft=[Ze.NW,Ze.W,Ze.S,Ze.SE,Ze.NE],dt=[Ze.NW,Ze.SW,Ze.S,Ze.E,Ze.NE],gt=[Ze.NW,Ze.W,[.5,-1/6],[.5,1/6],Ze.N],mt=[[-1/6,-.5],[1/6,-.5],Ze.E,Ze.NE,Ze.N],yt=[[-.5,1/6],[-.5,-1/6],Ze.S,Ze.SE,Ze.E],vt=[Ze.W,Ze.SW,Ze.S,[1/6,.5],[-1/6,.5]],_t=[Ze.NW,Ze.W,[-1/6,-.5],[1/6,-.5],Ze.N],bt=[[-.5,1/6],[-.5,-1/6],Ze.E,Ze.NE,Ze.N],xt=[Ze.S,Ze.SE,Ze.E,[1/6,.5],[-1/6,.5]],wt=[Ze.W,Ze.SW,Ze.S,[.5,-1/6],[.5,1/6]],St=[Ze.W,Ze.SW,Ze.SE,Ze.E,[1/6,.5],[-1/6,.5]],Et=[[-.5,1/6],[-.5,-1/6],Ze.S,Ze.SE,Ze.NE,Ze.N],Pt=[Ze.NW,Ze.W,[-1/6,-.5],[1/6,-.5],Ze.E,Ze.NE],Ct=[Ze.NW,Ze.SW,Ze.S,[.5,-1/6],[.5,1/6],Ze.N],kt=[Ze.W,Ze.SW,Ze.S,Ze.E,Ze.NE,Ze.N],Tt=[Ze.NW,Ze.W,Ze.S,Ze.SE,Ze.E,Ze.N],At=[[-.5,1/6],[-.5,-1/6],[-1/6,-.5],[1/6,-.5],Ze.E,Ze.NE,Ze.N],Ot=[Ze.W,Ze.SW,Ze.S,[.5,-1/6],[.5,1/6],[1/6,.5],[-1/6,.5]],It=[Ze.NW,Ze.W,[-1/6,-.5],[1/6,-.5],[.5,-1/6],[.5,1/6],Ze.N],Rt=[[-.5,1/6],[-.5,-1/6],Ze.S,Ze.SE,Ze.E,[1/6,.5],[-1/6,.5]],Lt=[[-.5,1/6],[-.5,-1/6],[-1/6,-.5],[1/6,-.5],[.5,-1/6],[.5,1/6],[1/6,.5],[-1/6,.5]],Mt={0:[],1:[[Ze.W,Ze.S]],2:[[Ze.S,Ze.E]],3:[[Ze.W,Ze.E]],4:[[Ze.N,Ze.E]],5:{0:[[Ze.W,Ze.S],[Ze.N,Ze.E]],1:[[Ze.W,Ze.N],[Ze.S,Ze.E]]},6:[[Ze.N,Ze.S]],7:[[Ze.W,Ze.N]],8:[[Ze.W,Ze.N]],9:[[Ze.N,Ze.S]],10:{0:[[Ze.W,Ze.N],[Ze.S,Ze.E]],1:[[Ze.W,Ze.S],[Ze.N,Ze.E]]},11:[[Ze.N,Ze.E]],12:[[Ze.W,Ze.E]],13:[[Ze.S,Ze.E]],14:[[Ze.W,Ze.S]],15:[]};function ternaryToIndex(e){return parseInt(e,4)}var jt=(marching_squares_codes_defineProperty(Xe={},ternaryToIndex("0000"),[]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("2222"),[]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("2221"),[Ye]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("2212"),[Je]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("2122"),[Qe]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("1222"),[$e]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("0001"),[Ye]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("0010"),[Je]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("0100"),[Qe]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("1000"),[$e]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("2220"),[et]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("2202"),[tt]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("2022"),[nt]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("0222"),[rt]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("0002"),[et]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("0020"),[tt]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("0200"),[nt]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("2000"),[rt]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("0011"),[it]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("0110"),[ot]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("1100"),[at]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("1001"),[st]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("2211"),[it]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("2112"),[ot]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("1122"),[at]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("1221"),[st]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("2200"),[lt]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("2002"),[ut]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("0022"),[lt]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("0220"),[ut]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("1111"),[ct]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("1211"),[pt]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("2111"),[ht]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("1112"),[ft]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("1121"),[dt]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("1011"),[pt]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("0111"),[ht]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("1110"),[ft]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("1101"),[dt]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("1200"),[gt]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("0120"),[mt]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("0012"),[yt]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("2001"),[vt]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("1022"),[gt]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("2102"),[mt]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("2210"),[yt]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("0221"),[vt]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("1002"),[_t]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("2100"),[bt]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("0210"),[xt]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("0021"),[wt]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("1220"),[_t]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("0122"),[bt]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("2012"),[xt]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("2201"),[wt]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("0211"),[St]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("2110"),[Et]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("1102"),[Pt]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("1021"),[Ct]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("2011"),[St]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("0112"),[Et]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("1120"),[Pt]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("1201"),[Ct]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("2101"),[kt]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("0121"),[kt]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("1012"),[Tt]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("1210"),[Tt]),marching_squares_codes_defineProperty(Xe,ternaryToIndex("0101"),{0:[Ye,Qe],1:[kt],2:[kt]}),marching_squares_codes_defineProperty(Xe,ternaryToIndex("1010"),{0:[$e,Je],1:[Tt],2:[Tt]}),marching_squares_codes_defineProperty(Xe,ternaryToIndex("2121"),{0:[kt],1:[kt],2:[Ye,Qe]}),marching_squares_codes_defineProperty(Xe,ternaryToIndex("1212"),{0:[Tt],1:[Tt],2:[$e,Je]}),marching_squares_codes_defineProperty(Xe,ternaryToIndex("2120"),{0:[At],1:[At],2:[et,Qe]}),marching_squares_codes_defineProperty(Xe,ternaryToIndex("2021"),{0:[Ot],1:[Ot],2:[Ye,nt]}),marching_squares_codes_defineProperty(Xe,ternaryToIndex("1202"),{0:[It],1:[It],2:[$e,tt]}),marching_squares_codes_defineProperty(Xe,ternaryToIndex("0212"),{0:[Rt],1:[Rt],2:[Je,rt]}),marching_squares_codes_defineProperty(Xe,ternaryToIndex("0102"),{0:[et,Qe],1:[At],2:[At]}),marching_squares_codes_defineProperty(Xe,ternaryToIndex("0201"),{0:[Ye,nt],1:[Ot],2:[Ot]}),marching_squares_codes_defineProperty(Xe,ternaryToIndex("1020"),{0:[$e,tt],1:[It],2:[It]}),marching_squares_codes_defineProperty(Xe,ternaryToIndex("2010"),{0:[Je,rt],1:[Rt],2:[Rt]}),marching_squares_codes_defineProperty(Xe,ternaryToIndex("2020"),{0:[rt,tt],1:[Lt],2:[et,nt]}),marching_squares_codes_defineProperty(Xe,ternaryToIndex("0202"),{0:[nt,et],1:[Lt],2:[rt,tt]}),Xe),Dt={ISO_LINES:1,ISO_BANDS:2},Ft=.002,Nt={zIndex:0,zOffsetScale:1};function getVertexCode(e,t){return Array.isArray(t)?e<t[0]?0:e<t[1]?1:2:e>=t?1:0}function getCode(e){var t=e.cellWeights,n=e.x,i=e.y,o=e.width,a=e.height,s=e.threshold;e.thresholdValue&&(r.i.deprecated("thresholdValue","threshold")(),s=e.thresholdValue);var l=n<0,u=n>=o-1,c=i<0,p=i>=a-1,h=l||u||c||p,f={},d={};l||p?d.top=0:(f.top=t[(i+1)*o+n],d.top=getVertexCode(f.top,s)),u||p?d.topRight=0:(f.topRight=t[(i+1)*o+n+1],d.topRight=getVertexCode(f.topRight,s)),u||c?d.right=0:(f.right=t[i*o+n+1],d.right=getVertexCode(f.right,s)),l||c?d.current=0:(f.current=t[i*o+n],d.current=getVertexCode(f.current,s));var g=d.top,m=d.topRight,y=d.right,v=d.current,_=-1;Number.isFinite(s)&&(_=g<<3|m<<2|y<<1|v),Array.isArray(s)&&(_=g<<6|m<<4|y<<2|v);var b=0;return h||(b=getVertexCode((f.top+f.topRight+f.right+f.current)/4,s)),{code:_,meanCode:b}}function getVertices(e){var t=e.gridOrigin,n=e.cellSize,r=e.x,i=e.y,o=e.code,a=e.meanCode,s=e.type,l=void 0===s?Dt.ISO_LINES:s,u=Object.assign({},Nt,e.thresholdData),c=l===Dt.ISO_BANDS?jt[o]:Mt[o];Array.isArray(c)||(c=c[a]);var p=u.zIndex*Ft*u.zOffsetScale,h=(r+1)*n[0],f=(i+1)*n[1],d=t[0]+h,g=t[1]+f;if(l===Dt.ISO_BANDS){var m=[];return c.forEach(function(e){var t=[];e.forEach(function(e){var r=d+e[0]*n[0],i=g+e[1]*n[1];t.push([r,i,p])}),m.push(t)}),m}var y=[];return c.forEach(function(e){e.forEach(function(e){var t=d+e[0]*n[0],r=g+e[1]*n[1];y.push([t,r,p])})}),y}function generateContours(e){var t=e.thresholdData,n=(e.colors,e.cellWeights),r=e.gridSize,i=e.gridOrigin,o=e.cellSize,a=[],s=[],l=r[0],u=r[1];return t.forEach(function(e,t){for(var r=e.threshold,c=-1;c<l;c++)for(var p=-1;p<u;p++){var h=getCode({cellWeights:n,threshold:r,x:c,y:p,width:l,height:u}),f=h.code,d=h.meanCode,g={gridOrigin:i,cellSize:o,x:c,y:p,width:l,height:u,code:f,meanCode:d,thresholdData:e};if(Array.isArray(r)){g.type=Dt.ISO_BANDS,getVertices(g).forEach(function(e){s.push({vertices:e,threshold:r})})}else{g.type=Dt.ISO_LINES;for(var m=getVertices(g),y=0;y<m.length;y+=2)a.push({start:m[y],end:m[y+1],threshold:r})}}}),{contourSegments:a,contourPolygons:s}}function contour_layer_typeof(e){return(contour_layer_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function contour_layer_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function contour_layer_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function contour_layer_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function contour_layer_get(e,t,n){return(contour_layer_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var r=contour_layer_superPropBase(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function contour_layer_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=contour_layer_getPrototypeOf(e)););return e}function contour_layer_getPrototypeOf(e){return(contour_layer_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function contour_layer_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&contour_layer_setPrototypeOf(e,t)}function contour_layer_setPrototypeOf(e,t){return(contour_layer_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var Bt=[255,255,255,255],zt={cellSize:{type:"number",min:1,max:1e3,value:1e3},getPosition:{type:"accessor",value:function value(e){return e.position}},getWeight:{type:"accessor",value:function value(e){return 1}},contours:[{threshold:1}],fp64:!1,zOffsetScale:1},Ut=function(e){function ContourLayer(){return contour_layer_classCallCheck(this,ContourLayer),e=this,!(t=contour_layer_getPrototypeOf(ContourLayer).apply(this,arguments))||"object"!==contour_layer_typeof(t)&&"function"!=typeof t?contour_layer_assertThisInitialized(e):t;var e,t}var t,n,i;return contour_layer_inherits(ContourLayer,r["b"]),t=ContourLayer,(n=[{key:"initializeState",value:function initializeState(){var e=this.context.gl,t={id:"".concat(this.id,"-gpu-aggregator"),shaderCache:this.context.shaderCache};this.state={contourData:{},gridAggregator:new r.f(e,t),colorTrigger:0,strokeWidthTrigger:0}}},{key:"updateState",value:function updateState(e){var t=e.oldProps,n=e.props,r=e.changeFlags,i=!1,o=!1,a=this._getAggregationFlags({oldProps:t,props:n,changeFlags:r});a&&(i=!0,this.setState({countsData:null}),this._aggregateData(a)),this._shouldRebuildContours({oldProps:t,props:n})&&(o=!0,this._updateThresholdData(n)),i||o?this._generateContours():this._updateSubLayerTriggers(t,n)}},{key:"renderLayers",value:function renderLayers(){var e=this.state.contourData,t=e.contourSegments,n=e.contourPolygons,r=t&&t.length>0,i=n&&n.length>0;return[r&&new w(this._getLineLayerProps()),i&&new Se(this._getSolidPolygonLayerProps())]}},{key:"_aggregateData",value:function _aggregateData(e){var t=this.props,n=t.data,i=t.cellSize,o=t.getPosition,a=t.getWeight,s=t.gpuAggregation,l=t.fp64,u=t.coordinateSystem,c=Object(r.g)({data:n,cellSizeMeters:i,getPosition:o,getWeight:a,gpuAggregation:s,gpuGridAggregator:this.state.gridAggregator,fp64:l,coordinateSystem:u,viewport:this.context.viewport,boundingBox:this.state.boundingBox,aggregationFlags:e}),p=c.countsData,h=c.countsBuffer,f=c.gridSize,d=c.gridOrigin,g=c.cellSize,m=c.boundingBox;this.setState({countsData:p,countsBuffer:h,gridSize:f,gridOrigin:d,cellSize:g,boundingBox:m})}},{key:"_generateContours",value:function _generateContours(){var e=this.state,t=e.gridSize,n=e.gridOrigin,i=e.cellSize,o=e.thresholdData,a=this.state.countsData;a||(a=this.state.countsBuffer.getData(),this.setState({countsData:a}));var s=generateContours({thresholdData:o,cellWeights:r.f.getCellData({countsData:a}).cellWeights,gridSize:t,gridOrigin:n,cellSize:i});this.setState({contourData:s})}},{key:"_getAggregationFlags",value:function _getAggregationFlags(e){var t=e.oldProps,n=e.props,r=e.changeFlags,i=null;return(r.dataChanged||t.gpuAggregation!==n.gpuAggregation||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getPosition))&&(i=Object.assign({},i,{dataChanged:!0})),t.cellSize!==n.cellSize&&(i=Object.assign({},i,{cellSizeChanged:!0})),i}},{key:"_getLineLayerProps",value:function _getLineLayerProps(){var e=this.props.fp64,t=this.state,n=t.colorTrigger,r=t.strokeWidthTrigger;return contour_layer_get(contour_layer_getPrototypeOf(ContourLayer.prototype),"getSubLayerProps",this).call(this,{id:"contour-line-layer",data:this.state.contourData.contourSegments,fp64:e,getSourcePosition:function getSourcePosition(e){return e.start},getTargetPosition:function getTargetPosition(e){return e.end},getColor:this._onGetSublayerColor.bind(this),getStrokeWidth:this._onGetSublayerStrokeWidth.bind(this),colorTrigger:n,strokeWidthTrigger:r,updateTriggers:{getColor:n,getStrokeWidth:r}})}},{key:"_getSolidPolygonLayerProps",value:function _getSolidPolygonLayerProps(){var e=this.props.fp64,t=this.state.colorTrigger;return contour_layer_get(contour_layer_getPrototypeOf(ContourLayer.prototype),"getSubLayerProps",this).call(this,{id:"contour-solid-polygon-layer",data:this.state.contourData.contourPolygons,fp64:e,getPolygon:function getPolygon(e){return e.vertices},getFillColor:this._onGetSublayerColor.bind(this),colorTrigger:t,updateTriggers:{getFillColor:t}})}},{key:"_onGetSublayerColor",value:function _onGetSublayerColor(e){var t=this.props.contours,n=Bt;return t.forEach(function(t){Object(Ke.e)(t.threshold,e.threshold)&&(n=t.color||Bt)}),n}},{key:"_onGetSublayerStrokeWidth",value:function _onGetSublayerStrokeWidth(e){var t=this.props.contours,n=1;return t.some(function(t){return t.threshold===e.threshold&&(n=t.strokeWidth||1,!0)}),n}},{key:"_shouldRebuildContours",value:function _shouldRebuildContours(e){var t=e.oldProps,n=e.props;if(!t.contours||!t.zOffsetScale||t.contours.length!==n.contours.length||t.zOffsetScale!==n.zOffsetScale)return!0;var r=t.contours.map(function(e){return e.threshold}),i=n.contours.map(function(e){return e.threshold});return i.some(function(e,t){return!Object(Ke.e)(i[t],r[t])})}},{key:"_updateSubLayerTriggers",value:function _updateSubLayerTriggers(e,t){if(e&&e.contours&&t&&t.contours){var n=[],r=[],i=[],o=[];e.contours.forEach(function(e){n=n.concat(e.color),i.push(e.strokeWidth||1)}),t.contours.forEach(function(e){r=r.concat(e.color),o.push(e.strokeWidth||1)}),Object(Ke.e)(n,r)||this.state.colorTrigger++,Object(Ke.e)(i,o)||this.state.strokeWidthTrigger++}}},{key:"_updateThresholdData",value:function _updateThresholdData(e){var t=e.contours.map(function(t,n){return{threshold:t.threshold,zIndex:t.zIndex||n,zOffsetScale:e.zOffsetScale}});this.setState({thresholdData:t})}}])&&contour_layer_defineProperties(t.prototype,n),i&&contour_layer_defineProperties(t,i),ContourLayer}();Ut.layerName="ContourLayer",Ut.defaultProps=zt,n.d(t,"ArcLayer",function(){return p}),n.d(t,"IconLayer",function(){return _}),n.d(t,"LineLayer",function(){return w}),n.d(t,"PointCloudLayer",function(){return k}),n.d(t,"ScatterplotLayer",function(){return I}),n.d(t,"ScreenGridLayer",function(){return F}),n.d(t,"GridLayer",function(){return K}),n.d(t,"GridCellLayer",function(){return U}),n.d(t,"HexagonLayer",function(){return ae}),n.d(t,"HexagonCellLayer",function(){return Q}),n.d(t,"PathLayer",function(){return de}),n.d(t,"PolygonLayer",function(){return Pe}),n.d(t,"GeoJsonLayer",function(){return Te}),n.d(t,"TextLayer",function(){return He}),n.d(t,"ContourLayer",function(){return Ut}),n.d(t,"_SolidPolygonLayer",function(){return Se}),n.d(t,"_MultiIconLayer",function(){return Ae})},function(e,t,n){"use strict";n.r(t);var r=n(15),i=n(7);function getDeckInstance(e){var t=e.map,n=e.gl,i=e.deck;if(t.__deck)return t.__deck;var o={useDevicePixels:!0,_customRender:function _customRender(){return t.triggerRepaint()},parameters:{depthMask:!0,depthTest:!0,blendFunc:[n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA],blendEquation:n.FUNC_ADD},userData:{isExternal:!1,mapboxLayers:new Set}};return i?(i.setProps(o),i.props.userData.isExternal=!0):(Object.assign(o,{gl:n,width:!1,height:!1}),i=new r.c(o),t.on("remove",function(){i.finalize(),t.__deck=null})),t.__deck=i,t.on("render",function(){return afterRender(i,t)}),initEvents(t,i),i}function getViewState(e,t){var n=e.getCenter(),r=n.lng,i=n.lat;return Object.assign({longitude:r,latitude:i,zoom:e.getZoom(),bearing:e.getBearing(),pitch:e.getPitch()},t)}function afterRender(e,t){var n=e.props.userData,r=n.mapboxLayers;if(n.isExternal){var i=getViewState(t,{nearZMultiplier:.1,farZMultiplier:10});e.setProps({viewState:i});var o=Array.from(r,function(e){return e.id});e.layerManager.layerFilter=function(e){for(var t=0;t<o.length;t++){if(shouldDrawLayer(o[t],e.layer))return!1}return!0},e._drawLayers("mapbox-repaint")}e.needsRedraw({clearRedrawFlags:!0})}function shouldDrawLayer(e,t){for(var n=t;n;){if(n.id===e)return!0;n=n.parent}return!1}function updateLayers(e){if(!e.props.userData.isExternal){var t=[];e.props.userData.mapboxLayers.forEach(function(e){var n=new(0,e.props.type)(e.props);t.push(n)}),e.setProps({layers:t})}}function handleMouseEvent(e,t){var n;switch(e.layerManager.layerFilter=null,t.type){case"click":n=e._onClick;break;case"mousemove":case"pointermove":n=e._onPointerMove;break;case"mouseleave":case"pointerleave":n=e._onPointerLeave;break;default:return}t.offsetCenter||(t={offsetCenter:t.point,srcEvent:t.originalEvent});var r=e.layerManager.context.gl;Object(i.E)(r,{depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0]},function(){return n(t)})}function initEvents(e,t){var n=function pickingEventHandler(e){return handleMouseEvent(t,e)};t.eventManager?(t.eventManager.off({click:t._onClick,pointermove:t._onPointerMove,pointerleave:t._onPointerLeave}),t.eventManager.on({click:n,pointermove:n,pointerleave:n})):(e.on("click",n),e.on("mousemove",n),e.on("mouseleave",n))}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function MapboxLayer(e){if(_classCallCheck(this,MapboxLayer),!e.id)throw new Error("Layer must have an unique id");this.id=e.id,this.type="custom",this.renderingMode=e.renderingMode||"3d",this.map=null,this.deck=null,this.props=e}var e,t,n;return e=MapboxLayer,(t=[{key:"onAdd",value:function onAdd(e,t){var n,r;this.map=e,this.deck=getDeckInstance({map:e,gl:t,deck:this.props.deck}),n=this.deck,r=this,n.props.userData.mapboxLayers.add(r),updateLayers(n)}},{key:"onRemove",value:function onRemove(){var e,t;e=this.deck,t=this,e.props.userData.mapboxLayers.delete(t),updateLayers(e)}},{key:"setProps",value:function setProps(e){Object.assign(this.props,e,{id:this.id}),this.deck&&updateLayers(this.deck)}},{key:"render",value:function render(e,t){var n,r;this.deck.setProps({viewState:this._getViewState()}),n=this.deck,r=this,n.layerManager.layerFilter=function(e){return shouldDrawLayer(r.id,e.layer)},n._drawLayers("mapbox-repaint")}},{key:"_getViewState",value:function _getViewState(){var e=this.map,t=this.deck;return getViewState(e,{nearZMultiplier:t.height?1/t.height:1,farZMultiplier:1})}}])&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),MapboxLayer}();n.d(t,"MapboxLayer",function(){return o})},function(e,t,n){"use strict";var r=n(27),i=n(21),o=n(0),a=n(3),s=n(4),l=n(62);function getStorage(e){try{var t=window[e],n="__storage_test__";return t.setItem(n,n),t.removeItem(n),t}catch(e){return null}}var u=function(){function LocalStorage(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage";Object(a.a)(this,LocalStorage),this.storage=getStorage(n),this.id=e,this.config={},Object.assign(this.config,t),this._loadConfiguration()}return Object(s.a)(LocalStorage,[{key:"getConfiguration",value:function getConfiguration(){return this.config}},{key:"setConfiguration",value:function setConfiguration(e){return this.config={},this.updateConfiguration(e)}},{key:"updateConfiguration",value:function updateConfiguration(e){if(Object.assign(this.config,e),this.storage){var t=JSON.stringify(this.config);this.storage.setItem(this.id,t)}return this}},{key:"_loadConfiguration",value:function _loadConfiguration(){var e={};if(this.storage){var t=this.storage.getItem(this.id);e=t?JSON.parse(t):{}}return Object.assign(this.config,e),this}}]),LocalStorage}(),c=n(43),p=n(64),h={BLACK:30,RED:31,GREEN:32,YELLOW:33,BLUE:34,MAGENTA:35,CYAN:36,WHITE:37,BRIGHT_BLACK:90,BRIGHT_RED:91,BRIGHT_GREEN:92,BRIGHT_YELLOW:93,BRIGHT_BLUE:94,BRIGHT_MAGENTA:95,BRIGHT_CYAN:96,BRIGHT_WHITE:97};function getColor(e){return"string"==typeof e?h[e.toUpperCase()]||h.WHITE:e}function autobind(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["constructor"],n=Object.getPrototypeOf(e),r=Object.getOwnPropertyNames(n),i=!0,o=!1,a=void 0;try{for(var s,l=function _loop(){var n=s.value;"function"==typeof e[n]&&(t.find(function(e){return n===e})||(e[n]=e[n].bind(e)))},u=r[Symbol.iterator]();!(i=(s=u.next()).done);i=!0)l()}catch(e){o=!0,a=e}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}}function assert_assert(e,t){if(!e)throw new Error(t||"Assertion failed")}n.d(t,"a",function(){return m});var f={debug:l.b&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},d={enabled:!1,priority:0};function noop(){}var g={};function getTableHeader(e){for(var t in e)for(var n in e[t])return n||"untitled";return"empty"}var m=function(){function Log(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).id;Object(a.a)(this,Log),this.id=e,this.VERSION=l.a,this._startTs=Object(c.a)(),this._deltaTs=Object(c.a)(),this.LOG_THROTTLE_TIMEOUT=0,this._storage=new u("__probe-".concat(this.id,"__"),d),this.userData={},this.timeStamp("".concat(this.id," started")),autobind(this),Object.seal(this)}return Object(s.a)(Log,[{key:"isEnabled",value:function isEnabled(){return this._storage.config.enabled}},{key:"getPriority",value:function getPriority(){return this._storage.config.priority}},{key:"getLevel",value:function getLevel(){return this._storage.config.priority}},{key:"getTotal",value:function getTotal(){return Number((Object(c.a)()-this._startTs).toPrecision(10))}},{key:"getDelta",value:function getDelta(){return Number((Object(c.a)()-this._deltaTs).toPrecision(10))}},{key:"enable",value:function enable(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._storage.updateConfiguration({enabled:e}),this}},{key:"setLevel",value:function setLevel(e){return this._storage.updateConfiguration({priority:e}),this}},{key:"assert",value:function assert(e,t){assert_assert(e,t)}},{key:"warn",value:function warn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return this._getLogFunction({message:e,args:n,method:f.warn,once:!0})}},{key:"error",value:function error(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return this._getLogFunction({message:e,args:n,method:f.error})}},{key:"deprecated",value:function deprecated(e,t){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(t,"` instead"))}},{key:"removed",value:function removed(e,t){return this.error("`".concat(e,"` has been removed. Use `").concat(t,"` instead"))}},{key:"probe",value:function probe(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return this._getLogFunction({priority:e,message:t,args:r,method:f.log,time:!0,once:!0})}},{key:"log",value:function log(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return this._getLogFunction({priority:e,message:t,args:r,method:f.debug})}},{key:"info",value:function info(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return this._getLogFunction({priority:e,message:t,args:r,method:console.info})}},{key:"once",value:function once(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return this._getLogFunction({priority:e,message:t,args:r,method:f.debug||f.info,once:!0})}},{key:"table",value:function table(e,t,n){if(t){var r=getTableHeader(t);return this._getLogFunction({priority:e,message:t,args:n&&[n],tag:r,method:console.table||noop})}return noop}},{key:"image",value:function image(e){var t=e.priority,n=e.image,r=e.message,i=void 0===r?"":r,o=e.scale,a=void 0===o?1:o;return t>this.getPriority()?noop:l.b?this._logImageInBrowser({image:n,message:i,scale:a}):this._logImageInNode({image:n,message:i,scale:a})}},{key:"settings",value:function settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}},{key:"get",value:function get(e){return this._storage.config[e]}},{key:"set",value:function set(e,t){this._storage.updateConfiguration(Object(o.a)({},e,t))}},{key:"_logImageInNode",value:function _logImageInNode(e){var t=e.image,r=(e.message,e.scale),i=void 0===r?1:r,o=null;try{o=n(460)}catch(e){}return o?function(){return o(t,{fit:"box",width:"".concat(Math.round(80*i),"%")}).then(function(e){return console.log(e)})}:noop}},{key:"_logImageInBrowser",value:function _logImageInBrowser(e){var t=e.image,n=e.message,r=void 0===n?"":n,o=e.scale,a=void 0===o?1:o;if("string"==typeof t){var s=new Image;return s.onload=function(){var e,t=Object(p.a)(s,r,a);(e=console).log.apply(e,Object(i.a)(t))},s.src=t,noop}var l,u=t.nodeName||"";if("img"===u.toLowerCase())return(l=console).log.apply(l,Object(i.a)(Object(p.a)(t,r,a))),noop;if("canvas"===u.toLowerCase()){var c=new Image;return c.onload=function(){var e;return(e=console).log.apply(e,Object(i.a)(Object(p.a)(c,r,a)))},c.src=t.toDataURL(),noop}return noop}},{key:"time",value:function time(e,t){return this._getLogFunction({priority:e,message:t,method:console.time?console.time:console.info})}},{key:"timeEnd",value:function timeEnd(e,t){return this._getLogFunction({priority:e,message:t,method:console.timeEnd?console.timeEnd:console.info})}},{key:"timeStamp",value:function timeStamp(e,t){return this._getLogFunction({priority:e,message:t,method:console.timeStamp||noop})}},{key:"group",value:function group(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{collapsed:!1},r=(n=this._normalizeArguments({priority:e,message:t,opts:n})).collapsed;return this._getLogFunction({priority:e,message:t,opts:n,method:(r?console.groupCollapsed:console.group)||console.info})}},{key:"groupCollapsed",value:function groupCollapsed(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.group(e,t,Object.assign({},n,{collapsed:!0}))}},{key:"groupEnd",value:function groupEnd(e){return this._getLogFunction({priority:e,message:"",method:console.groupEnd||noop})}},{key:"withGroup",value:function withGroup(e,t,n){var r=this._normalizeArguments({priority:e,message:t});this.group(r);try{n()}finally{this.groupEnd(r.message)}}},{key:"trace",value:function trace(){console.trace&&console.trace()}},{key:"_shouldLog",value:function _shouldLog(e){return 0===(e=this._normalizePriority(e))||this.isEnabled()&&this.getPriority()>=e}},{key:"_getElapsedTime",value:function _getElapsedTime(){var e=this.getTotal(),t=this.getDelta();return this._deltaTs=Object(c.a)(),{total:e,delta:t}}},{key:"_getLogFunction",value:function _getLogFunction(e){if(this._shouldLog(e.priority)){var t=e.method;e=this._parseArguments(e),assert_assert(t);var n=e.message,r=e.tag||e.message;if(e.once){if(g[r])return noop;g[r]=Object(c.a)()}return n=this._decorateMessage(n,e),t.bind.apply(t,[console,n].concat(Object(i.a)(e.args)))}return noop}},{key:"_parseArguments",value:function _parseArguments(e){var t=this._normalizeArguments(e),n=this._getElapsedTime(),r=n.delta,i=n.total;return Object.assign(e,t,{delta:r,total:i})}},{key:"_normalizePriority",value:function _normalizePriority(e){var t;switch(Object(r.a)(e)){case"number":t=e;break;case"object":t=e.priority||0;break;default:t=0}return assert_assert(Number.isFinite(t)&&t>=0),t}},{key:"_normalizeArguments",value:function _normalizeArguments(e){var t=e.priority,n=e.message,i=e.args,o=void 0===i?[]:i,a=e.opts,s={priority:this._normalizePriority(t),message:n,args:o};switch(Object(r.a)(t)){case"string":case"function":void 0!==n&&o.unshift(n),Object.assign(s,{message:t});break;case"object":Object.assign(s,t)}return"function"==typeof s.message&&(s.message=this._shouldLog(s.priority)?s.message():""),assert_assert("string"==typeof s.message||"object"===Object(r.a)(s.message)),Object.assign(s,a)}},{key:"_decorateMessage",value:function _decorateMessage(e,t){if("string"==typeof e){var n="";if(t.time){var r=this._getElapsedTime().total;n=Object(p.c)(Object(p.b)(r))}e=t.time?"".concat(this.id,": ").concat(n,"  ").concat(e):"".concat(this.id,": ").concat(e),i=e,o=t.color,a=t.background,l.b||"string"!=typeof i||(o&&(o=getColor(o),i="[".concat(o,"m").concat(i,"[39m")),a&&(o=getColor(a),i="[".concat(a+10,"m").concat(i,"[49m"))),e=i}var i,o,a;return e}},{key:"priority",set:function set(e){return this._storage.updateConfiguration({priority:e}),this},get:function get(){return this._storage.config.priority}}]),Log}();m.VERSION=l.a},function(e,t,n){"use strict";var r=n(17),i=n(21),o=n(3),a=n(4),s=n(11),l=n(10),u=n(12),c=n(155),p=n(19);function validateVector(e,t){return e.length===t&&e.every(Number.isFinite)}var h=n(190),f=n(106),d=function(e){function Vector4(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return Object(o.a)(this,Vector4),e=Object(s.a)(this,Object(l.a)(Vector4).call(this)),Array.isArray(t)&&1===arguments.length?e.copy(t):e.set(t,n,r,i),e}return Object(u.a)(Vector4,e),Object(a.a)(Vector4,[{key:"applyMatrix4",value:function applyMatrix4(e){return e.transformVector(this,this),this}},{key:"ELEMENTS",get:function get(){return 4}},{key:"z",get:function get(){return this[2]},set:function set(e){return this[2]=Object(p.a)(e)}},{key:"w",get:function get(){return this[3]},set:function set(e){return this[3]=Object(p.a)(e)}}]),Vector4}(n(93).a),g=n(14),m=n(35),y=n(47),v=n(42);n.d(t,"a",function(){return b});var _=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];var b=function(e){function Matrix4(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Object(o.a)(this,Matrix4),e=Object(s.a)(this,Object(l.a)(Matrix4).call(this)),Array.isArray(n[0])&&1===arguments.length?e.copy(n[0]):e.identity(),e}return Object(u.a)(Matrix4,e),Object(a.a)(Matrix4,[{key:"setRowMajor",value:function setRowMajor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,u=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,c=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1,p=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,h=arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,f=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,d=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,g=arguments.length>15&&void 0!==arguments[15]?arguments[15]:1;return this[0]=e,this[1]=i,this[2]=l,this[3]=h,this[4]=t,this[5]=o,this[6]=u,this[7]=f,this[8]=n,this[9]=a,this[10]=c,this[11]=d,this[12]=r,this[13]=s,this[14]=p,this[15]=g,this.check()}},{key:"setColumnMajor",value:function setColumnMajor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,u=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,c=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1,p=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,h=arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,f=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,d=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,g=arguments.length>15&&void 0!==arguments[15]?arguments[15]:1;return this[0]=e,this[1]=t,this[2]=n,this[3]=r,this[4]=i,this[5]=o,this[6]=a,this[7]=s,this[8]=l,this[9]=u,this[10]=c,this[11]=p,this[12]=h,this[13]=f,this[14]=d,this[15]=g,this.check()}},{key:"copy",value:function copy(e){return this.setColumnMajor.apply(this,Object(i.a)(e))}},{key:"set",value:function set(){return this.setColumnMajor.apply(this,arguments)}},{key:"getElement",value:function getElement(e,t){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]?this[e][t]:this[t][e]}},{key:"setElement",value:function setElement(e,t,n){return arguments.length>3&&void 0!==arguments[3]&&arguments[3]?this[e][t]=Object(p.a)(n):this[t][e]=Object(p.a)(n),this}},{key:"determinant",value:function determinant(){return g.a(this)}},{key:"identity",value:function identity(){return this.copy(_)}},{key:"fromQuaternion",value:function fromQuaternion(e){return g.c(this,e),this.check()}},{key:"frustum",value:function frustum(e){var t=e.left,n=e.right,r=e.bottom,i=e.top,o=e.near,a=e.far;return g.d(this,t,n,r,i,o,a),this.check()}},{key:"lookAt",value:function lookAt(e){var t=e.eye,n=e.center,r=void 0===n?[0,0,0]:n,i=e.up,o=void 0===i?[0,1,0]:i;return g.f(this,t,r,o),this.check()}},{key:"ortho",value:function ortho(e){var t=e.left,n=e.right,r=e.bottom,i=e.top,o=e.near,a=void 0===o?.1:o,s=e.far,l=void 0===s?500:s;return g.h(this,t,n,r,i,a,l),this.check()}},{key:"orthographic",value:function orthographic(e){var t=e.fovy,n=void 0===t?45*Math.PI/180:t,r=e.aspect,i=void 0===r?1:r,o=e.focalDistance,a=void 0===o?1:o,s=e.near,l=void 0===s?.1:s,u=e.far,c=void 0===u?500:u;if(n>2*Math.PI)throw Error("radians");var p=n/2,h=a*Math.tan(p),f=h*i;return(new Matrix4).ortho({left:-f,right:f,bottom:-h,top:h,near:l,far:c})}},{key:"perspective",value:function perspective(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.fovy,n=e.fov,r=void 0===n?45*Math.PI/180:n,i=e.aspect,o=void 0===i?1:i,a=e.near,s=void 0===a?.1:a,l=e.far,u=void 0===l?500:l;if((t=t||r)>2*Math.PI)throw Error("radians");return g.i(this,t,o,s,u),this.check()}},{key:"transpose",value:function transpose(){return g.p(this,this),this.check()}},{key:"invert",value:function invert(){return g.e(this,this),this.check()}},{key:"multiplyLeft",value:function multiplyLeft(e){return g.g(this,e,this),this.check()}},{key:"multiplyRight",value:function multiplyRight(e){return g.g(this,this,e),this.check()}},{key:"rotateX",value:function rotateX(e){return g.k(this,this,e),this.check()}},{key:"rotateY",value:function rotateY(e){return g.l(this,this,e),this.check()}},{key:"rotateZ",value:function rotateZ(e){return g.m(this,this,e),this.check()}},{key:"rotateXYZ",value:function rotateXYZ(e){var t=Object(r.a)(e,3),n=t[0],i=t[1],o=t[2];return this.rotateX(n).rotateY(i).rotateZ(o)}},{key:"rotateAxis",value:function rotateAxis(e,t){return g.j(this,this,e,t),this.check()}},{key:"scale",value:function scale(e){return Array.isArray(e)?g.n(this,this,e):g.n(this,this,[e,e,e]),this.check()}},{key:"translate",value:function translate(e){return g.o(this,this,e),this.check()}},{key:"transformVector2",value:function transformVector2(e,t){return t=t||new h.a,m.h(t,e,this),validateVector(t,2),t}},{key:"transformVector3",value:function transformVector3(e,t){return t=t||new f.a,y.i(t,e,this),validateVector(t,3),t}},{key:"transformVector4",value:function transformVector4(e,t){return t=t||new d,v.c(t,e,this),validateVector(t,4),t.check()}},{key:"transformVector",value:function transformVector(e,t){switch(e.length){case 2:return this.transformVector2(e,t);case 3:return this.transformVector3(e,t);case 4:return this.transformVector4(e,t);default:throw new Error("Illegal vector")}}},{key:"transformDirection",value:function transformDirection(e,t){return this._transformVector(e,t,0)}},{key:"transformPoint",value:function transformPoint(e,t){return this._transformVector(e,t,1)}},{key:"_transformVector",value:function _transformVector(e,t,n){switch(e.length){case 2:t=t||new h.a,v.c(t,[e[0],e[1],0,n],this),t.length=2,validateVector(t,2);break;case 3:t=t||new f.a,v.c(t,[e[0],e[1],e[2],n],this),t.length=3,validateVector(t,3);break;case 4:if(Boolean(n)!==Boolean(e[3]))throw new Error("math.gl: Matrix4.transformPoint - invalid vector");t=t||new d,v.c(t,e,this),validateVector(t,4);break;default:throw new Error("Illegal vector")}return t}},{key:"makeRotationX",value:function makeRotationX(e){return this.identity().rotateX(e)}},{key:"makeTranslation",value:function makeTranslation(e,t,n){return this.identity().translate([e,t,n])}},{key:"ELEMENTS",get:function get(){return 16}}]),Matrix4}(c.a)}]);